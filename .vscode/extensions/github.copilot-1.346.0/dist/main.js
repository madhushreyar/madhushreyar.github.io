"use strict";var Vht=Object.create;var Fk=Object.defineProperty;var c2e=Object.getOwnPropertyDescriptor;var $ht=Object.getOwnPropertyNames;var zht=Object.getPrototypeOf,Yht=Object.prototype.hasOwnProperty;var s2e=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),a2e=t=>{throw TypeError(t)};var s=(t,e)=>Fk(t,"name",{value:e,configurable:!0});var Dh=(t,e)=>()=>(t&&(e=t(t=0)),e);var U=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ra=(t,e)=>{for(var r in e)Fk(t,r,{get:e[r],enumerable:!0})},l2e=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $ht(e))!Yht.call(t,i)&&i!==r&&Fk(t,i,{get:()=>e[i],enumerable:!(n=c2e(e,i))||n.enumerable});return t};var Ne=(t,e,r)=>(r=t!=null?Vht(zht(t)):{},l2e(e||!t||!t.__esModule?Fk(r,"default",{value:t,enumerable:!0}):r,t)),Kht=t=>l2e(Fk({},"__esModule",{value:!0}),t),yd=(t,e,r,n)=>{for(var i=n>1?void 0:n?c2e(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&Fk(e,r,i),i},na=(t,e)=>(r,n)=>e(r,n,t);var _ae=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&a2e("Object expected");var n,i;r&&(n=e[s2e("asyncDispose")]),n===void 0&&(n=e[s2e("dispose")],r&&(i=n)),typeof n!="function"&&a2e("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},Sae=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,c,l,u){return u=Error(l),u.name="SuppressedError",u.error=a,u.suppressed=c,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var c=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(c).then(o,l=>(i(l),o()))}catch(l){i(l)}if(r)throw e};return o()};var importMetaUrlShim,d=Dh(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var d2e=U(Rae=>{d();var u2e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Rae.encode=function(t){if(0<=t&&t<u2e.length)return u2e[t];throw new TypeError("Must be between 0 and 63: "+t)};Rae.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,c=43,l=47,u=26,f=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+f:t==c?62:t==l?63:-1}});var Bae=U(Pae=>{d();var f2e=d2e(),kae=5,p2e=1<<kae,m2e=p2e-1,h2e=p2e;function Jht(t){return t<0?(-t<<1)+1:(t<<1)+0}s(Jht,"toVLQSigned");function Xht(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(Xht,"fromVLQSigned");Pae.encode=s(function(e){var r="",n,i=Jht(e);do n=i&m2e,i>>>=kae,i>0&&(n|=h2e),r+=f2e.encode(n);while(i>0);return r},"base64VLQ_encode");Pae.decode=s(function(e,r,n){var i=e.length,o=0,a=0,c,l;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(l=f2e.decode(e.charCodeAt(r++)),l===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));c=!!(l&h2e),l&=m2e,o=o+(l<<a),a+=kae}while(c);n.value=Xht(o),n.rest=r},"base64VLQ_decode")});var Uk=U(Du=>{d();function Zht(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(Zht,"getArg");Du.getArg=Zht;var g2e=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,egt=/^data:.+\,.+$/;function d6(t){var e=t.match(g2e);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(d6,"urlParse");Du.urlParse=d6;function Ok(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(Ok,"urlGenerate");Du.urlGenerate=Ok;function Dae(t){var e=t,r=d6(t);if(r){if(!r.path)return t;e=r.path}for(var n=Du.isAbsolute(e),i=e.split(/\/+/),o,a=0,c=i.length-1;c>=0;c--)o=i[c],o==="."?i.splice(c,1):o===".."?a++:a>0&&(o===""?(i.splice(c+1,a),a=0):(i.splice(c,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Ok(r)):e}s(Dae,"normalize");Du.normalize=Dae;function A2e(t,e){t===""&&(t="."),e===""&&(e=".");var r=d6(e),n=d6(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Ok(r);if(r||e.match(egt))return e;if(n&&!n.host&&!n.path)return n.host=e,Ok(n);var i=e.charAt(0)==="/"?e:Dae(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,Ok(n)):i}s(A2e,"join");Du.join=A2e;Du.isAbsolute=function(t){return t.charAt(0)==="/"||g2e.test(t)};function tgt(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(tgt,"relative");Du.relative=tgt;var y2e=function(){var t=Object.create(null);return!("__proto__"in t)}();function C2e(t){return t}s(C2e,"identity");function rgt(t){return E2e(t)?"$"+t:t}s(rgt,"toSetString");Du.toSetString=y2e?C2e:rgt;function ngt(t){return E2e(t)?t.slice(1):t}s(ngt,"fromSetString");Du.fromSetString=y2e?C2e:ngt;function E2e(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(E2e,"isProtoString");function igt(t,e,r){var n=Qk(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Qk(t.name,e.name)}s(igt,"compareByOriginalPositions");Du.compareByOriginalPositions=igt;function ogt(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Qk(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Qk(t.name,e.name)}s(ogt,"compareByGeneratedPositionsDeflated");Du.compareByGeneratedPositionsDeflated=ogt;function Qk(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(Qk,"strcmp");function sgt(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Qk(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Qk(t.name,e.name)}s(sgt,"compareByGeneratedPositionsInflated");Du.compareByGeneratedPositionsInflated=sgt;function agt(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(agt,"parseSourceMapInput");Du.parseSourceMapInput=agt;function cgt(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=d6(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=A2e(Ok(n),e)}return Dae(e)}s(cgt,"computeSourceURL");Du.computeSourceURL=cgt});var Mae=U(v2e=>{d();var Nae=Uk(),Lae=Object.prototype.hasOwnProperty,u_=typeof Map<"u";function b1(){this._array=[],this._set=u_?new Map:Object.create(null)}s(b1,"ArraySet");b1.fromArray=s(function(e,r){for(var n=new b1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");b1.prototype.size=s(function(){return u_?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");b1.prototype.add=s(function(e,r){var n=u_?e:Nae.toSetString(e),i=u_?this.has(e):Lae.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(u_?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");b1.prototype.has=s(function(e){if(u_)return this._set.has(e);var r=Nae.toSetString(e);return Lae.call(this._set,r)},"ArraySet_has");b1.prototype.indexOf=s(function(e){if(u_){var r=this._set.get(e);if(r>=0)return r}else{var n=Nae.toSetString(e);if(Lae.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");b1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");b1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");v2e.ArraySet=b1});var I2e=U(b2e=>{d();var x2e=Uk();function lgt(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||x2e.compareByGeneratedPositionsInflated(t,e)<=0}s(lgt,"generatedPositionAfter");function Rq(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(Rq,"MappingList");Rq.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");Rq.prototype.add=s(function(e){lgt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");Rq.prototype.toArray=s(function(){return this._sorted||(this._array.sort(x2e.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");b2e.MappingList=Rq});var Fae=U(T2e=>{d();var f6=Bae(),vc=Uk(),kq=Mae().ArraySet,ugt=I2e().MappingList;function Qp(t){t||(t={}),this._file=vc.getArg(t,"file",null),this._sourceRoot=vc.getArg(t,"sourceRoot",null),this._skipValidation=vc.getArg(t,"skipValidation",!1),this._sources=new kq,this._names=new kq,this._mappings=new ugt,this._sourcesContents=null}s(Qp,"SourceMapGenerator");Qp.prototype._version=3;Qp.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new Qp({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=vc.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=vc.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");Qp.prototype.addMapping=s(function(e){var r=vc.getArg(e,"generated"),n=vc.getArg(e,"original",null),i=vc.getArg(e,"source",null),o=vc.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");Qp.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=vc.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[vc.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[vc.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");Qp.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=vc.relative(o,i));var a=new kq,c=new kq;this._mappings.unsortedForEach(function(l){if(l.source===i&&l.originalLine!=null){var u=e.originalPositionFor({line:l.originalLine,column:l.originalColumn});u.source!=null&&(l.source=u.source,n!=null&&(l.source=vc.join(n,l.source)),o!=null&&(l.source=vc.relative(o,l.source)),l.originalLine=u.line,l.originalColumn=u.column,u.name!=null&&(l.name=u.name))}var f=l.source;f!=null&&!a.has(f)&&a.add(f);var p=l.name;p!=null&&!c.has(p)&&c.add(p)},this),this._sources=a,this._names=c,e.sources.forEach(function(l){var u=e.sourceContentFor(l);u!=null&&(n!=null&&(l=vc.join(n,l)),o!=null&&(l=vc.relative(o,l)),this.setSourceContent(l,u))},this)},"SourceMapGenerator_applySourceMap");Qp.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");Qp.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,c="",l,u,f,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],l="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)l+=";",r++;else if(h>0){if(!vc.compareByGeneratedPositionsInflated(u,m[h-1]))continue;l+=","}l+=f6.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),l+=f6.encode(p-a),a=p,l+=f6.encode(u.originalLine-1-i),i=u.originalLine-1,l+=f6.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(f=this._names.indexOf(u.name),l+=f6.encode(f-o),o=f)),c+=l}return c},"SourceMapGenerator_serializeMappings");Qp.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=vc.relative(r,n));var i=vc.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");Qp.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");Qp.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");T2e.SourceMapGenerator=Qp});var w2e=U(d_=>{d();d_.GREATEST_LOWER_BOUND=1;d_.LEAST_UPPER_BOUND=2;function Oae(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,c=i(r,n[a],!0);return c===0?a:c>0?e-a>1?Oae(a,e,r,n,i,o):o==d_.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?Oae(t,a,r,n,i,o):o==d_.LEAST_UPPER_BOUND?a:t<0?-1:t}s(Oae,"recursiveSearch");d_.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=Oae(-1,r.length,e,r,n,i||d_.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var S2e=U(_2e=>{d();function Qae(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(Qae,"swap");function dgt(t,e){return Math.round(t+Math.random()*(e-t))}s(dgt,"randomIntInRange");function Uae(t,e,r,n){if(r<n){var i=dgt(r,n),o=r-1;Qae(t,i,n);for(var a=t[n],c=r;c<n;c++)e(t[c],a)<=0&&(o+=1,Qae(t,o,c));Qae(t,o+1,c);var l=o+1;Uae(t,e,r,l-1),Uae(t,e,l+1,n)}}s(Uae,"doQuickSort");_2e.quickSort=function(t,e){Uae(t,e,0,t.length-1)}});var k2e=U(Pq=>{d();var kr=Uk(),qae=w2e(),qk=Mae().ArraySet,fgt=Bae(),p6=S2e().quickSort;function Ps(t,e){var r=t;return typeof t=="string"&&(r=kr.parseSourceMapInput(t)),r.sections!=null?new Nh(r,e):new Kl(r,e)}s(Ps,"SourceMapConsumer");Ps.fromSourceMap=function(t,e){return Kl.fromSourceMap(t,e)};Ps.prototype._version=3;Ps.prototype.__generatedMappings=null;Object.defineProperty(Ps.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});Ps.prototype.__originalMappings=null;Object.defineProperty(Ps.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});Ps.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");Ps.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");Ps.GENERATED_ORDER=1;Ps.ORIGINAL_ORDER=2;Ps.GREATEST_LOWER_BOUND=1;Ps.LEAST_UPPER_BOUND=2;Ps.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||Ps.GENERATED_ORDER,a;switch(o){case Ps.GENERATED_ORDER:a=this._generatedMappings;break;case Ps.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var c=this.sourceRoot;a.map(function(l){var u=l.source===null?null:this._sources.at(l.source);return u=kr.computeSourceURL(c,u,this._sourceMapURL),{source:u,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:this._names.at(l.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");Ps.prototype.allGeneratedPositionsFor=s(function(e){var r=kr.getArg(e,"line"),n={source:kr.getArg(e,"source"),originalLine:r,originalColumn:kr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,qae.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var c=a.originalLine;a&&a.originalLine===c;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var l=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==l;)i.push({line:kr.getArg(a,"generatedLine",null),column:kr.getArg(a,"generatedColumn",null),lastColumn:kr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");Pq.SourceMapConsumer=Ps;function Kl(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sources"),o=kr.getArg(r,"names",[]),a=kr.getArg(r,"sourceRoot",null),c=kr.getArg(r,"sourcesContent",null),l=kr.getArg(r,"mappings"),u=kr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=kr.normalize(a)),i=i.map(String).map(kr.normalize).map(function(f){return a&&kr.isAbsolute(a)&&kr.isAbsolute(f)?kr.relative(a,f):f}),this._names=qk.fromArray(o.map(String),!0),this._sources=qk.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(f){return kr.computeSourceURL(a,f,e)}),this.sourceRoot=a,this.sourcesContent=c,this._mappings=l,this._sourceMapURL=e,this.file=u}s(Kl,"BasicSourceMapConsumer");Kl.prototype=Object.create(Ps.prototype);Kl.prototype.consumer=Ps;Kl.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=kr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Kl.fromSourceMap=s(function(e,r){var n=Object.create(Kl.prototype),i=n._names=qk.fromArray(e._names.toArray(),!0),o=n._sources=qk.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return kr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),c=n.__generatedMappings=[],l=n.__originalMappings=[],u=0,f=a.length;u<f;u++){var p=a[u],m=new R2e;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),l.push(m)),c.push(m)}return p6(n.__originalMappings,kr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");Kl.prototype._version=3;Object.defineProperty(Kl.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function R2e(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(R2e,"Mapping");Kl.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,c=0,l=0,u=e.length,f=0,p={},m={},h=[],g=[],y,E,x,b,_;f<u;)if(e.charAt(f)===";")n++,f++,i=0;else if(e.charAt(f)===",")f++;else{for(y=new R2e,y.generatedLine=n,b=f;b<u&&!this._charIsMappingSeparator(e,b);b++);if(E=e.slice(f,b),x=p[E],x)f+=E.length;else{for(x=[];f<b;)fgt.decode(e,f,m),_=m.value,f=m.rest,x.push(_);if(x.length===2)throw new Error("Found a source, but no line and column");if(x.length===3)throw new Error("Found a source and line, but no column");p[E]=x}y.generatedColumn=i+x[0],i=y.generatedColumn,x.length>1&&(y.source=c+x[1],c+=x[1],y.originalLine=o+x[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+x[3],a=y.originalColumn,x.length>4&&(y.name=l+x[4],l+=x[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}p6(g,kr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,p6(h,kr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");Kl.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return qae.search(e,r,o,a)},"SourceMapConsumer_findMapping");Kl.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");Kl.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",kr.compareByGeneratedPositionsDeflated,kr.getArg(e,"bias",Ps.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=kr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=kr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=kr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:kr.getArg(i,"originalLine",null),column:kr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");Kl.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");Kl.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=kr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=kr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");Kl.prototype.generatedPositionFor=s(function(e){var r=kr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:kr.getArg(e,"line"),originalColumn:kr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",kr.compareByOriginalPositions,kr.getArg(e,"bias",Ps.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:kr.getArg(o,"generatedLine",null),column:kr.getArg(o,"generatedColumn",null),lastColumn:kr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Pq.BasicSourceMapConsumer=Kl;function Nh(t,e){var r=t;typeof t=="string"&&(r=kr.parseSourceMapInput(t));var n=kr.getArg(r,"version"),i=kr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new qk,this._names=new qk;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var c=kr.getArg(a,"offset"),l=kr.getArg(c,"line"),u=kr.getArg(c,"column");if(l<o.line||l===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=c,{generatedOffset:{generatedLine:l+1,generatedColumn:u+1},consumer:new Ps(kr.getArg(a,"map"),e)}})}s(Nh,"IndexedSourceMapConsumer");Nh.prototype=Object.create(Ps.prototype);Nh.prototype.constructor=Ps;Nh.prototype._version=3;Object.defineProperty(Nh.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});Nh.prototype.originalPositionFor=s(function(e){var r={generatedLine:kr.getArg(e,"line"),generatedColumn:kr.getArg(e,"column")},n=qae.search(r,this._sections,function(o,a){var c=o.generatedLine-a.generatedOffset.generatedLine;return c||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");Nh.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");Nh.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");Nh.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(kr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");Nh.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var c=o[a],l=i.consumer._sources.at(c.source);l=kr.computeSourceURL(i.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=i.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var f={source:l,generatedLine:c.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(i.generatedOffset.generatedLine===c.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(f),typeof f.originalLine=="number"&&this.__originalMappings.push(f)}p6(this.__generatedMappings,kr.compareByGeneratedPositionsDeflated),p6(this.__originalMappings,kr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Pq.IndexedSourceMapConsumer=Nh});var B2e=U(P2e=>{d();var pgt=Fae().SourceMapGenerator,Bq=Uk(),mgt=/(\r?\n)/,hgt=10,Hk="$$$isSourceNode$$$";function g0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[Hk]=!0,n!=null&&this.add(n)}s(g0,"SourceNode");g0.fromStringWithSourceMap=s(function(e,r,n){var i=new g0,o=e.split(mgt),a=0,c=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),l=1,u=0,f=null;return r.eachMapping(function(m){if(f!==null)if(l<m.generatedLine)p(f,c()),l++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(f,g),f=m;return}for(;l<m.generatedLine;)i.add(c()),l++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}f=m},this),a<o.length&&(f&&p(f,c()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=Bq.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?Bq.join(n,m.source):m.source;i.add(new g0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");g0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Hk]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");g0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Hk]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");g0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Hk]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");g0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");g0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[Hk]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");g0.prototype.setSourceContent=s(function(e,r){this.sourceContents[Bq.toSetString(e)]=r},"SourceNode_setSourceContent");g0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Hk]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(Bq.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");g0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");g0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new pgt(e),i=!1,o=null,a=null,c=null,l=null;return this.walk(function(u,f){r.code+=u,f.source!==null&&f.line!==null&&f.column!==null?((o!==f.source||a!==f.line||c!==f.column||l!==f.name)&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name}),o=f.source,a=f.line,c=f.column,l=f.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===hgt?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:f.source,original:{line:f.line,column:f.column},generated:{line:r.line,column:r.column},name:f.name})):r.column++}),this.walkSourceContents(function(u,f){n.setSourceContent(u,f)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");P2e.SourceNode=g0});var D2e=U(Dq=>{d();Dq.SourceMapGenerator=Fae().SourceMapGenerator;Dq.SourceMapConsumer=k2e().SourceMapConsumer;Dq.SourceNode=B2e().SourceNode});var L2e=U((ACr,N2e)=>{d();var ggt=Object.prototype.toString,Hae=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Agt(t){return ggt.call(t).slice(8,-1)==="ArrayBuffer"}s(Agt,"isArrayBuffer");function ygt(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return Hae?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(ygt,"fromArrayBuffer");function Cgt(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Hae?Buffer.from(t,e):new Buffer(t,e)}s(Cgt,"fromString");function Egt(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return Agt(t)?ygt(t,e,r):typeof t=="string"?Cgt(t,e):Hae?Buffer.from(t):new Buffer(t)}s(Egt,"bufferFrom");N2e.exports=Egt});var W2e=U((p_,Vae)=>{d();var vgt=D2e().SourceMapConsumer,Wae=require("path"),jA;try{jA=require("fs"),(!jA.existsSync||!jA.readFileSync)&&(jA=null)}catch{}var xgt=L2e();function M2e(t,e){return t.require(e)}s(M2e,"dynamicRequire");var F2e=!1,O2e=!1,Gae=!1,m6="auto",f_={},h6={},bgt=/^data:application\/json[^,]+base64,/,Jx=[],Xx=[];function $ae(){return m6==="browser"?!0:m6==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s($ae,"isInBrowser");function Igt(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(Igt,"hasGlobalProcessEventEmitter");function Tgt(){return typeof process=="object"&&process!==null?process.version:""}s(Tgt,"globalProcessVersion");function wgt(){if(typeof process=="object"&&process!==null)return process.stderr}s(wgt,"globalProcessStderr");function _gt(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(_gt,"globalProcessExit");function Nq(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(Nq,"handlerExec");var zae=Nq(Jx);Jx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in f_)return f_[t];var e="";try{if(jA)jA.existsSync(t)&&(e=jA.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return f_[t]=e});function jae(t,e){if(!t)return e;var r=Wae.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+Wae.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+Wae.resolve(r.slice(i.length),e)}s(jae,"supportRelativeURL");function Sgt(t){var e;if($ae())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=zae(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(Sgt,"retrieveSourceMapURL");var Yae=Nq(Xx);Xx.push(function(t){var e=Sgt(t);if(!e)return null;var r;if(bgt.test(e)){var n=e.slice(e.indexOf(",")+1);r=xgt(n,"base64").toString(),e=t}else e=jae(t,e),r=zae(e);return r?{url:e,map:r}:null});function Kae(t){var e=h6[t.source];if(!e){var r=Yae(t.source);r?(e=h6[t.source]={url:r.url,map:new vgt(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var c=jae(e.url,i);f_[c]=a}})):e=h6[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=jae(e.url,n.source),n}return t}s(Kae,"mapSourcePosition");function U2e(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=Kae({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+U2e(e[2])+")":t}s(U2e,"mapEvalOrigin");function Rgt(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,c=this.isConstructor(),l=!(this.isToplevel()||c);if(l){var u=this.getTypeName();u==="[object Object]"&&(u="null");var f=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,f&&o.indexOf("."+f)!=o.length-f.length-1&&(i+=" [as "+f+"]")):i+=u+"."+(f||"<anonymous>")}else c?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(Rgt,"CallSiteToString");function Q2e(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=Rgt,e}s(Q2e,"cloneCallSite");function q2e(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(Tgt())?0:62;n===1&&i>a&&!$ae()&&!t.isEval()&&(i-=a);var c=Kae({source:r,line:n,column:i});e.curPosition=c,t=Q2e(t);var l=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?l():e.nextPosition.name||l()},t.getFileName=function(){return c.source},t.getLineNumber=function(){return c.line},t.getColumnNumber=function(){return c.column+1},t.getScriptNameOrSourceURL=function(){return c.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=U2e(u),t=Q2e(t),t.getEvalOrigin=function(){return u}),t}s(q2e,"wrapCallSite");function kgt(t,e){Gae&&(f_={},h6={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],c=e.length-1;c>=0;c--)a.push(`
    at `+q2e(e[c],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(kgt,"prepareStackTrace");function H2e(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=f_[r];if(!o&&jA&&jA.existsSync(r))try{o=jA.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(H2e,"getErrorSource");function Pgt(t){var e=H2e(t),r=wgt();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),_gt(1)}s(Pgt,"printErrorAndExit");function Bgt(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return Pgt(arguments[1])}return t.apply(this,arguments)}}s(Bgt,"shimEmitUncaughtException");var Dgt=Jx.slice(0),Ngt=Xx.slice(0);p_.wrapCallSite=q2e;p_.getErrorSource=H2e;p_.mapSourcePosition=Kae;p_.retrieveSourceMap=Yae;p_.install=function(t){if(t=t||{},t.environment&&(m6=t.environment,["node","browser","auto"].indexOf(m6)===-1))throw new Error("environment "+m6+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(Jx.length=0),Jx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Xx.length=0),Xx.unshift(t.retrieveSourceMap)),t.hookRequire&&!$ae()){var e=M2e(Vae,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return f_[a]=o,h6[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(Gae||(Gae="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),F2e||(F2e=!0,Error.prepareStackTrace=kgt),!O2e){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=M2e(Vae,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&Igt()&&(O2e=!0,Bgt())}};p_.resetRetrieveHandlers=function(){Jx.length=0,Xx.length=0,Jx=Dgt.slice(0),Xx=Ngt.slice(0),Yae=Nq(Xx),zae=Nq(Jx)}});var Vi=U((Mq,V2e)=>{d();(function(t,e){typeof Mq=="object"?V2e.exports=Mq=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(Mq,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function x(){}return s(x,"F"),function(b){var _;return x.prototype=b,_=new x,x.prototype=null,_}}(),a={},c=a.lib={},l=c.Base=function(){return{extend:s(function(x){var b=o(this);return x&&b.mixIn(x),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},"extend"),create:s(function(){var x=this.extend();return x.init.apply(x,arguments),x},"create"),init:s(function(){},"init"),mixIn:s(function(x){for(var b in x)x.hasOwnProperty(b)&&(this[b]=x[b]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=c.WordArray=l.extend({init:s(function(x,b){x=this.words=x||[],b!=r?this.sigBytes=b:this.sigBytes=x.length*4},"init"),toString:s(function(x){return(x||p).stringify(this)},"toString"),concat:s(function(x){var b=this.words,_=x.words,k=this.sigBytes,P=x.sigBytes;if(this.clamp(),k%4)for(var N=0;N<P;N++){var M=_[N>>>2]>>>24-N%4*8&255;b[k+N>>>2]|=M<<24-(k+N)%4*8}else for(var J=0;J<P;J+=4)b[k+J>>>2]=_[J>>>2];return this.sigBytes+=P,this},"concat"),clamp:s(function(){var x=this.words,b=this.sigBytes;x[b>>>2]&=4294967295<<32-b%4*8,x.length=e.ceil(b/4)},"clamp"),clone:s(function(){var x=l.clone.call(this);return x.words=this.words.slice(0),x},"clone"),random:s(function(x){for(var b=[],_=0;_<x;_+=4)b.push(i());return new u.init(b,x)},"random")}),f=a.enc={},p=f.Hex={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k+=2)_[k>>>3]|=parseInt(x.substr(k,2),16)<<24-k%8*4;return new u.init(_,b/2)},"parse")},m=f.Latin1={stringify:s(function(x){for(var b=x.words,_=x.sigBytes,k=[],P=0;P<_;P++){var N=b[P>>>2]>>>24-P%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(x){for(var b=x.length,_=[],k=0;k<b;k++)_[k>>>2]|=(x.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,b)},"parse")},h=f.Utf8={stringify:s(function(x){try{return decodeURIComponent(escape(m.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(x){return m.parse(unescape(encodeURIComponent(x)))},"parse")},g=c.BufferedBlockAlgorithm=l.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(x){typeof x=="string"&&(x=h.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},"_append"),_process:s(function(x){var b,_=this._data,k=_.words,P=_.sigBytes,N=this.blockSize,M=N*4,J=P/M;x?J=e.ceil(J):J=e.max((J|0)-this._minBufferSize,0);var pe=J*N,Y=e.min(pe*4,P);if(pe){for(var G=0;G<pe;G+=N)this._doProcessBlock(k,G);b=k.splice(0,pe),_.sigBytes-=Y}return new u.init(b,Y)},"_process"),clone:s(function(){var x=l.clone.call(this);return x._data=this._data.clone(),x},"clone"),_minBufferSize:0}),y=c.Hasher=g.extend({cfg:l.extend(),init:s(function(x){this.cfg=this.cfg.extend(x),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(x){return this._append(x),this._process(),this},"update"),finalize:s(function(x){x&&this._append(x);var b=this._doFinalize();return b},"finalize"),blockSize:512/32,_createHelper:s(function(x){return function(b,_){return new x.init(_).finalize(b)}},"_createHelper"),_createHmacHelper:s(function(x){return function(b,_){return new E.HMAC.init(x,_).finalize(b)}},"_createHmacHelper")}),E=a.algo={};return a}(Math);return t})});var E6=U((Fq,$2e)=>{d();(function(t,e){typeof Fq=="object"?$2e.exports=Fq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Fq,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},c=a.Word=i.extend({init:s(function(u,f){this.high=u,this.low=f},"init")}),l=a.WordArray=i.extend({init:s(function(u,f){u=this.words=u||[],f!=e?this.sigBytes=f:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,f=u.length,p=[],m=0;m<f;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),f=u.words=this.words.slice(0),p=f.length,m=0;m<p;m++)f[m]=f[m].clone();return u},"clone")})}(),t})});var Y2e=U((Oq,z2e)=>{d();(function(t,e){typeof Oq=="object"?z2e.exports=Oq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Oq,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var c=a.byteLength,l=[],u=0;u<c;u++)l[u>>>2]|=a[u]<<24-u%4*8;i.call(this,l,c)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var J2e=U((Qq,K2e)=>{d();(function(t,e){typeof Qq=="object"?K2e.exports=Qq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Qq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=l[p>>>2]>>>16-p%4*8&65535;f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=c.charCodeAt(f)<<16-f%2*16;return n.create(u,l*2)},"parse")};i.Utf16LE={stringify:s(function(c){for(var l=c.words,u=c.sigBytes,f=[],p=0;p<u;p+=2){var m=a(l[p>>>2]>>>16-p%4*8&65535);f.push(String.fromCharCode(m))}return f.join("")},"stringify"),parse:s(function(c){for(var l=c.length,u=[],f=0;f<l;f++)u[f>>>1]|=a(c.charCodeAt(f)<<16-f%2*16);return n.create(u,l*2)},"parse")};function a(c){return c<<8&4278255360|c>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var eb=U((Uq,X2e)=>{d();(function(t,e){typeof Uq=="object"?X2e.exports=Uq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Uq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=l[m>>>2]>>>24-m%4*8&255,g=l[m+1>>>2]>>>24-(m+1)%4*8&255,y=l[m+2>>>2]>>>24-(m+2)%4*8&255,E=h<<16|g<<8|y,x=0;x<4&&m+x*.75<u;x++)p.push(f.charAt(E>>>6*(3-x)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},"stringify"),parse:s(function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<u.length;p++)f[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=c.indexOf(m);h!==-1&&(l=h)}return a(c,l,f)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64})});var eRe=U((qq,Z2e)=>{d();(function(t,e){typeof qq=="object"?Z2e.exports=qq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(qq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(c,l){l===void 0&&(l=!0);var u=c.words,f=c.sigBytes,p=l?this._safe_map:this._map;c.clamp();for(var m=[],h=0;h<f;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,E=u[h+2>>>2]>>>24-(h+2)%4*8&255,x=g<<16|y<<8|E,b=0;b<4&&h+b*.75<f;b++)m.push(p.charAt(x>>>6*(3-b)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(c,l){l===void 0&&(l=!0);var u=c.length,f=l?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<f.length;m++)p[f.charCodeAt(m)]=m}var h=f.charAt(64);if(h){var g=c.indexOf(h);g!==-1&&(u=g)}return a(c,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var f=[],p=0,m=0;m<l;m++)if(m%4){var h=u[c.charCodeAt(m-1)]<<m%4*2,g=u[c.charCodeAt(m)]>>>6-m%4*2,y=h|g;f[p>>>2]|=y<<24-p%4*8,p++}return n.create(f,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var tb=U((Hq,tRe)=>{d();(function(t,e){typeof Hq=="object"?tRe.exports=Hq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Hq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[];(function(){for(var h=0;h<64;h++)c[h]=e.abs(e.sin(h+1))*4294967296|0})();var l=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var E=g+y,x=h[E];h[E]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var b=this._hash.words,_=h[g+0],k=h[g+1],P=h[g+2],N=h[g+3],M=h[g+4],J=h[g+5],pe=h[g+6],Y=h[g+7],G=h[g+8],H=h[g+9],ce=h[g+10],ie=h[g+11],V=h[g+12],Q=h[g+13],z=h[g+14],re=h[g+15],fe=b[0],ne=b[1],me=b[2],he=b[3];fe=u(fe,ne,me,he,_,7,c[0]),he=u(he,fe,ne,me,k,12,c[1]),me=u(me,he,fe,ne,P,17,c[2]),ne=u(ne,me,he,fe,N,22,c[3]),fe=u(fe,ne,me,he,M,7,c[4]),he=u(he,fe,ne,me,J,12,c[5]),me=u(me,he,fe,ne,pe,17,c[6]),ne=u(ne,me,he,fe,Y,22,c[7]),fe=u(fe,ne,me,he,G,7,c[8]),he=u(he,fe,ne,me,H,12,c[9]),me=u(me,he,fe,ne,ce,17,c[10]),ne=u(ne,me,he,fe,ie,22,c[11]),fe=u(fe,ne,me,he,V,7,c[12]),he=u(he,fe,ne,me,Q,12,c[13]),me=u(me,he,fe,ne,z,17,c[14]),ne=u(ne,me,he,fe,re,22,c[15]),fe=f(fe,ne,me,he,k,5,c[16]),he=f(he,fe,ne,me,pe,9,c[17]),me=f(me,he,fe,ne,ie,14,c[18]),ne=f(ne,me,he,fe,_,20,c[19]),fe=f(fe,ne,me,he,J,5,c[20]),he=f(he,fe,ne,me,ce,9,c[21]),me=f(me,he,fe,ne,re,14,c[22]),ne=f(ne,me,he,fe,M,20,c[23]),fe=f(fe,ne,me,he,H,5,c[24]),he=f(he,fe,ne,me,z,9,c[25]),me=f(me,he,fe,ne,N,14,c[26]),ne=f(ne,me,he,fe,G,20,c[27]),fe=f(fe,ne,me,he,Q,5,c[28]),he=f(he,fe,ne,me,P,9,c[29]),me=f(me,he,fe,ne,Y,14,c[30]),ne=f(ne,me,he,fe,V,20,c[31]),fe=p(fe,ne,me,he,J,4,c[32]),he=p(he,fe,ne,me,G,11,c[33]),me=p(me,he,fe,ne,ie,16,c[34]),ne=p(ne,me,he,fe,z,23,c[35]),fe=p(fe,ne,me,he,k,4,c[36]),he=p(he,fe,ne,me,M,11,c[37]),me=p(me,he,fe,ne,Y,16,c[38]),ne=p(ne,me,he,fe,ce,23,c[39]),fe=p(fe,ne,me,he,Q,4,c[40]),he=p(he,fe,ne,me,_,11,c[41]),me=p(me,he,fe,ne,N,16,c[42]),ne=p(ne,me,he,fe,pe,23,c[43]),fe=p(fe,ne,me,he,H,4,c[44]),he=p(he,fe,ne,me,V,11,c[45]),me=p(me,he,fe,ne,re,16,c[46]),ne=p(ne,me,he,fe,P,23,c[47]),fe=m(fe,ne,me,he,_,6,c[48]),he=m(he,fe,ne,me,Y,10,c[49]),me=m(me,he,fe,ne,z,15,c[50]),ne=m(ne,me,he,fe,J,21,c[51]),fe=m(fe,ne,me,he,V,6,c[52]),he=m(he,fe,ne,me,N,10,c[53]),me=m(me,he,fe,ne,ce,15,c[54]),ne=m(ne,me,he,fe,k,21,c[55]),fe=m(fe,ne,me,he,G,6,c[56]),he=m(he,fe,ne,me,re,10,c[57]),me=m(me,he,fe,ne,pe,15,c[58]),ne=m(ne,me,he,fe,Q,21,c[59]),fe=m(fe,ne,me,he,M,6,c[60]),he=m(he,fe,ne,me,ie,10,c[61]),me=m(me,he,fe,ne,P,15,c[62]),ne=m(ne,me,he,fe,H,21,c[63]),b[0]=b[0]+fe|0,b[1]=b[1]+ne|0,b[2]=b[2]+me|0,b[3]=b[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,E=h.sigBytes*8;g[E>>>5]|=128<<24-E%32;var x=e.floor(y/4294967296),b=y;g[(E+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(E+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,P=0;P<4;P++){var N=k[P];k[P]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,E,x,b,_){var k=h+(g&y|~g&E)+x+_;return(k<<b|k>>>32-b)+g}s(u,"FF");function f(h,g,y,E,x,b,_){var k=h+(g&E|y&~E)+x+_;return(k<<b|k>>>32-b)+g}s(f,"GG");function p(h,g,y,E,x,b,_){var k=h+(g^y^E)+x+_;return(k<<b|k>>>32-b)+g}s(p,"HH");function m(h,g,y,E,x,b,_){var k=h+(y^(g|~E))+x+_;return(k<<b|k>>>32-b)+g}s(m,"II"),r.MD5=o._createHelper(l),r.HmacMD5=o._createHmacHelper(l)}(Math),t.MD5})});var Jae=U((Wq,rRe)=>{d();(function(t,e){typeof Wq=="object"?rRe.exports=Wq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Wq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],c=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(l,u){for(var f=this._hash.words,p=f[0],m=f[1],h=f[2],g=f[3],y=f[4],E=0;E<80;E++){if(E<16)a[E]=l[u+E]|0;else{var x=a[E-3]^a[E-8]^a[E-14]^a[E-16];a[E]=x<<1|x>>>31}var b=(p<<5|p>>>27)+y+a[E];E<20?b+=(m&h|~m&g)+1518500249:E<40?b+=(m^h^g)+1859775393:E<60?b+=(m&h|m&g|h&g)-1894007588:b+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+m|0,f[2]=f[2]+h|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var l=this._data,u=l.words,f=this._nDataBytes*8,p=l.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),u[(p+64>>>9<<4)+15]=f,l.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l},"clone")});e.SHA1=i._createHelper(c),e.HmacSHA1=i._createHmacHelper(c)}(),t.SHA1})});var jq=U((Gq,nRe)=>{d();(function(t,e){typeof Gq=="object"?nRe.exports=Gq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Gq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=[],l=[];(function(){function p(y){for(var E=e.sqrt(y),x=2;x<=E;x++)if(!(y%x))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(c[g]=m(e.pow(h,1/2))),l[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],f=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(c.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],E=h[2],x=h[3],b=h[4],_=h[5],k=h[6],P=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var M=u[N-15],J=(M<<25|M>>>7)^(M<<14|M>>>18)^M>>>3,pe=u[N-2],Y=(pe<<15|pe>>>17)^(pe<<13|pe>>>19)^pe>>>10;u[N]=J+u[N-7]+Y+u[N-16]}var G=b&_^~b&k,H=g&y^g&E^y&E,ce=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=P+ie+G+l[N]+u[N],Q=ce+H;P=k,k=_,_=b,b=x+V|0,x=E,E=y,y=g,g=V+Q|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+E|0,h[3]=h[3]+x|0,h[4]=h[4]+b|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+P|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})});var oRe=U((Vq,iRe)=>{d();(function(t,e,r){typeof Vq=="object"?iRe.exports=Vq=e(Vi(),jq()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(Vq,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var c=o._doFinalize.call(this);return c.sigBytes-=4,c},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var Xae=U(($q,sRe)=>{d();(function(t,e,r){typeof $q=="object"?sRe.exports=$q=e(Vi(),E6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})($q,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,c=e.algo;function l(){return o.create.apply(o,arguments)}s(l,"X64Word_create");var u=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],f=[];(function(){for(var m=0;m<80;m++)f[m]=l()})();var p=c.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],E=g[1],x=g[2],b=g[3],_=g[4],k=g[5],P=g[6],N=g[7],M=y.high,J=y.low,pe=E.high,Y=E.low,G=x.high,H=x.low,ce=b.high,ie=b.low,V=_.high,Q=_.low,z=k.high,re=k.low,fe=P.high,ne=P.low,me=N.high,he=N.low,Qe=M,ke=J,tt=pe,Fe=Y,ht=G,St=H,xt=ce,Tt=ie,le=V,Ue=Q,ye=z,nt=re,ee=fe,oe=ne,We=me,De=he,xe=0;xe<80;xe++){var Ye,st,yt=f[xe];if(xe<16)st=yt.high=m[h+xe*2]|0,Ye=yt.low=m[h+xe*2+1]|0;else{var qt=f[xe-15],dr=qt.high,Ft=qt.low,Yr=(dr>>>1|Ft<<31)^(dr>>>8|Ft<<24)^dr>>>7,en=(Ft>>>1|dr<<31)^(Ft>>>8|dr<<24)^(Ft>>>7|dr<<25),yn=f[xe-2],Ae=yn.high,Ge=yn.low,ft=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,Et=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Zt=f[xe-7],Vt=Zt.high,vr=Zt.low,Ir=f[xe-16],zt=Ir.high,ir=Ir.low;Ye=en+vr,st=Yr+Vt+(Ye>>>0<en>>>0?1:0),Ye=Ye+Et,st=st+ft+(Ye>>>0<Et>>>0?1:0),Ye=Ye+ir,st=st+zt+(Ye>>>0<ir>>>0?1:0),yt.high=st,yt.low=Ye}var Xt=le&ye^~le&ee,Sr=Ue&nt^~Ue&oe,qr=Qe&tt^Qe&ht^tt&ht,tn=ke&Fe^ke&St^Fe&St,zn=(Qe>>>28|ke<<4)^(Qe<<30|ke>>>2)^(Qe<<25|ke>>>7),ai=(ke>>>28|Qe<<4)^(ke<<30|Qe>>>2)^(ke<<25|Qe>>>7),Hn=(le>>>14|Ue<<18)^(le>>>18|Ue<<14)^(le<<23|Ue>>>9),ri=(Ue>>>14|le<<18)^(Ue>>>18|le<<14)^(Ue<<23|le>>>9),ln=u[xe],ni=ln.high,_e=ln.low,W=De+ri,ge=We+Hn+(W>>>0<De>>>0?1:0),W=W+Sr,ge=ge+Xt+(W>>>0<Sr>>>0?1:0),W=W+_e,ge=ge+ni+(W>>>0<_e>>>0?1:0),W=W+Ye,ge=ge+st+(W>>>0<Ye>>>0?1:0),ve=ai+tn,te=zn+qr+(ve>>>0<ai>>>0?1:0);We=ee,De=oe,ee=ye,oe=nt,ye=le,nt=Ue,Ue=Tt+W|0,le=xt+ge+(Ue>>>0<Tt>>>0?1:0)|0,xt=ht,Tt=St,ht=tt,St=Fe,tt=Qe,Fe=ke,ke=W+ve|0,Qe=ge+te+(ke>>>0<W>>>0?1:0)|0}J=y.low=J+ke,y.high=M+Qe+(J>>>0<ke>>>0?1:0),Y=E.low=Y+Fe,E.high=pe+tt+(Y>>>0<Fe>>>0?1:0),H=x.low=H+St,x.high=G+ht+(H>>>0<St>>>0?1:0),ie=b.low=ie+Tt,b.high=ce+xt+(ie>>>0<Tt>>>0?1:0),Q=_.low=Q+Ue,_.high=V+le+(Q>>>0<Ue>>>0?1:0),re=k.low=re+nt,k.high=z+ye+(re>>>0<nt>>>0?1:0),ne=P.low=ne+oe,P.high=fe+ee+(ne>>>0<oe>>>0?1:0),he=N.low=he+De,N.high=me+We+(he>>>0<De>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var E=this._hash.toX32();return E},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var cRe=U((zq,aRe)=>{d();(function(t,e,r){typeof zq=="object"?aRe.exports=zq=e(Vi(),E6(),Xae()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(zq,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,c=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var l=a._doFinalize.call(this);return l.sigBytes-=16,l},"_doFinalize")});e.SHA384=a._createHelper(c),e.HmacSHA384=a._createHmacHelper(c)}(),t.SHA384})});var uRe=U((Yq,lRe)=>{d();(function(t,e,r){typeof Yq=="object"?lRe.exports=Yq=e(Vi(),E6()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Yq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,c=a.Word,l=r.algo,u=[],f=[],p=[];(function(){for(var g=1,y=0,E=0;E<24;E++){u[g+5*y]=(E+1)*(E+2)/2%64;var x=y%5,b=(2*g+3*y)%5;g=x,y=b}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var P=0,N=0,M=0;M<7;M++){if(_&1){var J=(1<<M)-1;J<32?N^=1<<J:P^=1<<J-32}_&128?_=_<<1^113:_<<=1}p[k]=c.create(P,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=c.create()})();var h=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var E=this._state,x=this.blockSize/2,b=0;b<x;b++){var _=g[y+2*b],k=g[y+2*b+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var P=E[b];P.high^=k,P.low^=_}for(var N=0;N<24;N++){for(var M=0;M<5;M++){for(var J=0,pe=0,Y=0;Y<5;Y++){var P=E[M+5*Y];J^=P.high,pe^=P.low}var G=m[M];G.high=J,G.low=pe}for(var M=0;M<5;M++)for(var H=m[(M+4)%5],ce=m[(M+1)%5],ie=ce.high,V=ce.low,J=H.high^(ie<<1|V>>>31),pe=H.low^(V<<1|ie>>>31),Y=0;Y<5;Y++){var P=E[M+5*Y];P.high^=J,P.low^=pe}for(var Q=1;Q<25;Q++){var J,pe,P=E[Q],z=P.high,re=P.low,fe=u[Q];fe<32?(J=z<<fe|re>>>32-fe,pe=re<<fe|z>>>32-fe):(J=re<<fe-32|z>>>64-fe,pe=z<<fe-32|re>>>64-fe);var ne=m[f[Q]];ne.high=J,ne.low=pe}var me=m[0],he=E[0];me.high=he.high,me.low=he.low;for(var M=0;M<5;M++)for(var Y=0;Y<5;Y++){var Q=M+5*Y,P=E[Q],Qe=m[Q],ke=m[(M+1)%5+5*Y],tt=m[(M+2)%5+5*Y];P.high=Qe.high^~ke.high&tt.high,P.low=Qe.low^~ke.low&tt.low}var P=E[0],Fe=p[N];P.high^=Fe.high,P.low^=Fe.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,E=this._nDataBytes*8,x=g.sigBytes*8,b=this.blockSize*32;y[x>>>5]|=1<<24-x%32,y[(e.ceil((x+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],M=0;M<P;M++){var J=_[M],pe=J.high,Y=J.low;pe=(pe<<8|pe>>>24)&16711935|(pe<<24|pe>>>8)&4278255360,Y=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,N.push(Y),N.push(pe)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),E=0;E<25;E++)y[E]=y[E].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var fRe=U((Kq,dRe)=>{d();(function(t,e){typeof Kq=="object"?dRe.exports=Kq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Kq,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,P){for(var N=0;N<16;N++){var M=P+N,J=k[M];k[M]=(J<<8|J>>>24)&16711935|(J<<24|J>>>8)&4278255360}var pe=this._hash.words,Y=p.words,G=m.words,H=c.words,ce=l.words,ie=u.words,V=f.words,Q,z,re,fe,ne,me,he,Qe,ke,tt;me=Q=pe[0],he=z=pe[1],Qe=re=pe[2],ke=fe=pe[3],tt=ne=pe[4];for(var Fe,N=0;N<80;N+=1)Fe=Q+k[P+H[N]]|0,N<16?Fe+=g(z,re,fe)+Y[0]:N<32?Fe+=y(z,re,fe)+Y[1]:N<48?Fe+=E(z,re,fe)+Y[2]:N<64?Fe+=x(z,re,fe)+Y[3]:Fe+=b(z,re,fe)+Y[4],Fe=Fe|0,Fe=_(Fe,ie[N]),Fe=Fe+ne|0,Q=ne,ne=fe,fe=_(re,10),re=z,z=Fe,Fe=me+k[P+ce[N]]|0,N<16?Fe+=b(he,Qe,ke)+G[0]:N<32?Fe+=x(he,Qe,ke)+G[1]:N<48?Fe+=E(he,Qe,ke)+G[2]:N<64?Fe+=y(he,Qe,ke)+G[3]:Fe+=g(he,Qe,ke)+G[4],Fe=Fe|0,Fe=_(Fe,V[N]),Fe=Fe+tt|0,me=tt,tt=ke,ke=_(Qe,10),Qe=he,he=Fe;Fe=pe[1]+re+ke|0,pe[1]=pe[2]+fe+tt|0,pe[2]=pe[3]+ne+me|0,pe[3]=pe[4]+Q+he|0,pe[4]=pe[0]+z+Qe|0,pe[0]=Fe},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,P=k.words,N=this._nDataBytes*8,M=k.sigBytes*8;P[M>>>5]|=128<<24-M%32,P[(M+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(P.length+1)*4,this._process();for(var J=this._hash,pe=J.words,Y=0;Y<5;Y++){var G=pe[Y];pe[Y]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return J},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,P,N){return k^P^N}s(g,"f1");function y(k,P,N){return k&P|~k&N}s(y,"f2");function E(k,P,N){return(k|~P)^N}s(E,"f3");function x(k,P,N){return k&N|P&~N}s(x,"f4");function b(k,P,N){return k^(P|~N)}s(b,"f5");function _(k,P){return k<<P|k>>>32-P}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var Xq=U((Jq,pRe)=>{d();(function(t,e){typeof Jq=="object"?pRe.exports=Jq=e(Vi()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Jq,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,c=a.HMAC=n.extend({init:s(function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=o.parse(u));var f=l.blockSize,p=f*4;u.sigBytes>p&&(u=l.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,E=0;E<f;E++)g[E]^=1549556828,y[E]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var l=this._hasher;l.reset(),l.update(this._iKey)},"reset"),update:s(function(l){return this._hasher.update(l),this},"update"),finalize:s(function(l){var u=this._hasher,f=u.finalize(l);u.reset();var p=u.finalize(this._oKey.clone().concat(f));return p},"finalize")})})()})});var hRe=U((Zq,mRe)=>{d();(function(t,e,r){typeof Zq=="object"?mRe.exports=Zq=e(Vi(),jq(),Xq()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(Zq,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,c=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,f){for(var p=this.cfg,m=c.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,E=g.words,x=p.keySize,b=p.iterations;y.length<x;){var _=m.update(f).finalize(g);m.reset();for(var k=_.words,P=k.length,N=_,M=1;M<b;M++){N=m.finalize(N),m.reset();for(var J=N.words,pe=0;pe<P;pe++)k[pe]^=J[pe]}h.concat(_),E[0]++}return h.sigBytes=x*4,h},"compute")});e.PBKDF2=function(u,f,p){return l.create(p).compute(u,f)}}(),t.PBKDF2})});var I1=U((eH,gRe)=>{d();(function(t,e,r){typeof eH=="object"?gRe.exports=eH=e(Vi(),Jae(),Xq()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(eH,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,c=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(l){this.cfg=this.cfg.extend(l)},"init"),compute:s(function(l,u){for(var f,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,E=p.iterations;g.length<y;){f&&m.update(f),f=m.update(l).finalize(u),m.reset();for(var x=1;x<E;x++)f=m.finalize(f),m.reset();h.concat(f)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(l,u,f){return c.create(f).compute(l,u)}}(),t.EvpKDF})});var zc=U((tH,ARe)=>{d();(function(t,e,r){typeof tH=="object"?ARe.exports=tH=e(Vi(),I1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(tH,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,l=c.Utf8,u=c.Base64,f=r.algo,p=f.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(G,H){return this.create(this._ENC_XFORM_MODE,G,H)},"createEncryptor"),createDecryptor:s(function(G,H){return this.create(this._DEC_XFORM_MODE,G,H)},"createDecryptor"),init:s(function(G,H,ce){this.cfg=this.cfg.extend(ce),this._xformMode=G,this._key=H,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(G){return this._append(G),this._process()},"process"),finalize:s(function(G){G&&this._append(G);var H=this._doFinalize();return H},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function G(H){return typeof H=="string"?Y:M}return s(G,"selectCipherStrategy"),function(H){return{encrypt:s(function(ce,ie,V){return G(ie).encrypt(H,ce,ie,V)},"encrypt"),decrypt:s(function(ce,ie,V){return G(ie).decrypt(H,ce,ie,V)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var G=this._process(!0);return G},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(G,H){return this.Encryptor.create(G,H)},"createEncryptor"),createDecryptor:s(function(G,H){return this.Decryptor.create(G,H)},"createDecryptor"),init:s(function(G,H){this._cipher=G,this._iv=H},"init")}),E=g.CBC=function(){var G=y.extend();G.Encryptor=G.extend({processBlock:s(function(ce,ie){var V=this._cipher,Q=V.blockSize;H.call(this,ce,ie,Q),V.encryptBlock(ce,ie),this._prevBlock=ce.slice(ie,ie+Q)},"processBlock")}),G.Decryptor=G.extend({processBlock:s(function(ce,ie){var V=this._cipher,Q=V.blockSize,z=ce.slice(ie,ie+Q);V.decryptBlock(ce,ie),H.call(this,ce,ie,Q),this._prevBlock=z},"processBlock")});function H(ce,ie,V){var Q,z=this._iv;z?(Q=z,this._iv=e):Q=this._prevBlock;for(var re=0;re<V;re++)ce[ie+re]^=Q[re]}return s(H,"xorBlock"),G}(),x=r.pad={},b=x.Pkcs7={pad:s(function(G,H){for(var ce=H*4,ie=ce-G.sigBytes%ce,V=ie<<24|ie<<16|ie<<8|ie,Q=[],z=0;z<ie;z+=4)Q.push(V);var re=o.create(Q,ie);G.concat(re)},"pad"),unpad:s(function(G){var H=G.words[G.sigBytes-1>>>2]&255;G.sigBytes-=H},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:b}),reset:s(function(){var G;m.reset.call(this);var H=this.cfg,ce=H.iv,ie=H.mode;this._xformMode==this._ENC_XFORM_MODE?G=ie.createEncryptor:(G=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==G?this._mode.init(this,ce&&ce.words):(this._mode=G.call(ie,this,ce&&ce.words),this._mode.__creator=G)},"reset"),_doProcessBlock:s(function(G,H){this._mode.processBlock(G,H)},"_doProcessBlock"),_doFinalize:s(function(){var G,H=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(H.pad(this._data,this.blockSize),G=this._process(!0)):(G=this._process(!0),H.unpad(G)),G},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(G){this.mixIn(G)},"init"),toString:s(function(G){return(G||this.formatter).stringify(this)},"toString")}),P=r.format={},N=P.OpenSSL={stringify:s(function(G){var H,ce=G.ciphertext,ie=G.salt;return ie?H=o.create([1398893684,1701076831]).concat(ie).concat(ce):H=ce,H.toString(u)},"stringify"),parse:s(function(G){var H,ce=u.parse(G),ie=ce.words;return ie[0]==1398893684&&ie[1]==1701076831&&(H=o.create(ie.slice(2,4)),ie.splice(0,4),ce.sigBytes-=16),k.create({ciphertext:ce,salt:H})},"parse")},M=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie);var V=G.createEncryptor(ce,ie),Q=V.finalize(H),z=V.cfg;return k.create({ciphertext:Q,key:ce,iv:z.iv,algorithm:G,mode:z.mode,padding:z.padding,blockSize:G.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie),H=this._parse(H,ie.format);var V=G.createDecryptor(ce,ie).finalize(H.ciphertext);return V},"decrypt"),_parse:s(function(G,H){return typeof G=="string"?H.parse(G,this):G},"_parse")}),J=r.kdf={},pe=J.OpenSSL={execute:s(function(G,H,ce,ie,V){if(ie||(ie=o.random(64/8)),V)var Q=p.create({keySize:H+ce,hasher:V}).compute(G,ie);else var Q=p.create({keySize:H+ce}).compute(G,ie);var z=o.create(Q.words.slice(H),ce*4);return Q.sigBytes=H*4,k.create({key:Q,iv:z,salt:ie})},"execute")},Y=n.PasswordBasedCipher=M.extend({cfg:M.cfg.extend({kdf:pe}),encrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie);var V=ie.kdf.execute(ce,G.keySize,G.ivSize,ie.salt,ie.hasher);ie.iv=V.iv;var Q=M.encrypt.call(this,G,H,V.key,ie);return Q.mixIn(V),Q},"encrypt"),decrypt:s(function(G,H,ce,ie){ie=this.cfg.extend(ie),H=this._parse(H,ie.format);var V=ie.kdf.execute(ce,G.keySize,G.ivSize,H.salt,ie.hasher);ie.iv=V.iv;var Q=M.decrypt.call(this,G,H,V.key,ie);return Q},"decrypt")})}()})});var CRe=U((rH,yRe)=>{d();(function(t,e,r){typeof rH=="object"?yRe.exports=rH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(rH,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=c},"processBlock")});function r(n,i,o,a){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,a.encryptBlock(c,0);for(var u=0;u<o;u++)n[i+u]^=c[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var vRe=U((nH,ERe)=>{d();(function(t,e,r){typeof nH=="object"?ERe.exports=nH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(nH,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var u=l.slice(0);o.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var f=0;f<a;f++)n[i+f]^=u[f]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var bRe=U((iH,xRe)=>{d();(function(t,e,r){typeof iH=="object"?xRe.exports=iH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(iH,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,c=o>>8&255,l=o&255;a===255?(a=0,c===255?(c=0,l===255?l=0:++l):++c):++a,o=0,o+=a<<16,o+=c<<8,o+=l}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var c=this._cipher,l=c.blockSize,u=this._iv,f=this._counter;u&&(f=this._counter=u.slice(0),this._iv=void 0),n(f);var p=f.slice(0);c.encryptBlock(p,0);for(var m=0;m<l;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var TRe=U((oH,IRe)=>{d();(function(t,e,r){typeof oH=="object"?IRe.exports=oH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(oH,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),o.encryptBlock(l,0);for(var u=0;u<a;u++)n[i+u]^=l[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var _Re=U((sH,wRe)=>{d();(function(t,e,r){typeof sH=="object"?wRe.exports=sH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(sH,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var RRe=U((aH,SRe)=>{d();(function(t,e,r){typeof aH=="object"?SRe.exports=aH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(aH,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var PRe=U((cH,kRe)=>{d();(function(t,e,r){typeof cH=="object"?kRe.exports=cH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(cH,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var DRe=U((lH,BRe)=>{d();(function(t,e,r){typeof lH=="object"?BRe.exports=lH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(lH,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var LRe=U((uH,NRe)=>{d();(function(t,e,r){typeof uH=="object"?NRe.exports=uH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(uH,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var FRe=U((dH,MRe)=>{d();(function(t,e,r){typeof dH=="object"?MRe.exports=dH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(dH,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var QRe=U((fH,ORe)=>{d();(function(t,e,r){typeof fH=="object"?ORe.exports=fH=e(Vi(),zc()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(fH,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,c=r.format,l=c.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var f=a.parse(u);return i.create({ciphertext:f})},"parse")}}(),t.format.Hex})});var qRe=U((pH,URe)=>{d();(function(t,e,r){typeof pH=="object"?URe.exports=pH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(pH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],c=[],l=[],u=[],f=[],p=[],m=[],h=[],g=[];(function(){for(var x=[],b=0;b<256;b++)b<128?x[b]=b<<1:x[b]=b<<1^283;for(var _=0,k=0,b=0;b<256;b++){var P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^P&255^99,o[_]=P,a[P]=_;var N=x[_],M=x[N],J=x[M],pe=x[P]*257^P*16843008;c[_]=pe<<24|pe>>>8,l[_]=pe<<16|pe>>>16,u[_]=pe<<8|pe>>>24,f[_]=pe;var pe=J*16843009^M*65537^N*257^_*16843008;p[P]=pe<<24|pe>>>8,m[P]=pe<<16|pe>>>16,h[P]=pe<<8|pe>>>24,g[P]=pe,_?(_=N^x[x[x[J^N]]],k^=x[x[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],E=i.AES=n.extend({_doReset:s(function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,_=b.words,k=b.sigBytes/4,P=this._nRounds=k+6,N=(P+1)*4,M=this._keySchedule=[],J=0;J<N;J++)J<k?M[J]=_[J]:(x=M[J-1],J%k?k>6&&J%k==4&&(x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255]):(x=x<<8|x>>>24,x=o[x>>>24]<<24|o[x>>>16&255]<<16|o[x>>>8&255]<<8|o[x&255],x^=y[J/k|0]<<24),M[J]=M[J-k]^x);for(var pe=this._invKeySchedule=[],Y=0;Y<N;Y++){var J=N-Y;if(Y%4)var x=M[J];else var x=M[J-4];Y<4||J<=4?pe[Y]=x:pe[Y]=p[o[x>>>24]]^m[o[x>>>16&255]]^h[o[x>>>8&255]]^g[o[x&255]]}}},"_doReset"),encryptBlock:s(function(x,b){this._doCryptBlock(x,b,this._keySchedule,c,l,u,f,o)},"encryptBlock"),decryptBlock:s(function(x,b){var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_,this._doCryptBlock(x,b,this._invKeySchedule,p,m,h,g,a);var _=x[b+1];x[b+1]=x[b+3],x[b+3]=_},"decryptBlock"),_doCryptBlock:s(function(x,b,_,k,P,N,M,J){for(var pe=this._nRounds,Y=x[b]^_[0],G=x[b+1]^_[1],H=x[b+2]^_[2],ce=x[b+3]^_[3],ie=4,V=1;V<pe;V++){var Q=k[Y>>>24]^P[G>>>16&255]^N[H>>>8&255]^M[ce&255]^_[ie++],z=k[G>>>24]^P[H>>>16&255]^N[ce>>>8&255]^M[Y&255]^_[ie++],re=k[H>>>24]^P[ce>>>16&255]^N[Y>>>8&255]^M[G&255]^_[ie++],fe=k[ce>>>24]^P[Y>>>16&255]^N[G>>>8&255]^M[H&255]^_[ie++];Y=Q,G=z,H=re,ce=fe}var Q=(J[Y>>>24]<<24|J[G>>>16&255]<<16|J[H>>>8&255]<<8|J[ce&255])^_[ie++],z=(J[G>>>24]<<24|J[H>>>16&255]<<16|J[ce>>>8&255]<<8|J[Y&255])^_[ie++],re=(J[H>>>24]<<24|J[ce>>>16&255]<<16|J[Y>>>8&255]<<8|J[G&255])^_[ie++],fe=(J[ce>>>24]<<24|J[Y>>>16&255]<<16|J[G>>>8&255]<<8|J[H&255])^_[ie++];x[b]=Q,x[b+1]=z,x[b+2]=re,x[b+3]=fe},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(E)}(),t.AES})});var WRe=U((mH,HRe)=>{d();(function(t,e,r){typeof mH=="object"?HRe.exports=mH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(mH,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,E=y.words,x=[],b=0;b<56;b++){var _=a[b]-1;x[b]=E[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],P=0;P<16;P++){for(var N=k[P]=[],M=l[P],b=0;b<24;b++)N[b/6|0]|=x[(c[b]-1+M)%28]<<31-b%6,N[4+(b/6|0)]|=x[28+(c[b+24]-1+M)%28]<<31-b%6;N[0]=N[0]<<1|N[0]>>>31;for(var b=1;b<7;b++)N[b]=N[b]>>>(b-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var J=this._invSubKeys=[],b=0;b<16;b++)J[b]=k[15-b]},"_doReset"),encryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,E){this._doCryptBlock(y,E,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,E,x){this._lBlock=y[E],this._rBlock=y[E+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var b=0;b<16;b++){for(var _=x[b],k=this._lBlock,P=this._rBlock,N=0,M=0;M<8;M++)N|=u[M][((P^_[M])&f[M])>>>0];this._lBlock=P,this._rBlock=k^N}var J=this._lBlock;this._lBlock=this._rBlock,this._rBlock=J,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[E]=this._lBlock,y[E+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,E){var x=(this._lBlock>>>y^this._rBlock)&E;this._rBlock^=x,this._lBlock^=x<<y}s(m,"exchangeLR");function h(y,E){var x=(this._rBlock>>>y^this._lBlock)&E;this._lBlock^=x,this._rBlock^=x<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,E=y.words;if(E.length!==2&&E.length!==4&&E.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=E.slice(0,2),b=E.length<4?E.slice(0,2):E.slice(2,4),_=E.length<6?E.slice(0,2):E.slice(4,6);this._des1=p.createEncryptor(n.create(x)),this._des2=p.createEncryptor(n.create(b)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,E){this._des1.encryptBlock(y,E),this._des2.decryptBlock(y,E),this._des3.encryptBlock(y,E)},"encryptBlock"),decryptBlock:s(function(y,E){this._des3.decryptBlock(y,E),this._des2.encryptBlock(y,E),this._des1.decryptBlock(y,E)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var jRe=U((hH,GRe)=>{d();(function(t,e,r){typeof hH=="object"?GRe.exports=hH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(hH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var l=this._key,u=l.words,f=l.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%f,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var E=p[m];p[m]=p[h],p[h]=E}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(l,u){l[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var l=this._S,u=this._i,f=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,f=(f+l[u])%256;var h=l[u];l[u]=l[f],l[f]=h,p|=l[(l[u]+l[f])%256]<<24-m*8}return this._i=u,this._j=f,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var c=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(c)}(),t.RC4})});var $Re=U((gH,VRe)=>{d();(function(t,e,r){typeof gH=="object"?VRe.exports=gH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(gH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.Rabbit=n.extend({_doReset:s(function(){for(var f=this._key.words,p=this.cfg.iv,m=0;m<4;m++)f[m]=(f[m]<<8|f[m]>>>24)&16711935|(f[m]<<24|f[m]>>>8)&4278255360;var h=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;g[0]^=b,g[1]^=k,g[2]^=_,g[3]^=P,g[4]^=b,g[5]^=k,g[6]^=_,g[7]^=P;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(l)}(),t.Rabbit})});var YRe=U((AH,zRe)=>{d();(function(t,e,r){typeof AH=="object"?zRe.exports=AH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(AH,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],c=[],l=i.RabbitLegacy=n.extend({_doReset:s(function(){var f=this._key.words,p=this.cfg.iv,m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],h=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,E=y[0],x=y[1],b=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,k=b>>>16|_&4294901760,P=_<<16|b&65535;h[0]^=b,h[1]^=k,h[2]^=_,h[3]^=P,h[4]^=b,h[5]^=k,h[6]^=_,h[7]^=P;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(f,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,f[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var f=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=f[m]+p[m],g=h&65535,y=h>>>16,E=((g*g>>>17)+g*y>>>15)+y*y,x=((h&4294901760)*h|0)+((h&65535)*h|0);c[m]=E^x}f[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,f[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,f[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,f[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,f[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,f[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,f[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,f[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(l)}(),t.RabbitLegacy})});var JRe=U((yH,KRe)=>{d();(function(t,e,r){typeof yH=="object"?KRe.exports=yH=e(Vi(),eb(),tb(),I1(),zc()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(yH,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function u(g,y){let E=y>>24&255,x=y>>16&255,b=y>>8&255,_=y&255,k=g.sbox[0][E]+g.sbox[1][x];return k=k^g.sbox[2][b],k=k+g.sbox[3][_],k}s(u,"F");function f(g,y,E){let x=y,b=E,_;for(let k=0;k<o;++k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[o],x=x^g.pbox[o+1],{left:x,right:b}}s(f,"BlowFish_Encrypt");function p(g,y,E){let x=y,b=E,_;for(let k=o+1;k>1;--k)x=x^g.pbox[k],b=u(g,x)^b,_=x,x=b,b=_;return _=x,x=b,b=_,b=b^g.pbox[1],x=x^g.pbox[0],{left:x,right:b}}s(p,"BlowFish_Decrypt");function m(g,y,E){for(let P=0;P<4;P++){g.sbox[P]=[];for(let N=0;N<256;N++)g.sbox[P][N]=c[P][N]}let x=0;for(let P=0;P<o+2;P++)g.pbox[P]=a[P]^y[x],x++,x>=E&&(x=0);let b=0,_=0,k=0;for(let P=0;P<o+2;P+=2)k=f(g,b,_),b=k.left,_=k.right,g.pbox[P]=b,g.pbox[P+1]=_;for(let P=0;P<4;P++)for(let N=0;N<256;N+=2)k=f(g,b,_),b=k.left,_=k.right,g.sbox[P][N]=b,g.sbox[P][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,E=g.sigBytes/4;m(l,y,E)}},"_doReset"),encryptBlock:s(function(g,y){var E=f(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"encryptBlock"),decryptBlock:s(function(g,y){var E=p(l,g[y],g[y+1]);g[y]=E.left,g[y+1]=E.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var rb=U((CH,XRe)=>{d();(function(t,e,r){typeof CH=="object"?XRe.exports=CH=e(Vi(),E6(),Y2e(),J2e(),eb(),eRe(),tb(),Jae(),jq(),oRe(),Xae(),cRe(),uRe(),fRe(),Xq(),hRe(),I1(),zc(),CRe(),vRe(),bRe(),TRe(),_Re(),RRe(),PRe(),DRe(),LRe(),FRe(),QRe(),qRe(),WRe(),jRe(),$Re(),YRe(),JRe()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(CH,function(t){return t})});var y4=U(Uu=>{"use strict";d();Object.defineProperty(Uu,"__esModule",{value:!0});Uu.stringArray=Uu.array=Uu.func=Uu.error=Uu.number=Uu.string=Uu.boolean=void 0;function Yxt(t){return t===!0||t===!1}s(Yxt,"boolean");Uu.boolean=Yxt;function B4e(t){return typeof t=="string"||t instanceof String}s(B4e,"string");Uu.string=B4e;function Kxt(t){return typeof t=="number"||t instanceof Number}s(Kxt,"number");Uu.number=Kxt;function Jxt(t){return t instanceof Error}s(Jxt,"error");Uu.error=Jxt;function Xxt(t){return typeof t=="function"}s(Xxt,"func");Uu.func=Xxt;function D4e(t){return Array.isArray(t)}s(D4e,"array");Uu.array=D4e;function Zxt(t){return D4e(t)&&t.every(e=>B4e(e))}s(Zxt,"stringArray");Uu.stringArray=Zxt});var Ile=U(Kr=>{"use strict";d();Object.defineProperty(Kr,"__esModule",{value:!0});Kr.Message=Kr.NotificationType9=Kr.NotificationType8=Kr.NotificationType7=Kr.NotificationType6=Kr.NotificationType5=Kr.NotificationType4=Kr.NotificationType3=Kr.NotificationType2=Kr.NotificationType1=Kr.NotificationType0=Kr.NotificationType=Kr.RequestType9=Kr.RequestType8=Kr.RequestType7=Kr.RequestType6=Kr.RequestType5=Kr.RequestType4=Kr.RequestType3=Kr.RequestType2=Kr.RequestType1=Kr.RequestType=Kr.RequestType0=Kr.AbstractMessageSignature=Kr.ParameterStructures=Kr.ResponseError=Kr.ErrorCodes=void 0;var __=y4(),ele;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(ele||(Kr.ErrorCodes=ele={}));var tle=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=__.number(e)?e:ele.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Kr.ResponseError=tle;var hf=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Kr.ParameterStructures=hf;hf.auto=new hf("auto");hf.byPosition=new hf("byPosition");hf.byName=new hf("byName");var Os=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return hf.auto}};Kr.AbstractMessageSignature=Os;var rle=class extends Os{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Kr.RequestType0=rle;var nle=class extends Os{static{s(this,"RequestType")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.RequestType=nle;var ile=class extends Os{static{s(this,"RequestType1")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.RequestType1=ile;var ole=class extends Os{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Kr.RequestType2=ole;var sle=class extends Os{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Kr.RequestType3=sle;var ale=class extends Os{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Kr.RequestType4=ale;var cle=class extends Os{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Kr.RequestType5=cle;var lle=class extends Os{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Kr.RequestType6=lle;var ule=class extends Os{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Kr.RequestType7=ule;var dle=class extends Os{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Kr.RequestType8=dle;var fle=class extends Os{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Kr.RequestType9=fle;var ple=class extends Os{static{s(this,"NotificationType")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.NotificationType=ple;var mle=class extends Os{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Kr.NotificationType0=mle;var hle=class extends Os{static{s(this,"NotificationType1")}constructor(e,r=hf.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Kr.NotificationType1=hle;var gle=class extends Os{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Kr.NotificationType2=gle;var Ale=class extends Os{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Kr.NotificationType3=Ale;var yle=class extends Os{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Kr.NotificationType4=yle;var Cle=class extends Os{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Kr.NotificationType5=Cle;var Ele=class extends Os{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Kr.NotificationType6=Ele;var vle=class extends Os{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Kr.NotificationType7=vle;var xle=class extends Os{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Kr.NotificationType8=xle;var ble=class extends Os{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Kr.NotificationType9=ble;var N4e;(function(t){function e(i){let o=i;return o&&__.string(o.method)&&(__.string(o.id)||__.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&__.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(__.string(o.id)||__.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(N4e||(Kr.Message=N4e={}))});var wle=U(pb=>{"use strict";d();var L4e;Object.defineProperty(pb,"__esModule",{value:!0});pb.LRUCache=pb.LinkedMap=pb.Touch=void 0;var qu;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(qu||(pb.Touch=qu={}));var nW=class{static{s(this,"LinkedMap")}constructor(){this[L4e]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=qu.None){let n=this._map.get(e);if(n)return r!==qu.None&&this.touch(n,r),n.value}set(e,r,n=qu.None){let i=this._map.get(e);if(i)i.value=r,n!==qu.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case qu.None:this.addItemLast(i);break;case qu.First:this.addItemFirst(i);break;case qu.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(L4e=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==qu.First&&r!==qu.Last)){if(r===qu.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===qu.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};pb.LinkedMap=nW;var Tle=class extends nW{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=qu.AsNew){return super.get(e,r)}peek(e){return super.get(e,qu.None)}set(e,r){return super.set(e,r,qu.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};pb.LRUCache=Tle});var F4e=U(iW=>{"use strict";d();Object.defineProperty(iW,"__esModule",{value:!0});iW.Disposable=void 0;var M4e;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(M4e||(iW.Disposable=M4e={}))});var mb=U(Rle=>{"use strict";d();Object.defineProperty(Rle,"__esModule",{value:!0});var _le;function Sle(){if(_le===void 0)throw new Error("No runtime abstraction layer installed");return _le}s(Sle,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");_le=r}s(e,"install"),t.install=e})(Sle||(Sle={}));Rle.default=Sle});var E4=U(C4=>{"use strict";d();Object.defineProperty(C4,"__esModule",{value:!0});C4.Emitter=C4.Event=void 0;var ebt=mb(),O4e;(function(t){let e={dispose(){}};t.None=function(){return e}})(O4e||(C4.Event=O4e={}));var kle=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(c){(0,ebt.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},oW=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new kle),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};C4.Emitter=oW;oW._noop=function(){}});var cW=U(v4=>{"use strict";d();Object.defineProperty(v4,"__esModule",{value:!0});v4.CancellationTokenSource=v4.CancellationToken=void 0;var tbt=mb(),rbt=y4(),Ple=E4(),sW;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ple.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ple.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||rbt.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(sW||(v4.CancellationToken=sW={}));var nbt=Object.freeze(function(t,e){let r=(0,tbt.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),aW=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?nbt:(this._emitter||(this._emitter=new Ple.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ble=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new aW),this._token}cancel(){this._token?this._token.cancel():this._token=sW.Cancelled}dispose(){this._token?this._token instanceof aW&&this._token.dispose():this._token=sW.None}};v4.CancellationTokenSource=Ble});var Q4e=U(x4=>{"use strict";d();Object.defineProperty(x4,"__esModule",{value:!0});x4.SharedArrayReceiverStrategy=x4.SharedArraySenderStrategy=void 0;var ibt=cW(),U6;(function(t){t.Continue=0,t.Cancelled=1})(U6||(U6={}));var Dle=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=U6.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,U6.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};x4.SharedArraySenderStrategy=Dle;var Nle=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===U6.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Lle=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new Nle(e)}cancel(){}dispose(){}},Mle=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new ibt.CancellationTokenSource:new Lle(r)}};x4.SharedArrayReceiverStrategy=Mle});var Ole=U(lW=>{"use strict";d();Object.defineProperty(lW,"__esModule",{value:!0});lW.Semaphore=void 0;var obt=mb(),Fle=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,obt.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};lW.Semaphore=Fle});var q4e=U(hb=>{"use strict";d();Object.defineProperty(hb,"__esModule",{value:!0});hb.ReadableStreamMessageReader=hb.AbstractMessageReader=hb.MessageReader=void 0;var Ule=mb(),b4=y4(),Qle=E4(),sbt=Ole(),U4e;(function(t){function e(r){let n=r;return n&&b4.func(n.listen)&&b4.func(n.dispose)&&b4.func(n.onError)&&b4.func(n.onClose)&&b4.func(n.onPartialMessage)}s(e,"is"),t.is=e})(U4e||(hb.MessageReader=U4e={}));var uW=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new Qle.Emitter,this.closeEmitter=new Qle.Emitter,this.partialMessageEmitter=new Qle.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${b4.string(e.message)?e.message:"unknown"}`)}};hb.AbstractMessageReader=uW;var qle;(function(t){function e(r){let n,i,o,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Ule.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}s(e,"fromOptions"),t.fromOptions=e})(qle||(qle={}));var Hle=class extends uW{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=qle.fromOptions(r),this.buffer=(0,Ule.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new sbt.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Ule.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};hb.ReadableStreamMessageReader=Hle});var V4e=U(gb=>{"use strict";d();Object.defineProperty(gb,"__esModule",{value:!0});gb.WriteableStreamMessageWriter=gb.AbstractMessageWriter=gb.MessageWriter=void 0;var H4e=mb(),q6=y4(),abt=Ole(),W4e=E4(),cbt="Content-Length: ",G4e=`\r
`,j4e;(function(t){function e(r){let n=r;return n&&q6.func(n.dispose)&&q6.func(n.onClose)&&q6.func(n.onError)&&q6.func(n.write)}s(e,"is"),t.is=e})(j4e||(gb.MessageWriter=j4e={}));var dW=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new W4e.Emitter,this.closeEmitter=new W4e.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${q6.string(e.message)?e.message:"unknown"}`)}};gb.AbstractMessageWriter=dW;var Wle;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,H4e.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,H4e.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(Wle||(Wle={}));var Gle=class extends dW{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=Wle.fromOptions(r),this.errorCount=0,this.writeSemaphore=new abt.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(cbt,n.byteLength.toString(),G4e),i.push(G4e),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};gb.WriteableStreamMessageWriter=Gle});var $4e=U(fW=>{"use strict";d();Object.defineProperty(fW,"__esModule",{value:!0});fW.AbstractMessageBuffer=void 0;var lbt=13,ubt=10,dbt=`\r
`,jle=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case lbt:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case ubt:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),c=new Map,l=this.toString(a,"ascii").split(dbt);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let f=l[u],p=f.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let m=f.substr(0,p),h=f.substr(p+1).trim();c.set(e?m.toLowerCase():m,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};fW.AbstractMessageBuffer=jle});var X4e=U(ci=>{"use strict";d();Object.defineProperty(ci,"__esModule",{value:!0});ci.createMessageConnection=ci.ConnectionOptions=ci.MessageStrategy=ci.CancellationStrategy=ci.CancellationSenderStrategy=ci.CancellationReceiverStrategy=ci.RequestCancellationReceiverStrategy=ci.IdCancellationReceiverStrategy=ci.ConnectionStrategy=ci.ConnectionError=ci.ConnectionErrors=ci.LogTraceNotification=ci.SetTraceNotification=ci.TraceFormat=ci.TraceValues=ci.Trace=ci.NullLogger=ci.ProgressType=ci.ProgressToken=void 0;var z4e=mb(),ba=y4(),Bn=Ile(),Y4e=wle(),H6=E4(),Vle=cW(),j6;(function(t){t.type=new Bn.NotificationType("$/cancelRequest")})(j6||(j6={}));var $le;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})($le||(ci.ProgressToken=$le={}));var W6;(function(t){t.type=new Bn.NotificationType("$/progress")})(W6||(W6={}));var zle=class{static{s(this,"ProgressType")}constructor(){}};ci.ProgressType=zle;var Yle;(function(t){function e(r){return ba.func(r)}s(e,"is"),t.is=e})(Yle||(Yle={}));ci.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var No;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(No||(ci.Trace=No={}));var K4e;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(K4e||(ci.TraceValues=K4e={}));(function(t){function e(n){if(!ba.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(No||(ci.Trace=No={}));var w0;(function(t){t.Text="text",t.JSON="json"})(w0||(ci.TraceFormat=w0={}));(function(t){function e(r){return ba.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(w0||(ci.TraceFormat=w0={}));var Kle;(function(t){t.type=new Bn.NotificationType("$/setTrace")})(Kle||(ci.SetTraceNotification=Kle={}));var pW;(function(t){t.type=new Bn.NotificationType("$/logTrace")})(pW||(ci.LogTraceNotification=pW={}));var G6;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(G6||(ci.ConnectionErrors=G6={}));var I4=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ci.ConnectionError=I4;var Jle;(function(t){function e(r){let n=r;return n&&ba.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(Jle||(ci.ConnectionStrategy=Jle={}));var mW;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||ba.func(n.dispose))}s(e,"is"),t.is=e})(mW||(ci.IdCancellationReceiverStrategy=mW={}));var Xle;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&ba.func(n.createCancellationTokenSource)&&(n.dispose===void 0||ba.func(n.dispose))}s(e,"is"),t.is=e})(Xle||(ci.RequestCancellationReceiverStrategy=Xle={}));var hW;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new Vle.CancellationTokenSource}});function e(r){return mW.is(r)||Xle.is(r)}s(e,"is"),t.is=e})(hW||(ci.CancellationReceiverStrategy=hW={}));var gW;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(j6.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&ba.func(n.sendCancellation)&&ba.func(n.cleanup)}s(e,"is"),t.is=e})(gW||(ci.CancellationSenderStrategy=gW={}));var AW;(function(t){t.Message=Object.freeze({receiver:hW.Message,sender:gW.Message});function e(r){let n=r;return n&&hW.is(n.receiver)&&gW.is(n.sender)}s(e,"is"),t.is=e})(AW||(ci.CancellationStrategy=AW={}));var yW;(function(t){function e(r){let n=r;return n&&ba.func(n.handleMessage)}s(e,"is"),t.is=e})(yW||(ci.MessageStrategy=yW={}));var J4e;(function(t){function e(r){let n=r;return n&&(AW.is(n.cancellationStrategy)||Jle.is(n.connectionStrategy)||yW.is(n.messageStrategy))}s(e,"is"),t.is=e})(J4e||(ci.ConnectionOptions=J4e={}));var Yh;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Yh||(Yh={}));function fbt(t,e,r,n){let i=r!==void 0?r:ci.NullLogger,o=0,a=0,c=0,l="2.0",u,f=new Map,p,m=new Map,h=new Map,g,y=new Y4e.LinkedMap,E=new Map,x=new Set,b=new Map,_=No.Off,k=w0.Text,P,N=Yh.New,M=new H6.Emitter,J=new H6.Emitter,pe=new H6.Emitter,Y=new H6.Emitter,G=new H6.Emitter,H=n&&n.cancellationStrategy?n.cancellationStrategy:AW.Message;function ce(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(ce,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++c).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function Q(Ae,Ge){Bn.Message.isRequest(Ge)?Ae.set(ce(Ge.id),Ge):Bn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(V(),Ge)}s(Q,"addMessageToQueue");function z(Ae){}s(z,"cancelUndispatched");function re(){return N===Yh.Listening}s(re,"isListening");function fe(){return N===Yh.Closed}s(fe,"isClosed");function ne(){return N===Yh.Disposed}s(ne,"isDisposed");function me(){(N===Yh.New||N===Yh.Listening)&&(N=Yh.Closed,J.fire(void 0))}s(me,"closeHandler");function he(Ae){M.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Qe(Ae){M.fire(Ae)}s(Qe,"writeErrorHandler"),t.onClose(me),t.onError(he),e.onClose(me),e.onError(Qe);function ke(){g||y.size===0||(g=(0,z4e.default)().timer.setImmediate(()=>{g=void 0,Fe()}))}s(ke,"triggerMessageQueue");function tt(Ae){Bn.Message.isRequest(Ae)?St(Ae):Bn.Message.isNotification(Ae)?Tt(Ae):Bn.Message.isResponse(Ae)?xt(Ae):le(Ae)}s(tt,"handleMessage");function Fe(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;yW.is(Ge)?Ge.handleMessage(Ae,tt):tt(Ae)}finally{ke()}}s(Fe,"processMessageQueue");let ht=s(Ae=>{try{if(Bn.Message.isNotification(Ae)&&Ae.method===j6.type.method){let Ge=Ae.params.id,ft=ce(Ge),Et=y.get(ft);if(Bn.Message.isRequest(Et)){let Vt=n?.connectionStrategy,vr=Vt&&Vt.cancelUndispatched?Vt.cancelUndispatched(Et,z):void 0;if(vr&&(vr.error!==void 0||vr.result!==void 0)){y.delete(ft),b.delete(Ge),vr.id=Et.id,ee(vr,Ae.method,Date.now()),e.write(vr).catch(()=>i.error("Sending response for canceled message failed."));return}}let Zt=b.get(Ge);if(Zt!==void 0){Zt.cancel(),We(Ae);return}else x.add(Ge)}Q(y,Ae)}finally{ke()}},"callback");function St(Ae){if(ne())return;function Ge(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id};zt instanceof Bn.ResponseError?Sr.error=zt.toJson():Sr.result=zt===void 0?null:zt,ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ft(zt,ir,Xt){let Sr={jsonrpc:l,id:Ae.id,error:zt.toJson()};ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(ft,"replyError");function Et(zt,ir,Xt){zt===void 0&&(zt=null);let Sr={jsonrpc:l,id:Ae.id,result:zt};ee(Sr,ir,Xt),e.write(Sr).catch(()=>i.error("Sending response failed."))}s(Et,"replySuccess"),oe(Ae);let Zt=f.get(Ae.method),Vt,vr;Zt&&(Vt=Zt.type,vr=Zt.handler);let Ir=Date.now();if(vr||u){let zt=Ae.id??String(Date.now()),ir=mW.is(H.receiver)?H.receiver.createCancellationTokenSource(zt):H.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&x.has(Ae.id)&&ir.cancel(),Ae.id!==null&&b.set(zt,ir);try{let Xt;if(vr)if(Ae.params===void 0){if(Vt!==void 0&&Vt.numberOfParams!==0){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Vt.numberOfParams} params but received none.`),Ae.method,Ir);return}Xt=vr(ir.token)}else if(Array.isArray(Ae.params)){if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byName){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,Ir);return}Xt=vr(...Ae.params,ir.token)}else{if(Vt!==void 0&&Vt.parameterStructures===Bn.ParameterStructures.byPosition){ft(new Bn.ResponseError(Bn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,Ir);return}Xt=vr(Ae.params,ir.token)}else u&&(Xt=u(Ae.method,Ae.params,ir.token));let Sr=Xt;Xt?Sr.then?Sr.then(qr=>{b.delete(zt),Ge(qr,Ae.method,Ir)},qr=>{b.delete(zt),qr instanceof Bn.ResponseError?ft(qr,Ae.method,Ir):qr&&ba.string(qr.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${qr.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}):(b.delete(zt),Ge(Xt,Ae.method,Ir)):(b.delete(zt),Et(Xt,Ae.method,Ir))}catch(Xt){b.delete(zt),Xt instanceof Bn.ResponseError?Ge(Xt,Ae.method,Ir):Xt&&ba.string(Xt.message)?ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Xt.message}`),Ae.method,Ir):ft(new Bn.ResponseError(Bn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,Ir)}}else ft(new Bn.ResponseError(Bn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,Ir)}s(St,"handleRequest");function xt(Ae){if(!ne())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ft=E.get(Ge);if(De(Ae,ft),ft!==void 0){E.delete(Ge);try{if(Ae.error){let Et=Ae.error;ft.reject(new Bn.ResponseError(Et.code,Et.message,Et.data))}else if(Ae.result!==void 0)ft.resolve(Ae.result);else throw new Error("Should never happen.")}catch(Et){Et.message?i.error(`Response handler '${ft.method}' failed with message: ${Et.message}`):i.error(`Response handler '${ft.method}' failed unexpectedly.`)}}}}s(xt,"handleResponse");function Tt(Ae){if(ne())return;let Ge,ft;if(Ae.method===j6.type.method){let Et=Ae.params.id;x.delete(Et),We(Ae);return}else{let Et=m.get(Ae.method);Et&&(ft=Et.handler,Ge=Et.type)}if(ft||p)try{if(We(Ae),ft)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ft();else if(Array.isArray(Ae.params)){let Et=Ae.params;Ae.method===W6.type.method&&Et.length===2&&$le.is(Et[0])?ft({token:Et[0],value:Et[1]}):(Ge!==void 0&&(Ge.parameterStructures===Bn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${Et.length} arguments`)),ft(...Et))}else Ge!==void 0&&Ge.parameterStructures===Bn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ft(Ae.params);else p&&p(Ae.method,Ae.params)}catch(Et){Et.message?i.error(`Notification handler '${Ae.method}' failed with message: ${Et.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else pe.fire(Ae)}s(Tt,"handleNotification");function le(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(ba.string(Ge.id)||ba.number(Ge.id)){let ft=Ge.id,Et=E.get(ft);Et&&Et.reject(new Error("The received response has neither a result nor an error property."))}}s(le,"handleInvalidMessage");function Ue(Ae){if(Ae!=null)switch(_){case No.Verbose:return JSON.stringify(Ae,null,4);case No.Compact:return JSON.stringify(Ae);default:return}}s(Ue,"stringifyTrace");function ye(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("send-request",Ae)}s(ye,"traceSendingRequest");function nt(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Sending notification '${Ae.method}'.`,Ge)}else xe("send-notification",Ae)}s(nt,"traceSendingNotification");function ee(Ae,Ge,ft){if(!(_===No.Off||!P))if(k===w0.Text){let Et;(_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?Et=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?Et=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(Et=`No result returned.

`)),P.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ft}ms`,Et)}else xe("send-response",Ae)}s(ee,"traceSendingResponse");function oe(Ae){if(!(_===No.Off||!P))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&Ae.params&&(Ge=`Params: ${Ue(Ae.params)}

`),P.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else xe("receive-request",Ae)}s(oe,"traceReceivedRequest");function We(Ae){if(!(_===No.Off||!P||Ae.method===pW.type.method))if(k===w0.Text){let Ge;(_===No.Verbose||_===No.Compact)&&(Ae.params?Ge=`Params: ${Ue(Ae.params)}

`:Ge=`No parameters provided.

`),P.log(`Received notification '${Ae.method}'.`,Ge)}else xe("receive-notification",Ae)}s(We,"traceReceivedNotification");function De(Ae,Ge){if(!(_===No.Off||!P))if(k===w0.Text){let ft;if((_===No.Verbose||_===No.Compact)&&(Ae.error&&Ae.error.data?ft=`Error data: ${Ue(Ae.error.data)}

`:Ae.result?ft=`Result: ${Ue(Ae.result)}

`:Ae.error===void 0&&(ft=`No result returned.

`)),Ge){let Et=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";P.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${Et}`,ft)}else P.log(`Received response ${Ae.id} without active response promise.`,ft)}else xe("receive-response",Ae)}s(De,"traceReceivedResponse");function xe(Ae,Ge){if(!P||_===No.Off)return;let ft={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};P.log(ft)}s(xe,"logLSPMessage");function Ye(){if(fe())throw new I4(G6.Closed,"Connection is closed.");if(ne())throw new I4(G6.Disposed,"Connection is disposed.")}s(Ye,"throwIfClosedOrDisposed");function st(){if(re())throw new I4(G6.AlreadyListening,"Connection is already listening")}s(st,"throwIfListening");function yt(){if(!re())throw new Error("Call listen() first.")}s(yt,"throwIfNotListening");function qt(Ae){return Ae===void 0?null:Ae}s(qt,"undefinedToNull");function dr(Ae){if(Ae!==null)return Ae}s(dr,"nullToUndefined");function Ft(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Ft,"isNamedParam");function Yr(Ae,Ge){switch(Ae){case Bn.ParameterStructures.auto:return Ft(Ge)?dr(Ge):[qt(Ge)];case Bn.ParameterStructures.byName:if(!Ft(Ge))throw new Error("Received parameters by name but param is not an object literal.");return dr(Ge);case Bn.ParameterStructures.byPosition:return[qt(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Yr,"computeSingleParam");function en(Ae,Ge){let ft,Et=Ae.numberOfParams;switch(Et){case 0:ft=void 0;break;case 1:ft=Yr(Ae.parameterStructures,Ge[0]);break;default:ft=[];for(let Zt=0;Zt<Ge.length&&Zt<Et;Zt++)ft.push(qt(Ge[Zt]));if(Ge.length<Et)for(let Zt=Ge.length;Zt<Et;Zt++)ft.push(null);break}return ft}s(en,"computeMessageParams");let yn={sendNotification:s((Ae,...Ge)=>{Ye();let ft,Et;if(ba.string(Ae)){ft=Ae;let Vt=Ge[0],vr=0,Ir=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(Vt)&&(vr=1,Ir=Vt);let zt=Ge.length,ir=zt-vr;switch(ir){case 0:Et=void 0;break;case 1:Et=Yr(Ir,Ge[vr]);break;default:if(Ir===Bn.ParameterStructures.byName)throw new Error(`Received ${ir} parameters for 'by Name' notification parameter structure.`);Et=Ge.slice(vr,zt).map(Xt=>qt(Xt));break}}else{let Vt=Ge;ft=Ae.method,Et=en(Ae,Vt)}let Zt={jsonrpc:l,method:ft,params:Et};return nt(Zt),e.write(Zt).catch(Vt=>{throw i.error("Sending notification failed."),Vt})},"sendNotification"),onNotification:s((Ae,Ge)=>{Ye();let ft;return ba.func(Ae)?p=Ae:Ge&&(ba.string(Ae)?(ft=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ft=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ft!==void 0?m.delete(ft):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ft)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ft),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ft)=>yn.sendNotification(W6.type,{token:Ge,value:ft}),"sendProgress"),onUnhandledProgress:Y.event,sendRequest:s((Ae,...Ge)=>{Ye(),yt();let ft,Et,Zt;if(ba.string(Ae)){ft=Ae;let zt=Ge[0],ir=Ge[Ge.length-1],Xt=0,Sr=Bn.ParameterStructures.auto;Bn.ParameterStructures.is(zt)&&(Xt=1,Sr=zt);let qr=Ge.length;Vle.CancellationToken.is(ir)&&(qr=qr-1,Zt=ir);let tn=qr-Xt;switch(tn){case 0:Et=void 0;break;case 1:Et=Yr(Sr,Ge[Xt]);break;default:if(Sr===Bn.ParameterStructures.byName)throw new Error(`Received ${tn} parameters for 'by Name' request parameter structure.`);Et=Ge.slice(Xt,qr).map(zn=>qt(zn));break}}else{let zt=Ge;ft=Ae.method,Et=en(Ae,zt);let ir=Ae.numberOfParams;Zt=Vle.CancellationToken.is(zt[ir])?zt[ir]:void 0}let Vt=o++,vr;Zt&&(vr=Zt.onCancellationRequested(()=>{let zt=H.sender.sendCancellation(yn,Vt);return zt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Vt}`),Promise.resolve()):zt.catch(()=>{i.log(`Sending cancellation messages for id ${Vt} failed`)})}));let Ir={jsonrpc:l,id:Vt,method:ft,params:Et};return ye(Ir),typeof H.sender.enableCancellation=="function"&&H.sender.enableCancellation(Ir),new Promise(async(zt,ir)=>{let Xt=s(tn=>{zt(tn),H.sender.cleanup(Vt),vr?.dispose()},"resolveWithCleanup"),Sr=s(tn=>{ir(tn),H.sender.cleanup(Vt),vr?.dispose()},"rejectWithCleanup"),qr={method:ft,timerStart:Date.now(),resolve:Xt,reject:Sr};try{await e.write(Ir),E.set(Vt,qr)}catch(tn){throw i.error("Sending request failed."),qr.reject(new Bn.ResponseError(Bn.ErrorCodes.MessageWriteError,tn.message?tn.message:"Unknown reason")),tn}})},"sendRequest"),onRequest:s((Ae,Ge)=>{Ye();let ft=null;return Yle.is(Ae)?(ft=void 0,u=Ae):ba.string(Ae)?(ft=null,Ge!==void 0&&(ft=Ae,f.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ft=Ae.method,f.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ft!==null&&(ft!==void 0?f.delete(ft):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>E.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ft)=>{let Et=!1,Zt=w0.Text;ft!==void 0&&(ba.boolean(ft)?Et=ft:(Et=ft.sendNotification||!1,Zt=ft.traceFormat||w0.Text)),_=Ae,k=Zt,_===No.Off?P=void 0:P=Ge,Et&&!fe()&&!ne()&&await yn.sendNotification(Kle.type,{value:No.toString(Ae)})},"trace"),onError:M.event,onClose:J.event,onUnhandledNotification:pe.event,onDispose:G.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ne())return;N=Yh.Disposed,G.fire(void 0);let Ae=new Bn.ResponseError(Bn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of E.values())Ge.reject(Ae);E=new Map,b=new Map,x=new Set,y=new Y4e.LinkedMap,ba.func(e.dispose)&&e.dispose(),ba.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{Ye(),st(),N=Yh.Listening,t.listen(ht)},"listen"),inspect:s(()=>{(0,z4e.default)().console.log("inspect")},"inspect")};return yn.onNotification(pW.type,Ae=>{if(_===No.Off||!P)return;let Ge=_===No.Verbose||_===No.Compact;P.log(Ae.message,Ge?Ae.verbose:void 0)}),yn.onNotification(W6.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):Y.fire(Ae)}),yn}s(fbt,"createMessageConnection");ci.createMessageConnection=fbt});var CW=U(dt=>{"use strict";d();Object.defineProperty(dt,"__esModule",{value:!0});dt.ProgressType=dt.ProgressToken=dt.createMessageConnection=dt.NullLogger=dt.ConnectionOptions=dt.ConnectionStrategy=dt.AbstractMessageBuffer=dt.WriteableStreamMessageWriter=dt.AbstractMessageWriter=dt.MessageWriter=dt.ReadableStreamMessageReader=dt.AbstractMessageReader=dt.MessageReader=dt.SharedArrayReceiverStrategy=dt.SharedArraySenderStrategy=dt.CancellationToken=dt.CancellationTokenSource=dt.Emitter=dt.Event=dt.Disposable=dt.LRUCache=dt.Touch=dt.LinkedMap=dt.ParameterStructures=dt.NotificationType9=dt.NotificationType8=dt.NotificationType7=dt.NotificationType6=dt.NotificationType5=dt.NotificationType4=dt.NotificationType3=dt.NotificationType2=dt.NotificationType1=dt.NotificationType0=dt.NotificationType=dt.ErrorCodes=dt.ResponseError=dt.RequestType9=dt.RequestType8=dt.RequestType7=dt.RequestType6=dt.RequestType5=dt.RequestType4=dt.RequestType3=dt.RequestType2=dt.RequestType1=dt.RequestType0=dt.RequestType=dt.Message=dt.RAL=void 0;dt.MessageStrategy=dt.CancellationStrategy=dt.CancellationSenderStrategy=dt.CancellationReceiverStrategy=dt.ConnectionError=dt.ConnectionErrors=dt.LogTraceNotification=dt.SetTraceNotification=dt.TraceFormat=dt.TraceValues=dt.Trace=void 0;var Es=Ile();Object.defineProperty(dt,"Message",{enumerable:!0,get:s(function(){return Es.Message},"get")});Object.defineProperty(dt,"RequestType",{enumerable:!0,get:s(function(){return Es.RequestType},"get")});Object.defineProperty(dt,"RequestType0",{enumerable:!0,get:s(function(){return Es.RequestType0},"get")});Object.defineProperty(dt,"RequestType1",{enumerable:!0,get:s(function(){return Es.RequestType1},"get")});Object.defineProperty(dt,"RequestType2",{enumerable:!0,get:s(function(){return Es.RequestType2},"get")});Object.defineProperty(dt,"RequestType3",{enumerable:!0,get:s(function(){return Es.RequestType3},"get")});Object.defineProperty(dt,"RequestType4",{enumerable:!0,get:s(function(){return Es.RequestType4},"get")});Object.defineProperty(dt,"RequestType5",{enumerable:!0,get:s(function(){return Es.RequestType5},"get")});Object.defineProperty(dt,"RequestType6",{enumerable:!0,get:s(function(){return Es.RequestType6},"get")});Object.defineProperty(dt,"RequestType7",{enumerable:!0,get:s(function(){return Es.RequestType7},"get")});Object.defineProperty(dt,"RequestType8",{enumerable:!0,get:s(function(){return Es.RequestType8},"get")});Object.defineProperty(dt,"RequestType9",{enumerable:!0,get:s(function(){return Es.RequestType9},"get")});Object.defineProperty(dt,"ResponseError",{enumerable:!0,get:s(function(){return Es.ResponseError},"get")});Object.defineProperty(dt,"ErrorCodes",{enumerable:!0,get:s(function(){return Es.ErrorCodes},"get")});Object.defineProperty(dt,"NotificationType",{enumerable:!0,get:s(function(){return Es.NotificationType},"get")});Object.defineProperty(dt,"NotificationType0",{enumerable:!0,get:s(function(){return Es.NotificationType0},"get")});Object.defineProperty(dt,"NotificationType1",{enumerable:!0,get:s(function(){return Es.NotificationType1},"get")});Object.defineProperty(dt,"NotificationType2",{enumerable:!0,get:s(function(){return Es.NotificationType2},"get")});Object.defineProperty(dt,"NotificationType3",{enumerable:!0,get:s(function(){return Es.NotificationType3},"get")});Object.defineProperty(dt,"NotificationType4",{enumerable:!0,get:s(function(){return Es.NotificationType4},"get")});Object.defineProperty(dt,"NotificationType5",{enumerable:!0,get:s(function(){return Es.NotificationType5},"get")});Object.defineProperty(dt,"NotificationType6",{enumerable:!0,get:s(function(){return Es.NotificationType6},"get")});Object.defineProperty(dt,"NotificationType7",{enumerable:!0,get:s(function(){return Es.NotificationType7},"get")});Object.defineProperty(dt,"NotificationType8",{enumerable:!0,get:s(function(){return Es.NotificationType8},"get")});Object.defineProperty(dt,"NotificationType9",{enumerable:!0,get:s(function(){return Es.NotificationType9},"get")});Object.defineProperty(dt,"ParameterStructures",{enumerable:!0,get:s(function(){return Es.ParameterStructures},"get")});var Zle=wle();Object.defineProperty(dt,"LinkedMap",{enumerable:!0,get:s(function(){return Zle.LinkedMap},"get")});Object.defineProperty(dt,"LRUCache",{enumerable:!0,get:s(function(){return Zle.LRUCache},"get")});Object.defineProperty(dt,"Touch",{enumerable:!0,get:s(function(){return Zle.Touch},"get")});var pbt=F4e();Object.defineProperty(dt,"Disposable",{enumerable:!0,get:s(function(){return pbt.Disposable},"get")});var Z4e=E4();Object.defineProperty(dt,"Event",{enumerable:!0,get:s(function(){return Z4e.Event},"get")});Object.defineProperty(dt,"Emitter",{enumerable:!0,get:s(function(){return Z4e.Emitter},"get")});var ePe=cW();Object.defineProperty(dt,"CancellationTokenSource",{enumerable:!0,get:s(function(){return ePe.CancellationTokenSource},"get")});Object.defineProperty(dt,"CancellationToken",{enumerable:!0,get:s(function(){return ePe.CancellationToken},"get")});var tPe=Q4e();Object.defineProperty(dt,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return tPe.SharedArraySenderStrategy},"get")});Object.defineProperty(dt,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return tPe.SharedArrayReceiverStrategy},"get")});var eue=q4e();Object.defineProperty(dt,"MessageReader",{enumerable:!0,get:s(function(){return eue.MessageReader},"get")});Object.defineProperty(dt,"AbstractMessageReader",{enumerable:!0,get:s(function(){return eue.AbstractMessageReader},"get")});Object.defineProperty(dt,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return eue.ReadableStreamMessageReader},"get")});var tue=V4e();Object.defineProperty(dt,"MessageWriter",{enumerable:!0,get:s(function(){return tue.MessageWriter},"get")});Object.defineProperty(dt,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return tue.AbstractMessageWriter},"get")});Object.defineProperty(dt,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return tue.WriteableStreamMessageWriter},"get")});var mbt=$4e();Object.defineProperty(dt,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return mbt.AbstractMessageBuffer},"get")});var ru=X4e();Object.defineProperty(dt,"ConnectionStrategy",{enumerable:!0,get:s(function(){return ru.ConnectionStrategy},"get")});Object.defineProperty(dt,"ConnectionOptions",{enumerable:!0,get:s(function(){return ru.ConnectionOptions},"get")});Object.defineProperty(dt,"NullLogger",{enumerable:!0,get:s(function(){return ru.NullLogger},"get")});Object.defineProperty(dt,"createMessageConnection",{enumerable:!0,get:s(function(){return ru.createMessageConnection},"get")});Object.defineProperty(dt,"ProgressToken",{enumerable:!0,get:s(function(){return ru.ProgressToken},"get")});Object.defineProperty(dt,"ProgressType",{enumerable:!0,get:s(function(){return ru.ProgressType},"get")});Object.defineProperty(dt,"Trace",{enumerable:!0,get:s(function(){return ru.Trace},"get")});Object.defineProperty(dt,"TraceValues",{enumerable:!0,get:s(function(){return ru.TraceValues},"get")});Object.defineProperty(dt,"TraceFormat",{enumerable:!0,get:s(function(){return ru.TraceFormat},"get")});Object.defineProperty(dt,"SetTraceNotification",{enumerable:!0,get:s(function(){return ru.SetTraceNotification},"get")});Object.defineProperty(dt,"LogTraceNotification",{enumerable:!0,get:s(function(){return ru.LogTraceNotification},"get")});Object.defineProperty(dt,"ConnectionErrors",{enumerable:!0,get:s(function(){return ru.ConnectionErrors},"get")});Object.defineProperty(dt,"ConnectionError",{enumerable:!0,get:s(function(){return ru.ConnectionError},"get")});Object.defineProperty(dt,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return ru.CancellationReceiverStrategy},"get")});Object.defineProperty(dt,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return ru.CancellationSenderStrategy},"get")});Object.defineProperty(dt,"CancellationStrategy",{enumerable:!0,get:s(function(){return ru.CancellationStrategy},"get")});Object.defineProperty(dt,"MessageStrategy",{enumerable:!0,get:s(function(){return ru.MessageStrategy},"get")});var hbt=mb();dt.RAL=hbt.default});var iPe=U(oue=>{"use strict";d();Object.defineProperty(oue,"__esModule",{value:!0});var rPe=require("util"),Q1=CW(),EW=class t extends Q1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new rPe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};EW.emptyBuffer=Buffer.allocUnsafe(0);var rue=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Q1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Q1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Q1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Q1.Disposable.create(()=>this.stream.off("data",e))}},nue=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Q1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Q1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Q1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},nPe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new EW(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new rPe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new rue(t),"asReadableStream"),asWritableStream:s(t=>new nue(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function iue(){return nPe}s(iue,"RIL");(function(t){function e(){Q1.RAL.install(nPe)}s(e,"install"),t.install=e})(iue||(iue={}));oue.default=iue});var k_=U(io=>{"use strict";d();var gbt=io&&io.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Abt=io&&io.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gbt(e,t,r)};Object.defineProperty(io,"__esModule",{value:!0});io.createMessageConnection=io.createServerSocketTransport=io.createClientSocketTransport=io.createServerPipeTransport=io.createClientPipeTransport=io.generateRandomPipeName=io.StreamMessageWriter=io.StreamMessageReader=io.SocketMessageWriter=io.SocketMessageReader=io.PortMessageWriter=io.PortMessageReader=io.IPCMessageWriter=io.IPCMessageReader=void 0;var T4=iPe();T4.default.install();var oPe=require("path"),ybt=require("os"),Cbt=require("crypto"),bW=require("net"),_0=CW();Abt(CW(),io);var sue=class extends _0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),_0.Disposable.create(()=>this.process.off("message",e))}};io.IPCMessageReader=sue;var aue=class extends _0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.IPCMessageWriter=aue;var cue=class extends _0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new _0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};io.PortMessageReader=cue;var lue=class extends _0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};io.PortMessageWriter=lue;var S_=class extends _0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,T4.default)().stream.asReadableStream(e),r)}};io.SocketMessageReader=S_;var R_=class extends _0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,T4.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};io.SocketMessageWriter=R_;var vW=class extends _0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,T4.default)().stream.asReadableStream(e),r)}};io.StreamMessageReader=vW;var xW=class extends _0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,T4.default)().stream.asWritableStream(e),r)}};io.StreamMessageWriter=xW;var sPe=process.env.XDG_RUNTIME_DIR,Ebt=new Map([["linux",107],["darwin",103]]);function vbt(){let t=(0,Cbt.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;sPe?e=oPe.join(sPe,`vscode-ipc-${t}.sock`):e=oPe.join(ybt.tmpdir(),`vscode-${t}.sock`);let r=Ebt.get(process.platform);return r!==void 0&&e.length>r&&(0,T4.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(vbt,"generateRandomPipeName");io.generateRandomPipeName=vbt;function xbt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,bW.createServer)(c=>{a.close(),r([new S_(c,e),new R_(c,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(xbt,"createClientPipeTransport");io.createClientPipeTransport=xbt;function bbt(t,e="utf-8"){let r=(0,bW.createConnection)(t);return[new S_(r,e),new R_(r,e)]}s(bbt,"createServerPipeTransport");io.createServerPipeTransport=bbt;function Ibt(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,bW.createServer)(c=>{a.close(),r([new S_(c,e),new R_(c,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Ibt,"createClientSocketTransport");io.createClientSocketTransport=Ibt;function Tbt(t,e="utf-8"){let r=(0,bW.createConnection)(t,"127.0.0.1");return[new S_(r,e),new R_(r,e)]}s(Tbt,"createServerSocketTransport");io.createServerSocketTransport=Tbt;function wbt(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(wbt,"isReadableStream");function _bt(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(_bt,"isWritableStream");function Sbt(t,e,r,n){r||(r=_0.NullLogger);let i=wbt(t)?new vW(t):t,o=_bt(e)?new xW(e):e;return _0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,_0.createMessageConnection)(i,o,r,n)}s(Sbt,"createMessageConnection");io.createMessageConnection=Sbt});var uue=U((TNr,aPe)=>{"use strict";d();aPe.exports=k_()});var TW=U((cPe,IW)=>{d();(function(t){if(typeof IW=="object"&&typeof IW.exports=="object"){var e=t(require,cPe);e!==void 0&&(IW.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(r||(e.DocumentUri=r={}));var n;(function(W){function ge(ve){return typeof ve=="string"}s(ge,"is"),W.is=ge})(n||(e.URI=n={}));var i;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(i||(e.integer=i={}));var o;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&W.MIN_VALUE<=ve&&ve<=W.MAX_VALUE}s(ge,"is"),W.is=ge})(o||(e.uinteger=o={}));var a;(function(W){function ge(te,O){return te===Number.MAX_VALUE&&(te=o.MAX_VALUE),O===Number.MAX_VALUE&&(O=o.MAX_VALUE),{line:te,character:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.uinteger(O.line)&&_e.uinteger(O.character)}s(ve,"is"),W.is=ve})(a||(e.Position=a={}));var c;(function(W){function ge(te,O,Re,ze){if(_e.uinteger(te)&&_e.uinteger(O)&&_e.uinteger(Re)&&_e.uinteger(ze))return{start:a.create(te,O),end:a.create(Re,ze)};if(a.is(te)&&a.is(O))return{start:te,end:O};throw new Error("Range#create called with invalid arguments[".concat(te,", ").concat(O,", ").concat(Re,", ").concat(ze,"]"))}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&a.is(O.start)&&a.is(O.end)}s(ve,"is"),W.is=ve})(c||(e.Range=c={}));var l;(function(W){function ge(te,O){return{uri:te,range:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&(_e.string(O.uri)||_e.undefined(O.uri))}s(ve,"is"),W.is=ve})(l||(e.Location=l={}));var u;(function(W){function ge(te,O,Re,ze){return{targetUri:te,targetRange:O,targetSelectionRange:Re,originSelectionRange:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.targetRange)&&_e.string(O.targetUri)&&c.is(O.targetSelectionRange)&&(c.is(O.originSelectionRange)||_e.undefined(O.originSelectionRange))}s(ve,"is"),W.is=ve})(u||(e.LocationLink=u={}));var f;(function(W){function ge(te,O,Re,ze){return{red:te,green:O,blue:Re,alpha:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.numberRange(O.red,0,1)&&_e.numberRange(O.green,0,1)&&_e.numberRange(O.blue,0,1)&&_e.numberRange(O.alpha,0,1)}s(ve,"is"),W.is=ve})(f||(e.Color=f={}));var p;(function(W){function ge(te,O){return{range:te,color:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&f.is(O.color)}s(ve,"is"),W.is=ve})(p||(e.ColorInformation=p={}));var m;(function(W){function ge(te,O,Re){return{label:te,textEdit:O,additionalTextEdits:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.undefined(O.textEdit)||P.is(O))&&(_e.undefined(O.additionalTextEdits)||_e.typedArray(O.additionalTextEdits,P.is))}s(ve,"is"),W.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={startLine:te,endLine:O};return _e.defined(Re)&&(Ar.startCharacter=Re),_e.defined(ze)&&(Ar.endCharacter=ze),_e.defined(Gt)&&(Ar.kind=Gt),_e.defined(Pr)&&(Ar.collapsedText=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.uinteger(O.startLine)&&_e.uinteger(O.startLine)&&(_e.undefined(O.startCharacter)||_e.uinteger(O.startCharacter))&&(_e.undefined(O.endCharacter)||_e.uinteger(O.endCharacter))&&(_e.undefined(O.kind)||_e.string(O.kind))}s(ve,"is"),W.is=ve})(g||(e.FoldingRange=g={}));var y;(function(W){function ge(te,O){return{location:te,message:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&l.is(O.location)&&_e.string(O.message)}s(ve,"is"),W.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var E;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(E||(e.DiagnosticSeverity=E={}));var x;(function(W){W.Unnecessary=1,W.Deprecated=2})(x||(e.DiagnosticTag=x={}));var b;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&_e.string(te.href)}s(ge,"is"),W.is=ge})(b||(e.CodeDescription=b={}));var _;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={range:te,message:O};return _e.defined(Re)&&(Ar.severity=Re),_e.defined(ze)&&(Ar.code=ze),_e.defined(Gt)&&(Ar.source=Gt),_e.defined(Pr)&&(Ar.relatedInformation=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O,Re=te;return _e.defined(Re)&&c.is(Re.range)&&_e.string(Re.message)&&(_e.number(Re.severity)||_e.undefined(Re.severity))&&(_e.integer(Re.code)||_e.string(Re.code)||_e.undefined(Re.code))&&(_e.undefined(Re.codeDescription)||_e.string((O=Re.codeDescription)===null||O===void 0?void 0:O.href))&&(_e.string(Re.source)||_e.undefined(Re.source))&&(_e.undefined(Re.relatedInformation)||_e.typedArray(Re.relatedInformation,y.is))}s(ve,"is"),W.is=ve})(_||(e.Diagnostic=_={}));var k;(function(W){function ge(te,O){for(var Re=[],ze=2;ze<arguments.length;ze++)Re[ze-2]=arguments[ze];var Gt={title:te,command:O};return _e.defined(Re)&&Re.length>0&&(Gt.arguments=Re),Gt}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.title)&&_e.string(O.command)}s(ve,"is"),W.is=ve})(k||(e.Command=k={}));var P;(function(W){function ge(Re,ze){return{range:Re,newText:ze}}s(ge,"replace"),W.replace=ge;function ve(Re,ze){return{range:{start:Re,end:Re},newText:ze}}s(ve,"insert"),W.insert=ve;function te(Re){return{range:Re,newText:""}}s(te,"del"),W.del=te;function O(Re){var ze=Re;return _e.objectLiteral(ze)&&_e.string(ze.newText)&&c.is(ze.range)}s(O,"is"),W.is=O})(P||(e.TextEdit=P={}));var N;(function(W){function ge(te,O,Re){var ze={label:te};return O!==void 0&&(ze.needsConfirmation=O),Re!==void 0&&(ze.description=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&_e.string(O.label)&&(_e.boolean(O.needsConfirmation)||O.needsConfirmation===void 0)&&(_e.string(O.description)||O.description===void 0)}s(ve,"is"),W.is=ve})(N||(e.ChangeAnnotation=N={}));var M;(function(W){function ge(ve){var te=ve;return _e.string(te)}s(ge,"is"),W.is=ge})(M||(e.ChangeAnnotationIdentifier=M={}));var J;(function(W){function ge(Re,ze,Gt){return{range:Re,newText:ze,annotationId:Gt}}s(ge,"replace"),W.replace=ge;function ve(Re,ze,Gt){return{range:{start:Re,end:Re},newText:ze,annotationId:Gt}}s(ve,"insert"),W.insert=ve;function te(Re,ze){return{range:Re,newText:"",annotationId:ze}}s(te,"del"),W.del=te;function O(Re){var ze=Re;return P.is(ze)&&(N.is(ze.annotationId)||M.is(ze.annotationId))}s(O,"is"),W.is=O})(J||(e.AnnotatedTextEdit=J={}));var pe;(function(W){function ge(te,O){return{textDocument:te,edits:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&fe.is(O.textDocument)&&Array.isArray(O.edits)}s(ve,"is"),W.is=ve})(pe||(e.TextDocumentEdit=pe={}));var Y;(function(W){function ge(te,O,Re){var ze={kind:"create",uri:te};return O!==void 0&&(O.overwrite!==void 0||O.ignoreIfExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="create"&&_e.string(O.uri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(Y||(e.CreateFile=Y={}));var G;(function(W){function ge(te,O,Re,ze){var Gt={kind:"rename",oldUri:te,newUri:O};return Re!==void 0&&(Re.overwrite!==void 0||Re.ignoreIfExists!==void 0)&&(Gt.options=Re),ze!==void 0&&(Gt.annotationId=ze),Gt}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="rename"&&_e.string(O.oldUri)&&_e.string(O.newUri)&&(O.options===void 0||(O.options.overwrite===void 0||_e.boolean(O.options.overwrite))&&(O.options.ignoreIfExists===void 0||_e.boolean(O.options.ignoreIfExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(G||(e.RenameFile=G={}));var H;(function(W){function ge(te,O,Re){var ze={kind:"delete",uri:te};return O!==void 0&&(O.recursive!==void 0||O.ignoreIfNotExists!==void 0)&&(ze.options=O),Re!==void 0&&(ze.annotationId=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&O.kind==="delete"&&_e.string(O.uri)&&(O.options===void 0||(O.options.recursive===void 0||_e.boolean(O.options.recursive))&&(O.options.ignoreIfNotExists===void 0||_e.boolean(O.options.ignoreIfNotExists)))&&(O.annotationId===void 0||M.is(O.annotationId))}s(ve,"is"),W.is=ve})(H||(e.DeleteFile=H={}));var ce;(function(W){function ge(ve){var te=ve;return te&&(te.changes!==void 0||te.documentChanges!==void 0)&&(te.documentChanges===void 0||te.documentChanges.every(function(O){return _e.string(O.kind)?Y.is(O)||G.is(O)||H.is(O):pe.is(O)}))}s(ge,"is"),W.is=ge})(ce||(e.WorkspaceEdit=ce={}));var ie=function(){function W(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(W,"TextEditChangeImpl"),W.prototype.insert=function(ge,ve,te){var O,Re;if(te===void 0?O=P.insert(ge,ve):M.is(te)?(Re=te,O=J.insert(ge,ve,te)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(te),O=J.insert(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.replace=function(ge,ve,te){var O,Re;if(te===void 0?O=P.replace(ge,ve):M.is(te)?(Re=te,O=J.replace(ge,ve,te)):(this.assertChangeAnnotations(this.changeAnnotations),Re=this.changeAnnotations.manage(te),O=J.replace(ge,ve,Re)),this.edits.push(O),Re!==void 0)return Re},W.prototype.delete=function(ge,ve){var te,O;if(ve===void 0?te=P.del(ge):M.is(ve)?(O=ve,te=J.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),O=this.changeAnnotations.manage(ve),te=J.del(ge,O)),this.edits.push(te),O!==void 0)return O},W.prototype.add=function(ge){this.edits.push(ge)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},W}(),V=function(){function W(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(W,"ChangeAnnotations"),W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),W.prototype.manage=function(ge,ve){var te;if(M.is(ge)?te=ge:(te=this.nextId(),ve=ge),this._annotations[te]!==void 0)throw new Error("Id ".concat(te," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(te));return this._annotations[te]=ve,this._size++,te},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),Q=function(){function W(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new V(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(te){if(pe.is(te)){var O=new ie(te.edits,ve._changeAnnotations);ve._textEditChanges[te.textDocument.uri]=O}})):ge.changes&&Object.keys(ge.changes).forEach(function(te){var O=new ie(ge.changes[te]);ve._textEditChanges[te]=O})):this._workspaceEdit={}}return s(W,"WorkspaceChange"),Object.defineProperty(W.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(ge){if(fe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},te=this._textEditChanges[ve.uri];if(!te){var O=[],Re={textDocument:ve,edits:O};this._workspaceEdit.documentChanges.push(Re),te=new ie(O,this._changeAnnotations),this._textEditChanges[ve.uri]=te}return te}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var te=this._textEditChanges[ge];if(!te){var O=[];this._workspaceEdit.changes[ge]=O,te=new ie(O),this._textEditChanges[ge]=te}return te}},W.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},W.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},W.prototype.createFile=function(ge,ve,te){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:te=ve;var Re,ze;if(O===void 0?Re=Y.create(ge,te):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=Y.create(ge,te,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W.prototype.renameFile=function(ge,ve,te,O){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Re;N.is(te)||M.is(te)?Re=te:O=te;var ze,Gt;if(Re===void 0?ze=G.create(ge,ve,O):(Gt=M.is(Re)?Re:this._changeAnnotations.manage(Re),ze=G.create(ge,ve,O,Gt)),this._workspaceEdit.documentChanges.push(ze),Gt!==void 0)return Gt},W.prototype.deleteFile=function(ge,ve,te){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O;N.is(ve)||M.is(ve)?O=ve:te=ve;var Re,ze;if(O===void 0?Re=H.create(ge,te):(ze=M.is(O)?O:this._changeAnnotations.manage(O),Re=H.create(ge,te,ze)),this._workspaceEdit.documentChanges.push(Re),ze!==void 0)return ze},W}();e.WorkspaceChange=Q;var z;(function(W){function ge(te){return{uri:te}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)}s(ve,"is"),W.is=ve})(z||(e.TextDocumentIdentifier=z={}));var re;(function(W){function ge(te,O){return{uri:te,version:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&_e.integer(O.version)}s(ve,"is"),W.is=ve})(re||(e.VersionedTextDocumentIdentifier=re={}));var fe;(function(W){function ge(te,O){return{uri:te,version:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&(O.version===null||_e.integer(O.version))}s(ve,"is"),W.is=ve})(fe||(e.OptionalVersionedTextDocumentIdentifier=fe={}));var ne;(function(W){function ge(te,O,Re,ze){return{uri:te,languageId:O,version:Re,text:ze}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.string(O.uri)&&_e.string(O.languageId)&&_e.integer(O.version)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(ne||(e.TextDocumentItem=ne={}));var me;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function ge(ve){var te=ve;return te===W.PlainText||te===W.Markdown}s(ge,"is"),W.is=ge})(me||(e.MarkupKind=me={}));var he;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(ve)&&me.is(te.kind)&&_e.string(te.value)}s(ge,"is"),W.is=ge})(he||(e.MarkupContent=he={}));var Qe;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(Qe||(e.CompletionItemKind=Qe={}));var ke;(function(W){W.PlainText=1,W.Snippet=2})(ke||(e.InsertTextFormat=ke={}));var tt;(function(W){W.Deprecated=1})(tt||(e.CompletionItemTag=tt={}));var Fe;(function(W){function ge(te,O,Re){return{newText:te,insert:O,replace:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.newText)&&c.is(O.insert)&&c.is(O.replace)}s(ve,"is"),W.is=ve})(Fe||(e.InsertReplaceEdit=Fe={}));var ht;(function(W){W.asIs=1,W.adjustIndentation=2})(ht||(e.InsertTextMode=ht={}));var St;(function(W){function ge(ve){var te=ve;return te&&(_e.string(te.detail)||te.detail===void 0)&&(_e.string(te.description)||te.description===void 0)}s(ge,"is"),W.is=ge})(St||(e.CompletionItemLabelDetails=St={}));var xt;(function(W){function ge(ve){return{label:ve}}s(ge,"create"),W.create=ge})(xt||(e.CompletionItem=xt={}));var Tt;(function(W){function ge(ve,te){return{items:ve||[],isIncomplete:!!te}}s(ge,"create"),W.create=ge})(Tt||(e.CompletionList=Tt={}));var le;(function(W){function ge(te){return te.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),W.fromPlainText=ge;function ve(te){var O=te;return _e.string(O)||_e.objectLiteral(O)&&_e.string(O.language)&&_e.string(O.value)}s(ve,"is"),W.is=ve})(le||(e.MarkedString=le={}));var Ue;(function(W){function ge(ve){var te=ve;return!!te&&_e.objectLiteral(te)&&(he.is(te.contents)||le.is(te.contents)||_e.typedArray(te.contents,le.is))&&(ve.range===void 0||c.is(ve.range))}s(ge,"is"),W.is=ge})(Ue||(e.Hover=Ue={}));var ye;(function(W){function ge(ve,te){return te?{label:ve,documentation:te}:{label:ve}}s(ge,"create"),W.create=ge})(ye||(e.ParameterInformation=ye={}));var nt;(function(W){function ge(ve,te){for(var O=[],Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];var ze={label:ve};return _e.defined(te)&&(ze.documentation=te),_e.defined(O)?ze.parameters=O:ze.parameters=[],ze}s(ge,"create"),W.create=ge})(nt||(e.SignatureInformation=nt={}));var ee;(function(W){W.Text=1,W.Read=2,W.Write=3})(ee||(e.DocumentHighlightKind=ee={}));var oe;(function(W){function ge(ve,te){var O={range:ve};return _e.number(te)&&(O.kind=te),O}s(ge,"create"),W.create=ge})(oe||(e.DocumentHighlight=oe={}));var We;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(We||(e.SymbolKind=We={}));var De;(function(W){W.Deprecated=1})(De||(e.SymbolTag=De={}));var xe;(function(W){function ge(ve,te,O,Re,ze){var Gt={name:ve,kind:te,location:{uri:Re,range:O}};return ze&&(Gt.containerName=ze),Gt}s(ge,"create"),W.create=ge})(xe||(e.SymbolInformation=xe={}));var Ye;(function(W){function ge(ve,te,O,Re){return Re!==void 0?{name:ve,kind:te,location:{uri:O,range:Re}}:{name:ve,kind:te,location:{uri:O}}}s(ge,"create"),W.create=ge})(Ye||(e.WorkspaceSymbol=Ye={}));var st;(function(W){function ge(te,O,Re,ze,Gt,Pr){var Ar={name:te,detail:O,kind:Re,range:ze,selectionRange:Gt};return Pr!==void 0&&(Ar.children=Pr),Ar}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.name)&&_e.number(O.kind)&&c.is(O.range)&&c.is(O.selectionRange)&&(O.detail===void 0||_e.string(O.detail))&&(O.deprecated===void 0||_e.boolean(O.deprecated))&&(O.children===void 0||Array.isArray(O.children))&&(O.tags===void 0||Array.isArray(O.tags))}s(ve,"is"),W.is=ve})(st||(e.DocumentSymbol=st={}));var yt;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(yt||(e.CodeActionKind=yt={}));var qt;(function(W){W.Invoked=1,W.Automatic=2})(qt||(e.CodeActionTriggerKind=qt={}));var dr;(function(W){function ge(te,O,Re){var ze={diagnostics:te};return O!=null&&(ze.only=O),Re!=null&&(ze.triggerKind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.typedArray(O.diagnostics,_.is)&&(O.only===void 0||_e.typedArray(O.only,_e.string))&&(O.triggerKind===void 0||O.triggerKind===qt.Invoked||O.triggerKind===qt.Automatic)}s(ve,"is"),W.is=ve})(dr||(e.CodeActionContext=dr={}));var Ft;(function(W){function ge(te,O,Re){var ze={title:te},Gt=!0;return typeof O=="string"?(Gt=!1,ze.kind=O):k.is(O)?ze.command=O:ze.edit=O,Gt&&Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O&&_e.string(O.title)&&(O.diagnostics===void 0||_e.typedArray(O.diagnostics,_.is))&&(O.kind===void 0||_e.string(O.kind))&&(O.edit!==void 0||O.command!==void 0)&&(O.command===void 0||k.is(O.command))&&(O.isPreferred===void 0||_e.boolean(O.isPreferred))&&(O.edit===void 0||ce.is(O.edit))}s(ve,"is"),W.is=ve})(Ft||(e.CodeAction=Ft={}));var Yr;(function(W){function ge(te,O){var Re={range:te};return _e.defined(O)&&(Re.data=O),Re}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.command)||k.is(O.command))}s(ve,"is"),W.is=ve})(Yr||(e.CodeLens=Yr={}));var en;(function(W){function ge(te,O){return{tabSize:te,insertSpaces:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&_e.uinteger(O.tabSize)&&_e.boolean(O.insertSpaces)}s(ve,"is"),W.is=ve})(en||(e.FormattingOptions=en={}));var yn;(function(W){function ge(te,O,Re){return{range:te,target:O,data:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(O.range)&&(_e.undefined(O.target)||_e.string(O.target))}s(ve,"is"),W.is=ve})(yn||(e.DocumentLink=yn={}));var Ae;(function(W){function ge(te,O){return{range:te,parent:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&c.is(O.range)&&(O.parent===void 0||W.is(O.parent))}s(ve,"is"),W.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ft;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(ft||(e.SemanticTokenModifiers=ft={}));var Et;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&(te.resultId===void 0||typeof te.resultId=="string")&&Array.isArray(te.data)&&(te.data.length===0||typeof te.data[0]=="number")}s(ge,"is"),W.is=ge})(Et||(e.SemanticTokens=Et={}));var Zt;(function(W){function ge(te,O){return{range:te,text:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&_e.string(O.text)}s(ve,"is"),W.is=ve})(Zt||(e.InlineValueText=Zt={}));var Vt;(function(W){function ge(te,O,Re){return{range:te,variableName:O,caseSensitiveLookup:Re}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&_e.boolean(O.caseSensitiveLookup)&&(_e.string(O.variableName)||O.variableName===void 0)}s(ve,"is"),W.is=ve})(Vt||(e.InlineValueVariableLookup=Vt={}));var vr;(function(W){function ge(te,O){return{range:te,expression:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return O!=null&&c.is(O.range)&&(_e.string(O.expression)||O.expression===void 0)}s(ve,"is"),W.is=ve})(vr||(e.InlineValueEvaluatableExpression=vr={}));var Ir;(function(W){function ge(te,O){return{frameId:te,stoppedLocation:O}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.defined(O)&&c.is(te.stoppedLocation)}s(ve,"is"),W.is=ve})(Ir||(e.InlineValueContext=Ir={}));var zt;(function(W){W.Type=1,W.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),W.is=ge})(zt||(e.InlayHintKind=zt={}));var ir;(function(W){function ge(te){return{value:te}}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.location===void 0||l.is(O.location))&&(O.command===void 0||k.is(O.command))}s(ve,"is"),W.is=ve})(ir||(e.InlayHintLabelPart=ir={}));var Xt;(function(W){function ge(te,O,Re){var ze={position:te,label:O};return Re!==void 0&&(ze.kind=Re),ze}s(ge,"create"),W.create=ge;function ve(te){var O=te;return _e.objectLiteral(O)&&a.is(O.position)&&(_e.string(O.label)||_e.typedArray(O.label,ir.is))&&(O.kind===void 0||zt.is(O.kind))&&O.textEdits===void 0||_e.typedArray(O.textEdits,P.is)&&(O.tooltip===void 0||_e.string(O.tooltip)||he.is(O.tooltip))&&(O.paddingLeft===void 0||_e.boolean(O.paddingLeft))&&(O.paddingRight===void 0||_e.boolean(O.paddingRight))}s(ve,"is"),W.is=ve})(Xt||(e.InlayHint=Xt={}));var Sr;(function(W){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),W.createSnippet=ge})(Sr||(e.StringValue=Sr={}));var qr;(function(W){function ge(ve,te,O,Re){return{insertText:ve,filterText:te,range:O,command:Re}}s(ge,"create"),W.create=ge})(qr||(e.InlineCompletionItem=qr={}));var tn;(function(W){function ge(ve){return{items:ve}}s(ge,"create"),W.create=ge})(tn||(e.InlineCompletionList=tn={}));var zn;(function(W){W.Invoked=0,W.Automatic=1})(zn||(e.InlineCompletionTriggerKind=zn={}));var ai;(function(W){function ge(ve,te){return{range:ve,text:te}}s(ge,"create"),W.create=ge})(ai||(e.SelectedCompletionInfo=ai={}));var Hn;(function(W){function ge(ve,te){return{triggerKind:ve,selectedCompletionInfo:te}}s(ge,"create"),W.create=ge})(Hn||(e.InlineCompletionContext=Hn={}));var ri;(function(W){function ge(ve){var te=ve;return _e.objectLiteral(te)&&n.is(te.uri)&&_e.string(te.name)}s(ge,"is"),W.is=ge})(ri||(e.WorkspaceFolder=ri={})),e.EOL=[`
`,`\r
`,"\r"];var ln;(function(W){function ge(Re,ze,Gt,Pr){return new ni(Re,ze,Gt,Pr)}s(ge,"create"),W.create=ge;function ve(Re){var ze=Re;return!!(_e.defined(ze)&&_e.string(ze.uri)&&(_e.undefined(ze.languageId)||_e.string(ze.languageId))&&_e.uinteger(ze.lineCount)&&_e.func(ze.getText)&&_e.func(ze.positionAt)&&_e.func(ze.offsetAt))}s(ve,"is"),W.is=ve;function te(Re,ze){for(var Gt=Re.getText(),Pr=O(ze,function(Wn,ga){var mh=Wn.range.start.line-ga.range.start.line;return mh===0?Wn.range.start.character-ga.range.start.character:mh}),Ar=Gt.length,gn=Pr.length-1;gn>=0;gn--){var Cn=Pr[gn],Tr=Re.offsetAt(Cn.range.start),$t=Re.offsetAt(Cn.range.end);if($t<=Ar)Gt=Gt.substring(0,Tr)+Cn.newText+Gt.substring($t,Gt.length);else throw new Error("Overlapping edit");Ar=Tr}return Gt}s(te,"applyEdits"),W.applyEdits=te;function O(Re,ze){if(Re.length<=1)return Re;var Gt=Re.length/2|0,Pr=Re.slice(0,Gt),Ar=Re.slice(Gt);O(Pr,ze),O(Ar,ze);for(var gn=0,Cn=0,Tr=0;gn<Pr.length&&Cn<Ar.length;){var $t=ze(Pr[gn],Ar[Cn]);$t<=0?Re[Tr++]=Pr[gn++]:Re[Tr++]=Ar[Cn++]}for(;gn<Pr.length;)Re[Tr++]=Pr[gn++];for(;Cn<Ar.length;)Re[Tr++]=Ar[Cn++];return Re}s(O,"mergeSort")})(ln||(e.TextDocument=ln={}));var ni=function(){function W(ge,ve,te,O){this._uri=ge,this._languageId=ve,this._version=te,this._content=O,this._lineOffsets=void 0}return s(W,"FullTextDocument"),Object.defineProperty(W.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),W.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),te=this.offsetAt(ge.end);return this._content.substring(ve,te)}return this._content},W.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,te=!0,O=0;O<ve.length;O++){te&&(ge.push(O),te=!1);var Re=ve.charAt(O);te=Re==="\r"||Re===`
`,Re==="\r"&&O+1<ve.length&&ve.charAt(O+1)===`
`&&O++}te&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},W.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),te=0,O=ve.length;if(O===0)return a.create(0,ge);for(;te<O;){var Re=Math.floor((te+O)/2);ve[Re]>ge?O=Re:te=Re+1}var ze=te-1;return a.create(ze,ge-ve[ze])},W.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var te=ve[ge.line],O=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(te+ge.character,O),te)},Object.defineProperty(W.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),W}(),_e;(function(W){var ge=Object.prototype.toString;function ve($t){return typeof $t<"u"}s(ve,"defined"),W.defined=ve;function te($t){return typeof $t>"u"}s(te,"undefined"),W.undefined=te;function O($t){return $t===!0||$t===!1}s(O,"boolean"),W.boolean=O;function Re($t){return ge.call($t)==="[object String]"}s(Re,"string"),W.string=Re;function ze($t){return ge.call($t)==="[object Number]"}s(ze,"number"),W.number=ze;function Gt($t,Wn,ga){return ge.call($t)==="[object Number]"&&Wn<=$t&&$t<=ga}s(Gt,"numberRange"),W.numberRange=Gt;function Pr($t){return ge.call($t)==="[object Number]"&&-2147483648<=$t&&$t<=2147483647}s(Pr,"integer"),W.integer=Pr;function Ar($t){return ge.call($t)==="[object Number]"&&0<=$t&&$t<=2147483647}s(Ar,"uinteger"),W.uinteger=Ar;function gn($t){return ge.call($t)==="[object Function]"}s(gn,"func"),W.func=gn;function Cn($t){return $t!==null&&typeof $t=="object"}s(Cn,"objectLiteral"),W.objectLiteral=Cn;function Tr($t,Wn){return Array.isArray($t)&&$t.every(Wn)}s(Tr,"typedArray"),W.typedArray=Tr})(_e||(_e={}))})});var ca=U(gf=>{"use strict";d();Object.defineProperty(gf,"__esModule",{value:!0});gf.ProtocolNotificationType=gf.ProtocolNotificationType0=gf.ProtocolRequestType=gf.ProtocolRequestType0=gf.RegistrationType=gf.MessageDirection=void 0;var w4=k_(),lPe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(lPe||(gf.MessageDirection=lPe={}));var due=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};gf.RegistrationType=due;var fue=class extends w4.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};gf.ProtocolRequestType0=fue;var pue=class extends w4.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,w4.ParameterStructures.byName)}};gf.ProtocolRequestType=pue;var mue=class extends w4.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};gf.ProtocolNotificationType0=mue;var hue=class extends w4.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,w4.ParameterStructures.byName)}};gf.ProtocolNotificationType=hue});var wW=U(Ic=>{"use strict";d();Object.defineProperty(Ic,"__esModule",{value:!0});Ic.objectLiteral=Ic.typedArray=Ic.stringArray=Ic.array=Ic.func=Ic.error=Ic.number=Ic.string=Ic.boolean=void 0;function Rbt(t){return t===!0||t===!1}s(Rbt,"boolean");Ic.boolean=Rbt;function uPe(t){return typeof t=="string"||t instanceof String}s(uPe,"string");Ic.string=uPe;function kbt(t){return typeof t=="number"||t instanceof Number}s(kbt,"number");Ic.number=kbt;function Pbt(t){return t instanceof Error}s(Pbt,"error");Ic.error=Pbt;function Bbt(t){return typeof t=="function"}s(Bbt,"func");Ic.func=Bbt;function dPe(t){return Array.isArray(t)}s(dPe,"array");Ic.array=dPe;function Dbt(t){return dPe(t)&&t.every(e=>uPe(e))}s(Dbt,"stringArray");Ic.stringArray=Dbt;function Nbt(t,e){return Array.isArray(t)&&t.every(e)}s(Nbt,"typedArray");Ic.typedArray=Nbt;function Lbt(t){return t!==null&&typeof t=="object"}s(Lbt,"objectLiteral");Ic.objectLiteral=Lbt});var mPe=U(_W=>{"use strict";d();Object.defineProperty(_W,"__esModule",{value:!0});_W.ImplementationRequest=void 0;var fPe=ca(),pPe;(function(t){t.method="textDocument/implementation",t.messageDirection=fPe.MessageDirection.clientToServer,t.type=new fPe.ProtocolRequestType(t.method)})(pPe||(_W.ImplementationRequest=pPe={}))});var APe=U(SW=>{"use strict";d();Object.defineProperty(SW,"__esModule",{value:!0});SW.TypeDefinitionRequest=void 0;var hPe=ca(),gPe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=hPe.MessageDirection.clientToServer,t.type=new hPe.ProtocolRequestType(t.method)})(gPe||(SW.TypeDefinitionRequest=gPe={}))});var EPe=U(_4=>{"use strict";d();Object.defineProperty(_4,"__esModule",{value:!0});_4.DidChangeWorkspaceFoldersNotification=_4.WorkspaceFoldersRequest=void 0;var RW=ca(),yPe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=RW.MessageDirection.serverToClient,t.type=new RW.ProtocolRequestType0(t.method)})(yPe||(_4.WorkspaceFoldersRequest=yPe={}));var CPe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=RW.MessageDirection.clientToServer,t.type=new RW.ProtocolNotificationType(t.method)})(CPe||(_4.DidChangeWorkspaceFoldersNotification=CPe={}))});var bPe=U(kW=>{"use strict";d();Object.defineProperty(kW,"__esModule",{value:!0});kW.ConfigurationRequest=void 0;var vPe=ca(),xPe;(function(t){t.method="workspace/configuration",t.messageDirection=vPe.MessageDirection.serverToClient,t.type=new vPe.ProtocolRequestType(t.method)})(xPe||(kW.ConfigurationRequest=xPe={}))});var wPe=U(S4=>{"use strict";d();Object.defineProperty(S4,"__esModule",{value:!0});S4.ColorPresentationRequest=S4.DocumentColorRequest=void 0;var PW=ca(),IPe;(function(t){t.method="textDocument/documentColor",t.messageDirection=PW.MessageDirection.clientToServer,t.type=new PW.ProtocolRequestType(t.method)})(IPe||(S4.DocumentColorRequest=IPe={}));var TPe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=PW.MessageDirection.clientToServer,t.type=new PW.ProtocolRequestType(t.method)})(TPe||(S4.ColorPresentationRequest=TPe={}))});var RPe=U(R4=>{"use strict";d();Object.defineProperty(R4,"__esModule",{value:!0});R4.FoldingRangeRefreshRequest=R4.FoldingRangeRequest=void 0;var BW=ca(),_Pe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=BW.MessageDirection.clientToServer,t.type=new BW.ProtocolRequestType(t.method)})(_Pe||(R4.FoldingRangeRequest=_Pe={}));var SPe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=BW.MessageDirection.serverToClient,t.type=new BW.ProtocolRequestType0(t.method)})(SPe||(R4.FoldingRangeRefreshRequest=SPe={}))});var BPe=U(DW=>{"use strict";d();Object.defineProperty(DW,"__esModule",{value:!0});DW.DeclarationRequest=void 0;var kPe=ca(),PPe;(function(t){t.method="textDocument/declaration",t.messageDirection=kPe.MessageDirection.clientToServer,t.type=new kPe.ProtocolRequestType(t.method)})(PPe||(DW.DeclarationRequest=PPe={}))});var LPe=U(NW=>{"use strict";d();Object.defineProperty(NW,"__esModule",{value:!0});NW.SelectionRangeRequest=void 0;var DPe=ca(),NPe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=DPe.MessageDirection.clientToServer,t.type=new DPe.ProtocolRequestType(t.method)})(NPe||(NW.SelectionRangeRequest=NPe={}))});var QPe=U(Ab=>{"use strict";d();Object.defineProperty(Ab,"__esModule",{value:!0});Ab.WorkDoneProgressCancelNotification=Ab.WorkDoneProgressCreateRequest=Ab.WorkDoneProgress=void 0;var Mbt=k_(),LW=ca(),MPe;(function(t){t.type=new Mbt.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(MPe||(Ab.WorkDoneProgress=MPe={}));var FPe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=LW.MessageDirection.serverToClient,t.type=new LW.ProtocolRequestType(t.method)})(FPe||(Ab.WorkDoneProgressCreateRequest=FPe={}));var OPe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=LW.MessageDirection.clientToServer,t.type=new LW.ProtocolNotificationType(t.method)})(OPe||(Ab.WorkDoneProgressCancelNotification=OPe={}))});var WPe=U(yb=>{"use strict";d();Object.defineProperty(yb,"__esModule",{value:!0});yb.CallHierarchyOutgoingCallsRequest=yb.CallHierarchyIncomingCallsRequest=yb.CallHierarchyPrepareRequest=void 0;var k4=ca(),UPe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=k4.MessageDirection.clientToServer,t.type=new k4.ProtocolRequestType(t.method)})(UPe||(yb.CallHierarchyPrepareRequest=UPe={}));var qPe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=k4.MessageDirection.clientToServer,t.type=new k4.ProtocolRequestType(t.method)})(qPe||(yb.CallHierarchyIncomingCallsRequest=qPe={}));var HPe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=k4.MessageDirection.clientToServer,t.type=new k4.ProtocolRequestType(t.method)})(HPe||(yb.CallHierarchyOutgoingCallsRequest=HPe={}))});var YPe=U(Af=>{"use strict";d();Object.defineProperty(Af,"__esModule",{value:!0});Af.SemanticTokensRefreshRequest=Af.SemanticTokensRangeRequest=Af.SemanticTokensDeltaRequest=Af.SemanticTokensRequest=Af.SemanticTokensRegistrationType=Af.TokenFormat=void 0;var U1=ca(),GPe;(function(t){t.Relative="relative"})(GPe||(Af.TokenFormat=GPe={}));var V6;(function(t){t.method="textDocument/semanticTokens",t.type=new U1.RegistrationType(t.method)})(V6||(Af.SemanticTokensRegistrationType=V6={}));var jPe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=U1.MessageDirection.clientToServer,t.type=new U1.ProtocolRequestType(t.method),t.registrationMethod=V6.method})(jPe||(Af.SemanticTokensRequest=jPe={}));var VPe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=U1.MessageDirection.clientToServer,t.type=new U1.ProtocolRequestType(t.method),t.registrationMethod=V6.method})(VPe||(Af.SemanticTokensDeltaRequest=VPe={}));var $Pe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=U1.MessageDirection.clientToServer,t.type=new U1.ProtocolRequestType(t.method),t.registrationMethod=V6.method})($Pe||(Af.SemanticTokensRangeRequest=$Pe={}));var zPe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=U1.MessageDirection.serverToClient,t.type=new U1.ProtocolRequestType0(t.method)})(zPe||(Af.SemanticTokensRefreshRequest=zPe={}))});var XPe=U(MW=>{"use strict";d();Object.defineProperty(MW,"__esModule",{value:!0});MW.ShowDocumentRequest=void 0;var KPe=ca(),JPe;(function(t){t.method="window/showDocument",t.messageDirection=KPe.MessageDirection.serverToClient,t.type=new KPe.ProtocolRequestType(t.method)})(JPe||(MW.ShowDocumentRequest=JPe={}))});var t3e=U(FW=>{"use strict";d();Object.defineProperty(FW,"__esModule",{value:!0});FW.LinkedEditingRangeRequest=void 0;var ZPe=ca(),e3e;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=ZPe.MessageDirection.clientToServer,t.type=new ZPe.ProtocolRequestType(t.method)})(e3e||(FW.LinkedEditingRangeRequest=e3e={}))});var l3e=U(Hu=>{"use strict";d();Object.defineProperty(Hu,"__esModule",{value:!0});Hu.WillDeleteFilesRequest=Hu.DidDeleteFilesNotification=Hu.DidRenameFilesNotification=Hu.WillRenameFilesRequest=Hu.DidCreateFilesNotification=Hu.WillCreateFilesRequest=Hu.FileOperationPatternKind=void 0;var Jp=ca(),r3e;(function(t){t.file="file",t.folder="folder"})(r3e||(Hu.FileOperationPatternKind=r3e={}));var n3e;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(n3e||(Hu.WillCreateFilesRequest=n3e={}));var i3e;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(i3e||(Hu.DidCreateFilesNotification=i3e={}));var o3e;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(o3e||(Hu.WillRenameFilesRequest=o3e={}));var s3e;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(s3e||(Hu.DidRenameFilesNotification=s3e={}));var a3e;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolNotificationType(t.method)})(a3e||(Hu.DidDeleteFilesNotification=a3e={}));var c3e;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Jp.MessageDirection.clientToServer,t.type=new Jp.ProtocolRequestType(t.method)})(c3e||(Hu.WillDeleteFilesRequest=c3e={}))});var m3e=U(Cb=>{"use strict";d();Object.defineProperty(Cb,"__esModule",{value:!0});Cb.MonikerRequest=Cb.MonikerKind=Cb.UniquenessLevel=void 0;var u3e=ca(),d3e;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(d3e||(Cb.UniquenessLevel=d3e={}));var f3e;(function(t){t.$import="import",t.$export="export",t.local="local"})(f3e||(Cb.MonikerKind=f3e={}));var p3e;(function(t){t.method="textDocument/moniker",t.messageDirection=u3e.MessageDirection.clientToServer,t.type=new u3e.ProtocolRequestType(t.method)})(p3e||(Cb.MonikerRequest=p3e={}))});var y3e=U(Eb=>{"use strict";d();Object.defineProperty(Eb,"__esModule",{value:!0});Eb.TypeHierarchySubtypesRequest=Eb.TypeHierarchySupertypesRequest=Eb.TypeHierarchyPrepareRequest=void 0;var P4=ca(),h3e;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(h3e||(Eb.TypeHierarchyPrepareRequest=h3e={}));var g3e;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(g3e||(Eb.TypeHierarchySupertypesRequest=g3e={}));var A3e;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=P4.MessageDirection.clientToServer,t.type=new P4.ProtocolRequestType(t.method)})(A3e||(Eb.TypeHierarchySubtypesRequest=A3e={}))});var v3e=U(B4=>{"use strict";d();Object.defineProperty(B4,"__esModule",{value:!0});B4.InlineValueRefreshRequest=B4.InlineValueRequest=void 0;var OW=ca(),C3e;(function(t){t.method="textDocument/inlineValue",t.messageDirection=OW.MessageDirection.clientToServer,t.type=new OW.ProtocolRequestType(t.method)})(C3e||(B4.InlineValueRequest=C3e={}));var E3e;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=OW.MessageDirection.serverToClient,t.type=new OW.ProtocolRequestType0(t.method)})(E3e||(B4.InlineValueRefreshRequest=E3e={}))});var T3e=U(vb=>{"use strict";d();Object.defineProperty(vb,"__esModule",{value:!0});vb.InlayHintRefreshRequest=vb.InlayHintResolveRequest=vb.InlayHintRequest=void 0;var D4=ca(),x3e;(function(t){t.method="textDocument/inlayHint",t.messageDirection=D4.MessageDirection.clientToServer,t.type=new D4.ProtocolRequestType(t.method)})(x3e||(vb.InlayHintRequest=x3e={}));var b3e;(function(t){t.method="inlayHint/resolve",t.messageDirection=D4.MessageDirection.clientToServer,t.type=new D4.ProtocolRequestType(t.method)})(b3e||(vb.InlayHintResolveRequest=b3e={}));var I3e;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=D4.MessageDirection.serverToClient,t.type=new D4.ProtocolRequestType0(t.method)})(I3e||(vb.InlayHintRefreshRequest=I3e={}))});var B3e=U(Xp=>{"use strict";d();Object.defineProperty(Xp,"__esModule",{value:!0});Xp.DiagnosticRefreshRequest=Xp.WorkspaceDiagnosticRequest=Xp.DocumentDiagnosticRequest=Xp.DocumentDiagnosticReportKind=Xp.DiagnosticServerCancellationData=void 0;var P3e=k_(),Fbt=wW(),N4=ca(),w3e;(function(t){function e(r){let n=r;return n&&Fbt.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(w3e||(Xp.DiagnosticServerCancellationData=w3e={}));var _3e;(function(t){t.Full="full",t.Unchanged="unchanged"})(_3e||(Xp.DocumentDiagnosticReportKind=_3e={}));var S3e;(function(t){t.method="textDocument/diagnostic",t.messageDirection=N4.MessageDirection.clientToServer,t.type=new N4.ProtocolRequestType(t.method),t.partialResult=new P3e.ProgressType})(S3e||(Xp.DocumentDiagnosticRequest=S3e={}));var R3e;(function(t){t.method="workspace/diagnostic",t.messageDirection=N4.MessageDirection.clientToServer,t.type=new N4.ProtocolRequestType(t.method),t.partialResult=new P3e.ProgressType})(R3e||(Xp.WorkspaceDiagnosticRequest=R3e={}));var k3e;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=N4.MessageDirection.serverToClient,t.type=new N4.ProtocolRequestType0(t.method)})(k3e||(Xp.DiagnosticRefreshRequest=k3e={}))});var Q3e=U(Na=>{"use strict";d();Object.defineProperty(Na,"__esModule",{value:!0});Na.DidCloseNotebookDocumentNotification=Na.DidSaveNotebookDocumentNotification=Na.DidChangeNotebookDocumentNotification=Na.NotebookCellArrayChange=Na.DidOpenNotebookDocumentNotification=Na.NotebookDocumentSyncRegistrationType=Na.NotebookDocument=Na.NotebookCell=Na.ExecutionSummary=Na.NotebookCellKind=void 0;var $6=TW(),Kh=wW(),ry=ca(),gue;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(gue||(Na.NotebookCellKind=gue={}));var Aue;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return Kh.objectLiteral(o)&&$6.uinteger.is(o.executionOrder)&&(o.success===void 0||Kh.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(Aue||(Na.ExecutionSummary=Aue={}));var QW;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return Kh.objectLiteral(a)&&gue.is(a.kind)&&$6.DocumentUri.is(a.document)&&(a.metadata===void 0||Kh.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let c=new Set;return o.document!==a.document&&c.add("document"),o.kind!==a.kind&&c.add("kind"),o.executionSummary!==a.executionSummary&&c.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&c.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Aue.equals(o.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let c=Array.isArray(o),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Kh.objectLiteral(o)&&Kh.objectLiteral(a)){let u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length||(u.sort(),f.sort(),!i(u,f)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(QW||(Na.NotebookCell=QW={}));var D3e;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Kh.objectLiteral(i)&&Kh.string(i.uri)&&$6.integer.is(i.version)&&Kh.typedArray(i.cells,QW.is)}s(r,"is"),t.is=r})(D3e||(Na.NotebookDocument=D3e={}));var L4;(function(t){t.method="notebookDocument/sync",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.RegistrationType(t.method)})(L4||(Na.NotebookDocumentSyncRegistrationType=L4={}));var N3e;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=L4.method})(N3e||(Na.DidOpenNotebookDocumentNotification=N3e={}));var L3e;(function(t){function e(n){let i=n;return Kh.objectLiteral(i)&&$6.uinteger.is(i.start)&&$6.uinteger.is(i.deleteCount)&&(i.cells===void 0||Kh.typedArray(i.cells,QW.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(L3e||(Na.NotebookCellArrayChange=L3e={}));var M3e;(function(t){t.method="notebookDocument/didChange",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=L4.method})(M3e||(Na.DidChangeNotebookDocumentNotification=M3e={}));var F3e;(function(t){t.method="notebookDocument/didSave",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=L4.method})(F3e||(Na.DidSaveNotebookDocumentNotification=F3e={}));var O3e;(function(t){t.method="notebookDocument/didClose",t.messageDirection=ry.MessageDirection.clientToServer,t.type=new ry.ProtocolNotificationType(t.method),t.registrationMethod=L4.method})(O3e||(Na.DidCloseNotebookDocumentNotification=O3e={}))});var H3e=U(UW=>{"use strict";d();Object.defineProperty(UW,"__esModule",{value:!0});UW.InlineCompletionRequest=void 0;var U3e=ca(),q3e;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=U3e.MessageDirection.clientToServer,t.type=new U3e.ProtocolRequestType(t.method)})(q3e||(UW.InlineCompletionRequest=q3e={}))});var tDe=U(Ee=>{"use strict";d();Object.defineProperty(Ee,"__esModule",{value:!0});Ee.WorkspaceSymbolRequest=Ee.CodeActionResolveRequest=Ee.CodeActionRequest=Ee.DocumentSymbolRequest=Ee.DocumentHighlightRequest=Ee.ReferencesRequest=Ee.DefinitionRequest=Ee.SignatureHelpRequest=Ee.SignatureHelpTriggerKind=Ee.HoverRequest=Ee.CompletionResolveRequest=Ee.CompletionRequest=Ee.CompletionTriggerKind=Ee.PublishDiagnosticsNotification=Ee.WatchKind=Ee.RelativePattern=Ee.FileChangeType=Ee.DidChangeWatchedFilesNotification=Ee.WillSaveTextDocumentWaitUntilRequest=Ee.WillSaveTextDocumentNotification=Ee.TextDocumentSaveReason=Ee.DidSaveTextDocumentNotification=Ee.DidCloseTextDocumentNotification=Ee.DidChangeTextDocumentNotification=Ee.TextDocumentContentChangeEvent=Ee.DidOpenTextDocumentNotification=Ee.TextDocumentSyncKind=Ee.TelemetryEventNotification=Ee.LogMessageNotification=Ee.ShowMessageRequest=Ee.ShowMessageNotification=Ee.MessageType=Ee.DidChangeConfigurationNotification=Ee.ExitNotification=Ee.ShutdownRequest=Ee.InitializedNotification=Ee.InitializeErrorCodes=Ee.InitializeRequest=Ee.WorkDoneProgressOptions=Ee.TextDocumentRegistrationOptions=Ee.StaticRegistrationOptions=Ee.PositionEncodingKind=Ee.FailureHandlingKind=Ee.ResourceOperationKind=Ee.UnregistrationRequest=Ee.RegistrationRequest=Ee.DocumentSelector=Ee.NotebookCellTextDocumentFilter=Ee.NotebookDocumentFilter=Ee.TextDocumentFilter=void 0;Ee.MonikerRequest=Ee.MonikerKind=Ee.UniquenessLevel=Ee.WillDeleteFilesRequest=Ee.DidDeleteFilesNotification=Ee.WillRenameFilesRequest=Ee.DidRenameFilesNotification=Ee.WillCreateFilesRequest=Ee.DidCreateFilesNotification=Ee.FileOperationPatternKind=Ee.LinkedEditingRangeRequest=Ee.ShowDocumentRequest=Ee.SemanticTokensRegistrationType=Ee.SemanticTokensRefreshRequest=Ee.SemanticTokensRangeRequest=Ee.SemanticTokensDeltaRequest=Ee.SemanticTokensRequest=Ee.TokenFormat=Ee.CallHierarchyPrepareRequest=Ee.CallHierarchyOutgoingCallsRequest=Ee.CallHierarchyIncomingCallsRequest=Ee.WorkDoneProgressCancelNotification=Ee.WorkDoneProgressCreateRequest=Ee.WorkDoneProgress=Ee.SelectionRangeRequest=Ee.DeclarationRequest=Ee.FoldingRangeRefreshRequest=Ee.FoldingRangeRequest=Ee.ColorPresentationRequest=Ee.DocumentColorRequest=Ee.ConfigurationRequest=Ee.DidChangeWorkspaceFoldersNotification=Ee.WorkspaceFoldersRequest=Ee.TypeDefinitionRequest=Ee.ImplementationRequest=Ee.ApplyWorkspaceEditRequest=Ee.ExecuteCommandRequest=Ee.PrepareRenameRequest=Ee.RenameRequest=Ee.PrepareSupportDefaultBehavior=Ee.DocumentOnTypeFormattingRequest=Ee.DocumentRangesFormattingRequest=Ee.DocumentRangeFormattingRequest=Ee.DocumentFormattingRequest=Ee.DocumentLinkResolveRequest=Ee.DocumentLinkRequest=Ee.CodeLensRefreshRequest=Ee.CodeLensResolveRequest=Ee.CodeLensRequest=Ee.WorkspaceSymbolResolveRequest=void 0;Ee.InlineCompletionRequest=Ee.DidCloseNotebookDocumentNotification=Ee.DidSaveNotebookDocumentNotification=Ee.DidChangeNotebookDocumentNotification=Ee.NotebookCellArrayChange=Ee.DidOpenNotebookDocumentNotification=Ee.NotebookDocumentSyncRegistrationType=Ee.NotebookDocument=Ee.NotebookCell=Ee.ExecutionSummary=Ee.NotebookCellKind=Ee.DiagnosticRefreshRequest=Ee.WorkspaceDiagnosticRequest=Ee.DocumentDiagnosticRequest=Ee.DocumentDiagnosticReportKind=Ee.DiagnosticServerCancellationData=Ee.InlayHintRefreshRequest=Ee.InlayHintResolveRequest=Ee.InlayHintRequest=Ee.InlineValueRefreshRequest=Ee.InlineValueRequest=Ee.TypeHierarchySupertypesRequest=Ee.TypeHierarchySubtypesRequest=Ee.TypeHierarchyPrepareRequest=void 0;var Qt=ca(),W3e=TW(),vl=wW(),Obt=mPe();Object.defineProperty(Ee,"ImplementationRequest",{enumerable:!0,get:s(function(){return Obt.ImplementationRequest},"get")});var Qbt=APe();Object.defineProperty(Ee,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return Qbt.TypeDefinitionRequest},"get")});var JBe=EPe();Object.defineProperty(Ee,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return JBe.WorkspaceFoldersRequest},"get")});Object.defineProperty(Ee,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return JBe.DidChangeWorkspaceFoldersNotification},"get")});var Ubt=bPe();Object.defineProperty(Ee,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Ubt.ConfigurationRequest},"get")});var XBe=wPe();Object.defineProperty(Ee,"DocumentColorRequest",{enumerable:!0,get:s(function(){return XBe.DocumentColorRequest},"get")});Object.defineProperty(Ee,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return XBe.ColorPresentationRequest},"get")});var ZBe=RPe();Object.defineProperty(Ee,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return ZBe.FoldingRangeRequest},"get")});Object.defineProperty(Ee,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return ZBe.FoldingRangeRefreshRequest},"get")});var qbt=BPe();Object.defineProperty(Ee,"DeclarationRequest",{enumerable:!0,get:s(function(){return qbt.DeclarationRequest},"get")});var Hbt=LPe();Object.defineProperty(Ee,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return Hbt.SelectionRangeRequest},"get")});var xue=QPe();Object.defineProperty(Ee,"WorkDoneProgress",{enumerable:!0,get:s(function(){return xue.WorkDoneProgress},"get")});Object.defineProperty(Ee,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return xue.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(Ee,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return xue.WorkDoneProgressCancelNotification},"get")});var bue=WPe();Object.defineProperty(Ee,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return bue.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return bue.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(Ee,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return bue.CallHierarchyPrepareRequest},"get")});var M4=YPe();Object.defineProperty(Ee,"TokenFormat",{enumerable:!0,get:s(function(){return M4.TokenFormat},"get")});Object.defineProperty(Ee,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return M4.SemanticTokensRequest},"get")});Object.defineProperty(Ee,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return M4.SemanticTokensDeltaRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return M4.SemanticTokensRangeRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return M4.SemanticTokensRefreshRequest},"get")});Object.defineProperty(Ee,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return M4.SemanticTokensRegistrationType},"get")});var Wbt=XPe();Object.defineProperty(Ee,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Wbt.ShowDocumentRequest},"get")});var Gbt=t3e();Object.defineProperty(Ee,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return Gbt.LinkedEditingRangeRequest},"get")});var P_=l3e();Object.defineProperty(Ee,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return P_.FileOperationPatternKind},"get")});Object.defineProperty(Ee,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return P_.DidCreateFilesNotification},"get")});Object.defineProperty(Ee,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return P_.WillCreateFilesRequest},"get")});Object.defineProperty(Ee,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return P_.DidRenameFilesNotification},"get")});Object.defineProperty(Ee,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return P_.WillRenameFilesRequest},"get")});Object.defineProperty(Ee,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return P_.DidDeleteFilesNotification},"get")});Object.defineProperty(Ee,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return P_.WillDeleteFilesRequest},"get")});var Iue=m3e();Object.defineProperty(Ee,"UniquenessLevel",{enumerable:!0,get:s(function(){return Iue.UniquenessLevel},"get")});Object.defineProperty(Ee,"MonikerKind",{enumerable:!0,get:s(function(){return Iue.MonikerKind},"get")});Object.defineProperty(Ee,"MonikerRequest",{enumerable:!0,get:s(function(){return Iue.MonikerRequest},"get")});var Tue=y3e();Object.defineProperty(Ee,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Tue.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Tue.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(Ee,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Tue.TypeHierarchySupertypesRequest},"get")});var eDe=v3e();Object.defineProperty(Ee,"InlineValueRequest",{enumerable:!0,get:s(function(){return eDe.InlineValueRequest},"get")});Object.defineProperty(Ee,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return eDe.InlineValueRefreshRequest},"get")});var wue=T3e();Object.defineProperty(Ee,"InlayHintRequest",{enumerable:!0,get:s(function(){return wue.InlayHintRequest},"get")});Object.defineProperty(Ee,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return wue.InlayHintResolveRequest},"get")});Object.defineProperty(Ee,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return wue.InlayHintRefreshRequest},"get")});var z6=B3e();Object.defineProperty(Ee,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return z6.DiagnosticServerCancellationData},"get")});Object.defineProperty(Ee,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return z6.DocumentDiagnosticReportKind},"get")});Object.defineProperty(Ee,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return z6.DocumentDiagnosticRequest},"get")});Object.defineProperty(Ee,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return z6.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(Ee,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return z6.DiagnosticRefreshRequest},"get")});var ny=Q3e();Object.defineProperty(Ee,"NotebookCellKind",{enumerable:!0,get:s(function(){return ny.NotebookCellKind},"get")});Object.defineProperty(Ee,"ExecutionSummary",{enumerable:!0,get:s(function(){return ny.ExecutionSummary},"get")});Object.defineProperty(Ee,"NotebookCell",{enumerable:!0,get:s(function(){return ny.NotebookCell},"get")});Object.defineProperty(Ee,"NotebookDocument",{enumerable:!0,get:s(function(){return ny.NotebookDocument},"get")});Object.defineProperty(Ee,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return ny.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(Ee,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return ny.NotebookCellArrayChange},"get")});Object.defineProperty(Ee,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(Ee,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ny.DidCloseNotebookDocumentNotification},"get")});var jbt=H3e();Object.defineProperty(Ee,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return jbt.InlineCompletionRequest},"get")});var yue;(function(t){function e(r){let n=r;return vl.string(n)||vl.string(n.language)||vl.string(n.scheme)||vl.string(n.pattern)}s(e,"is"),t.is=e})(yue||(Ee.TextDocumentFilter=yue={}));var Cue;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(vl.string(n.notebookType)||vl.string(n.scheme)||vl.string(n.pattern))}s(e,"is"),t.is=e})(Cue||(Ee.NotebookDocumentFilter=Cue={}));var Eue;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(vl.string(n.notebook)||Cue.is(n.notebook))&&(n.language===void 0||vl.string(n.language))}s(e,"is"),t.is=e})(Eue||(Ee.NotebookCellTextDocumentFilter=Eue={}));var vue;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!vl.string(n)&&!yue.is(n)&&!Eue.is(n))return!1;return!0}s(e,"is"),t.is=e})(vue||(Ee.DocumentSelector=vue={}));var G3e;(function(t){t.method="client/registerCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(G3e||(Ee.RegistrationRequest=G3e={}));var j3e;(function(t){t.method="client/unregisterCapability",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(j3e||(Ee.UnregistrationRequest=j3e={}));var V3e;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(V3e||(Ee.ResourceOperationKind=V3e={}));var $3e;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})($3e||(Ee.FailureHandlingKind=$3e={}));var z3e;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(z3e||(Ee.PositionEncodingKind=z3e={}));var Y3e;(function(t){function e(r){let n=r;return n&&vl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(Y3e||(Ee.StaticRegistrationOptions=Y3e={}));var K3e;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||vue.is(n.documentSelector))}s(e,"is"),t.is=e})(K3e||(Ee.TextDocumentRegistrationOptions=K3e={}));var J3e;(function(t){function e(n){let i=n;return vl.objectLiteral(i)&&(i.workDoneProgress===void 0||vl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&vl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(J3e||(Ee.WorkDoneProgressOptions=J3e={}));var X3e;(function(t){t.method="initialize",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(X3e||(Ee.InitializeRequest=X3e={}));var Z3e;(function(t){t.unknownProtocolVersion=1})(Z3e||(Ee.InitializeErrorCodes=Z3e={}));var eBe;(function(t){t.method="initialized",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(eBe||(Ee.InitializedNotification=eBe={}));var tBe;(function(t){t.method="shutdown",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType0(t.method)})(tBe||(Ee.ShutdownRequest=tBe={}));var rBe;(function(t){t.method="exit",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType0(t.method)})(rBe||(Ee.ExitNotification=rBe={}));var nBe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(nBe||(Ee.DidChangeConfigurationNotification=nBe={}));var iBe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(iBe||(Ee.MessageType=iBe={}));var oBe;(function(t){t.method="window/showMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(oBe||(Ee.ShowMessageNotification=oBe={}));var sBe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType(t.method)})(sBe||(Ee.ShowMessageRequest=sBe={}));var aBe;(function(t){t.method="window/logMessage",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(aBe||(Ee.LogMessageNotification=aBe={}));var cBe;(function(t){t.method="telemetry/event",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(cBe||(Ee.TelemetryEventNotification=cBe={}));var lBe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(lBe||(Ee.TextDocumentSyncKind=lBe={}));var uBe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(uBe||(Ee.DidOpenTextDocumentNotification=uBe={}));var dBe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(dBe||(Ee.TextDocumentContentChangeEvent=dBe={}));var fBe;(function(t){t.method="textDocument/didChange",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(fBe||(Ee.DidChangeTextDocumentNotification=fBe={}));var pBe;(function(t){t.method="textDocument/didClose",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(pBe||(Ee.DidCloseTextDocumentNotification=pBe={}));var mBe;(function(t){t.method="textDocument/didSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(mBe||(Ee.DidSaveTextDocumentNotification=mBe={}));var hBe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(hBe||(Ee.TextDocumentSaveReason=hBe={}));var gBe;(function(t){t.method="textDocument/willSave",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(gBe||(Ee.WillSaveTextDocumentNotification=gBe={}));var ABe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(ABe||(Ee.WillSaveTextDocumentWaitUntilRequest=ABe={}));var yBe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolNotificationType(t.method)})(yBe||(Ee.DidChangeWatchedFilesNotification=yBe={}));var CBe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(CBe||(Ee.FileChangeType=CBe={}));var EBe;(function(t){function e(r){let n=r;return vl.objectLiteral(n)&&(W3e.URI.is(n.baseUri)||W3e.WorkspaceFolder.is(n.baseUri))&&vl.string(n.pattern)}s(e,"is"),t.is=e})(EBe||(Ee.RelativePattern=EBe={}));var vBe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(vBe||(Ee.WatchKind=vBe={}));var xBe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolNotificationType(t.method)})(xBe||(Ee.PublishDiagnosticsNotification=xBe={}));var bBe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(bBe||(Ee.CompletionTriggerKind=bBe={}));var IBe;(function(t){t.method="textDocument/completion",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(IBe||(Ee.CompletionRequest=IBe={}));var TBe;(function(t){t.method="completionItem/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(TBe||(Ee.CompletionResolveRequest=TBe={}));var wBe;(function(t){t.method="textDocument/hover",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(wBe||(Ee.HoverRequest=wBe={}));var _Be;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(_Be||(Ee.SignatureHelpTriggerKind=_Be={}));var SBe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(SBe||(Ee.SignatureHelpRequest=SBe={}));var RBe;(function(t){t.method="textDocument/definition",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(RBe||(Ee.DefinitionRequest=RBe={}));var kBe;(function(t){t.method="textDocument/references",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(kBe||(Ee.ReferencesRequest=kBe={}));var PBe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(PBe||(Ee.DocumentHighlightRequest=PBe={}));var BBe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(BBe||(Ee.DocumentSymbolRequest=BBe={}));var DBe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(DBe||(Ee.CodeActionRequest=DBe={}));var NBe;(function(t){t.method="codeAction/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(NBe||(Ee.CodeActionResolveRequest=NBe={}));var LBe;(function(t){t.method="workspace/symbol",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(LBe||(Ee.WorkspaceSymbolRequest=LBe={}));var MBe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(MBe||(Ee.WorkspaceSymbolResolveRequest=MBe={}));var FBe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(FBe||(Ee.CodeLensRequest=FBe={}));var OBe;(function(t){t.method="codeLens/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(OBe||(Ee.CodeLensResolveRequest=OBe={}));var QBe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType0(t.method)})(QBe||(Ee.CodeLensRefreshRequest=QBe={}));var UBe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(UBe||(Ee.DocumentLinkRequest=UBe={}));var qBe;(function(t){t.method="documentLink/resolve",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(qBe||(Ee.DocumentLinkResolveRequest=qBe={}));var HBe;(function(t){t.method="textDocument/formatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(HBe||(Ee.DocumentFormattingRequest=HBe={}));var WBe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(WBe||(Ee.DocumentRangeFormattingRequest=WBe={}));var GBe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(GBe||(Ee.DocumentRangesFormattingRequest=GBe={}));var jBe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(jBe||(Ee.DocumentOnTypeFormattingRequest=jBe={}));var VBe;(function(t){t.Identifier=1})(VBe||(Ee.PrepareSupportDefaultBehavior=VBe={}));var $Be;(function(t){t.method="textDocument/rename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})($Be||(Ee.RenameRequest=$Be={}));var zBe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(zBe||(Ee.PrepareRenameRequest=zBe={}));var YBe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Qt.MessageDirection.clientToServer,t.type=new Qt.ProtocolRequestType(t.method)})(YBe||(Ee.ExecuteCommandRequest=YBe={}));var KBe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Qt.MessageDirection.serverToClient,t.type=new Qt.ProtocolRequestType("workspace/applyEdit")})(KBe||(Ee.ApplyWorkspaceEditRequest=KBe={}))});var nDe=U(qW=>{"use strict";d();Object.defineProperty(qW,"__esModule",{value:!0});qW.createProtocolConnection=void 0;var rDe=k_();function Vbt(t,e,r,n){return rDe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,rDe.createMessageConnection)(t,e,r,n)}s(Vbt,"createProtocolConnection");qW.createProtocolConnection=Vbt});var oDe=U(yf=>{"use strict";d();var $bt=yf&&yf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HW=yf&&yf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$bt(e,t,r)};Object.defineProperty(yf,"__esModule",{value:!0});yf.LSPErrorCodes=yf.createProtocolConnection=void 0;HW(k_(),yf);HW(TW(),yf);HW(ca(),yf);HW(tDe(),yf);var zbt=nDe();Object.defineProperty(yf,"createProtocolConnection",{enumerable:!0,get:s(function(){return zbt.createProtocolConnection},"get")});var iDe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(iDe||(yf.LSPErrorCodes=iDe={}))});var di=U(iy=>{"use strict";d();var Ybt=iy&&iy.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sDe=iy&&iy.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ybt(e,t,r)};Object.defineProperty(iy,"__esModule",{value:!0});iy.createProtocolConnection=void 0;var Kbt=uue();sDe(uue(),iy);sDe(oDe(),iy);function Jbt(t,e,r,n){return(0,Kbt.createMessageConnection)(t,e,r,n)}s(Jbt,"createProtocolConnection");iy.createProtocolConnection=Jbt});var KDe=U((tG,YDe)=>{d();(function(t,e){typeof tG=="object"&&typeof YDe<"u"?e(tG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(tG,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),pe=r(J,"slice");function Y(w,R){try{return{v:w.apply(this,R)}}catch(B){return{e:B}}}s(Y,"safe");function G(w){return function(R){return typeof R===w}}s(G,"_createIs");function H(w){var R="[object "+w+"]";return function(B){return!!(B&&ce(B)===R)}}s(H,"_createObjIs");function ce(w){return _[x].call(w)}s(ce,"objToString");function ie(w){return typeof w===f||w===f}s(ie,"isUndefined");function V(w){return!z(w)}s(V,"isStrictUndefined");function Q(w){return w===i||ie(w)}s(Q,"isNullOrUndefined");function z(w){return!!w||w!==n}s(z,"isDefined");var re=G("string"),fe=G(a);function ne(w){return!w&&Q(w)?!1:!!w&&typeof w===c}s(ne,"isObject");var me=r(M,"isArray"),he=H("Error"),Qe=r(b,"getOwnPropertyDescriptor");function ke(w,R){return!!w&&_.hasOwnProperty[E](w,R)}s(ke,"objHasOwnProperty");var tt=e(r(b,"hasOwn"),Fe);function Fe(w,R){return ke(w,R)||!!Qe(w,R)}s(Fe,"polyObjHasOwn");function ht(w,R,B){if(w&&ne(w)){for(var F in w)if(tt(w,F)&&R[E](B||w,F,w[F])===-1)break}}s(ht,"objForEachKey");var St={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function xt(w){var R={};if(R[St.c]=!0,R[St.e]=!0,w.l){R.get=function(){return w.l.v};var B=Qe(w.l,"v");B&&B.set&&(R.set=function(F){w.l.v=F})}return ht(w,function(F,se){R[St[F]]=V(se)?R[St[F]]:se}),R}s(xt,"_createProp");var Tt=r(b,"defineProperty");function le(w,R,B){return Tt(w,R,xt(B))}s(le,"objDefine");function Ue(w,R,B,F,se){var be={};return ht(w,function(we,Oe){ye(be,we,R?Oe:we),ye(be,Oe,B?Oe:we)}),F?F(be):be}s(Ue,"_createKeyValueMap");function ye(w,R,B,F){Tt(w,R,{value:B,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var nt=e(k),ee="[object Error]";function oe(w,R){var B=o,F=_[x][E](w);F===ee&&(w={stack:nt(w.stack),message:nt(w.message),name:nt(w.name)});try{B=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),B=(B?B.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||nt(w)}catch(se){B=" - "+oe(se,R)}return F+": "+B}s(oe,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function De(w){throw new TypeError(w)}s(De,"throwTypeError");var xe=r(b,"freeze");function Ye(w){return w}s(Ye,"_doNothing");function st(w){return w[u]||i}s(st,"_getProto");var yt=r(b,"assign"),qt=r(b,"keys"),dr=e(xe,Ye),Ft=e(r(b,"getPrototypeOf"),st);function Yr(w){return Ue(w,1,0,dr)}s(Yr,"createEnum");function en(w){var R={};return ht(w,function(B,F){ye(R,B,F[1]),ye(R,F[0],F[1])}),dr(R)}s(en,"createSimpleMap");function yn(w){return en(w)}s(yn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ft(){var w;return typeof globalThis!==f&&(w=globalThis),!w&&typeof self!==f&&(w=self),!w&&typeof window!==f&&(w=window),!w&&typeof global!==f&&(w=global),w}s(ft,"_getGlobalValue");function Et(){if(!Ge){var w=Y(ft).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(Et,"_getGlobalConfig");var Zt=Vt;function Vt(w,R,B){var F=R?R[w]:i;return function(se){var be=(se?se[w]:i)||F;if(be||B){var we=arguments;return(be||B).apply(se,be?pe[E](we,1):we)}De('"'+nt(w)+'" not defined for '+oe(se))}}s(Vt,"_unwrapFunctionWithPoly");var vr=r(N,"min"),Ir=r(N,"max"),zt=Zt("slice",P),ir=Zt("substring",P),Xt=Vt("substr",P,Sr);function Sr(w,R,B){return Q(w)&&De("Invalid "+oe(w)),B<0?o:(R=R||0,R<0&&(R=Ir(R+w[g],0)),ie(B)?zt(w,R):zt(w,R,R+B))}s(Sr,"polyStrSubstr");function qr(w,R){return ir(w,0,R)}s(qr,"strLeft");var tn="_urid",zn;function ai(){if(!zn){var w=Et();zn=w.gblSym=w.gblSym||{k:{},s:{}}}return zn}s(ai,"_globalSymbolRegistry");function Hn(w){var R={description:nt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Hn,"polyNewSymbol");function ri(w){var R=ai();if(!tt(R.k,w)){var B=Hn(w),F=qt(R.s).length;B[tn]=function(){return F+"_"+B[x]()},R.k[w]=B,R.s[B[tn]()]=nt(w)}return R.k[w]}s(ri,"polySymbolFor");var ln;function ni(){ln=Et()}s(ni,"_initTestHooks");function _e(w){return Tt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var W="window",ge;function ve(w,R){var B;return function(){return!ln&&ni(),(!B||ln.lzy)&&(B=_e(Y(w,R).v)),B.v}}s(ve,"_getGlobalInstFn");function te(w){return!ln&&ni(),(!ge||w===!1||ln.lzy)&&(ge=_e(Y(ft).v||i)),ge.v}s(te,"getGlobal");function O(w,R){var B;if(!ge||R===!1?B=te(R):B=ge.v,B&&B[w])return B[w];if(w===W)try{return window}catch{}return i}s(O,"getInst");var Re=ve(O,["document"]);function ze(){return!!Gt()}s(ze,"hasWindow");var Gt=ve(O,[W]);function Pr(){return!!Ar()}s(Pr,"hasNavigator");var Ar=ve(O,["navigator"]),gn,Cn;function Tr(){return gn=_e(Y(O,[m]).v),gn}s(Tr,"_initSymbol");function $t(w){var R=(ln.lzy?0:gn)||Tr();return R.v?R.v[w]:n}s($t,"_getSymbolKey");function Wn(w,R){!ln&&ni();var B=(ln.lzy?0:gn)||Tr();return B.v?B.v(w):R?i:Hn(w)}s(Wn,"newSymbol");function ga(w){return!ln&&ni(),Cn=(ln.lzy?0:Cn)||_e(Y($t,["for"]).v),(Cn.v||ri)(w)}s(ga,"symbolFor");function mh(w,R,B){return w.apply(R,B)}s(mh,"fnApply");function dl(w,R,B){if(w)for(var F=w[g]>>>0,se=0;se<F&&!(se in w&&R[E](B||w,w[se],se,w)===-1);se++);}s(dl,"arrForEach");var hh=Zt("indexOf",J),Ip=Zt("map",J),Ba=Zt("reduce",J),pA=e(r(b,"create"),Lv);function Lv(w){if(!w)return{};var R=typeof w;R!==c&&R!==a&&De("Prototype must be an Object or function: "+oe(w));function B(){}return s(B,"tempFunc"),B[l]=w,new B}s(Lv,"polyObjCreate");var HN;function gh(w,R){var B=b.setPrototypeOf||function(F,se){var be;!HN&&(HN=_e((be={},be[u]=[],be instanceof Array))),HN.v?F[u]=se:ht(se,function(we,Oe){return F[we]=Oe})};return B(w,R)}s(gh,"objSetPrototypeOf");function Voe(w,R,B){Y(le,[R,y,{v:w,c:!0,e:!1}]),R=gh(R,B);function F(){this[p]=R,Y(le,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[l]=B===i?pA(B):(F[l]=B[l],new F),R}s(Voe,"_createCustomError");function mA(w,R){R&&(w[y]=R)}s(mA,"_setName");function $oe(w,R,B){var F=B||Error,se=F[l][y],be=Error.captureStackTrace;return Voe(w,function(){var we=this,Oe=arguments;try{Y(mA,[F,w]);var Ze=mh(F,we,pe[E](Oe))||we;if(Ze!==we){var gt=Ft(we);gt!==Ft(Ze)&&gh(Ze,gt)}return be&&be(Ze,we[p]),R&&R(Ze,Oe),Ze}finally{Y(mA,[F,se])}},F)}s($oe,"createCustomError");function KC(){return(Date.now||WN)()}s(KC,"utcNow");function WN(){return new Date().getTime()}s(WN,"polyUtcNow");function v5(w){return s(function(B){return Q(B)&&De("strTrim called ["+oe(B)+"]"),B&&B.replace&&(B=B.replace(w,o)),B},"_doTrim")}s(v5,"_createTrimFn");var zoe=v5(/^\s+|(?=\s)\s+$/g),Su=Vt("trim",P,zoe),hA=r(N,"floor"),fw,JC,pw;function gA(w){if(!w||typeof w!==c)return!1;pw||(pw=ze()?Gt():!0);var R=!1;if(w!==pw){JC||(fw=Function[l][x],JC=fw[E](b));try{var B=Ft(w);R=!B,R||(ke(B,p)&&(B=B[p]),R=!!(B&&typeof B===a&&fw[E](B)===JC))}catch{}}return R}s(gA,"isPlainObject");var x5;function mw(){return!ln&&ni(),(!x5||ln.lzy)&&(x5=_e(Y(O,["performance"]).v)),x5.v}s(mw,"getPerformance");var GN=r(N,"round"),Mv=Vt("endsWith",P,Fv);function Fv(w,R,B){re(w)||De("'"+oe(w)+"' is not a string");var F=re(R)?R:nt(R),se=!ie(B)&&B<w[g]?B:w[g];return ir(w,se-F[g],se)===F}s(Fv,"polyStrEndsWith");var jr=Zt("indexOf",P),fd="ref",XC="unref",Ov="hasRef",Yoe="enabled";function AA(w,R,B){var F=!0,se=w?R(i):i,be;function we(){return F=!1,se&&se[XC]&&se[XC](),be}s(we,"_unref");function Oe(){se&&B(se),se=i}s(Oe,"_cancel");function Ze(){return se=R(se),F||we(),be}s(Ze,"_refresh");function gt(sr){!sr&&se&&Oe(),sr&&!se&&Ze()}return s(gt,"_setEnabled"),be={cancel:Oe,refresh:Ze},be[Ov]=function(){return se&&se[Ov]?se[Ov]():F},be[fd]=function(){return F=!0,se&&se[fd]&&se[fd](),be},be[XC]=we,be=Tt(be,Yoe,{get:s(function(){return!!se},"get"),set:gt}),{h:be,dn:s(function(){se=i},"dn")}}s(AA,"_createTimerHandler");function Koe(w,R,B){var F=me(R),se=F?R.length:0,be=(se>0?R[0]:F?n:R)||setTimeout,we=(se>1?R[1]:n)||clearTimeout,Oe=B[0];B[0]=function(){Ze.dn(),mh(Oe,n,pe[E](arguments))};var Ze=AA(w,function(gt){if(gt){if(gt.refresh)return gt.refresh(),gt;mh(we,n,[gt])}return mh(be,n,B)},function(gt){mh(we,n,[gt])});return Ze.h}s(Koe,"_createTimeoutWith");function jN(w,R){return Koe(!0,n,pe[E](arguments))}s(jN,"scheduleTimeout");var hw=Yr,Joe=yn,gw="toLowerCase",gc="length",yA="warnToConsole",Aw="throwInternal",YQ="watch",Xoe="apply",so="push",ZC="splice",CA="logger",VN="cancel",yw="name",pd="unload",KQ="version",JQ="loggingLevelConsole",$N="messageId",e1="message",zN="diagLog",XQ="userAgent",YN="split",Qv="replace",EA="type",ZQ="evtName",b5="traceFlags",KN="getAttribute",I5;function Zoe(w,R){I5||(I5=$oe("AggregationError",function(F,se){se[gc]>1&&(F.errors=se[1])}));var B=w||"One or more errors occurred.";throw dl(R,function(F,se){B+=`
`.concat(se," > ").concat(oe(F))}),new I5(B,R||[])}s(Zoe,"throwAggregationError");var ese="function",eU="object",tse="undefined",Ah="prototype",T5=Object,JN=T5[Ah];(te()||{}).Symbol,(te()||{}).Reflect;var w5="hasOwnProperty",rse=s(function(w){for(var R,B=1,F=arguments.length;B<F;B++){R=arguments[B];for(var se in R)JN[w5].call(R,se)&&(w[se]=R[se])}return w},"__objAssignFnImpl"),_5=yt||rse,S5=s(function(w,R){return S5=T5.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var se in F)F[w5](se)&&(B[se]=F[se])},S5(w,R)},"extendStaticsFn");function vA(w,R){typeof R!==ese&&R!==null&&De("Class extends value "+String(R)+" is not a constructor or null"),S5(w,R);function B(){this.constructor=w}s(B,"__"),w[Ah]=R===null?pA(R):(B[Ah]=R[Ah],new B)}s(vA,"__extendsFn");var R5,t1="constructor",ef="prototype",tf="function",r1="_dynInstFuncs",Uv="_isDynProxy",xA="_dynClass",qv="_dynCls$",XN="_dynInstChk",n1=XN,Hv="_dfOpts",ZN="_unknown_",k5="__proto__",Wv="_dyn"+k5,Cw="__dynProto$Gbl",P5="_dynInstProto",Gv="useBaseInst",jv="setInstFuncs",Ew=Object,i1=Ew.getPrototypeOf,Vv=Ew.getOwnPropertyNames,e8=te(),B5=e8[Cw]||(e8[Cw]={o:(R5={},R5[jv]=!0,R5[Gv]=!0,R5),n:1e3});function $v(w){return w&&(w===Ew[ef]||w===Array[ef])}s($v,"_isObjectOrArrayPrototype");function zv(w){return $v(w)||w===Function[ef]}s(zv,"_isObjectArrayOrFunctionPrototype");function yh(w){var R;if(w){if(i1)return i1(w);var B=w[k5]||w[ef]||(w[t1]?w[t1][ef]:null);R=w[Wv]||B,ke(w,Wv)||(delete w[P5],R=w[Wv]=w[P5]||w[Wv],w[P5]=B)}return R}s(yh,"_getObjProto");function Tp(w,R){var B=[];if(Vv)B=Vv(w);else for(var F in w)typeof F=="string"&&ke(w,F)&&B.push(F);if(B&&B.length>0)for(var se=0;se<B.length;se++)R(B[se])}s(Tp,"_forEachProp");function Yv(w,R,B){return R!==t1&&typeof w[R]===tf&&(B||ke(w,R))&&R!==k5&&R!==ef}s(Yv,"_isDynamicCandidate");function Kv(w){De("DynamicProto: "+w)}s(Kv,"_throwTypeError");function D5(w){var R=pA(null);return Tp(w,function(B){!R[B]&&Yv(w,B,!1)&&(R[B]=w[B])}),R}s(D5,"_getInstanceFuncs");function t8(w,R){for(var B=w.length-1;B>=0;B--)if(w[B]===R)return!0;return!1}s(t8,"_hasVisited");function r8(w,R,B,F){function se(Ze,gt,sr){var Rn=gt[sr];if(Rn[Uv]&&F){var Yn=Ze[r1]||{};Yn[n1]!==!1&&(Rn=(Yn[gt[xA]]||{})[sr]||Rn)}return function(){return Rn.apply(Ze,arguments)}}s(se,"_instFuncProxy");var be=pA(null);Tp(B,function(Ze){be[Ze]=se(R,B,Ze)});for(var we=yh(w),Oe=[];we&&!zv(we)&&!t8(Oe,we);)Tp(we,function(Ze){!be[Ze]&&Yv(we,Ze,!i1)&&(be[Ze]=se(R,we,Ze))}),Oe.push(we),we=yh(we);return be}s(r8,"_getBaseFuncs");function nse(w,R,B,F){var se=null;if(w&&ke(B,xA)){var be=w[r1]||pA(null);if(se=(be[B[xA]]||pA(null))[R],se||Kv("Missing ["+R+"] "+tf),!se[XN]&&be[n1]!==!1){for(var we=!ke(w,R),Oe=yh(w),Ze=[];we&&Oe&&!zv(Oe)&&!t8(Ze,Oe);){var gt=Oe[R];if(gt){we=gt===F;break}Ze.push(Oe),Oe=yh(Oe)}try{we&&(w[R]=se),se[XN]=1}catch{be[n1]=!1}}}return se}s(nse,"_getInstFunc");function ise(w,R,B){var F=R[w];return F===B&&(F=yh(R)[w]),typeof F!==tf&&Kv("["+w+"] is not a "+tf),F}s(ise,"_getProtoFunc");function ose(w,R,B,F,se){function be(Ze,gt){var sr=s(function(){var Rn=nse(this,gt,Ze,sr)||ise(gt,Ze,sr);return Rn.apply(this,arguments)},"dynProtoProxy");return sr[Uv]=1,sr}if(s(be,"_createDynamicPrototype"),!$v(w)){var we=B[r1]=B[r1]||pA(null);if(!$v(we)){var Oe=we[R]=we[R]||pA(null);we[n1]!==!1&&(we[n1]=!!se),$v(Oe)||Tp(B,function(Ze){Yv(B,Ze,!1)&&B[Ze]!==F[Ze]&&(Oe[Ze]=B[Ze],delete B[Ze],(!ke(w,Ze)||w[Ze]&&!w[Ze][Uv])&&(w[Ze]=be(w,Ze)))})}}}s(ose,"_populatePrototype");function sse(w,R){if(i1){for(var B=[],F=yh(R);F&&!zv(F)&&!t8(B,F);){if(F===w)return!0;B.push(F),F=yh(F)}return!1}return!0}s(sse,"_checkPrototype");function n8(w,R){return ke(w,ef)?w.name||R||ZN:((w||{})[t1]||{}).name||R||ZN}s(n8,"_getObjName");function vw(w,R,B,F){ke(w,ef)||Kv("theClass is an invalid class definition.");var se=w[ef];sse(se,R)||Kv("["+n8(w)+"] not in hierarchy of ["+n8(R)+"]");var be=null;ke(se,xA)?be=se[xA]:(be=qv+n8(w,"_")+"$"+B5.n,B5.n++,se[xA]=be);var we=vw[Hv],Oe=!!we[Gv];Oe&&F&&F[Gv]!==void 0&&(Oe=!!F[Gv]);var Ze=D5(R),gt=r8(se,R,Ze,Oe);B(R,gt);var sr=!!i1&&!!we[jv];sr&&F&&(sr=!!F[jv]),ose(se,be,R,Ze,sr!==!1)}s(vw,"dynamicProto"),vw[Hv]=B5.o;var jl=void 0,Aa="",tU="Not dynamic - ",rU=/-([a-z])/g,xw=/([^\w\d_$])/g,i8=/^(\d+[\w\d_$])/;function o8(w){return!Q(w)}s(o8,"isNotNullOrUndefined");function N5(w){var R=w;return R&&re(R)&&(R=R[Qv](rU,function(B,F){return F.toUpperCase()}),R=R[Qv](xw,"_"),R=R[Qv](i8,function(B,F){return"_"+F})),R}s(N5,"normalizeJsName");function nU(w,R){return w&&R?jr(w,R)!==-1:!1}s(nU,"strContains");function Ch(w){return w&&w.toISOString()||""}s(Ch,"toISOString");function bA(w){return he(w)?w[yw]:Aa}s(bA,"getExceptionName");function bw(w){return function(){function R(){var B=this;w&&ht(w,function(F,se){B[F]=se})}return s(R,"class_1"),R}()}s(bw,"createClassFromInterface");var iU="console",L5="JSON",ase="crypto",IA="msCrypto",Jv="msie",ii="trident/",Xv=null,o1=null,Eh=null;function M5(){return typeof console!==tse?console:O(iU)}s(M5,"getConsole");function ao(){return!!(typeof JSON===eU&&JSON||O(L5)!==null)}s(ao,"hasJSON");function Zv(){return ao()?JSON||O(L5):null}s(Zv,"getJSON");function $a(){return O(ase)}s($a,"getCrypto");function ex(){return O(IA)}s(ex,"getMsCrypto");function Iw(){var w=Ar();if(w&&(w[XQ]!==o1||Xv===null)){o1=w[XQ];var R=(o1||Aa)[gw]();Xv=nU(R,Jv)||nU(R,ii)}return Xv}s(Iw,"isIE");function TA(w){return(Eh===null||w===!1)&&(Eh=Pr()&&!!Ar().sendBeacon),Eh}s(TA,"isBeaconsSupported");function Tw(w,R){if(w)for(var B=0;B<w[gc];B++){var F=w[B];if(F[yw]&&F[yw]===R)return F}return{}}s(Tw,"_getNamedValue");function F5(w){var R=Re();return R&&w?Tw(R.querySelectorAll("meta"),w).content:null}s(F5,"findMetaTag");function wp(w){var R,B=mw();if(B){var F=B.getEntriesByType("navigation")||[];R=Tw((F[gc]>0?F[0]:{}).serverTiming,w).description}return R}s(wp,"findNamedServerTiming");var tx=4294967296,l0=4294967295,rx=123456789,wA=987654321,fl=!1,nx=rx,_p=wA;function oU(w){w<0&&(w>>>=0),nx=rx+w&l0,_p=wA-w&l0,fl=!0}s(oU,"_mwcSeed");function s1(){try{var w=KC()&2147483647;oU((Math.random()*tx^w)+w)}catch{}}s(s1,"_autoSeedMwc");function O5(w){return w>0?hA(ix()/l0*(w+1))>>>0:0}s(O5,"randomValue");function ix(w){var R=0,B=$a()||ex();return B&&B.getRandomValues&&(R=B.getRandomValues(new Uint32Array(1))[0]&l0),R===0&&Iw()&&(fl||s1(),R=sU()&l0),R===0&&(R=hA(tx*Math.random()|0)),w||(R>>>=0),R}s(ix,"random32");function sU(w){_p=36969*(_p&65535)+(_p>>16)&l0,nx=18e3*(nx&65535)+(nx>>16)&l0;var R=(_p<<16)+(nx&65535)>>>0&l0|0;return w||(R>>>=0),R}s(sU,"mwcRandom32");function a1(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=ix()>>>0,F=0,se=Aa;se[gc]<w;)F++,se+=R.charAt(B&63),B>>>=6,F===5&&(B=(ix()<<2&4294967295|B&3)>>>0,F=0);return se}s(a1,"newId");var Sp="3.3.6",Q5="."+a1(6),c1=0;function Rp(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(Rp,"_canAcceptData");function U5(w,R){var B=R[w.id];if(!B){B={};try{Rp(R)&&le(R,w.id,{e:!1,v:B})}catch{}}return B}s(U5,"_getCache");function vh(w,R){return R===void 0&&(R=!1),N5(w+c1+++(R?"."+Sp:Aa)+Q5)}s(vh,"createUniqueNamespace");function kp(w){var R={id:vh("_aiData-"+(w||Aa)+"."+Sp),accept:s(function(B){return Rp(B)},"accept"),get:s(function(B,F,se,be){var we=B[R.id];return we?we[N5(F)]:(be&&(we=U5(R,B),we[N5(F)]=se),se)},"get"),kill:s(function(B,F){if(B&&B[F])try{delete B[F]}catch{}},"kill")};return R}s(kp,"createElmNodeData");function _A(w){return w&&ne(w)&&(w.isVal||w.fb||tt(w,"v")||tt(w,"mrg")||tt(w,"ref")||w.set)}s(_A,"_isConfigDefaults");function q5(w,R,B){var F,se=B.dfVal||z;if(R&&B.fb){var be=B.fb;me(be)||(be=[be]);for(var we=0;we<be[gc];we++){var Oe=be[we],Ze=R[Oe];if(se(Ze)?F=Ze:w&&(Ze=w.cfg[Oe],se(Ze)&&(F=Ze),w.set(w.cfg,nt(Oe),Ze)),se(F))break}}return!se(F)&&se(B.v)&&(F=B.v),F}s(q5,"_getDefault");function SA(w,R,B){var F=B;if(B&&_A(B)&&(F=q5(w,R,B)),F){_A(F)&&(F=SA(w,R,F));var se;me(F)?(se=[],se[gc]=F[gc]):gA(F)&&(se={}),se&&(ht(F,function(be,we){we&&_A(we)&&(we=SA(w,R,we)),se[be]=we}),F=se)}return F}s(SA,"_resolveDefaultValue");function RA(w,R,B,F){var se,be,we,Oe=F,Ze,gt,sr,Rn;_A(Oe)?(se=Oe.isVal,be=Oe.set,sr=Oe.rdOnly,Rn=Oe.blkVal,Ze=Oe.mrg,gt=Oe.ref,!gt&&ie(gt)&&(gt=!!Ze),we=q5(w,R,Oe)):we=F,Rn&&w.blkVal(R,B);var Yn,fr=!0,wr=R[B];(wr||!Q(wr))&&(Yn=wr,fr=!1,se&&Yn!==we&&!se(Yn)&&(Yn=we,fr=!0),be&&(Yn=be(Yn,we,R),fr=Yn===we)),fr?we?Yn=SA(w,R,we):Yn=we:(gA(Yn)||me(we))&&Ze&&we&&(gA(we)||me(we))&&ht(we,function(Gn,kn){RA(w,Yn,Gn,kn)}),w.set(R,B,Yn),gt&&w.ref(R,B),sr&&w.rdOnly(R,B)}s(RA,"_applyDefaultValue");var Vl=ga("[[ai_dynCfg_1]]"),s8=ga("[[ai_blkDynCfg_1]]"),ww=ga("[[ai_frcDynCfg_1]]");function a8(w){if(w){var R;if(me(w)?(R=[],R[gc]=w[gc]):gA(w)&&(R={}),R)return ht(w,function(B,F){R[B]=a8(F)}),R}return w}s(a8,"_cfgDeepCopy");function c8(w){if(w){var R=w[Vl]||w;if(R.cfg&&(R.cfg===w||R.cfg[Vl]===R))return R}return null}s(c8,"getDynamicConfigHandler");function ox(w){if(w&&(gA(w)||me(w)))try{w[s8]=!0}catch{}return w}s(ox,"blockDynamicConversion");function kA(w,R,B){var F=!1;return B&&!w[R.blkVal]&&(F=B[ww],!F&&!B[s8]&&(F=gA(B)||me(B))),F}s(kA,"_canMakeDynamic");function u0(w){De("InvalidAccess:"+w)}s(u0,"throwInvalidAccess");var aU=["push","pop","shift","unshift","splice"],xh=s(function(w,R,B,F){w&&w[Aw](3,108,"".concat(B," [").concat(R,"] failed - ")+oe(F))},"_throwDynamicError");function l8(w,R,B){me(R)&&dl(aU,function(F){var se=R[F];R[F]=function(){for(var be=[],we=0;we<arguments.length;we++)be[we]=arguments[we];var Oe=se[Xoe](this,be);return l1(w,R,B,"Patching"),Oe}})}s(l8,"_patchArray");function bh(w,R){var B=Qe(w,R);return B&&B.get}s(bh,"_getOwnPropGetter");function cU(w,R,B,F){var se={n:B,h:[],trk:s(function(gt){gt&&gt.fn&&(hh(se.h,gt)===-1&&se.h[so](gt),w.trk(gt,se))},"trk"),clr:s(function(gt){var sr=hh(se.h,gt);sr!==-1&&se.h[ZC](sr,1)},"clr")},be=!0,we=!1;function Oe(){be&&(we=we||kA(Oe,w,F),F&&!F[Vl]&&we&&(F=l1(w,F,B,"Converting")),be=!1);var gt=w.act;return gt&&se.trk(gt),F}s(Oe,"_getProperty"),Oe[w.prop]={chng:s(function(){w.add(se)},"chng")};function Ze(gt){if(F!==gt){Oe[w.ro]&&!w.upd&&u0("["+B+"] is read-only:"+oe(R)),be&&(we=we||kA(Oe,w,F),be=!1);var sr=we&&Oe[w.rf];if(we)if(sr){ht(F,function(Yn){F[Yn]=gt?gt[Yn]:jl});try{ht(gt,function(Yn,fr){sx(w,F,Yn,fr)}),gt=F}catch(Yn){xh((w.hdlr||{})[CA],B,"Assigning",Yn),we=!1}}else F&&F[Vl]&&ht(F,function(Yn){var fr=bh(F,Yn);if(fr){var wr=fr[w.prop];wr&&wr.chng()}});if(gt!==F){var Rn=gt&&kA(Oe,w,gt);!sr&&Rn&&(gt=l1(w,gt,B,"Converting")),F=gt,we=Rn}w.add(se)}}s(Ze,"_setProperty"),le(R,se.n,{g:Oe,s:Ze})}s(cU,"_createDynamicProperty");function sx(w,R,B,F){if(R){var se=bh(R,B),be=se&&!!se[w.prop];be?R[B]=F:cU(w,R,B,F)}return R}s(sx,"_setDynamicProperty");function u8(w,R,B,F){if(R){var se=bh(R,B),be=se&&!!se[w.prop],we=F&&F[0],Oe=F&&F[1],Ze=F&&F[2];if(!be){if(Ze)try{ox(R)}catch(gt){xh((w.hdlr||{})[CA],B,"Blocking",gt)}try{sx(w,R,B,R[B]),se=bh(R,B)}catch(gt){xh((w.hdlr||{})[CA],B,"State",gt)}}we&&(se[w.rf]=we),Oe&&(se[w.ro]=Oe),Ze&&(se[w.blkVal]=!0)}return R}s(u8,"_setDynamicPropertyState");function l1(w,R,B,F){try{ht(R,function(se,be){sx(w,R,se,be)}),R[Vl]||(Tt(R,Vl,{get:s(function(){return w.hdlr},"get")}),l8(w,R,B))}catch(se){xh((w.hdlr||{})[CA],B,F,se)}return R}s(l1,"_makeDynamicObject");var u1="[[ai_",rf="]]";function lU(w){var R=Wn(u1+"get"+w.uid+rf),B=Wn(u1+"ro"+w.uid+rf),F=Wn(u1+"rf"+w.uid+rf),se=Wn(u1+"blkVal"+w.uid+rf),be=Wn(u1+"dtl"+w.uid+rf),we=null,Oe=null,Ze;function gt(fr,wr){var Gn=Ze.act;try{Ze.act=fr,fr&&fr[be]&&(dl(fr[be],function(Si){Si.clr(fr)}),fr[be]=[]),wr({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(Si){var kn=w[CA];throw kn&&kn[Aw](1,107,oe(Si)),Si}finally{Ze.act=Gn||null}}s(gt,"_useHandler");function sr(){if(we){var fr=we;we=null,Oe&&Oe[VN](),Oe=null;var wr=[];if(dl(fr,function(Gn){if(Gn&&(Gn[be]&&(dl(Gn[be],function(kn){kn.clr(Gn)}),Gn[be]=null),Gn.fn))try{gt(Gn,Gn.fn)}catch(kn){wr[so](kn)}}),we)try{sr()}catch(Gn){wr[so](Gn)}wr[gc]>0&&Zoe("Watcher error(s): ",wr)}}s(sr,"_notifyWatchers");function Rn(fr){if(fr&&fr.h[gc]>0){we||(we=[]),Oe||(Oe=jN(function(){Oe=null,sr()},0));for(var wr=0;wr<fr.h[gc];wr++){var Gn=fr.h[wr];Gn&&hh(we,Gn)===-1&&we[so](Gn)}}}s(Rn,"_addWatcher");function Yn(fr,wr){if(fr){var Gn=fr[be]=fr[be]||[];hh(Gn,wr)===-1&&Gn[so](wr)}}return s(Yn,"_trackHandler"),Ze={prop:R,ro:B,rf:F,blkVal:se,hdlr:w,add:Rn,notify:sr,use:gt,trk:Yn},Ze}s(lU,"_createState");function cse(w,R){var B={fn:R,rm:s(function(){B.fn=null,w=null,R=null},"rm")};return le(B,"toJSON",{v:s(function(){return"WatcherHandler"+(B.fn?"":"[X]")},"v")}),w.use(B,R),B}s(cse,"_createAndUseHandler");function uU(w,R,B){var F=c8(R);if(F)return F;var se=vh("dyncfg",!0),be=R&&B!==!1?R:a8(R),we;function Oe(){we.notify()}s(Oe,"_notifyWatchers");function Ze(kn,Si,bo){try{kn=sx(we,kn,Si,bo)}catch(ji){xh(w,Si,"Setting value",ji)}return kn[Si]}s(Ze,"_setValue");function gt(kn){return cse(we,kn)}s(gt,"_watch");function sr(kn,Si){we.use(null,function(bo){var ji=we.upd;try{ie(Si)||(we.upd=Si),kn(bo)}finally{we.upd=ji}})}s(sr,"_block");function Rn(kn,Si){var bo;return u8(we,kn,Si,(bo={},bo[0]=!0,bo))[Si]}s(Rn,"_ref");function Yn(kn,Si){var bo;return u8(we,kn,Si,(bo={},bo[1]=!0,bo))[Si]}s(Yn,"_rdOnly");function fr(kn,Si){var bo;return u8(we,kn,Si,(bo={},bo[2]=!0,bo))[Si]}s(fr,"_blkPropValue");function wr(kn,Si){return Si&&ht(Si,function(bo,ji){RA(Gn,kn,bo,ji)}),kn}s(wr,"_applyDefaults");var Gn={uid:null,cfg:be,logger:w,notify:Oe,set:Ze,setDf:wr,watch:gt,ref:Rn,rdOnly:Yn,blkVal:fr,_block:sr};return le(Gn,"uid",{c:!1,e:!1,w:!1,v:se}),we=lU(Gn),l1(we,be,"config","Creating"),Gn}s(uU,"_createDynamicHandler");function dU(w,R){w?(w[yA](R),w[Aw](2,108,R)):u0(R)}s(dU,"_logInvalidAccess");function _w(w,R,B,F){var se=uU(B,w||{},F);return R&&se.setDf(se.cfg,R),se}s(_w,"createDynamicConfig");function fU(w,R,B){var F=w[Vl]||w;return F.cfg&&(F.cfg===w||F.cfg[Vl]===F)?F[YQ](R):(dU(B,tU+oe(w)),_w(w,null,B)[YQ](R))}s(fU,"onConfigChange");var H5=null;function pU(){var w=O("Microsoft");return w&&(H5=w.ApplicationInsights),H5}s(pU,"_getExtensionNamespace");function lse(w){var R=H5;return!R&&w.disableDbgExt!==!0&&(R=H5||pU()),R?R.ChromeDbgExt:null}s(lse,"getDebugExt");var ax,W5="warnToConsole",mU="AI (Internal): ",hU="AI: ",use="AITR_",dse={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},gU=(ax={},ax[0]=null,ax[1]="errorToConsole",ax[2]=W5,ax[3]="debugToConsole",ax);function AU(w){return w?'"'+w[Qv](/\"/g,Aa)+'"':Aa}s(AU,"_sanitizeDiagnosticText");function G5(w,R){var B=M5();if(B){var F="log";B[w]&&(F=w),fe(B[F])&&B[F](R)}}s(G5,"_logToConsole");var j5=function(){function w(R,B,F,se){F===void 0&&(F=!1);var be=this;be[$N]=R,be[e1]=(F?hU:mU)+R;var we=Aa;ao()&&(we=Zv().stringify(se));var Oe=(B?" message:"+AU(B):Aa)+(se?" props:"+AU(we):Aa);be[e1]+=Oe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function fse(w,R){return(w||{})[CA]||new V5(R)}s(fse,"safeGetLogger");var V5=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var B=0,F={},se,be,we,Oe,Ze;vw(w,this,function(gt){Ze=Rn(R||{}),gt.consoleLoggingLevel=function(){return se},gt[Aw]=function(wr,Gn,kn,Si,bo){bo===void 0&&(bo=!1);var ji=new j5(Gn,kn,bo,Si);if(Oe)throw oe(ji);var Ac=gU[wr]||W5;if(ie(ji[e1]))fr("throw"+(wr===1?"Critical":"Warning"),ji);else{if(bo){var Ox=+ji[$N];!F[Ox]&&se>=wr&&(gt[Ac](ji[e1]),F[Ox]=!0)}else se>=wr&&gt[Ac](ji[e1]);sr(wr,ji)}},gt.debugToConsole=function(wr){G5("debug",wr),fr("warning",wr)},gt[yA]=function(wr){G5("warn",wr),fr("warning",wr)},gt.errorToConsole=function(wr){G5("error",wr),fr("error",wr)},gt.resetInternalMessageCount=function(){B=0,F={}},gt.logInternalMessage=sr,gt[pd]=function(wr){Ze&&Ze.rm(),Ze=null};function sr(wr,Gn){if(!Yn()){var kn=!0,Si=use+Gn[$N];if(F[Si]?kn=!1:F[Si]=!0,kn&&(wr<=be&&(gt.queue[so](Gn),B++,fr(wr===1?"error":"warn",Gn)),B===we)){var bo="Internal events throttle limit per PageView reached for this app.",ji=new j5(23,bo,!1);gt.queue[so](ji),wr===1?gt.errorToConsole(bo):gt[yA](bo)}}}s(sr,"_logInternalMessage");function Rn(wr){return fU(_w(wr,dse,gt).cfg,function(Gn){var kn=Gn.cfg;se=kn[JQ],be=kn.loggingLevelTelemetry,we=kn.maxMessageLimit,Oe=kn.enableDebug})}s(Rn,"_setDefaultsFromConfig");function Yn(){return B>=we}s(Yn,"_areInternalMessagesThrottled");function fr(wr,Gn){var kn=lse(R||{});kn&&kn[zN]&&kn[zN](wr,Gn)}s(fr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function $5(w){return w||new V5}s($5,"_getLogger");function md(w,R,B,F,se,be){be===void 0&&(be=!1),$5(w)[Aw](R,B,F,se,be)}s(md,"_throwInternal");function z5(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Aa,B,F=0;F<4;F++)B=ix(),R+=w[B&15]+w[B>>4&15]+w[B>>8&15]+w[B>>12&15]+w[B>>16&15]+w[B>>20&15]+w[B>>24&15]+w[B>>28&15];var se=w[8+(ix()&3)|0];return Xt(R,0,8)+Xt(R,9,4)+"4"+Xt(R,13,3)+se+Xt(R,16,3)+Xt(R,19,12)}s(z5,"generateW3CId");var cx=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,d8="00",nf="ff",_i="00000000000000000000000000000000",Ih="0000000000000000",za=1;function d0(w,R,B){return w&&w[gc]===R&&w!==B?!!w.match(/^[\da-f]*$/i):!1}s(d0,"_isValid");function Y5(w,R,B){return d0(w,R)?w:B}s(Y5,"_formatValue");function d1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[gc]<2;)R="0"+R;return R}s(d1,"_formatFlags");function lx(w,R,B,F){return{version:d0(F,2,nf)?F:d8,traceId:ux(w)?w:z5(),spanId:dx(R)?R:qr(z5(),16),traceFlags:B>=0&&B<=255?B:1}}s(lx,"createTraceParent");function of(w,R){if(!w||(me(w)&&(w=w[0]||""),!w||!re(w)||w[gc]>8192))return null;if(w.indexOf(",")!==-1){var B=w[YN](",");w=B[R>0&&B[gc]>R?R:0]}var F=cx.exec(Su(w));return!F||F[1]===nf||F[2]===_i||F[3]===Ih?null:{version:(F[1]||Aa)[gw](),traceId:(F[2]||Aa)[gw](),spanId:(F[3]||Aa)[gw](),traceFlags:parseInt(F[4],16)}}s(of,"parseTraceParent");function ux(w){return d0(w,32,_i)}s(ux,"isValidTraceId");function dx(w){return d0(w,16,Ih)}s(dx,"isValidSpanId");function fx(w){return!(!w||!d0(w[KQ],2,nf)||!d0(w.traceId,32,_i)||!d0(w.spanId,16,Ih)||!d0(d1(w[b5]),2))}s(fx,"isValidTraceParent");function K5(w){return fx(w)?(w[b5]&za)===za:!1}s(K5,"isSampledFlag");function f1(w){if(w){var R=d1(w[b5]);d0(R,2)||(R="01");var B=w[KQ]||d8;return B!=="00"&&B!=="ff"&&(B=d8),"".concat(B.toLowerCase(),"-").concat(Y5(w.traceId,32,_i).toLowerCase(),"-").concat(Y5(w.spanId,16,Ih).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(f1,"formatTraceParent");function f8(w){var R="traceparent",B=of(F5(R),w);return B||(B=of(wp(R),w)),B}s(f8,"findW3cTraceParent");function p8(w){var R=w.getElementsByTagName("script"),B=[];return dl(R,function(F){var se=F[KN]("src");if(se){var be=F[KN]("crossorigin"),we=F.hasAttribute("async")===!0,Oe=F.hasAttribute("defer")===!0,Ze=F[KN]("referrerpolicy"),gt={url:se};be&&(gt.crossOrigin=be),we&&(gt.async=we),Oe&&(gt.defer=Oe),Ze&&(gt.referrerPolicy=Ze),B[so](gt)}}),B}s(p8,"findAllScripts");var J5="on",Sw="attachEvent",X5="addEventListener",Z5="detachEvent",yU="removeEventListener",m8="events";vh("aiEvtPageHide"),vh("aiEvtPageShow");var pse=/\.[\.]+/g,mse=/[\.]+$/,ek=1,px=kp("events"),pl=/^([^.]*)(?:\.(.+)|)/;function Rw(w){return w&&w[Qv]?w[Qv](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Aa):w}s(Rw,"_normalizeNamespace");function jc(w,R){if(R){var B=Aa;me(R)?(B=Aa,dl(R,function(se){se=Rw(se),se&&(se[0]!=="."&&(se="."+se),B+=se)})):B=Rw(R),B&&(B[0]!=="."&&(B="."+B),w=(w||Aa)+B)}var F=pl.exec(w||Aa)||[];return{type:F[1],ns:(F[2]||Aa).replace(pse,".").replace(mse,Aa)[YN](".").sort().join(".")}}s(jc,"_getEvtNamespace");function PA(w,R,B){B===void 0&&(B=!0);var F=px.get(w,m8,{},B),se=F[R];return se||(se=F[R]=[]),se}s(PA,"_getRegisteredEvents");function CU(w,R,B,F){w&&R&&R[EA]&&(w[yU]?w[yU](R[EA],B,F):w[Z5]&&w[Z5](J5+R[EA],B))}s(CU,"_doDetach");function hse(w,R,B,F){var se=!1;return w&&R&&R[EA]&&B&&(w[X5]?(w[X5](R[EA],B,F),se=!0):w[Sw]&&(w[Sw](J5+R[EA],B),se=!0)),se}s(hse,"_doAttach");function kw(w,R,B,F){for(var se=R[gc];se--;){var be=R[se];be&&(!B.ns||B.ns===be[ZQ].ns)&&(!F||F(be))&&(CU(w,be[ZQ],be.handler,be.capture),R[ZC](se,1))}}s(kw,"_doUnregister");function h8(w,R,B){if(R[EA])kw(w,PA(w,R[EA]),R,B);else{var F=px.get(w,m8,{});ht(F,function(se,be){kw(w,be,R,B)}),qt(F)[gc]===0&&px.kill(w,m8)}}s(h8,"_unregisterEvents");function gse(w,R){var B;return R?(me(R)?B=[w].concat(R):B=[w,R],B=jc("xx",B).ns[YN](".")):B=w,B}s(gse,"mergeEvtNamespace");function g8(w,R,B,F,se){se===void 0&&(se=!1);var be=!1;if(w)try{var we=jc(R,F);if(be=hse(w,we,B,se),be&&px.accept(w)){var Oe={guid:ek++,evtName:we,handler:B,capture:se};PA(w,we.type)[so](Oe)}}catch{}return be}s(g8,"eventOn");function EU(w,R,B,F,se){if(se===void 0&&(se=!1),w)try{var be=jc(R,F),we=!1;h8(w,be,function(Oe){return be.ns&&!B||Oe.handler===B?(we=!0,!0):!1}),we||CU(w,be,B,se)}catch{}}s(EU,"eventOff");var tk="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",vU="sampleRate",rk="ProcessLegacy",xU="http.method",A8="https://dc.services.visualstudio.com",Pw="/v2/track",Pp="not_specified",y8="iKey",bU=Joe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),BA="split",Sn="length",mx="toLowerCase",p1="ingestionendpoint",m1="toString",C8="removeItem",Bw="message",hx="count",nk="preTriggerDate",E8="getUTCDate",ik="stringify",gx="pathname",h1="match",v8="correlationHeaderExcludePatterns",sf="name",Ax="extensionConfig",Bp="properties",Ru="measurements",yx="sizeInBytes",Dw="typeName",Cx="exceptions",Nw="severityLevel",Ex="problemGroup",hd="parsedStack",ok="hasFullStack",sk="assembly",f0="fileName",vx="line",DA="aiDataContract",Lw="duration";function x8(w,R,B){var F=R[Sn],se=b8(w,R);if(se[Sn]!==F){for(var be=0,we=se;B[we]!==void 0;)be++,we=ir(se,0,147)+IU(be);se=we}return se}s(x8,"dataSanitizeKeyAndAddUniqueness");function b8(w,R){var B;return R&&(R=Su(nt(R)),R[Sn]>150&&(B=ir(R,0,150),md(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),B||R}s(b8,"dataSanitizeKey");function Vc(w,R,B){B===void 0&&(B=1024);var F;return R&&(B=B||1024,R=Su(nt(R)),R[Sn]>B&&(F=ir(R,0,B),md(w,2,61,"string value is too long. It has been truncated to "+B+" characters.",{value:R},!0))),F||R}s(Vc,"dataSanitizeString");function Dp(w,R){return T8(w,R,2048,66)}s(Dp,"dataSanitizeUrl");function ak(w,R){var B;return R&&R[Sn]>32768&&(B=ir(R,0,32768),md(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),B||R}s(ak,"dataSanitizeMessage");function I8(w,R){var B;if(R){var F=""+R;F[Sn]>32768&&(B=ir(F,0,32768),md(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return B||R}s(I8,"dataSanitizeException");function Th(w,R){if(R){var B={};ht(R,function(F,se){if(ne(se)&&ao())try{se=Zv()[ik](se)}catch(be){md(w,2,49,"custom property is not valid",{exception:be},!0)}se=Vc(w,se,8192),F=x8(w,F,B),B[F]=se}),R=B}return R}s(Th,"dataSanitizeProperties");function af(w,R){if(R){var B={};ht(R,function(F,se){F=x8(w,F,B),B[F]=se}),R=B}return R}s(af,"dataSanitizeMeasurements");function xx(w,R){return R&&T8(w,R,128,69)[m1]()}s(xx,"dataSanitizeId");function T8(w,R,B,F){var se;return R&&(R=Su(nt(R)),R[Sn]>B&&(se=ir(R,0,B),md(w,2,F,"input is too long, it has been truncated to "+B+" characters.",{data:R},!0))),se||R}s(T8,"dataSanitizeInput");function IU(w){var R="00"+w;return Xt(R,R[Sn]-3)}s(IU,"dsPadNumber");var w8=Re()||{},TU=0,Ase=[null,null,null,null,null];function bx(w){var R=TU,B=Ase,F=B[R];return w8.createElement?B[R]||(F=B[R]=w8.createElement("a")):F={host:_U(w,!0)},F.href=w,R++,R>=B[Sn]&&(R=0),TU=R,F}s(bx,"urlParseUrl");function yse(w){var R,B=bx(w);return B&&(R=B.href),R}s(yse,"urlGetAbsoluteUrl");function Cse(w){var R,B=bx(w);return B&&(R=B[gx]),R}s(Cse,"urlGetPathName");function wU(w,R){return w?w.toUpperCase()+" "+R:R}s(wU,"urlGetCompleteUrl");function _U(w,R){var B=wh(w,R)||"";if(B){var F=B[h1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>3&&re(F[2])&&F[2][Sn]>0)return F[2]+(F[3]||"")}return B}s(_U,"urlParseHost");function wh(w,R){var B=null;if(w){var F=w[h1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[Sn]>2&&re(F[2])&&F[2][Sn]>0&&(B=F[2]||"",R&&F[Sn]>2)){var se=(F[1]||"")[mx](),be=F[3]||"";(se==="http"&&be===":80"||se==="https"&&be===":443")&&(be=""),B+=be}}return B}s(wh,"urlParseFullHost");var SU=[A8+Pw,"https://breeze.aimon.applicationinsights.io"+Pw,"https://dc-int.services.visualstudio.com"+Pw],Ix="cid-v1:";function RU(w){return hh(SU,w[mx]())!==-1}s(RU,"isInternalApplicationInsightsEndpoint");function _8(w){Ix=w}s(_8,"correlationIdSetPrefix");function S8(){return Ix}s(S8,"correlationIdGetPrefix");function NA(w,R,B){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[v8]){for(var F=0;F<w.correlationHeaderExcludePatterns[Sn];F++)if(w[v8][F].test(R))return!1}var se=bx(R).host[mx]();if(se&&(jr(se,":443")!==-1||jr(se,":80")!==-1)&&(se=(wh(R,!0)||"")[mx]()),(!w||!w.enableCorsCorrelation)&&se&&se!==B)return!1;var be=w&&w.correlationHeaderDomains;if(be){var we;if(dl(be,function(gt){var sr=new RegExp(gt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||sr.test(se)}),!we)return!1}var Oe=w&&w.correlationHeaderExcludedDomains;if(!Oe||Oe[Sn]===0)return!0;for(var F=0;F<Oe[Sn];F++){var Ze=new RegExp(Oe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Ze.test(se))return!1}return se&&se[Sn]>0}s(NA,"correlationIdCanIncludeCorrelationHeader");function kU(w){if(w){var R=PU(w,bU[1]);if(R&&R!==Ix)return R}}s(kU,"correlationIdGetCorrelationContext");function PU(w,R){if(w)for(var B=w[BA](","),F=0;F<B[Sn];++F){var se=B[F][BA]("=");if(se[Sn]===2&&se[0]===R)return se[1]}}s(PU,"correlationIdGetCorrelationContextValue");function BU(w,R,B,F){var se,be=F,we=F;if(R&&R[Sn]>0){var Oe=bx(R);if(se=Oe.host,!be)if(Oe[gx]!=null){var Ze=Oe.pathname[Sn]===0?"/":Oe[gx];Ze.charAt(0)!=="/"&&(Ze="/"+Ze),we=Oe[gx],be=Vc(w,B?B+" "+Ze:Ze)}else be=Vc(w,R)}else se=F,be=F;return{target:se,name:be,data:we}}s(BU,"AjaxHelperParseDependencyPath");function Ese(){var w=mw();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return KC()}s(Ese,"dateTimeUtilsNow");function vse(w,R){var B=null;return w!==0&&R!==0&&!Q(w)&&!Q(R)&&(B=R-w),B}s(vse,"dateTimeUtilsDuration");function R8(w,R){var B=w||{};return{getName:s(function(){return B[sf]},"getName"),setName:s(function(F){R&&R.setName(F),B[sf]=F},"setName"),getTraceId:s(function(){return B.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),ux(F)&&(B.traceID=F)},"setTraceId"),getSpanId:s(function(){return B.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),dx(F)&&(B.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return B.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),B.traceFlags=F},"setTraceFlags")}}s(R8,"createDistributedTraceContextFromTrace");var Tx=hw({LocalStorage:0,SessionStorage:1}),xse=hw({AI:0,AI_AND_W3C:1,W3C:2}),Mw=hw({Normal:1,Critical:2}),LA=void 0,p0=void 0,DU="";function wx(){return ck()?_x(Tx.LocalStorage):null}s(wx,"_getLocalStorageObject");function _x(w){try{if(Q(te()))return null;var R=new Date()[m1](),B=O(w===Tx.LocalStorage?"localStorage":"sessionStorage"),F=DU+R;B.setItem(F,R);var se=B.getItem(F)!==R;if(B[C8](F),!se)return B}catch{}return null}s(_x,"_getVerifiedStorageObject");function Sx(){return _h()?_x(Tx.SessionStorage):null}s(Sx,"_getSessionStorageObject");function Fw(){LA=!1,p0=!1}s(Fw,"utlDisableStorage");function Ow(w){DU=w||""}s(Ow,"utlSetStoragePrefix");function bse(){LA=ck(!0),p0=_h(!0)}s(bse,"utlEnableStorage");function ck(w){return(w||LA===void 0)&&(LA=!!_x(Tx.LocalStorage)),LA}s(ck,"utlCanUseLocalStorage");function NU(w,R){var B=wx();if(B!==null)try{return B.getItem(R)}catch(F){LA=!1,md(w,2,1,"Browser failed read of local storage. "+bA(F),{exception:oe(F)})}return null}s(NU,"utlGetLocalStorage");function LU(w,R,B){var F=wx();if(F!==null)try{return F.setItem(R,B),!0}catch(se){LA=!1,md(w,2,3,"Browser failed write to local storage. "+bA(se),{exception:oe(se)})}return!1}s(LU,"utlSetLocalStorage");function cf(w,R){var B=wx();if(B!==null)try{return B[C8](R),!0}catch(F){LA=!1,md(w,2,5,"Browser failed removal of local storage item. "+bA(F),{exception:oe(F)})}return!1}s(cf,"utlRemoveStorage");function _h(w){return(w||p0===void 0)&&(p0=!!_x(Tx.SessionStorage)),p0}s(_h,"utlCanUseSessionStorage");function Rx(){var w=[];return _h()&&ht(O("sessionStorage"),function(R){w.push(R)}),w}s(Rx,"utlGetSessionStorageKeys");function MU(w,R){var B=Sx();if(B!==null)try{return B.getItem(R)}catch(F){p0=!1,md(w,2,2,"Browser failed read of session storage. "+bA(F),{exception:oe(F)})}return null}s(MU,"utlGetSessionStorage");function Ise(w,R,B){var F=Sx();if(F!==null)try{return F.setItem(R,B),!0}catch(se){p0=!1,md(w,2,4,"Browser failed write to session storage. "+bA(se),{exception:oe(se)})}return!1}s(Ise,"utlSetSessionStorage");function FU(w,R){var B=Sx();if(B!==null)try{return B[C8](R),!0}catch(F){p0=!1,md(w,2,6,"Browser failed removal of session storage item. "+bA(F),{exception:oe(F)})}return!1}s(FU,"utlRemoveSessionStorage");var Tse="appInsightsThrottle",wse=function(){function w(R,B){var F=this,se,be,we,Oe,Ze,gt,sr,Rn=!1,Yn=!1;wr(),F._getDbgPlgTargets=function(){return[sr]},F.getConfig=function(){return we},F.canThrottle=function(_t){var Nr=W8(_t),un=Gn(_t);return bo(un,se,Nr)},F.isTriggered=function(_t){return eq(_t)},F.isReady=function(){return Rn},F.flush=function(_t){try{var Nr=tq(_t);if(Nr&&Nr[Sn]>0){var un=Nr.slice(0);return sr[_t]=[],dl(un,function(Zo){fr(Zo.msgID,Zo[Bw],Zo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(sr){var _t=!0;return ht(sr,function(Nr){var un=F.flush(parseInt(Nr));_t=_t&&un}),_t}}catch{}return!1},F.onReadyState=function(_t,Nr){return Nr===void 0&&(Nr=!0),Rn=Q(_t)?!0:_t,Rn&&Nr?F.flushAll():null},F.sendMessage=function(_t,Nr,un){return fr(_t,Nr,un,!0)};function fr(_t,Nr,un,Zo){if(Rn){var yc=Gse(_t);if(!yc)return;var ya=Gn(_t),Cc=W8(_t),A1=bo(ya,se,Cc),UA=!1,Qx=0,rq=eq(_t);try{A1&&!rq?(Qx=vr(ya.limit.maxSendNumber,Cc[hx]+1),Cc[hx]=0,UA=!0,Ze[_t]=!0,Cc[nk]=new Date):(Ze[_t]=A1,Cc[hx]+=1);var nq=ji(_t);H8(be,nq,Cc);for(var xk=0;xk<Qx;xk++)ZU(_t,be,Nr,un)}catch{}return{isThrottled:UA,throttleNum:Qx}}else if(Zo){var jse=tq(_t);jse.push({msgID:_t,message:Nr,severity:un})}return null}s(fr,"_flushMessage");function wr(){be=fse(R),Ze={},Oe={},sr={},we={},kn(109),gt=o8(B)?B:"",R.addUnloadHook(fU(R.config,function(_t){var Nr=_t.cfg;se=ck();var un=Nr.throttleMgrCfg||{};ht(un,function(Zo,yc){kn(parseInt(Zo),yc)})}))}s(wr,"_initConfig");function Gn(_t){return we[_t]||we[109]}s(Gn,"_getCfgByKey");function kn(_t,Nr){var un,Zo;try{var yc=Nr||{},ya={};ya.disabled=!!yc.disabled;var Cc=yc.interval||{};Yn=Cc?.daysOfMonth&&Cc?.daysOfMonth[Sn]>0,ya.interval=Si(Cc);var A1={samplingRate:((un=yc.limit)===null||un===void 0?void 0:un.samplingRate)||100,maxSendNumber:((Zo=yc.limit)===null||Zo===void 0?void 0:Zo.maxSendNumber)||1};ya.limit=A1,we[_t]=ya}catch{}}s(kn,"_setCfgByKey");function Si(_t){_t=_t||{};var Nr=_t?.monthInterval,un=_t?.dayInterval;return Q(Nr)&&Q(un)&&(_t.monthInterval=3,Yn||(_t.daysOfMonth=[28],Yn=!0)),_t={monthInterval:_t?.monthInterval,dayInterval:_t?.dayInterval,daysOfMonth:_t?.daysOfMonth},_t}s(Si,"_getIntervalConfig");function bo(_t,Nr,un){if(_t&&!_t.disabled&&Nr&&o8(un)){var Zo=Vw(),yc=un.date,ya=_t.interval,Cc=1;if(ya?.monthInterval){var A1=(Zo.getUTCFullYear()-yc.getUTCFullYear())*12+Zo.getUTCMonth()-yc.getUTCMonth();Cc=vk(ya.monthInterval,0,A1)}var UA=1;if(Yn)UA=hh(ya.daysOfMonth,Zo[E8]());else if(ya?.dayInterval){var Qx=hA((Zo.getTime()-yc.getTime())/864e5);UA=vk(ya.dayInterval,0,Qx)}return Cc>=0&&UA>=0}return!1}s(bo,"_canThrottle");function ji(_t,Nr){var un=o8(Nr)?Nr:"";return _t?Tse+un+"-"+_t:null}s(ji,"_getLocalStorageName");function Ac(_t){try{if(_t){var Nr=new Date;return _t.getUTCFullYear()===Nr.getUTCFullYear()&&_t.getUTCMonth()===Nr.getUTCMonth()&&_t[E8]()===Nr[E8]()}}catch{}return!1}s(Ac,"_isTriggeredOnCurDate");function Ox(_t,Nr,un){try{var Zo={date:Vw(),count:0};if(_t){var yc=JSON.parse(_t),ya={date:Vw(yc.date)||Zo.date,count:yc[hx]||Zo[hx],preTriggerDate:yc.preTriggerDate?Vw(yc[nk]):void 0};return ya}else return H8(Nr,un,Zo),Zo}catch{}return null}s(Ox,"_getLocalStorageObj");function Vw(_t){try{if(_t){var Nr=new Date(_t);if(!isNaN(Nr.getDate()))return Nr}else return new Date}catch{}return null}s(Vw,"_getThrottleDate");function H8(_t,Nr,un){try{return LU(_t,Nr,Su(JSON[ik](un)))}catch{}return!1}s(H8,"_resetLocalStorage");function vk(_t,Nr,un){return _t<=0?1:un>=Nr&&(un-Nr)%_t==0?hA((un-Nr)/_t)+1:-1}s(vk,"_checkInterval");function ZU(_t,Nr,un,Zo){md(Nr,Zo||1,_t,un)}s(ZU,"_sendMessage");function Gse(_t){try{var Nr=Gn(_t);return O5(1e6)<=Nr.limit.samplingRate}catch{}return!1}s(Gse,"_canSampledIn");function W8(_t){try{var Nr=Oe[_t];if(!Nr){var un=ji(_t,gt);Nr=Ox(NU(be,un),be,un),Oe[_t]=Nr}return Oe[_t]}catch{}return null}s(W8,"_getLocalStorageObjByKey");function eq(_t){var Nr=Ze[_t];if(Q(Nr)){Nr=!1;var un=W8(_t);un&&(Nr=Ac(un[nk])),Ze[_t]=Nr}return Ze[_t]}s(eq,"_isTrigger");function tq(_t){return sr=sr||{},Q(sr[_t])&&(sr[_t]=[]),sr[_t]}s(tq,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),k8=";",Np="=";function lk(w){if(!w)return{};var R=w[BA](k8),B=Ba(R,function(se,be){var we=be[BA](Np);if(we[Sn]===2){var Oe=we[0][mx](),Ze=we[1];se[Oe]=Ze}return se},{});if(qt(B)[Sn]>0){if(B.endpointsuffix){var F=B.location?B.location+".":"";B[p1]=B[p1]||"https://"+F+"dc."+B.endpointsuffix}B[p1]=B[p1]||A8,Mv(B[p1],"/")&&(B[p1]=B[p1].slice(0,-1))}return B}s(lk,"parseConnectionString");var uk={parse:lk},dk=function(){function w(R,B,F){var se=this,be=this;be.ver=1,be.sampleRate=100,be.tags={},be[sf]=Vc(R,F)||Pp,be.data=B,be.time=Ch(new Date),be[DA]={time:1,iKey:1,name:1,sampleRate:s(function(){return se.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),_se=function(){function w(R,B,F,se){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var be=this;be.ver=2,be[sf]=Vc(R,B)||Pp,be[Bp]=Th(R,F),be[Ru]=af(R,se)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),Sse=58,OU=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Rse=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,kx=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,QU=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,kse=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Pse=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Bse=/([^\(\s\n]+):([0-9]+)$/,UU="<no_method>",Px="error",gd="stack",Qw="stackDetails",fk="errorSrc",Uw="message",qw="description",P8=[{re:Rse,len:5,m:1,fn:2,ln:3,col:4},{chk:pk,pre:Rr,re:kx,len:4,m:1,fn:2,ln:3},{re:QU,len:3,m:1,fn:2,hdl:D8},{re:kse,len:2,fn:1,hdl:D8}];function Rr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Rr,"_scrubAnonymous");function pk(w){return jr(w,"[native")<0}s(pk,"_ignoreNative");function Hw(w,R){var B=w;return B&&!re(B)&&(JSON&&JSON[ik]?(B=JSON[ik](w),R&&(!B||B==="{}")&&(fe(w[m1])?B=w[m1]():B=""+w)):B=""+w+" - (Missing JSON.stringify)"),B||""}s(Hw,"_stringify");function MA(w,R){var B=w;return w&&(B&&!re(B)&&(B=w[Uw]||w[qw]||B),B&&!re(B)&&(B=Hw(B,!0)),w.filename&&(B=B+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&jr(B||"",R)===-1&&(B=R+": "+B),B||""}s(MA,"_formatMessage");function qU(w){try{if(ne(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(qU,"_isExceptionDetailsInternal");function HU(w){try{if(ne(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(HU,"_isExceptionInternal");function mk(w){return w&&w.src&&re(w.src)&&w.obj&&me(w.obj)}s(mk,"_isStackDetails");function Sh(w){var R=w||"";re(R)||(re(R[gd])?R=R[gd]:R=""+R);var B=R[BA](`
`);return{src:R,obj:B}}s(Sh,"_convertStackObj");function WU(w){for(var R=[],B=w[BA](`
`),F=0;F<B[Sn];F++){var se=B[F];B[F+1]&&(se+="@"+B[F+1],F++),R.push(se)}return{src:w,obj:R}}s(WU,"_getOperaStack");function hk(w){var R=null;if(w)try{if(w[gd])R=Sh(w[gd]);else if(w[Px]&&w[Px][gd])R=Sh(w[Px][gd]);else if(w.exception&&w.exception[gd])R=Sh(w.exception[gd]);else if(mk(w))R=w;else if(mk(w[Qw]))R=w[Qw];else if(Gt()&&Gt().opera&&w[Uw])R=WU(w[Bw]);else if(w.reason&&w.reason[gd])R=Sh(w.reason[gd]);else if(re(w))R=Sh(w);else{var B=w[Uw]||w[qw]||"";re(w[fk])&&(B&&(B+=`
`),B+=" from "+w[fk]),B&&(R=Sh(B))}}catch(F){R=Sh(F)}return R||{src:"",obj:null}}s(hk,"_getStackFromErrorObj");function GU(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(GU,"_formatStackTrace");function gk(w){var R,B=w.obj;if(B&&B[Sn]>0){R=[];var F=0,se=!1,be=0;dl(B,function(Gn){if(se||Dse(Gn)){var kn=nt(Gn);se=!0;var Si=Nse(kn,F);Si&&(be+=Si[yx],R.push(Si),F++)}});var we=32*1024;if(be>we)for(var Oe=0,Ze=R[Sn]-1,gt=0,sr=Oe,Rn=Ze;Oe<Ze;){var Yn=R[Oe][yx],fr=R[Ze][yx];if(gt+=Yn+fr,gt>we){var wr=Rn-sr+1;R.splice(sr,wr);break}sr=Oe,Rn=Ze,Oe++,Ze--}}return R}s(gk,"_parseStack");function Bx(w){var R="";if(w&&(R=w.typeName||w[sf]||"",!R))try{var B=/function (.{1,200})\(/,F=B.exec(w.constructor[m1]());R=F&&F[Sn]>1?F[1]:""}catch{}return R}s(Bx,"_getErrorType");function Ak(w){if(w)try{if(!re(w)){var R=Bx(w),B=Hw(w,!1);return(!B||B==="{}")&&(w[Px]&&(w=w[Px],R=Bx(w)),B=Hw(w,!0)),jr(B,R)!==0&&R!=="String"?R+":"+B:B}}catch{}return""+(w||"")}s(Ak,"_formatErrorCode");var Lp=function(){function w(R,B,F,se,be,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Oe=this;Oe.ver=2,HU(B)?(Oe[Cx]=B[Cx]||[],Oe[Bp]=B[Bp],Oe[Ru]=B[Ru],B[Nw]&&(Oe[Nw]=B[Nw]),B.id&&(Oe.id=B.id,B[Bp].id=B.id),B[Ex]&&(Oe[Ex]=B[Ex]),Q(B.isManual)||(Oe.isManual=B.isManual)):(F||(F={}),we&&(F.id=we),Oe[Cx]=[$U(R,B,F)],Oe[Bp]=Th(R,F),Oe[Ru]=af(R,se),be&&(Oe[Nw]=be),we&&(Oe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,B,F,se,be,we,Oe,Ze){var gt=Bx(be||we||R);return{message:MA(R,gt),url:B,lineNumber:F,columnNumber:se,error:Ak(be||we||R),evt:Ak(we||R),typeName:gt,stackDetails:hk(Oe||be||we),errorSrc:Ze}},w.CreateFromInterface=function(R,B,F,se){var be=B[Cx]&&Ip(B[Cx],function(Oe){return B8(R,Oe)}),we=new w(R,_5(_5({},B),{exceptions:be}),F,se);return we},w.prototype.toInterface=function(){var R=this,B=R.exceptions,F=R.properties,se=R.measurements,be=R.severityLevel,we=R.problemGroup,Oe=R.id,Ze=R.isManual,gt=B instanceof Array&&Ip(B,function(sr){return sr.toInterface()})||void 0;return{ver:"4.0",exceptions:gt,severityLevel:be,properties:F,measurements:se,problemGroup:we,id:Oe,isManual:Ze}},w.CreateSimpleException=function(R,B,F,se,be,we){var Oe;return{exceptions:[(Oe={},Oe[ok]=!0,Oe.message=R,Oe.stack=be,Oe.typeName=B,Oe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=Ak,w}(),jU=dr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function VU(){var w=this,R=me(w[hd])&&Ip(w[hd],function(F){return YU(F)}),B={id:w.id,outerId:w.outerId,typeName:w[Dw],message:w[Bw],hasFullStack:w[ok],stack:w[gd],parsedStack:R||void 0};return B}s(VU,"_toInterface");function $U(w,R,B){var F,se,be,we,Oe,Ze,gt,sr;if(qU(R))we=R[Dw],Oe=R[Bw],gt=R[gd],sr=R[hd]||[],Ze=R[ok];else{var Rn=R,Yn=Rn&&Rn.evt;he(Rn)||(Rn=Rn[Px]||Yn||Rn),we=Vc(w,Bx(Rn))||Pp,Oe=ak(w,MA(R||Rn,we))||Pp;var fr=R[Qw]||hk(R);sr=gk(fr),me(sr)&&Ip(sr,function(wr){wr[sk]=Vc(w,wr[sk]),wr[f0]=Vc(w,wr[f0])}),gt=I8(w,GU(fr)),Ze=me(sr)&&sr[Sn]>0,B&&(B[Dw]=B[Dw]||we)}return F={},F[DA]=jU,F.id=se,F.outerId=be,F.typeName=we,F.message=Oe,F[ok]=Ze,F.stack=gt,F.parsedStack=sr,F.toInterface=VU,F}s($U,"_createExceptionDetails");function B8(w,R){var B=me(R[hd])&&Ip(R[hd],function(se){return zU(se)})||R[hd],F=$U(w,_5(_5({},R),{parsedStack:B}));return F}s(B8,"_createExDetailsFromInterface");function Ww(w,R){var B=R[h1](Pse);if(B&&B[Sn]>=4)w[f0]=B[1],w[vx]=parseInt(B[2]);else{var F=R[h1](Bse);F&&F[Sn]>=3?(w[f0]=F[1],w[vx]=parseInt(F[2])):w[f0]=R}}s(Ww,"_parseFilename");function D8(w,R,B){var F=w[f0];R.fn&&B&&B[Sn]>R.fn&&(R.ln&&B[Sn]>R.ln?(F=Su(B[R.fn]||""),w[vx]=parseInt(Su(B[R.ln]||""))||0):F=Su(B[R.fn]||"")),F&&Ww(w,F)}s(D8,"_handleFilename");function Dse(w){var R=!1;if(w&&re(w)){var B=Su(w);B&&(R=OU.test(B))}return R}s(Dse,"_isStackFrame");var N8=dr({level:1,method:1,assembly:0,fileName:0,line:0});function Nse(w,R){var B,F;if(w&&re(w)&&Su(w)){F=(B={},B[DA]=N8,B.level=R,B.assembly=Su(w),B.method=UU,B.fileName="",B.line=0,B.sizeInBytes=0,B);for(var se=0;se<P8[Sn];){var be=P8[se];if(be.chk&&!be.chk(w))break;be.pre&&(w=be.pre(w));var we=w[h1](be.re);if(we&&we[Sn]>=be.len){be.m&&(F.method=Su(we[be.m]||UU)),be.hdl?be.hdl(F,be,we):be.fn&&(be.ln?(F[f0]=Su(we[be.fn]||""),F[vx]=parseInt(Su(we[be.ln]||""))||0):Ww(F,we[be.fn]||""));break}se++}}return L8(F)}s(Nse,"_extractStackFrame");function zU(w){var R,B=(R={},R[DA]=N8,R.level=w.level,R.method=w.method,R.assembly=w[sk],R.fileName=w[f0],R.line=w[vx],R.sizeInBytes=0,R);return L8(B)}s(zU,"_stackFrameFromInterface");function L8(w){var R=Sse;return w&&(R+=w.method[Sn],R+=w.assembly[Sn],R+=w.fileName[Sn],R+=w.level.toString()[Sn],R+=w.line.toString()[Sn],w[yx]=R),w}s(L8,"_populateFrameSizeInBytes");function YU(w){return{level:w.level,method:w.method,assembly:w[sk],fileName:w[f0],line:w[vx]}}s(YU,"_parsedFrameToInterface");var KU=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),Lse=function(){function w(R,B,F,se,be,we,Oe,Ze,gt){this.aiDataContract={ver:1,metrics:1,properties:0};var sr=this;sr.ver=2;var Rn=new KU;Rn[hx]=se>0?se:void 0,Rn.max=isNaN(we)||we===null?void 0:we,Rn.min=isNaN(be)||be===null?void 0:be,Rn[sf]=Vc(R,B)||Pp,Rn.value=F,Rn.stdDev=isNaN(Oe)||Oe===null?void 0:Oe,sr.metrics=[Rn],sr[Bp]=Th(R,Ze),sr[Ru]=af(R,gt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),Dx="";function Mse(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[mx]()==="true"}s(Mse,"stringToBoolOrDefault");function M8(w){(isNaN(w)||w<0)&&(w=0),w=GN(w);var R=Dx+w%1e3,B=Dx+hA(w/1e3)%60,F=Dx+hA(w/(1e3*60))%60,se=Dx+hA(w/(1e3*60*60))%24,be=hA(w/(1e3*60*60*24));return R=R[Sn]===1?"00"+R:R[Sn]===2?"0"+R:R,B=B[Sn]<2?"0"+B:B,F=F[Sn]<2?"0"+F:F,se=se[Sn]<2?"0"+se:se,(be>0?be+".":Dx)+se+":"+F+":"+B+"."+R}s(M8,"msToTimeSpan");function Fse(w,R){var B=null;return dl(w,function(F){if(F.identifier===R)return B=F,-1}),B}s(Fse,"getExtensionByName");function FA(w,R,B,F,se){return!se&&re(w)&&(w==="Script error."||w==="Script error")}s(FA,"isCrossOriginError");var Ose=function(){function w(R,B,F,se,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Ze=this;Ze.ver=2,Ze.id=xx(R,Oe),Ze.url=Dp(R,F),Ze[sf]=Vc(R,B)||Pp,isNaN(se)||(Ze[Lw]=M8(se)),Ze[Bp]=Th(R,be),Ze[Ru]=af(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),Nx=function(){function w(R,B,F,se,be,we,Oe,Ze,gt,sr,Rn,Yn){gt===void 0&&(gt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var fr=this;fr.ver=2,fr.id=B,fr[Lw]=M8(be),fr.success=we,fr.resultCode=Oe+"",fr.type=Vc(R,gt);var wr=BU(R,F,Ze,se);fr.data=Dp(R,se)||wr.data,fr.target=Vc(R,wr.target),sr&&(fr.target="".concat(fr.target," | ").concat(sr)),fr[sf]=Vc(R,wr[sf]),fr[Bp]=Th(R,Rn),fr[Ru]=af(R,Yn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),F8=function(){function w(R,B,F,se,be){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,B=B||Pp,we[Bw]=ak(R,B),we[Bp]=Th(R,se),we[Ru]=af(R,be),F&&(we[Nw]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),Gw=function(){function w(R,B,F,se,be,we,Oe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Ze=this;Ze.ver=2,Ze.url=Dp(R,F),Ze[sf]=Vc(R,B)||Pp,Ze[Bp]=Th(R,be),Ze[Ru]=af(R,we),Oe&&(Ze.domProcessing=Oe.domProcessing,Ze[Lw]=Oe[Lw],Ze.networkConnect=Oe.networkConnect,Ze.perfTotal=Oe.perfTotal,Ze.receivedResponse=Oe.receivedResponse,Ze.sentRequest=Oe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),Qse=function(){function w(R,B){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=B}return s(w,"Data"),w}(),yk=hw({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),Use=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,B,F,se){se===void 0&&(se=!1);var be;return F&&R[Ax]&&R[Ax][F]&&!Q(R[Ax][F][B])?be=R[Ax][F][B]:be=R[B],Q(be)?se:be},w}();function Mp(w){var R="ai."+w+".";return function(B){return R+B}}s(Mp,"_aiNameFunc");var Lx=Mp("application"),Ya=Mp("device"),Ck=Mp("location"),Mx=Mp("operation"),Ek=Mp("session"),OA=Mp("user"),g1=Mp("cloud"),jw=Mp("internal"),QA=function(w){vA(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(bw({applicationVersion:Lx("ver"),applicationBuild:Lx("build"),applicationTypeId:Lx("typeId"),applicationId:Lx("applicationId"),applicationLayer:Lx("layer"),deviceId:Ya("id"),deviceIp:Ya("ip"),deviceLanguage:Ya("language"),deviceLocale:Ya("locale"),deviceModel:Ya("model"),deviceFriendlyName:Ya("friendlyName"),deviceNetwork:Ya("network"),deviceNetworkName:Ya("networkName"),deviceOEMName:Ya("oemName"),deviceOS:Ya("os"),deviceOSVersion:Ya("osVersion"),deviceRoleInstance:Ya("roleInstance"),deviceRoleName:Ya("roleName"),deviceScreenResolution:Ya("screenResolution"),deviceType:Ya("type"),deviceMachineName:Ya("machineName"),deviceVMName:Ya("vmName"),deviceBrowser:Ya("browser"),deviceBrowserVersion:Ya("browserVersion"),locationIp:Ck("ip"),locationCountry:Ck("country"),locationProvince:Ck("province"),locationCity:Ck("city"),operationId:Mx("id"),operationName:Mx("name"),operationParentId:Mx("parentId"),operationRootId:Mx("rootId"),operationSyntheticSource:Mx("syntheticSource"),operationCorrelationVector:Mx("correlationVector"),sessionId:Ek("id"),sessionIsFirst:Ek("isFirst"),sessionIsNew:Ek("isNew"),userAccountAcquisitionDate:OA("accountAcquisitionDate"),userAccountId:OA("accountId"),userAgent:OA("userAgent"),userId:OA("id"),userStoreRegion:OA("storeRegion"),userAuthUserId:OA("authUserId"),userAnonymousUserAcquisitionDate:OA("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:OA("authUserAcquisitionDate"),cloudName:g1("name"),cloudRole:g1("role"),cloudRoleVer:g1("roleVer"),cloudRoleInstance:g1("roleInstance"),cloudEnvironment:g1("environment"),cloudLocation:g1("location"),cloudDeploymentUnit:g1("deploymentUnit"),internalNodeName:jw("nodeName"),internalSdkVersion:jw("sdkVersion"),internalAgentVersion:jw("agentVersion"),internalSnippet:jw("snippet"),internalSdkSrc:jw("sdkSrc")}));function O8(w,R,B,F,se,be){B=Vc(F,B)||Pp,(Q(w)||Q(R)||Q(B))&&We("Input doesn't contain all required fields");var we="";w[y8]&&(we=w[y8],delete w[y8]);var Oe={name:B,time:Ch(new Date),iKey:we,ext:be||{},tags:[],data:{},baseType:R,baseData:w};return Q(se)||ht(se,function(Ze,gt){Oe.data[Ze]=gt}),Oe}s(O8,"createTelemetryItem");var Q8=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=O8,w}(),qse={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Hse=new QA;function JU(w){var R=null;if(fe(Event))R=new Event(w);else{var B=Re();B&&B.createEvent&&(R=B.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(JU,"createDomEvent");function U8(w,R){EU(w,null,null,R)}s(U8,"_disableEvents");function XU(w){var R=Re(),B=Ar(),F=!1,se=[],be=1;B&&!Q(B.onLine)&&!B.onLine&&(be=2);var we=0,Oe=Yn(),Ze=gse(vh("OfflineListener"),w);try{if(sr(Gt())&&(F=!0),R){var gt=R.body||R;gt.ononline&&sr(gt)&&(F=!0)}}catch{F=!1}function sr(ji){var Ac=!1;return ji&&(Ac=g8(ji,"online",Gn,Ze),Ac&&g8(ji,"offline",kn,Ze)),Ac}s(sr,"_enableEvents");function Rn(){return Oe}s(Rn,"_isOnline");function Yn(){return!(we===2||be===2)}s(Yn,"calCurrentState");function fr(){var ji=Yn();Oe!==ji&&(Oe=ji,dl(se,function(Ac){var Ox={isOnline:Oe,rState:be,uState:we};try{Ac(Ox)}catch{}}))}s(fr,"listnerNoticeCheck");function wr(ji){we=ji,fr()}s(wr,"setOnlineState");function Gn(){be=1,fr()}s(Gn,"_setOnline");function kn(){be=2,fr()}s(kn,"_setOffline");function Si(){var ji=Gt();if(ji&&F){if(U8(ji,Ze),R){var Ac=R.body||R;ie(Ac.ononline)||U8(Ac,Ze)}F=!1}}s(Si,"_unload");function bo(ji){return se.push(ji),{rm:s(function(){var Ac=se.indexOf(ji);if(Ac>-1)return se.splice(Ac,1)},"rm")}}return s(bo,"addListener"),{isOnline:Rn,isListening:s(function(){return F},"isListening"),unload:Si,addListener:bo,setOnlineState:wr}}s(XU,"createOfflineListener");var Wse="AppInsightsPropertiesPlugin",q8="AppInsightsChannelPlugin",Fx="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=Fx,t.BreezeChannelIdentifier=q8,t.ConfigurationManager=Use,t.ConnectionStringParser=uk,t.ContextTagKeys=QA,t.CtxTagKeys=Hse,t.DEFAULT_BREEZE_ENDPOINT=A8,t.DEFAULT_BREEZE_PATH=Pw,t.Data=Qse,t.DisabledPropertyName=tk,t.DistributedTracingModes=xse,t.Envelope=dk,t.Event=_se,t.EventPersistence=Mw,t.Exception=Lp,t.Extensions=qse,t.HttpMethod=xU,t.Metric=Lse,t.PageView=Ose,t.PageViewPerformance=Gw,t.ProcessLegacy=rk,t.PropertiesPluginIdentifier=Wse,t.RemoteDependencyData=Nx,t.RequestHeaders=bU,t.SampleRate=vU,t.SeverityLevel=yk,t.TelemetryItemCreator=Q8,t.ThrottleMgr=wse,t.Trace=F8,t.correlationIdCanIncludeCorrelationHeader=NA,t.correlationIdGetCorrelationContext=kU,t.correlationIdGetCorrelationContextValue=PU,t.correlationIdGetPrefix=S8,t.correlationIdSetPrefix=_8,t.createDistributedTraceContextFromTrace=R8,t.createDomEvent=JU,t.createOfflineListener=XU,t.createTelemetryItem=O8,t.createTraceParent=lx,t.dataSanitizeException=I8,t.dataSanitizeId=xx,t.dataSanitizeInput=T8,t.dataSanitizeKey=b8,t.dataSanitizeKeyAndAddUniqueness=x8,t.dataSanitizeMeasurements=af,t.dataSanitizeMessage=ak,t.dataSanitizeProperties=Th,t.dataSanitizeString=Vc,t.dataSanitizeUrl=Dp,t.dateTimeUtilsDuration=vse,t.dateTimeUtilsNow=Ese,t.dsPadNumber=IU,t.findAllScripts=p8,t.findW3cTraceParent=f8,t.formatTraceParent=f1,t.getExtensionByName=Fse,t.isBeaconApiSupported=TA,t.isCrossOriginError=FA,t.isInternalApplicationInsightsEndpoint=RU,t.isSampledFlag=K5,t.isValidSpanId=dx,t.isValidTraceId=ux,t.isValidTraceParent=fx,t.msToTimeSpan=M8,t.parseConnectionString=lk,t.parseTraceParent=of,t.strNotSpecified=Pp,t.stringToBoolOrDefault=Mse,t.urlGetAbsoluteUrl=yse,t.urlGetCompleteUrl=wU,t.urlGetPathName=Cse,t.urlParseFullHost=wh,t.urlParseHost=_U,t.urlParseUrl=bx,t.utlCanUseLocalStorage=ck,t.utlCanUseSessionStorage=_h,t.utlDisableStorage=Fw,t.utlEnableStorage=bse,t.utlGetLocalStorage=NU,t.utlGetSessionStorage=MU,t.utlGetSessionStorageKeys=Rx,t.utlRemoveSessionStorage=FU,t.utlRemoveStorage=cf,t.utlSetLocalStorage=LU,t.utlSetSessionStorage=Ise,t.utlSetStoragePrefix=Ow})});var XDe=U((rG,JDe)=>{d();(function(t,e){typeof rG=="object"&&typeof JDe<"u"?e(rG):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(rG,function(t){"use strict";function e(A,v){return A||v}s(e,"_pureAssign");function r(A,v){return A[v]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",c="object",l="prototype",u="__proto__",f="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",E="call",x="toString",b=e(Object),_=r(b,l),k=e(String),P=r(k,l),N=e(Math),M=e(Array),J=r(M,l),pe=r(J,"slice");function Y(A,v){try{return{v:A.apply(this,v)}}catch(T){return{e:T}}}s(Y,"safe");function G(A,v){var T=Y(A);return T.e?v:T.v}s(G,"safeGet");var H;function ce(A){return function(v){return typeof v===A}}s(ce,"_createIs");function ie(A){var v="[object "+A+"]";return function(T){return!!(T&&V(T)===v)}}s(ie,"_createObjIs");function V(A){return _[x].call(A)}s(V,"objToString");function Q(A){return typeof A===f||A===f}s(Q,"isUndefined");function z(A){return!ne(A)}s(z,"isStrictUndefined");function re(A){return A===i||Q(A)}s(re,"isNullOrUndefined");function fe(A){return A===i||!ne(A)}s(fe,"isStrictNullOrUndefined");function ne(A){return!!A||A!==n}s(ne,"isDefined");function me(A){return!H&&(H=["string","number","boolean",f,"symbol","bigint"]),A!==c&&H.indexOf(A)!==-1}s(me,"isPrimitiveType");var he=ce("string"),Qe=ce(a);function ke(A){return!A&&re(A)?!1:!!A&&typeof A===c}s(ke,"isObject");var tt=r(M,"isArray"),Fe=ie("Date"),ht=ce("number"),St=ce("boolean"),xt=ie("Error");function Tt(A){return!!(A&&A.then&&Qe(A.then))}s(Tt,"isPromiseLike");function le(A){return!(!A||G(function(){return!(A&&0+A)},!A))}s(le,"isTruthy");var Ue=r(b,"getOwnPropertyDescriptor");function ye(A,v){return!!A&&_.hasOwnProperty[E](A,v)}s(ye,"objHasOwnProperty");var nt=e(r(b,"hasOwn"),ee);function ee(A,v){return ye(A,v)||!!Ue(A,v)}s(ee,"polyObjHasOwn");function oe(A,v,T){if(A&&ke(A)){for(var S in A)if(nt(A,S)&&v[E](T||A,S,A[S])===-1)break}}s(oe,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function De(A){var v={};if(v[We.c]=!0,v[We.e]=!0,A.l){v.get=function(){return A.l.v};var T=Ue(A.l,"v");T&&T.set&&(v.set=function(S){A.l.v=S})}return oe(A,function(S,D){v[We[S]]=z(D)?v[We[S]]:D}),v}s(De,"_createProp");var xe=r(b,"defineProperty");function Ye(A,v,T){return xe(A,v,De(T))}s(Ye,"objDefine");function st(A,v,T,S,D){var L={};return oe(A,function(q,Z){yt(L,q,v?Z:q),yt(L,Z,T?Z:q)}),S?S(L):L}s(st,"_createKeyValueMap");function yt(A,v,T,S){xe(A,v,{value:T,enumerable:!0,writable:!1})}s(yt,"_assignMapValue");var qt=e(k),dr="[object Error]";function Ft(A,v){var T=o,S=_[x][E](A);S===dr&&(A={stack:qt(A.stack),message:qt(A.message),name:qt(A.name)});try{T=JSON.stringify(A,i,v?typeof v=="number"?v:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||qt(A)}catch(D){T=" - "+Ft(D,v)}return S+": "+T}s(Ft,"dumpObj");function Yr(A){throw new Error(A)}s(Yr,"throwError");function en(A){throw new TypeError(A)}s(en,"throwTypeError");var yn=r(b,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ft=r(b,"assign"),Et=r(b,"keys");function Zt(A){return yn&&oe(A,function(v,T){(tt(T)||ke(T))&&Zt(T)}),Vt(A)}s(Zt,"objDeepFreeze");var Vt=e(yn,Ae),vr=e(r(b,"getPrototypeOf"),Ge);function Ir(A){return st(A,1,0,Vt)}s(Ir,"createEnum");function zt(A){return st(A,0,0,Vt)}s(zt,"createEnumKeyMap");function ir(A){var v={};return oe(A,function(T,S){yt(v,T,S[1]),yt(v,S[0],S[1])}),Vt(v)}s(ir,"createSimpleMap");function Xt(A){return ir(A)}s(Xt,"createTypeMap");var Sr=zt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),qr="__tsUtils$gblCfg",tn;function zn(){var A;return typeof globalThis!==f&&(A=globalThis),!A&&typeof self!==f&&(A=self),!A&&typeof window!==f&&(A=window),!A&&typeof global!==f&&(A=global),A}s(zn,"_getGlobalValue");function ai(){if(!tn){var A=Y(zn).v||{};tn=A[qr]=A[qr]||{}}return tn}s(ai,"_getGlobalConfig");var Hn=ri;function ri(A,v,T){var S=v?v[A]:i;return function(D){var L=(D?D[A]:i)||S;if(L||T){var q=arguments;return(L||T).apply(D,L?pe[E](q,1):q)}en('"'+qt(A)+'" not defined for '+Ft(D))}}s(ri,"_unwrapFunctionWithPoly");function ln(A){return function(v){return v[A]}}s(ln,"_unwrapProp");var ni=r(N,"min"),_e=r(N,"max"),W=Hn("slice",P),ge=Hn("substring",P),ve=ri("substr",P,te);function te(A,v,T){return re(A)&&en("Invalid "+Ft(A)),T<0?o:(v=v||0,v<0&&(v=_e(v+A[g],0)),Q(T)?W(A,v):W(A,v,v+T))}s(te,"polyStrSubstr");function O(A,v){return ge(A,0,v)}s(O,"strLeft");var Re="_urid",ze;function Gt(){if(!ze){var A=ai();ze=A.gblSym=A.gblSym||{k:{},s:{}}}return ze}s(Gt,"_globalSymbolRegistry");var Pr;function Ar(A){var v={description:qt(A),toString:s(function(){return m+"("+A+")"},"toString")};return v[h]=!0,v}s(Ar,"polyNewSymbol");function gn(A){var v=Gt();if(!nt(v.k,A)){var T=Ar(A),S=Et(v.s).length;T[Re]=function(){return S+"_"+T[x]()},v.k[A]=T,v.s[T[Re]()]=qt(A)}return v.k[A]}s(gn,"polySymbolFor");function Cn(A){!Pr&&(Pr={});var v,T=Sr[A];return T&&(v=Pr[T]=Pr[T]||Ar(m+"."+T)),v}s(Cn,"polyGetKnownSymbol");var Tr;function $t(){Tr=ai()}s($t,"_initTestHooks");function Wn(A){var v={};return!Tr&&$t(),v.b=Tr.lzy,xe(v,"v",{configurable:!0,get:s(function(){var T=A();return Tr.lzy||xe(v,"v",{value:T}),v.b=Tr.lzy,T},"get")}),v}s(Wn,"getLazy");function ga(A){return xe({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(ga,"createCachedValue");var mh="window",dl;function hh(A,v){var T;return function(){return!Tr&&$t(),(!T||Tr.lzy)&&(T=ga(Y(A,v).v)),T.v}}s(hh,"_getGlobalInstFn");function Ip(A){return!Tr&&$t(),(!dl||A===!1||Tr.lzy)&&(dl=ga(Y(zn).v||i)),dl.v}s(Ip,"getGlobal");function Ba(A,v){var T;if(!dl||v===!1?T=Ip(v):T=dl.v,T&&T[A])return T[A];if(A===mh)try{return window}catch{}return i}s(Ba,"getInst");function pA(){return!!Lv()}s(pA,"hasDocument");var Lv=hh(Ba,["document"]);function HN(){return!!gh()}s(HN,"hasWindow");var gh=hh(Ba,[mh]);function Voe(){return!!mA()}s(Voe,"hasNavigator");var mA=hh(Ba,["navigator"]),$oe=hh(function(){return!!Y(function(){return process&&(process.versions||{}).node}).v}),KC,WN;function v5(){return KC=ga(Y(Ba,[m]).v),KC}s(v5,"_initSymbol");function zoe(A){var v=(Tr.lzy?0:KC)||v5();return v.v?v.v[A]:n}s(zoe,"_getSymbolKey");function Su(){return!!hA()}s(Su,"hasSymbol");function hA(){return!Tr&&$t(),((Tr.lzy?0:KC)||v5()).v}s(hA,"getSymbol");function fw(A,v){var T=Sr[A];!Tr&&$t();var S=(Tr.lzy?0:KC)||v5();return S.v?S.v[T||A]:v?n:Cn(A)}s(fw,"getKnownSymbol");function JC(A,v){!Tr&&$t();var T=(Tr.lzy?0:KC)||v5();return T.v?T.v(A):v?i:Ar(A)}s(JC,"newSymbol");function pw(A){return!Tr&&$t(),WN=(Tr.lzy?0:WN)||ga(Y(zoe,["for"]).v),(WN.v||gn)(A)}s(pw,"symbolFor");function gA(A){return!!A&&Qe(A.next)}s(gA,"isIterator");function x5(A){return!fe(A)&&Qe(A[fw(3)])}s(x5,"isIterable");var mw;function GN(A,v,T){if(A&&(gA(A)||(!mw&&(mw=ga(fw(3))),A=A[mw.v]?A[mw.v]():i),gA(A))){var S=n,D=n;try{for(var L=0;!(D=A.next()).done&&v[E](T||A,D.value,L,A)!==-1;)L++}catch(q){S={e:q},A.throw&&(D=i,A.throw(S))}finally{try{D&&!D.done&&A.return&&A.return(D)}finally{if(S)throw S.e}}}}s(GN,"iterForOf");function Mv(A,v,T){return A.apply(v,T)}s(Mv,"fnApply");function Fv(A,v){return!Q(v)&&A&&(tt(v)?Mv(A.push,A,v):gA(v)||x5(v)?GN(v,function(T){A.push(T)}):A.push(v)),A}s(Fv,"arrAppend");function jr(A,v,T){if(A)for(var S=A[g]>>>0,D=0;D<S&&!(D in A&&v[E](T||A,A[D],D,A)===-1);D++);}s(jr,"arrForEach");var fd=Hn("indexOf",J),XC=Hn("map",J);function Ov(A,v,T){return((A?A.slice:i)||pe).apply(A,pe[E](arguments,1))}s(Ov,"arrSlice");var Yoe=Hn("reduce",J),AA=e(r(b,"create"),Koe);function Koe(A){if(!A)return{};var v=typeof A;v!==c&&v!==a&&en("Prototype must be an Object or function: "+Ft(A));function T(){}return s(T,"tempFunc"),T[l]=A,new T}s(Koe,"polyObjCreate");var jN;function hw(A,v){var T=b.setPrototypeOf||function(S,D){var L;!jN&&(jN=ga((L={},L[u]=[],L instanceof Array))),jN.v?S[u]=D:oe(D,function(q,Z){return S[q]=Z})};return T(A,v)}s(hw,"objSetPrototypeOf");function Joe(A,v,T){Y(Ye,[v,y,{v:A,c:!0,e:!1}]),v=hw(v,T);function S(){this[p]=v,Y(Ye,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),v[l]=T===i?AA(T):(S[l]=T[l],new S),v}s(Joe,"_createCustomError");function gw(A,v){v&&(A[y]=v)}s(gw,"_setName");function gc(A,v,T){var S=T||Error,D=S[l][y],L=Error.captureStackTrace;return Joe(A,function(){var q=this,Z=arguments;try{Y(gw,[S,A]);var ae=Mv(S,q,pe[E](Z))||q;if(ae!==q){var Ce=vr(q);Ce!==vr(ae)&&hw(ae,Ce)}return L&&L(ae,q[p]),v&&v(ae,Z),ae}finally{Y(gw,[S,D])}},S)}s(gc,"createCustomError");function yA(){return(Date.now||Aw)()}s(yA,"utcNow");function Aw(){return new Date().getTime()}s(Aw,"polyUtcNow");function YQ(A){return s(function(T){return re(T)&&en("strTrim called ["+Ft(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(YQ,"_createTrimFn");var Xoe=YQ(/^\s+|(?=\s)\s+$/g),so=ri("trim",P,Xoe),ZC=r(N,"floor"),CA,VN,yw;function pd(A){if(!A||typeof A!==c)return!1;yw||(yw=HN()?gh():!0);var v=!1;if(A!==yw){VN||(CA=Function[l][x],VN=CA[E](b));try{var T=vr(A);v=!T,v||(ye(T,p)&&(T=T[p]),v=!!(T&&typeof T===a&&CA[E](T)===VN))}catch{}}return v}s(pd,"isPlainObject");function KQ(A){return A.value&&b5(A),!0}s(KQ,"_defaultDeepCopyHandler");var JQ=[Qv,b5,ZQ,EA];function $N(A,v,T,S){var D;return jr(A,function(L){if(L.k===v)return D=L,-1}),D||(D={k:v,v},A.push(D),S(D)),D.v}s($N,"_getSetVisited");function e1(A,v,T,S){var D=T.handler,L=T.path?S?T.path.concat(S):T.path:[],q={handler:T.handler,src:T.src,path:L},Z=typeof v,ae=!1,Ce=v===i;Ce||(v&&Z===c?ae=pd(v):Ce=me(Z));var Te={type:Z,isPrim:Ce,isPlain:ae,value:v,result:v,path:L,origin:T.src,copy:s(function(Le,Ke){return e1(A,Le,Ke?q:T,Ke)},"copy"),copyTo:s(function(Le,Ke){return zN(A,Le,Ke,q)},"copyTo")};return Te.isPrim?D&&D[E](T,Te)?Te.result:v:$N(A,v,L,function(Le){Ye(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(je){Le.v=je},"s")});for(var Ke=0,Me=D;!(Me||(Ke<JQ.length?JQ[Ke++]:KQ))[E](T,Te);)Me=i})}s(e1,"_deepCopy");function zN(A,v,T,S){if(!re(T))for(var D in T)v[D]=e1(A,T[D],S,D);return v}s(zN,"_copyProps");function XQ(A,v,T){var S={handler:T,src:v,path:[]};return zN([],A,v,S)}s(XQ,"objCopyProps");function YN(A,v){var T={handler:v,src:A};return e1([],A,T)}s(YN,"objDeepCopy");function Qv(A){var v=A.value;if(tt(v)){var T=A.result=[];return T.length=v.length,A.copyTo(T,v),!0}return!1}s(Qv,"arrayDeepCopyHandler");function EA(A){var v=A.value;return Fe(v)?(A.result=new Date(v.getTime()),!0):!1}s(EA,"dateDeepCopyHandler");function ZQ(A){return A.type===a}s(ZQ,"functionDeepCopyHandler");function b5(A){var v=A.value;if(v&&A.isPlain){var T=A.result={};return A.copyTo(T,v),!0}return!1}s(b5,"plainObjDeepCopyHandler");function KN(A,v){return jr(v,function(T){XQ(A,T)}),A}s(KN,"_doExtend");function I5(A,v,T,S,D,L,q){return KN(YN(A)||{},pe[E](arguments))}s(I5,"deepExtend");var Zoe=ln(g),ese=r(N,"round"),eU=ri("endsWith",P,tse);function tse(A,v,T){he(A)||en("'"+Ft(A)+"' is not a string");var S=he(v)?v:qt(v),D=!Q(T)&&T<A[g]?T:A[g];return ge(A,D-S[g],D)===S}s(tse,"polyStrEndsWith");var Ah=Hn("indexOf",P),T5="ref",JN="unref",w5="hasRef",rse="enabled";function _5(A,v,T){var S=!0,D=A?v(i):i,L;function q(){return S=!1,D&&D[JN]&&D[JN](),L}s(q,"_unref");function Z(){D&&T(D),D=i}s(Z,"_cancel");function ae(){return D=v(D),S||q(),L}s(ae,"_refresh");function Ce(Te){!Te&&D&&Z(),Te&&!D&&ae()}return s(Ce,"_setEnabled"),L={cancel:Z,refresh:ae},L[w5]=function(){return D&&D[w5]?D[w5]():S},L[T5]=function(){return S=!0,D&&D[T5]&&D[T5](),L},L[JN]=q,L=xe(L,rse,{get:s(function(){return!!D},"get"),set:Ce}),{h:L,dn:s(function(){D=i},"dn")}}s(_5,"_createTimerHandler");function S5(A,v,T){var S=tt(v),D=S?v.length:0,L=(D>0?v[0]:S?n:v)||setTimeout,q=(D>1?v[1]:n)||clearTimeout,Z=T[0];T[0]=function(){ae.dn(),Mv(Z,n,pe[E](arguments))};var ae=_5(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;Mv(q,n,[Ce])}return Mv(L,n,T)},function(Ce){Mv(q,n,[Ce])});return ae.h}s(S5,"_createTimeoutWith");function vA(A,v){return S5(!0,n,pe[E](arguments))}s(vA,"scheduleTimeout");function R5(A,v){return S5(!1,n,pe[E](arguments))}s(R5,"createTimeout");var t1,ef="constructor",tf="prototype",r1="function",Uv="_dynInstFuncs",xA="_isDynProxy",qv="_dynClass",XN="_dynCls$",n1="_dynInstChk",Hv=n1,ZN="_dfOpts",k5="_unknown_",Wv="__proto__",Cw="_dyn"+Wv,P5="__dynProto$Gbl",Gv="_dynInstProto",jv="useBaseInst",Ew="setInstFuncs",i1=Object,Vv=i1.getPrototypeOf,e8=i1.getOwnPropertyNames,B5=Ip(),$v=B5[P5]||(B5[P5]={o:(t1={},t1[Ew]=!0,t1[jv]=!0,t1),n:1e3});function zv(A){return A&&(A===i1[tf]||A===Array[tf])}s(zv,"_isObjectOrArrayPrototype");function yh(A){return zv(A)||A===Function[tf]}s(yh,"_isObjectArrayOrFunctionPrototype");function Tp(A){var v;if(A){if(Vv)return Vv(A);var T=A[Wv]||A[tf]||(A[ef]?A[ef][tf]:null);v=A[Cw]||T,ye(A,Cw)||(delete A[Gv],v=A[Cw]=A[Gv]||A[Cw],A[Gv]=T)}return v}s(Tp,"_getObjProto");function Yv(A,v){var T=[];if(e8)T=e8(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var D=0;D<T.length;D++)v(T[D])}s(Yv,"_forEachProp");function Kv(A,v,T){return v!==ef&&typeof A[v]===r1&&(T||ye(A,v))&&v!==Wv&&v!==tf}s(Kv,"_isDynamicCandidate");function D5(A){en("DynamicProto: "+A)}s(D5,"_throwTypeError");function t8(A){var v=AA(null);return Yv(A,function(T){!v[T]&&Kv(A,T,!1)&&(v[T]=A[T])}),v}s(t8,"_getInstanceFuncs");function r8(A,v){for(var T=A.length-1;T>=0;T--)if(A[T]===v)return!0;return!1}s(r8,"_hasVisited");function nse(A,v,T,S){function D(ae,Ce,Te){var Le=Ce[Te];if(Le[xA]&&S){var Ke=ae[Uv]||{};Ke[Hv]!==!1&&(Le=(Ke[Ce[qv]]||{})[Te]||Le)}return function(){return Le.apply(ae,arguments)}}s(D,"_instFuncProxy");var L=AA(null);Yv(T,function(ae){L[ae]=D(v,T,ae)});for(var q=Tp(A),Z=[];q&&!yh(q)&&!r8(Z,q);)Yv(q,function(ae){!L[ae]&&Kv(q,ae,!Vv)&&(L[ae]=D(v,q,ae))}),Z.push(q),q=Tp(q);return L}s(nse,"_getBaseFuncs");function ise(A,v,T,S){var D=null;if(A&&ye(T,qv)){var L=A[Uv]||AA(null);if(D=(L[T[qv]]||AA(null))[v],D||D5("Missing ["+v+"] "+r1),!D[n1]&&L[Hv]!==!1){for(var q=!ye(A,v),Z=Tp(A),ae=[];q&&Z&&!yh(Z)&&!r8(ae,Z);){var Ce=Z[v];if(Ce){q=Ce===S;break}ae.push(Z),Z=Tp(Z)}try{q&&(A[v]=D),D[n1]=1}catch{L[Hv]=!1}}}return D}s(ise,"_getInstFunc");function ose(A,v,T){var S=v[A];return S===T&&(S=Tp(v)[A]),typeof S!==r1&&D5("["+A+"] is not a "+r1),S}s(ose,"_getProtoFunc");function sse(A,v,T,S,D){function L(ae,Ce){var Te=s(function(){var Le=ise(this,Ce,ae,Te)||ose(Ce,ae,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[xA]=1,Te}if(s(L,"_createDynamicPrototype"),!zv(A)){var q=T[Uv]=T[Uv]||AA(null);if(!zv(q)){var Z=q[v]=q[v]||AA(null);q[Hv]!==!1&&(q[Hv]=!!D),zv(Z)||Yv(T,function(ae){Kv(T,ae,!1)&&T[ae]!==S[ae]&&(Z[ae]=T[ae],delete T[ae],(!ye(A,ae)||A[ae]&&!A[ae][xA])&&(A[ae]=L(A,ae)))})}}}s(sse,"_populatePrototype");function n8(A,v){if(Vv){for(var T=[],S=Tp(v);S&&!yh(S)&&!r8(T,S);){if(S===A)return!0;T.push(S),S=Tp(S)}return!1}return!0}s(n8,"_checkPrototype");function vw(A,v){return ye(A,tf)?A.name||v||k5:((A||{})[ef]||{}).name||v||k5}s(vw,"_getObjName");function jl(A,v,T,S){ye(A,tf)||D5("theClass is an invalid class definition.");var D=A[tf];n8(D,v)||D5("["+vw(A)+"] not in hierarchy of ["+vw(v)+"]");var L=null;ye(D,qv)?L=D[qv]:(L=XN+vw(A,"_")+"$"+$v.n,$v.n++,D[qv]=L);var q=jl[ZN],Z=!!q[jv];Z&&S&&S[jv]!==void 0&&(Z=!!S[jv]);var ae=t8(v),Ce=nse(D,v,ae,Z);T(v,Ce);var Te=!!Vv&&!!q[Ew];Te&&S&&(Te=!!S[Ew]),sse(D,L,v,ae,Te!==!1)}s(jl,"dynamicProto"),jl[ZN]=$v.o;var Aa="function",tU="object",rU="undefined",xw="prototype",i8=Object,o8=i8[xw];(Ip()||{}).Symbol,(Ip()||{}).Reflect;var N5="hasOwnProperty",nU=s(function(A){for(var v,T=1,S=arguments.length;T<S;T++){v=arguments[T];for(var D in v)o8[N5].call(v,D)&&(A[D]=v[D])}return A},"__objAssignFnImpl"),Ch=ft||nU,bA=s(function(A,v){return bA=i8.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var D in S)S[N5](D)&&(T[D]=S[D])},bA(A,v)},"extendStaticsFn");function bw(A,v){typeof v!==Aa&&v!==null&&en("Class extends value "+String(v)+" is not a constructor or null"),bA(A,v);function T(){this.constructor=A}s(T,"__"),A[xw]=v===null?AA(v):(T[xw]=v[xw],new T)}s(bw,"__extendsFn");function iU(A,v){for(var T=0,S=v.length,D=A.length;T<S;T++,D++)A[D]=v[T];return A}s(iU,"__spreadArrayFn");var L5=Ir,ase=Xt,IA=L5({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Jv="toLowerCase",ii="length",Xv="warnToConsole",o1="throwInternal",Eh="watch",M5="apply",ao="push",Zv="splice",$a="logger",ex="cancel",Iw="initialize",TA="identifier",Tw="removeNotificationListener",F5="addNotificationListener",wp="isInitialized",tx="value",l0="getNotifyMgr",rx="getPlugin",wA="name",fl="processNext",nx="getProcessTelContext",_p="enabled",oU="stopPollingInternalLogs",s1="unload",O5="onComplete",ix="version",sU="loggingLevelConsole",a1="createNew",Sp="teardown",Q5="messageId",c1="message",Rp="diagLog",U5="_doTeardown",vh="update",kp="getNext",_A="setNextPlugin",q5="userAgent",SA="split",RA="replace",Vl="type",s8="evtName",ww="status",a8="getAllResponseHeaders",c8="isChildEvt",ox="data",kA="getCtx",u0="setCtx",aU="itemsReceived",xh="urlString",l8="headers",bh="timeout",cU="traceFlags",sx;function u8(A,v){sx||(sx=gc("AggregationError",function(S,D){D[ii]>1&&(S.errors=D[1])}));var T=A||"One or more errors occurred.";throw jr(v,function(S,D){T+=`
`.concat(D," > ").concat(Ft(S))}),new sx(T,v||[])}s(u8,"throwAggregationError");var l1="Promise",u1="rejected";function rf(A,v){return lU(A,function(T){return v?v({status:"fulfilled",rejected:!1,value:T}):T},function(T){return v?v({status:u1,rejected:!0,reason:T}):T})}s(rf,"doAwaitResponse");function lU(A,v,T,S){var D=A;try{if(Tt(A))(v||T)&&(D=A.then(v,T));else try{v&&(D=v(A))}catch(L){if(T)D=T(L);else throw L}}finally{S&&cse(D,S)}return D}s(lU,"doAwait");function cse(A,v){var T=A;return v&&(Tt(A)?A.finally?T=A.finally(v):T=A.then(function(S){return v(),S},function(S){throw v(),S}):v()),T}s(cse,"doFinally");var uU=["pending","resolving","resolved",u1],dU="dispatchEvent",_w;function fU(A){var v;return A&&A.createEvent&&(v=A.createEvent("Event")),!!v&&v.initEvent}s(fU,"_hasInitEventFn");function H5(A,v,T,S){var D=Lv();!_w&&(_w=ga(!!Y(fU,[D]).v));var L=_w.v?D.createEvent("Event"):S?new Event(v):{};if(T&&T(L),_w.v&&L.initEvent(v,!1,!0),L&&A[dU])A[dU](L);else{var q=A["on"+v];if(q)q(L);else{var Z=Ba("console");Z&&(Z.error||Z.log)(v,Ft(L))}}}s(H5,"emitEvent");var pU="unhandledRejection",lse=pU.toLowerCase(),ax=10,W5;function mU(A){return Qe(A)?A.toString():Ft(A)}s(mU,"dumpFnObj");function hU(A,v,T){var S=Ov(arguments,3),D=0,L=!1,q,Z=[],ae=!1,Ce=null,Te;function Le(Yt,yr){try{ae=!0,Ce&&Ce.cancel(),Ce=null;var Kn=A(function(Di,Ni){Z.push(function(){try{var Bo=D===2?Yt:yr,An=Q(Bo)?q:Qe(Bo)?Bo(q):Bo;Tt(An)?An.then(Di,Ni):Bo?Di(An):D===3?Ni(An):Di(An)}catch(Hr){Ni(Hr)}}),L&&ut()},S);return Kn}finally{}}s(Le,"_then");function Ke(Yt){return Le(void 0,Yt)}s(Ke,"_catch");function Me(Yt){var yr=Yt,Kn=Yt;return Qe(Yt)&&(yr=s(function(Di){return Yt&&Yt(),Di},"thenFinally"),Kn=s(function(Di){throw Yt&&Yt(),Di},"catchFinally")),Le(yr,Kn)}s(Me,"_finally");function je(){return uU[D]}s(je,"_strState");function ut(){if(Z.length>0){var Yt=Z.slice();Z=[],ae=!0,Ce&&Ce.cancel(),Ce=null,v(Yt)}}s(ut,"_processQueue");function rt(Yt,yr){return function(Kn){if(D===yr){if(Yt===2&&Tt(Kn)){D=1,Kn.then(rt(2,1),rt(3,1));return}D=Yt,L=!0,q=Kn,ut(),!ae&&Yt===3&&!Ce&&(Ce=vA(Ct,ax))}}}s(rt,"_createSettleIfFn");function Ct(){if(!ae)if(ae=!0,$oe())process.emit(pU,q,Te);else{var Yt=gh()||Ip();!W5&&(W5=ga(Y(Ba,[l1+"RejectionEvent"]).v)),H5(Yt,lse,function(yr){return Ye(yr,"promise",{g:s(function(){return Te},"g")}),yr.reason=q,yr},!!W5.v)}}s(Ct,"_notifyUnhandledRejection"),Te={then:Le,catch:Ke,finally:Me},xe(Te,"state",{get:je}),Su()&&(Te[fw(11)]="IPromise");function Mt(){return"IPromise "+je()+(L?" - "+mU(q):"")}return s(Mt,"_toString"),Te.toString=Mt,s(function(){Qe(T)||en(l1+": executor is not a function - "+mU(T));var yr=rt(3,0);try{T.call(Te,rt(2,0),yr)}catch(Kn){yr(Kn)}},"_initialize")(),Te}s(hU,"_createPromise");function use(A){return function(v){var T=Ov(arguments,1);return A(function(S,D){try{var L=[],q=1;GN(v,function(Z,ae){Z&&(q++,lU(Z,function(Ce){L[ae]=Ce,--q===0&&S(L)},D))}),q--,q===0&&S(L)}catch(Z){D(Z)}},T)}}s(use,"_createAllPromise");function dse(A){return ga(function(v){var T=Ov(arguments,1);return A(function(S,D){var L=[],q=1;function Z(ae,Ce){q++,rf(ae,function(Te){Te.rejected?L[Ce]={status:u1,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--q===0&&S(L)})}s(Z,"processItem");try{tt(v)?jr(v,Z):x5(v)?GN(v,Z):en("Input is not an iterable"),q--,q===0&&S(L)}catch(ae){D(ae)}},T)})}s(dse,"_createAllSettledPromise");function gU(A){jr(A,function(v){try{v()}catch{}})}s(gU,"syncItemProcessor");function AU(A){var v=ht(A)?A:0;return function(T){vA(function(){gU(T)},v)}}s(AU,"timeoutItemProcessor");function G5(A,v){return hU(G5,AU(v),A,v)}s(G5,"createAsyncPromise");var j5;function fse(A,v){!j5&&(j5=ga(Y(Ba,[l1]).v||null));var T=j5.v;if(!T)return G5(A);Qe(A)||en(l1+": executor is not a function - "+Ft(A));var S=0;function D(){return uU[S]}s(D,"_strState");var L=new T(function(q,Z){function ae(Te){S=2,q(Te)}s(ae,"_resolve");function Ce(Te){S=3,Z(Te)}s(Ce,"_reject"),A(ae,Ce)});return xe(L,"state",{get:D}),L}s(fse,"createNativePromise");var V5;function $5(A){return hU($5,gU,A)}s($5,"createSyncPromise");function md(A,v){return!V5&&(V5=dse($5)),V5.v(A,v)}s(md,"createSyncAllSettledPromise");var z5;function cx(A,v){return!z5&&(z5=ga(fse)),z5.v.call(this,A,v)}s(cx,"createPromise");var d8=use(cx),nf=void 0,_i="",Ih="channels",za="core",d0="createPerfMgr",Y5="disabled",d1="extensionConfig",lx="extensions",of="processTelemetry",ux="priority",dx="eventsSent",fx="eventsDiscarded",K5="eventsSendRequest",f1="perfEvent",f8="offlineEventsStored",p8="offlineBatchSent",J5="offlineBatchDrop",Sw="getPerfMgr",X5="domain",Z5="path",yU="Not dynamic - ",m8=/-([a-z])/g,pse=/([^\w\d_$])/g,mse=/^(\d+[\w\d_$])/;function ek(A){return!re(A)}s(ek,"isNotNullOrUndefined");function px(A){var v=A;return v&&he(v)&&(v=v[RA](m8,function(T,S){return S.toUpperCase()}),v=v[RA](pse,"_"),v=v[RA](mse,function(T,S){return"_"+S})),v}s(px,"normalizeJsName");function pl(A,v){return A&&v?Ah(A,v)!==-1:!1}s(pl,"strContains");function Rw(A){return A&&A.toISOString()||""}s(Rw,"toISOString");function jc(A){return xt(A)?A[wA]:_i}s(jc,"getExceptionName");function PA(A,v,T,S,D){var L=T;return A&&(L=A[v],L!==T&&(!D||D(L))&&(!S||S(T))&&(L=T,A[v]=L)),L}s(PA,"setValue");function CU(A,v,T){var S;return A?(S=A[v],!S&&re(S)&&(S=Q(T)?{}:T,A[v]=S)):S=Q(T)?{}:T,S}s(CU,"getSetValue");function hse(A,v){var T=null,S=null;return Qe(A)?T=A:S=A,function(){var D=arguments;if(T&&(S=T()),S)return S[v][M5](S,D)}}s(hse,"_createProxyFunction");function kw(A,v,T,S,D){A&&v&&T&&(D!==!1||Q(A[v]))&&(A[v]=hse(T,S))}s(kw,"proxyFunctionAs");function h8(A,v,T,S){return A&&v&&ke(A)&&tt(T)&&jr(T,function(D){he(D)&&kw(A,D,v,D,S)}),A}s(h8,"proxyFunctions");function gse(A){return function(){function v(){var T=this;A&&oe(A,function(S,D){T[S]=D})}return s(v,"class_1"),v}()}s(gse,"createClassFromInterface");function g8(A){return A&&ft&&(A=i8(ft({},A))),A}s(g8,"optimizeObject");function EU(A,v,T,S,D,L){var q=arguments,Z=q[0]||{},ae=q[ii],Ce=!1,Te=1;for(ae>0&&St(Z)&&(Ce=Z,Z=q[Te]||{},Te++),ke(Z)||(Z={});Te<ae;Te++){var Le=q[Te],Ke=tt(Le),Me=ke(Le);for(var je in Le){var ut=Ke&&je in Le||Me&&nt(Le,je);if(ut){var rt=Le[je],Ct=void 0;if(Ce&&rt&&((Ct=tt(rt))||pd(rt))){var Mt=Z[je];Ct?tt(Mt)||(Mt=[]):pd(Mt)||(Mt={}),rt=EU(Ce,Mt,rt)}rt!==void 0&&(Z[je]=rt)}}}return Z}s(EU,"objExtend");function tk(A){try{return A.responseText}catch{}return null}s(tk,"getResponseText");function vU(A,v){return A?"XDomainRequest,Response:"+tk(A)||"":v}s(vU,"formatErrorMessageXdr");function rk(A,v){return A?"XMLHttpRequest,Status:"+A[ww]+",Response:"+tk(A)||A.response||"":v}s(rk,"formatErrorMessageXhr");function xU(A,v){return v&&(ht(v)?A=[v].concat(A):tt(v)&&(A=v.concat(A))),A}s(xU,"prependTransports");var A8="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Pw="withCredentials",Pp="timeout";function y8(A,v,T,S,D,L){S===void 0&&(S=!1),D===void 0&&(D=!1);function q(ae,Ce,Te){try{ae[Ce]=Te}catch{}}s(q,"_wrapSetXhrProp");var Z=new XMLHttpRequest;return S&&q(Z,A8,S),T&&q(Z,Pw,T),Z.open(A,v,!D),T&&q(Z,Pw,T),!D&&L&&q(Z,Pp,L),Z}s(y8,"openXhr");function bU(A){var v={};if(he(A)){var T=so(A)[SA](/[\r\n]+/);jr(T,function(S){if(S){var D=S.indexOf(": ");if(D!==-1){var L=so(S.substring(0,D))[Jv](),q=so(S.substring(D+1));v[L]=q}else v[so(S)]=1}})}return v}s(bU,"convertAllHeadersToMap");function BA(A,v,T){if(!A[T]&&v&&v.getResponseHeader){var S=v.getResponseHeader(T);S&&(A[T]=so(S))}return A}s(BA,"_appendHeader");var Sn="kill-duration",mx="kill-duration-seconds",p1="time-delta-millis";function m1(A,v){var T={};return A[a8]?T=bU(A[a8]()):v&&(T=BA(T,A,p1),T=BA(T,A,Sn),T=BA(T,A,mx)),T}s(m1,"_getAllResponseHeaders");var C8="documentMode",Bw="location",hx="console",nk="JSON",E8="crypto",ik="msCrypto",gx="msie",h1="trident/",v8="XMLHttpRequest",sf=null,Ax=null,Bp=!1,Ru=null,yx=null;function Dw(A,v){var T=!1;if(A){try{if(T=v in A,!T){var S=A[xw];S&&(T=v in S)}}catch{}if(!T)try{var D=new A;T=!Q(D[v])}catch{}}return T}s(Dw,"_hasProperty");function Cx(A){if(A&&Bp){var v=Ba("__mockLocation");if(v)return v}return typeof location===tU&&location?location:Ba(Bw)}s(Cx,"getLocation");function Nw(){return typeof console!==rU?console:Ba(hx)}s(Nw,"getConsole");function Ex(){return!!(typeof JSON===tU&&JSON||Ba(nk)!==null)}s(Ex,"hasJSON");function hd(){return Ex()?JSON||Ba(nk):null}s(hd,"getJSON");function ok(){return Ba(E8)}s(ok,"getCrypto");function sk(){return Ba(ik)}s(sk,"getMsCrypto");function f0(){var A=mA();if(A&&(A[q5]!==Ax||sf===null)){Ax=A[q5];var v=(Ax||_i)[Jv]();sf=pl(v,gx)||pl(v,h1)}return sf}s(f0,"isIE");function vx(A){if(A===void 0&&(A=null),!A){var v=mA()||{};A=v?(v.userAgent||_i)[Jv]():_i}var T=(A||_i)[Jv]();if(pl(T,gx)){var S=Lv()||{};return _e(parseInt(T[SA](gx)[1]),S[C8]||0)}else if(pl(T,h1)){var D=parseInt(T[SA](h1)[1]);if(D)return D+4}return null}s(vx,"getIEVersion");function DA(A){return(yx===null||A===!1)&&(yx=Voe()&&!!mA().sendBeacon),yx}s(DA,"isBeaconsSupported");function Lw(A){var v=!1;try{v=!!Ba("fetch");var T=Ba("Request");v&&A&&T&&(v=Dw(T,"keepalive"))}catch{}return v}s(Lw,"isFetchSupported");function x8(){return Ru===null&&(Ru=typeof XDomainRequest!==rU,Ru&&b8()&&(Ru=Ru&&!Dw(Ba(v8),"withCredentials"))),Ru}s(x8,"useXDomainRequest");function b8(){var A=!1;try{var v=Ba(v8);A=!!v}catch{}return A}s(b8,"isXhrSupported");var Vc=4294967296,Dp=4294967295,ak=123456789,I8=987654321,Th=!1,af=ak,xx=I8;function T8(A){A<0&&(A>>>=0),af=ak+A&Dp,xx=I8-A&Dp,Th=!0}s(T8,"_mwcSeed");function IU(){try{var A=yA()&2147483647;T8((Math.random()*Vc^A)+A)}catch{}}s(IU,"_autoSeedMwc");function w8(A){var v=0,T=ok()||sk();return T&&T.getRandomValues&&(v=T.getRandomValues(new Uint32Array(1))[0]&Dp),v===0&&f0()&&(Th||IU(),v=TU()&Dp),v===0&&(v=ZC(Vc*Math.random()|0)),A||(v>>>=0),v}s(w8,"random32");function TU(A){xx=36969*(xx&65535)+(xx>>16)&Dp,af=18e3*(af&65535)+(af>>16)&Dp;var v=(xx<<16)+(af&65535)>>>0&Dp|0;return A||(v>>>=0),v}s(TU,"mwcRandom32");function Ase(A){A===void 0&&(A=22);for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=w8()>>>0,S=0,D=_i;D[ii]<A;)S++,D+=v.charAt(T&63),T>>>=6,S===5&&(T=(w8()<<2&4294967295|T&3)>>>0,S=0);return D}s(Ase,"newId");var bx="3.3.6",yse="."+Ase(6),Cse=0;function wU(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(wU,"_canAcceptData");function _U(A,v){var T=v[A.id];if(!T){T={};try{wU(v)&&Ye(v,A.id,{e:!1,v:T})}catch{}}return T}s(_U,"_getCache");function wh(A,v){return v===void 0&&(v=!1),px(A+Cse+++(v?"."+bx:_i)+yse)}s(wh,"createUniqueNamespace");function SU(A){var v={id:wh("_aiData-"+(A||_i)+"."+bx),accept:s(function(T){return wU(T)},"accept"),get:s(function(T,S,D,L){var q=T[v.id];return q?q[px(S)]:(L&&(q=_U(v,T),q[px(S)]=D),D)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return v}s(SU,"createElmNodeData");function Ix(A){return A&&ke(A)&&(A.isVal||A.fb||nt(A,"v")||nt(A,"mrg")||nt(A,"ref")||A.set)}s(Ix,"_isConfigDefaults");function RU(A,v,T){var S,D=T.dfVal||ne;if(v&&T.fb){var L=T.fb;tt(L)||(L=[L]);for(var q=0;q<L[ii];q++){var Z=L[q],ae=v[Z];if(D(ae)?S=ae:A&&(ae=A.cfg[Z],D(ae)&&(S=ae),A.set(A.cfg,qt(Z),ae)),D(S))break}}return!D(S)&&D(T.v)&&(S=T.v),S}s(RU,"_getDefault");function _8(A,v,T){var S=T;if(T&&Ix(T)&&(S=RU(A,v,T)),S){Ix(S)&&(S=_8(A,v,S));var D;tt(S)?(D=[],D[ii]=S[ii]):pd(S)&&(D={}),D&&(oe(S,function(L,q){q&&Ix(q)&&(q=_8(A,v,q)),D[L]=q}),S=D)}return S}s(_8,"_resolveDefaultValue");function S8(A,v,T,S){var D,L,q,Z=S,ae,Ce,Te,Le;Ix(Z)?(D=Z.isVal,L=Z.set,Te=Z.rdOnly,Le=Z.blkVal,ae=Z.mrg,Ce=Z.ref,!Ce&&Q(Ce)&&(Ce=!!ae),q=RU(A,v,Z)):q=S,Le&&A.blkVal(v,T);var Ke,Me=!0,je=v[T];(je||!re(je))&&(Ke=je,Me=!1,D&&Ke!==q&&!D(Ke)&&(Ke=q,Me=!0),L&&(Ke=L(Ke,q,v),Me=Ke===q)),Me?q?Ke=_8(A,v,q):Ke=q:(pd(Ke)||tt(q))&&ae&&q&&(pd(q)||tt(q))&&oe(q,function(ut,rt){S8(A,Ke,ut,rt)}),A.set(v,T,Ke),Ce&&A.ref(v,T),Te&&A.rdOnly(v,T)}s(S8,"_applyDefaultValue");var NA=pw("[[ai_dynCfg_1]]"),kU=pw("[[ai_blkDynCfg_1]]"),PU=pw("[[ai_frcDynCfg_1]]");function BU(A){if(A){var v;if(tt(A)?(v=[],v[ii]=A[ii]):pd(A)&&(v={}),v)return oe(A,function(T,S){v[T]=BU(S)}),v}return A}s(BU,"_cfgDeepCopy");function Ese(A){if(A){var v=A[NA]||A;if(v.cfg&&(v.cfg===A||v.cfg[NA]===v))return v}return null}s(Ese,"getDynamicConfigHandler");function vse(A){if(A&&(pd(A)||tt(A)))try{A[kU]=!0}catch{}return A}s(vse,"blockDynamicConversion");function R8(A,v,T){var S=!1;return T&&!A[v.blkVal]&&(S=T[PU],!S&&!T[kU]&&(S=pd(T)||tt(T))),S}s(R8,"_canMakeDynamic");function Tx(A){en("InvalidAccess:"+A)}s(Tx,"throwInvalidAccess");var xse=["push","pop","shift","unshift","splice"],Mw=s(function(A,v,T,S){A&&A[o1](3,108,"".concat(T," [").concat(v,"] failed - ")+Ft(S))},"_throwDynamicError");function LA(A,v,T){tt(v)&&jr(xse,function(S){var D=v[S];v[S]=function(){for(var L=[],q=0;q<arguments.length;q++)L[q]=arguments[q];var Z=D[M5](this,L);return Sx(A,v,T,"Patching"),Z}})}s(LA,"_patchArray");function p0(A,v){var T=Ue(A,v);return T&&T.get}s(p0,"_getOwnPropGetter");function DU(A,v,T,S){var D={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(fd(D.h,Ce)===-1&&D.h[ao](Ce),A.trk(Ce,D))},"trk"),clr:s(function(Ce){var Te=fd(D.h,Ce);Te!==-1&&D.h[Zv](Te,1)},"clr")},L=!0,q=!1;function Z(){L&&(q=q||R8(Z,A,S),S&&!S[NA]&&q&&(S=Sx(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&D.trk(Ce),S}s(Z,"_getProperty"),Z[A.prop]={chng:s(function(){A.add(D)},"chng")};function ae(Ce){if(S!==Ce){Z[A.ro]&&!A.upd&&Tx("["+T+"] is read-only:"+Ft(v)),L&&(q=q||R8(Z,A,S),L=!1);var Te=q&&Z[A.rf];if(q)if(Te){oe(S,function(Ke){S[Ke]=Ce?Ce[Ke]:nf});try{oe(Ce,function(Ke,Me){wx(A,S,Ke,Me)}),Ce=S}catch(Ke){Mw((A.hdlr||{})[$a],T,"Assigning",Ke),q=!1}}else S&&S[NA]&&oe(S,function(Ke){var Me=p0(S,Ke);if(Me){var je=Me[A.prop];je&&je.chng()}});if(Ce!==S){var Le=Ce&&R8(Z,A,Ce);!Te&&Le&&(Ce=Sx(A,Ce,T,"Converting")),S=Ce,q=Le}A.add(D)}}s(ae,"_setProperty"),Ye(v,D.n,{g:Z,s:ae})}s(DU,"_createDynamicProperty");function wx(A,v,T,S){if(v){var D=p0(v,T),L=D&&!!D[A.prop];L?v[T]=S:DU(A,v,T,S)}return v}s(wx,"_setDynamicProperty");function _x(A,v,T,S){if(v){var D=p0(v,T),L=D&&!!D[A.prop],q=S&&S[0],Z=S&&S[1],ae=S&&S[2];if(!L){if(ae)try{vse(v)}catch(Ce){Mw((A.hdlr||{})[$a],T,"Blocking",Ce)}try{wx(A,v,T,v[T]),D=p0(v,T)}catch(Ce){Mw((A.hdlr||{})[$a],T,"State",Ce)}}q&&(D[A.rf]=q),Z&&(D[A.ro]=Z),ae&&(D[A.blkVal]=!0)}return v}s(_x,"_setDynamicPropertyState");function Sx(A,v,T,S){try{oe(v,function(D,L){wx(A,v,D,L)}),v[NA]||(xe(v,NA,{get:s(function(){return A.hdlr},"get")}),LA(A,v,T))}catch(D){Mw((A.hdlr||{})[$a],T,S,D)}return v}s(Sx,"_makeDynamicObject");var Fw="[[ai_",Ow="]]";function bse(A){var v=JC(Fw+"get"+A.uid+Ow),T=JC(Fw+"ro"+A.uid+Ow),S=JC(Fw+"rf"+A.uid+Ow),D=JC(Fw+"blkVal"+A.uid+Ow),L=JC(Fw+"dtl"+A.uid+Ow),q=null,Z=null,ae;function Ce(Me,je){var ut=ae.act;try{ae.act=Me,Me&&Me[L]&&(jr(Me[L],function(Ct){Ct.clr(Me)}),Me[L]=[]),je({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(Ct){var rt=A[$a];throw rt&&rt[o1](1,107,Ft(Ct)),Ct}finally{ae.act=ut||null}}s(Ce,"_useHandler");function Te(){if(q){var Me=q;q=null,Z&&Z[ex](),Z=null;var je=[];if(jr(Me,function(ut){if(ut&&(ut[L]&&(jr(ut[L],function(rt){rt.clr(ut)}),ut[L]=null),ut.fn))try{Ce(ut,ut.fn)}catch(rt){je[ao](rt)}}),q)try{Te()}catch(ut){je[ao](ut)}je[ii]>0&&u8("Watcher error(s): ",je)}}s(Te,"_notifyWatchers");function Le(Me){if(Me&&Me.h[ii]>0){q||(q=[]),Z||(Z=vA(function(){Z=null,Te()},0));for(var je=0;je<Me.h[ii];je++){var ut=Me.h[je];ut&&fd(q,ut)===-1&&q[ao](ut)}}}s(Le,"_addWatcher");function Ke(Me,je){if(Me){var ut=Me[L]=Me[L]||[];fd(ut,je)===-1&&ut[ao](je)}}return s(Ke,"_trackHandler"),ae={prop:v,ro:T,rf:S,blkVal:D,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ke},ae}s(bse,"_createState");function ck(A,v){var T={fn:v,rm:s(function(){T.fn=null,A=null,v=null},"rm")};return Ye(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,v),T}s(ck,"_createAndUseHandler");function NU(A,v,T){var S=Ese(v);if(S)return S;var D=wh("dyncfg",!0),L=v&&T!==!1?v:BU(v),q;function Z(){q.notify()}s(Z,"_notifyWatchers");function ae(rt,Ct,Mt){try{rt=wx(q,rt,Ct,Mt)}catch(Yt){Mw(A,Ct,"Setting value",Yt)}return rt[Ct]}s(ae,"_setValue");function Ce(rt){return ck(q,rt)}s(Ce,"_watch");function Te(rt,Ct){q.use(null,function(Mt){var Yt=q.upd;try{Q(Ct)||(q.upd=Ct),rt(Mt)}finally{q.upd=Yt}})}s(Te,"_block");function Le(rt,Ct){var Mt;return _x(q,rt,Ct,(Mt={},Mt[0]=!0,Mt))[Ct]}s(Le,"_ref");function Ke(rt,Ct){var Mt;return _x(q,rt,Ct,(Mt={},Mt[1]=!0,Mt))[Ct]}s(Ke,"_rdOnly");function Me(rt,Ct){var Mt;return _x(q,rt,Ct,(Mt={},Mt[2]=!0,Mt))[Ct]}s(Me,"_blkPropValue");function je(rt,Ct){return Ct&&oe(Ct,function(Mt,Yt){S8(ut,rt,Mt,Yt)}),rt}s(je,"_applyDefaults");var ut={uid:null,cfg:L,logger:A,notify:Z,set:ae,setDf:je,watch:Ce,ref:Le,rdOnly:Ke,blkVal:Me,_block:Te};return Ye(ut,"uid",{c:!1,e:!1,w:!1,v:D}),q=bse(ut),Sx(q,L,"config","Creating"),ut}s(NU,"_createDynamicHandler");function LU(A,v){A?(A[Xv](v),A[o1](2,108,v)):Tx(v)}s(LU,"_logInvalidAccess");function cf(A,v,T,S){var D=NU(T,A||{},S);return v&&D.setDf(D.cfg,v),D}s(cf,"createDynamicConfig");function _h(A,v,T){var S=A[NA]||A;return S.cfg&&(S.cfg===A||S.cfg[NA]===S)?S[Eh](v):(LU(T,yU+Ft(A)),cf(A,null,T)[Eh](v))}s(_h,"onConfigChange");function Rx(A,v){if(A&&A[s1])return A[s1](v)}s(Rx,"runTargetUnload");function MU(A,v,T){var S;return T||(S=cx(function(D){T=D})),A&&Zoe(A)>0?rf(Rx(A[0],v),function(){MU(Ov(A,1),v,T)}):T(),S}s(MU,"doUnloadAll");var Ise=500,FU="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function Tse(A,v,T){return!A&&re(A)?v:St(A)?A:qt(A)[Jv]()==="true"}s(Tse,"_stringToBoolOrDefault");function wse(A){return{mrg:!0,v:A}}s(wse,"cfgDfMerge");function k8(A,v,T){return{fb:T,isVal:A,v}}s(k8,"cfgDfValidate");function Np(A,v){return{fb:v,set:Tse,v:!!A}}s(Np,"cfgDfBoolean");var lk=[dx,fx,K5,f1],uk=null,dk;function _se(A,v){return function(){var T=arguments,S=OU(v);if(S){var D=S.listener;D&&D[A]&&D[A][M5](D,T)}}}s(_se,"_listenerProxyFunc");function Sse(){var A=Ba("Microsoft");return A&&(uk=A.ApplicationInsights),uk}s(Sse,"_getExtensionNamespace");function OU(A){var v=uk;return!v&&A.disableDbgExt!==!0&&(v=uk||Sse()),v?v.ChromeDbgExt:null}s(OU,"getDebugExt");function Rse(A){if(!dk){dk={};for(var v=0;v<lk[ii];v++)dk[lk[v]]=_se(lk[v],A)}return dk}s(Rse,"getDebugListener");var kx,QU="warnToConsole",kse="AI (Internal): ",Pse="AI: ",Bse="AITR_",UU={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Px=(kx={},kx[0]=null,kx[1]="errorToConsole",kx[2]=QU,kx[3]="debugToConsole",kx);function gd(A){return A?'"'+A[RA](/\"/g,_i)+'"':_i}s(gd,"_sanitizeDiagnosticText");function Qw(A,v){var T=Nw();if(T){var S="log";T[A]&&(S=A),Qe(T[S])&&T[S](v)}}s(Qw,"_logToConsole");var fk=function(){function A(v,T,S,D){S===void 0&&(S=!1);var L=this;L[Q5]=v,L[c1]=(S?Pse:kse)+v;var q=_i;Ex()&&(q=hd().stringify(D));var Z=(T?" message:"+gd(T):_i)+(D?" props:"+gd(q):_i);L[c1]+=Z}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function Uw(A,v){return(A||{})[$a]||new qw(v)}s(Uw,"safeGetLogger");var qw=function(){function A(v){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},D,L,q,Z,ae;jl(A,this,function(Ce){ae=Le(v||{}),Ce.consoleLoggingLevel=function(){return D},Ce[o1]=function(je,ut,rt,Ct,Mt){Mt===void 0&&(Mt=!1);var Yt=new fk(ut,rt,Mt,Ct);if(Z)throw Ft(Yt);var yr=Px[je]||QU;if(Q(Yt[c1]))Me("throw"+(je===1?"Critical":"Warning"),Yt);else{if(Mt){var Kn=+Yt[Q5];!S[Kn]&&D>=je&&(Ce[yr](Yt[c1]),S[Kn]=!0)}else D>=je&&Ce[yr](Yt[c1]);Te(je,Yt)}},Ce.debugToConsole=function(je){Qw("debug",je),Me("warning",je)},Ce[Xv]=function(je){Qw("warn",je),Me("warning",je)},Ce.errorToConsole=function(je){Qw("error",je),Me("error",je)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[s1]=function(je){ae&&ae.rm(),ae=null};function Te(je,ut){if(!Ke()){var rt=!0,Ct=Bse+ut[Q5];if(S[Ct]?rt=!1:S[Ct]=!0,rt&&(je<=L&&(Ce.queue[ao](ut),T++,Me(je===1?"error":"warn",ut)),T===q)){var Mt="Internal events throttle limit per PageView reached for this app.",Yt=new fk(23,Mt,!1);Ce.queue[ao](Yt),je===1?Ce.errorToConsole(Mt):Ce[Xv](Mt)}}}s(Te,"_logInternalMessage");function Le(je){return _h(cf(je,UU,Ce).cfg,function(ut){var rt=ut.cfg;D=rt[sU],L=rt.loggingLevelTelemetry,q=rt.maxMessageLimit,Z=rt.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ke(){return T>=q}s(Ke,"_areInternalMessagesThrottled");function Me(je,ut){var rt=OU(v||{});rt&&rt[Rp]&&rt[Rp](je,ut)}s(Me,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function P8(A){return A||new qw}s(P8,"_getLogger");function Rr(A,v,T,S,D,L){L===void 0&&(L=!1),P8(A)[o1](v,T,S,D,L)}s(Rr,"_throwInternal");function pk(A,v){P8(A)[Xv](v)}s(pk,"_warnToConsole");var Hw,MA,qU="toGMTString",HU="toUTCString",mk="cookie",Sh="expires",WU="isCookieUseDisabled",hk="disableCookiesUsage",GU="_ckMgr",gk=null,Bx=null,Ak=null,Lp,jU={},VU={},$U=(Hw={cookieCfg:wse((MA={},MA[X5]={fb:"cookieDomain",dfVal:ek},MA.path={fb:"cookiePath",dfVal:ek},MA.enabled=nf,MA.ignoreCookies=nf,MA.blockedCookies=nf,MA)),cookieDomain:nf,cookiePath:nf},Hw[hk]=nf,Hw);function B8(){!Lp&&(Lp=Wn(function(){return Lv()}))}s(B8,"_getDoc");function Ww(A){return A?A.isEnabled():!0}s(Ww,"_isMgrEnabled");function D8(A,v){return v&&A&&tt(A.ignoreCookies)?fd(A.ignoreCookies,v)!==-1:!1}s(D8,"_isIgnoredCookie");function Dse(A,v){return v&&A&&tt(A.blockedCookies)&&fd(A.blockedCookies,v)!==-1?!0:D8(A,v)}s(Dse,"_isBlockedCookie");function N8(A,v){var T=v[_p];if(re(T)){var S=void 0;Q(A[WU])||(S=!A[WU]),Q(A[hk])||(S=!A[hk]),T=S}return T}s(N8,"_isCfgEnabled");function Nse(A,v){var T,S,D,L,q,Z,ae,Ce;A=cf(A||VU,null,v).cfg,L=_h(A,function(Le){Le.setDf(Le.cfg,$U),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Z5]||"/",D=T[X5],q=N8(A,T)!==!1,Z=T.getCookie||Lse,ae=T.setCookie||Dx,Ce=T.delCookie||Dx},v);var Te={isEnabled:s(function(){var Le=N8(A,T)!==!1&&q&&zU(v),Ke=VU[GU];return Le&&Ke&&Te!==Ke&&(Le=Ww(Ke)),Le},"isEnabled"),setEnabled:s(function(Le){q=Le!==!1,T[_p]=Le},"setEnabled"),set:s(function(Le,Ke,Me,je,ut){var rt=!1;if(Ww(Te)&&!Dse(T,Le)){var Ct={},Mt=so(Ke||_i),Yt=Ah(Mt,";");if(Yt!==-1&&(Mt=so(O(Ke,Yt)),Ct=L8(ge(Ke,Yt+1))),PA(Ct,X5,je||D,le,Q),!re(Me)){var yr=f0();if(Q(Ct[Sh])){var Kn=yA(),Di=Kn+Me*1e3;if(Di>0){var Ni=new Date;Ni.setTime(Di),PA(Ct,Sh,YU(Ni,yr?qU:HU)||YU(Ni,yr?qU:HU)||_i,le)}}yr||PA(Ct,"max-age",_i+Me,null,Q)}var Bo=Cx();Bo&&Bo.protocol==="https:"&&(PA(Ct,"secure",null,null,Q),Bx===null&&(Bx=!Mse((mA()||{})[q5])),Bx&&PA(Ct,"SameSite","None",null,Q)),PA(Ct,Z5,ut||S,null,Q),ae(Le,KU(Mt,Ct)),rt=!0}return rt},"set"),get:s(function(Le){var Ke=_i;return Ww(Te)&&!D8(T,Le)&&(Ke=Z(Le)),Ke},"get"),del:s(function(Le,Ke){var Me=!1;return Ww(Te)&&(Me=Te.purge(Le,Ke)),Me},"del"),purge:s(function(Le,Ke){var Me,je=!1;if(zU(v)){var ut=(Me={},Me[Z5]=Ke||"/",Me[Sh]="Thu, 01 Jan 1970 00:00:01 GMT",Me);f0()||(ut["max-age"]="0"),Ce(Le,KU(_i,ut)),je=!0}return je},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[GU]=Te,Te}s(Nse,"createCookieMgr");function zU(A){if(gk===null){gk=!1,!Lp&&B8();try{var v=Lp.v||{};gk=v[mk]!==void 0}catch(T){Rr(A,2,68,"Cannot access document.cookie - "+jc(T),{exception:Ft(T)})}}return gk}s(zU,"areCookiesSupported");function L8(A){var v={};if(A&&A[ii]){var T=so(A)[SA](";");jr(T,function(S){if(S=so(S||_i),S){var D=Ah(S,"=");D===-1?v[S]=null:v[so(O(S,D))]=so(ge(S,D+1))}})}return v}s(L8,"_extractParts");function YU(A,v){return Qe(A[v])?A[v]():null}s(YU,"_formatDate");function KU(A,v){var T=A||_i;return oe(v,function(S,D){T+="; "+S+(re(D)?_i:"="+D)}),T}s(KU,"_formatCookieValue");function Lse(A){var v=_i;if(!Lp&&B8(),Lp.v){var T=Lp.v[mk]||_i;Ak!==T&&(jU=L8(T),Ak=T),v=so(jU[A]||_i)}return v}s(Lse,"_getCookieValue");function Dx(A,v){!Lp&&B8(),Lp.v&&(Lp.v[mk]=A+"="+v)}s(Dx,"_setCookieValue");function Mse(A){return he(A)?!!(pl(A,"CPU iPhone OS 12")||pl(A,"iPad; CPU OS 12")||pl(A,"Macintosh; Intel Mac OS X 10_14")&&pl(A,"Version/")&&pl(A,"Safari")||pl(A,"Macintosh; Intel Mac OS X 10_14")&&eU(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||pl(A,"Chrome/5")||pl(A,"Chrome/6")||pl(A,"UnrealEngine")&&!pl(A,"Chrome")||pl(A,"UCBrowser/12")||pl(A,"UCBrowser/11")):!1}s(Mse,"uaDisallowsSameSiteNone");var M8={perfEvtsSendAll:!1};function Fse(A){A.h=null;var v=A.cb;A.cb=[],jr(v,function(T){Y(T.fn,[T.arg])})}s(Fse,"_runScheduledListeners");function FA(A,v,T,S){jr(A,function(D){D&&D[v]&&(T?(T.cb[ao]({fn:S,arg:D}),T.h=T.h||vA(Fse,0,T)):Y(S,[D]))})}s(FA,"_runListeners");var Ose=function(){function A(v){this.listeners=[];var T,S,D=[],L={h:null,cb:[]},q=cf(v,M8);S=q[Eh](function(Z){T=!!Z.cfg.perfEvtsSendAll}),jl(A,this,function(Z){Ye(Z,"listeners",{g:s(function(){return D},"g")}),Z[F5]=function(ae){D[ao](ae)},Z[Tw]=function(ae){for(var Ce=fd(D,ae);Ce>-1;)D[Zv](Ce,1),Ce=fd(D,ae)},Z[dx]=function(ae){FA(D,dx,L,function(Ce){Ce[dx](ae)})},Z[fx]=function(ae,Ce){FA(D,fx,L,function(Te){Te[fx](ae,Ce)})},Z[K5]=function(ae,Ce){FA(D,K5,Ce?L:null,function(Te){Te[K5](ae,Ce)})},Z[f1]=function(ae){ae&&(T||!ae[c8]())&&FA(D,f1,null,function(Ce){ae.isAsync?vA(function(){return Ce[f1](ae)},0):Ce[f1](ae)})},Z[f8]=function(ae){ae&&ae[ii]&&FA(D,f8,L,function(Ce){Ce[f8](ae)})},Z[p8]=function(ae){ae&&ae[ox]&&FA(D,p8,L,function(Ce){Ce[p8](ae)})},Z[J5]=function(ae,Ce){if(ae>0){var Te=Ce||0;FA(D,J5,L,function(Le){Le[J5](ae,Te)})}},Z[s1]=function(ae){var Ce=s(function(){S&&S.rm(),S=null,D=[],L.h&&L.h[ex](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(FA(D,"unload",null,function(Le){var Ke=Le[s1](ae);Ke&&(Te||(Te=[]),Te[ao](Ke))}),Te)return cx(function(Le){return rf(d8(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),Nx="ctx",F8="ParentContextKey",Gw="ChildrenContextKey",Qse=null,yk=function(){function A(v,T,S){var D=this;if(D.start=yA(),D[wA]=v,D.isAsync=S,D[c8]=function(){return!1},Qe(T)){var L;Ye(D,"payload",{g:s(function(){return!L&&Qe(T)&&(L=T(),T=null),L},"g")})}D[kA]=function(q){return q?q===A[F8]||q===A[Gw]?D[q]:(D[Nx]||{})[q]:null},D[u0]=function(q,Z){if(q)if(q===A[F8])D[q]||(D[c8]=function(){return!0}),D[q]=Z;else if(q===A[Gw])D[q]=Z;else{var ae=D[Nx]=D[Nx]||{};ae[q]=Z}},D.complete=function(){var q=0,Z=D[kA](A[Gw]);if(tt(Z))for(var ae=0;ae<Z[ii];ae++){var Ce=Z[ae];Ce&&(q+=Ce.time)}D.time=yA()-D.start,D.exTime=D.time-q,D.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),Use=function(){function A(v){this.ctx={},jl(A,this,function(T){T.create=function(S,D,L){return new yk(S,D,L)},T.fire=function(S){S&&(S.complete(),v&&Qe(v[f1])&&v[f1](S))},T[u0]=function(S,D){if(S){var L=T[Nx]=T[Nx]||{};L[S]=D}},T[kA]=function(S){return(T[Nx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),Mp="CoreUtils.doPerf";function Lx(A,v,T,S,D){if(A){var L=A;if(L[Sw]&&(L=L[Sw]()),L){var q=void 0,Z=L[kA](Mp);try{if(q=L.create(v(),S,D),q){if(Z&&q[u0]&&(q[u0](yk[F8],Z),Z[kA]&&Z[u0])){var ae=Z[kA](yk[Gw]);ae||(ae=[],Z[u0](yk[Gw],ae)),ae[ao](q)}return L[u0](Mp,q),T(q)}}catch(Ce){q&&q[u0]&&q[u0]("exception",Ce)}finally{q&&L.fire(q),L[u0](Mp,Z)}}}return T()}s(Lx,"doPerf");function Ya(){return Qse}s(Ya,"getGblPerfMgr");var Ck="00000000000000000000000000000000",Mx="0000000000000000";function Ek(A,v,T){return A&&A[ii]===v&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(Ek,"_isValid");function OA(A){return Ek(A,32,Ck)}s(OA,"isValidTraceId");function g1(A){return Ek(A,16,Mx)}s(g1,"isValidSpanId");var jw=SU("plugin");function QA(A){return jw.get(A,"state",{},!0)}s(QA,"_getPluginState");function O8(A,v){for(var T=[],S=null,D=A[kp](),L;D;){var q=D[rx]();if(q){S&&S[_A]&&q[of]&&S[_A](q),L=QA(q);var Z=!!L[wp];q[wp]&&(Z=q[wp]()),Z||T[ao](q),S=q,D=D[kp]()}}jr(T,function(ae){var Ce=A[za]();ae[Iw](A.getCfg(),Ce,v,A[kp]()),L=QA(ae),!ae[za]&&!L[za]&&(L[za]=Ce),L[wp]=!0,delete L[Sp]})}s(O8,"initializePlugins");function Q8(A){return A.sort(function(v,T){var S=0;if(T){var D=T[of];v[of]?S=D?v[ux]-T[ux]:1:D&&(S=-1)}else S=v?1:-1;return S})}s(Q8,"sortPlugins");function qse(A){var v={};return{getName:s(function(){return v[wA]},"getName"),setName:s(function(T){A&&A.setName(T),v[wA]=T},"setName"),getTraceId:s(function(){return v.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),OA(T)&&(v.traceId=T)},"setTraceId"),getSpanId:s(function(){return v.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),g1(T)&&(v.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return v[cU]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),v[cU]=T},"setTraceFlags")}}s(qse,"createDistributedTraceContext");var Hse="TelemetryPluginChain",JU="_hasRun",U8="_getTelCtx",XU=0;function Wse(A,v,T){for(;A;){if(A[rx]()===T)return A;A=A[kp]()}return B([T],v.config||{},v)}s(Wse,"_getNextProxyStart");function q8(A,v,T,S){var D=null,L=[];v||(v=cf({},null,T[$a])),S!==null&&(D=S?Wse(A,T,S):A);var q={_next:ae,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return Uw(T,v.cfg)},"diagLog"),getCfg:s(function(){return v.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!D},"hasNext"),getNext:s(function(){return D},"getNext"),setNext:s(function(Me){D=Me},"setNext"),iterate:Ke,onComplete:Z}};function Z(Me,je){for(var ut=[],rt=2;rt<arguments.length;rt++)ut[rt-2]=arguments[rt];Me&&L[ao]({func:Me,self:Q(je)?q.ctx:je,args:ut})}s(Z,"_addOnComplete");function ae(){var Me=D;if(D=Me?Me[kp]():null,!Me){var je=L;je&&je[ii]>0&&(jr(je,function(ut){try{ut.func.call(ut.self,ut.args)}catch(rt){Rr(T[$a],2,73,"Unexpected Exception during onComplete - "+Ft(rt))}}),L=[])}return Me}s(ae,"_moveNext");function Ce(Me,je){var ut=null,rt=v.cfg;if(rt&&Me){var Ct=rt[d1];!Ct&&je&&(Ct={}),rt[d1]=Ct,Ct=v.ref(rt,d1),Ct&&(ut=Ct[Me],!ut&&je&&(ut={}),Ct[Me]=ut,ut=v.ref(Ct,Me))}return ut}s(Ce,"_getExtCfg");function Te(Me,je){var ut=Ce(Me,!0);return je&&oe(je,function(rt,Ct){if(re(ut[rt])){var Mt=v.cfg[rt];(Mt||!re(Mt))&&(ut[rt]=Mt)}S8(v,ut,rt,Ct)}),v.setDf(ut,je)}s(Te,"_resolveExtCfg");function Le(Me,je,ut){ut===void 0&&(ut=!1);var rt,Ct=Ce(Me,!1),Mt=v.cfg;return Ct&&(Ct[je]||!re(Ct[je]))?rt=Ct[je]:(Mt[je]||!re(Mt[je]))&&(rt=Mt[je]),rt||!re(rt)?rt:ut}s(Le,"_getConfig");function Ke(Me){for(var je;je=q._next();){var ut=je[rx]();ut&&Me(ut)}}return s(Ke,"_iterateChain"),q}s(q8,"_createInternalContext");function Fx(A,v,T,S){var D=cf(v),L=q8(A,D,T,S),q=L.ctx;function Z(Ce){var Te=L._next();return Te&&Te[of](Ce,q),!Te}s(Z,"_processNext");function ae(Ce,Te){return Ce===void 0&&(Ce=null),tt(Ce)&&(Ce=B(Ce,D.cfg,T,Te)),Fx(Ce||q[kp](),D.cfg,T,Te)}return s(ae,"_createNew"),q[fl]=Z,q[a1]=ae,q}s(Fx,"createProcessTelemetryContext");function w(A,v,T){var S=cf(v.config),D=q8(A,S,v,T),L=D.ctx;function q(ae){var Ce=D._next();return Ce&&Ce[s1](L,ae),!Ce}s(q,"_processNext");function Z(ae,Ce){return ae===void 0&&(ae=null),tt(ae)&&(ae=B(ae,S.cfg,v,Ce)),w(ae||L[kp](),v,Ce)}return s(Z,"_createNew"),L[fl]=q,L[a1]=Z,L}s(w,"createProcessTelemetryUnloadContext");function R(A,v,T){var S=cf(v.config),D=q8(A,S,v,T),L=D.ctx;function q(ae){return L.iterate(function(Ce){Qe(Ce[vh])&&Ce[vh](L,ae)})}s(q,"_processNext");function Z(ae,Ce){return ae===void 0&&(ae=null),tt(ae)&&(ae=B(ae,S.cfg,v,Ce)),R(ae||L[kp](),v,Ce)}return s(Z,"_createNew"),L[fl]=q,L[a1]=Z,L}s(R,"createProcessTelemetryUpdateContext");function B(A,v,T,S){var D=null,L=!S;if(tt(A)&&A[ii]>0){var q=null;jr(A,function(Z){if(!L&&S===Z&&(L=!0),L&&Z&&Qe(Z[of])){var ae=F(Z,v,T);D||(D=ae),q&&q._setNext(ae),q=ae}})}return S&&!D?B([S],v,T):D}s(B,"createTelemetryProxyChain");function F(A,v,T){var S=null,D=Qe(A[of]),L=Qe(A[_A]),q;A?q=A[TA]+"-"+A[ux]+"-"+XU++:q="Unknown-0-"+XU++;var Z={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ke,_id:q,_setNext:s(function(Me){S=Me},"_setNext")};function ae(){var Me;return A&&Qe(A[U8])&&(Me=A[U8]()),Me||(Me=Fx(Z,v,T)),Me}s(ae,"_getTelCtx");function Ce(Me,je,ut,rt,Ct){var Mt=!1,Yt=A?A[TA]:Hse,yr=Me[JU];return yr||(yr=Me[JU]={}),Me.setNext(S),A&&Lx(Me[za](),function(){return Yt+":"+ut},function(){yr[q]=!0;try{var Kn=S?S._id:_i;Kn&&(yr[Kn]=!1),Mt=je(Me)}catch(Ni){var Di=S?yr[S._id]:!0;Di&&(Mt=!0),(!S||!Di)&&Rr(Me[Rp](),1,73,"Plugin ["+Yt+"] failed during "+ut+" - "+Ft(Ni)+", run flags: "+Ft(yr))}},rt,Ct),Mt}s(Ce,"_processChain");function Te(Me,je){je=je||ae();function ut(rt){if(!A||!D)return!1;var Ct=QA(A);return Ct[Sp]||Ct[Y5]?!1:(L&&A[_A](S),A[of](Me,rt),!0)}s(ut,"_callProcessTelemetry"),Ce(je,ut,"processTelemetry",function(){return{item:Me}},!Me.sync)||je[fl](Me)}s(Te,"_processTelemetry");function Le(Me,je){function ut(){var rt=!1;if(A){var Ct=QA(A),Mt=A[za]||Ct[za];A&&(!Mt||Mt===Me.core())&&!Ct[Sp]&&(Ct[za]=null,Ct[Sp]=!0,Ct[wp]=!1,A[Sp]&&A[Sp](Me,je)===!0&&(rt=!0))}return rt}s(ut,"_callTeardown"),Ce(Me,ut,"unload",function(){},je.isAsync)||Me[fl](je)}s(Le,"_unloadPlugin");function Ke(Me,je){function ut(){var rt=!1;if(A){var Ct=QA(A),Mt=A[za]||Ct[za];A&&(!Mt||Mt===Me.core())&&!Ct[Sp]&&A[vh]&&A[vh](Me,je)===!0&&(rt=!0)}return rt}s(ut,"_callUpdate"),Ce(Me,ut,"update",function(){},!1)||Me[fl](je)}return s(Ke,"_updatePlugin"),Vt(Z)}s(F,"createTelemetryPluginProxy");function se(){var A=[];function v(S){S&&A[ao](S)}s(v,"_addHandler");function T(S,D){jr(A,function(L){try{L(S,D)}catch(q){Rr(S[Rp](),2,73,"Unexpected error calling unload handler - "+Ft(q))}}),A=[]}return s(T,"_runHandlers"),{add:v,run:T}}s(se,"createUnloadHandlerContainer");function be(){var A=[];function v(S){var D=A;A=[],jr(D,function(L){try{(L.rm||L.remove).call(L)}catch(q){Rr(S,2,73,"Unloading:"+Ft(q))}})}s(v,"_doUnload");function T(S){S&&Fv(A,S)}return s(T,"_addHook"),{run:v,add:T}}s(be,"createUnloadHookContainer");var we,Oe="getPlugin",Ze=(we={},we[d1]={isVal:ek,v:{}},we),gt=function(){function A(){var v=this,T,S,D,L,q;Ce(),jl(A,v,function(Te){Te[Iw]=function(Le,Ke,Me,je){ae(Le,Ke,je),T=!0},Te[Sp]=function(Le,Ke){var Me=Te[za];if(!Me||Le&&Me!==Le[za]())return;var je,ut=!1,rt=Le||w(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0,isAsync:!1};function Mt(){ut||(ut=!0,L.run(rt,Ke),q.run(rt[Rp]()),je===!0&&rt[fl](Ct),Ce())}return s(Mt,"_unloadCallback"),!Te[U5]||Te[U5](rt,Ct,Mt)!==!0?Mt():je=!0,je},Te[vh]=function(Le,Ke){var Me=Te[za];if(!Me||Le&&Me!==Le[za]())return;var je,ut=!1,rt=Le||R(null,Me,D&&D[Oe]?D[Oe]():D),Ct=Ke||{reason:0};function Mt(){ut||(ut=!0,ae(rt.getCfg(),rt.core(),rt[kp]()))}return s(Mt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(rt,Ct,Mt)!==!0?Mt():je=!0,je},kw(Te,"_addUnloadCb",function(){return L},"add"),kw(Te,"_addHook",function(){return q},"add"),Ye(Te,"_unloadHooks",{g:s(function(){return q},"g")})}),v[Rp]=function(Te){return Z(Te)[Rp]()},v[wp]=function(){return T},v.setInitialized=function(Te){T=Te},v[_A]=function(Te){D=Te},v[fl]=function(Te,Le){Le?Le[fl](Te):D&&Qe(D[of])&&D[of](Te,null)},v._getTelCtx=Z;function Z(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ke=S||Fx(null,{},v[za]);D&&D[Oe]?Le=Ke[a1](null,D[Oe]):Le=Ke[a1](null,D)}return Le}s(Z,"_getTelCtx");function ae(Te,Le,Ke){cf(Te,Ze,Uw(Le)),!Ke&&Le&&(Ke=Le[nx]()[kp]());var Me=D;D&&D[Oe]&&(Me=D[Oe]()),v[za]=Le,S=Fx(Ke,Te,Le,Me)}s(ae,"_setDefaults");function Ce(){T=!1,v[za]=null,S=null,D=null,q=be(),L=se()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function sr(A,v,T){var S={id:v,fn:T};Fv(A,S);var D={remove:s(function(){jr(A,function(L,q){if(L.id===S.id)return A[Zv](q,1),-1})},"remove")};return D}s(sr,"_addInitializer");function Rn(A,v,T){for(var S=!1,D=A[ii],L=0;L<D;++L){var q=A[L];if(q)try{if(q.fn[M5](null,[v])===!1){S=!0;break}}catch(Z){Rr(T,2,64,"Telemetry initializer failed: "+jc(Z),{exception:Ft(Z)},!0)}}return!S}s(Rn,"_runInitializers");var Yn=function(A){bw(v,A);function v(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,D;L(),jl(v,T,function(q,Z){q.addTelemetryInitializer=function(ae){return sr(D,S++,ae)},q[of]=function(ae,Ce){Rn(D,ae,Ce?Ce[Rp]():q[Rp]())&&q[fl](ae,Ce)},q[U5]=function(){L()}});function L(){S=0,D=[]}return s(L,"_initDefaults"),T}return s(v,"TelemetryInitializerPlugin"),v.__ieDyn=1,v}(gt),fr,wr="Plugins must provide initialize method",Gn="_notificationManager",kn="SDK is still unloading...",Si="SDK is not initialized",bo=100,ji=5e4,Ac=Zt((fr={cookieCfg:{}},fr[lx]={rdOnly:!0,ref:!0,v:[]},fr[Ih]={rdOnly:!0,ref:!0,v:[]},fr[d1]={ref:!0,v:{}},fr[d0]=nf,fr.loggingLevelConsole=0,fr.diagnosticLogInterval=nf,fr));function Ox(A,v){return new Use(v)}s(Ox,"_createPerfManager");function Vw(A,v,T){var S=[],D=[],L={};return jr(T,function(q){(re(q)||re(q[Iw]))&&Yr(wr);var Z=q[ux],ae=q[TA];q&&Z&&(re(L[Z])?L[Z]=ae:pk(A,"Two extensions have same priority #"+Z+" - "+L[Z]+", "+ae)),!Z||Z<v?S[ao](q):D[ao](q)}),{core:S,channels:D}}s(Vw,"_validateExtensions");function H8(A,v){var T=!1;return jr(v,function(S){if(S===A)return T=!0,-1}),T}s(H8,"_isPluginPresent");function vk(A,v,T,S){T&&oe(T,function(D,L){S&&pd(L)&&pd(v[D])&&vk(A,v[D],L,S),S&&pd(L)&&pd(v[D])?vk(A,v[D],L,S):A.set(v,D,L)})}s(vk,"_deepMergeConfig");function ZU(A,v){var T=null,S=-1;return jr(A,function(D,L){if(D.w===v)return T=D,S=L,-1}),{i:S,l:T}}s(ZU,"_findWatcher");function Gse(A,v){var T=ZU(A,v).l;return T||(T={w:v,rm:s(function(){var S=ZU(A,v);S.i!==-1&&A[Zv](S.i,1)},"rm")},A[ao](T)),T}s(Gse,"_addDelayedCfgListener");function W8(A,v,T){jr(v,function(S){var D=_h(A,S.w,T);delete S.w,S.rm=function(){D.rm()}})}s(W8,"_registerDelayedCfgListener");function eq(A,v,T,S){return v.add(A[Eh](function(D){var L=D.cfg.disableDbgExt;L===!0&&S&&(T[Tw](S),S=null),T&&!S&&L!==!0&&(S=Rse(D.cfg),T[F5](S))})),S}s(eq,"_initDebugListener");function tq(A){return Ye({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(tq,"_createUnloadHook");var _t=function(){function A(){var v,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,yr,Kn,Di,Ni,Bo,An,Hr,Li,ea,ss,Ot,Wr,Io;jl(A,this,function(wt){ct(),wt._getDbgPlgTargets=function(){return[Ni,D]},wt[wp]=function(){return T},wt.activeStatus=function(){return Hr},wt._setPendingStatus=function(){Hr=3},wt[Iw]=function(pt,hr,Fn,Lr){Me&&Yr(kn),wt[wp]()&&Yr("Core cannot be initialized more than once"),v=cf(pt,Ac,Fn||wt[$a],!1),pt=v.cfg,zl(v[Eh](function(Wo){var ks=Wo.cfg,Bu=Hr===3;if(!Bu){ea=ks.initInMemoMaxSize||bo;var lf=ks.instrumentationKey,Ph=ks.endpointUrl;if(re(lf)){Kn=null,Hr=IA.INACTIVE;var Bh="Please provide instrumentation key";T?(Rr(S,1,100,Bh),Ca()):Yr(Bh);return}var Nk=[];if(Tt(lf)?(Nk[ao](lf),Kn=null):Kn=lf,Tt(Ph)?(Nk[ao](Ph),Li=null):Li=Ph,Nk[ii]){ss=!1,Hr=3;var l6=ek(ks.initTimeOut)?ks.initTimeOut:ji,xae=md(Nk);vA(function(){ss||Pn()},l6),rf(xae,function(Yx){try{if(ss)return;if(!Yx.rejected){var Kx=Yx[tx];if(Kx&&Kx[ii]){var Tq=Kx[0];if(Kn=Tq&&Tq[tx],Kx[ii]>1){var wq=Kx[1];Li=wq&&wq[tx]}}Kn&&(pt.instrumentationKey=Kn,pt.endpointUrl=Li)}Pn()}catch{ss||Pn()}})}else Pn();var Lk=Wo.ref(Wo.cfg,d1);oe(Lk,function(Yx){Wo.ref(Lk,Yx)})}})),L=Lr,Yt=eq(v,Mt,L&&wt[l0](),Yt),$x(),wt[$a]=Fn;var On=pt[lx];if(Te=[],Te[ao].apply(Te,iU(iU([],hr,!1),On)),Le=pt[Ih],Ea(null),(!Ke||Ke[ii]===0)&&Yr("No "+Ih+" available"),Le&&Le[ii]>1){var Qo=wt[rx]("TeeChannelController");(!Qo||!Qo.plugin)&&Rr(S,1,28,"TeeChannel required")}W8(pt,Di,S),Di=null,T=!0,Hr===IA.ACTIVE&&Ca()},wt.getChannels=function(){var pt=[];return Ke&&jr(Ke,function(hr){pt[ao](hr)}),Vt(pt)},wt.track=function(pt){Lx(wt[Sw](),function(){return"AppInsightsCore:track"},function(){pt===null&&(ta(pt),Yr("Invalid telemetry item")),!pt[wA]&&re(pt[wA])&&(ta(pt),Yr("telemetry name required")),pt.iKey=pt.iKey||Kn,pt.time=pt.time||Rw(new Date),pt.ver=pt.ver||"4.0",!Me&&wt[wp]()&&Hr===IA.ACTIVE?Ec()[fl](pt):Hr!==IA.INACTIVE&&D[ii]<=ea&&D[ao](pt)},function(){return{item:pt}},!pt.sync)},wt[nx]=Ec,wt[l0]=function(){return L||(L=new Ose(v.cfg),wt[Gn]=L),L},wt[F5]=function(pt){wt.getNotifyMgr()[F5](pt)},wt[Tw]=function(pt){L&&L[Tw](pt)},wt.getCookieMgr=function(){return ae||(ae=Nse(v.cfg,wt[$a])),ae},wt.setCookieMgr=function(pt){ae!==pt&&(Rx(ae,!1),ae=pt)},wt[Sw]=function(){return q||Z||Ya()},wt.setPerfMgr=function(pt){q=pt},wt.eventCnt=function(){return D[ii]},wt.releaseQueue=function(){if(T&&D[ii]>0){var pt=D;D=[],Hr===2?jr(pt,function(hr){hr.iKey=hr.iKey||Kn,Ec()[fl](hr)}):Rr(S,2,20,"core init status is not active")}},wt.pollInternalLogs=function(pt){return ut=pt||null,Io=!1,Ot&&Ot[ex](),Do(!0)};function Pn(){ss=!0,re(Kn)?(Hr=IA.INACTIVE,Rr(S,1,112,"ikey can't be resolved from promises")):Hr=IA.ACTIVE,Ca()}s(Pn,"_setStatus");function Ca(){T&&(wt.releaseQueue(),wt.pollInternalLogs())}s(Ca,"_releaseQueues");function Do(pt){if((!Ot||!Ot[_p])&&!Io){var hr=pt||S&&S.queue[ii]>0;hr&&(Wr||(Wr=!0,zl(v[Eh](function(Fn){var Lr=Fn.cfg.diagnosticLogInterval;(!Lr||!(Lr>0))&&(Lr=1e4);var On=!1;Ot&&(On=Ot[_p],Ot[ex]()),Ot=R5(Vx,Lr),Ot.unref(),Ot[_p]=On}))),Ot[_p]=!0)}return Ot}s(Do,"_startLogPoller"),wt[oU]=function(){Io=!0,Ot&&Ot[ex](),Vx()},h8(wt,function(){return je},["addTelemetryInitializer"]),wt[s1]=function(pt,hr,Fn){pt===void 0&&(pt=!0),T||Yr(Si),Me&&Yr(kn);var Lr={reason:50,isAsync:pt,flushComplete:!1},On;pt&&!hr&&(On=cx(function(ks){hr=ks}));var Qo=w(Op(),wt);Qo[O5](function(){Mt.run(wt[$a]),MU([ae,L,S],pt,function(){ct(),hr&&hr(Lr)})},wt);function Wo(ks){Lr.flushComplete=ks,Me=!0,Ct.run(Qo,Lr),wt[oU](),Qo[fl](Lr)}return s(Wo,"_doUnload"),Vx(),Rh(pt,Wo,6,Fn),On},wt[rx]=Al,wt.addPlugin=function(pt,hr,Fn,Lr){if(!pt){Lr&&Lr(!1),zx(wr);return}var On=Al(pt[TA]);if(On&&!hr){Lr&&Lr(!1),zx("Plugin ["+pt[TA]+"] is already loaded!");return}var Qo={reason:16};function Wo(lf){Te[ao](pt),Qo.added=[pt],Ea(Qo),Lr&&Lr(!0)}if(s(Wo,"_addPlugin"),On){var ks=[On.plugin],Bu={reason:2,isAsync:!!Fn};Ad(ks,Bu,function(lf){lf?(Qo.removed=ks,Qo.reason|=32,Wo()):Lr&&Lr(!1)})}else Wo()},wt.updateCfg=function(pt,hr){hr===void 0&&(hr=!0);var Fn;if(wt[wp]()){Fn={reason:1,cfg:v.cfg,oldCfg:I5({},v.cfg),newConfig:I5({},pt),merge:hr},pt=Fn.newConfig;var Lr=v.cfg;pt[lx]=Lr[lx],pt[Ih]=Lr[Ih]}v._block(function(On){var Qo=On.cfg;vk(On,Qo,pt,hr),hr||oe(Qo,function(Wo){nt(pt,Wo)||On.set(Qo,Wo,nf)}),On.setDf(Qo,Ac)},!0),v.notify(),Fn&&kh(Fn)},wt.evtNamespace=function(){return rt},wt.flush=Rh,wt.getTraceCtx=function(pt){return yr||(yr=qse()),yr},wt.setTraceCtx=function(pt){yr=pt||null},wt.addUnloadHook=zl,kw(wt,"addUnloadCb",function(){return Ct},"add"),wt.onCfgChange=function(pt){var hr;return T?hr=_h(v.cfg,pt,wt[$a]):hr=Gse(Di,pt),tq(hr)},wt.getWParam=function(){return pA()||v.cfg.enableWParam?0:-1};function gl(){var pt={};Bo=[];var hr=s(function(Fn){Fn&&jr(Fn,function(Lr){if(Lr[TA]&&Lr[ix]&&!pt[Lr.identifier]){var On=Lr[TA]+"="+Lr[ix];Bo[ao](On),pt[Lr.identifier]=Lr}})},"_addPluginVersions");hr(Ke),Le&&jr(Le,function(Fn){hr(Fn)}),hr(Te)}s(gl,"_setPluginVersions");function ct(){T=!1,v=cf({},Ac,wt[$a]),v.cfg[sU]=1,Ye(wt,"config",{g:s(function(){return v.cfg},"g"),s:s(function(hr){wt.updateCfg(hr,!1)},"s")}),Ye(wt,"pluginVersionStringArr",{g:s(function(){return Bo||gl(),Bo},"g")}),Ye(wt,"pluginVersionString",{g:s(function(){return An||(Bo||gl(),An=Bo.join(";")),An||_i},"g")}),Ye(wt,"logger",{g:s(function(){return S||(S=new qw(v.cfg),v[$a]=S),S},"g"),s:s(function(hr){v[$a]=hr,S!==hr&&(Rx(S,!1),S=hr)},"s")}),wt[$a]=new qw(v.cfg),Ni=[];var pt=wt.config[lx]||[];pt.splice(0,pt[ii]),Fv(pt,Ni),je=new Yn,D=[],Rx(L,!1),L=null,q=null,Z=null,Rx(ae,!1),ae=null,Ce=null,Te=[],Le=null,Ke=null,Me=!1,ut=null,rt=wh("AIBaseCore",!0),Ct=se(),yr=null,Kn=null,Mt=be(),Di=[],An=null,Bo=null,Io=!1,Ot=null,Wr=!1,Hr=0,Li=null,ea=null,ss=!1}s(ct,"_initDefaults");function Ec(){var pt=Fx(Op(),v.cfg,wt);return pt[O5](Do),pt}s(Ec,"_createTelCtx");function Ea(pt){var hr=Vw(wt[$a],Ise,Te);Ce=null,An=null,Bo=null,Ke=(Le||[])[0]||[],Ke=Q8(Fv(Ke,hr[Ih]));var Fn=Fv(Q8(hr[za]),Ke);Ni=Vt(Fn);var Lr=wt.config[lx]||[];Lr.splice(0,Lr[ii]),Fv(Lr,Ni);var On=Ec();Ke&&Ke[ii]>0&&O8(On[a1](Ke),Fn),O8(On,Fn),pt&&kh(pt)}s(Ea,"_initPluginChain");function Al(pt){var hr=null,Fn=null,Lr=[];return jr(Ni,function(On){if(On[TA]===pt&&On!==je)return Fn=On,-1;On.getChannel&&Lr[ao](On)}),!Fn&&Lr[ii]>0&&jr(Lr,function(On){if(Fn=On.getChannel(pt),!Fn)return-1}),Fn&&(hr={plugin:Fn,setEnabled:s(function(On){QA(Fn)[Y5]=!On},"setEnabled"),isEnabled:s(function(){var On=QA(Fn);return!On[Sp]&&!On[Y5]},"isEnabled"),remove:s(function(On,Qo){On===void 0&&(On=!0);var Wo=[Fn],ks={reason:1,isAsync:On};Ad(Wo,ks,function(Bu){Bu&&Ea({reason:32,removed:Wo}),Qo&&Qo(Bu)})},"remove")}),hr}s(Al,"_getPlugin");function Op(){if(!Ce){var pt=(Ni||[]).slice();fd(pt,je)===-1&&pt[ao](je),Ce=B(Q8(pt),v.cfg,wt)}return Ce}s(Op,"_getPluginChain");function Ad(pt,hr,Fn){if(pt&&pt[ii]>0){var Lr=B(pt,v.cfg,wt),On=w(Lr,wt);On[O5](function(){var Qo=!1,Wo=[];jr(Te,function(Bu,lf){H8(Bu,pt)?Qo=!0:Wo[ao](Bu)}),Te=Wo,An=null,Bo=null;var ks=[];Le&&(jr(Le,function(Bu,lf){var Ph=[];jr(Bu,function(Bh){H8(Bh,pt)?Qo=!0:Ph[ao](Bh)}),ks[ao](Ph)}),Le=ks),Fn&&Fn(Qo),Do()}),On[fl](hr)}else Fn(!1)}s(Ad,"_removePlugins");function Vx(){if(S&&S.queue){var pt=S.queue.slice(0);S.queue[ii]=0,jr(pt,function(hr){var Fn={name:ut||"InternalMessageId: "+hr[Q5],iKey:Kn,time:Rw(new Date),baseType:fk.dataType,baseData:{message:hr[c1]}};wt.track(Fn)})}}s(Vx,"_flushInternalLogs");function Rh(pt,hr,Fn,Lr){var On=1,Qo=!1,Wo=null;Lr=Lr||5e3;function ks(){On--,Qo&&On===0&&(Wo&&Wo[ex](),Wo=null,hr&&hr(Qo),hr=null)}if(s(ks,"doCallback"),Ke&&Ke[ii]>0){var Bu=Ec()[a1](Ke);Bu.iterate(function(lf){if(lf.flush){On++;var Ph=!1;lf.flush(pt,function(){Ph=!0,ks()},Fn)||Ph||(pt&&Wo==null?Wo=vA(function(){Wo=null,ks()},Lr):ks())}})}return Qo=!0,ks(),!0}s(Rh,"_flushChannels");function $x(){var pt;zl(v[Eh](function(hr){var Fn=hr.cfg.enablePerfMgr;if(Fn){var Lr=hr.cfg[d0];(pt!==Lr||!pt)&&(Lr||(Lr=Ox),CU(hr.cfg,d0,Lr),pt=Lr,Z=null),!q&&!Z&&Qe(Lr)&&(Z=Lr(wt,wt[l0]()))}else Z=null,pt=null}))}s($x,"_initPerfManager");function kh(pt){var hr=R(Op(),wt);hr[O5](Do),(!wt._updateHook||wt._updateHook(hr,pt)!==!0)&&hr[fl](pt)}s(kh,"_doUpdate");function zx(pt){var hr=wt[$a];hr?(Rr(hr,2,73,pt),Do()):Yr(pt)}s(zx,"_logOrThrowError");function ta(pt){var hr=wt[l0]();hr&&hr[fx]([pt],2)}s(ta,"_notifyInvalidEvent");function zl(pt){Mt.add(pt)}s(zl,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Nr(A,v){try{if(A&&A!==""){var T=hd().parse(A);if(T&&T[aU]&&T[aU]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[ii])return T}}catch(S){Rr(v,1,43,"Cannot parse the response. "+(S[wA]||Ft(S)),{response:A})}return null}s(Nr,"parseResponse");var un="",Zo="NoResponseBody",yc="&"+Zo+"=true",ya="POST",Cc=function(){function A(){var v=0,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke,Me,je,ut;jl(A,this,function(rt,Ct){var Mt=!0;ss(),rt[Iw]=function(Ot,Wr){D=Wr,S&&Rr(D,1,28,"Sender is already initialized"),rt.SetConfig(Ot),S=!0},rt._getDbgPlgTargets=function(){return[S,L,Z,T]},rt.SetConfig=function(Ot){try{if(q=Ot.senderOnCompleteCallBack||{},Z=!!Ot.disableCredentials,ae=Ot.fetchCredentials,L=!!Ot.isOneDs,T=!!Ot.enableSendPromise,Te=!!Ot.disableXhr,Le=!!Ot.disableBeacon,Ke=!!Ot.disableBeaconSync,ut=Ot.timeWrapper,je=!!Ot.addNoResponse,Me=!!Ot.disableFetchKeepAlive,Ce={sendPOST:Hr},L||(Mt=!1),Z){var Wr=Cx();Wr&&Wr.protocol&&Wr.protocol[Jv]()==="file:"&&(Mt=!1)}return!0}catch{}return!1},rt.getSyncFetchPayload=function(){return v},rt.getSenderInst=function(Ot,Wr){return Ot&&Ot[ii]?Di(Ot,Wr):null},rt.getFallbackInst=function(){return Ce},rt[U5]=function(Ot,Wr){ss()};function Yt(Ot,Wr){Ni(Wr,200,{},Ot)}s(Yt,"_onSuccess");function yr(Ot,Wr){Rr(D,2,26,"Failed to send telemetry.",{message:Ot}),Ni(Wr,400,{})}s(yr,"_onError");function Kn(Ot){yr("No endpoint url is provided for the batch",Ot)}s(Kn,"_onNoPayloadUrl");function Di(Ot,Wr){for(var Io=0,wt=null,Pn=0;wt==null&&Pn<Ot[ii];)Io=Ot[Pn],!Te&&Io===1?x8()?wt=ea:b8()&&(wt=Hr):Io===2&&Lw(Wr)&&(!Wr||!Me)?wt=Li:Io===3&&DA()&&(Wr?!Ke:!Le)&&(wt=An),Pn++;return wt?{_transport:Io,_isSync:Wr,sendPOST:wt}:null}s(Di,"_getSenderInterface");function Ni(Ot,Wr,Io,wt){try{Ot&&Ot(Wr,Io,wt)}catch{}}s(Ni,"_doOnComplete");function Bo(Ot,Wr){var Io=mA(),wt=Ot[xh];if(!wt)return Kn(Wr),!0;wt=Ot[xh]+(je?yc:un);var Pn=Ot[ox],Ca=L?Pn:new Blob([Pn],{type:"text/plain;charset=UTF-8"}),Do=Io.sendBeacon(wt,Ca);return Do}s(Bo,"_doBeaconSend");function An(Ot,Wr,Io){var wt=Ot[ox];try{if(wt)if(Bo(Ot,Wr))Yt(un,Wr);else{var Pn=q&&q.beaconOnRetry;Pn&&Qe(Pn)?Pn(Ot,Wr,Bo):(Ce&&Ce.sendPOST(Ot,Wr,!0),Rr(D,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Ca){L&&pk(D,"Failed to send telemetry using sendBeacon API. Ex:"+Ft(Ca)),Ni(Wr,L?0:400,{},un)}}s(An,"_beaconSender");function Hr(Ot,Wr,Io){var wt,Pn,Ca,Do=Ot[l8]||{};!Io&&T&&(wt=cx(function(Ea,Al){Pn=Ea,Ca=Al})),L&&Io&&Ot.disableXhrSync&&(Io=!1);var gl=Ot[xh];if(!gl){Kn(Wr),Pn&&Pn(!1);return}var ct=y8(ya,gl,Mt,!0,Io,Ot[bh]);L||ct.setRequestHeader("Content-type","application/json"),jr(Et(Do),function(Ea){ct.setRequestHeader(Ea,Do[Ea])}),ct.onreadystatechange=function(){L||(Ec(ct),ct.readyState===4&&Pn&&Pn(!0))},ct.onload=function(){L&&Ec(ct)};function Ec(Ea){var Al=q&&q.xhrOnComplete,Op=Al&&Qe(Al);if(Op)Al(Ea,Wr,Ot);else{var Ad=tk(Ea);Ni(Wr,Ea[ww],m1(Ea,L),Ad)}}return s(Ec,"_doOnReadyFunc"),ct.onerror=function(Ea){Ni(Wr,L?ct[ww]:400,m1(ct,L),L?un:rk(ct)),Ca&&Ca(Ea)},ct.ontimeout=function(){Ni(Wr,L?ct[ww]:500,m1(ct,L),L?un:rk(ct)),Pn&&Pn(!1)},ct.send(Ot[ox]),wt}s(Hr,"_xhrSender");function Li(Ot,Wr,Io){var wt,Pn=Ot[xh],Ca=Ot[ox],Do=L?Ca:new Blob([Ca],{type:"application/json"}),gl,ct,Ec,Ea=new Headers,Al=Ca[ii],Op=!1,Ad=!1,Vx=Ot[l8]||{},Rh=(wt={method:ya,body:Do},wt[FU]=!0,wt);Ot.headers&&Et(Ot.headers)[ii]>0&&(jr(Et(Vx),function(ta){Ea.append(ta,Vx[ta])}),Rh[l8]=Ea),ae?Rh.credentials=ae:Mt&&L&&(Rh.credentials="include"),Io&&(Rh.keepalive=!0,v+=Al,L?Ot._sendReason===2&&(Op=!0,je&&(Pn+=yc)):Op=!0);var $x=new Request(Pn,Rh);try{$x[FU]=!0}catch{}if(!Io&&T&&(gl=cx(function(ta,zl){ct=ta,Ec=zl})),!Pn){Kn(Wr),ct&&ct(!1);return}function kh(ta){Ni(Wr,L?0:400,{},L?un:ta)}s(kh,"_handleError");function zx(ta,zl,pt){var hr=ta[ww],Fn=q.fetchOnComplete;Fn&&Qe(Fn)?Fn(ta,Wr,pt||un,zl):Ni(Wr,hr,{},pt||un)}s(zx,"_onFetchComplete");try{rf(fetch(L?Pn:$x,L?Rh:null),function(ta){if(Io&&(v-=Al,Al=0),!Ad)if(Ad=!0,ta.rejected)kh(ta.reason&&ta.reason[c1]),Ec&&Ec(ta.reason);else{var zl=ta[tx];try{!L&&!zl.ok?(kh(zl.statusText),ct&&ct(!1)):L&&!zl.body?(zx(zl,null,un),ct&&ct(!0)):rf(zl.text(),function(pt){zx(zl,Ot,pt[tx]),ct&&ct(!0)})}catch(pt){kh(Ft(pt)),Ec&&Ec(pt)}}})}catch(ta){Ad||(kh(Ft(ta)),Ec&&Ec(ta))}return Op&&!Ad&&(Ad=!0,Ni(Wr,200,{}),ct&&ct(!0)),L&&!Ad&&Ot[bh]>0&&ut&&ut.set(function(){Ad||(Ad=!0,Ni(Wr,500,{}),ct&&ct(!0))},Ot[bh]),gl}s(Li,"_doFetchSender");function ea(Ot,Wr,Io){var wt=gh(),Pn=new XDomainRequest,Ca=Ot[ox];Pn.onload=function(){var Ea=tk(Pn),Al=q&&q.xdrOnComplete;Al&&Qe(Al)?Al(Pn,Wr,Ot):Ni(Wr,200,{},Ea)},Pn.onerror=function(){Ni(Wr,400,{},L?un:vU(Pn))},Pn.ontimeout=function(){Ni(Wr,500,{})},Pn.onprogress=function(){};var Do=wt&&wt.location&&wt.location.protocol||"",gl=Ot[xh];if(!gl){Kn(Wr);return}if(!L&&gl.lastIndexOf(Do,0)!==0){var ct="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Rr(D,2,40,". "+ct),yr(ct,Wr);return}var Ec=L?gl:gl[RA](/^(https?:)/,"");Pn.open(ya,Ec),Ot[bh]&&(Pn[bh]=Ot[bh]),Pn.send(Ca),L&&Io?ut&&ut.set(function(){Pn.send(Ca)},0):Pn.send(Ca)}s(ea,"_xdrSender");function ss(){v=0,S=!1,T=!1,D=null,L=null,q=null,Z=null,ae=null,Ce=null,Te=!1,Le=!1,Ke=!1,Me=!1,je=!1,ut=null}s(ss,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),A1="on",UA="attachEvent",Qx="addEventListener",rq="detachEvent",nq="removeEventListener",xk="events";wh("aiEvtPageHide"),wh("aiEvtPageShow");var jse=/\.[\.]+/g,aSe=/[\.]+$/,_mt=1,iq=SU("events"),Smt=/^([^.]*)(?:\.(.+)|)/;function cSe(A){return A&&A[RA]?A[RA](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,_i):A}s(cSe,"_normalizeNamespace");function Vse(A,v){if(v){var T=_i;tt(v)?(T=_i,jr(v,function(D){D=cSe(D),D&&(D[0]!=="."&&(D="."+D),T+=D)})):T=cSe(v),T&&(T[0]!=="."&&(T="."+T),A=(A||_i)+T)}var S=Smt.exec(A||_i)||[];return{type:S[1],ns:(S[2]||_i).replace(jse,".").replace(aSe,_i)[SA](".").sort().join(".")}}s(Vse,"_getEvtNamespace");function lSe(A,v,T){T===void 0&&(T=!0);var S=iq.get(A,xk,{},T),D=S[v];return D||(D=S[v]=[]),D}s(lSe,"_getRegisteredEvents");function uSe(A,v,T,S){A&&v&&v[Vl]&&(A[nq]?A[nq](v[Vl],T,S):A[rq]&&A[rq](A1+v[Vl],T))}s(uSe,"_doDetach");function Rmt(A,v,T,S){var D=!1;return A&&v&&v[Vl]&&T&&(A[Qx]?(A[Qx](v[Vl],T,S),D=!0):A[UA]&&(A[UA](A1+v[Vl],T),D=!0)),D}s(Rmt,"_doAttach");function dSe(A,v,T,S){for(var D=v[ii];D--;){var L=v[D];L&&(!T.ns||T.ns===L[s8].ns)&&(!S||S(L))&&(uSe(A,L[s8],L.handler,L.capture),v[Zv](D,1))}}s(dSe,"_doUnregister");function kmt(A,v,T){if(v[Vl])dSe(A,lSe(A,v[Vl]),v,T);else{var S=iq.get(A,xk,{});oe(S,function(D,L){dSe(A,L,v,T)}),Et(S)[ii]===0&&iq.kill(A,xk)}}s(kmt,"_unregisterEvents");function fSe(A,v){var T;return v?(tt(v)?T=[A].concat(v):T=[A,v],T=Vse("xx",T).ns[SA](".")):T=A,T}s(fSe,"mergeEvtNamespace");function pSe(A,v,T,S,D){D===void 0&&(D=!1);var L=!1;if(A)try{var q=Vse(v,S);if(L=Rmt(A,q,T,D),L&&iq.accept(A)){var Z={guid:_mt++,evtName:q,handler:T,capture:D};lSe(A,q.type)[ao](Z)}}catch{}return L}s(pSe,"eventOn");function Pmt(A,v,T,S,D){if(D===void 0&&(D=!1),A)try{var L=Vse(v,S),q=!1;kmt(A,L,function(Z){return L.ns&&!T||Z.handler===T?(q=!0,!0):!1}),q||uSe(A,L,T,D)}catch{}}s(Pmt,"eventOff");var mSe="sampleRate",$se="ProcessLegacy",hSe="http.method",zse="https://dc.services.visualstudio.com",bk="/v2/track",Ux="not_specified",gSe=ase({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),oq="split",bi="length",Yse="toLowerCase",$w="ingestionendpoint",G8="toString",ASe="removeItem",sq="message",Bmt="count",Kse="stringify",Jse="pathname",j8="match",qx="name",qA="properties",y1="measurements",aq="sizeInBytes",cq="typeName",V8="exceptions",$8="severityLevel",Xse="problemGroup",Ik="parsedStack",lq="hasFullStack",uq="assembly",C1="fileName",Tk="line",dq="aiDataContract",fq="duration";function ySe(A,v,T){var S=v[bi],D=Dmt(A,v);if(D[bi]!==S){for(var L=0,q=D;T[q]!==void 0;)L++,q=ge(D,0,147)+Mmt(L);D=q}return D}s(ySe,"dataSanitizeKeyAndAddUniqueness");function Dmt(A,v){var T;return v&&(v=so(qt(v)),v[bi]>150&&(T=ge(v,0,150),Rr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:v},!0))),T||v}s(Dmt,"dataSanitizeKey");function ku(A,v,T){T===void 0&&(T=1024);var S;return v&&(T=T||1024,v=so(qt(v)),v[bi]>T&&(S=ge(v,0,T),Rr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:v},!0))),S||v}s(ku,"dataSanitizeString");function Zse(A,v){return ESe(A,v,2048,66)}s(Zse,"dataSanitizeUrl");function CSe(A,v){var T;return v&&v[bi]>32768&&(T=ge(v,0,32768),Rr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:v},!0)),T||v}s(CSe,"dataSanitizeMessage");function Nmt(A,v){var T;if(v){var S=""+v;S[bi]>32768&&(T=ge(S,0,32768),Rr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:v},!0))}return T||v}s(Nmt,"dataSanitizeException");function zw(A,v){if(v){var T={};oe(v,function(S,D){if(ke(D)&&Ex())try{D=hd()[Kse](D)}catch(L){Rr(A,2,49,"custom property is not valid",{exception:L},!0)}D=ku(A,D,8192),S=ySe(A,S,T),T[S]=D}),v=T}return v}s(zw,"dataSanitizeProperties");function Yw(A,v){if(v){var T={};oe(v,function(S,D){S=ySe(A,S,T),T[S]=D}),v=T}return v}s(Yw,"dataSanitizeMeasurements");function Lmt(A,v){return v&&ESe(A,v,128,69)[G8]()}s(Lmt,"dataSanitizeId");function ESe(A,v,T,S){var D;return v&&(v=so(qt(v)),v[bi]>T&&(D=ge(v,0,T),Rr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:v},!0))),D||v}s(ESe,"dataSanitizeInput");function Mmt(A){var v="00"+A;return ve(v,v[bi]-3)}s(Mmt,"dsPadNumber");var vSe=Lv()||{},xSe=0,Fmt=[null,null,null,null,null];function Omt(A){var v=xSe,T=Fmt,S=T[v];return vSe.createElement?T[v]||(S=T[v]=vSe.createElement("a")):S={host:Qmt(A,!0)},S.href=A,v++,v>=T[bi]&&(v=0),xSe=v,S}s(Omt,"urlParseUrl");function Qmt(A,v){var T=Umt(A,v)||"";if(T){var S=T[j8](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>3&&he(S[2])&&S[2][bi]>0)return S[2]+(S[3]||"")}return T}s(Qmt,"urlParseHost");function Umt(A,v){var T=null;if(A){var S=A[j8](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[bi]>2&&he(S[2])&&S[2][bi]>0&&(T=S[2]||"",v&&S[bi]>2)){var D=(S[1]||"")[Yse](),L=S[3]||"";(D==="http"&&L===":80"||D==="https"&&L===":443")&&(L=""),T+=L}}return T}s(Umt,"urlParseFullHost");var qmt=[zse+bk,"https://breeze.aimon.applicationinsights.io"+bk,"https://dc-int.services.visualstudio.com"+bk];function bSe(A){return fd(qmt,A[Yse]())!==-1}s(bSe,"isInternalApplicationInsightsEndpoint");function Hmt(A,v,T,S){var D,L=S,q=S;if(v&&v[bi]>0){var Z=Omt(v);if(D=Z.host,!L)if(Z[Jse]!=null){var ae=Z.pathname[bi]===0?"/":Z[Jse];ae.charAt(0)!=="/"&&(ae="/"+ae),q=Z[Jse],L=ku(A,T?T+" "+ae:ae)}else L=ku(A,v)}else D=S,L=S;return{target:D,name:L,data:q}}s(Hmt,"AjaxHelperParseDependencyPath");var eae=L5({LocalStorage:0,SessionStorage:1}),wk=void 0,ISe="";function TSe(A){try{if(re(Ip()))return null;var v=new Date()[G8](),T=Ba(A===eae.LocalStorage?"localStorage":"sessionStorage"),S=ISe+v;T.setItem(S,v);var D=T.getItem(S)!==v;if(T[ASe](S),!D)return T}catch{}return null}s(TSe,"_getVerifiedStorageObject");function tae(){return wSe()?TSe(eae.SessionStorage):null}s(tae,"_getSessionStorageObject");function Wmt(A){ISe=A||""}s(Wmt,"utlSetStoragePrefix");function wSe(A){return(A||wk===void 0)&&(wk=!!TSe(eae.SessionStorage)),wk}s(wSe,"utlCanUseSessionStorage");function Gmt(A,v){var T=tae();if(T!==null)try{return T.getItem(v)}catch(S){wk=!1,Rr(A,2,2,"Browser failed read of session storage. "+jc(S),{exception:Ft(S)})}return null}s(Gmt,"utlGetSessionStorage");function jmt(A,v,T){var S=tae();if(S!==null)try{return S.setItem(v,T),!0}catch(D){wk=!1,Rr(A,2,4,"Browser failed write to session storage. "+jc(D),{exception:Ft(D)})}return!1}s(jmt,"utlSetSessionStorage");function Vmt(A,v){var T=tae();if(T!==null)try{return T[ASe](v),!0}catch(S){wk=!1,Rr(A,2,6,"Browser failed removal of session storage item. "+jc(S),{exception:Ft(S)})}return!1}s(Vmt,"utlRemoveSessionStorage");var $mt=";",zmt="=";function rae(A){if(!A)return{};var v=A[oq]($mt),T=Yoe(v,function(D,L){var q=L[oq](zmt);if(q[bi]===2){var Z=q[0][Yse](),ae=q[1];D[Z]=ae}return D},{});if(Et(T)[bi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[$w]=T[$w]||"https://"+S+"dc."+T.endpointsuffix}T[$w]=T[$w]||zse,eU(T[$w],"/")&&(T[$w]=T[$w].slice(0,-1))}return T}s(rae,"parseConnectionString");var Ymt=function(){function A(v,T,S){var D=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[qx]=ku(v,S)||Ux,L.data=T,L.time=Rw(new Date),L[dq]={time:1,iKey:1,name:1,sampleRate:s(function(){return D.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),_k=function(){function A(v,T,S,D){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[qx]=ku(v,T)||Ux,L[qA]=zw(v,S),L[y1]=Yw(v,D)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),Kmt=58,Jmt=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Xmt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Zmt=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,eht=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,tht=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,rht=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,nht=/([^\(\s\n]+):([0-9]+)$/,_Se="<no_method>",Sk="error",Fp="stack",nae="stackDetails",SSe="errorSrc",iae="message",RSe="description",kSe=[{re:Xmt,len:5,m:1,fn:2,ln:3,col:4},{chk:oht,pre:iht,re:Zmt,len:4,m:1,fn:2,ln:3},{re:eht,len:3,m:1,fn:2,hdl:MSe},{re:tht,len:2,fn:1,hdl:MSe}];function iht(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(iht,"_scrubAnonymous");function oht(A){return Ah(A,"[native")<0}s(oht,"_ignoreNative");function oae(A,v){var T=A;return T&&!he(T)&&(JSON&&JSON[Kse]?(T=JSON[Kse](A),v&&(!T||T==="{}")&&(Qe(A[G8])?T=A[G8]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(oae,"_stringify");function PSe(A,v){var T=A;return A&&(T&&!he(T)&&(T=A[iae]||A[RSe]||T),T&&!he(T)&&(T=oae(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),v&&v!=="String"&&v!=="Object"&&v!=="Error"&&Ah(T||"",v)===-1&&(T=v+": "+T),T||""}s(PSe,"_formatMessage");function sht(A){try{if(ke(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(sht,"_isExceptionDetailsInternal");function aht(A){try{if(ke(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(aht,"_isExceptionInternal");function BSe(A){return A&&A.src&&he(A.src)&&A.obj&&tt(A.obj)}s(BSe,"_isStackDetails");function Kw(A){var v=A||"";he(v)||(he(v[Fp])?v=v[Fp]:v=""+v);var T=v[oq](`
`);return{src:v,obj:T}}s(Kw,"_convertStackObj");function cht(A){for(var v=[],T=A[oq](`
`),S=0;S<T[bi];S++){var D=T[S];T[S+1]&&(D+="@"+T[S+1],S++),v.push(D)}return{src:A,obj:v}}s(cht,"_getOperaStack");function DSe(A){var v=null;if(A)try{if(A[Fp])v=Kw(A[Fp]);else if(A[Sk]&&A[Sk][Fp])v=Kw(A[Sk][Fp]);else if(A.exception&&A.exception[Fp])v=Kw(A.exception[Fp]);else if(BSe(A))v=A;else if(BSe(A[nae]))v=A[nae];else if(gh()&&gh().opera&&A[iae])v=cht(A[sq]);else if(A.reason&&A.reason[Fp])v=Kw(A.reason[Fp]);else if(he(A))v=Kw(A);else{var T=A[iae]||A[RSe]||"";he(A[SSe])&&(T&&(T+=`
`),T+=" from "+A[SSe]),T&&(v=Kw(T))}}catch(S){v=Kw(S)}return v||{src:"",obj:null}}s(DSe,"_getStackFromErrorObj");function lht(A){var v="";return A&&(A.obj?v=A.obj.join(`
`):v=A.src||""),v}s(lht,"_formatStackTrace");function uht(A){var v,T=A.obj;if(T&&T[bi]>0){v=[];var S=0,D=!1,L=0;jr(T,function(ut){if(D||mht(ut)){var rt=qt(ut);D=!0;var Ct=hht(rt,S);Ct&&(L+=Ct[aq],v.push(Ct),S++)}});var q=32*1024;if(L>q)for(var Z=0,ae=v[bi]-1,Ce=0,Te=Z,Le=ae;Z<ae;){var Ke=v[Z][aq],Me=v[ae][aq];if(Ce+=Ke+Me,Ce>q){var je=Le-Te+1;v.splice(Te,je);break}Te=Z,Le=ae,Z++,ae--}}return v}s(uht,"_parseStack");function pq(A){var v="";if(A&&(v=A.typeName||A[qx]||"",!v))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[G8]());v=S&&S[bi]>1?S[1]:""}catch{}return v}s(pq,"_getErrorType");function sae(A){if(A)try{if(!he(A)){var v=pq(A),T=oae(A,!1);return(!T||T==="{}")&&(A[Sk]&&(A=A[Sk],v=pq(A)),T=oae(A,!0)),Ah(T,v)!==0&&v!=="String"?v+":"+T:T}}catch{}return""+(A||"")}s(sae,"_formatErrorCode");var mq=function(){function A(v,T,S,D,L,q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Z=this;Z.ver=2,aht(T)?(Z[V8]=T[V8]||[],Z[qA]=T[qA],Z[y1]=T[y1],T[$8]&&(Z[$8]=T[$8]),T.id&&(Z.id=T.id,T[qA].id=T.id),T[Xse]&&(Z[Xse]=T[Xse]),re(T.isManual)||(Z.isManual=T.isManual)):(S||(S={}),q&&(S.id=q),Z[V8]=[NSe(v,T,S)],Z[qA]=zw(v,S),Z[y1]=Yw(v,D),L&&(Z[$8]=L),q&&(Z.id=q))}return s(A,"Exception"),A.CreateAutoException=function(v,T,S,D,L,q,Z,ae){var Ce=pq(L||q||v);return{message:PSe(v,Ce),url:T,lineNumber:S,columnNumber:D,error:sae(L||q||v),evt:sae(q||v),typeName:Ce,stackDetails:DSe(Z||L||q),errorSrc:ae}},A.CreateFromInterface=function(v,T,S,D){var L=T[V8]&&XC(T[V8],function(Z){return pht(v,Z)}),q=new A(v,Ch(Ch({},T),{exceptions:L}),S,D);return q},A.prototype.toInterface=function(){var v=this,T=v.exceptions,S=v.properties,D=v.measurements,L=v.severityLevel,q=v.problemGroup,Z=v.id,ae=v.isManual,Ce=T instanceof Array&&XC(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:D,problemGroup:q,id:Z,isManual:ae}},A.CreateSimpleException=function(v,T,S,D,L,q){var Z;return{exceptions:[(Z={},Z[lq]=!0,Z.message=v,Z.stack=L,Z.typeName=T,Z)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=sae,A}(),dht=Vt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function fht(){var A=this,v=tt(A[Ik])&&XC(A[Ik],function(S){return Aht(S)}),T={id:A.id,outerId:A.outerId,typeName:A[cq],message:A[sq],hasFullStack:A[lq],stack:A[Fp],parsedStack:v||void 0};return T}s(fht,"_toInterface");function NSe(A,v,T){var S,D,L,q,Z,ae,Ce,Te;if(sht(v))q=v[cq],Z=v[sq],Ce=v[Fp],Te=v[Ik]||[],ae=v[lq];else{var Le=v,Ke=Le&&Le.evt;xt(Le)||(Le=Le[Sk]||Ke||Le),q=ku(A,pq(Le))||Ux,Z=CSe(A,PSe(v||Le,q))||Ux;var Me=v[nae]||DSe(v);Te=uht(Me),tt(Te)&&XC(Te,function(je){je[uq]=ku(A,je[uq]),je[C1]=ku(A,je[C1])}),Ce=Nmt(A,lht(Me)),ae=tt(Te)&&Te[bi]>0,T&&(T[cq]=T[cq]||q)}return S={},S[dq]=dht,S.id=D,S.outerId=L,S.typeName=q,S.message=Z,S[lq]=ae,S.stack=Ce,S.parsedStack=Te,S.toInterface=fht,S}s(NSe,"_createExceptionDetails");function pht(A,v){var T=tt(v[Ik])&&XC(v[Ik],function(D){return ght(D)})||v[Ik],S=NSe(A,Ch(Ch({},v),{parsedStack:T}));return S}s(pht,"_createExDetailsFromInterface");function LSe(A,v){var T=v[j8](rht);if(T&&T[bi]>=4)A[C1]=T[1],A[Tk]=parseInt(T[2]);else{var S=v[j8](nht);S&&S[bi]>=3?(A[C1]=S[1],A[Tk]=parseInt(S[2])):A[C1]=v}}s(LSe,"_parseFilename");function MSe(A,v,T){var S=A[C1];v.fn&&T&&T[bi]>v.fn&&(v.ln&&T[bi]>v.ln?(S=so(T[v.fn]||""),A[Tk]=parseInt(so(T[v.ln]||""))||0):S=so(T[v.fn]||"")),S&&LSe(A,S)}s(MSe,"_handleFilename");function mht(A){var v=!1;if(A&&he(A)){var T=so(A);T&&(v=Jmt.test(T))}return v}s(mht,"_isStackFrame");var FSe=Vt({level:1,method:1,assembly:0,fileName:0,line:0});function hht(A,v){var T,S;if(A&&he(A)&&so(A)){S=(T={},T[dq]=FSe,T.level=v,T.assembly=so(A),T.method=_Se,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var D=0;D<kSe[bi];){var L=kSe[D];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var q=A[j8](L.re);if(q&&q[bi]>=L.len){L.m&&(S.method=so(q[L.m]||_Se)),L.hdl?L.hdl(S,L,q):L.fn&&(L.ln?(S[C1]=so(q[L.fn]||""),S[Tk]=parseInt(so(q[L.ln]||""))||0):LSe(S,q[L.fn]||""));break}D++}}return OSe(S)}s(hht,"_extractStackFrame");function ght(A){var v,T=(v={},v[dq]=FSe,v.level=A.level,v.method=A.method,v.assembly=A[uq],v.fileName=A[C1],v.line=A[Tk],v.sizeInBytes=0,v);return OSe(T)}s(ght,"_stackFrameFromInterface");function OSe(A){var v=Kmt;return A&&(v+=A.method[bi],v+=A.assembly[bi],v+=A.fileName[bi],v+=A.level.toString()[bi],v+=A.line.toString()[bi],A[aq]=v),A}s(OSe,"_populateFrameSizeInBytes");function Aht(A){return{level:A.level,method:A.method,assembly:A[uq],fileName:A[C1],line:A[Tk]}}s(Aht,"_parsedFrameToInterface");var yht=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),z8=function(){function A(v,T,S,D,L,q,Z,ae,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new yht;Le[Bmt]=D>0?D:void 0,Le.max=isNaN(q)||q===null?void 0:q,Le.min=isNaN(L)||L===null?void 0:L,Le[qx]=ku(v,T)||Ux,Le.value=S,Le.stdDev=isNaN(Z)||Z===null?void 0:Z,Te.metrics=[Le],Te[qA]=zw(v,ae),Te[y1]=Yw(v,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),Y8="";function QSe(A){(isNaN(A)||A<0)&&(A=0),A=ese(A);var v=Y8+A%1e3,T=Y8+ZC(A/1e3)%60,S=Y8+ZC(A/(1e3*60))%60,D=Y8+ZC(A/(1e3*60*60))%24,L=ZC(A/(1e3*60*60*24));return v=v[bi]===1?"00"+v:v[bi]===2?"0"+v:v,T=T[bi]<2?"0"+T:T,S=S[bi]<2?"0"+S:S,D=D[bi]<2?"0"+D:D,(L>0?L+".":Y8)+D+":"+S+":"+T+"."+v}s(QSe,"msToTimeSpan");var hq=function(){function A(v,T,S,D,L,q,Z){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ae=this;ae.ver=2,ae.id=Lmt(v,Z),ae.url=Zse(v,S),ae[qx]=ku(v,T)||Ux,isNaN(D)||(ae[fq]=QSe(D)),ae[qA]=zw(v,L),ae[y1]=Yw(v,q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),gq=function(){function A(v,T,S,D,L,q,Z,ae,Ce,Te,Le,Ke){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Me=this;Me.ver=2,Me.id=T,Me[fq]=QSe(L),Me.success=q,Me.resultCode=Z+"",Me.type=ku(v,Ce);var je=Hmt(v,S,ae,D);Me.data=Zse(v,D)||je.data,Me.target=ku(v,je.target),Te&&(Me.target="".concat(Me.target," | ").concat(Te)),Me[qx]=ku(v,je[qx]),Me[qA]=zw(v,Le),Me[y1]=Yw(v,Ke)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),Aq=function(){function A(v,T,S,D,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var q=this;q.ver=2,T=T||Ux,q[sq]=CSe(v,T),q[qA]=zw(v,D),q[y1]=Yw(v,L),S&&(q[$8]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),yq=function(){function A(v,T,S,D,L,q,Z){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ae=this;ae.ver=2,ae.url=Zse(v,S),ae[qx]=ku(v,T)||Ux,ae[qA]=zw(v,L),ae[y1]=Yw(v,q),Z&&(ae.domProcessing=Z.domProcessing,ae[fq]=Z[fq],ae.networkConnect=Z.networkConnect,ae.perfTotal=Z.perfTotal,ae.receivedResponse=Z.receivedResponse,ae.sentRequest=Z.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),Jw=function(){function A(v,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=v,this.baseData=T}return s(A,"Data"),A}(),Cht=L5({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function Hx(A){var v="ai."+A+".";return function(T){return v+T}}s(Hx,"_aiNameFunc");var K8=Hx("application"),$c=Hx("device"),Cq=Hx("location"),Rk=Hx("operation"),aae=Hx("session"),Wx=Hx("user"),Xw=Hx("cloud"),J8=Hx("internal"),USe=function(A){bw(v,A);function v(){return A.call(this)||this}return s(v,"ContextTagKeys"),v}(gse({applicationVersion:K8("ver"),applicationBuild:K8("build"),applicationTypeId:K8("typeId"),applicationId:K8("applicationId"),applicationLayer:K8("layer"),deviceId:$c("id"),deviceIp:$c("ip"),deviceLanguage:$c("language"),deviceLocale:$c("locale"),deviceModel:$c("model"),deviceFriendlyName:$c("friendlyName"),deviceNetwork:$c("network"),deviceNetworkName:$c("networkName"),deviceOEMName:$c("oemName"),deviceOS:$c("os"),deviceOSVersion:$c("osVersion"),deviceRoleInstance:$c("roleInstance"),deviceRoleName:$c("roleName"),deviceScreenResolution:$c("screenResolution"),deviceType:$c("type"),deviceMachineName:$c("machineName"),deviceVMName:$c("vmName"),deviceBrowser:$c("browser"),deviceBrowserVersion:$c("browserVersion"),locationIp:Cq("ip"),locationCountry:Cq("country"),locationProvince:Cq("province"),locationCity:Cq("city"),operationId:Rk("id"),operationName:Rk("name"),operationParentId:Rk("parentId"),operationRootId:Rk("rootId"),operationSyntheticSource:Rk("syntheticSource"),operationCorrelationVector:Rk("correlationVector"),sessionId:aae("id"),sessionIsFirst:aae("isFirst"),sessionIsNew:aae("isNew"),userAccountAcquisitionDate:Wx("accountAcquisitionDate"),userAccountId:Wx("accountId"),userAgent:Wx("userAgent"),userId:Wx("id"),userStoreRegion:Wx("storeRegion"),userAuthUserId:Wx("authUserId"),userAnonymousUserAcquisitionDate:Wx("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Wx("authUserAcquisitionDate"),cloudName:Xw("name"),cloudRole:Xw("role"),cloudRoleVer:Xw("roleVer"),cloudRoleInstance:Xw("roleInstance"),cloudEnvironment:Xw("environment"),cloudLocation:Xw("location"),cloudDeploymentUnit:Xw("deploymentUnit"),internalNodeName:J8("nodeName"),internalSdkVersion:J8("sdkVersion"),internalAgentVersion:J8("agentVersion"),internalSnippet:J8("snippet"),internalSdkSrc:J8("sdkSrc")})),ml=new USe;function qSe(A,v){Pmt(A,null,null,v)}s(qSe,"_disableEvents");function Eht(A){var v=Lv(),T=mA(),S=!1,D=[],L=1;T&&!re(T.onLine)&&!T.onLine&&(L=2);var q=0,Z=Ke(),ae=fSe(wh("OfflineListener"),A);try{if(Te(gh())&&(S=!0),v){var Ce=v.body||v;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Yt){var yr=!1;return Yt&&(yr=pSe(Yt,"online",ut,ae),yr&&pSe(Yt,"offline",rt,ae)),yr}s(Te,"_enableEvents");function Le(){return Z}s(Le,"_isOnline");function Ke(){return!(q===2||L===2)}s(Ke,"calCurrentState");function Me(){var Yt=Ke();Z!==Yt&&(Z=Yt,jr(D,function(yr){var Kn={isOnline:Z,rState:L,uState:q};try{yr(Kn)}catch{}}))}s(Me,"listnerNoticeCheck");function je(Yt){q=Yt,Me()}s(je,"setOnlineState");function ut(){L=1,Me()}s(ut,"_setOnline");function rt(){L=2,Me()}s(rt,"_setOffline");function Ct(){var Yt=gh();if(Yt&&S){if(qSe(Yt,ae),v){var yr=v.body||v;Q(yr.ononline)||qSe(yr,ae)}S=!1}}s(Ct,"_unload");function Mt(Yt){return D.push(Yt),{rm:s(function(){var yr=D.indexOf(Yt);if(yr>-1)return D.splice(yr,1)},"rm")}}return s(Mt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:Ct,addListener:Mt,setOnlineState:je}}s(Eht,"createOfflineListener");var vht="AppInsightsChannelPlugin",Zw="duration",$l="tags",cae="deviceType",m0="data",E1="name",X8="traceID",Ri="length",Z8="stringify",e_="measurements",HA="dataType",t_="envelopeType",r_="toString",n_="enqueue",i_="count",v1="push",lae="emitLineDelimitedJson",kk="clear",Eq="markAsSent",e6="clearSent",uae="bufferOverride",t6="BUFFER_KEY",Gx="SENT_BUFFER_KEY",Pk="concat",r6="MAX_BUFFER_SIZE",n6="triggerSend",Pu="diagLog",dae="initialize",i6="_sender",o6="endpointUrl",s6="instrumentationKey",fae="customHeaders",HSe="maxBatchSizeInBytes",pae="onunloadDisableBeacon",mae="isBeaconApiDisabled",WSe="alwaysUseXhrOverride",GSe="enableSessionStorageBuffer",WA="_buffer",jSe="onunloadDisableFetch",VSe="disableSendBeaconSplit",vq="getSenderInst",o_="_onError",hae="_onPartialSuccess",xq="_onSuccess",gae="itemsReceived",Aae="itemsAccepted",yae="baseType",bq="sampleRate",xht="getHashCodeScore",Cae="baseType",Zs="baseData",hl="properties",$Se="true";function Ka(A,v,T){return PA(A,v,T,le)}s(Ka,"_setValueIf");function bht(A,v,T){var S=T[$l]=T[$l]||{},D=v.ext=v.ext||{},L=v[$l]=v[$l]||[],q=D.user;q&&(Ka(S,ml.userAuthUserId,q.authId),Ka(S,ml.userId,q.id||q.localId));var Z=D.app;Z&&Ka(S,ml.sessionId,Z.sesId);var ae=D.device;ae&&(Ka(S,ml.deviceId,ae.id||ae.localId),Ka(S,ml[cae],ae.deviceClass),Ka(S,ml.deviceIp,ae.ip),Ka(S,ml.deviceModel,ae.model),Ka(S,ml[cae],ae[cae]));var Ce=v.ext.web;if(Ce){Ka(S,ml.deviceLanguage,Ce.browserLang),Ka(S,ml.deviceBrowserVersion,Ce.browserVer),Ka(S,ml.deviceBrowser,Ce.browser);var Te=T[m0]=T[m0]||{},Le=Te[Zs]=Te[Zs]||{},Ke=Le[hl]=Le[hl]||{};Ka(Ke,"domain",Ce.domain),Ka(Ke,"isManual",Ce.isManual?$Se:null),Ka(Ke,"screenRes",Ce.screenRes),Ka(Ke,"userConsent",Ce.userConsent?$Se:null)}var Me=D.os;Me&&(Ka(S,ml.deviceOS,Me[E1]),Ka(S,ml.deviceOSVersion,Me.osVer));var je=D.trace;je&&(Ka(S,ml.operationParentId,je.parentID),Ka(S,ml.operationName,ku(A,je[E1])),Ka(S,ml.operationId,je[X8]));for(var ut={},rt=L[Ri]-1;rt>=0;rt--){var Ct=L[rt];oe(Ct,function(Yt,yr){ut[Yt]=yr}),L.splice(rt,1)}oe(L,function(Yt,yr){ut[Yt]=yr});var Mt=Ch(Ch({},S),ut);Mt[ml.internalSdkVersion]||(Mt[ml.internalSdkVersion]=ku(A,"javascript:".concat(Iht.Version),64)),T[$l]=g8(Mt)}s(bht,"_extractPartAExtensions");function jx(A,v,T){re(A)||oe(A,function(S,D){ht(D)?T[S]=D:he(D)?v[S]=D:Ex()&&(v[S]=hd()[Z8](D))})}s(jx,"_extractPropsAndMeasurements");function s_(A,v){re(A)||oe(A,function(T,S){A[T]=S||v})}s(s_,"_convertPropsUndefinedToCustomDefinedValue");function a_(A,v,T,S){var D=new Ymt(A,S,v);Ka(D,"sampleRate",T[mSe]),(T[Zs]||{}).startTime&&(D.time=Rw(T[Zs].startTime)),D.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return D[E1]=D[E1].replace("{0}",L),bht(A,T,D),T[$l]=T[$l]||[],g8(D)}s(a_,"_createEnvelope");function c_(A,v){re(v[Zs])&&Rr(A,1,46,"telemetryItem.baseData cannot be null.")}s(c_,"EnvelopeCreatorInit");var Iht={Version:"3.3.6"};function Tht(A,v,T){c_(A,v);var S=v[Zs][e_]||{},D=v[Zs][hl]||{};jx(v[m0],D,S),re(T)||s_(D,T);var L=v[Zs];if(re(L))return pk(A,"Invalid input for dependency data"),null;var q=L[hl]&&L[hl][hSe]?L[hl][hSe]:"GET",Z=new gq(A,L.id,L.target,L[E1],L[Zw],L.success,L.responseCode,q,L.type,L.correlationContext,D,S),ae=new Jw(gq[HA],Z);return a_(A,gq[t_],v,ae)}s(Tht,"DependencyEnvelopeCreator");function zSe(A,v,T){c_(A,v);var S={},D={};v[Cae]!==_k[HA]&&(S.baseTypeSource=v[Cae]),v[Cae]===_k[HA]?(S=v[Zs][hl]||{},D=v[Zs][e_]||{}):v[Zs]&&jx(v[Zs],S,D),jx(v[m0],S,D),re(T)||s_(S,T);var L=v[Zs][E1],q=new _k(A,L,S,D),Z=new Jw(_k[HA],q);return a_(A,_k[t_],v,Z)}s(zSe,"EventEnvelopeCreator");function wht(A,v,T){c_(A,v);var S=v[Zs][e_]||{},D=v[Zs][hl]||{};jx(v[m0],D,S),re(T)||s_(D,T);var L=v[Zs],q=mq.CreateFromInterface(A,L,D,S),Z=new Jw(mq[HA],q);return a_(A,mq[t_],v,Z)}s(wht,"ExceptionEnvelopeCreator");function _ht(A,v,T){c_(A,v);var S=v[Zs],D=S[hl]||{},L=S[e_]||{};jx(v[m0],D,L),re(T)||s_(D,T);var q=new z8(A,S[E1],S.average,S.sampleCount,S.min,S.max,S.stdDev,D,L),Z=new Jw(z8[HA],q);return a_(A,z8[t_],v,Z)}s(_ht,"MetricEnvelopeCreator");function Sht(A,v,T){c_(A,v);var S,D=v[Zs];!re(D)&&!re(D[hl])&&!re(D[hl][Zw])?(S=D[hl][Zw],delete D[hl][Zw]):!re(v[m0])&&!re(v[m0][Zw])&&(S=v[m0][Zw],delete v[m0][Zw]);var L=v[Zs],q;((v.ext||{}).trace||{})[X8]&&(q=v.ext.trace[X8]);var Z=L.id||q,ae=L[E1],Ce=L.uri,Te=L[hl]||{},Le=L[e_]||{};if(re(L.refUri)||(Te.refUri=L.refUri),re(L.pageType)||(Te.pageType=L.pageType),re(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[r_]()),!re(L[hl])){var Ke=L[hl];oe(Ke,function(ut,rt){Te[ut]=rt})}jx(v[m0],Te,Le),re(T)||s_(Te,T);var Me=new hq(A,ae,Ce,S,Te,Le,Z),je=new Jw(hq[HA],Me);return a_(A,hq[t_],v,je)}s(Sht,"PageViewEnvelopeCreator");function Rht(A,v,T){c_(A,v);var S=v[Zs],D=S[E1],L=S.uri||S.url,q=S[hl]||{},Z=S[e_]||{};jx(v[m0],q,Z),re(T)||s_(q,T);var ae=new yq(A,D,L,void 0,q,Z,S),Ce=new Jw(yq[HA],ae);return a_(A,yq[t_],v,Ce)}s(Rht,"PageViewPerformanceEnvelopeCreator");function kht(A,v,T){c_(A,v);var S=v[Zs].message,D=v[Zs].severityLevel,L=v[Zs][hl]||{},q=v[Zs][e_]||{};jx(v[m0],L,q),re(T)||s_(L,T);var Z=new Aq(A,S,D,L,q),ae=new Jw(Aq[HA],Z);return a_(A,Aq[t_],v,ae)}s(kht,"TraceEnvelopeCreator");var YSe=function(){function A(v,T){var S=[],D=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(q){return S=q,S},jl(A,this,function(q){q[n_]=function(Z){if(q[i_]()>=T.eventsLimitInMem){D||(Rr(v,2,105,"Maximum in-memory buffer size reached: "+q[i_](),!0),D=!0);return}Z.cnt=Z.cnt||0,!(!re(L)&&Z.cnt>L)&&S[v1](Z)},q[i_]=function(){return S[Ri]},q.size=function(){for(var Z=S[Ri],ae=0;ae<S[Ri];ae++)Z+=S[ae].item[Ri];return T[lae]||(Z+=2),Z},q[kk]=function(){S=[],D=!1},q.getItems=function(){return S.slice(0)},q.batchPayloads=function(Z){if(Z&&Z[Ri]>0){var ae=[];jr(Z,function(Te){ae[v1](Te.item)});var Ce=T[lae]?ae.join(`
`):"["+ae.join(",")+"]";return Ce}return null},q.createNew=function(Z,ae,Ce){var Te=S.slice(0);Z=Z||v,ae=ae||{};var Le=Ce?new KSe(Z,ae):new Eae(Z,ae);return jr(Te,function(Ke){Le[n_](Ke)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),Eae=function(A){bw(v,A);function v(T,S){var D=A.call(this,T,S)||this;return jl(v,D,function(L,q){L[Eq]=function(Z){q[kk]()},L[e6]=function(Z){}}),D}return s(v,"ArraySendBuffer"),v.__ieDyn=1,v}(YSe),Pht=["AI_buffer","AI_sentBuffer"],KSe=function(A){bw(v,A);function v(S,D){var L=A.call(this,S,D)||this,q=!1,Z=D?.namePrefix,ae=D[uae]||{getItem:Gmt,setItem:jmt},Ce=ae.getItem,Te=ae.setItem,Le=D.maxRetryCnt;return jl(v,L,function(Ke,Me){var je=yr(v[t6]),ut=yr(v[Gx]),rt=Ni(),Ct=ut[Pk](rt),Mt=Ke._set(je[Pk](Ct));Mt[Ri]>v[r6]&&(Mt[Ri]=v[r6]),Di(v[Gx],[]),Di(v[t6],Mt),Ke[n_]=function(An){if(Ke[i_]()>=v[r6]){q||(Rr(S,2,67,"Maximum buffer size reached: "+Ke[i_](),!0),q=!0);return}An.cnt=An.cnt||0,!(!re(Le)&&An.cnt>Le)&&(Me[n_](An),Di(v[t6],Ke._get()))},Ke[kk]=function(){Me[kk](),Di(v[t6],Ke._get()),Di(v[Gx],[]),q=!1},Ke[Eq]=function(An){Di(v[t6],Ke._set(Yt(An,Ke._get())));var Hr=yr(v[Gx]);Hr instanceof Array&&An instanceof Array&&(Hr=Hr[Pk](An),Hr[Ri]>v[r6]&&(Rr(S,1,67,"Sent buffer reached its maximum size: "+Hr[Ri],!0),Hr[Ri]=v[r6]),Di(v[Gx],Hr))},Ke[e6]=function(An){var Hr=yr(v[Gx]);Hr=Yt(An,Hr),Di(v[Gx],Hr)},Ke.createNew=function(An,Hr,Li){Li=!!Li;var ea=Ke._get().slice(0),ss=yr(v[Gx]).slice(0);An=An||S,Hr=Hr||{},Ke[kk]();var Ot=Li?new v(An,Hr):new Eae(An,Hr);return jr(ea,function(Wr){Ot[n_](Wr)}),Li&&Ot[Eq](ss),Ot};function Yt(An,Hr){var Li=[],ea=[];return jr(An,function(ss){ea[v1](ss.item)}),jr(Hr,function(ss){!Qe(ss)&&fd(ea,ss.item)===-1&&Li[v1](ss)}),Li}s(Yt,"_removePayloadsFromBuffer");function yr(An){var Hr=An;return Hr=Z?Z+"_"+Hr:Hr,Kn(Hr)}s(yr,"_getBuffer");function Kn(An){try{var Hr=Ce(S,An);if(Hr){var Li=hd().parse(Hr);if(he(Li)&&(Li=hd().parse(Li)),Li&&tt(Li))return Li}}catch(ea){Rr(S,1,42," storage key: "+An+", "+jc(ea),{exception:Ft(ea)})}return[]}s(Kn,"_getBufferBase");function Di(An,Hr){var Li=An;try{Li=Z?Z+"_"+Li:Li;var ea=JSON[Z8](Hr);Te(S,Li,ea)}catch(ss){Te(S,Li,JSON[Z8]([])),Rr(S,2,41," storage key: "+Li+", "+jc(ss)+". Buffer cleared",{exception:Ft(ss)})}}s(Di,"_setBuffer");function Ni(){var An=[];try{return jr(Pht,function(Hr){var Li=Bo(Hr);if(An=An[Pk](Li),Z){var ea=Z+"_"+Hr,ss=Bo(ea);An=An[Pk](ss)}}),An}catch(Hr){Rr(S,2,41,"Transfer events from previous buffers: "+jc(Hr)+". previous Buffer items can not be removed",{exception:Ft(Hr)})}return[]}s(Ni,"_getPreviousEvents");function Bo(An){try{var Hr=Kn(An),Li=[];return jr(Hr,function(ea){var ss={item:ea,cnt:0};Li[v1](ss)}),Vmt(S,An),Li}catch{}return[]}s(Bo,"_getItemsFromPreviousKey")}),L}s(v,"SessionStorageSendBuffer");var T;return T=v,v.VERSION="_1",v.BUFFER_KEY="AI_buffer"+T.VERSION,v.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,v.MAX_BUFFER_SIZE=2e3,v}(YSe),Bht=function(){function A(v){jl(A,this,function(T){T.serialize=function(q){var Z=S(q,"root");try{return hd()[Z8](Z)}catch(ae){Rr(v,1,48,ae&&Qe(ae[r_])?ae[r_]():"Error serializing object",null,!0)}};function S(q,Z){var ae="__aiCircularRefCheck",Ce={};if(!q)return Rr(v,1,48,"cannot serialize object because it is null or undefined",{name:Z},!0),Ce;if(q[ae])return Rr(v,2,50,"Circular reference detected while serializing object",{name:Z},!0),Ce;if(!q.aiDataContract){if(Z==="measurements")Ce=L(q,"number",Z);else if(Z==="properties")Ce=L(q,"string",Z);else if(Z==="tags")Ce=L(q,"string",Z);else if(tt(q))Ce=D(q,Z);else{Rr(v,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:Z},!0);try{hd()[Z8](q),Ce=q}catch(Te){Rr(v,1,48,Te&&Qe(Te[r_])?Te[r_]():"Error serializing object",null,!0)}}return Ce}return q[ae]=!0,oe(q.aiDataContract,function(Te,Le){var Ke=Qe(Le)?Le()&1:Le&1,Me=Qe(Le)?Le()&4:Le&4,je=Le&2,ut=q[Te]!==void 0,rt=ke(q[Te])&&q[Te]!==null;if(Ke&&!ut&&!je)Rr(v,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:Z});else if(!Me){var Ct=void 0;rt?je?Ct=D(q[Te],Te):Ct=S(q[Te],Te):Ct=q[Te],Ct!==void 0&&(Ce[Te]=Ct)}}),delete q[ae],Ce}s(S,"_serializeObject");function D(q,Z){var ae;if(q)if(!tt(q))Rr(v,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:Z},!0);else{ae=[];for(var Ce=0;Ce<q[Ri];Ce++){var Te=q[Ce],Le=S(Te,Z+"["+Ce+"]");ae[v1](Le)}}return ae}s(D,"_serializeArray");function L(q,Z,ae){var Ce;return q&&(Ce={},oe(q,function(Te,Le){if(Z==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[r_]?Ce[Te]=Le[r_]():Ce[Te]="invalid field: toString() is not defined.";else if(Z==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ke=parseFloat(Le);Ce[Te]=Ke}else Ce[Te]="invalid field: "+ae+" is of unknown type.",Rr(v,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),Dht=8,Nht=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(v){var T=this.getHashCode(v)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(v){if(v==="")return 0;for(;v[Ri]<Dht;)v=v[Pk](v);for(var T=5381,S=0;S<v[Ri];++S)T=(T<<5)+T+v.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),Lht=function(){function A(){var v=this,T=new Nht,S=new USe;v.getSamplingScore=function(D){var L=0;return D[$l]&&D[$l][S.userId]?L=T.getHashCodeScore(D[$l][S.userId]):D.ext&&D.ext.user&&D.ext.user.id?L=T[xht](D.ext.user.id):D[$l]&&D[$l][S.operationId]?L=T.getHashCodeScore(D[$l][S.operationId]):D.ext&&D.ext.telemetryTrace&&D.ext.telemetryTrace[X8]?L=T.getHashCodeScore(D.ext.telemetryTrace[X8]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),Mht=function(){function A(v,T){this.INT_MAX_VALUE=2147483647;var S=T||Uw(null);(v>100||v<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:v},!0),v=100),this[bq]=v,this.samplingScoreGenerator=new Lht}return s(A,"Sample"),A.prototype.isSampledIn=function(v){var T=this[bq],S=!1;return T==null||T>=100||v.baseType===z8[HA]?!0:(S=this.samplingScoreGenerator.getSamplingScore(v)<T,S)},A}(),Rs,x1,GA=void 0,JSe="",Fht=65e3;function XSe(A){try{return A.responseText}catch{}return null}s(XSe,"_getResponseText");function Oht(A){return A&&A.sendPOST}s(Oht,"isOverrideFn");var ZSe=Zt((Rs={endpointUrl:k8(le,zse+bk)},Rs[lae]=Np(),Rs.maxBatchInterval=15e3,Rs[HSe]=102400,Rs.disableTelemetry=Np(),Rs[GSe]=Np(!0),Rs.isRetryDisabled=Np(),Rs[mae]=Np(!0),Rs[VSe]=Np(!0),Rs.disableXhr=Np(),Rs[jSe]=Np(),Rs[pae]=Np(),Rs[s6]=GA,Rs.namePrefix=GA,Rs.samplingPercentage=k8(Qht,100),Rs[fae]=GA,Rs.convertUndefined=GA,Rs.eventsLimitInMem=1e4,Rs[uae]=!1,Rs.httpXHROverride={isVal:Oht,v:GA},Rs[WSe]=Np(),Rs.transports=GA,Rs.retryCodes=GA,Rs.maxRetryCnt={isVal:ht,v:10},Rs));function Qht(A){return!isNaN(A)&&A>0&&A<=100}s(Qht,"_chkSampling");var Uht=(x1={},x1[_k.dataType]=zSe,x1[Aq.dataType]=kht,x1[hq.dataType]=Sht,x1[yq.dataType]=Rht,x1[mq.dataType]=wht,x1[z8.dataType]=_ht,x1[gq.dataType]=Tht,x1),e2e=function(A){bw(v,A);function v(){var T=A.call(this)||this;T.priority=1001,T.identifier=vht;var S,D,L,q,Z,ae,Ce,Te=0,Le,Ke,Me,je,ut,rt,Ct,Mt,Yt,yr,Kn,Di,Ni,Bo,An,Hr,Li,ea,ss,Ot,Wr,Io,wt,Pn,Ca,Do,gl;return jl(v,T,function(ct,Ec){r2e(),ct.pause=function(){Yx(),L=!0},ct.resume=function(){L&&(L=!1,D=null,Wo(),Lk())},ct.flush=function(qe,At,er){if(qe===void 0&&(qe=!0),!L){Yx();try{return ct[n6](qe,null,er||1)}catch(Br){Rr(ct[Pu](),1,22,"flush failed, telemetry will not be collected: "+jc(Br),{exception:Ft(Br)})}}},ct.onunloadFlush=function(){if(!L)if(Ct||Ot)try{return ct[n6](!0,lf,2)}catch(qe){Rr(ct[Pu](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+jc(qe),{exception:Ft(qe)})}else ct.flush(!1)},ct.addHeader=function(qe,At){Ce[qe]=At},ct[dae]=function(qe,At,er,Br){ct.isInitialized()&&Rr(ct[Pu](),1,28,"Sender is already initialized"),Ec[dae](qe,At,er,Br);var Qn=ct.identifier;Z=new Bht(At.logger),S=0,D=null,ct[i6]=null,ae=0;var En=ct[Pu]();Me=fSe(wh("Sender"),At.evtNamespace&&At.evtNamespace()),Ke=Eht(Me),ct._addHook(_h(qe,function(co){var Ja=co.cfg;Ja.storagePrefix&&Wmt(Ja.storagePrefix);var h0=Fx(null,Ja,At),Ci=h0.getExtCfg(Qn,ZSe),n2e=Ci[o6];if(je&&n2e===je){var bae=Ja[o6];bae&&bae!==n2e&&(Ci[o6]=bae)}Tt(Ci[s6])&&(Ci[s6]=Ja[s6]),Ye(ct,"_senderConfig",{g:s(function(){return Ci},"g")}),ut!==Ci[o6]&&(je=ut=Ci[o6]),At.activeStatus()===IA.PENDING?ct.pause():At.activeStatus()===IA.ACTIVE&&ct.resume(),yr&&yr!==Ci[fae]&&jr(yr,function(Yl){delete Ce[Yl.header]}),rt=Ci[HSe],Ct=(Ci[pae]===!1||Ci[mae]===!1)&&DA(),Mt=Ci[pae]===!1&&DA(),Yt=Ci[mae]===!1&&DA(),Ot=Ci[WSe],Wr=!!Ci.disableXhr,gl=Ci.retryCodes;var Iae=Ci[uae],Mk=!!Ci[GSe]&&(!!Iae||wSe()),i2e=Ci.namePrefix,Ght=Mk!==Hr||Mk&&ea!==i2e||Mk&&Li!==Iae;if(ct[WA]){if(Ght)try{ct[WA]=ct[WA].createNew(En,Ci,Mk)}catch(Yl){Rr(ct[Pu](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+jc(Yl),{exception:Ft(Yl)})}Wo()}else ct[WA]=Mk?new KSe(En,Ci):new Eae(En,Ci);ea=i2e,Hr=Mk,Li=Iae,Io=!Ci[jSe]&&Lw(!0),Ca=!!Ci[VSe],ct._sample=new Mht(Ci.samplingPercentage,En),Di=Ci[s6],!Tt(Di)&&!t2e(Di,Ja)&&Rr(En,1,100,"Invalid Instrumentation key "+Di),yr=Ci[fae],he(je)&&!bSe(je)&&yr&&yr[Ri]>0?jr(yr,function(Yl){T.addHeader(Yl.header,Yl.value)}):yr=null,ss=Ci.enableSendPromise;var o2e=Al();Do?Do.SetConfig(o2e):(Do=new Cc,Do[dae](o2e,En));var _q=Ci.httpXHROverride,Sq=null,u6=null,jht=xU([3,1,2],Ci.transports);Sq=Do&&Do[vq](jht,!1);var Tae=Do&&Do.getFallbackInst();wt=s(function(Yl,l_){return Lr(Tae,Yl,l_)},"_xhrSend"),Pn=s(function(Yl,l_){return Lr(Tae,Yl,l_,!1)},"_fallbackSend"),Sq=Ot?_q:Sq||_q||Tae,ct[i6]=function(Yl,l_){return Lr(Sq,Yl,l_)},Io&&(Le=Nk);var wae=xU([3,1],Ci.unloadTransports);Io||(wae=wae.filter(function(Yl){return Yl!==2})),u6=Do&&Do[vq](wae,!0),u6=Ot?_q:u6||_q,(Ot||Ci.unloadTransports||!Le)&&u6&&(Le=s(function(Yl,l_){return Lr(u6,Yl,l_)},"_syncUnloadSender")),Le||(Le=wt),Kn=Ci.disableTelemetry,Ni=Ci.convertUndefined||GA,Bo=Ci.isRetryDisabled,An=Ci.maxBatchInterval}))},ct.processTelemetry=function(qe,At){At=ct._getTelCtx(At);var er=At[Pu]();try{var Br=kh(qe,er);if(!Br)return;var Qn=zx(qe,er);if(!Qn)return;var En=Z.serialize(Qn),co=ct[WA];Wo(En);var Ja={item:En,cnt:0};co[n_](Ja),Lk()}catch(h0){Rr(er,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+jc(h0),{exception:Ft(h0)})}ct.processNext(qe,At)},ct.isCompletelyIdle=function(){return!L&&Te===0&&ct._buffer[i_]()===0},ct.getOfflineListener=function(){return Ke},ct._xhrReadyStateChange=function(qe,At,er){if(!Bh(At))return Op(qe,At,er)},ct[n6]=function(qe,At,er){qe===void 0&&(qe=!0);var Br;if(!L)try{var Qn=ct[WA];if(Kn)Qn[kk]();else if(Qn[i_]()>0){var En=Qn.getItems();wq(er||0,qe),At?Br=At.call(ct,En,qe):Br=ct[i6](En,qe)}Yx()}catch(Ja){var co=vx();(!co||co>9)&&Rr(ct[Pu](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+jc(Ja),{exception:Ft(Ja)})}return Br},ct.getOfflineSupport=function(){return{getUrl:s(function(){return je},"getUrl"),createPayload:pt,serialize:ta,batch:zl,shouldProcess:s(function(qe){return!!kh(qe)},"shouldProcess")}},ct._doTeardown=function(qe,At){ct.onunloadFlush(),Rx(Ke,!1),r2e()},ct[o_]=function(qe,At,er){if(!Bh(qe))return Ad(qe,At)},ct[hae]=function(qe,At){if(!Bh(qe))return Vx(qe,At)},ct[xq]=function(qe,At){if(!Bh(qe))return Rh(qe)},ct._xdrOnLoad=function(qe,At){if(!Bh(At))return Ea(qe,At)};function Ea(qe,At){var er=XSe(qe);if(qe&&(er+""=="200"||er===""))S=0,ct[xq](At,0);else{var Br=Nr(er);Br&&Br[gae]&&Br[gae]>Br[Aae]&&!Bo?ct[hae](At,Br):ct[o_](At,vU(qe))}}s(Ea,"_xdrOnLoad");function Al(){try{var qe={xdrOnComplete:s(function(er,Br,Qn){var En=$x(Qn);if(En)return Ea(er,En)},"xdrOnComplete"),fetchOnComplete:s(function(er,Br,Qn,En){var co=$x(En);if(co)return ks(er.status,co,er.url,co[Ri],er.statusText,Qn||"")},"fetchOnComplete"),xhrOnComplete:s(function(er,Br,Qn){var En=$x(Qn);if(En)return Op(er,En,En[Ri])},"xhrOnComplete"),beaconOnRetry:s(function(er,Br,Qn){return Ph(er,Br,Qn)},"beaconOnRetry")},At={enableSendPromise:ss,isOneDs:!1,disableCredentials:!1,disableXhr:Wr,disableBeacon:!Yt,disableBeaconSync:!Mt,senderOnCompleteCallBack:qe};return At}catch{}return null}s(Al,"_getSendPostMgrConfig");function Op(qe,At,er){qe.readyState===4&&ks(qe.status,At,qe.responseURL,er,rk(qe),XSe(qe)||qe.response)}s(Op,"_xhrReadyStateChange");function Ad(qe,At,er){Rr(ct[Pu](),2,26,"Failed to send telemetry.",{message:At}),ct._buffer&&ct._buffer[e6](qe)}s(Ad,"_onError");function Vx(qe,At){for(var er=[],Br=[],Qn=At.errors.reverse(),En=0,co=Qn;En<co.length;En++){var Ja=co[En],h0=qe.splice(Ja.index,1)[0];Kx(Ja.statusCode)?Br[v1](h0):er[v1](h0)}qe[Ri]>0&&ct[xq](qe,At[Aae]),er[Ri]>0&&ct[o_](er,rk(null,["partial success",At[Aae],"of",At.itemsReceived].join(" "))),Br[Ri]>0&&(l6(Br),Rr(ct[Pu](),2,40,"Partial success. Delivered: "+qe[Ri]+", Failed: "+er[Ri]+". Will retry to send "+Br[Ri]+" our of "+At[gae]+" items"))}s(Vx,"_onPartialSuccess");function Rh(qe,At){ct._buffer&&ct._buffer[e6](qe)}s(Rh,"_onSuccess");function $x(qe){try{if(qe){var At=qe,er=At.oriPayload;return er&&er[Ri]?er:null}}catch{}return null}s($x,"_getPayloadArr");function kh(qe,At){if(Kn)return!1;if(!qe)return At&&Rr(At,1,7,"Cannot send empty telemetry"),!1;if(qe.baseData&&!qe[yae])return At&&Rr(At,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(qe[yae]||(qe[yae]="EventData"),!ct[i6])return At&&Rr(At,1,28,"Sender was not initialized"),!1;if(hr(qe))qe[mSe]=ct._sample[bq];else return At&&Rr(At,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ct._sample[bq]}),!1;return!0}s(kh,"_validate");function zx(qe,At){var er=qe.iKey||Di,Br=v.constructEnvelope(qe,er,At,Ni);if(!Br){Rr(At,1,47,"Unable to create an AppInsights envelope");return}var Qn=!1;if(qe[$l]&&qe[$l][$se]&&(jr(qe[$l][$se],function(En){try{En&&En(Br)===!1&&(Qn=!0,pk(At,"Telemetry processor check returns false"))}catch(co){Rr(At,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+jc(co),{exception:Ft(co)},!0)}}),delete qe[$l][$se]),!Qn)return Br}s(zx,"_getEnvelope");function ta(qe){var At=JSe,er=ct[Pu]();try{var Br=kh(qe,er),Qn=null;Br&&(Qn=zx(qe,er)),Qn&&(At=Z.serialize(Qn))}catch{}return At}s(ta,"_serialize");function zl(qe){var At=JSe;return qe&&qe[Ri]&&(At="["+qe.join(",")+"]"),At}s(zl,"_batch");function pt(qe){var At=Qo();return{urlString:je,data:qe,headers:At}}s(pt,"_createPayload");function hr(qe){return ct._sample.isSampledIn(qe)}s(hr,"_isSampledIn");function Fn(qe,At,er,Br){At===200&&qe?ct._onSuccess(qe,qe[Ri]):Br&&ct[o_](qe,Br)}s(Fn,"_getOnComplete");function Lr(qe,At,er,Br){Br===void 0&&(Br=!0);var Qn=s(function(Ja,h0,Ci){return Fn(At,Ja,h0,Ci)},"onComplete"),En=On(At),co=qe&&qe.sendPOST;return co&&En?(Br&&ct._buffer[Eq](At),co(En,Qn,!er)):null}s(Lr,"_doSend");function On(qe){if(tt(qe)&&qe[Ri]>0){var At=ct[WA].batchPayloads(qe),er=Qo(),Br={data:At,urlString:je,headers:er,disableXhrSync:Wr,disableFetchKeepAlive:!Io,oriPayload:qe};return Br}return null}s(On,"_getPayload");function Qo(){try{var qe=Ce||{};return bSe(je)&&(qe[gSe[6]]=gSe[7]),qe}catch{}return null}s(Qo,"_getHeaders");function Wo(qe){var At=qe?qe[Ri]:0;return ct[WA].size()+At>rt?((!Ke||Ke.isOnline())&&ct[n6](!0,null,10),!0):!1}s(Wo,"_checkMaxSize");function ks(qe,At,er,Br,Qn,En){var co=null;if(ct._appId||(co=Nr(En),co&&co.appId&&(ct._appId=co.appId)),(qe<200||qe>=300)&&qe!==0){if((qe===301||qe===307||qe===308)&&!Bu(er)){ct[o_](At,Qn);return}if(Ke&&!Ke.isOnline()){if(!Bo){var Ja=10;l6(At,Ja),Rr(ct[Pu](),2,40,". Offline - Response Code: ".concat(qe,". Offline status: ").concat(!Ke.isOnline(),". Will retry to send ").concat(At.length," items."))}return}!Bo&&Kx(qe)?(l6(At),Rr(ct[Pu](),2,40,". Response code "+qe+". Will retry to send "+At[Ri]+" items.")):ct[o_](At,Qn)}else Bu(er),qe===206?(co||(co=Nr(En)),co&&!Bo?ct[hae](At,co):ct[o_](At,Qn)):(S=0,ct[xq](At,Br))}s(ks,"_checkResponsStatus");function Bu(qe){return ae>=10?!1:!re(qe)&&qe!==""&&qe!==je?(je=qe,++ae,!0):!1}s(Bu,"_checkAndUpdateEndPointUrl");function lf(qe,At){if(Le)Le(qe,!1);else{var er=Do&&Do[vq]([3],!0);return Lr(er,qe,At)}}s(lf,"_doUnloadSend");function Ph(qe,At,er){var Br=qe,Qn=Br&&Br.oriPayload;if(Ca)Pn&&Pn(Qn,!0),Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var En=[],co=0;co<Qn[Ri];co++){var Ja=Qn[co],h0=[Ja],Ci=On(h0);er(Ci,At)?ct._onSuccess(h0,h0[Ri]):En[v1](Ja)}En[Ri]>0&&(Pn&&Pn(En,!0),Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Ph,"_onBeaconRetry");function Bh(qe){try{if(qe&&qe[Ri])return he(qe[0])}catch{}return null}s(Bh,"_isStringArr");function Nk(qe,At){var er=null;if(tt(qe)){for(var Br=qe[Ri],Qn=0;Qn<qe[Ri];Qn++)Br+=qe[Qn].item[Ri];var En=Do.getSyncFetchPayload();En+Br<=Fht?er=2:DA()?er=3:(er=1,Rr(ct[Pu](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var co=Do&&Do[vq]([er],!0);return Lr(co,qe,At)}return null}s(Nk,"_fetchKeepAliveSender");function l6(qe,At){if(At===void 0&&(At=1),!(!qe||qe[Ri]===0)){var er=ct[WA];er[e6](qe),S++;for(var Br=0,Qn=qe;Br<Qn.length;Br++){var En=Qn[Br];En.cnt=En.cnt||0,En.cnt++,er[n_](En)}xae(At),Lk()}}s(l6,"_resendPayload");function xae(qe){var At=10,er;if(S<=1)er=At;else{var Br=(Math.pow(2,S)-1)/2,Qn=ZC(Math.random()*Br*At)+1;Qn=qe*Qn,er=_e(ni(Qn,3600),At)}var En=yA()+er*1e3;D=En}s(xae,"_setRetryTime");function Lk(){if(!q&&!L){var qe=D?_e(0,D-yA()):0,At=_e(An,qe);q=vA(function(){q=null,ct[n6](!0,null,1)},At)}}s(Lk,"_setupTimer");function Yx(){q&&q.cancel(),q=null,D=null}s(Yx,"_clearScheduledTimer");function Kx(qe){return re(gl)?qe===401||qe===408||qe===429||qe===500||qe===502||qe===503||qe===504:gl[Ri]&&gl.indexOf(qe)>-1}s(Kx,"_isRetriable");function Tq(){var qe="getNotifyMgr";return ct.core[qe]?ct.core[qe]():ct.core._notificationManager}s(Tq,"_getNotifyMgr");function wq(qe,At){var er=Tq();if(er&&er.eventsSendRequest)try{er.eventsSendRequest(qe,At)}catch(Br){Rr(ct[Pu](),1,74,"send request notification failed: "+jc(Br),{exception:Ft(Br)})}}s(wq,"_notifySendRequest");function t2e(qe,At){var er=At.disableInstrumentationKeyValidation,Br=re(er)?!1:er;if(Br)return!0;var Qn="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",En=new RegExp(Qn);return En.test(qe)}s(t2e,"_validateInstrumentationKey");function r2e(){ct[i6]=null,ct[WA]=null,ct._appId=null,ct._sample=null,Ce={},Ke=null,S=0,D=null,L=!1,q=null,Z=null,ae=0,Te=0,Le=null,Me=null,je=null,ut=null,rt=0,Ct=!1,yr=null,Kn=!1,Di=null,Ni=GA,Bo=!1,Hr=null,ea=GA,Wr=!1,Io=!1,Ca=!1,wt=null,Pn=null,Do=null,Ye(ct,"_senderConfig",{g:s(function(){return EU({},ZSe)},"g")})}s(r2e,"_initDefaults")}),T}return s(v,"Sender"),v.constructEnvelope=function(T,S,D,L){var q;S!==T.iKey&&!re(S)?q=Ch(Ch({},T),{iKey:S}):q=T;var Z=Uht[q.baseType]||zSe;return Z(D,q,L)},v}(gt),Bk="instrumentationKey",Iq="connectionString",a6="endpointUrl",c6="userOverrideEndpointUrl",Dk,vae=void 0,qht=(Dk={diagnosticLogInterval:k8(Hht,1e4)},Dk[Iq]=vae,Dk.endpointUrl=vae,Dk[Bk]=vae,Dk.extensionConfig={},Dk);function Hht(A){return A&&A>0}s(Hht,"_chkDiagLevel");var Wht=function(){function A(v){var T=new _t,S;(re(v)||re(v[Bk])&&re(v[Iq]))&&Yr("Invalid input configuration"),jl(A,this,function(L){Ye(L,"config",{g:s(function(){return S},"g")}),q(),L.initialize=q,L.track=D,h8(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function q(){var Z=cf(v||{},qht);S=Z.cfg,T.addUnloadHook(_h(Z,function(){var ae=S[Iq];if(Tt(ae)){var Ce=$5(function(Me,je){rf(ae,function(ut){var rt=ut.value,Ct=S[Bk];if(!ut.rejected&&rt){S[Iq]=rt;var Mt=rae(rt);Ct=Mt.instrumentationkey||Ct}Me(Ct)})}),Te=$5(function(Me,je){rf(ae,function(ut){var rt=ut.value,Ct=S[a6];if(!ut.rejected&&rt){var Mt=rae(rt),Yt=Mt.ingestionendpoint;Ct=Yt?Yt+bk:Ct}Me(Ct)})});S[Bk]=Ce,S[a6]=S[c6]||Te}if(he(ae)){var Le=rae(ae),Ke=Le.ingestionendpoint;S[a6]=S[c6]?S[c6]:Ke+bk,S[Bk]=Le.instrumentationkey||S[Bk]}S[a6]=S[c6]?S[c6]:S[a6]})),T.initialize(S,[new e2e])}s(q,"_initialize")});function D(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(D,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=_t,t.ApplicationInsights=Wht,t.Sender=e2e,t.SeverityLevel=Cht,t.arrForEach=jr,t.isNullOrUndefined=re,t.proxyFunctions=h8,t.throwError=Yr})});var Ide=U((AQr,l8e)=>{d();var K4=1e3,J4=K4*60,X4=J4*60,H_=X4*24,uTt=H_*7,dTt=H_*365.25;l8e.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return fTt(t);if(r==="number"&&isFinite(t))return e.long?mTt(t):pTt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function fTt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*dTt;case"weeks":case"week":case"w":return r*uTt;case"days":case"day":case"d":return r*H_;case"hours":case"hour":case"hrs":case"hr":case"h":return r*X4;case"minutes":case"minute":case"mins":case"min":case"m":return r*J4;case"seconds":case"second":case"secs":case"sec":case"s":return r*K4;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(fTt,"parse");function pTt(t){var e=Math.abs(t);return e>=H_?Math.round(t/H_)+"d":e>=X4?Math.round(t/X4)+"h":e>=J4?Math.round(t/J4)+"m":e>=K4?Math.round(t/K4)+"s":t+"ms"}s(pTt,"fmtShort");function mTt(t){var e=Math.abs(t);return e>=H_?BG(t,e,H_,"day"):e>=X4?BG(t,e,X4,"hour"):e>=J4?BG(t,e,J4,"minute"):e>=K4?BG(t,e,K4,"second"):t+" ms"}s(mTt,"fmtLong");function BG(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(BG,"plural")});var Tde=U((EQr,u8e)=>{d();function hTt(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Ide(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(f){let p,m=null,h,g;function y(...E){if(!y.enabled)return;let x=y,b=Number(new Date),_=b-(p||b);x.diff=_,x.prev=p,x.curr=b,p=b,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let k=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(N,M)=>{if(N==="%%")return"%";k++;let J=r.formatters[M];if(typeof J=="function"){let pe=E[k];N=J.call(x,pe),E.splice(k,1),k--}return N}),r.formatArgs.call(x,E),(x.log||r.log).apply(x,E)}return s(y,"debug"),y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(f)),g),"get"),set:s(E=>{m=E},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(f,p){let m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}s(n,"extend");function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let p,m=(typeof f=="string"?f:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(f=m[p].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}s(i,"enable");function o(){let f=[...r.names.map(c),...r.skips.map(c).map(p=>"-"+p)].join(",");return r.enable(""),f}s(o,"disable");function a(f){if(f[f.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(f))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(f))return!0;return!1}s(a,"enabled");function c(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}s(c,"toNamespace");function l(f){return f instanceof Error?f.stack||f.message:f}s(l,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(hTt,"setup");u8e.exports=hTt});var d8e=U((B0,DG)=>{d();B0.formatArgs=ATt;B0.save=yTt;B0.load=CTt;B0.useColors=gTt;B0.storage=ETt();B0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();B0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gTt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(gTt,"useColors");function ATt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+DG.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(ATt,"formatArgs");B0.log=console.debug||console.log||(()=>{});function yTt(t){try{t?B0.storage.setItem("debug",t):B0.storage.removeItem("debug")}catch{}}s(yTt,"save");function CTt(){let t;try{t=B0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(CTt,"load");function ETt(){try{return localStorage}catch{}}s(ETt,"localstorage");DG.exports=Tde()(B0);var{formatters:vTt}=DG.exports;vTt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var p8e=U((TQr,f8e)=>{"use strict";d();f8e.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var g8e=U((_Qr,h8e)=>{"use strict";d();var xTt=require("os"),m8e=require("tty"),rm=p8e(),{env:Tl}=process,Rb;rm("no-color")||rm("no-colors")||rm("color=false")||rm("color=never")?Rb=0:(rm("color")||rm("colors")||rm("color=true")||rm("color=always"))&&(Rb=1);"FORCE_COLOR"in Tl&&(Tl.FORCE_COLOR==="true"?Rb=1:Tl.FORCE_COLOR==="false"?Rb=0:Rb=Tl.FORCE_COLOR.length===0?1:Math.min(parseInt(Tl.FORCE_COLOR,10),3));function wde(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(wde,"translateLevel");function _de(t,e){if(Rb===0)return 0;if(rm("color=16m")||rm("color=full")||rm("color=truecolor"))return 3;if(rm("color=256"))return 2;if(t&&!e&&Rb===void 0)return 0;let r=Rb||0;if(Tl.TERM==="dumb")return r;if(process.platform==="win32"){let n=xTt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Tl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Tl)||Tl.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Tl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Tl.TEAMCITY_VERSION)?1:0;if(Tl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Tl){let n=parseInt((Tl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Tl.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Tl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Tl.TERM)||"COLORTERM"in Tl?1:r}s(_de,"supportsColor");function bTt(t){let e=_de(t,t&&t.isTTY);return wde(e)}s(bTt,"getSupportLevel");h8e.exports={supportsColor:bTt,stdout:wde(_de(!0,m8e.isatty(1))),stderr:wde(_de(!0,m8e.isatty(2)))}});var y8e=U((au,LG)=>{d();var ITt=require("tty"),NG=require("util");au.init=PTt;au.log=STt;au.formatArgs=wTt;au.save=RTt;au.load=kTt;au.useColors=TTt;au.destroy=NG.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");au.colors=[6,2,3,4,5,1];try{let t=g8e();t&&(t.stderr||t).level>=2&&(au.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}au.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function TTt(){return"colors"in au.inspectOpts?!!au.inspectOpts.colors:ITt.isatty(process.stderr.fd)}s(TTt,"useColors");function wTt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+LG.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=_Tt()+e+" "+t[0]}s(wTt,"formatArgs");function _Tt(){return au.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(_Tt,"getDate");function STt(...t){return process.stderr.write(NG.format(...t)+`
`)}s(STt,"log");function RTt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(RTt,"save");function kTt(){return process.env.DEBUG}s(kTt,"load");function PTt(t){t.inspectOpts={};let e=Object.keys(au.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=au.inspectOpts[e[r]]}s(PTt,"init");LG.exports=Tde()(au);var{formatters:A8e}=LG.exports;A8e.o=function(t){return this.inspectOpts.colors=this.useColors,NG.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};A8e.O=function(t){return this.inspectOpts.colors=this.useColors,NG.inspect(t,this.inspectOpts)}});var fy=U((BQr,Sde)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Sde.exports=d8e():Sde.exports=y8e()});var v8e=U(xf=>{"use strict";d();var BTt=xf&&xf.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),DTt=xf&&xf.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),C8e=xf&&xf.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&BTt(e,t,r);return DTt(e,t),e};Object.defineProperty(xf,"__esModule",{value:!0});xf.req=xf.json=xf.toBuffer=void 0;var NTt=C8e(require("http")),LTt=C8e(require("https"));async function E8e(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}s(E8e,"toBuffer");xf.toBuffer=E8e;async function MTt(t){let r=(await E8e(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let i=n;throw i.message+=` (input: ${r})`,i}}s(MTt,"json");xf.json=MTt;function FTt(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?LTt:NTt).request(t,e),i=new Promise((o,a)=>{n.once("response",o).once("error",a).end()});return n.then=i.then.bind(i),n}s(FTt,"req");xf.req=FTt});var kde=U(D0=>{"use strict";d();var b8e=D0&&D0.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),OTt=D0&&D0.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),I8e=D0&&D0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&b8e(e,t,r);return OTt(e,t),e},QTt=D0&&D0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&b8e(e,t,r)};Object.defineProperty(D0,"__esModule",{value:!0});D0.Agent=void 0;var UTt=I8e(require("net")),x8e=I8e(require("http")),qTt=require("https");QTt(v8e(),D0);var py=Symbol("AgentBaseInternalState"),Rde=class extends x8e.Agent{static{s(this,"Agent")}constructor(e){super(e),this[py]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new UTt.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],i=n.indexOf(r);i!==-1&&(n.splice(i,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return(typeof e.secureEndpoint=="boolean"?e.secureEndpoint:this.isSecureEndpoint(e))?qTt.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let i={...r,secureEndpoint:this.isSecureEndpoint(r)},o=this.getName(i),a=this.incrementSockets(o);Promise.resolve().then(()=>this.connect(e,i)).then(c=>{if(this.decrementSockets(o,a),c instanceof x8e.Agent)return c.addRequest(e,i);this[py].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(o,a),n(c)})}createConnection(){let e=this[py].currentSocket;if(this[py].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[py].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[py]&&(this[py].defaultPort=e)}get protocol(){return this[py].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[py]&&(this[py].protocol=e)}};D0.Agent=Rde});var T8e=U(Z4=>{"use strict";d();var HTt=Z4&&Z4.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Z4,"__esModule",{value:!0});Z4.parseProxyResponse=void 0;var WTt=HTt(fy()),MG=(0,WTt.default)("https-proxy-agent:parse-proxy-response");function GTt(t){return new Promise((e,r)=>{let n=0,i=[];function o(){let f=t.read();f?u(f):t.once("readable",o)}s(o,"read");function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",o)}s(a,"cleanup");function c(){a(),MG("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}s(c,"onend");function l(f){a(),MG("onerror %o",f),r(f)}s(l,"onerror");function u(f){i.push(f),n+=f.length;let p=Buffer.concat(i,n),m=p.indexOf(`\r
\r
`);if(m===-1){MG("have not received end of HTTP headers yet..."),o();return}let h=p.slice(0,m).toString("ascii").split(`\r
`),g=h.shift();if(!g)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let y=g.split(" "),E=+y[1],x=y.slice(2).join(" "),b={};for(let _ of h){if(!_)continue;let k=_.indexOf(":");if(k===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${_}"`));let P=_.slice(0,k).toLowerCase(),N=_.slice(k+1).trimStart(),M=b[P];typeof M=="string"?b[P]=[M,N]:Array.isArray(M)?M.push(N):b[P]=N}MG("got proxy server response: %o %o",g,b),a(),e({connect:{statusCode:E,statusText:x,headers:b},buffered:p})}s(u,"ondata"),t.on("error",l),t.on("end",c),o()})}s(GTt,"parseProxyResponse");Z4.parseProxyResponse=GTt});var k8e=U(nm=>{"use strict";d();var jTt=nm&&nm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),VTt=nm&&nm.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S8e=nm&&nm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jTt(e,t,r);return VTt(e,t),e},R8e=nm&&nm.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nm,"__esModule",{value:!0});nm.HttpsProxyAgent=void 0;var Pde=S8e(require("net")),w8e=S8e(require("tls")),$Tt=R8e(require("assert")),zTt=R8e(fy()),YTt=kde(),KTt=require("url"),JTt=T8e(),f9=(0,zTt.default)("https-proxy-agent"),FG=class extends YTt.Agent{static{s(this,"HttpsProxyAgent")}constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new KTt.URL(e):e,this.proxyHeaders=r?.headers??{},f9("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?_8e(r,"headers"):null,host:n,port:i}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let i;if(n.protocol==="https:"){f9("Creating `tls.Socket`: %o",this.connectOpts);let m=this.connectOpts.servername||this.connectOpts.host;i=w8e.connect({...this.connectOpts,servername:m})}else f9("Creating `net.Socket`: %o",this.connectOpts),i=Pde.connect(this.connectOpts);let o=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=Pde.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let m=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;o["Proxy-Authorization"]=`Basic ${Buffer.from(m).toString("base64")}`}o.Host=`${a}:${r.port}`,o["Proxy-Connection"]||(o["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let m of Object.keys(o))c+=`${m}: ${o[m]}\r
`;let l=(0,JTt.parseProxyResponse)(i);i.write(`${c}\r
`);let{connect:u,buffered:f}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200){if(e.once("socket",XTt),r.secureEndpoint){f9("Upgrading socket connection to TLS");let m=r.servername||r.host;return w8e.connect({..._8e(r,"host","path","port"),socket:i,servername:m})}return i}i.destroy();let p=new Pde.Socket({writable:!1});return p.readable=!0,e.once("socket",m=>{f9("Replaying proxy buffer for failed request"),(0,$Tt.default)(m.listenerCount("data")>0),m.push(f),m.push(null)}),p}};FG.protocols=["http","https"];nm.HttpsProxyAgent=FG;function XTt(t){t.resume()}s(XTt,"resume");function _8e(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(_8e,"omit")});var D8e=U(im=>{"use strict";d();var ZTt=im&&im.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ewt=im&&im.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),B8e=im&&im.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ZTt(e,t,r);return ewt(e,t),e},twt=im&&im.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(im,"__esModule",{value:!0});im.HttpProxyAgent=void 0;var rwt=B8e(require("net")),nwt=B8e(require("tls")),iwt=twt(fy()),owt=require("events"),swt=kde(),P8e=require("url"),eP=(0,iwt.default)("http-proxy-agent"),OG=class extends swt.Agent{static{s(this,"HttpProxyAgent")}constructor(e,r){super(r),this.proxy=typeof e=="string"?new P8e.URL(e):e,this.proxyHeaders=r?.headers??{},eP("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),i=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?awt(r,"headers"):null,host:n,port:i}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,i=r.secureEndpoint?"https:":"http:",o=e.getHeader("host")||"localhost",a=`${i}//${o}`,c=new P8e.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let f=l[u];f&&e.setHeader(u,f)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,i;eP("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(eP("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,i=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(i),eP("Output buffer: %o",e.outputData[0].data));let o;return this.proxy.protocol==="https:"?(eP("Creating `tls.Socket`: %o",this.connectOpts),o=nwt.connect(this.connectOpts)):(eP("Creating `net.Socket`: %o",this.connectOpts),o=rwt.connect(this.connectOpts)),await(0,owt.once)(o,"connect"),o}};OG.protocols=["http","https"];im.HttpProxyAgent=OG;function awt(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}s(awt,"omit")});var t6e=U(ZG=>{"use strict";d();Object.defineProperty(ZG,"__esModule",{value:!0});ZG.state=void 0;ZG.state={instrumenterImplementation:void 0}});var l6e=U(ij=>{"use strict";d();Object.defineProperty(ij,"__esModule",{value:!0});ij.state=void 0;ij.state={operationRequestMap:new WeakMap}});var IP=U((B0e,p9e)=>{d();var Kj=require("buffer"),Iy=Kj.Buffer;function f9e(t,e){for(var r in t)e[r]=t[r]}s(f9e,"copyProps");Iy.from&&Iy.alloc&&Iy.allocUnsafe&&Iy.allocUnsafeSlow?p9e.exports=Kj:(f9e(Kj,B0e),B0e.Buffer=PS);function PS(t,e,r){return Iy(t,e,r)}s(PS,"SafeBuffer");PS.prototype=Object.create(Iy.prototype);f9e(Iy,PS);PS.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Iy(t,e,r)};PS.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Iy(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};PS.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Iy(t)};PS.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Kj.SlowBuffer(t)}});var D0e=U((nsn,m9e)=>{d();var Jj=IP().Buffer,QSt=require("stream"),USt=require("util");function Xj(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=Jj.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=Jj.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}s(Xj,"DataStream");USt.inherits(Xj,QSt);Xj.prototype.write=s(function(e){this.buffer=Jj.concat([this.buffer,Jj.from(e)]),this.emit("data",e)},"write");Xj.prototype.end=s(function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},"end");m9e.exports=Xj});var g9e=U((ssn,h9e)=>{"use strict";d();function N0e(t){var e=(t/8|0)+(t%8===0?0:1);return e}s(N0e,"getParamSize");var qSt={ES256:N0e(256),ES384:N0e(384),ES512:N0e(521)};function HSt(t){var e=qSt[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}s(HSt,"getParamBytesForAlg");h9e.exports=HSt});var b9e=U((lsn,x9e)=>{"use strict";d();var Zj=IP().Buffer,y9e=g9e(),eV=128,C9e=0,WSt=32,GSt=16,jSt=2,E9e=GSt|WSt|C9e<<6,tV=jSt|C9e<<6;function VSt(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(VSt,"base64Url");function v9e(t){if(Zj.isBuffer(t))return t;if(typeof t=="string")return Zj.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}s(v9e,"signatureAsBuffer");function $St(t,e){t=v9e(t);var r=y9e(e),n=r+1,i=t.length,o=0;if(t[o++]!==E9e)throw new Error('Could not find expected "seq"');var a=t[o++];if(a===(eV|1)&&(a=t[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(t[o++]!==tV)throw new Error('Could not find expected "int" for "r"');var c=t[o++];if(i-o-2<c)throw new Error('"r" specified length of "'+c+'", only "'+(i-o-2)+'" available');if(n<c)throw new Error('"r" specified length of "'+c+'", max of "'+n+'" is acceptable');var l=o;if(o+=c,t[o++]!==tV)throw new Error('Could not find expected "int" for "s"');var u=t[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var f=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=r-c,m=r-u,h=Zj.allocUnsafe(p+c+m+u);for(o=0;o<p;++o)h[o]=0;t.copy(h,o,l+Math.max(-p,0),l+c),o=r;for(var g=o;o<g+m;++o)h[o]=0;return t.copy(h,o,f+Math.max(-m,0),f+u),h=h.toString("base64"),h=VSt(h),h}s($St,"derToJose");function A9e(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=eV;return i&&--n,n}s(A9e,"countPadding");function zSt(t,e){t=v9e(t);var r=y9e(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=A9e(t,0,r),o=A9e(t,r,t.length),a=r-i,c=r-o,l=2+a+1+1+c,u=l<eV,f=Zj.allocUnsafe((u?2:3)+l),p=0;return f[p++]=E9e,u?f[p++]=l:(f[p++]=eV|1,f[p++]=l&255),f[p++]=tV,f[p++]=a,i<0?(f[p++]=0,p+=t.copy(f,p,0,r)):p+=t.copy(f,p,i,r),f[p++]=tV,f[p++]=c,o<0?(f[p++]=0,t.copy(f,p,r)):t.copy(f,p,r+o),f}s(zSt,"joseToDer");x9e.exports={derToJose:$St,joseToDer:zSt}});var T9e=U((fsn,I9e)=>{"use strict";d();var IL=require("buffer").Buffer,L0e=require("buffer").SlowBuffer;I9e.exports=rV;function rV(t,e){if(!IL.isBuffer(t)||!IL.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}s(rV,"bufferEq");rV.install=function(){IL.prototype.equal=L0e.prototype.equal=s(function(e){return rV(this,e)},"equal")};var YSt=IL.prototype.equal,KSt=L0e.prototype.equal;rV.restore=function(){IL.prototype.equal=YSt,L0e.prototype.equal=KSt}});var Q0e=U((hsn,N9e)=>{d();var wP=IP().Buffer,am=require("crypto"),_9e=b9e(),w9e=require("util"),JSt=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,TL="secret must be a string or buffer",TP="key must be a string or a buffer",XSt="key must be a string, a buffer or an object",F0e=typeof am.createPublicKey=="function";F0e&&(TP+=" or a KeyObject",TL+="or a KeyObject");function S9e(t){if(!wP.isBuffer(t)&&typeof t!="string"&&(!F0e||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw sg(TP)}s(S9e,"checkIsPublicKey");function R9e(t){if(!wP.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw sg(XSt)}s(R9e,"checkIsPrivateKey");function ZSt(t){if(!wP.isBuffer(t)){if(typeof t=="string")return t;if(!F0e||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw sg(TL)}}s(ZSt,"checkIsSecretKey");function O0e(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(O0e,"fromBase64");function k9e(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}s(k9e,"toBase64");function sg(t){var e=[].slice.call(arguments,1),r=w9e.format.bind(w9e,t).apply(null,e);return new TypeError(r)}s(sg,"typeError");function e2t(t){return wP.isBuffer(t)||typeof t=="string"}s(e2t,"bufferOrString");function wL(t){return e2t(t)||(t=JSON.stringify(t)),t}s(wL,"normalizeInput");function P9e(t){return s(function(r,n){ZSt(n),r=wL(r);var i=am.createHmac("sha"+t,n),o=(i.update(r),i.digest("base64"));return O0e(o)},"sign")}s(P9e,"createHmacSigner");var M0e,t2t="timingSafeEqual"in am?s(function(e,r){return e.byteLength!==r.byteLength?!1:am.timingSafeEqual(e,r)},"timingSafeEqual"):s(function(e,r){return M0e||(M0e=T9e()),M0e(e,r)},"timingSafeEqual");function r2t(t){return s(function(r,n,i){var o=P9e(t)(r,i);return t2t(wP.from(n),wP.from(o))},"verify")}s(r2t,"createHmacVerifier");function B9e(t){return s(function(r,n){R9e(n),r=wL(r);var i=am.createSign("RSA-SHA"+t),o=(i.update(r),i.sign(n,"base64"));return O0e(o)},"sign")}s(B9e,"createKeySigner");function D9e(t){return s(function(r,n,i){S9e(i),r=wL(r),n=k9e(n);var o=am.createVerify("RSA-SHA"+t);return o.update(r),o.verify(i,n,"base64")},"verify")}s(D9e,"createKeyVerifier");function n2t(t){return s(function(r,n){R9e(n),r=wL(r);var i=am.createSign("RSA-SHA"+t),o=(i.update(r),i.sign({key:n,padding:am.constants.RSA_PKCS1_PSS_PADDING,saltLength:am.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return O0e(o)},"sign")}s(n2t,"createPSSKeySigner");function i2t(t){return s(function(r,n,i){S9e(i),r=wL(r),n=k9e(n);var o=am.createVerify("RSA-SHA"+t);return o.update(r),o.verify({key:i,padding:am.constants.RSA_PKCS1_PSS_PADDING,saltLength:am.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")},"verify")}s(i2t,"createPSSKeyVerifier");function o2t(t){var e=B9e(t);return s(function(){var n=e.apply(null,arguments);return n=_9e.derToJose(n,"ES"+t),n},"sign")}s(o2t,"createECDSASigner");function s2t(t){var e=D9e(t);return s(function(n,i,o){i=_9e.joseToDer(i,"ES"+t).toString("base64");var a=e(n,i,o);return a},"verify")}s(s2t,"createECDSAVerifer");function a2t(){return s(function(){return""},"sign")}s(a2t,"createNoneSigner");function c2t(){return s(function(e,r){return r===""},"verify")}s(c2t,"createNoneVerifier");N9e.exports=s(function(e){var r={hs:P9e,rs:B9e,ps:n2t,es:o2t,none:a2t},n={hs:r2t,rs:D9e,ps:i2t,es:s2t,none:c2t},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw sg(JSt,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:r[o](a),verify:n[o](a)}},"jwa")});var U0e=U((ysn,L9e)=>{d();var l2t=require("buffer").Buffer;L9e.exports=s(function(e){return typeof e=="string"?e:typeof e=="number"||l2t.isBuffer(e)?e.toString():JSON.stringify(e)},"toString")});var q9e=U((vsn,U9e)=>{d();var u2t=IP().Buffer,M9e=D0e(),d2t=Q0e(),f2t=require("stream"),F9e=U0e(),q0e=require("util");function O9e(t,e){return u2t.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}s(O9e,"base64url");function p2t(t,e,r){r=r||"utf8";var n=O9e(F9e(t),"binary"),i=O9e(F9e(e),r);return q0e.format("%s.%s",n,i)}s(p2t,"jwsSecuredInput");function Q9e(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,o=d2t(e.alg),a=p2t(e,r,i),c=o.sign(a,n);return q0e.format("%s.%s",a,c)}s(Q9e,"jwsSign");function nV(t){var e=t.secret||t.privateKey||t.key,r=new M9e(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new M9e(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}s(nV,"SignStream");q0e.inherits(nV,f2t);nV.prototype.sign=s(function(){try{var e=Q9e({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}},"sign");nV.sign=Q9e;U9e.exports=nV});var J9e=U((Isn,K9e)=>{d();var W9e=IP().Buffer,H9e=D0e(),m2t=Q0e(),h2t=require("stream"),G9e=U0e(),g2t=require("util"),A2t=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function y2t(t){return Object.prototype.toString.call(t)==="[object Object]"}s(y2t,"isObject");function C2t(t){if(y2t(t))return t;try{return JSON.parse(t)}catch{return}}s(C2t,"safeJsonParse");function j9e(t){var e=t.split(".",1)[0];return C2t(W9e.from(e,"base64").toString("binary"))}s(j9e,"headerFromJWS");function E2t(t){return t.split(".",2).join(".")}s(E2t,"securedInputFromJWS");function V9e(t){return t.split(".")[2]}s(V9e,"signatureFromJWS");function v2t(t,e){e=e||"utf8";var r=t.split(".")[1];return W9e.from(r,"base64").toString(e)}s(v2t,"payloadFromJWS");function $9e(t){return A2t.test(t)&&!!j9e(t)}s($9e,"isValidJws");function z9e(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=G9e(t);var i=V9e(t),o=E2t(t),a=m2t(e);return a.verify(o,i,r)}s(z9e,"jwsVerify");function Y9e(t,e){if(e=e||{},t=G9e(t),!$9e(t))return null;var r=j9e(t);if(!r)return null;var n=v2t(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:V9e(t)}}s(Y9e,"jwsDecode");function _P(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new H9e(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new H9e(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}s(_P,"VerifyStream");g2t.inherits(_P,h2t);_P.prototype.verify=s(function(){try{var e=z9e(this.signature.buffer,this.algorithm,this.key.buffer),r=Y9e(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}},"verify");_P.decode=Y9e;_P.isValid=$9e;_P.verify=z9e;K9e.exports=_P});var oV=U(Kb=>{d();var X9e=q9e(),iV=J9e(),x2t=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Kb.ALGORITHMS=x2t;Kb.sign=X9e.sign;Kb.verify=iV.verify;Kb.decode=iV.decode;Kb.isValid=iV.isValid;Kb.createSign=s(function(e){return new X9e(e)},"createSign");Kb.createVerify=s(function(e){return new iV(e)},"createVerify")});var H0e=U((ksn,Z9e)=>{d();var b2t=oV();Z9e.exports=function(t,e){e=e||{};var r=b2t.decode(t,e);if(!r)return null;var n=r.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:r.header,payload:n,signature:r.signature}:n}});var _L=U((Bsn,eLe)=>{d();var sV=s(function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)},"JsonWebTokenError");sV.prototype=Object.create(Error.prototype);sV.prototype.constructor=sV;eLe.exports=sV});var W0e=U((Lsn,rLe)=>{d();var tLe=_L(),aV=s(function(t,e){tLe.call(this,t),this.name="NotBeforeError",this.date=e},"NotBeforeError");aV.prototype=Object.create(tLe.prototype);aV.prototype.constructor=aV;rLe.exports=aV});var G0e=U((Osn,iLe)=>{d();var nLe=_L(),cV=s(function(t,e){nLe.call(this,t),this.name="TokenExpiredError",this.expiredAt=e},"TokenExpiredError");cV.prototype=Object.create(nLe.prototype);cV.prototype.constructor=cV;iLe.exports=cV});var j0e=U((qsn,oLe)=>{d();var I2t=Ide();oLe.exports=function(t,e){var r=e||Math.floor(Date.now()/1e3);if(typeof t=="string"){var n=I2t(t);return typeof n>"u"?void 0:Math.floor(r+n/1e3)}else return typeof t=="number"?r+t:void 0}});var SL=U((Wsn,sLe)=>{d();var T2t="2.0.0",w2t=Number.MAX_SAFE_INTEGER||9007199254740991,_2t=16,S2t=250,R2t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];sLe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:_2t,MAX_SAFE_BUILD_LENGTH:S2t,MAX_SAFE_INTEGER:w2t,RELEASE_TYPES:R2t,SEMVER_SPEC_VERSION:T2t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var RL=U((jsn,aLe)=>{d();var k2t=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};aLe.exports=k2t});var SP=U((Ty,cLe)=>{d();var{MAX_SAFE_COMPONENT_LENGTH:V0e,MAX_SAFE_BUILD_LENGTH:P2t,MAX_LENGTH:B2t}=SL(),D2t=RL();Ty=cLe.exports={};var N2t=Ty.re=[],L2t=Ty.safeRe=[],Cr=Ty.src=[],M2t=Ty.safeSrc=[],Er=Ty.t={},F2t=0,$0e="[a-zA-Z0-9-]",O2t=[["\\s",1],["\\d",B2t],[$0e,P2t]],Q2t=s(t=>{for(let[e,r]of O2t)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),li=s((t,e,r)=>{let n=Q2t(e),i=F2t++;D2t(t,i,e),Er[t]=i,Cr[i]=e,M2t[i]=n,N2t[i]=new RegExp(e,r?"g":void 0),L2t[i]=new RegExp(n,r?"g":void 0)},"createToken");li("NUMERICIDENTIFIER","0|[1-9]\\d*");li("NUMERICIDENTIFIERLOOSE","\\d+");li("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${$0e}*`);li("MAINVERSION",`(${Cr[Er.NUMERICIDENTIFIER]})\\.(${Cr[Er.NUMERICIDENTIFIER]})\\.(${Cr[Er.NUMERICIDENTIFIER]})`);li("MAINVERSIONLOOSE",`(${Cr[Er.NUMERICIDENTIFIERLOOSE]})\\.(${Cr[Er.NUMERICIDENTIFIERLOOSE]})\\.(${Cr[Er.NUMERICIDENTIFIERLOOSE]})`);li("PRERELEASEIDENTIFIER",`(?:${Cr[Er.NUMERICIDENTIFIER]}|${Cr[Er.NONNUMERICIDENTIFIER]})`);li("PRERELEASEIDENTIFIERLOOSE",`(?:${Cr[Er.NUMERICIDENTIFIERLOOSE]}|${Cr[Er.NONNUMERICIDENTIFIER]})`);li("PRERELEASE",`(?:-(${Cr[Er.PRERELEASEIDENTIFIER]}(?:\\.${Cr[Er.PRERELEASEIDENTIFIER]})*))`);li("PRERELEASELOOSE",`(?:-?(${Cr[Er.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Cr[Er.PRERELEASEIDENTIFIERLOOSE]})*))`);li("BUILDIDENTIFIER",`${$0e}+`);li("BUILD",`(?:\\+(${Cr[Er.BUILDIDENTIFIER]}(?:\\.${Cr[Er.BUILDIDENTIFIER]})*))`);li("FULLPLAIN",`v?${Cr[Er.MAINVERSION]}${Cr[Er.PRERELEASE]}?${Cr[Er.BUILD]}?`);li("FULL",`^${Cr[Er.FULLPLAIN]}$`);li("LOOSEPLAIN",`[v=\\s]*${Cr[Er.MAINVERSIONLOOSE]}${Cr[Er.PRERELEASELOOSE]}?${Cr[Er.BUILD]}?`);li("LOOSE",`^${Cr[Er.LOOSEPLAIN]}$`);li("GTLT","((?:<|>)?=?)");li("XRANGEIDENTIFIERLOOSE",`${Cr[Er.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);li("XRANGEIDENTIFIER",`${Cr[Er.NUMERICIDENTIFIER]}|x|X|\\*`);li("XRANGEPLAIN",`[v=\\s]*(${Cr[Er.XRANGEIDENTIFIER]})(?:\\.(${Cr[Er.XRANGEIDENTIFIER]})(?:\\.(${Cr[Er.XRANGEIDENTIFIER]})(?:${Cr[Er.PRERELEASE]})?${Cr[Er.BUILD]}?)?)?`);li("XRANGEPLAINLOOSE",`[v=\\s]*(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cr[Er.XRANGEIDENTIFIERLOOSE]})(?:${Cr[Er.PRERELEASELOOSE]})?${Cr[Er.BUILD]}?)?)?`);li("XRANGE",`^${Cr[Er.GTLT]}\\s*${Cr[Er.XRANGEPLAIN]}$`);li("XRANGELOOSE",`^${Cr[Er.GTLT]}\\s*${Cr[Er.XRANGEPLAINLOOSE]}$`);li("COERCEPLAIN",`(^|[^\\d])(\\d{1,${V0e}})(?:\\.(\\d{1,${V0e}}))?(?:\\.(\\d{1,${V0e}}))?`);li("COERCE",`${Cr[Er.COERCEPLAIN]}(?:$|[^\\d])`);li("COERCEFULL",Cr[Er.COERCEPLAIN]+`(?:${Cr[Er.PRERELEASE]})?(?:${Cr[Er.BUILD]})?(?:$|[^\\d])`);li("COERCERTL",Cr[Er.COERCE],!0);li("COERCERTLFULL",Cr[Er.COERCEFULL],!0);li("LONETILDE","(?:~>?)");li("TILDETRIM",`(\\s*)${Cr[Er.LONETILDE]}\\s+`,!0);Ty.tildeTrimReplace="$1~";li("TILDE",`^${Cr[Er.LONETILDE]}${Cr[Er.XRANGEPLAIN]}$`);li("TILDELOOSE",`^${Cr[Er.LONETILDE]}${Cr[Er.XRANGEPLAINLOOSE]}$`);li("LONECARET","(?:\\^)");li("CARETTRIM",`(\\s*)${Cr[Er.LONECARET]}\\s+`,!0);Ty.caretTrimReplace="$1^";li("CARET",`^${Cr[Er.LONECARET]}${Cr[Er.XRANGEPLAIN]}$`);li("CARETLOOSE",`^${Cr[Er.LONECARET]}${Cr[Er.XRANGEPLAINLOOSE]}$`);li("COMPARATORLOOSE",`^${Cr[Er.GTLT]}\\s*(${Cr[Er.LOOSEPLAIN]})$|^$`);li("COMPARATOR",`^${Cr[Er.GTLT]}\\s*(${Cr[Er.FULLPLAIN]})$|^$`);li("COMPARATORTRIM",`(\\s*)${Cr[Er.GTLT]}\\s*(${Cr[Er.LOOSEPLAIN]}|${Cr[Er.XRANGEPLAIN]})`,!0);Ty.comparatorTrimReplace="$1$2$3";li("HYPHENRANGE",`^\\s*(${Cr[Er.XRANGEPLAIN]})\\s+-\\s+(${Cr[Er.XRANGEPLAIN]})\\s*$`);li("HYPHENRANGELOOSE",`^\\s*(${Cr[Er.XRANGEPLAINLOOSE]})\\s+-\\s+(${Cr[Er.XRANGEPLAINLOOSE]})\\s*$`);li("STAR","(<|>)?=?\\s*\\*");li("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");li("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var lV=U((Ysn,lLe)=>{d();var U2t=Object.freeze({loose:!0}),q2t=Object.freeze({}),H2t=s(t=>t?typeof t!="object"?U2t:t:q2t,"parseOptions");lLe.exports=H2t});var z0e=U((Xsn,fLe)=>{d();var uLe=/^[0-9]+$/,dLe=s((t,e)=>{let r=uLe.test(t),n=uLe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),W2t=s((t,e)=>dLe(e,t),"rcompareIdentifiers");fLe.exports={compareIdentifiers:dLe,rcompareIdentifiers:W2t}});var Vu=U((tan,gLe)=>{d();var uV=RL(),{MAX_LENGTH:pLe,MAX_SAFE_INTEGER:dV}=SL(),{safeRe:mLe,safeSrc:hLe,t:fV}=SP(),G2t=lV(),{compareIdentifiers:RP}=z0e(),Y0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=G2t(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>pLe)throw new TypeError(`version is longer than ${pLe} characters`);uV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?mLe[fV.LOOSE]:mLe[fV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>dV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>dV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>dV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<dV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(uV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),RP(this.major,e.major)||RP(this.minor,e.minor)||RP(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(uV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return RP(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(uV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return RP(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?hLe[fV.PRERELEASELOOSE]:hLe[fV.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),RP(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};gLe.exports=Y0e});var BS=U((ian,yLe)=>{d();var ALe=Vu(),j2t=s((t,e,r=!1)=>{if(t instanceof ALe)return t;try{return new ALe(t,e)}catch(n){if(!r)return null;throw n}},"parse");yLe.exports=j2t});var ELe=U((aan,CLe)=>{d();var V2t=BS(),$2t=s((t,e)=>{let r=V2t(t,e);return r?r.version:null},"valid");CLe.exports=$2t});var xLe=U((uan,vLe)=>{d();var z2t=BS(),Y2t=s((t,e)=>{let r=z2t(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");vLe.exports=Y2t});var TLe=U((pan,ILe)=>{d();var bLe=Vu(),K2t=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new bLe(t instanceof bLe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");ILe.exports=K2t});var SLe=U((gan,_Le)=>{d();var wLe=BS(),J2t=s((t,e)=>{let r=wLe(t,null,!0),n=wLe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,c=o?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let f=l?"pre":"";return r.major!==n.major?f+"major":r.minor!==n.minor?f+"minor":r.patch!==n.patch?f+"patch":"prerelease"},"diff");_Le.exports=J2t});var kLe=U((Can,RLe)=>{d();var X2t=Vu(),Z2t=s((t,e)=>new X2t(t,e).major,"major");RLe.exports=Z2t});var BLe=U((xan,PLe)=>{d();var eRt=Vu(),tRt=s((t,e)=>new eRt(t,e).minor,"minor");PLe.exports=tRt});var NLe=U((Tan,DLe)=>{d();var rRt=Vu(),nRt=s((t,e)=>new rRt(t,e).patch,"patch");DLe.exports=nRt});var MLe=U((San,LLe)=>{d();var iRt=BS(),oRt=s((t,e)=>{let r=iRt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");LLe.exports=oRt});var cm=U((Pan,OLe)=>{d();var FLe=Vu(),sRt=s((t,e,r)=>new FLe(t,r).compare(new FLe(e,r)),"compare");OLe.exports=sRt});var ULe=U((Nan,QLe)=>{d();var aRt=cm(),cRt=s((t,e,r)=>aRt(e,t,r),"rcompare");QLe.exports=cRt});var HLe=U((Fan,qLe)=>{d();var lRt=cm(),uRt=s((t,e)=>lRt(t,e,!0),"compareLoose");qLe.exports=uRt});var pV=U((Uan,GLe)=>{d();var WLe=Vu(),dRt=s((t,e,r)=>{let n=new WLe(t,r),i=new WLe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");GLe.exports=dRt});var VLe=U((Wan,jLe)=>{d();var fRt=pV(),pRt=s((t,e)=>t.sort((r,n)=>fRt(r,n,e)),"sort");jLe.exports=pRt});var zLe=U((Van,$Le)=>{d();var mRt=pV(),hRt=s((t,e)=>t.sort((r,n)=>mRt(n,r,e)),"rsort");$Le.exports=hRt});var kL=U((Yan,YLe)=>{d();var gRt=cm(),ARt=s((t,e,r)=>gRt(t,e,r)>0,"gt");YLe.exports=ARt});var mV=U((Xan,KLe)=>{d();var yRt=cm(),CRt=s((t,e,r)=>yRt(t,e,r)<0,"lt");KLe.exports=CRt});var K0e=U((tcn,JLe)=>{d();var ERt=cm(),vRt=s((t,e,r)=>ERt(t,e,r)===0,"eq");JLe.exports=vRt});var J0e=U((icn,XLe)=>{d();var xRt=cm(),bRt=s((t,e,r)=>xRt(t,e,r)!==0,"neq");XLe.exports=bRt});var hV=U((acn,ZLe)=>{d();var IRt=cm(),TRt=s((t,e,r)=>IRt(t,e,r)>=0,"gte");ZLe.exports=TRt});var gV=U((ucn,eMe)=>{d();var wRt=cm(),_Rt=s((t,e,r)=>wRt(t,e,r)<=0,"lte");eMe.exports=_Rt});var X0e=U((pcn,tMe)=>{d();var SRt=K0e(),RRt=J0e(),kRt=kL(),PRt=hV(),BRt=mV(),DRt=gV(),NRt=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return SRt(t,r,n);case"!=":return RRt(t,r,n);case">":return kRt(t,r,n);case">=":return PRt(t,r,n);case"<":return BRt(t,r,n);case"<=":return DRt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");tMe.exports=NRt});var nMe=U((gcn,rMe)=>{d();var LRt=Vu(),MRt=BS(),{safeRe:AV,t:yV}=SP(),FRt=s((t,e)=>{if(t instanceof LRt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?AV[yV.COERCEFULL]:AV[yV.COERCE]);else{let l=e.includePrerelease?AV[yV.COERCERTLFULL]:AV[yV.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return MRt(`${n}.${i}.${o}${a}${c}`,e)},"coerce");rMe.exports=FRt});var oMe=U((Ccn,iMe)=>{d();var Z0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};iMe.exports=Z0e});var lm=U((xcn,lMe)=>{d();var ORt=/\s+/g,epe=class t{static{s(this,"Range")}constructor(e,r){if(r=URt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof tpe)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(ORt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!aMe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&$Rt(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&jRt)|(this.options.loose&&VRt))+":"+e,i=sMe.get(n);if(i)return i;let o=this.options.loose,a=o?Sf[Rd.HYPHENRANGELOOSE]:Sf[Rd.HYPHENRANGE];e=e.replace(a,n5t(this.options.includePrerelease)),qs("hyphen replace",e),e=e.replace(Sf[Rd.COMPARATORTRIM],HRt),qs("comparator trim",e),e=e.replace(Sf[Rd.TILDETRIM],WRt),qs("tilde trim",e),e=e.replace(Sf[Rd.CARETTRIM],GRt),qs("caret trim",e);let c=e.split(" ").map(p=>zRt(p,this.options)).join(" ").split(/\s+/).map(p=>r5t(p,this.options));o&&(c=c.filter(p=>(qs("loose invalid filter",p,this.options),!!p.match(Sf[Rd.COMPARATORLOOSE])))),qs("range list",c);let l=new Map,u=c.map(p=>new tpe(p,this.options));for(let p of u){if(aMe(p))return[p];l.set(p.value,p)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return sMe.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>cMe(n,r)&&e.set.some(i=>cMe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new qRt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(i5t(this.set[r],e,this.options))return!0;return!1}};lMe.exports=epe;var QRt=oMe(),sMe=new QRt,URt=lV(),tpe=PL(),qs=RL(),qRt=Vu(),{safeRe:Sf,t:Rd,comparatorTrimReplace:HRt,tildeTrimReplace:WRt,caretTrimReplace:GRt}=SP(),{FLAG_INCLUDE_PRERELEASE:jRt,FLAG_LOOSE:VRt}=SL(),aMe=s(t=>t.value==="<0.0.0-0","isNullSet"),$Rt=s(t=>t.value==="","isAny"),cMe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),zRt=s((t,e)=>(qs("comp",t,e),t=JRt(t,e),qs("caret",t),t=YRt(t,e),qs("tildes",t),t=ZRt(t,e),qs("xrange",t),t=t5t(t,e),qs("stars",t),t),"parseComparator"),kd=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),YRt=s((t,e)=>t.trim().split(/\s+/).map(r=>KRt(r,e)).join(" "),"replaceTildes"),KRt=s((t,e)=>{let r=e.loose?Sf[Rd.TILDELOOSE]:Sf[Rd.TILDE];return t.replace(r,(n,i,o,a,c)=>{qs("tilde",t,n,i,o,a,c);let l;return kd(i)?l="":kd(o)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:kd(a)?l=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(qs("replaceTilde pr",c),l=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`):l=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,qs("tilde return",l),l})},"replaceTilde"),JRt=s((t,e)=>t.trim().split(/\s+/).map(r=>XRt(r,e)).join(" "),"replaceCarets"),XRt=s((t,e)=>{qs("caret",t,e);let r=e.loose?Sf[Rd.CARETLOOSE]:Sf[Rd.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,c,l)=>{qs("caret",t,i,o,a,c,l);let u;return kd(o)?u="":kd(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:kd(c)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:l?(qs("replaceCaret pr",l),o==="0"?a==="0"?u=`>=${o}.${a}.${c}-${l} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}-${l} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c}-${l} <${+o+1}.0.0-0`):(qs("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${c}${n} <${o}.${a}.${+c+1}-0`:u=`>=${o}.${a}.${c}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${c} <${+o+1}.0.0-0`),qs("caret return",u),u})},"replaceCaret"),ZRt=s((t,e)=>(qs("replaceXRanges",t,e),t.split(/\s+/).map(r=>e5t(r,e)).join(" ")),"replaceXRanges"),e5t=s((t,e)=>{t=t.trim();let r=e.loose?Sf[Rd.XRANGELOOSE]:Sf[Rd.XRANGE];return t.replace(r,(n,i,o,a,c,l)=>{qs("xRange",t,n,i,o,a,c,l);let u=kd(o),f=u||kd(a),p=f||kd(c),m=p;return i==="="&&m&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(f&&(a=0),c=0,i===">"?(i=">=",f?(o=+o+1,a=0,c=0):(a=+a+1,c=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+o}.${a}.${c}${l}`):f?n=`>=${o}.0.0${l} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${l} <${o}.${+a+1}.0-0`),qs("xRange return",n),n})},"replaceXRange"),t5t=s((t,e)=>(qs("replaceStars",t,e),t.trim().replace(Sf[Rd.STAR],"")),"replaceStars"),r5t=s((t,e)=>(qs("replaceGTE0",t,e),t.trim().replace(Sf[e.includePrerelease?Rd.GTE0PRE:Rd.GTE0],"")),"replaceGTE0"),n5t=s(t=>(e,r,n,i,o,a,c,l,u,f,p,m)=>(kd(n)?r="":kd(i)?r=`>=${n}.0.0${t?"-0":""}`:kd(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,kd(u)?l="":kd(f)?l=`<${+u+1}.0.0-0`:kd(p)?l=`<${u}.${+f+1}.0-0`:m?l=`<=${u}.${f}.${p}-${m}`:t?l=`<${u}.${f}.${+p+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),"hyphenReplace"),i5t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(qs(t[n].semver),t[n].semver!==tpe.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var PL=U((Tcn,hMe)=>{d();var BL=Symbol("SemVer ANY"),ipe=class t{static{s(this,"Comparator")}static get ANY(){return BL}constructor(e,r){if(r=uMe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),npe("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===BL?this.value="":this.value=this.operator+this.semver.version,npe("comp",this)}parse(e){let r=this.options.loose?dMe[fMe.COMPARATORLOOSE]:dMe[fMe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new pMe(n[2],this.options.loose):this.semver=BL}toString(){return this.value}test(e){if(npe("Comparator.test",e,this.options.loose),this.semver===BL||e===BL)return!0;if(typeof e=="string")try{e=new pMe(e,this.options)}catch{return!1}return rpe(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new mMe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new mMe(this.value,r).test(e.semver):(r=uMe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||rpe(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||rpe(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};hMe.exports=ipe;var uMe=lV(),{safeRe:dMe,t:fMe}=SP(),rpe=X0e(),npe=RL(),pMe=Vu(),mMe=lm()});var DL=U((Scn,gMe)=>{d();var o5t=lm(),s5t=s((t,e,r)=>{try{e=new o5t(e,r)}catch{return!1}return e.test(t)},"satisfies");gMe.exports=s5t});var yMe=U((Pcn,AMe)=>{d();var a5t=lm(),c5t=s((t,e)=>new a5t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");AMe.exports=c5t});var EMe=U((Ncn,CMe)=>{d();var l5t=Vu(),u5t=lm(),d5t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new u5t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new l5t(n,r))}),n},"maxSatisfying");CMe.exports=d5t});var xMe=U((Fcn,vMe)=>{d();var f5t=Vu(),p5t=lm(),m5t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new p5t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new f5t(n,r))}),n},"minSatisfying");vMe.exports=m5t});var TMe=U((Ucn,IMe)=>{d();var ope=Vu(),h5t=lm(),bMe=kL(),g5t=s((t,e)=>{t=new h5t(t,e);let r=new ope("0.0.0");if(t.test(r)||(r=new ope("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let c=new ope(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||bMe(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||bMe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");IMe.exports=g5t});var _Me=U((Wcn,wMe)=>{d();var A5t=lm(),y5t=s((t,e)=>{try{return new A5t(t,e).range||"*"}catch{return null}},"validRange");wMe.exports=y5t});var CV=U((Vcn,PMe)=>{d();var C5t=Vu(),kMe=PL(),{ANY:E5t}=kMe,v5t=lm(),x5t=DL(),SMe=kL(),RMe=mV(),b5t=gV(),I5t=hV(),T5t=s((t,e,r,n)=>{t=new C5t(t,n),e=new v5t(e,n);let i,o,a,c,l;switch(r){case">":i=SMe,o=b5t,a=RMe,c=">",l=">=";break;case"<":i=RMe,o=I5t,a=SMe,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(x5t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let f=e.set[u],p=null,m=null;if(f.forEach(h=>{h.semver===E5t&&(h=new kMe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===c||p.operator===l||(!m.operator||m.operator===c)&&o(t,m.semver))return!1;if(m.operator===l&&a(t,m.semver))return!1}return!0},"outside");PMe.exports=T5t});var DMe=U((Ycn,BMe)=>{d();var w5t=CV(),_5t=s((t,e,r)=>w5t(t,e,">",r),"gtr");BMe.exports=_5t});var LMe=U((Xcn,NMe)=>{d();var S5t=CV(),R5t=s((t,e,r)=>S5t(t,e,"<",r),"ltr");NMe.exports=R5t});var OMe=U((tln,FMe)=>{d();var MMe=lm(),k5t=s((t,e,r)=>(t=new MMe(t,r),e=new MMe(e,r),t.intersects(e,r)),"intersects");FMe.exports=k5t});var UMe=U((iln,QMe)=>{d();var P5t=DL(),B5t=cm();QMe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((f,p)=>B5t(f,p,r));for(let f of a)P5t(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,p]of n)f===p?c.push(f):!p&&f===a[0]?c.push("*"):p?f===a[0]?c.push(`<=${p}`):c.push(`${f} - ${p}`):c.push(`>=${f}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var VMe=U((sln,jMe)=>{d();var qMe=lm(),ape=PL(),{ANY:spe}=ape,NL=DL(),cpe=cm(),D5t=s((t,e,r={})=>{if(t===e)return!0;t=new qMe(t,r),e=new qMe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=L5t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),N5t=[new ape(">=0.0.0-0")],HMe=[new ape(">=0.0.0")],L5t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===spe){if(e.length===1&&e[0].semver===spe)return!0;r.includePrerelease?t=N5t:t=HMe}if(e.length===1&&e[0].semver===spe){if(r.includePrerelease)return!0;e=HMe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=WMe(i,h,r):h.operator==="<"||h.operator==="<="?o=GMe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=cpe(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!NL(h,String(i),r)||o&&!NL(h,String(o),r))return null;for(let g of e)if(!NL(h,String(g),r))return!1;return!0}let c,l,u,f,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(f=f||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(c=WMe(i,h,r),c===h&&c!==i)return!1}else if(i.operator===">="&&!NL(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(l=GMe(o,h,r),l===h&&l!==o)return!1}else if(o.operator==="<="&&!NL(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&f&&!i&&a!==0||m||p)},"simpleSubset"),WMe=s((t,e,r)=>{if(!t)return e;let n=cpe(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),GMe=s((t,e,r)=>{if(!t)return e;let n=cpe(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");jMe.exports=D5t});var kP=U((lln,YMe)=>{d();var lpe=SP(),$Me=SL(),M5t=Vu(),zMe=z0e(),F5t=BS(),O5t=ELe(),Q5t=xLe(),U5t=TLe(),q5t=SLe(),H5t=kLe(),W5t=BLe(),G5t=NLe(),j5t=MLe(),V5t=cm(),$5t=ULe(),z5t=HLe(),Y5t=pV(),K5t=VLe(),J5t=zLe(),X5t=kL(),Z5t=mV(),ekt=K0e(),tkt=J0e(),rkt=hV(),nkt=gV(),ikt=X0e(),okt=nMe(),skt=PL(),akt=lm(),ckt=DL(),lkt=yMe(),ukt=EMe(),dkt=xMe(),fkt=TMe(),pkt=_Me(),mkt=CV(),hkt=DMe(),gkt=LMe(),Akt=OMe(),ykt=UMe(),Ckt=VMe();YMe.exports={parse:F5t,valid:O5t,clean:Q5t,inc:U5t,diff:q5t,major:H5t,minor:W5t,patch:G5t,prerelease:j5t,compare:V5t,rcompare:$5t,compareLoose:z5t,compareBuild:Y5t,sort:K5t,rsort:J5t,gt:X5t,lt:Z5t,eq:ekt,neq:tkt,gte:rkt,lte:nkt,cmp:ikt,coerce:okt,Comparator:skt,Range:akt,satisfies:ckt,toComparators:lkt,maxSatisfying:ukt,minSatisfying:dkt,minVersion:fkt,validRange:pkt,outside:mkt,gtr:hkt,ltr:gkt,intersects:Akt,simplifyRange:ykt,subset:Ckt,SemVer:M5t,re:lpe.re,src:lpe.src,tokens:lpe.t,SEMVER_SPEC_VERSION:$Me.SEMVER_SPEC_VERSION,RELEASE_TYPES:$Me.RELEASE_TYPES,compareIdentifiers:zMe.compareIdentifiers,rcompareIdentifiers:zMe.rcompareIdentifiers}});var JMe=U((dln,KMe)=>{d();var Ekt=kP();KMe.exports=Ekt.satisfies(process.version,">=15.7.0")});var ZMe=U((pln,XMe)=>{d();var vkt=kP();XMe.exports=vkt.satisfies(process.version,">=16.9.0")});var upe=U((hln,eFe)=>{d();var xkt=JMe(),bkt=ZMe(),Ikt={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},Tkt={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};eFe.exports=function(t,e){if(!t||!e)return;let r=e.asymmetricKeyType;if(!r)return;let n=Ikt[r];if(!n)throw new Error(`Unknown key type "${r}".`);if(!n.includes(t))throw new Error(`"alg" parameter for "${r}" key type must be one of: ${n.join(", ")}.`);if(xkt)switch(r){case"ec":let i=e.asymmetricKeyDetails.namedCurve,o=Tkt[t];if(i!==o)throw new Error(`"alg" parameter "${t}" requires curve "${o}".`);break;case"rsa-pss":if(bkt){let a=parseInt(t.slice(-3),10),{hashAlgorithm:c,mgf1HashAlgorithm:l,saltLength:u}=e.asymmetricKeyDetails;if(c!==`sha${a}`||l!==c)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}.`);if(u!==void 0&&u>a>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}.`)}break}}});var dpe=U((Aln,tFe)=>{d();var wkt=kP();tFe.exports=wkt.satisfies(process.version,"^6.12.0 || >=8.0.0")});var iFe=U((Cln,nFe)=>{d();var xs=_L(),_kt=W0e(),rFe=G0e(),Skt=H0e(),Rkt=j0e(),kkt=upe(),Pkt=dpe(),Bkt=oV(),{KeyObject:Dkt,createSecretKey:Nkt,createPublicKey:Lkt}=require("crypto"),fpe=["RS256","RS384","RS512"],Mkt=["ES256","ES384","ES512"],ppe=["RS256","RS384","RS512"],Fkt=["HS256","HS384","HS512"];Pkt&&(fpe.splice(fpe.length,0,"PS256","PS384","PS512"),ppe.splice(ppe.length,0,"PS256","PS384","PS512"));nFe.exports=function(t,e,r,n){typeof r=="function"&&!n&&(n=r,r={}),r||(r={}),r=Object.assign({},r);let i;if(n?i=n:i=s(function(f,p){if(f)throw f;return p},"done"),r.clockTimestamp&&typeof r.clockTimestamp!="number")return i(new xs("clockTimestamp must be a number"));if(r.nonce!==void 0&&(typeof r.nonce!="string"||r.nonce.trim()===""))return i(new xs("nonce must be a non-empty string"));if(r.allowInvalidAsymmetricKeyTypes!==void 0&&typeof r.allowInvalidAsymmetricKeyTypes!="boolean")return i(new xs("allowInvalidAsymmetricKeyTypes must be a boolean"));let o=r.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return i(new xs("jwt must be provided"));if(typeof t!="string")return i(new xs("jwt must be a string"));let a=t.split(".");if(a.length!==3)return i(new xs("jwt malformed"));let c;try{c=Skt(t,{complete:!0})}catch(f){return i(f)}if(!c)return i(new xs("invalid token"));let l=c.header,u;if(typeof e=="function"){if(!n)return i(new xs("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=s(function(f,p){return p(null,e)},"getSecret");return u(l,function(f,p){if(f)return i(new xs("error in secret or public key callback: "+f.message));let m=a[2].trim()!=="";if(!m&&p)return i(new xs("jwt signature is required"));if(m&&!p)return i(new xs("secret or public key must be provided"));if(!m&&!r.algorithms)return i(new xs('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof Dkt))try{p=Lkt(p)}catch{try{p=Nkt(typeof p=="string"?Buffer.from(p):p)}catch{return i(new xs("secretOrPublicKey is not valid key material"))}}if(r.algorithms||(p.type==="secret"?r.algorithms=Fkt:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?r.algorithms=ppe:p.asymmetricKeyType==="ec"?r.algorithms=Mkt:r.algorithms=fpe),r.algorithms.indexOf(c.header.alg)===-1)return i(new xs("invalid algorithm"));if(l.alg.startsWith("HS")&&p.type!=="secret")return i(new xs(`secretOrPublicKey must be a symmetric key when using ${l.alg}`));if(/^(?:RS|PS|ES)/.test(l.alg)&&p.type!=="public")return i(new xs(`secretOrPublicKey must be an asymmetric key when using ${l.alg}`));if(!r.allowInvalidAsymmetricKeyTypes)try{kkt(l.alg,p)}catch(y){return i(y)}let h;try{h=Bkt.verify(t,c.header.alg,p)}catch(y){return i(y)}if(!h)return i(new xs("invalid signature"));let g=c.payload;if(typeof g.nbf<"u"&&!r.ignoreNotBefore){if(typeof g.nbf!="number")return i(new xs("invalid nbf value"));if(g.nbf>o+(r.clockTolerance||0))return i(new _kt("jwt not active",new Date(g.nbf*1e3)))}if(typeof g.exp<"u"&&!r.ignoreExpiration){if(typeof g.exp!="number")return i(new xs("invalid exp value"));if(o>=g.exp+(r.clockTolerance||0))return i(new rFe("jwt expired",new Date(g.exp*1e3)))}if(r.audience){let y=Array.isArray(r.audience)?r.audience:[r.audience];if(!(Array.isArray(g.aud)?g.aud:[g.aud]).some(function(b){return y.some(function(_){return _ instanceof RegExp?_.test(b):_===b})}))return i(new xs("jwt audience invalid. expected: "+y.join(" or ")))}if(r.issuer&&(typeof r.issuer=="string"&&g.iss!==r.issuer||Array.isArray(r.issuer)&&r.issuer.indexOf(g.iss)===-1))return i(new xs("jwt issuer invalid. expected: "+r.issuer));if(r.subject&&g.sub!==r.subject)return i(new xs("jwt subject invalid. expected: "+r.subject));if(r.jwtid&&g.jti!==r.jwtid)return i(new xs("jwt jwtid invalid. expected: "+r.jwtid));if(r.nonce&&g.nonce!==r.nonce)return i(new xs("jwt nonce invalid. expected: "+r.nonce));if(r.maxAge){if(typeof g.iat!="number")return i(new xs("iat required when maxAge is specified"));let y=Rkt(r.maxAge,g.iat);if(typeof y>"u")return i(new xs('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=y+(r.clockTolerance||0))return i(new rFe("maxAge exceeded",new Date(y*1e3)))}if(r.complete===!0){let y=c.signature;return i(null,{header:l,payload:g,signature:y})}return i(null,g)})}});var uFe=U((xln,lFe)=>{d();var oFe=1/0,aFe=9007199254740991,Okt=17976931348623157e292,sFe=NaN,Qkt="[object Arguments]",Ukt="[object Function]",qkt="[object GeneratorFunction]",Hkt="[object String]",Wkt="[object Symbol]",Gkt=/^\s+|\s+$/g,jkt=/^[-+]0x[0-9a-f]+$/i,Vkt=/^0b[01]+$/i,$kt=/^0o[0-7]+$/i,zkt=/^(?:0|[1-9]\d*)$/,Ykt=parseInt;function Kkt(t,e){for(var r=-1,n=t?t.length:0,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}s(Kkt,"arrayMap");function Jkt(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}s(Jkt,"baseFindIndex");function Xkt(t,e,r){if(e!==e)return Jkt(t,Zkt,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}s(Xkt,"baseIndexOf");function Zkt(t){return t!==t}s(Zkt,"baseIsNaN");function e4t(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}s(e4t,"baseTimes");function t4t(t,e){return Kkt(e,function(r){return t[r]})}s(t4t,"baseValues");function r4t(t,e){return function(r){return t(e(r))}}s(r4t,"overArg");var EV=Object.prototype,hpe=EV.hasOwnProperty,vV=EV.toString,n4t=EV.propertyIsEnumerable,i4t=r4t(Object.keys,Object),o4t=Math.max;function s4t(t,e){var r=cFe(t)||d4t(t)?e4t(t.length,String):[],n=r.length,i=!!n;for(var o in t)(e||hpe.call(t,o))&&!(i&&(o=="length"||c4t(o,n)))&&r.push(o);return r}s(s4t,"arrayLikeKeys");function a4t(t){if(!l4t(t))return i4t(t);var e=[];for(var r in Object(t))hpe.call(t,r)&&r!="constructor"&&e.push(r);return e}s(a4t,"baseKeys");function c4t(t,e){return e=e??aFe,!!e&&(typeof t=="number"||zkt.test(t))&&t>-1&&t%1==0&&t<e}s(c4t,"isIndex");function l4t(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||EV;return t===r}s(l4t,"isPrototype");function u4t(t,e,r,n){t=gpe(t)?t:v4t(t),r=r&&!n?y4t(r):0;var i=t.length;return r<0&&(r=o4t(i+r,0)),h4t(t)?r<=i&&t.indexOf(e,r)>-1:!!i&&Xkt(t,e,r)>-1}s(u4t,"includes");function d4t(t){return f4t(t)&&hpe.call(t,"callee")&&(!n4t.call(t,"callee")||vV.call(t)==Qkt)}s(d4t,"isArguments");var cFe=Array.isArray;function gpe(t){return t!=null&&m4t(t.length)&&!p4t(t)}s(gpe,"isArrayLike");function f4t(t){return Ape(t)&&gpe(t)}s(f4t,"isArrayLikeObject");function p4t(t){var e=mpe(t)?vV.call(t):"";return e==Ukt||e==qkt}s(p4t,"isFunction");function m4t(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=aFe}s(m4t,"isLength");function mpe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(mpe,"isObject");function Ape(t){return!!t&&typeof t=="object"}s(Ape,"isObjectLike");function h4t(t){return typeof t=="string"||!cFe(t)&&Ape(t)&&vV.call(t)==Hkt}s(h4t,"isString");function g4t(t){return typeof t=="symbol"||Ape(t)&&vV.call(t)==Wkt}s(g4t,"isSymbol");function A4t(t){if(!t)return t===0?t:0;if(t=C4t(t),t===oFe||t===-oFe){var e=t<0?-1:1;return e*Okt}return t===t?t:0}s(A4t,"toFinite");function y4t(t){var e=A4t(t),r=e%1;return e===e?r?e-r:e:0}s(y4t,"toInteger");function C4t(t){if(typeof t=="number")return t;if(g4t(t))return sFe;if(mpe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=mpe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Gkt,"");var r=Vkt.test(t);return r||$kt.test(t)?Ykt(t.slice(2),r?2:8):jkt.test(t)?sFe:+t}s(C4t,"toNumber");function E4t(t){return gpe(t)?s4t(t):a4t(t)}s(E4t,"keys");function v4t(t){return t?t4t(t,E4t(t)):[]}s(v4t,"values");lFe.exports=u4t});var fFe=U((Tln,dFe)=>{d();var x4t="[object Boolean]",b4t=Object.prototype,I4t=b4t.toString;function T4t(t){return t===!0||t===!1||w4t(t)&&I4t.call(t)==x4t}s(T4t,"isBoolean");function w4t(t){return!!t&&typeof t=="object"}s(w4t,"isObjectLike");dFe.exports=T4t});var AFe=U((Sln,gFe)=>{d();var pFe=1/0,_4t=17976931348623157e292,mFe=NaN,S4t="[object Symbol]",R4t=/^\s+|\s+$/g,k4t=/^[-+]0x[0-9a-f]+$/i,P4t=/^0b[01]+$/i,B4t=/^0o[0-7]+$/i,D4t=parseInt,N4t=Object.prototype,L4t=N4t.toString;function M4t(t){return typeof t=="number"&&t==U4t(t)}s(M4t,"isInteger");function hFe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(hFe,"isObject");function F4t(t){return!!t&&typeof t=="object"}s(F4t,"isObjectLike");function O4t(t){return typeof t=="symbol"||F4t(t)&&L4t.call(t)==S4t}s(O4t,"isSymbol");function Q4t(t){if(!t)return t===0?t:0;if(t=q4t(t),t===pFe||t===-pFe){var e=t<0?-1:1;return e*_4t}return t===t?t:0}s(Q4t,"toFinite");function U4t(t){var e=Q4t(t),r=e%1;return e===e?r?e-r:e:0}s(U4t,"toInteger");function q4t(t){if(typeof t=="number")return t;if(O4t(t))return mFe;if(hFe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hFe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(R4t,"");var r=P4t.test(t);return r||B4t.test(t)?D4t(t.slice(2),r?2:8):k4t.test(t)?mFe:+t}s(q4t,"toNumber");gFe.exports=M4t});var CFe=U((Pln,yFe)=>{d();var H4t="[object Number]",W4t=Object.prototype,G4t=W4t.toString;function j4t(t){return!!t&&typeof t=="object"}s(j4t,"isObjectLike");function V4t(t){return typeof t=="number"||j4t(t)&&G4t.call(t)==H4t}s(V4t,"isNumber");yFe.exports=V4t});var bFe=U((Nln,xFe)=>{d();var $4t="[object Object]";function z4t(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}s(z4t,"isHostObject");function Y4t(t,e){return function(r){return t(e(r))}}s(Y4t,"overArg");var K4t=Function.prototype,EFe=Object.prototype,vFe=K4t.toString,J4t=EFe.hasOwnProperty,X4t=vFe.call(Object),Z4t=EFe.toString,ePt=Y4t(Object.getPrototypeOf,Object);function tPt(t){return!!t&&typeof t=="object"}s(tPt,"isObjectLike");function rPt(t){if(!tPt(t)||Z4t.call(t)!=$4t||z4t(t))return!1;var e=ePt(t);if(e===null)return!0;var r=J4t.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&vFe.call(r)==X4t}s(rPt,"isPlainObject");xFe.exports=rPt});var TFe=U((Fln,IFe)=>{d();var nPt="[object String]",iPt=Object.prototype,oPt=iPt.toString,sPt=Array.isArray;function aPt(t){return!!t&&typeof t=="object"}s(aPt,"isObjectLike");function cPt(t){return typeof t=="string"||!sPt(t)&&aPt(t)&&oPt.call(t)==nPt}s(cPt,"isString");IFe.exports=cPt});var kFe=U((Uln,RFe)=>{d();var lPt="Expected a function",wFe=1/0,uPt=17976931348623157e292,_Fe=NaN,dPt="[object Symbol]",fPt=/^\s+|\s+$/g,pPt=/^[-+]0x[0-9a-f]+$/i,mPt=/^0b[01]+$/i,hPt=/^0o[0-7]+$/i,gPt=parseInt,APt=Object.prototype,yPt=APt.toString;function CPt(t,e){var r;if(typeof e!="function")throw new TypeError(lPt);return t=IPt(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}s(CPt,"before");function EPt(t){return CPt(2,t)}s(EPt,"once");function SFe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}s(SFe,"isObject");function vPt(t){return!!t&&typeof t=="object"}s(vPt,"isObjectLike");function xPt(t){return typeof t=="symbol"||vPt(t)&&yPt.call(t)==dPt}s(xPt,"isSymbol");function bPt(t){if(!t)return t===0?t:0;if(t=TPt(t),t===wFe||t===-wFe){var e=t<0?-1:1;return e*uPt}return t===t?t:0}s(bPt,"toFinite");function IPt(t){var e=bPt(t),r=e%1;return e===e?r?e-r:e:0}s(IPt,"toInteger");function TPt(t){if(typeof t=="number")return t;if(xPt(t))return _Fe;if(SFe(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=SFe(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(fPt,"");var r=mPt.test(t);return r||hPt.test(t)?gPt(t.slice(2),r?2:8):pPt.test(t)?_Fe:+t}s(TPt,"toNumber");RFe.exports=EPt});var QFe=U((Wln,OFe)=>{d();var PFe=j0e(),wPt=dpe(),_Pt=upe(),BFe=oV(),SPt=uFe(),xV=fFe(),DFe=AFe(),ype=CFe(),LFe=bFe(),Jb=TFe(),RPt=kFe(),{KeyObject:kPt,createSecretKey:PPt,createPrivateKey:BPt}=require("crypto"),MFe=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];wPt&&MFe.splice(3,0,"PS256","PS384","PS512");var DPt={expiresIn:{isValid:s(function(t){return DFe(t)||Jb(t)&&t},"isValid"),message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:s(function(t){return DFe(t)||Jb(t)&&t},"isValid"),message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:s(function(t){return Jb(t)||Array.isArray(t)},"isValid"),message:'"audience" must be a string or array'},algorithm:{isValid:SPt.bind(null,MFe),message:'"algorithm" must be a valid string enum value'},header:{isValid:LFe,message:'"header" must be an object'},encoding:{isValid:Jb,message:'"encoding" must be a string'},issuer:{isValid:Jb,message:'"issuer" must be a string'},subject:{isValid:Jb,message:'"subject" must be a string'},jwtid:{isValid:Jb,message:'"jwtid" must be a string'},noTimestamp:{isValid:xV,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Jb,message:'"keyid" must be a string'},mutatePayload:{isValid:xV,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:xV,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:xV,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},NPt={iat:{isValid:ype,message:'"iat" should be a number of seconds'},exp:{isValid:ype,message:'"exp" should be a number of seconds'},nbf:{isValid:ype,message:'"nbf" should be a number of seconds'}};function FFe(t,e,r,n){if(!LFe(r))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(r).forEach(function(i){let o=t[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(r[i]))throw new Error(o.message)})}s(FFe,"validate");function LPt(t){return FFe(DPt,!1,t,"options")}s(LPt,"validateOptions");function MPt(t){return FFe(NPt,!0,t,"payload")}s(MPt,"validatePayload");var NFe={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},FPt=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];OFe.exports=function(t,e,r,n){typeof r=="function"?(n=r,r={}):r=r||{};let i=typeof t=="object"&&!Buffer.isBuffer(t),o=Object.assign({alg:r.algorithm||"HS256",typ:i?"JWT":void 0,kid:r.keyid},r.header);function a(u){if(n)return n(u);throw u}if(s(a,"failure"),!e&&r.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof kPt))try{e=BPt(e)}catch{try{e=PPt(typeof e=="string"?Buffer.from(e):e)}catch{return a(new Error("secretOrPrivateKey is not valid key material"))}}if(o.alg.startsWith("HS")&&e.type!=="secret")return a(new Error(`secretOrPrivateKey must be a symmetric key when using ${o.alg}`));if(/^(?:RS|PS|ES)/.test(o.alg)){if(e.type!=="private")return a(new Error(`secretOrPrivateKey must be an asymmetric key when using ${o.alg}`));if(!r.allowInsecureKeySizes&&!o.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return a(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`))}if(typeof t>"u")return a(new Error("payload is required"));if(i){try{MPt(t)}catch(u){return a(u)}r.mutatePayload||(t=Object.assign({},t))}else{let u=FPt.filter(function(f){return typeof r[f]<"u"});if(u.length>0)return a(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(typeof t.exp<"u"&&typeof r.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof t.nbf<"u"&&typeof r.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{LPt(r)}catch(u){return a(u)}if(!r.allowInvalidAsymmetricKeyTypes)try{_Pt(o.alg,e)}catch(u){return a(u)}let c=t.iat||Math.floor(Date.now()/1e3);if(r.noTimestamp?delete t.iat:i&&(t.iat=c),typeof r.notBefore<"u"){try{t.nbf=PFe(r.notBefore,c)}catch(u){return a(u)}if(typeof t.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof r.expiresIn<"u"&&typeof t=="object"){try{t.exp=PFe(r.expiresIn,c)}catch(u){return a(u)}if(typeof t.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(NFe).forEach(function(u){let f=NFe[u];if(typeof r[u]<"u"){if(typeof t[f]<"u")return a(new Error('Bad "options.'+u+'" option. The payload already has an "'+f+'" property.'));t[f]=r[u]}});let l=r.encoding||"utf8";if(typeof n=="function")n=n&&RPt(n),BFe.createSign({header:o,privateKey:e,payload:t,encoding:l}).once("error",n).once("done",function(u){if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`));n(null,u)});else{let u=BFe.sign({header:o,payload:t,secret:e,encoding:l});if(!r.allowInsecureKeySizes&&/^(?:RS|PS)/.test(o.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${o.alg}`);return u}}});var qFe=U((Vln,UFe)=>{d();UFe.exports={decode:H0e(),verify:iFe(),sign:QFe(),JsonWebTokenError:_L(),NotBeforeError:W0e(),TokenExpiredError:G0e()}});function c3t(){try{return bpe.default.statSync("/.dockerenv"),!0}catch{return!1}}function l3t(){try{return bpe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function Ipe(){return xpe===void 0&&(xpe=c3t()||l3t()),xpe}var bpe,xpe,rOe=Dh(()=>{d();bpe=Ne(require("node:fs"),1);s(c3t,"hasDockerEnv");s(l3t,"hasDockerCGroup");s(Ipe,"isDocker")});function OP(){return Tpe===void 0&&(Tpe=u3t()||Ipe()),Tpe}var nOe,Tpe,u3t,wpe=Dh(()=>{d();nOe=Ne(require("node:fs"),1);rOe();u3t=s(()=>{try{return nOe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");s(OP,"isInsideContainer")});var _pe,oOe,sOe,iOe,QP,aOe=Dh(()=>{d();_pe=Ne(require("node:process"),1),oOe=Ne(require("node:os"),1),sOe=Ne(require("node:fs"),1);wpe();iOe=s(()=>{if(_pe.default.platform!=="linux")return!1;if(oOe.default.release().toLowerCase().includes("microsoft"))return!OP();try{return sOe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!OP():!1}catch{return!1}},"isWsl"),QP=_pe.default.env.__IS_WSL_TEST__?iOe:iOe()});function MS(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}var cOe=Dh(()=>{d();s(MS,"defineLazyProperty")});async function Spe(){if(uOe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await d3t("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}var lOe,uOe,dOe,d3t,fOe=Dh(()=>{d();lOe=require("node:util"),uOe=Ne(require("node:process"),1),dOe=require("node:child_process"),d3t=(0,lOe.promisify)(dOe.execFile);s(Spe,"defaultBrowserId")});async function hOe(t,{humanReadableOutput:e=!0}={}){if(pOe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await f3t("osascript",["-e",t,r]);return n.trim()}var pOe,mOe,Rpe,f3t,gOe=Dh(()=>{d();pOe=Ne(require("node:process"),1),mOe=require("node:util"),Rpe=require("node:child_process"),f3t=(0,mOe.promisify)(Rpe.execFile);s(hOe,"runAppleScript")});async function kpe(t){return hOe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}var AOe=Dh(()=>{d();gOe();s(kpe,"bundleName")});async function Ppe(t=p3t){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new LV(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=m3t[n];if(!i)throw new LV(`Unknown browser ID: ${n}`);return i}var yOe,COe,p3t,m3t,LV,EOe=Dh(()=>{d();yOe=require("node:util"),COe=require("node:child_process"),p3t=(0,yOe.promisify)(COe.execFile),m3t={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},LV=class extends Error{static{s(this,"UnknownBrowserError")}};s(Ppe,"defaultBrowser")});async function Bpe(){if(MV.default.platform==="darwin"){let t=await Spe();return{name:await kpe(t),id:t}}if(MV.default.platform==="linux"){let{stdout:t}=await h3t("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:g3t(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(MV.default.platform==="win32")return Ppe();throw new Error("Only macOS, Linux, and Windows are supported")}var vOe,MV,xOe,h3t,g3t,bOe=Dh(()=>{d();vOe=require("node:util"),MV=Ne(require("node:process"),1),xOe=require("node:child_process");fOe();AOe();EOe();h3t=(0,vOe.promisify)(xOe.execFile),g3t=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");s(Bpe,"defaultBrowser")});var POe={};ra(POe,{apps:()=>QS,default:()=>GL,openApp:()=>v3t});async function C3t(){let t=await kOe(),r=Npe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await A3t(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}function _Oe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[TOe]:e}=t;if(!e)throw new Error(`${TOe} is not supported`);return e}function Fpe({[UP]:t},{wsl:e}){if(e&&QP)return _Oe(e);if(!t)throw new Error(`${UP} is not supported`);return _Oe(t)}var HL,Npe,Lpe,SOe,ROe,Mpe,OS,A3t,Dpe,IOe,UP,TOe,y3t,kOe,wOe,WL,E3t,v3t,QS,GL,FV=Dh(()=>{d();HL=Ne(require("node:process"),1),Npe=require("node:buffer"),Lpe=Ne(require("node:path"),1),SOe=require("node:url"),ROe=Ne(require("node:util"),1),Mpe=Ne(require("node:child_process"),1),OS=Ne(require("node:fs/promises"),1);aOe();cOe();bOe();wpe();A3t=ROe.default.promisify(Mpe.default.execFile),Dpe=Lpe.default.dirname((0,SOe.fileURLToPath)(importMetaUrlShim)),IOe=Lpe.default.join(Dpe,"xdg-open"),{platform:UP,arch:TOe}=HL.default,y3t=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await OS.default.access(r,OS.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await OS.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),kOe=s(async()=>`${await y3t()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");s(C3t,"getWindowsDefaultBrowserFromWsl");wOe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),WL=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return wOe(t.app,c=>WL({...t,app:c}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return wOe(e,c=>WL({...t,app:{name:c,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let c={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},l={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=QP?await C3t():await Bpe();if(u.id in c){let f=c[u.id];return e==="browserPrivate"&&r.push(l[f]),WL({...t,app:{name:QS[f],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(UP==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(UP==="win32"||QP&&!OP()&&!e){n=QP?await kOe():`${HL.default.env.SYSTEMROOT||HL.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),QP||(o.windowsVerbatimArguments=!0);let c=["Start"];t.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&c.push(`"${t.target}"`),r.length>0&&(r=r.map(l=>`"\`"${l}\`""`),c.push("-ArgumentList",r.join(","))),t.target=Npe.Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let c=!Dpe||Dpe==="/",l=!1;try{await OS.default.access(IOe,OS.constants.X_OK),l=!0}catch{}n=HL.default.versions.electron??(UP==="android"||c||!l)?"xdg-open":IOe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}UP==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=Mpe.default.spawn(n,i,o);return t.wait?new Promise((c,l)=>{a.once("error",l),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){l(new Error(`Exited with code ${u}`));return}c(a)})}):(a.unref(),a)},"baseOpen"),E3t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return WL({...e,target:t})},"open"),v3t=s((t,e)=>{if(typeof t!="string"&&!Array.isArray(t))throw new TypeError("Expected a valid `name`");let{arguments:r=[]}=e??{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return WL({...e,app:{name:t,arguments:r}})},"openApp");s(_Oe,"detectArchBinary");s(Fpe,"detectPlatformBinary");QS={};MS(QS,"chrome",()=>Fpe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));MS(QS,"firefox",()=>Fpe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));MS(QS,"edge",()=>Fpe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));MS(QS,"browser",()=>"browser");MS(QS,"browserPrivate",()=>"browserPrivate");GL=E3t});var t7e=U(_y=>{"use strict";d();Object.defineProperty(_y,"__esModule",{value:!0});_y.bytePairEncode=_y.BinaryMap=_y.binaryMapKey=void 0;var j3t=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*c},"binaryMapKey");_y.binaryMapKey=j3t;var Vpe=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,_y.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,_y.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};_y.BinaryMap=Vpe;var wy=new Int32Array(128),Dd=new Int32Array(128);function V3t(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;wy.length<r*2;)Dd=new Int32Array(Dd.length*2),wy=new Int32Array(wy.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,i=l),Dd[l]=l,wy[l]=u}Dd[r-1]=r-1,wy[r-1]=2147483647,Dd[r]=r,wy[r]=2147483647;let o=r+1;function a(l,u=0){if(l+u+2<o){let f=e.get(t,Dd[l],Dd[l+u+2]);if(f!==void 0)return f}return 2147483647}for(s(a,"getRank");n!==2147483647;){wy[Dd[i]]=a(i,1),i>0&&(wy[Dd[i-1]]=a(i-1,1));for(let l=i+1;l<o-1;l++)Dd[l]=Dd[l+1];o--,i=-1,n=2147483647;for(let l=0;l<o-1;l++){let u=wy[Dd[l]];wy[Dd[l]]<n&&(n=u,i=l)}}let c=[];for(let l=0;l<o-1;l++)c.push(e.get(t,Dd[l],Dd[l+1]));return c}s(V3t,"bytePairEncode");_y.bytePairEncode=V3t});var r7e=U(VV=>{"use strict";d();Object.defineProperty(VV,"__esModule",{value:!0});VV.makeTextEncoder=void 0;var $pe=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},zpe=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},$3t=s(()=>typeof Buffer<"u"?new zpe:new $pe,"makeTextEncoder");VV.makeTextEncoder=$3t});var n7e=U($V=>{"use strict";d();Object.defineProperty($V,"__esModule",{value:!0});$V.LRUCache=void 0;var Ype=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new Kpe(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};$V.LRUCache=Ype;var Kpe=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Xpe=U(YV=>{"use strict";d();Object.defineProperty(YV,"__esModule",{value:!0});YV.TikTokenizer=void 0;var zV=t7e(),z3t=r7e(),Y3t=n7e();function K3t(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),c=parseInt(o[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(K3t,"loadTikTokenBpe");function J3t(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(J3t,"escapeRegExp");var Jpe=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,z3t.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new Y3t.LRUCache(i);let o=typeof e=="string"?K3t(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new zV.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>J3t(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let c=this.cache.get(o[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(o[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let f=(0,zV.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let p of f)r.push(p);this.cache.set(o[0],f)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,c){let l,u=e.substring(n,i);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let f=l[0],p=this.cache.get(f);if(p)if(a+p.length<=o)a+=p.length,c+=f.length,r.push(...p);else{let m=o-a;a+=m,c+=f.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(f),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(f,[h]),a+1<=o)a++,c+=f.length,r.push(h);else break;else{let g=(0,zV.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(f,g),a+g.length<=o){a+=g.length,c+=f.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,c+=f.length;for(let E=0;E<y;E++)r.push(g[E]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,c=0;for(;;){let u,f;if([u,f]=this.findNextSpecialToken(e,o,n),f>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,f,r,a,c);if(a=p,c=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),c+=u[0].length,o>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:i,text:l}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let E=g[0],x=this.cache.get(E);if(x)a+=x.length,c+=E.length,i.push(...x),l.set(a,c);else{let b=this.textEncoder.encode(E),_=this.encoder.get(b);if(_!==void 0)this.cache.set(E,[_]),a++,c+=E.length,i.push(_),l.set(a,c);else{let k=(0,zV.bytePairEncode)(b,this.encoder,this.textEncoder.length);this.cache.set(E,k),a+=k.length,c+=E.length;for(let P of k)i.push(P);l.set(a,c)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,c+=m[0].length,l.set(a,c),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,f=0,p=0;for(let[m,h]of l)if(m>=u){f=m,p=h;break}if(f>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(f),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);i=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};YV.TikTokenizer=Jpe});var p7e=U(kc=>{"use strict";d();Object.defineProperty(kc,"__esModule",{value:!0});kc.createTokenizer=kc.createByEncoderName=kc.createByModelName=kc.getRegexByModel=kc.getRegexByEncoder=kc.getSpecialTokensByModel=kc.getSpecialTokensByEncoder=kc.MODEL_TO_ENCODING=void 0;var X3t=Xpe(),Z3t=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);kc.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var KV="<|endoftext|>",i7e="<|fim_prefix|>",o7e="<|fim_middle|>",s7e="<|fim_suffix|>",a7e="<|endofprompt|>",rM="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",c7e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",eBt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],l7e=eBt.join("|");function Zpe(t){let e="";if(kc.MODEL_TO_ENCODING.has(t))e=kc.MODEL_TO_ENCODING.get(t);else for(let[r,n]of Z3t)if(t.startsWith(r)){e=n;break}return e}s(Zpe,"getEncoderFromModelName");async function tBt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(tBt,"fetchAndSaveFile");function eme(t){let e=new Map([[KV,50256]]);switch(t){case"o200k_base":e=new Map([[KV,199999],[a7e,200018]]);break;case"cl100k_base":e=new Map([[KV,100257],[i7e,100258],[o7e,100259],[s7e,100260],[a7e,100276]]);break;case"p50k_edit":e=new Map([[KV,50256],[i7e,50281],[o7e,50282],[s7e,50283]]);break;default:break}return e}s(eme,"getSpecialTokensByEncoder");kc.getSpecialTokensByEncoder=eme;function rBt(t){let e=Zpe(t);return eme(e)}s(rBt,"getSpecialTokensByModel");kc.getSpecialTokensByModel=rBt;function u7e(t){switch(t){case"o200k_base":return l7e;case"cl100k_base":return c7e;default:break}return rM}s(u7e,"getRegexByEncoder");kc.getRegexByEncoder=u7e;function nBt(t){let e=Zpe(t);return u7e(e)}s(nBt,"getRegexByModel");kc.getRegexByModel=nBt;async function iBt(t,e=null){return d7e(Zpe(t),e)}s(iBt,"createByModelName");kc.createByModelName=iBt;async function d7e(t,e=null){let r,n,i=eme(t);switch(t){case"o200k_base":r=l7e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=c7e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=rM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=rM,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=rM,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=rM,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");o.existsSync(l)||o.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await tBt(n,u),console.log(`Saved file to ${u}`)),f7e(u,i,r)}s(d7e,"createByEncoderName");kc.createByEncoderName=d7e;function f7e(t,e,r,n=8192){return new X3t.TikTokenizer(t,e,r,n)}s(f7e,"createTokenizer");kc.createTokenizer=f7e});var m7e=U(Pc=>{"use strict";d();Object.defineProperty(Pc,"__esModule",{value:!0});Pc.createTokenizer=Pc.createByEncoderName=Pc.createByModelName=Pc.getSpecialTokensByModel=Pc.getSpecialTokensByEncoder=Pc.getRegexByModel=Pc.getRegexByEncoder=Pc.MODEL_TO_ENCODING=Pc.TikTokenizer=void 0;var oBt=Xpe();Object.defineProperty(Pc,"TikTokenizer",{enumerable:!0,get:s(function(){return oBt.TikTokenizer},"get")});var nI=p7e();Object.defineProperty(Pc,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return nI.MODEL_TO_ENCODING},"get")});Object.defineProperty(Pc,"getRegexByEncoder",{enumerable:!0,get:s(function(){return nI.getRegexByEncoder},"get")});Object.defineProperty(Pc,"getRegexByModel",{enumerable:!0,get:s(function(){return nI.getRegexByModel},"get")});Object.defineProperty(Pc,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return nI.getSpecialTokensByEncoder},"get")});Object.defineProperty(Pc,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return nI.getSpecialTokensByModel},"get")});Object.defineProperty(Pc,"createByModelName",{enumerable:!0,get:s(function(){return nI.createByModelName},"get")});Object.defineProperty(Pc,"createByEncoderName",{enumerable:!0,get:s(function(){return nI.createByEncoderName},"get")});Object.defineProperty(Pc,"createTokenizer",{enumerable:!0,get:s(function(){return nI.createTokenizer},"get")})});var lme=U((gvn,F7e)=>{"use strict";d();F7e.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var Q7e=U((Cvn,O7e)=>{"use strict";d();var FNt=lme();function ONt(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=FNt(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(ONt,"parsePath");O7e.exports=ONt});var j7e=U((xvn,G7e)=>{"use strict";d();var QNt=Q7e();function UNt(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(UNt,"_interopDefaultLegacy");var qNt=UNt(QNt);function HNt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(HNt,"getAugmentedNamespace");var q7e={},WNt="text/plain",GNt="us-ascii",U7e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),jNt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let c=!1;a[a.length-1]==="base64"&&(a.pop(),c=!0);let l=(a.shift()||"").toLowerCase(),f=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===GNt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return c&&f.push("base64"),(f.length>0||l&&l!==WNt)&&f.unshift(l),`data:${f.join(";")},${c?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function VNt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return jNt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,l="";for(;;){let f=a.exec(i.pathname);if(!f)break;let p=f[0],m=f.index,h=i.pathname.slice(c,m);l+=h.replace(/\/{2,}/g,"/"),l+=p,c=m+p.length}let u=i.pathname.slice(c,i.pathname.length);l+=u.replace(/\/{2,}/g,"/"),i.pathname=l}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),c=a[a.length-1];U7e(c,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])U7e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(VNt,"normalizeUrl");var $Nt=Object.freeze({__proto__:null,default:VNt}),zNt=HNt($Nt);Object.defineProperty(q7e,"__esModule",{value:!0});var YNt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KNt=zNt,JNt=H7e(KNt),XNt=qNt.default,ZNt=H7e(XNt);function H7e(t){return t&&t.__esModule?t:{default:t}}s(H7e,"_interopRequireDefault");var W7e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(l){var u=new Error(l);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":YNt(r))!=="object"&&(r={stripHash:!1}),e=(0,JNt.default)(e,r));var o=(0,ZNt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");W7e.MAX_INPUT_LENGTH=2048;var e8t=q7e.default=W7e;G7e.exports=e8t});var z7e=U((Tvn,$7e)=>{"use strict";d();var t8t=lme();function V7e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=t8t(t);if(t=t.substring(t.indexOf("://")+3),V7e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(V7e,"isSsh");$7e.exports=V7e});var J7e=U((Svn,K7e)=>{"use strict";d();var r8t=j7e(),Y7e=z7e();function n8t(t){let e=r8t(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),Y7e(e.protocols)||e.protocols.length===0&&Y7e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(n8t,"gitUp");K7e.exports=n8t});var Z7e=U((Pvn,X7e)=>{"use strict";d();var i8t=J7e();function ume(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(b){return typeof b=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=i8t(t),i=n.resource.split("."),o=null;switch(n.toString=function(b){return ume.stringify(this,b)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var c=o.indexOf("-",2),l=o.indexOf("blob",2),u=o.indexOf("tree",2),f=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=c>0?c-1:l>0&&u>0?Math.min(l-1,u-1):l>0?l-1:p>0?p-1:u>0?u-1:f>0?f-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],f&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var E=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,x=E.exec(n.pathname);return x!=null&&(n.source="bitbucket-server",x[1]==="users"?n.owner="~"+x[2]:n.owner=x[2],n.organization=n.owner,n.name=x[3],o=x[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=a8t(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(ume,"gitUrlParse");ume.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?o8t(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+s8t(t)+i;default:return t.href}};function o8t(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(o8t,"buildToken");function s8t(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(s8t,"buildPath");function a8t(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(a8t,"findLongestMatchingSubstring");X7e.exports=ume});var m$=U((exports,module)=>{d();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var c=63&t[e++];if((224&a)!=192){var l=63&t[e++];if((a=(240&a)==224?(15&a)<<12|c<<6|l:(7&a)<<18|c<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|c)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343&&(c=65536+((1023&c)<<10)|1023&t.charCodeAt(++a)),c<=127){if(r>=o)break;e[r++]=c}else if(c<=2047){if(r+1>=o)break;e[r++]=192|c>>6,e[r++]=128|63&c}else if(c<=65535){if(r+2>=o)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|63&c}else{if(r+3>=o)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|63&c}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var c=getDylinkMetadata(o);c.neededDynlibs&&(dynamicLibraries=c.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var x=0,b=1;;){var _=t[e++];if(x+=(127&_)*b,b*=128,!(128&_))break}return x}s(n,"_");function i(){var x=n();return UTF8ArrayToString(t,(e+=x)-x,x)}s(i,"n");function o(x,b){if(x)throw new Error(b)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var c=WebAssembly.Module.customSections(t,a);c.length===0&&(a="dylink",c=WebAssembly.Module.customSections(t,a)),o(c.length===0,"need dylink section"),r=(t=new Uint8Array(c[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var l=n();r=e+l,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var f=n(),p=0;p<f;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(f=n(),p=0;p<f;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var E=i();256&n()&&u.tlsExports.add(E)}else if(h===4)for(y=n();y--;)i(),E=i(),(3&n())==1&&u.weakImports.add(E);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(c){if(e.fs&&e.fs.findObject(c)){var l=e.fs.readFile(c,{encoding:"binary"});return l instanceof Uint8Array||(l=new Uint8Array(l)),e.loadAsync?Promise.resolve(l):l}if(c=locateFile(c),e.loadAsync)return new Promise(function(u,f){readAsync(c,p=>u(new Uint8Array(p)),f)});if(!readBinary)throw new Error(c+": file not found, and synchronous loading of external files is not available");return readBinary(c)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var c=preloadedWasm[t];return e.loadAsync?Promise.resolve(c):c}return e.loadAsync?i(t).then(function(l){return loadWebAssemblyModule(l,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(c){n.global&&mergeLibSymbols(c,t),n.module=c}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(c){return a(c),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(c){if(c&&c.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(c.node)))return-54;throw c}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(c){if(typeof FS>"u"||!(c instanceof FS.ErrnoError))throw c;return c.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],c=HEAPU32[e+4>>2];e+=8;var l=FS.write(t,HEAP8,a,c,n);if(l<0)return-1;i+=l,n!==void 0&&(n+=l)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((l,u,f)=>e.slice(l,f),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let l=o;for(let u=0;u<i;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let f=0,p=o.length;f<p;f++)e.includes(o[f])&&i.push(f);let a=C._malloc(SIZE_OF_INT*i.length);for(let f=0,p=i.length;f<p;f++)setValue(a+f*SIZE_OF_INT,i[f],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let f=l;for(let p=0;p<c;p++)u[p]=unmarshalNode(this.tree,f),f+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),E=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,x=e.substr(E,100).split(`
`)[0],b,_=x.match(QUERY_WORD_REGEX)[0];switch(y){case 2:b=new RangeError(`Bad node name '${_}'`);break;case 3:b=new RangeError(`Bad field name '${_}'`);break;case 4:b=new RangeError(`Bad capture name @${_}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${E}: '${x}'...`),_="";break;default:b=new SyntaxError(`Bad syntax at offset ${E}: '${x}'...`),_=""}throw b.index=E,b.length=_.length,C._free(n),b}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),c=C._ts_query_pattern_count(i),l=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let E=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");l[y]=UTF8ToString(E,x)}for(let y=0;y<o;y++){let E=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(E,x)}let f=new Array(c),p=new Array(c),m=new Array(c),h=new Array(c),g=new Array(c);for(let y=0;y<c;y++){let E=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),x=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let b=[],_=E;for(let k=0;k<x;k++){let P=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,P===PREDICATE_STEP_TYPE_CAPTURE)b.push({type:"capture",name:l[N]});else if(P===PREDICATE_STEP_TYPE_STRING)b.push({type:"string",value:u[N]});else if(b.length>0){if(b[0].type!=="string")throw new Error("Predicates must begin with a literal value");let M=b[0].value,J=!0;switch(M){case"not-eq?":J=!1;case"eq?":if(b.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(b.length-1));if(b[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${b[1].value}"`);if(b[2].type==="capture"){let H=b[1].name,ce=b[2].name;g[y].push(function(ie){let V,Q;for(let z of ie)z.name===H&&(V=z.node),z.name===ce&&(Q=z.node);return V===void 0||Q===void 0||V.text===Q.text===J})}else{let H=b[1].name,ce=b[2].value;g[y].push(function(ie){for(let V of ie)if(V.name===H)return V.node.text===ce===J;return!0})}break;case"not-match?":J=!1;case"match?":if(b.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${b.length-1}.`);if(b[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${b[1].value}".`);if(b[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${b[2].value}.`);let pe=b[1].name,Y=new RegExp(b[2].value);g[y].push(function(H){for(let ce of H)if(ce.name===pe)return Y.test(ce.node.text)===J;return!0});break;case"set!":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(H=>H.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');f[y]||(f[y]={}),f[y][b[1].value]=b[2]?b[2].value:null;break;case"is?":case"is-not?":if(b.length<2||b.length>3)throw new Error(`Wrong number of arguments to \`#${M}\` predicate. Expected 1 or 2. Got ${b.length-1}.`);if(b.some(H=>H.type!=="string"))throw new Error(`Arguments to \`#${M}\` predicate must be a strings.".`);let G=M==="is?"?p:m;G[y]||(G[y]={}),G[y][b[1].value]=b[2]?b[2].value:null;break;default:h[y].push({operator:M,operands:b.slice(1)})}b.length=0}}Object.freeze(f[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,l,g,h,Object.freeze(f),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let c=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${c}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(l=>LANGUAGE_FUNCTION_REGEX.test(l)&&!l.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let c=i[a]();return new Language(INTERNAL,c)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!l;let f=0,p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(E=>E(y))){u[f++]={pattern:h,captures:y};let E=this.setProperties[h];E&&(u[m].setProperties=E);let x=this.assertedProperties[h];x&&(u[m].assertedProperties=x);let b=this.refutedProperties[h];b&&(u[m].refutedProperties=b)}}return u.length=f,C._free(c),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),l=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!l;let f=[],p=c;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,f.length=g,p=unmarshalCaptures(this,e.tree,p,f),this.textPredicates[h].every(E=>E(f))){let E=f[y],x=this.setProperties[h];x&&(E.setProperties=x);let b=this.assertedProperties[h];b&&(E.assertedProperties=b);let _=this.refutedProperties[h];_&&(E.refutedProperties=_),u.push(E)}}return C._free(c),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),c=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:c}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:i,column:o},c[0]=a,c}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var rhe=U((pwn,WQe)=>{d();var the=require("fs"),j$=require("path"),RM=j$.join,j6t=j$.dirname,qQe=the.accessSync&&function(t){try{the.accessSync(t)}catch{return!1}return!0}||the.existsSync||j$.existsSync,HQe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function V6t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(HQe).map(function(l){l in t||(t[l]=HQe[l])}),t.module_root||(t.module_root=$6t(__filename)),j$.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,c;n<i;n++){o=RM.apply(null,t.try[n].map(function(l){return t[l]||l})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(l){if(l.code!=="MODULE_NOT_FOUND"&&l.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(l.message))throw l}}throw c=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(l){return t.arrow+l}).join(`
`)),c.tries=r,c}s(V6t,"bindings");WQe.exports=V6t;function $6t(t){for(var e=j6t(t),r;;){if(e==="."&&(e=process.cwd()),qQe(RM(e,"dist")))return RM(e,"dist");if(qQe(RM(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=RM(e,"..")}}s($6t,"getRoot")});var jQe=U((gwn,GQe)=>{d();GQe.exports=rhe()("node_sqlite3.node")});var zQe=U($Qe=>{d();var z6t=require("util");function Y6t(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(c){return z6t.inspect(c,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let l=arguments[0];return l&&l.stack&&!l.__augmented&&(l.stack=VQe(l).join(`
`),l.stack+=`
--> in `+o,l.stack+=`
`+VQe(i).slice(1).join(`
`),l.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(Y6t,"extendTrace");$Qe.extendTrace=Y6t;function VQe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(VQe,"filter")});var XQe=U((KQe,JQe)=>{d();var K6t=require("path"),Am=jQe(),r3=require("events").EventEmitter;JQe.exports=KQe=Am;function n3(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new V$(this,e,r);return t.call(this,i,n)}}s(n3,"normalizeMethod");function ihe(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(ihe,"inherits");Am.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Ld(t,e,r);let n;if(t=K6t.resolve(t),!Am.cached.objects[t])n=Am.cached.objects[t]=new Ld(t,e,r);else{n=Am.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Ld=Am.Database,V$=Am.Statement,nhe=Am.Backup;ihe(Ld,r3);ihe(V$,r3);ihe(nhe,r3);Ld.prototype.prepare=n3(function(t,e){return e.length?t.bind.apply(t,e):t});Ld.prototype.run=n3(function(t,e){return t.run.apply(t,e).finalize(),this});Ld.prototype.get=n3(function(t,e){return t.get.apply(t,e).finalize(),this});Ld.prototype.all=n3(function(t,e){return t.all.apply(t,e).finalize(),this});Ld.prototype.each=n3(function(t,e){return t.each.apply(t,e).finalize(),this});Ld.prototype.map=n3(function(t,e){return t.map.apply(t,e).finalize(),this});Ld.prototype.backup=function(){let t;return arguments.length<=2?t=new nhe(this,arguments[0],"main","main",!0,arguments[1]):t=new nhe(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Am.BUSY,Am.LOCKED],t};V$.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let c=0;c<n.length;c++)i[n[c][a]]=n[c];else{let c=o[1];for(let l=0;l<n.length;l++)i[n[l][a]]=n[l][c]}}e(r,i)}),this.all.apply(this,t)};var YQe=!1,ohe=["trace","profile","change"];Ld.prototype.addListener=Ld.prototype.on=function(t){let e=r3.prototype.addListener.apply(this,arguments);return ohe.indexOf(t)>=0&&this.configure(t,!0),e};Ld.prototype.removeListener=function(t){let e=r3.prototype.removeListener.apply(this,arguments);return ohe.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ld.prototype.removeAllListeners=function(t){let e=r3.prototype.removeAllListeners.apply(this,arguments);return ohe.indexOf(t)>=0&&this.configure(t,!1),e};Am.verbose=function(){if(!YQe){let t=zQe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ld.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(V$.prototype,e)}),YQe=!0}return Am}});var oz=U(Nc=>{"use strict";d();Object.defineProperty(Nc,"__esModule",{value:!0});Nc.thenable=Nc.typedArray=Nc.stringArray=Nc.array=Nc.func=Nc.error=Nc.number=Nc.string=Nc.boolean=void 0;function X6t(t){return t===!0||t===!1}s(X6t,"boolean");Nc.boolean=X6t;function nUe(t){return typeof t=="string"||t instanceof String}s(nUe,"string");Nc.string=nUe;function Z6t(t){return typeof t=="number"||t instanceof Number}s(Z6t,"number");Nc.number=Z6t;function e9t(t){return t instanceof Error}s(e9t,"error");Nc.error=e9t;function iUe(t){return typeof t=="function"}s(iUe,"func");Nc.func=iUe;function oUe(t){return Array.isArray(t)}s(oUe,"array");Nc.array=oUe;function t9t(t){return oUe(t)&&t.every(e=>nUe(e))}s(t9t,"stringArray");Nc.stringArray=t9t;function r9t(t,e){return Array.isArray(t)&&t.every(e)}s(r9t,"typedArray");Nc.typedArray=r9t;function n9t(t){return t&&iUe(t.then)}s(n9t,"thenable");Nc.thenable=n9t});var che=U(ym=>{"use strict";d();Object.defineProperty(ym,"__esModule",{value:!0});ym.generateUuid=ym.parse=ym.isUUID=ym.v4=ym.empty=void 0;var BM=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},DM=class t extends BM{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};DM._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];DM._timeHighBits=["8","9","a","b"];ym.empty=new BM("00000000-0000-0000-0000-000000000000");function sUe(){return new DM}s(sUe,"v4");ym.v4=sUe;var i9t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function aUe(t){return i9t.test(t)}s(aUe,"isUUID");ym.isUUID=aUe;function o9t(t){if(!aUe(t))throw new Error("invalid uuid");return new BM(t)}s(o9t,"parse");ym.parse=o9t;function s9t(){return sUe().asHex()}s(s9t,"generateUuid");ym.generateUuid=s9t});var cUe=U(pI=>{"use strict";d();Object.defineProperty(pI,"__esModule",{value:!0});pI.attachPartialResult=pI.ProgressFeature=pI.attachWorkDone=void 0;var fI=di(),a9t=che(),e2=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(fI.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(fI.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(fI.WorkDoneProgress.type,this._token,{kind:"end"})}};e2.Instances=new Map;var sz=class extends e2{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new fI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},NM=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},az=class extends NM{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new fI.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function c9t(t,e){if(e===void 0||e.workDoneToken===void 0)return new NM;let r=e.workDoneToken;return delete e.workDoneToken,new e2(t,r)}s(c9t,"attachWorkDone");pI.attachWorkDone=c9t;var l9t=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(fI.WorkDoneProgressCancelNotification.type,r=>{let n=e2.Instances.get(r.token);(n instanceof sz||n instanceof az)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new NM:new e2(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,a9t.generateUuid)();return this.connection.sendRequest(fI.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new sz(this.connection,e))}else return Promise.resolve(new az)}},"ProgressFeature");pI.ProgressFeature=l9t;var lhe;(function(t){t.type=new fI.ProgressType})(lhe||(lhe={}));var uhe=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(lhe.type,this._token,e)}};function u9t(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new uhe(t,r)}s(u9t,"attachPartialResult");pI.attachPartialResult=u9t});var lUe=U(cz=>{"use strict";d();Object.defineProperty(cz,"__esModule",{value:!0});cz.ConfigurationFeature=void 0;var d9t=di(),f9t=oz(),p9t=s(t=>class extends t{getConfiguration(e){return e?f9t.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(d9t.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");cz.ConfigurationFeature=p9t});var uUe=U(uz=>{"use strict";d();Object.defineProperty(uz,"__esModule",{value:!0});uz.WorkspaceFoldersFeature=void 0;var lz=di(),m9t=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new lz.Emitter,this.connection.onNotification(lz.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(lz.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(lz.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");uz.WorkspaceFoldersFeature=m9t});var dUe=U(dz=>{"use strict";d();Object.defineProperty(dz,"__esModule",{value:!0});dz.CallHierarchyFeature=void 0;var dhe=di(),h9t=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(dhe.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=dhe.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=dhe.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");dz.CallHierarchyFeature=h9t});var phe=U(mI=>{"use strict";d();Object.defineProperty(mI,"__esModule",{value:!0});mI.SemanticTokensBuilder=mI.SemanticTokensDiff=mI.SemanticTokensFeature=void 0;var fz=di(),g9t=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(fz.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=fz.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=fz.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=fz.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");mI.SemanticTokensFeature=g9t;var pz=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,c=this.modifiedSequence.slice(n,o+1);return c.length===1&&c[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:c}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};mI.SemanticTokensDiff=pz;var fhe=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,c=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(c-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=c,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new pz(this._prevData,this._data).computeDiff()}:this.build()}};mI.SemanticTokensBuilder=fhe});var fUe=U(mz=>{"use strict";d();Object.defineProperty(mz,"__esModule",{value:!0});mz.ShowDocumentFeature=void 0;var A9t=di(),y9t=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(A9t.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");mz.ShowDocumentFeature=y9t});var pUe=U(hz=>{"use strict";d();Object.defineProperty(hz,"__esModule",{value:!0});hz.FileOperationsFeature=void 0;var o3=di(),C9t=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(o3.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(o3.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(o3.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(o3.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(o3.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(o3.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");hz.FileOperationsFeature=C9t});var mUe=U(gz=>{"use strict";d();Object.defineProperty(gz,"__esModule",{value:!0});gz.LinkedEditingRangeFeature=void 0;var E9t=di(),v9t=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(E9t.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");gz.LinkedEditingRangeFeature=v9t});var hUe=U(Az=>{"use strict";d();Object.defineProperty(Az,"__esModule",{value:!0});Az.TypeHierarchyFeature=void 0;var mhe=di(),x9t=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(mhe.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=mhe.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=mhe.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");Az.TypeHierarchyFeature=x9t});var AUe=U(yz=>{"use strict";d();Object.defineProperty(yz,"__esModule",{value:!0});yz.InlineValueFeature=void 0;var gUe=di(),b9t=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(gUe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(gUe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");yz.InlineValueFeature=b9t});var CUe=U(Cz=>{"use strict";d();Object.defineProperty(Cz,"__esModule",{value:!0});Cz.FoldingRangeFeature=void 0;var yUe=di(),I9t=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(yUe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=yUe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");Cz.FoldingRangeFeature=I9t});var EUe=U(Ez=>{"use strict";d();Object.defineProperty(Ez,"__esModule",{value:!0});Ez.InlayHintFeature=void 0;var hhe=di(),T9t=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(hhe.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(hhe.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(hhe.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");Ez.InlayHintFeature=T9t});var vUe=U(vz=>{"use strict";d();Object.defineProperty(vz,"__esModule",{value:!0});vz.DiagnosticFeature=void 0;var LM=di(),w9t=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(LM.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(LM.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(LM.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(LM.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(LM.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");vz.DiagnosticFeature=w9t});var Ahe=U(xz=>{"use strict";d();Object.defineProperty(xz,"__esModule",{value:!0});xz.TextDocuments=void 0;var t2=di(),ghe=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new t2.Emitter,this._onDidOpen=new t2.Emitter,this._onDidClose=new t2.Emitter,this._onDidSave=new t2.Emitter,this._onWillSave=new t2.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=t2.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=this._syncedDocuments.get(i.uri);c!==void 0&&(c=this._configuration.update(c,o,a),this._syncedDocuments.set(i.uri,c),this._onDidChangeContent.fire(Object.freeze({document:c})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),t2.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};xz.TextDocuments=ghe});var Che=U(s3=>{"use strict";d();Object.defineProperty(s3,"__esModule",{value:!0});s3.NotebookDocuments=s3.NotebookSyncFeature=void 0;var Cm=di(),xUe=Ahe(),_9t=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Cm.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Cm.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Cm.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Cm.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");s3.NotebookSyncFeature=_9t;var bz=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Cm.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Cm.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Cm.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};bz.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var yhe=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof xUe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new xUe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Cm.Emitter,this._onDidChange=new Cm.Emitter,this._onDidSave=new Cm.Emitter,this._onDidClose=new Cm.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new bz,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,c=!1,l=i.change;l.metadata!==void 0&&(c=!0,o.metadata=l.metadata);let u=[],f=[],p=[],m=[];if(l.cells!==void 0){let x=l.cells;if(x.structure!==void 0){let b=x.structure.array;if(o.cells.splice(b.start,b.deleteCount,...b.cells!==void 0?b.cells:[]),x.structure.didOpen!==void 0)for(let _ of x.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(x.structure.didClose)for(let _ of x.structure.didClose)r.closeTextDocument({textDocument:_}),f.push(_.uri)}if(x.data!==void 0){let b=new Map(x.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=b.get(o.cells[_].document);if(k!==void 0){let P=o.cells.splice(_,1,k);if(p.push({old:P[0],new:k}),b.delete(k.document),b.size===0)break}}}if(x.textContent!==void 0)for(let b of x.textContent)r.changeTextDocument({textDocument:b.document,contentChanges:b.changes}),m.push(b.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};c&&(h.metadata={old:a,new:o.metadata});let g=[];for(let x of u)g.push(this.getNotebookCell(x));let y=[];for(let x of f)y.push(this.getNotebookCell(x));let E=[];for(let x of m)E.push(this.getNotebookCell(x));(g.length>0||y.length>0||p.length>0||E.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:E}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Cm.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};s3.NotebookDocuments=yhe});var bUe=U(Iz=>{"use strict";d();Object.defineProperty(Iz,"__esModule",{value:!0});Iz.MonikerFeature=void 0;var S9t=di(),R9t=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=S9t.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");Iz.MonikerFeature=R9t});var The=U(Po=>{"use strict";d();Object.defineProperty(Po,"__esModule",{value:!0});Po.createConnection=Po.combineFeatures=Po.combineNotebooksFeatures=Po.combineLanguagesFeatures=Po.combineWorkspaceFeatures=Po.combineWindowFeatures=Po.combineClientFeatures=Po.combineTracerFeatures=Po.combineTelemetryFeatures=Po.combineConsoleFeatures=Po._NotebooksImpl=Po._LanguagesImpl=Po.BulkUnregistration=Po.BulkRegistration=Po.ErrorMessageTracker=void 0;var Kt=di(),Em=oz(),vhe=che(),si=cUe(),k9t=lUe(),P9t=uUe(),B9t=dUe(),D9t=phe(),N9t=fUe(),L9t=pUe(),M9t=mUe(),F9t=hUe(),O9t=AUe(),Q9t=CUe(),U9t=EUe(),q9t=vUe(),H9t=Che(),W9t=bUe();function Ehe(t){if(t!==null)return t}s(Ehe,"null2Undefined");var xhe=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};Po.ErrorMessageTracker=xhe;var Tz=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(Kt.MessageType.Error,e)}warn(e){this.send(Kt.MessageType.Warning,e)}info(e){this.send(Kt.MessageType.Info,e)}log(e){this.send(Kt.MessageType.Log,e)}debug(e){this.send(Kt.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification(Kt.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,Kt.RAL)().console.error("Sending log message failed")})}},bhe=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:Kt.MessageType.Error,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(Ehe)}showWarningMessage(e,...r){let n={type:Kt.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(Ehe)}showInformationMessage(e,...r){let n={type:Kt.MessageType.Info,message:e,actions:r};return this.connection.sendRequest(Kt.ShowMessageRequest.type,n).then(Ehe)}},IUe=(0,N9t.ShowDocumentFeature)((0,si.ProgressFeature)(bhe)),TUe;(function(t){function e(){return new wz}s(e,"create"),t.create=e})(TUe||(Po.BulkRegistration=TUe={}));var wz=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Em.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=vhe.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},wUe;(function(t){function e(){return new MM(void 0,[])}s(e,"create"),t.create=e})(wUe||(Po.BulkUnregistration=wUe={}));var MM=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest(Kt.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Em.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest(Kt.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},_z=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof wz?this.registerMany(e):e instanceof MM?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Em.string(r)?r:r.method,o=vhe.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(Kt.RegistrationRequest.type,a).then(c=>(e.add({id:o,method:i}),e),c=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(c)))}registerSingle2(e,r){let n=Em.string(e)?e:e.method,i=vhe.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest(Kt.RegistrationRequest.type,o).then(a=>Kt.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest(Kt.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest(Kt.RegistrationRequest.type,r).then(()=>new MM(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},Ihe=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest(Kt.ApplyWorkspaceEditRequest.type,n)}},_Ue=(0,L9t.FileOperationsFeature)((0,P9t.WorkspaceFoldersFeature)((0,k9t.ConfigurationFeature)(Ihe))),Sz=class{static{s(this,"TracerImpl")}constructor(){this._trace=Kt.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==Kt.Trace.Off&&this.connection.sendNotification(Kt.LogTraceNotification.type,{message:e,verbose:this._trace===Kt.Trace.Verbose?r:void 0}).catch(()=>{})}},Rz=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(Kt.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},kz=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,si.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,si.attachPartialResult)(this.connection,r)}};Po._LanguagesImpl=kz;var SUe=(0,Q9t.FoldingRangeFeature)((0,W9t.MonikerFeature)((0,q9t.DiagnosticFeature)((0,U9t.InlayHintFeature)((0,O9t.InlineValueFeature)((0,F9t.TypeHierarchyFeature)((0,M9t.LinkedEditingRangeFeature)((0,D9t.SemanticTokensFeature)((0,B9t.CallHierarchyFeature)(kz))))))))),Pz=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,si.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,si.attachPartialResult)(this.connection,r)}};Po._NotebooksImpl=Pz;var RUe=(0,H9t.NotebookSyncFeature)(Pz);function kUe(t,e){return function(r){return e(t(r))}}s(kUe,"combineConsoleFeatures");Po.combineConsoleFeatures=kUe;function PUe(t,e){return function(r){return e(t(r))}}s(PUe,"combineTelemetryFeatures");Po.combineTelemetryFeatures=PUe;function BUe(t,e){return function(r){return e(t(r))}}s(BUe,"combineTracerFeatures");Po.combineTracerFeatures=BUe;function DUe(t,e){return function(r){return e(t(r))}}s(DUe,"combineClientFeatures");Po.combineClientFeatures=DUe;function NUe(t,e){return function(r){return e(t(r))}}s(NUe,"combineWindowFeatures");Po.combineWindowFeatures=NUe;function LUe(t,e){return function(r){return e(t(r))}}s(LUe,"combineWorkspaceFeatures");Po.combineWorkspaceFeatures=LUe;function MUe(t,e){return function(r){return e(t(r))}}s(MUe,"combineLanguagesFeatures");Po.combineLanguagesFeatures=MUe;function FUe(t,e){return function(r){return e(t(r))}}s(FUe,"combineNotebooksFeatures");Po.combineNotebooksFeatures=FUe;function G9t(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,kUe),tracer:r(t.tracer,e.tracer,BUe),telemetry:r(t.telemetry,e.telemetry,PUe),client:r(t.client,e.client,DUe),window:r(t.window,e.window,NUe),workspace:r(t.workspace,e.workspace,LUe),languages:r(t.languages,e.languages,MUe),notebooks:r(t.notebooks,e.notebooks,FUe)}}s(G9t,"combineFeatures");Po.combineFeatures=G9t;function j9t(t,e,r){let n=r&&r.console?new(r.console(Tz)):new Tz,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(Sz)):new Sz,a=r&&r.telemetry?new(r.telemetry(Rz)):new Rz,c=r&&r.client?new(r.client(_z)):new _z,l=r&&r.window?new(r.window(IUe)):new IUe,u=r&&r.workspace?new(r.workspace(_Ue)):new _Ue,f=r&&r.languages?new(r.languages(SUe)):new SUe,p=r&&r.notebooks?new(r.notebooks(RUe)):new RUe,m=[n,o,a,c,l,u,f,p];function h(b){return b instanceof Promise?b:Em.thenable(b)?new Promise((_,k)=>{b.then(P=>_(P),P=>k(P))}):Promise.resolve(b)}s(h,"asPromise");let g,y,E,x={listen:s(()=>i.listen(),"listen"),sendRequest:s((b,..._)=>i.sendRequest(Em.string(b)?b:b.method,..._),"sendRequest"),onRequest:s((b,_)=>i.onRequest(b,_),"onRequest"),sendNotification:s((b,_)=>{let k=Em.string(b)?b:b.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((b,_)=>i.onNotification(b,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(b=>(y=b,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(b=>i.onNotification(Kt.InitializedNotification.type,b),"onInitialized"),onShutdown:s(b=>(g=b,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(b=>(E=b,{dispose:s(()=>{E=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return c},get window(){return l},get workspace(){return u},get languages(){return f},get notebooks(){return p},onDidChangeConfiguration:s(b=>i.onNotification(Kt.DidChangeConfigurationNotification.type,b),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(b=>i.onNotification(Kt.DidChangeWatchedFilesNotification.type,b),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(b=>i.onNotification(Kt.DidOpenTextDocumentNotification.type,b),"onDidOpenTextDocument"),onDidChangeTextDocument:s(b=>i.onNotification(Kt.DidChangeTextDocumentNotification.type,b),"onDidChangeTextDocument"),onDidCloseTextDocument:s(b=>i.onNotification(Kt.DidCloseTextDocumentNotification.type,b),"onDidCloseTextDocument"),onWillSaveTextDocument:s(b=>i.onNotification(Kt.WillSaveTextDocumentNotification.type,b),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(b=>i.onRequest(Kt.WillSaveTextDocumentWaitUntilRequest.type,b),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(b=>i.onNotification(Kt.DidSaveTextDocumentNotification.type,b),"onDidSaveTextDocument"),sendDiagnostics:s(b=>i.sendNotification(Kt.PublishDiagnosticsNotification.type,b),"sendDiagnostics"),onHover:s(b=>i.onRequest(Kt.HoverRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(b=>i.onRequest(Kt.CompletionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(b=>i.onRequest(Kt.CompletionResolveRequest.type,b),"onCompletionResolve"),onSignatureHelp:s(b=>i.onRequest(Kt.SignatureHelpRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(b=>i.onRequest(Kt.DeclarationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(b=>i.onRequest(Kt.DefinitionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(b=>i.onRequest(Kt.TypeDefinitionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(b=>i.onRequest(Kt.ImplementationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(b=>i.onRequest(Kt.ReferencesRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(b=>i.onRequest(Kt.DocumentHighlightRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(b=>i.onRequest(Kt.DocumentSymbolRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(b=>i.onRequest(Kt.WorkspaceSymbolRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(b=>i.onRequest(Kt.WorkspaceSymbolResolveRequest.type,b),"onWorkspaceSymbolResolve"),onCodeAction:s(b=>i.onRequest(Kt.CodeActionRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(b=>i.onRequest(Kt.CodeActionResolveRequest.type,(_,k)=>b(_,k)),"onCodeActionResolve"),onCodeLens:s(b=>i.onRequest(Kt.CodeLensRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(b=>i.onRequest(Kt.CodeLensResolveRequest.type,(_,k)=>b(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(b=>i.onRequest(Kt.DocumentFormattingRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(b=>i.onRequest(Kt.DocumentRangeFormattingRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(b=>i.onRequest(Kt.DocumentOnTypeFormattingRequest.type,(_,k)=>b(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(b=>i.onRequest(Kt.RenameRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(b=>i.onRequest(Kt.PrepareRenameRequest.type,(_,k)=>b(_,k)),"onPrepareRename"),onDocumentLinks:s(b=>i.onRequest(Kt.DocumentLinkRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(b=>i.onRequest(Kt.DocumentLinkResolveRequest.type,(_,k)=>b(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(b=>i.onRequest(Kt.DocumentColorRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(b=>i.onRequest(Kt.ColorPresentationRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(b=>i.onRequest(Kt.FoldingRangeRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(b=>i.onRequest(Kt.SelectionRangeRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),(0,si.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(b=>i.onRequest(Kt.ExecuteCommandRequest.type,(_,k)=>b(_,k,(0,si.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let b of m)b.attach(x);return i.onRequest(Kt.InitializeRequest.type,b=>{e.initialize(b),Em.string(b.trace)&&(o.trace=Kt.Trace.fromString(b.trace));for(let _ of m)_.initialize(b.capabilities);if(y){let _=y(b,new Kt.CancellationTokenSource().token,(0,si.attachWorkDone)(i,b),void 0);return h(_).then(k=>{if(k instanceof Kt.ResponseError)return k;let P=k;P||(P={capabilities:{}});let N=P.capabilities;N||(N={},P.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Em.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None:!Em.number(N.textDocumentSync)&&!Em.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Em.number(x.__textDocumentSync)?x.__textDocumentSync:Kt.TextDocumentSyncKind.None);for(let M of m)M.fillServerCapabilities(N);return P})}else{let _={capabilities:{textDocumentSync:Kt.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest(Kt.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new Kt.CancellationTokenSource().token)}),i.onNotification(Kt.ExitNotification.type,()=>{try{E&&E()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification(Kt.SetTraceNotification.type,b=>{o.trace=Kt.Trace.fromString(b.value)}),x}s(j9t,"createConnection");Po.createConnection=j9t});var OUe=U(Nf=>{"use strict";d();Object.defineProperty(Nf,"__esModule",{value:!0});Nf.resolveModulePath=Nf.FileSystem=Nf.resolveGlobalYarnPath=Nf.resolveGlobalNodePath=Nf.resolve=Nf.uriToFilePath=void 0;var V9t=require("url"),mg=require("path"),whe=require("fs"),khe=require("child_process");function $9t(t){let e=V9t.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return mg.normalize(r.join("/"))}s($9t,"uriToFilePath");Nf.uriToFilePath=$9t;function _he(){return process.platform==="win32"}s(_he,"isWindows");function Bz(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,c)=>{let l=process.env,u=Object.create(null);Object.keys(l).forEach(f=>u[f]=l[f]),e&&whe.existsSync(e)&&(u[i]?u[i]=e+mg.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let f=(0,khe.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(f.pid===void 0){c(new Error(`Starting process to resolve node module  ${t} failed`));return}f.on("error",m=>{c(m)}),f.on("message",m=>{m.c==="r"&&(f.send({c:"e"}),m.s?a(m.r):c(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};f.send(p)}catch(f){c(f)}})}s(Bz,"resolve");Nf.resolve=Bz;function She(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};_he()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,khe.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?_he()?mg.join(a,"node_modules"):mg.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(She,"resolveGlobalNodePath");Nf.resolveGlobalNodePath=She;function z9t(t){let e="yarn",r={encoding:"utf8"};_he()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,khe.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let c of a)try{let l=JSON.parse(c);if(l.type==="log")return mg.join(l.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(z9t,"resolveGlobalYarnPath");Nf.resolveGlobalYarnPath=z9t;var Rhe;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!whe.existsSync(__filename.toUpperCase())||!whe.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?mg.normalize(o).indexOf(mg.normalize(i))===0:mg.normalize(o).toLowerCase().indexOf(mg.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Rhe||(Nf.FileSystem=Rhe={}));function Y9t(t,e,r,n){return r?(mg.isAbsolute(r)||(r=mg.join(t,r)),Bz(e,r,r,n).then(i=>Rhe.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>Bz(e,She(n),t,n))):Bz(e,She(n),t,n)}s(Y9t,"resolveModulePath");Nf.resolveModulePath=Y9t});var Phe=U((BSn,QUe)=>{"use strict";d();QUe.exports=di()});var UUe=U(Dz=>{"use strict";d();Object.defineProperty(Dz,"__esModule",{value:!0});Dz.InlineCompletionFeature=void 0;var K9t=di(),J9t=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(K9t.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");Dz.InlineCompletionFeature=J9t});var WUe=U(Ku=>{"use strict";d();var X9t=Ku&&Ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),HUe=Ku&&Ku.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&X9t(e,t,r)};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.ProposedFeatures=Ku.NotebookDocuments=Ku.TextDocuments=Ku.SemanticTokensBuilder=void 0;var Z9t=phe();Object.defineProperty(Ku,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return Z9t.SemanticTokensBuilder},"get")});var eLt=UUe();HUe(di(),Ku);var tLt=Ahe();Object.defineProperty(Ku,"TextDocuments",{enumerable:!0,get:s(function(){return tLt.TextDocuments},"get")});var rLt=Che();Object.defineProperty(Ku,"NotebookDocuments",{enumerable:!0,get:s(function(){return rLt.NotebookDocuments},"get")});HUe(The(),Ku);var qUe;(function(t){t.all={__brand:"features",languages:eLt.InlineCompletionFeature}})(qUe||(Ku.ProposedFeatures=qUe={}))});var Lc=U(vm=>{"use strict";d();var nLt=vm&&vm.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$Ue=vm&&vm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nLt(e,t,r)};Object.defineProperty(vm,"__esModule",{value:!0});vm.createConnection=vm.Files=void 0;var GUe=require("node:util"),Bhe=oz(),iLt=The(),FM=OUe(),r2=Phe();$Ue(Phe(),vm);$Ue(WUe(),vm);var jUe;(function(t){t.uriToFilePath=FM.uriToFilePath,t.resolveGlobalNodePath=FM.resolveGlobalNodePath,t.resolveGlobalYarnPath=FM.resolveGlobalYarnPath,t.resolve=FM.resolve,t.resolveModulePath=FM.resolveModulePath})(jUe||(vm.Files=jUe={}));var VUe;function Nz(){if(VUe!==void 0)try{VUe.end()}catch{}}s(Nz,"endProtocolConnection");var a3=!1,zUe;function oLt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(zUe=setInterval(()=>{try{process.kill(n,0)}catch{Nz(),process.exit(a3?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(oLt,"setupExitTimer");oLt();var sLt={initialize:s(t=>{let e=t.processId;Bhe.number(e)&&zUe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(a3?0:1)}},3e3)},"initialize"),get shutdownReceived(){return a3},set shutdownReceived(t){a3=t},exit:s(t=>{Nz(),process.exit(t)},"exit")};function aLt(t,e,r,n){let i,o,a,c;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),r2.ConnectionStrategy.is(t)||r2.ConnectionOptions.is(t)?c=t:(o=t,a=e,c=r),cLt(o,a,c,i)}s(aLt,"createConnection");vm.createConnection=aLt;function cLt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let l,u,f=process.argv.slice(2);for(let p=0;p<f.length;p++){let m=f[p];if(m==="--node-ipc"){t=new r2.IPCMessageReader(process),e=new r2.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){l=parseInt(f[p+1]);break}else if(m==="--pipe"){u=f[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){l=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(l){let p=(0,r2.createServerSocketTransport)(l);t=p[0],e=p[1]}else if(u){let p=(0,r2.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Bhe.func(t.read)&&Bhe.func(t.on)){let l=t;l.on("end",()=>{Nz(),process.exit(a3?0:1)}),l.on("close",()=>{Nz(),process.exit(a3?0:1)})}let c=s(l=>{let u=(0,r2.createProtocolConnection)(t,e,l,r);return i&&lLt(l),u},"connectionFactory");return(0,iLt.createConnection)(c,sLt,n)}s(cLt,"_createConnection");function lLt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,GUe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...c]=o;t.error(`Assertion failed: ${a} ${e(c)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,GUe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(lLt,"patchConsole")});var hg=U((GSn,YUe)=>{"use strict";d();YUe.exports=Lc()});var FWe=U((J4n,MWe)=>{"use strict";d();MWe.exports=NWe;function NWe(t,e,r){t instanceof RegExp&&(t=DWe(t,r)),e instanceof RegExp&&(e=DWe(e,r));var n=LWe(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(NWe,"balanced");function DWe(t,e){var r=e.match(t);return r?r[0]:null}s(DWe,"maybeMatch");NWe.range=LWe;function LWe(t,e,r){var n,i,o,a,c,l=r.indexOf(t),u=r.indexOf(e,l+1),f=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;f>=0&&!c;)f==l?(n.push(f),l=r.indexOf(t,f+1)):n.length==1?c=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,f+1)),f=l<u&&l>=0?l:u;n.length&&(c=[o,a])}return c}s(LWe,"range")});var jWe=U((ePn,GWe)=>{d();var OWe=FWe();GWe.exports=eMt;var QWe="\0SLASH"+Math.random()+"\0",UWe="\0OPEN"+Math.random()+"\0",Nge="\0CLOSE"+Math.random()+"\0",qWe="\0COMMA"+Math.random()+"\0",HWe="\0PERIOD"+Math.random()+"\0";function Dge(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Dge,"numeric");function XLt(t){return t.split("\\\\").join(QWe).split("\\{").join(UWe).split("\\}").join(Nge).split("\\,").join(qWe).split("\\.").join(HWe)}s(XLt,"escapeBraces");function ZLt(t){return t.split(QWe).join("\\").split(UWe).join("{").split(Nge).join("}").split(qWe).join(",").split(HWe).join(".")}s(ZLt,"unescapeBraces");function WWe(t){if(!t)return[""];var e=[],r=OWe("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=WWe(o);return o.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}s(WWe,"parseCommaParts");function eMt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),zM(XLt(t),!0).map(ZLt)):[]}s(eMt,"expandTop");function tMt(t){return"{"+t+"}"}s(tMt,"embrace");function rMt(t){return/^-?0\d/.test(t)}s(rMt,"isPadded");function nMt(t,e){return t<=e}s(nMt,"lte");function iMt(t,e){return t>=e}s(iMt,"gte");function zM(t,e){var r=[],n=OWe("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?zM(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var c=i+"{"+n.body+"}"+o[a];r.push(c)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=l||u,p=n.body.indexOf(",")>=0;if(!f&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Nge+n.post,zM(t)):[t];var m;if(f)m=n.body.split(/\.\./);else if(m=WWe(n.body),m.length===1&&(m=zM(m[0],!1).map(tMt),m.length===1))return o.map(function(Y){return n.pre+m[0]+Y});var h;if(f){var g=Dge(m[0]),y=Dge(m[1]),E=Math.max(m[0].length,m[1].length),x=m.length==3?Math.abs(Dge(m[2])):1,b=nMt,_=y<g;_&&(x*=-1,b=iMt);var k=m.some(rMt);h=[];for(var P=g;b(P,y);P+=x){var N;if(u)N=String.fromCharCode(P),N==="\\"&&(N="");else if(N=String(P),k){var M=E-N.length;if(M>0){var J=new Array(M+1).join("0");P<0?N="-"+J+N.slice(1):N=J+N}}h.push(N)}}else{h=[];for(var pe=0;pe<m.length;pe++)h.push.apply(h,zM(m[pe],!1))}for(var pe=0;pe<h.length;pe++)for(var a=0;a<o.length;a++){var c=i+h[pe]+o[a];(!e||f||c)&&r.push(c)}}return r}s(zM,"expand")});var fa=U((RYn,f$e)=>{d();f$e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var Mo=U((PYn,p$e)=>{"use strict";d();var Sa=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},mye=class extends Sa{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},hye=class extends Sa{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},gye=class extends Sa{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Aye=class extends Sa{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},yye=class extends Sa{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Cye=class extends Sa{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Eye=class extends Sa{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},mJ=class extends Sa{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},vye=class extends mJ{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},xye=class extends Sa{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},bye=class extends Sa{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Iye=class extends Sa{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Tye=class extends Sa{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},wye=class extends Sa{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},_ye=class extends Sa{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},Sye=class extends Sa{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Rye=class extends Sa{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},kye=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},Pye=class extends Sa{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Bye=class extends Sa{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Dye=class extends Sa{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},Nye=class extends Sa{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};p$e.exports={AbortError:mJ,HTTPParserError:kye,UndiciError:Sa,HeadersTimeoutError:hye,HeadersOverflowError:gye,BodyTimeoutError:Aye,RequestContentLengthMismatchError:bye,ConnectTimeoutError:mye,ResponseStatusCodeError:yye,InvalidArgumentError:Cye,InvalidReturnValueError:Eye,RequestAbortedError:vye,ClientDestroyedError:Tye,ClientClosedError:wye,InformationalError:xye,SocketError:_ye,NotSupportedError:Sye,ResponseContentLengthMismatchError:Iye,BalancedPoolMissingUpstreamError:Rye,ResponseExceededMaxSizeError:Pye,RequestRetryError:Bye,ResponseError:Dye,SecureProxyConnectionError:Nye}});var gJ=U((NYn,m$e)=>{"use strict";d();var hJ={},Lye=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Lye.length;++t){let e=Lye[t],r=e.toLowerCase();hJ[e]=hJ[r]=r}Object.setPrototypeOf(hJ,null);m$e.exports={wellknownHeaderNames:Lye,headerNameLowerCasedRecord:hJ}});var y$e=U((MYn,A$e)=>{"use strict";d();var{wellknownHeaderNames:h$e,headerNameLowerCasedRecord:pQt}=gJ(),Mye=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},AJ=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new Mye(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},g$e=new AJ;for(let t=0;t<h$e.length;++t){let e=pQt[h$e[t]];g$e.insert(e,e)}A$e.exports={TernarySearchTree:AJ,tree:g$e}});var Pi=U((QYn,N$e)=>{"use strict";d();var wF=require("node:assert"),{kDestroyed:E$e,kBodyUsed:J3,kListeners:Fye,kBody:C$e}=fa(),{IncomingMessage:mQt}=require("node:http"),EJ=require("node:stream"),hQt=require("node:net"),{Blob:gQt}=require("node:buffer"),AQt=require("node:util"),{stringify:yQt}=require("node:querystring"),{EventEmitter:CQt}=require("node:events"),{InvalidArgumentError:Nl}=Mo(),{headerNameLowerCasedRecord:EQt}=gJ(),{tree:v$e}=y$e(),[vQt,xQt]=process.versions.node.split(".").map(t=>Number(t)),CJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[C$e]=e,this[J3]=!1}async*[Symbol.asyncIterator](){wF(!this[J3],"disturbed"),this[J3]=!0,yield*this[C$e]}};function bQt(t){return vJ(t)?(w$e(t)===0&&t.on("data",function(){wF(!1)}),typeof t.readableDidRead!="boolean"&&(t[J3]=!1,CQt.prototype.on.call(t,"data",function(){this[J3]=!0})),t):t&&typeof t.pipeTo=="function"?new CJ(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&T$e(t)?new CJ(t):t}s(bQt,"wrapRequestBody");function IQt(){}s(IQt,"nop");function vJ(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(vJ,"isStream");function x$e(t){if(t===null)return!1;if(t instanceof gQt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(x$e,"isBlobLike");function TQt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=yQt(e);return r&&(t+="?"+r),t}s(TQt,"buildURL");function b$e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(b$e,"isValidPort");function yJ(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(yJ,"isHttpOrHttpsPrefixed");function I$e(t){if(typeof t=="string"){if(t=new URL(t),!yJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Nl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&b$e(t.port)===!1)throw new Nl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Nl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Nl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Nl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Nl("Invalid URL origin: the origin must be a string or null/undefined.");if(!yJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!yJ(t.origin||t.protocol))throw new Nl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(I$e,"parseURL");function wQt(t){if(t=I$e(t),t.pathname!=="/"||t.search||t.hash)throw new Nl("invalid url");return t}s(wQt,"parseOrigin");function _Qt(t){if(t[0]==="["){let r=t.indexOf("]");return wF(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(_Qt,"getHostname");function SQt(t){if(!t)return null;wF(typeof t=="string");let e=_Qt(t);return hQt.isIP(e)?"":e}s(SQt,"getServerName");function RQt(t){return JSON.parse(JSON.stringify(t))}s(RQt,"deepClone");function kQt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(kQt,"isAsyncIterable");function T$e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(T$e,"isIterable");function w$e(t){if(t==null)return 0;if(vJ(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(x$e(t))return t.size!=null?t.size:null;if(R$e(t))return t.byteLength}return null}s(w$e,"bodyLength");function _$e(t){return t&&!!(t.destroyed||t[E$e]||EJ.isDestroyed?.(t))}s(_$e,"isDestroyed");function PQt(t,e){t==null||!vJ(t)||_$e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===mQt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[E$e]=!0))}s(PQt,"destroy");var BQt=/timeout=(\d+)/;function DQt(t){let e=t.toString().match(BQt);return e?parseInt(e[1],10)*1e3:null}s(DQt,"parseKeepAliveTimeout");function S$e(t){return typeof t=="string"?EQt[t]??t.toLowerCase():v$e.lookup(t)??t.toString("latin1").toLowerCase()}s(S$e,"headerNameToString");function NQt(t){return v$e.lookup(t)??t.toString("latin1").toLowerCase()}s(NQt,"bufferToLowerCasedHeaderName");function LQt(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=S$e(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(LQt,"parseHeaders");function MQt(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,c=0;for(let l=0;l<t.length;l+=2)o=t[l],a=t[l+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),c=o.length,c===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:c===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=l+1),r[l]=o,r[l+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(MQt,"parseRawHeaders");function R$e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(R$e,"isBuffer");function FQt(t,e,r){if(!t||typeof t!="object")throw new Nl("handler must be an object");if(typeof t.onConnect!="function")throw new Nl("invalid onConnect method");if(typeof t.onError!="function")throw new Nl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Nl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Nl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Nl("invalid onHeaders method");if(typeof t.onData!="function")throw new Nl("invalid onData method");if(typeof t.onComplete!="function")throw new Nl("invalid onComplete method")}}s(FQt,"validateHandler");function OQt(t){return!!(t&&(EJ.isDisturbed(t)||t[J3]))}s(OQt,"isDisturbed");function QQt(t){return!!(t&&EJ.isErrored(t))}s(QQt,"isErrored");function UQt(t){return!!(t&&EJ.isReadable(t))}s(UQt,"isReadable");function qQt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(qQt,"getSocketInfo");function HQt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(HQt,"ReadableStreamFrom");function WQt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(WQt,"isFormDataLike");function GQt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(GQt,"addAbortListener");var jQt=typeof String.prototype.toWellFormed=="function",VQt=typeof String.prototype.isWellFormed=="function";function k$e(t){return jQt?`${t}`.toWellFormed():AQt.toUSVString(t)}s(k$e,"toUSVString");function $Qt(t){return VQt?`${t}`.isWellFormed():k$e(t)===`${t}`}s($Qt,"isUSVString");function P$e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(P$e,"isTokenCharCode");function zQt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!P$e(t.charCodeAt(e)))return!1;return!0}s(zQt,"isValidHTTPToken");var YQt=/[^\t\x20-\x7e\x80-\xff]/;function KQt(t){return!YQt.test(t)}s(KQt,"isValidHeaderValue");function JQt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(JQt,"parseRangeHeader");function XQt(t,e,r){return(t[Fye]??=[]).push([e,r]),t.on(e,r),t}s(XQt,"addListener");function ZQt(t){for(let[e,r]of t[Fye]??[])t.removeListener(e,r);t[Fye]=null}s(ZQt,"removeAllListeners");function eUt(t,e,r){try{e.onError(r),wF(e.aborted)}catch(n){t.emit("error",n)}}s(eUt,"errorRequest");var B$e=Object.create(null);B$e.enumerable=!0;var Oye={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},D$e={...Oye,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Oye,null);Object.setPrototypeOf(D$e,null);N$e.exports={kEnumerableProperty:B$e,nop:IQt,isDisturbed:OQt,isErrored:QQt,isReadable:UQt,toUSVString:k$e,isUSVString:$Qt,isBlobLike:x$e,parseOrigin:wQt,parseURL:I$e,getServerName:SQt,isStream:vJ,isIterable:T$e,isAsyncIterable:kQt,isDestroyed:_$e,headerNameToString:S$e,bufferToLowerCasedHeaderName:NQt,addListener:XQt,removeAllListeners:ZQt,errorRequest:eUt,parseRawHeaders:MQt,parseHeaders:LQt,parseKeepAliveTimeout:DQt,destroy:PQt,bodyLength:w$e,deepClone:RQt,ReadableStreamFrom:HQt,isBuffer:R$e,validateHandler:FQt,getSocketInfo:qQt,isFormDataLike:WQt,buildURL:TQt,addAbortListener:GQt,isValidHTTPToken:zQt,isValidHeaderValue:KQt,isTokenCharCode:P$e,parseRangeHeader:JQt,normalizedMethodRecordsBase:Oye,normalizedMethodRecords:D$e,isValidPort:b$e,isHttpOrHttpsPrefixed:yJ,nodeMajor:vQt,nodeMinor:xQt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:bQt}});var X3=U((HYn,M$e)=>{"use strict";d();var Uo=require("node:diagnostics_channel"),Uye=require("node:util"),xJ=Uye.debuglog("undici"),Qye=Uye.debuglog("fetch"),M2=Uye.debuglog("websocket"),L$e=!1,tUt={beforeConnect:Uo.channel("undici:client:beforeConnect"),connected:Uo.channel("undici:client:connected"),connectError:Uo.channel("undici:client:connectError"),sendHeaders:Uo.channel("undici:client:sendHeaders"),create:Uo.channel("undici:request:create"),bodySent:Uo.channel("undici:request:bodySent"),headers:Uo.channel("undici:request:headers"),trailers:Uo.channel("undici:request:trailers"),error:Uo.channel("undici:request:error"),open:Uo.channel("undici:websocket:open"),close:Uo.channel("undici:websocket:close"),socketError:Uo.channel("undici:websocket:socket_error"),ping:Uo.channel("undici:websocket:ping"),pong:Uo.channel("undici:websocket:pong")};if(xJ.enabled||Qye.enabled){let t=Qye.enabled?Qye:xJ;Uo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Uo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Uo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Uo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Uo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Uo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Uo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),L$e=!0}if(M2.enabled){if(!L$e){let t=xJ.enabled?xJ:M2;Uo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Uo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Uo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Uo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Uo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;M2("connection opened %s%s",e,r?`:${r}`:"")}),Uo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;M2("closed connection to %s - %s %s",e.url,r,n)}),Uo.channel("undici:websocket:socket_error").subscribe(t=>{M2("connection errored - %s",t.message)}),Uo.channel("undici:websocket:ping").subscribe(t=>{M2("ping received")}),Uo.channel("undici:websocket:pong").subscribe(t=>{M2("pong received")})}M$e.exports={channels:tUt}});var q$e=U((GYn,U$e)=>{"use strict";d();var{InvalidArgumentError:Ra,NotSupportedError:rUt}=Mo(),RE=require("node:assert"),{isValidHTTPToken:Q$e,isValidHeaderValue:F$e,isStream:nUt,destroy:iUt,isBuffer:oUt,isFormDataLike:sUt,isIterable:aUt,isBlobLike:cUt,buildURL:lUt,validateHandler:uUt,getServerName:dUt,normalizedMethodRecords:fUt}=Pi(),{channels:Gy}=X3(),{headerNameLowerCasedRecord:O$e}=gJ(),pUt=/[^\u0021-\u00ff]/,Om=Symbol("handler"),qye=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:c,blocking:l,upgrade:u,headersTimeout:f,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},E){if(typeof r!="string")throw new Ra("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new Ra("path must be an absolute URL or start with a slash");if(pUt.test(r))throw new Ra("invalid request path");if(typeof n!="string")throw new Ra("method must be a string");if(fUt[n]===void 0&&!Q$e(n))throw new Ra("invalid request method");if(u&&typeof u!="string")throw new Ra("upgrade must be a string");if(f!=null&&(!Number.isFinite(f)||f<0))throw new Ra("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new Ra("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new Ra("invalid reset");if(g!=null&&typeof g!="boolean")throw new Ra("invalid expectContinue");if(this.headersTimeout=f,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(nUt(i)){this.body=i;let x=this.body._readableState;(!x||!x.autoDestroy)&&(this.endHandler=s(function(){iUt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=b=>{this.abort?this.abort(b):this.error=b},this.body.on("error",this.errorHandler)}else if(oUt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(sUt(i)||aUt(i)||cUt(i))this.body=i;else throw new Ra("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?lUt(r,a):r,this.origin=e,this.idempotent=c??(n==="HEAD"||n==="GET"),this.blocking=l??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new Ra("headers array must be even");for(let x=0;x<o.length;x+=2)bJ(this,o[x],o[x+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let x of o){if(!Array.isArray(x)||x.length!==2)throw new Ra("headers must be in key-value pair format");bJ(this,x[0],x[1])}else{let x=Object.keys(o);for(let b=0;b<x.length;++b)bJ(this,x[b],o[x[b]])}else if(o!=null)throw new Ra("headers must be an object or an array");uUt(E,n,u),this.servername=y||dUt(this.host),this[Om]=E,Gy.create.hasSubscribers&&Gy.create.publish({request:this})}onBodySent(e){if(this[Om].onBodySent)try{return this[Om].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(Gy.bodySent.hasSubscribers&&Gy.bodySent.publish({request:this}),this[Om].onRequestSent)try{return this[Om].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(RE(!this.aborted),RE(!this.completed),this.error)e(this.error);else return this.abort=e,this[Om].onConnect(e)}onResponseStarted(){return this[Om].onResponseStarted?.()}onHeaders(e,r,n,i){RE(!this.aborted),RE(!this.completed),Gy.headers.hasSubscribers&&Gy.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[Om].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){RE(!this.aborted),RE(!this.completed);try{return this[Om].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return RE(!this.aborted),RE(!this.completed),this[Om].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),RE(!this.aborted),this.completed=!0,Gy.trailers.hasSubscribers&&Gy.trailers.publish({request:this,trailers:e});try{return this[Om].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),Gy.error.hasSubscribers&&Gy.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[Om].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return bJ(this,e,r),this}};function bJ(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new Ra(`invalid ${e} header`);if(r===void 0)return;let n=O$e[e];if(n===void 0&&(n=e.toLowerCase(),O$e[n]===void 0&&!Q$e(n)))throw new Ra("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!F$e(r[o]))throw new Ra(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new Ra(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!F$e(r))throw new Ra(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new Ra("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new Ra("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new Ra(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new Ra("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new rUt("expect header not supported");t.headers.push(e,r)}}}s(bJ,"processHeader");U$e.exports=qye});var _F=U(($Yn,H$e)=>{"use strict";d();var mUt=require("node:events"),IJ=class extends mUt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new Hye(this,n)}},Hye=class extends IJ{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};H$e.exports=IJ});var rB=U((KYn,W$e)=>{"use strict";d();var hUt=_F(),{ClientDestroyedError:Wye,ClientClosedError:gUt,InvalidArgumentError:Z3}=Mo(),{kDestroy:AUt,kClose:yUt,kClosed:SF,kDestroyed:eB,kDispatch:Gye,kInterceptors:F2}=fa(),kE=Symbol("onDestroyed"),tB=Symbol("onClosed"),TJ=Symbol("Intercepted Dispatch"),jye=class extends hUt{static{s(this,"DispatcherBase")}constructor(){super(),this[eB]=!1,this[kE]=null,this[SF]=!1,this[tB]=[]}get destroyed(){return this[eB]}get closed(){return this[SF]}get interceptors(){return this[F2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[F2][r]!="function")throw new Z3("interceptor must be an function")}this[F2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new Z3("invalid callback");if(this[eB]){queueMicrotask(()=>e(new Wye,null));return}if(this[SF]){this[tB]?this[tB].push(e):queueMicrotask(()=>e(null,null));return}this[SF]=!0,this[tB].push(e);let r=s(()=>{let n=this[tB];this[tB]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[yUt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,c)=>a?o(a):i(c))});if(typeof r!="function")throw new Z3("invalid callback");if(this[eB]){this[kE]?this[kE].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new Wye),this[eB]=!0,this[kE]=this[kE]||[],this[kE].push(r);let n=s(()=>{let i=this[kE];this[kE]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[AUt](e).then(()=>{queueMicrotask(n)})}[TJ](e,r){if(!this[F2]||this[F2].length===0)return this[TJ]=this[Gye],this[Gye](e,r);let n=this[Gye].bind(this);for(let i=this[F2].length-1;i>=0;i--)n=this[F2][i](n);return this[TJ]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new Z3("handler must be an object");try{if(!e||typeof e!="object")throw new Z3("opts must be an object.");if(this[eB]||this[kE])throw new Wye;if(this[SF])throw new gUt;return this[TJ](e,r)}catch(n){if(typeof r.onError!="function")throw new Z3("invalid onError method");return r.onError(n),!1}}};W$e.exports=jye});var Xye=U((ZYn,$$e)=>{"use strict";d();var nB=0,Vye=1e3,$ye=(Vye>>1)-1,PE,zye=Symbol("kFastTimer"),BE=[],Yye=-2,Kye=-1,j$e=0,G$e=1;function Jye(){nB+=$ye;let t=0,e=BE.length;for(;t<e;){let r=BE[t];r._state===j$e?(r._idleStart=nB-$ye,r._state=G$e):r._state===G$e&&nB>=r._idleStart+r._idleTimeout&&(r._state=Kye,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===Kye?(r._state=Yye,--e!==0&&(BE[t]=BE[e])):++t}BE.length=e,BE.length!==0&&V$e()}s(Jye,"onTick");function V$e(){PE?PE.refresh():(clearTimeout(PE),PE=setTimeout(Jye,$ye),PE.unref&&PE.unref())}s(V$e,"refreshTimeout");var wJ=class{static{s(this,"FastTimer")}[zye]=!0;_state=Yye;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===Yye&&BE.push(this),(!PE||BE.length===1)&&V$e(),this._state=j$e}clear(){this._state=Kye,this._idleStart=-1}};$$e.exports={setTimeout(t,e,r){return e<=Vye?setTimeout(t,e,r):new wJ(t,e,r)},clearTimeout(t){t[zye]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new wJ(t,e,r)},clearFastTimeout(t){t.clear()},now(){return nB},tick(t=0){nB+=t-Vye+1,Jye(),Jye()},reset(){nB=0,BE.length=0,clearTimeout(PE),PE=null},kFastTimer:zye}});var RF=U((iKn,X$e)=>{"use strict";d();var CUt=require("node:net"),z$e=require("node:assert"),J$e=Pi(),{InvalidArgumentError:EUt,ConnectTimeoutError:vUt}=Mo(),_J=Xye();function Y$e(){}s(Y$e,"noop");var Zye,eCe;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?eCe=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:eCe=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function xUt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new EUt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},c=new eCe(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:f,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},E){let x;if(p==="https:"){Zye||(Zye=require("node:tls")),h=h||a.servername||J$e.getServerName(f)||null;let _=h||u;z$e(_);let k=i||c.get(_)||null;m=m||443,x=Zye.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),x.on("session",function(P){c.set(_,P)})}else z$e(!y,"httpSocket can only be sent on TLS update"),m=m||80,x=CUt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;x.setKeepAlive(!0,_)}let b=bUt(new WeakRef(x),{timeout:n,hostname:u,port:m});return x.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(b),E){let _=E;E=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(b),E){let k=E;E=null,k(_)}}),x},"connect")}s(xUt,"buildConnector");var bUt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Y$e;let r=null,n=null,i=_J.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>K$e(t.deref(),e))})},e.timeout);return()=>{_J.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return Y$e;let r=null,n=_J.setFastTimeout(()=>{r=setImmediate(()=>{K$e(t.deref(),e)})},e.timeout);return()=>{_J.clearFastTimeout(n),clearImmediate(r)}};function K$e(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,J$e.destroy(t,new vUt(r))}s(K$e,"onConnectTimeout");X$e.exports=xUt});var Z$e=U(SJ=>{"use strict";d();Object.defineProperty(SJ,"__esModule",{value:!0});SJ.enumToMap=void 0;function IUt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(IUt,"enumToMap");SJ.enumToMap=IUt});var eze=U(Wt=>{"use strict";d();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.SPECIAL_HEADERS=Wt.HEADER_STATE=Wt.MINOR=Wt.MAJOR=Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS=Wt.TOKEN=Wt.STRICT_TOKEN=Wt.HEX=Wt.URL_CHAR=Wt.STRICT_URL_CHAR=Wt.USERINFO_CHARS=Wt.MARK=Wt.ALPHANUM=Wt.NUM=Wt.HEX_MAP=Wt.NUM_MAP=Wt.ALPHA=Wt.FINISH=Wt.H_METHOD_MAP=Wt.METHOD_MAP=Wt.METHODS_RTSP=Wt.METHODS_ICE=Wt.METHODS_HTTP=Wt.METHODS=Wt.LENIENT_FLAGS=Wt.FLAGS=Wt.TYPE=Wt.ERROR=void 0;var TUt=Z$e(),wUt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(wUt=Wt.ERROR||(Wt.ERROR={}));var _Ut;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(_Ut=Wt.TYPE||(Wt.TYPE={}));var SUt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(SUt=Wt.FLAGS||(Wt.FLAGS={}));var RUt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(RUt=Wt.LENIENT_FLAGS||(Wt.LENIENT_FLAGS={}));var hn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(hn=Wt.METHODS||(Wt.METHODS={}));Wt.METHODS_HTTP=[hn.DELETE,hn.GET,hn.HEAD,hn.POST,hn.PUT,hn.CONNECT,hn.OPTIONS,hn.TRACE,hn.COPY,hn.LOCK,hn.MKCOL,hn.MOVE,hn.PROPFIND,hn.PROPPATCH,hn.SEARCH,hn.UNLOCK,hn.BIND,hn.REBIND,hn.UNBIND,hn.ACL,hn.REPORT,hn.MKACTIVITY,hn.CHECKOUT,hn.MERGE,hn["M-SEARCH"],hn.NOTIFY,hn.SUBSCRIBE,hn.UNSUBSCRIBE,hn.PATCH,hn.PURGE,hn.MKCALENDAR,hn.LINK,hn.UNLINK,hn.PRI,hn.SOURCE];Wt.METHODS_ICE=[hn.SOURCE];Wt.METHODS_RTSP=[hn.OPTIONS,hn.DESCRIBE,hn.ANNOUNCE,hn.SETUP,hn.PLAY,hn.PAUSE,hn.TEARDOWN,hn.GET_PARAMETER,hn.SET_PARAMETER,hn.REDIRECT,hn.RECORD,hn.FLUSH,hn.GET,hn.POST];Wt.METHOD_MAP=TUt.enumToMap(hn);Wt.H_METHOD_MAP={};Object.keys(Wt.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Wt.H_METHOD_MAP[t]=Wt.METHOD_MAP[t])});var kUt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(kUt=Wt.FINISH||(Wt.FINISH={}));Wt.ALPHA=[];for(let t=65;t<=90;t++)Wt.ALPHA.push(String.fromCharCode(t)),Wt.ALPHA.push(String.fromCharCode(t+32));Wt.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Wt.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Wt.NUM=["0","1","2","3","4","5","6","7","8","9"];Wt.ALPHANUM=Wt.ALPHA.concat(Wt.NUM);Wt.MARK=["-","_",".","!","~","*","'","(",")"];Wt.USERINFO_CHARS=Wt.ALPHANUM.concat(Wt.MARK).concat(["%",";",":","&","=","+","$",","]);Wt.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Wt.ALPHANUM);Wt.URL_CHAR=Wt.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Wt.URL_CHAR.push(t);Wt.HEX=Wt.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Wt.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Wt.ALPHANUM);Wt.TOKEN=Wt.STRICT_TOKEN.concat([" "]);Wt.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Wt.HEADER_CHARS.push(t);Wt.CONNECTION_TOKEN_CHARS=Wt.HEADER_CHARS.filter(t=>t!==44);Wt.MAJOR=Wt.NUM_MAP;Wt.MINOR=Wt.MAJOR;var iB;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(iB=Wt.HEADER_STATE||(Wt.HEADER_STATE={}));Wt.SPECIAL_HEADERS={connection:iB.CONNECTION,"content-length":iB.CONTENT_LENGTH,"proxy-connection":iB.CONNECTION,"transfer-encoding":iB.TRANSFER_ENCODING,upgrade:iB.UPGRADE}});var tCe=U((fKn,tze)=>{"use strict";d();var{Buffer:PUt}=require("node:buffer");tze.exports=PUt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var nze=U((mKn,rze)=>{"use strict";d();var{Buffer:BUt}=require("node:buffer");rze.exports=BUt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var kF=U((gKn,dze)=>{"use strict";d();var ize=["GET","HEAD","POST"],DUt=new Set(ize),NUt=[101,204,205,304],oze=[301,302,303,307,308],LUt=new Set(oze),sze=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],MUt=new Set(sze),aze=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],FUt=new Set(aze),OUt=["follow","manual","error"],cze=["GET","HEAD","OPTIONS","TRACE"],QUt=new Set(cze),UUt=["navigate","same-origin","no-cors","cors"],qUt=["omit","same-origin","include"],HUt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],WUt=["content-encoding","content-language","content-location","content-type","content-length"],GUt=["half"],lze=["CONNECT","TRACE","TRACK"],jUt=new Set(lze),uze=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],VUt=new Set(uze);dze.exports={subresource:uze,forbiddenMethods:lze,requestBodyHeader:WUt,referrerPolicy:aze,requestRedirect:OUt,requestMode:UUt,requestCredentials:qUt,requestCache:HUt,redirectStatus:oze,corsSafeListedMethods:ize,nullBodyStatus:NUt,safeMethods:cze,badPorts:sze,requestDuplex:GUt,subresourceSet:VUt,badPortsSet:MUt,redirectStatusSet:LUt,corsSafeListedMethodsSet:DUt,safeMethodsSet:QUt,forbiddenMethodsSet:jUt,referrerPolicySet:FUt}});var nCe=U((yKn,fze)=>{"use strict";d();var rCe=Symbol.for("undici.globalOrigin.1");function $Ut(){return globalThis[rCe]}s($Ut,"getGlobalOrigin");function zUt(t){if(t===void 0){Object.defineProperty(globalThis,rCe,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,rCe,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(zUt,"setGlobalOrigin");fze.exports={getGlobalOrigin:$Ut,setGlobalOrigin:zUt}});var Uf=U((vKn,Cze)=>{"use strict";d();var kJ=require("node:assert"),YUt=new TextEncoder,PF=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,KUt=/[\u000A\u000D\u0009\u0020]/,JUt=/[\u0009\u000A\u000C\u000D\u0020]/g,XUt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function ZUt(t){kJ(t.protocol==="data:");let e=hze(t,!0);e=e.slice(5);let r={position:0},n=oB(",",e,r),i=n.length;if(n=oqt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=gze(o);if(/;(\u0020){0,}base64$/i.test(n)){let l=yze(a);if(a=tqt(l),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let c=iCe(n);return c==="failure"&&(c=iCe("text/plain;charset=US-ASCII")),{mimeType:c,body:a}}s(ZUt,"dataURLProcessor");function hze(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(hze,"URLSerializer");function PJ(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(PJ,"collectASequenceOfCodePoints");function oB(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(oB,"collectASequenceOfCodePointsFast");function gze(t){let e=YUt.encode(t);return eqt(e)}s(gze,"stringPercentDecode");function pze(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(pze,"isHexCharByte");function mze(t){return t>=48&&t<=57?t-48:(t&223)-55}s(mze,"hexByteToNumber");function eqt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(pze(t[i+1])&&pze(t[i+2]))?r[n++]=37:(r[n++]=mze(t[i+1])<<4|mze(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(eqt,"percentDecode");function iCe(t){t=RJ(t,!0,!0);let e={position:0},r=oB("/",t,e);if(r.length===0||!PF.test(r)||e.position>t.length)return"failure";e.position++;let n=oB(";",t,e);if(n=RJ(n,!1,!0),n.length===0||!PF.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,PJ(u=>KUt.test(u),t,e);let c=PJ(u=>u!==";"&&u!=="=",t,e);if(c=c.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let l=null;if(t[e.position]==='"')l=Aze(t,e,!0),oB(";",t,e);else if(l=oB(";",t,e),l=RJ(l,!1,!0),l.length===0)continue;c.length!==0&&PF.test(c)&&(l.length===0||XUt.test(l))&&!a.parameters.has(c)&&a.parameters.set(c,l)}return a}s(iCe,"parseMIMEType");function tqt(t){t=t.replace(JUt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(tqt,"forgivingBase64");function Aze(t,e,r){let n=e.position,i="";for(kJ(t[e.position]==='"'),e.position++;i+=PJ(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{kJ(o==='"');break}}return r?i:t.slice(n,e.position)}s(Aze,"collectAnHTTPQuotedString");function rqt(t){kJ(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",PF.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(rqt,"serializeAMimeType");function nqt(t){return t===13||t===10||t===9||t===32}s(nqt,"isHTTPWhiteSpace");function RJ(t,e=!0,r=!0){return oCe(t,e,r,nqt)}s(RJ,"removeHTTPWhitespace");function iqt(t){return t===13||t===10||t===9||t===12||t===32}s(iqt,"isASCIIWhitespace");function oqt(t,e=!0,r=!0){return oCe(t,e,r,iqt)}s(oqt,"removeASCIIWhitespace");function oCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(oCe,"removeChars");function yze(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(yze,"isomorphicDecode");function sqt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(sqt,"minimizeSupportedMimeType");Cze.exports={dataURLProcessor:ZUt,URLSerializer:hze,collectASequenceOfCodePoints:PJ,collectASequenceOfCodePointsFast:oB,stringPercentDecode:gze,parseMIMEType:iCe,collectAnHTTPQuotedString:Aze,serializeAMimeType:rqt,removeChars:oCe,removeHTTPWhitespace:RJ,minimizeSupportedMimeType:sqt,HTTP_TOKEN_CODEPOINTS:PF,isomorphicDecode:yze}});var Au=U((IKn,Eze)=>{"use strict";d();var{types:jy,inspect:aqt}=require("node:util"),{markAsUncloneable:cqt}=require("node:worker_threads"),{toUSVString:lqt}=Pi(),Lt={};Lt.converters={};Lt.util={};Lt.errors={};Lt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Lt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Lt.errors.exception({header:t.prefix,message:r})};Lt.errors.invalidArgument=function(t){return Lt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Lt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Lt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Lt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Lt.illegalConstructor=function(){throw Lt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Lt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Lt.util.markAsUncloneable=cqt||(()=>{});Lt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Lt.errors.exception({header:"Integer conversion",message:`Could not convert ${Lt.util.Stringify(t)} to an integer.`});if(a=Lt.util.IntegerPart(a),a<o||a>i)throw Lt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Lt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Lt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Lt.util.Stringify=function(t){switch(Lt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return aqt(t);case"String":return`"${t}"`;default:return`${t}`}};Lt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Lt.util.Type(e)!=="Object")throw Lt.errors.exception({header:r,message:`${n} (${Lt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],c=0;if(o===void 0||typeof o.next!="function")throw Lt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:l,value:u}=o.next();if(l)break;a.push(t(u,r,`${n}[${c++}]`))}return a}};Lt.recordConverter=function(t,e){return(r,n,i)=>{if(Lt.util.Type(r)!=="Object")throw Lt.errors.exception({header:n,message:`${i} ("${Lt.util.Type(r)}") is not an Object.`});let o={};if(!jy.isProxy(r)){let c=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of c){let u=t(l,n,i),f=e(r[l],n,i);o[u]=f}return o}let a=Reflect.ownKeys(r);for(let c of a)if(Reflect.getOwnPropertyDescriptor(r,c)?.enumerable){let u=t(c,n,i),f=e(r[c],n,i);o[u]=f}return o}};Lt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Lt.errors.exception({header:r,message:`Expected ${n} ("${Lt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Lt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Lt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Lt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:c,defaultValue:l,required:u,converter:f}=a;if(u===!0&&!Object.hasOwn(e,c))throw Lt.errors.exception({header:r,message:`Missing required key "${c}".`});let p=e[c],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=l()),u||m||p!==void 0){if(p=f(p,r,`${n}.${c}`),a.allowedValues&&!a.allowedValues.includes(p))throw Lt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[c]=p}}return o}};Lt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Lt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Lt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Lt.converters.ByteString=function(t,e,r){let n=Lt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Lt.converters.USVString=lqt;Lt.converters.boolean=function(t){return!!t};Lt.converters.any=function(t){return t};Lt.converters["long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Lt.converters["unsigned long long"]=function(t,e,r){return Lt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Lt.converters["unsigned long"]=function(t,e,r){return Lt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Lt.converters["unsigned short"]=function(t,e,r,n){return Lt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Lt.converters.ArrayBuffer=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!jy.isAnyArrayBuffer(t))throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&jy.isSharedArrayBuffer(t))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.TypedArray=function(t,e,r,n,i){if(Lt.util.Type(t)!=="Object"||!jy.isTypedArray(t)||t.constructor.name!==e.name)throw Lt.errors.conversionFailed({prefix:r,argument:`${n} ("${Lt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&jy.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.DataView=function(t,e,r,n){if(Lt.util.Type(t)!=="Object"||!jy.isDataView(t))throw Lt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&jy.isSharedArrayBuffer(t.buffer))throw Lt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Lt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Lt.converters.BufferSource=function(t,e,r,n){if(jy.isAnyArrayBuffer(t))return Lt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(jy.isTypedArray(t))return Lt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(jy.isDataView(t))return Lt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Lt.errors.conversionFailed({prefix:e,argument:`${r} ("${Lt.util.Stringify(t)}")`,types:["BufferSource"]})};Lt.converters["sequence<ByteString>"]=Lt.sequenceConverter(Lt.converters.ByteString);Lt.converters["sequence<sequence<ByteString>>"]=Lt.sequenceConverter(Lt.converters["sequence<ByteString>"]);Lt.converters["record<ByteString, ByteString>"]=Lt.recordConverter(Lt.converters.ByteString,Lt.converters.ByteString);Eze.exports={webidl:Lt}});var X0=U((wKn,Nze)=>{"use strict";d();var{Transform:uqt}=require("node:stream"),vze=require("node:zlib"),{redirectStatusSet:dqt,referrerPolicySet:fqt,badPortsSet:pqt}=kF(),{getGlobalOrigin:xze}=nCe(),{collectASequenceOfCodePoints:O2,collectAnHTTPQuotedString:mqt,removeChars:hqt,parseMIMEType:gqt}=Uf(),{performance:Aqt}=require("node:perf_hooks"),{isBlobLike:yqt,ReadableStreamFrom:Cqt,isValidHTTPToken:bze,normalizedMethodRecordsBase:Eqt}=Pi(),Q2=require("node:assert"),{isUint8Array:vqt}=require("node:util/types"),{webidl:BF}=Au(),Ize=[],DJ;try{DJ=require("node:crypto");let t=["sha256","sha384","sha512"];Ize=DJ.getHashes().filter(e=>t.includes(e))}catch{}function Tze(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(Tze,"responseURL");function xqt(t,e){if(!dqt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&_ze(r)&&(wze(r)||(r=bqt(r)),r=new URL(r,Tze(t))),r&&!r.hash&&(r.hash=e),r}s(xqt,"responseLocationURL");function wze(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(wze,"isValidEncodedURL");function bqt(t){return Buffer.from(t,"binary").toString("utf8")}s(bqt,"normalizeBinaryStringToUtf8");function NF(t){return t.urlList[t.urlList.length-1]}s(NF,"requestCurrentURL");function Iqt(t){let e=NF(t);return Bze(e)&&pqt.has(e.port)?"blocked":"allowed"}s(Iqt,"requestBadPort");function Tqt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(Tqt,"isErrorLike");function wqt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(wqt,"isValidReasonPhrase");var _qt=bze;function _ze(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(_ze,"isValidHeaderValue");function Sqt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(fqt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(Sqt,"setRequestReferrerPolicyOnRedirect");function Rqt(){return"allowed"}s(Rqt,"crossOriginResourcePolicyCheck");function kqt(){return"success"}s(kqt,"corsCheck");function Pqt(){return"success"}s(Pqt,"TAOCheck");function Bqt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(Bqt,"appendFetchMetadata");function Dqt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&aCe(t.origin)&&!aCe(NF(t))&&(e=null);break;case"same-origin":NJ(t,NF(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(Dqt,"appendRequestOriginHeader");function sB(t,e){return t}s(sB,"coarsenTime");function Nqt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:sB(t.domainLookupStartTime,r),domainLookupEndTime:sB(t.domainLookupEndTime,r),connectionStartTime:sB(t.connectionStartTime,r),connectionEndTime:sB(t.connectionEndTime,r),secureConnectionStartTime:sB(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(Nqt,"clampAndCoarsenConnectionTimingInfo");function Lqt(t){return sB(Aqt.now(),t)}s(Lqt,"coarsenedSharedCurrentTime");function Mqt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(Mqt,"createOpaqueTimingInfo");function Sze(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(Sze,"makePolicyContainer");function Fqt(t){return{referrerPolicy:t.referrerPolicy}}s(Fqt,"clonePolicyContainer");function Oqt(t){let e=t.referrerPolicy;Q2(e);let r=null;if(t.referrer==="client"){let c=xze();if(!c||c.origin==="null")return"no-referrer";r=new URL(c)}else t.referrer instanceof URL&&(r=t.referrer);let n=sCe(r),i=sCe(r,!0);n.toString().length>4096&&(n=i);let o=NJ(t,n),a=DF(n)&&!DF(t.url);switch(e){case"origin":return i??sCe(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let c=NF(t);return NJ(n,c)?n:DF(n)&&!DF(c)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(Oqt,"determineRequestsReferrer");function sCe(t,e){return Q2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(sCe,"stripURLForReferrer");function DF(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(DF,"isURLPotentiallyTrustworthy");function Qqt(t,e){if(DJ===void 0)return!0;let r=Rze(e);if(r==="no metadata"||r.length===0)return!0;let n=qqt(r),i=Hqt(r,n);for(let o of i){let a=o.algo,c=o.hash,l=DJ.createHash(a).update(t).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),Wqt(l,c))return!0}return!1}s(Qqt,"bytesMatch");var Uqt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function Rze(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=Uqt.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();Ize.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(Rze,"parseMetadata");function qqt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(qqt,"getStrongestMetadata");function Hqt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(Hqt,"filterMetadataListByAlgorithm");function Wqt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(Wqt,"compareBase64Mixed");function Gqt(t){}s(Gqt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function NJ(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(NJ,"sameOrigin");function jqt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(jqt,"createDeferredPromise");function Vqt(t){return t.controller.state==="aborted"}s(Vqt,"isAborted");function $qt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s($qt,"isCancelled");function zqt(t){return Eqt[t.toLowerCase()]??t}s(zqt,"normalizeMethod");function Yqt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return Q2(typeof e=="string"),e}s(Yqt,"serializeJavascriptValueToJSONString");var Kqt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function kze(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,c){this.#e=a,this.#t=c,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,c=this.#e[e],l=c.length;if(a>=l)return{value:void 0,done:!0};let{[r]:u,[n]:f}=c[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=f;break;case"key+value":p=[u,f];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,Kqt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(kze,"createIterator");function Jqt(t,e,r,n=0,i=1){let o=kze(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BF.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BF.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BF.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(l,u=globalThis){if(BF.brandCheck(this,e),BF.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:f,1:p}of o(this,"key+value"))l.call(u,p,f,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(Jqt,"iteratorMixin");async function Xqt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await Pze(o))}catch(a){i(a)}}s(Xqt,"fullyReadBody");function Zqt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(Zqt,"isReadableStreamLike");function eHt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(eHt,"readableStreamClose");var tHt=/[^\x00-\xFF]/;function BJ(t){return Q2(!tHt.test(t)),t}s(BJ,"isomorphicEncode");async function Pze(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!vqt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(Pze,"readAllBytes");function rHt(t){Q2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(rHt,"urlIsLocal");function aCe(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(aCe,"urlHasHttpsScheme");function Bze(t){Q2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(Bze,"urlIsHttpHttpsScheme");function nHt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&O2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&O2(l=>l==="	"||l===" ",r,n);let i=O2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&O2(l=>l==="	"||l===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&O2(l=>l==="	"||l===" ",r,n);let a=O2(l=>{let u=l.charCodeAt(0);return u>=48&&u<=57},r,n),c=a.length?Number(a):null;return n.position<r.length||c===null&&o===null||o>c?"failure":{rangeStartValue:o,rangeEndValue:c}}s(nHt,"simpleRangeHeaderValue");function iHt(t,e,r){let n="bytes ";return n+=BJ(`${t}`),n+="-",n+=BJ(`${e}`),n+="/",n+=BJ(`${r}`),n}s(iHt,"buildContentRange");var cCe=class extends uqt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?vze.createInflate(this.#e):vze.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function oHt(t){return new cCe(t)}s(oHt,"createInflate");function sHt(t){let e=null,r=null,n=null,i=Dze("content-type",t);if(i===null)return"failure";for(let o of i){let a=gqt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(sHt,"extractMimeType");function aHt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=O2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=mqt(e,r),r.position<e.length)continue}else Q2(e.charCodeAt(r.position)===44),r.position++;i=hqt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(aHt,"gettingDecodingSplitting");function Dze(t,e){let r=e.get(t,!0);return r===null?null:aHt(r)}s(Dze,"getDecodeSplit");var cHt=new TextDecoder;function lHt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),cHt.decode(t))}s(lHt,"utf8DecodeBytes");var lCe=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return xze()}get origin(){return this.baseUrl?.origin}policyContainer=Sze()},uCe=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new lCe},uHt=new uCe;Nze.exports={isAborted:Vqt,isCancelled:$qt,isValidEncodedURL:wze,createDeferredPromise:jqt,ReadableStreamFrom:Cqt,tryUpgradeRequestToAPotentiallyTrustworthyURL:Gqt,clampAndCoarsenConnectionTimingInfo:Nqt,coarsenedSharedCurrentTime:Lqt,determineRequestsReferrer:Oqt,makePolicyContainer:Sze,clonePolicyContainer:Fqt,appendFetchMetadata:Bqt,appendRequestOriginHeader:Dqt,TAOCheck:Pqt,corsCheck:kqt,crossOriginResourcePolicyCheck:Rqt,createOpaqueTimingInfo:Mqt,setRequestReferrerPolicyOnRedirect:Sqt,isValidHTTPToken:bze,requestBadPort:Iqt,requestCurrentURL:NF,responseURL:Tze,responseLocationURL:xqt,isBlobLike:yqt,isURLPotentiallyTrustworthy:DF,isValidReasonPhrase:wqt,sameOrigin:NJ,normalizeMethod:zqt,serializeJavascriptValueToJSONString:Yqt,iteratorMixin:Jqt,createIterator:kze,isValidHeaderName:_qt,isValidHeaderValue:_ze,isErrorLike:Tqt,fullyReadBody:Xqt,bytesMatch:Qqt,isReadableStreamLike:Zqt,readableStreamClose:eHt,isomorphicEncode:BJ,urlIsLocal:rHt,urlHasHttpsScheme:aCe,urlIsHttpHttpsScheme:Bze,readAllBytes:Pze,simpleRangeHeaderValue:nHt,buildContentRange:iHt,parseMetadata:Rze,createInflate:oHt,extractMimeType:sHt,getDecodeSplit:Dze,utf8DecodeBytes:lHt,environmentSettingsObject:uHt}});var QI=U((RKn,Lze)=>{"use strict";d();Lze.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var fCe=U((PKn,Mze)=>{"use strict";d();var{Blob:dHt,File:fHt}=require("node:buffer"),{kState:DE}=QI(),{webidl:Vy}=Au(),dCe=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[DE]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Vy.brandCheck(this,t),this[DE].blobLike.stream(...e)}arrayBuffer(...e){return Vy.brandCheck(this,t),this[DE].blobLike.arrayBuffer(...e)}slice(...e){return Vy.brandCheck(this,t),this[DE].blobLike.slice(...e)}text(...e){return Vy.brandCheck(this,t),this[DE].blobLike.text(...e)}get size(){return Vy.brandCheck(this,t),this[DE].blobLike.size}get type(){return Vy.brandCheck(this,t),this[DE].blobLike.type}get name(){return Vy.brandCheck(this,t),this[DE].name}get lastModified(){return Vy.brandCheck(this,t),this[DE].lastModified}get[Symbol.toStringTag](){return"File"}};Vy.converters.Blob=Vy.interfaceConverter(dHt);function pHt(t){return t instanceof fHt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(pHt,"isFileLike");Mze.exports={FileLike:dCe,isFileLike:pHt}});var MF=U((NKn,qze)=>{"use strict";d();var{isBlobLike:LJ,iteratorMixin:mHt}=X0(),{kState:Wd}=QI(),{kEnumerableProperty:aB}=Pi(),{FileLike:Fze,isFileLike:hHt}=fCe(),{webidl:Ts}=Au(),{File:Uze}=require("node:buffer"),Oze=require("node:util"),Qze=globalThis.File??Uze,LF=class t{static{s(this,"FormData")}constructor(e){if(Ts.util.markAsUncloneable(this),e!==void 0)throw Ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Wd]=[]}append(e,r,n=void 0){Ts.brandCheck(this,t);let i="FormData.append";if(Ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!LJ(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=Ts.converters.USVString(e,i,"name"),r=LJ(r)?Ts.converters.Blob(r,i,"value",{strict:!1}):Ts.converters.USVString(r,i,"value"),n=arguments.length===3?Ts.converters.USVString(n,i,"filename"):void 0;let o=pCe(e,r,n);this[Wd].push(o)}delete(e){Ts.brandCheck(this,t);let r="FormData.delete";Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd]=this[Wd].filter(n=>n.name!==e)}get(e){Ts.brandCheck(this,t);let r="FormData.get";Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name");let n=this[Wd].findIndex(i=>i.name===e);return n===-1?null:this[Wd][n].value}getAll(e){Ts.brandCheck(this,t);let r="FormData.getAll";return Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd].filter(n=>n.name===e).map(n=>n.value)}has(e){Ts.brandCheck(this,t);let r="FormData.has";return Ts.argumentLengthCheck(arguments,1,r),e=Ts.converters.USVString(e,r,"name"),this[Wd].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){Ts.brandCheck(this,t);let i="FormData.set";if(Ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!LJ(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=Ts.converters.USVString(e,i,"name"),r=LJ(r)?Ts.converters.Blob(r,i,"name",{strict:!1}):Ts.converters.USVString(r,i,"name"),n=arguments.length===3?Ts.converters.USVString(n,i,"name"):void 0;let o=pCe(e,r,n),a=this[Wd].findIndex(c=>c.name===e);a!==-1?this[Wd]=[...this[Wd].slice(0,a),o,...this[Wd].slice(a+1).filter(c=>c.name!==e)]:this[Wd].push(o)}[Oze.inspect.custom](e,r){let n=this[Wd].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=Oze.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};mHt("FormData",LF,Wd,"name","value");Object.defineProperties(LF.prototype,{append:aB,delete:aB,get:aB,getAll:aB,has:aB,set:aB,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function pCe(t,e,r){if(typeof e!="string"){if(hHt(e)||(e=e instanceof Blob?new Qze([e],"blob",{type:e.type}):new Fze(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof Uze?new Qze([e],r,n):new Fze(e,r,n)}}return{name:t,value:e}}s(pCe,"makeEntry");qze.exports={FormData:LF,makeEntry:pCe}});var $ze=U((FKn,Vze)=>{"use strict";d();var{isUSVString:Hze,bufferToLowerCasedHeaderName:gHt}=Pi(),{utf8DecodeBytes:AHt}=X0(),{HTTP_TOKEN_CODEPOINTS:yHt,isomorphicDecode:Wze}=Uf(),{isFileLike:CHt}=fCe(),{makeEntry:EHt}=MF(),MJ=require("node:assert"),{File:vHt}=require("node:buffer"),xHt=globalThis.File??vHt,bHt=Buffer.from('form-data; name="'),Gze=Buffer.from("; filename"),IHt=Buffer.from("--"),THt=Buffer.from(`--\r
`);function wHt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(wHt,"isAsciiString");function _Ht(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(_Ht,"validateBoundary");function SHt(t,e){MJ(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&FJ(t,IHt,o)||o.position===t.length-4&&FJ(t,THt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let c=RHt(t,o);if(c==="failure")return"failure";let{name:l,filename:u,contentType:f,encoding:p}=c;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(f??="text/plain",wHt(f)||(f=""),h=new xHt([m],u,{type:f})):h=AHt(Buffer.from(m)),MJ(Hze(l)),MJ(typeof h=="string"&&Hze(h)||CHt(h)),i.push(EHt(l,h,u))}}s(SHt,"multipartFormDataParser");function RHt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=cB(c=>c!==10&&c!==13&&c!==58,t,e);if(a=mCe(a,!0,!0,c=>c===9||c===32),!yHt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,cB(c=>c===32||c===9,t,e),gHt(a)){case"content-disposition":{if(r=n=null,!FJ(t,bHt,e)||(e.position+=17,r=jze(t,e),r===null))return"failure";if(FJ(t,Gze,e)){let c=e.position+Gze.length;if(t[c]===42&&(e.position+=1,c+=1),t[c]!==61||t[c+1]!==34||(e.position+=12,n=jze(t,e),n===null))return"failure"}break}case"content-type":{let c=cB(l=>l!==10&&l!==13,t,e);c=mCe(c,!1,!0,l=>l===9||l===32),i=Wze(c);break}case"content-transfer-encoding":{let c=cB(l=>l!==10&&l!==13,t,e);c=mCe(c,!1,!0,l=>l===9||l===32),o=Wze(c);break}default:cB(c=>c!==10&&c!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(RHt,"parseMultipartFormDataHeaders");function jze(t,e){MJ(t[e.position-1]===34);let r=cB(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(jze,"parseMultipartFormDataName");function cB(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(cB,"collectASequenceOfBytes");function mCe(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(mCe,"removeChars");function FJ(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(FJ,"bufferStartsWith");Vze.exports={multipartFormDataParser:SHt,validateBoundary:_Ht}});var dB=U((UKn,tYe)=>{"use strict";d();var FF=Pi(),{ReadableStreamFrom:kHt,isBlobLike:zze,isReadableStreamLike:PHt,readableStreamClose:BHt,createDeferredPromise:DHt,fullyReadBody:NHt,extractMimeType:LHt,utf8DecodeBytes:Jze}=X0(),{FormData:Yze}=MF(),{kState:uB}=QI(),{webidl:MHt}=Au(),{Blob:FHt}=require("node:buffer"),hCe=require("node:assert"),{isErrored:Xze,isDisturbed:OHt}=require("node:stream"),{isArrayBuffer:QHt}=require("node:util/types"),{serializeAMimeType:UHt}=Uf(),{multipartFormDataParser:qHt}=$ze(),gCe;try{let t=require("node:crypto");gCe=s(e=>t.randomInt(0,e),"random")}catch{gCe=s(t=>Math.floor(Math.random(t)),"random")}var OJ=new TextEncoder;function HHt(){}s(HHt,"noop");var ACe=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,yCe;ACe&&(yCe=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!OHt(e)&&!Xze(e)&&e.cancel("Response object has been garbage collected").catch(HHt)}));function Zze(t,e=!1){let r=null;t instanceof ReadableStream?r=t:zze(t)?r=t.stream():r=new ReadableStream({async pull(l){let u=typeof i=="string"?OJ.encode(i):i;u.byteLength&&l.enqueue(u),queueMicrotask(()=>BHt(l))},start(){},type:"bytes"}),hCe(PHt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(QHt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(FF.isFormDataLike(t)){let l=`----formdata-undici-0${`${gCe(1e11)}`.padStart(11,"0")}`,u=`--${l}\r
Content-Disposition: form-data`;let f=s(E=>E.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(E=>E.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[E,x]of t)if(typeof x=="string"){let b=OJ.encode(u+`; name="${f(p(E))}"\r
\r
${p(x)}\r
`);m.push(b),o+=b.byteLength}else{let b=OJ.encode(`${u}; name="${f(p(E))}"`+(x.name?`; filename="${f(x.name)}"`:"")+`\r
Content-Type: ${x.type||"application/octet-stream"}\r
\r
`);m.push(b,x,h),typeof x.size=="number"?o+=b.byteLength+x.size+h.byteLength:g=!0}let y=OJ.encode(`--${l}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let E of m)E.stream?yield*E.stream():yield E},"action"),a=`multipart/form-data; boundary=${l}`}else if(zze(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(FF.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:kHt(t)}if((typeof i=="string"||FF.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let l;r=new ReadableStream({async start(){l=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:f,done:p}=await l.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!Xze(r)){let m=new Uint8Array(f);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await l.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(Zze,"extractBody");function WHt(t,e=!1){return t instanceof ReadableStream&&(hCe(!FF.isDisturbed(t),"The body has already been consumed."),hCe(!t.locked,"The stream is locked.")),Zze(t,e)}s(WHt,"safelyExtractBody");function GHt(t,e){let[r,n]=e.stream.tee();return ACe&&yCe.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(GHt,"cloneBody");function jHt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(jHt,"throwIfAborted");function VHt(t){return{blob(){return lB(this,r=>{let n=Kze(this);return n===null?n="":n&&(n=UHt(n)),new FHt([r],{type:n})},t)},arrayBuffer(){return lB(this,r=>new Uint8Array(r).buffer,t)},text(){return lB(this,Jze,t)},json(){return lB(this,zHt,t)},formData(){return lB(this,r=>{let n=Kze(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=qHt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new Yze;return o[uB]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new Yze;for(let[a,c]of i)o.append(a,c);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return lB(this,r=>new Uint8Array(r),t)}}}s(VHt,"bodyMixinMethods");function $Ht(t){Object.assign(t.prototype,VHt(t))}s($Ht,"mixinBody");async function lB(t,e,r){if(MHt.brandCheck(t,r),eYe(t))throw new TypeError("Body is unusable: Body has already been read");jHt(t[uB]);let n=DHt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(c){i(c)}},"successSteps");return t[uB].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await NHt(t[uB].body,o,i),n.promise)}s(lB,"consumeBody");function eYe(t){let e=t[uB].body;return e!=null&&(e.stream.locked||FF.isDisturbed(e.stream))}s(eYe,"bodyUnusable");function zHt(t){return JSON.parse(Jze(t))}s(zHt,"parseJSONFromBytes");function Kze(t){let e=t[uB].headersList,r=LHt(e);return r==="failure"?null:r}s(Kze,"bodyMimeType");tYe.exports={extractBody:Zze,safelyExtractBody:WHt,cloneBody:GHt,mixinBody:$Ht,streamRegistry:yCe,hasFinalizationRegistry:ACe,bodyUnusable:eYe}});var fYe=U((WKn,dYe)=>{"use strict";d();var Tn=require("node:assert"),ti=Pi(),{channels:rYe}=X3(),CCe=Xye(),{RequestContentLengthMismatchError:U2,ResponseContentLengthMismatchError:YHt,RequestAbortedError:cYe,HeadersTimeoutError:KHt,HeadersOverflowError:JHt,SocketError:GJ,InformationalError:fB,BodyTimeoutError:XHt,HTTPParserError:ZHt,ResponseExceededMaxSizeError:eWt}=Mo(),{kUrl:lYe,kReset:qf,kClient:bCe,kParser:Ua,kBlocking:UF,kRunning:Xu,kPending:tWt,kSize:nYe,kWriting:qI,kQueue:wg,kNoRef:OF,kKeepAliveDefaultTimeout:rWt,kHostHeader:nWt,kPendingIdx:iWt,kRunningIdx:Qm,kError:Um,kPipelining:HJ,kSocket:pB,kKeepAliveTimeoutValue:jJ,kMaxHeadersSize:ECe,kKeepAliveMaxTimeout:oWt,kKeepAliveTimeoutThreshold:sWt,kHeadersTimeout:aWt,kBodyTimeout:cWt,kStrictContentLength:ICe,kMaxRequests:iYe,kCounter:lWt,kMaxResponseSize:uWt,kOnError:dWt,kResume:UI,kHTTPContext:uYe}=fa(),$y=eze(),fWt=Buffer.alloc(0),QJ=Buffer[Symbol.species],UJ=ti.addListener,pWt=ti.removeAllListeners,vCe;async function mWt(){let t=process.env.JEST_WORKER_ID?tCe():void 0,e;try{e=await WebAssembly.compile(nze())}catch{e=await WebAssembly.compile(t||tCe())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Yy+zy.byteOffset;return il.onStatus(new QJ(zy.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(Tn(il.ptr===r),il.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Yy+zy.byteOffset;return il.onHeaderField(new QJ(zy.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Yy+zy.byteOffset;return il.onHeaderValue(new QJ(zy.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(Tn(il.ptr===r),il.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{Tn(il.ptr===r);let o=n-Yy+zy.byteOffset;return il.onBody(new QJ(zy.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(Tn(il.ptr===r),il.onMessageComplete()||0),"wasm_on_message_complete")}})}s(mWt,"lazyllhttp");var xCe=null,TCe=mWt();TCe.catch();var il=null,zy=null,qJ=0,Yy=null,hWt=0,QF=1,mB=2|QF,WJ=4|QF,wCe=8|hWt,_Ce=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){Tn(Number.isFinite(e[ECe])&&e[ECe]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc($y.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[ECe],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[uWt]}setTimeout(e,r){e!==this.timeoutValue||r&QF^this.timeoutType&QF?(this.timeout&&(CCe.clearTimeout(this.timeout),this.timeout=null),e&&(r&QF?this.timeout=CCe.setFastTimeout(oYe,e,new WeakRef(this)):(this.timeout=setTimeout(oYe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(Tn(this.ptr!=null),Tn(il==null),this.llhttp.llhttp_resume(this.ptr),Tn(this.timeoutType===WJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||fWt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){Tn(this.ptr!=null),Tn(il==null),Tn(!this.paused);let{socket:r,llhttp:n}=this;e.length>qJ&&(Yy&&n.free(Yy),qJ=Math.ceil(e.length/4096)*4096,Yy=n.malloc(qJ)),new Uint8Array(n.memory.buffer,Yy,qJ).set(e);try{let i;try{zy=e,il=this,i=n.llhttp_execute(this.ptr,Yy,e.length)}catch(a){throw a}finally{il=null,zy=null}let o=n.llhttp_get_error_pos(this.ptr)-Yy;if(i===$y.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===$y.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==$y.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),c="";if(a){let l=new Uint8Array(n.memory.buffer,a).indexOf(0);c="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,l).toString()+")"}throw new ZHt(c,$y.ERROR[i],e.slice(o))}}catch(i){ti.destroy(r,i)}}destroy(){Tn(this.ptr!=null),Tn(il==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&CCe.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[wg][r[Qm]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=ti.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&ti.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&ti.destroy(this.socket,new JHt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;Tn(r),Tn(n[pB]===i),Tn(!i.destroyed),Tn(!this.paused),Tn((o.length&1)===0);let c=n[wg][n[Qm]];Tn(c),Tn(c.upgrade||c.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[Ua].destroy(),i[Ua]=null,i[bCe]=null,i[Um]=null,pWt(i),n[pB]=null,n[uYe]=null,n[wg][n[Qm]++]=null,n.emit("disconnect",n[lYe],[n],new fB("upgrade"));try{c.onUpgrade(a,o,i)}catch(l){ti.destroy(i,l)}n[UI]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:c}=this;if(o.destroyed)return-1;let l=i[wg][i[Qm]];if(!l)return-1;if(Tn(!this.upgrade),Tn(this.statusCode<200),e===100)return ti.destroy(o,new GJ("bad response",ti.getSocketInfo(o))),-1;if(r&&!l.upgrade)return ti.destroy(o,new GJ("bad upgrade",ti.getSocketInfo(o))),-1;if(Tn(this.timeoutType===mB),this.statusCode=e,this.shouldKeepAlive=n||l.method==="HEAD"&&!o[qf]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let f=l.bodyTimeout!=null?l.bodyTimeout:i[cWt];this.setTimeout(f,WJ)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return Tn(i[Xu]===1),this.upgrade=!0,2;if(r)return Tn(i[Xu]===1),this.upgrade=!0,2;if(Tn((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[HJ]){let f=this.keepAlive?ti.parseKeepAliveTimeout(this.keepAlive):null;if(f!=null){let p=Math.min(f-i[sWt],i[oWt]);p<=0?o[qf]=!0:i[jJ]=p}else i[jJ]=i[rWt]}else o[qf]=!0;let u=l.onHeaders(e,a,this.resume,c)===!1;return l.aborted?-1:l.method==="HEAD"||e<200?1:(o[UF]&&(o[UF]=!1,i[UI]()),u?$y.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[wg][r[Qm]];if(Tn(a),Tn(this.timeoutType===WJ),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),Tn(i>=200),o>-1&&this.bytesRead+e.length>o)return ti.destroy(n,new eWt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return $y.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:c,shouldKeepAlive:l}=this;if(r.destroyed&&(!n||l))return-1;if(i)return;Tn(n>=100),Tn((this.headers.length&1)===0);let u=e[wg][e[Qm]];if(Tn(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&c!==parseInt(a,10))return ti.destroy(r,new YHt),-1;if(u.onComplete(o),e[wg][e[Qm]++]=null,r[qI])return Tn(e[Xu]===0),ti.destroy(r,new fB("reset")),$y.ERROR.PAUSED;if(l){if(r[qf]&&e[Xu]===0)return ti.destroy(r,new fB("reset")),$y.ERROR.PAUSED;e[HJ]==null||e[HJ]===1?setImmediate(()=>e[UI]()):e[UI]()}else return ti.destroy(r,new fB("reset")),$y.ERROR.PAUSED}}};function oYe(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===mB?(!e[qI]||e.writableNeedDrain||n[Xu]>1)&&(Tn(!i,"cannot be paused while waiting for headers"),ti.destroy(e,new KHt)):r===WJ?i||ti.destroy(e,new XHt):r===wCe&&(Tn(n[Xu]===0&&n[jJ]),ti.destroy(e,new fB("socket idle timeout")))}s(oYe,"onParserTimeout");async function gWt(t,e){t[pB]=e,xCe||(xCe=await TCe,TCe=null),e[OF]=!1,e[qI]=!1,e[qf]=!1,e[UF]=!1,e[Ua]=new _Ce(t,e,xCe),UJ(e,"error",function(n){Tn(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[Ua];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[Um]=n,this[bCe][dWt](n)}),UJ(e,"readable",function(){let n=this[Ua];n&&n.readMore()}),UJ(e,"end",function(){let n=this[Ua];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}ti.destroy(this,new GJ("other side closed",ti.getSocketInfo(this)))}),UJ(e,"close",function(){let n=this[bCe],i=this[Ua];i&&(!this[Um]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[Ua].destroy(),this[Ua]=null);let o=this[Um]||new GJ("closed",ti.getSocketInfo(this));if(n[pB]=null,n[uYe]=null,n.destroyed){Tn(n[tWt]===0);let a=n[wg].splice(n[Qm]);for(let c=0;c<a.length;c++){let l=a[c];ti.errorRequest(n,l,o)}}else if(n[Xu]>0&&o.code!=="UND_ERR_INFO"){let a=n[wg][n[Qm]];n[wg][n[Qm]++]=null,ti.errorRequest(n,a,o)}n[iWt]=n[Qm],Tn(n[Xu]===0),n.emit("disconnect",n[lYe],[n],o),n[UI]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return CWt(t,...n)},resume(){AWt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[qI]||e[qf]||e[UF]||n&&(t[Xu]>0&&!n.idempotent||t[Xu]>0&&(n.upgrade||n.method==="CONNECT")||t[Xu]>0&&ti.bodyLength(n.body)!==0&&(ti.isStream(n.body)||ti.isAsyncIterable(n.body)||ti.isFormDataLike(n.body))))}}}s(gWt,"connectH1");function AWt(t){let e=t[pB];if(e&&!e.destroyed){if(t[nYe]===0?!e[OF]&&e.unref&&(e.unref(),e[OF]=!0):e[OF]&&e.ref&&(e.ref(),e[OF]=!1),t[nYe]===0)e[Ua].timeoutType!==wCe&&e[Ua].setTimeout(t[jJ],wCe);else if(t[Xu]>0&&e[Ua].statusCode<200&&e[Ua].timeoutType!==mB){let r=t[wg][t[Qm]],n=r.headersTimeout!=null?r.headersTimeout:t[aWt];e[Ua].setTimeout(n,mB)}}}s(AWt,"resumeH1");function yWt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(yWt,"shouldSendContentLength");function CWt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:c}=e,{body:l,headers:u,contentLength:f}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(ti.isFormDataLike(l)){vCe||(vCe=dB().extractBody);let[E,x]=vCe(l);e.contentType==null&&u.push("content-type",x),l=E.stream,f=E.length}else ti.isBlobLike(l)&&e.contentType==null&&l.type&&u.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let m=ti.bodyLength(l);if(f=m??f,f===null&&(f=e.contentLength),f===0&&!p&&(f=null),yWt(r)&&f>0&&e.contentLength!==null&&e.contentLength!==f){if(t[ICe])return ti.errorRequest(t,e,new U2),!1;process.emitWarning(new U2)}let h=t[pB],g=s(E=>{e.aborted||e.completed||(ti.errorRequest(t,e,E||new cYe),ti.destroy(l),ti.destroy(h,new fB("aborted")))},"abort");try{e.onConnect(g)}catch(E){ti.errorRequest(t,e,E)}if(e.aborted)return!1;r==="HEAD"&&(h[qf]=!0),(o||r==="CONNECT")&&(h[qf]=!0),c!=null&&(h[qf]=c),t[iYe]&&h[lWt]++>=t[iYe]&&(h[qf]=!0),a&&(h[UF]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[nWt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[HJ]&&!h[qf]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let E=0;E<u.length;E+=2){let x=u[E+0],b=u[E+1];if(Array.isArray(b))for(let _=0;_<b.length;_++)y+=`${x}: ${b[_]}\r
`;else y+=`${x}: ${b}\r
`}return rYe.sendHeaders.hasSubscribers&&rYe.sendHeaders.publish({request:e,headers:y,socket:h}),!l||m===0?sYe(g,null,t,e,h,f,y,p):ti.isBuffer(l)?sYe(g,l,t,e,h,f,y,p):ti.isBlobLike(l)?typeof l.stream=="function"?aYe(g,l.stream(),t,e,h,f,y,p):vWt(g,l,t,e,h,f,y,p):ti.isStream(l)?EWt(g,l,t,e,h,f,y,p):ti.isIterable(l)?aYe(g,l,t,e,h,f,y,p):Tn(!1),!0}s(CWt,"writeH1");function EWt(t,e,r,n,i,o,a,c){Tn(o!==0||r[Xu]===0,"stream body cannot be pipelined");let l=!1,u=new VJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a}),f=s(function(g){if(!l)try{!u.write(g)&&this.pause&&this.pause()}catch(y){ti.destroy(this,y)}},"onData"),p=s(function(){l||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!l){let g=new cYe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!l){if(l=!0,Tn(i.destroyed||i[qI]&&r[Xu]<=1),i.off("drain",p).off("error",h),e.removeListener("data",f).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?ti.destroy(e,g):ti.destroy(e)}},"onFinished");e.on("data",f).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(EWt,"writeStream");function sYe(t,e,r,n,i,o,a,c){try{e?ti.isBuffer(e)&&(Tn(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!c&&n.reset!==!1&&(i[qf]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(Tn(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[UI]()}catch(l){t(l)}}s(sYe,"writeBuffer");async function vWt(t,e,r,n,i,o,a,c){Tn(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new U2;let l=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(l),i.uncork(),n.onBodySent(l),n.onRequestSent(),!c&&n.reset!==!1&&(i[qf]=!0),r[UI]()}catch(l){t(l)}}s(vWt,"writeBlob");async function aYe(t,e,r,n,i,o,a,c){Tn(o!==0||r[Xu]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let m=l;l=null,m()}}s(u,"onDrain");let f=s(()=>new Promise((m,h)=>{Tn(l===null),i[Um]?h(i[Um]):l=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new VJ({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:c,header:a});try{for await(let m of e){if(i[Um])throw i[Um];p.write(m)||await f()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(aYe,"writeIterable");var VJ=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:c}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=c,this.abort=e,r[qI]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:c,header:l}=this;if(r[Um])throw r[Um];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[ICe])throw new U2;process.emitWarning(new U2)}r.cork(),a===0&&(!c&&n.reset!==!1&&(r[qf]=!0),i===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let f=r.write(e);return r.uncork(),n.onBodySent(e),f||r[Ua].timeout&&r[Ua].timeoutType===mB&&r[Ua].timeout.refresh&&r[Ua].timeout.refresh(),f}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:c}=this;if(c.onRequestSent(),e[qI]=!1,e[Um])throw e[Um];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[ICe])throw new U2;process.emitWarning(new U2)}e[Ua].timeout&&e[Ua].timeoutType===mB&&e[Ua].timeout.refresh&&e[Ua].timeout.refresh(),n[UI]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[qI]=!1,e&&(Tn(n[Xu]<=1,"pipeline should only contain this request"),i(e))}};dYe.exports=gWt});var EYe=U((VKn,CYe)=>{"use strict";d();var qm=require("node:assert"),{pipeline:xWt}=require("node:stream"),Xi=Pi(),{RequestContentLengthMismatchError:SCe,RequestAbortedError:pYe,SocketError:qF,InformationalError:RCe}=Mo(),{kUrl:$J,kReset:YJ,kClient:hB,kRunning:KJ,kPending:bWt,kQueue:HI,kPendingIdx:kCe,kRunningIdx:_g,kError:Rg,kSocket:Ll,kStrictContentLength:IWt,kOnError:PCe,kMaxConcurrentStreams:yYe,kHTTP2Session:Sg,kResume:WI,kSize:TWt,kHTTPContext:wWt}=fa(),NE=Symbol("open streams"),mYe,hYe=!1,zJ;try{zJ=require("node:http2")}catch{zJ={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:_Wt,HTTP2_HEADER_METHOD:SWt,HTTP2_HEADER_PATH:RWt,HTTP2_HEADER_SCHEME:kWt,HTTP2_HEADER_CONTENT_LENGTH:PWt,HTTP2_HEADER_EXPECT:BWt,HTTP2_HEADER_STATUS:DWt}}=zJ;function NWt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(NWt,"parseH2Headers");async function LWt(t,e){t[Ll]=e,hYe||(hYe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=zJ.connect(t[$J],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[yYe]});r[NE]=0,r[hB]=t,r[Ll]=e,Xi.addListener(r,"error",FWt),Xi.addListener(r,"frameError",OWt),Xi.addListener(r,"end",QWt),Xi.addListener(r,"goaway",UWt),Xi.addListener(r,"close",function(){let{[hB]:i}=this,{[Ll]:o}=i,a=this[Ll][Rg]||this[Rg]||new qF("closed",Xi.getSocketInfo(o));if(i[Sg]=null,i.destroyed){qm(i[bWt]===0);let c=i[HI].splice(i[_g]);for(let l=0;l<c.length;l++){let u=c[l];Xi.errorRequest(i,u,a)}}}),r.unref(),t[Sg]=r,e[Sg]=r,Xi.addListener(e,"error",function(i){qm(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Rg]=i,this[hB][PCe](i)}),Xi.addListener(e,"end",function(){Xi.destroy(this,new qF("other side closed",Xi.getSocketInfo(this)))}),Xi.addListener(e,"close",function(){let i=this[Rg]||new qF("closed",Xi.getSocketInfo(this));t[Ll]=null,this[Sg]!=null&&this[Sg].destroy(i),t[kCe]=t[_g],qm(t[KJ]===0),t.emit("disconnect",t[$J],[t],i),t[WI]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return HWt(t,...i)},resume(){MWt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(LWt,"connectH2");function MWt(t){let e=t[Ll];e?.destroyed===!1&&(t[TWt]===0&&t[yYe]===0?(e.unref(),t[Sg].unref()):(e.ref(),t[Sg].ref()))}s(MWt,"resumeH2");function FWt(t){qm(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Ll][Rg]=t,this[hB][PCe](t)}s(FWt,"onHttp2SessionError");function OWt(t,e,r){if(r===0){let n=new RCe(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Ll][Rg]=n,this[hB][PCe](n)}}s(OWt,"onHttp2FrameError");function QWt(){let t=new qF("other side closed",Xi.getSocketInfo(this[Ll]));this.destroy(t),Xi.destroy(this[Ll],t)}s(QWt,"onHttp2SessionEnd");function UWt(t){let e=this[Rg]||new qF(`HTTP/2: "GOAWAY" frame received with code ${t}`,Xi.getSocketInfo(this)),r=this[hB];if(r[Ll]=null,r[wWt]=null,this[Sg]!=null&&(this[Sg].destroy(e),this[Sg]=null),Xi.destroy(this[Ll],e),r[_g]<r[HI].length){let n=r[HI][r[_g]];r[HI][r[_g]++]=null,Xi.errorRequest(r,n,e),r[kCe]=r[_g]}qm(r[KJ]===0),r.emit("disconnect",r[$J],[r],e),r[WI]()}s(UWt,"onHTTP2GoAway");function qWt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(qWt,"shouldSendContentLength");function HWt(t,e){let r=t[Sg],{method:n,path:i,host:o,upgrade:a,expectContinue:c,signal:l,headers:u}=e,{body:f}=e;if(a)return Xi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let P=u[k+0],N=u[k+1];if(Array.isArray(N))for(let M=0;M<N.length;M++)p[P]?p[P]+=`,${N[M]}`:p[P]=N[M];else p[P]=N}let m,{hostname:h,port:g}=t[$J];p[_Wt]=o||`${h}${g?`:${g}`:""}`,p[SWt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new pYe,Xi.errorRequest(t,e,k),m!=null&&Xi.destroy(m,k),Xi.destroy(f,k),t[HI][t[_g]++]=null,t[WI]())},"abort");try{e.onConnect(y)}catch(k){Xi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:l}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[NE],t[HI][t[_g]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[NE],t[HI][t[_g]++]=null}),m.once("close",()=>{r[NE]-=1,r[NE]===0&&r.unref()}),!0;p[RWt]=i,p[kWt]="https";let E=n==="PUT"||n==="POST"||n==="PATCH";f&&typeof f.read=="function"&&f.read(0);let x=Xi.bodyLength(f);if(Xi.isFormDataLike(f)){mYe??=dB().extractBody;let[k,P]=mYe(f);p["content-type"]=P,f=k.stream,x=k.length}if(x==null&&(x=e.contentLength),(x===0||!E)&&(x=null),qWt(n)&&x>0&&e.contentLength!=null&&e.contentLength!==x){if(t[IWt])return Xi.errorRequest(t,e,new SCe),!1;process.emitWarning(new SCe)}x!=null&&(qm(f,"no body must not have content length"),p[PWt]=`${x}`),r.ref();let b=n==="GET"||n==="HEAD"||f===null;return c?(p[BWt]="100-continue",m=r.request(p,{endStream:b,signal:l}),m.once("continue",_)):(m=r.request(p,{endStream:b,signal:l}),_()),++r[NE],m.once("response",k=>{let{[DWt]:P,...N}=k;if(e.onResponseStarted(),e.aborted){let M=new pYe;Xi.errorRequest(t,e,M),Xi.destroy(m,M);return}e.onHeaders(Number(P),NWt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",M=>{e.onData(M)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[NE]===0&&r.unref(),y(new RCe("HTTP/2: stream half-closed (remote)")),t[HI][t[_g]++]=null,t[kCe]=t[_g],t[WI]()}),m.once("close",()=>{r[NE]-=1,r[NE]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,P)=>{y(new RCe(`HTTP/2: "frameError" received - type ${k}, code ${P}`))}),!0;function _(){!f||x===0?gYe(y,m,null,t,e,t[Ll],x,E):Xi.isBuffer(f)?gYe(y,m,f,t,e,t[Ll],x,E):Xi.isBlobLike(f)?typeof f.stream=="function"?AYe(y,m,f.stream(),t,e,t[Ll],x,E):GWt(y,m,f,t,e,t[Ll],x,E):Xi.isStream(f)?WWt(y,t[Ll],E,m,f,t,e,x):Xi.isIterable(f)?AYe(y,m,f,t,e,t[Ll],x,E):qm(!1)}s(_,"writeBodyH2")}s(HWt,"writeH2");function gYe(t,e,r,n,i,o,a,c){try{r!=null&&Xi.isBuffer(r)&&(qm(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),c||(o[YJ]=!0),i.onRequestSent(),n[WI]()}catch(l){t(l)}}s(gYe,"writeBuffer");function WWt(t,e,r,n,i,o,a,c){qm(c!==0||o[KJ]===0,"stream body cannot be pipelined");let l=xWt(i,n,f=>{f?(Xi.destroy(l,f),t(f)):(Xi.removeAllListeners(l),a.onRequestSent(),r||(e[YJ]=!0),o[WI]())});Xi.addListener(l,"data",u);function u(f){a.onBodySent(f)}s(u,"onPipeData")}s(WWt,"writeStream");async function GWt(t,e,r,n,i,o,a,c){qm(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new SCe;let l=Buffer.from(await r.arrayBuffer());e.cork(),e.write(l),e.uncork(),e.end(),i.onBodySent(l),i.onRequestSent(),c||(o[YJ]=!0),n[WI]()}catch(l){t(l)}}s(GWt,"writeBlob");async function AYe(t,e,r,n,i,o,a,c){qm(a!==0||n[KJ]===0,"iterator body cannot be pipelined");let l=null;function u(){if(l){let p=l;l=null,p()}}s(u,"onDrain");let f=s(()=>new Promise((p,m)=>{qm(l===null),o[Rg]?m(o[Rg]):l=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[Rg])throw o[Rg];let m=e.write(p);i.onBodySent(p),m||await f()}e.end(),i.onRequestSent(),c||(o[YJ]=!0),n[WI]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(AYe,"writeIterable");CYe.exports=LWt});var XJ=U((YKn,bYe)=>{"use strict";d();var Ky=Pi(),{kBodyUsed:HF}=fa(),DCe=require("node:assert"),{InvalidArgumentError:jWt}=Mo(),VWt=require("node:events"),$Wt=[300,301,302,303,307,308],vYe=Symbol("body"),JJ=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[vYe]=e,this[HF]=!1}async*[Symbol.asyncIterator](){DCe(!this[HF],"disturbed"),this[HF]=!0,yield*this[vYe]}},BCe=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new jWt("maxRedirections must be a positive number");Ky.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Ky.isStream(this.opts.body)?(Ky.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){DCe(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[HF]=!1,VWt.prototype.on.call(this.opts.body,"data",function(){this[HF]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new JJ(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Ky.isIterable(this.opts.body)&&(this.opts.body=new JJ(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||Ky.isDisturbed(this.opts.body)?null:zWt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:c}=Ky.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=c?`${a}${c}`:a;this.opts.headers=YWt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=l,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function zWt(t,e){if($Wt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&Ky.headerNameToString(e[r])==="location")return e[r+1]}s(zWt,"parseLocation");function xYe(t,e,r){if(t.length===4)return Ky.headerNameToString(t)==="host";if(e&&Ky.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=Ky.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(xYe,"shouldRemoveHeader");function YWt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)xYe(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))xYe(i,e,r)||n.push(i,t[i]);else DCe(t==null,"headers must be an object or an array");return n}s(YWt,"cleanRequestHeaders");bYe.exports=BCe});var ZJ=U((XKn,IYe)=>{"use strict";d();var KWt=XJ();function JWt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new KWt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(JWt,"createRedirectInterceptor");IYe.exports=JWt});var YF=U((tJn,NYe)=>{"use strict";d();var LE=require("node:assert"),kYe=require("node:net"),XWt=require("node:http"),q2=Pi(),{channels:gB}=X3(),ZWt=q$e(),eGt=rB(),{InvalidArgumentError:dc,InformationalError:tGt,ClientDestroyedError:rGt}=Mo(),nGt=RF(),{kUrl:Jy,kServerName:GI,kClient:iGt,kBusy:NCe,kConnect:oGt,kResuming:H2,kRunning:$F,kPending:zF,kSize:VF,kQueue:kg,kConnected:sGt,kConnecting:AB,kNeedDrain:VI,kKeepAliveDefaultTimeout:TYe,kHostHeader:aGt,kPendingIdx:Pg,kRunningIdx:ME,kError:cGt,kPipelining:eX,kKeepAliveTimeoutValue:lGt,kMaxHeadersSize:uGt,kKeepAliveMaxTimeout:dGt,kKeepAliveTimeoutThreshold:fGt,kHeadersTimeout:pGt,kBodyTimeout:mGt,kStrictContentLength:hGt,kConnector:WF,kMaxRedirections:gGt,kMaxRequests:LCe,kCounter:AGt,kClose:yGt,kDestroy:CGt,kDispatch:EGt,kInterceptors:wYe,kLocalAddress:GF,kMaxResponseSize:vGt,kOnError:xGt,kHTTPContext:fc,kMaxConcurrentStreams:bGt,kResume:jF}=fa(),IGt=fYe(),TGt=EYe(),_Ye=!1,jI=Symbol("kClosedResolve"),SYe=s(()=>{},"noop");function PYe(t){return t[eX]??t[fc]?.defaultPipelining??1}s(PYe,"getPipelining");var MCe=class extends eGt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:c,bodyTimeout:l,idleTimeout:u,keepAlive:f,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:E,tls:x,strictContentLength:b,maxCachedSessions:_,maxRedirections:k,connect:P,maxRequestsPerClient:N,localAddress:M,maxResponseSize:J,autoSelectFamily:pe,autoSelectFamilyAttemptTimeout:Y,maxConcurrentStreams:G,allowH2:H}={}){if(super(),f!==void 0)throw new dc("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new dc("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new dc("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new dc("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new dc("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new dc("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new dc("invalid socketPath");if(c!=null&&(!Number.isFinite(c)||c<0))throw new dc("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new dc("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new dc("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new dc("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new dc("headersTimeout must be a positive integer or zero");if(l!=null&&(!Number.isInteger(l)||l<0))throw new dc("bodyTimeout must be a positive integer or zero");if(P!=null&&typeof P!="function"&&typeof P!="object")throw new dc("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new dc("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new dc("maxRequestsPerClient must be a positive number");if(M!=null&&(typeof M!="string"||kYe.isIP(M)===0))throw new dc("localAddress must be valid string IP address");if(J!=null&&(!Number.isInteger(J)||J<-1))throw new dc("maxResponseSize must be a positive number");if(Y!=null&&(!Number.isInteger(Y)||Y<-1))throw new dc("autoSelectFamilyAttemptTimeout must be a positive number");if(H!=null&&typeof H!="boolean")throw new dc("allowH2 must be a valid boolean value");if(G!=null&&(typeof G!="number"||G<1))throw new dc("maxConcurrentStreams must be a positive integer, greater than 0");typeof P!="function"&&(P=nGt({...x,maxCachedSessions:_,allowH2:H,socketPath:y,timeout:c,...pe?{autoSelectFamily:pe,autoSelectFamilyAttemptTimeout:Y}:void 0,...P})),r?.Client&&Array.isArray(r.Client)?(this[wYe]=r.Client,_Ye||(_Ye=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[wYe]=[wGt({maxRedirections:k})],this[Jy]=q2.parseOrigin(e),this[WF]=P,this[eX]=E??1,this[uGt]=n||XWt.maxHeaderSize,this[TYe]=p??4e3,this[dGt]=h??6e5,this[fGt]=g??2e3,this[lGt]=this[TYe],this[GI]=null,this[GF]=M??null,this[H2]=0,this[VI]=0,this[aGt]=`host: ${this[Jy].hostname}${this[Jy].port?`:${this[Jy].port}`:""}\r
`,this[mGt]=l??3e5,this[pGt]=i??3e5,this[hGt]=b??!0,this[gGt]=k,this[LCe]=N,this[jI]=null,this[vGt]=J>-1?J:-1,this[bGt]=G??100,this[fc]=null,this[kg]=[],this[ME]=0,this[Pg]=0,this[jF]=ce=>FCe(this,ce),this[xGt]=ce=>BYe(this,ce)}get pipelining(){return this[eX]}set pipelining(e){this[eX]=e,this[jF](!0)}get[zF](){return this[kg].length-this[Pg]}get[$F](){return this[Pg]-this[ME]}get[VF](){return this[kg].length-this[ME]}get[sGt](){return!!this[fc]&&!this[AB]&&!this[fc].destroyed}get[NCe](){return!!(this[fc]?.busy(null)||this[VF]>=(PYe(this)||1)||this[zF]>0)}[oGt](e){DYe(this),this.once("connect",e)}[EGt](e,r){let n=e.origin||this[Jy].origin,i=new ZWt(n,e,r);return this[kg].push(i),this[H2]||(q2.bodyLength(i.body)==null&&q2.isIterable(i.body)?(this[H2]=1,queueMicrotask(()=>FCe(this))):this[jF](!0)),this[H2]&&this[VI]!==2&&this[NCe]&&(this[VI]=2),this[VI]<2}async[yGt](){return new Promise(e=>{this[VF]?this[jI]=e:e(null)})}async[CGt](e){return new Promise(r=>{let n=this[kg].splice(this[Pg]);for(let o=0;o<n.length;o++){let a=n[o];q2.errorRequest(this,a,e)}let i=s(()=>{this[jI]&&(this[jI](),this[jI]=null),r(null)},"callback");this[fc]?(this[fc].destroy(e,i),this[fc]=null):queueMicrotask(i),this[jF]()})}},wGt=ZJ();function BYe(t,e){if(t[$F]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){LE(t[Pg]===t[ME]);let r=t[kg].splice(t[ME]);for(let n=0;n<r.length;n++){let i=r[n];q2.errorRequest(t,i,e)}LE(t[VF]===0)}}s(BYe,"onError");async function DYe(t){LE(!t[AB]),LE(!t[fc]);let{host:e,hostname:r,protocol:n,port:i}=t[Jy];if(r[0]==="["){let o=r.indexOf("]");LE(o!==-1);let a=r.substring(1,o);LE(kYe.isIP(a)),r=a}t[AB]=!0,gB.beforeConnect.hasSubscribers&&gB.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[GI],localAddress:t[GF]},connector:t[WF]});try{let o=await new Promise((a,c)=>{t[WF]({host:e,hostname:r,protocol:n,port:i,servername:t[GI],localAddress:t[GF]},(l,u)=>{l?c(l):a(u)})});if(t.destroyed){q2.destroy(o.on("error",SYe),new rGt);return}LE(o);try{t[fc]=o.alpnProtocol==="h2"?await TGt(t,o):await IGt(t,o)}catch(a){throw o.destroy().on("error",SYe),a}t[AB]=!1,o[AGt]=0,o[LCe]=t[LCe],o[iGt]=t,o[cGt]=null,gB.connected.hasSubscribers&&gB.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[GI],localAddress:t[GF]},connector:t[WF],socket:o}),t.emit("connect",t[Jy],[t])}catch(o){if(t.destroyed)return;if(t[AB]=!1,gB.connectError.hasSubscribers&&gB.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[fc]?.version,servername:t[GI],localAddress:t[GF]},connector:t[WF],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(LE(t[$F]===0);t[zF]>0&&t[kg][t[Pg]].servername===t[GI];){let a=t[kg][t[Pg]++];q2.errorRequest(t,a,o)}else BYe(t,o);t.emit("connectionError",t[Jy],[t],o)}t[jF]()}s(DYe,"connect");function RYe(t){t[VI]=0,t.emit("drain",t[Jy],[t])}s(RYe,"emitDrain");function FCe(t,e){t[H2]!==2&&(t[H2]=2,_Gt(t,e),t[H2]=0,t[ME]>256&&(t[kg].splice(0,t[ME]),t[Pg]-=t[ME],t[ME]=0))}s(FCe,"resume");function _Gt(t,e){for(;;){if(t.destroyed){LE(t[zF]===0);return}if(t[jI]&&!t[VF]){t[jI](),t[jI]=null;return}if(t[fc]&&t[fc].resume(),t[NCe])t[VI]=2;else if(t[VI]===2){e?(t[VI]=1,queueMicrotask(()=>RYe(t))):RYe(t);continue}if(t[zF]===0||t[$F]>=(PYe(t)||1))return;let r=t[kg][t[Pg]];if(t[Jy].protocol==="https:"&&t[GI]!==r.servername){if(t[$F]>0)return;t[GI]=r.servername,t[fc]?.destroy(new tGt("servername changed"),()=>{t[fc]=null,FCe(t)})}if(t[AB])return;if(!t[fc]){DYe(t);return}if(t[fc].destroyed||t[fc].busy(r))return;!r.aborted&&t[fc].write(r)?t[Pg]++:t[kg].splice(t[Pg],1)}}s(_Gt,"_resume");NYe.exports=MCe});var OCe=U((oJn,LYe)=>{"use strict";d();var tX=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};LYe.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new tX}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new tX),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var FYe=U((cJn,MYe)=>{d();var{kFree:SGt,kConnected:RGt,kPending:kGt,kQueued:PGt,kRunning:BGt,kSize:DGt}=fa(),W2=Symbol("pool"),QCe=class{static{s(this,"PoolStats")}constructor(e){this[W2]=e}get connected(){return this[W2][RGt]}get free(){return this[W2][SGt]}get pending(){return this[W2][kGt]}get queued(){return this[W2][PGt]}get running(){return this[W2][BGt]}get size(){return this[W2][DGt]}};MYe.exports=QCe});var jCe=U((dJn,$Ye)=>{"use strict";d();var NGt=rB(),LGt=OCe(),{kConnected:UCe,kSize:OYe,kRunning:QYe,kPending:UYe,kQueued:KF,kBusy:MGt,kFree:FGt,kUrl:OGt,kClose:QGt,kDestroy:UGt,kDispatch:qGt}=fa(),HGt=FYe(),Hf=Symbol("clients"),Gd=Symbol("needDrain"),JF=Symbol("queue"),qCe=Symbol("closed resolve"),HCe=Symbol("onDrain"),qYe=Symbol("onConnect"),HYe=Symbol("onDisconnect"),WYe=Symbol("onConnectionError"),WCe=Symbol("get dispatcher"),jYe=Symbol("add client"),VYe=Symbol("remove client"),GYe=Symbol("stats"),GCe=class extends NGt{static{s(this,"PoolBase")}constructor(){super(),this[JF]=new LGt,this[Hf]=[],this[KF]=0;let e=this;this[HCe]=s(function(n,i){let o=e[JF],a=!1;for(;!a;){let c=o.shift();if(!c)break;e[KF]--,a=!this.dispatch(c.opts,c.handler)}this[Gd]=a,!this[Gd]&&e[Gd]&&(e[Gd]=!1,e.emit("drain",n,[e,...i])),e[qCe]&&o.isEmpty()&&Promise.all(e[Hf].map(c=>c.close())).then(e[qCe])},"onDrain"),this[qYe]=(r,n)=>{e.emit("connect",r,[e,...n])},this[HYe]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[WYe]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[GYe]=new HGt(this)}get[MGt](){return this[Gd]}get[UCe](){return this[Hf].filter(e=>e[UCe]).length}get[FGt](){return this[Hf].filter(e=>e[UCe]&&!e[Gd]).length}get[UYe](){let e=this[KF];for(let{[UYe]:r}of this[Hf])e+=r;return e}get[QYe](){let e=0;for(let{[QYe]:r}of this[Hf])e+=r;return e}get[OYe](){let e=this[KF];for(let{[OYe]:r}of this[Hf])e+=r;return e}get stats(){return this[GYe]}async[QGt](){this[JF].isEmpty()?await Promise.all(this[Hf].map(e=>e.close())):await new Promise(e=>{this[qCe]=e})}async[UGt](e){for(;;){let r=this[JF].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[Hf].map(r=>r.destroy(e)))}[qGt](e,r){let n=this[WCe]();return n?n.dispatch(e,r)||(n[Gd]=!0,this[Gd]=!this[WCe]()):(this[Gd]=!0,this[JF].push({opts:e,handler:r}),this[KF]++),!this[Gd]}[jYe](e){return e.on("drain",this[HCe]).on("connect",this[qYe]).on("disconnect",this[HYe]).on("connectionError",this[WYe]),this[Hf].push(e),this[Gd]&&queueMicrotask(()=>{this[Gd]&&this[HCe](e[OGt],[this,e])}),this}[VYe](e){e.close(()=>{let r=this[Hf].indexOf(e);r!==-1&&this[Hf].splice(r,1)}),this[Gd]=this[Hf].some(r=>!r[Gd]&&r.closed!==!0&&r.destroyed!==!0)}};$Ye.exports={PoolBase:GCe,kClients:Hf,kNeedDrain:Gd,kAddClient:jYe,kRemoveClient:VYe,kGetDispatcher:WCe}});var yB=U((mJn,JYe)=>{"use strict";d();var{PoolBase:WGt,kClients:rX,kNeedDrain:GGt,kAddClient:jGt,kGetDispatcher:VGt}=jCe(),$Gt=YF(),{InvalidArgumentError:VCe}=Mo(),zYe=Pi(),{kUrl:YYe,kInterceptors:zGt}=fa(),YGt=RF(),$Ce=Symbol("options"),zCe=Symbol("connections"),KYe=Symbol("factory");function KGt(t,e){return new $Gt(t,e)}s(KGt,"defaultFactory");var YCe=class extends WGt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=KGt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:c,socketPath:l,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new VCe("invalid connections");if(typeof n!="function")throw new VCe("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new VCe("connect must be a function or an object");typeof i!="function"&&(i=YGt({...a,maxCachedSessions:c,allowH2:p,socketPath:l,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:f}:void 0,...i})),this[zGt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[zCe]=r||null,this[YYe]=zYe.parseOrigin(e),this[$Ce]={...zYe.deepClone(m),connect:i,allowH2:p},this[$Ce].interceptors=m.interceptors?{...m.interceptors}:void 0,this[KYe]=n,this.on("connectionError",(h,g,y)=>{for(let E of g){let x=this[rX].indexOf(E);x!==-1&&this[rX].splice(x,1)}})}[VGt](){for(let e of this[rX])if(!e[GGt])return e;if(!this[zCe]||this[rX].length<this[zCe]){let e=this[KYe](this[YYe],this[$Ce]);return this[jGt](e),e}}};JYe.exports=YCe});var rKe=U((AJn,tKe)=>{"use strict";d();var{BalancedPoolMissingUpstreamError:JGt,InvalidArgumentError:XGt}=Mo(),{PoolBase:ZGt,kClients:Zu,kNeedDrain:XF,kAddClient:ejt,kRemoveClient:tjt,kGetDispatcher:rjt}=jCe(),njt=yB(),{kUrl:KCe,kInterceptors:ijt}=fa(),{parseOrigin:XYe}=Pi(),ZYe=Symbol("factory"),nX=Symbol("options"),eKe=Symbol("kGreatestCommonDivisor"),G2=Symbol("kCurrentWeight"),j2=Symbol("kIndex"),Hm=Symbol("kWeight"),iX=Symbol("kMaxWeightPerServer"),oX=Symbol("kErrorPenalty");function ojt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(ojt,"getGreatestCommonDivisor");function sjt(t,e){return new njt(t,e)}s(sjt,"defaultFactory");var JCe=class extends ZGt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=sjt,...n}={}){if(super(),this[nX]=n,this[j2]=-1,this[G2]=0,this[iX]=this[nX].maxWeightPerServer||100,this[oX]=this[nX].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new XGt("factory must be a function.");this[ijt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[ZYe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=XYe(e).origin;if(this[Zu].find(i=>i[KCe].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[ZYe](r,Object.assign({},this[nX]));this[ejt](n),n.on("connect",()=>{n[Hm]=Math.min(this[iX],n[Hm]+this[oX])}),n.on("connectionError",()=>{n[Hm]=Math.max(1,n[Hm]-this[oX]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[Hm]=Math.max(1,n[Hm]-this[oX]),this._updateBalancedPoolStats())});for(let i of this[Zu])i[Hm]=this[iX];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[Zu].length;r++)e=ojt(this[Zu][r][Hm],e);this[eKe]=e}removeUpstream(e){let r=XYe(e).origin,n=this[Zu].find(i=>i[KCe].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[tjt](n),this}get upstreams(){return this[Zu].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[KCe].origin)}[rjt](){if(this[Zu].length===0)throw new JGt;if(!this[Zu].find(o=>!o[XF]&&o.closed!==!0&&o.destroyed!==!0)||this[Zu].map(o=>o[XF]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[Zu].findIndex(o=>!o[XF]);for(;n++<this[Zu].length;){this[j2]=(this[j2]+1)%this[Zu].length;let o=this[Zu][this[j2]];if(o[Hm]>this[Zu][i][Hm]&&!o[XF]&&(i=this[j2]),this[j2]===0&&(this[G2]=this[G2]-this[eKe],this[G2]<=0&&(this[G2]=this[iX])),o[Hm]>=this[G2]&&!o[XF])return o}return this[G2]=this[Zu][i][Hm],this[j2]=i,this[Zu][i]}};tKe.exports=JCe});var CB=U((EJn,lKe)=>{"use strict";d();var{InvalidArgumentError:sX}=Mo(),{kClients:$I,kRunning:nKe,kClose:ajt,kDestroy:cjt,kDispatch:ljt,kInterceptors:ujt}=fa(),djt=rB(),fjt=yB(),pjt=YF(),mjt=Pi(),hjt=ZJ(),iKe=Symbol("onConnect"),oKe=Symbol("onDisconnect"),sKe=Symbol("onConnectionError"),gjt=Symbol("maxRedirections"),aKe=Symbol("onDrain"),cKe=Symbol("factory"),XCe=Symbol("options");function Ajt(t,e){return e&&e.connections===1?new pjt(t,e):new fjt(t,e)}s(Ajt,"defaultFactory");var ZCe=class extends djt{static{s(this,"Agent")}constructor({factory:e=Ajt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new sX("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new sX("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new sX("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[ujt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[hjt({maxRedirections:r})],this[XCe]={...mjt.deepClone(i),connect:n},this[XCe].interceptors=i.interceptors?{...i.interceptors}:void 0,this[gjt]=r,this[cKe]=e,this[$I]=new Map,this[aKe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[iKe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[oKe]=(o,a,c)=>{this.emit("disconnect",o,[this,...a],c)},this[sKe]=(o,a,c)=>{this.emit("connectionError",o,[this,...a],c)}}get[nKe](){let e=0;for(let r of this[$I].values())e+=r[nKe];return e}[ljt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new sX("opts.origin must be a non-empty string or URL.");let i=this[$I].get(n);return i||(i=this[cKe](e.origin,this[XCe]).on("drain",this[aKe]).on("connect",this[iKe]).on("disconnect",this[oKe]).on("connectionError",this[sKe]),this[$I].set(n,i)),i.dispatch(e,r)}async[ajt](){let e=[];for(let r of this[$I].values())e.push(r.close());this[$I].clear(),await Promise.all(e)}async[cjt](e){let r=[];for(let n of this[$I].values())r.push(n.destroy(e));this[$I].clear(),await Promise.all(r)}};lKe.exports=ZCe});var r1e=U((bJn,pKe)=>{"use strict";d();var{kProxy:yjt,kClose:Cjt,kDestroy:Ejt,kInterceptors:vjt}=fa(),{URL:ZF}=require("node:url"),xjt=CB(),bjt=yB(),Ijt=rB(),{InvalidArgumentError:lX,RequestAbortedError:Tjt,SecureProxyConnectionError:wjt}=Mo(),uKe=RF(),aX=Symbol("proxy agent"),cX=Symbol("proxy client"),eO=Symbol("proxy headers"),e1e=Symbol("request tls settings"),dKe=Symbol("proxy tls settings"),fKe=Symbol("connect endpoint function");function _jt(t){return t==="https:"?443:80}s(_jt,"defaultProtocolPort");function Sjt(t,e){return new bjt(t,e)}s(Sjt,"defaultFactory");var Rjt=s(()=>{},"noop"),t1e=class extends Ijt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof ZF)&&!e.uri)throw new lX("Proxy uri is mandatory");let{clientFactory:r=Sjt}=e;if(typeof r!="function")throw new lX("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:c,username:l,password:u,hostname:f}=n;if(this[yjt]={uri:i,protocol:c},this[vjt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[e1e]=e.requestTls,this[dKe]=e.proxyTls,this[eO]=e.headers||{},e.auth&&e.token)throw new lX("opts.auth cannot be used in combination with opts.token");e.auth?this[eO]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[eO]["proxy-authorization"]=e.token:l&&u&&(this[eO]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(l)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=uKe({...e.proxyTls});this[fKe]=uKe({...e.requestTls}),this[cX]=r(n,{connect:p}),this[aX]=new xjt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${_jt(m.protocol)}`);try{let{socket:y,statusCode:E}=await this[cX].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[eO],host:m.host},servername:this[dKe]?.servername||f});if(E!==200&&(y.on("error",Rjt).destroy(),h(new Tjt(`Proxy response (${E}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let x;this[e1e]?x=this[e1e].servername:x=m.servername,this[fKe]({...m,servername:x,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new wjt(y)):h(y)}},"connect")})}dispatch(e,r){let n=kjt(e.headers);if(Pjt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new ZF(e.origin);n.host=i}return this[aX].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new ZF(e):e instanceof ZF?e:new ZF(e.uri)}async[Cjt](){await this[aX].close(),await this[cX].close()}async[Ejt](){await this[aX].destroy(),await this[cX].destroy()}};function kjt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(kjt,"buildHeaders");function Pjt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new lX("Proxy-Authorization should be sent in ProxyAgent constructor")}s(Pjt,"throwIfProxyAuthIsSent");pKe.exports=t1e});var CKe=U((wJn,yKe)=>{"use strict";d();var Bjt=rB(),{kClose:Djt,kDestroy:Njt,kClosed:mKe,kDestroyed:hKe,kDispatch:Ljt,kNoProxyAgent:tO,kHttpProxyAgent:zI,kHttpsProxyAgent:V2}=fa(),gKe=r1e(),Mjt=CB(),Fjt={"http:":80,"https:":443},AKe=!1,n1e=class extends Bjt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,AKe||(AKe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[tO]=new Mjt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[zI]=new gKe({...o,uri:a}):this[zI]=this[tO];let c=n??process.env.https_proxy??process.env.HTTPS_PROXY;c?this[V2]=new gKe({...o,uri:c}):this[V2]=this[zI],this.#o()}[Ljt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[Djt](){await this[tO].close(),this[zI][mKe]||await this[zI].close(),this[V2][mKe]||await this[V2].close()}async[Njt](e){await this[tO].destroy(e),this[zI][hKe]||await this[zI].destroy(e),this[V2][hKe]||await this[V2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||Fjt[r]||0,this.#r(n,i)?r==="https:"?this[V2]:this[zI]:this[tO]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};yKe.exports=n1e});var uX=U((RJn,bKe)=>{"use strict";d();var EB=require("node:assert"),{kRetryHandlerDefaultRetry:EKe}=fa(),{RequestRetryError:rO}=Mo(),{isDisturbed:vKe,parseHeaders:Ojt,parseRangeHeader:xKe,wrapRequestBody:Qjt}=Pi();function Ujt(t){let e=Date.now();return new Date(t).getTime()-e}s(Ujt,"calculateRetryAfterHeader");var i1e=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:c,minTimeout:l,timeoutFactor:u,methods:f,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:Qjt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[EKe],retryAfter:m??!0,maxTimeout:c??30*1e3,minTimeout:l??500,timeoutFactor:u??2,maxRetries:a??5,methods:f??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[EKe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:c}=e,{method:l,retryOptions:u}=n,{maxRetries:f,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:E}=u,{counter:x}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(E)&&!E.includes(l)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(x>f){i(e);return}let b=c?.["retry-after"];b&&(b=Number(b),b=Number.isNaN(b)?Ujt(b):b*1e3);let _=b>0?Math.min(b,m):Math.min(p*h**(x-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=Ojt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new rO("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new rO("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let c=xKe(o["content-range"]);if(!c)return this.abort(new rO("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new rO("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:l,size:u,end:f=u-1}=c;return EB(this.start===l,"content-range mismatch"),EB(this.end==null||this.end===f,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let c=xKe(o["content-range"]);if(c==null)return this.handler.onHeaders(e,r,n,i);let{start:l,size:u,end:f=u-1}=c;EB(l!=null&&Number.isFinite(l),"content-range mismatch"),EB(f!=null&&Number.isFinite(f),"invalid content-length"),this.start=l,this.end=f}if(this.end==null){let c=o["content-length"];this.end=c!=null?Number(c)-1:null}return EB(Number.isFinite(this.start)),EB(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new rO("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||vKe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||vKe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};bKe.exports=i1e});var TKe=U((BJn,IKe)=>{"use strict";d();var qjt=_F(),Hjt=uX(),o1e=class extends qjt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new Hjt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};IKe.exports=o1e});var d1e=U((LJn,NKe)=>{"use strict";d();var kKe=require("node:assert"),{Readable:Wjt}=require("node:stream"),{RequestAbortedError:PKe,NotSupportedError:Gjt,InvalidArgumentError:jjt,AbortError:s1e}=Mo(),BKe=Pi(),{ReadableStreamFrom:Vjt}=Pi(),Z0=Symbol("kConsume"),nO=Symbol("kReading"),YI=Symbol("kBody"),wKe=Symbol("kAbort"),DKe=Symbol("kContentType"),_Ke=Symbol("kContentLength"),$jt=s(()=>{},"noop"),a1e=class extends Wjt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[wKe]=r,this[Z0]=null,this[YI]=null,this[DKe]=n,this[_Ke]=i,this[nO]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new PKe),e&&this[wKe](),super.destroy(e)}_destroy(e,r){this[nO]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[nO]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[nO]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[Z0]&&e!==null?(l1e(this[Z0],e),this[nO]?super.push(e):!0):super.push(e)}async text(){return iO(this,"text")}async json(){return iO(this,"json")}async blob(){return iO(this,"blob")}async bytes(){return iO(this,"bytes")}async arrayBuffer(){return iO(this,"arrayBuffer")}async formData(){throw new Gjt}get bodyUsed(){return BKe.isDisturbed(this)}get body(){return this[YI]||(this[YI]=Vjt(this),this[Z0]&&(this[YI].getReader(),kKe(this[YI].locked))),this[YI]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new jjt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[_Ke]>r&&this.destroy(new s1e);let a=s(()=>{this.destroy(n.reason??new s1e)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new s1e):i(null)}).on("error",$jt).on("data",function(c){r-=c.length,r<=0&&this.destroy()}).resume()})}};function zjt(t){return t[YI]&&t[YI].locked===!0||t[Z0]}s(zjt,"isLocked");function Yjt(t){return BKe.isDisturbed(t)||zjt(t)}s(Yjt,"isUnusable");async function iO(t,e){return kKe(!t[Z0]),new Promise((r,n)=>{if(Yjt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[Z0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){u1e(this[Z0],i)}).on("close",function(){this[Z0].body!==null&&u1e(this[Z0],new PKe)}),Kjt(t[Z0])})})}s(iO,"consume");function Kjt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)l1e(t,e.buffer[i])}else for(let r of e.buffer)l1e(t,r);for(e.endEmitted?RKe(this[Z0]):t.stream.on("end",function(){RKe(this[Z0])}),t.stream.resume();t.stream.read()!=null;);}s(Kjt,"consumeStart");function c1e(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(c1e,"chunksDecode");function SKe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(SKe,"chunksConcat");function RKe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(c1e(r,o)):e==="json"?n(JSON.parse(c1e(r,o))):e==="arrayBuffer"?n(SKe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[DKe]})):e==="bytes"&&n(SKe(r,o)),u1e(t)}catch(a){i.destroy(a)}}s(RKe,"consumeEnd");function l1e(t,e){t.length+=e.length,t.body.push(e)}s(l1e,"consumePush");function u1e(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(u1e,"consumeFinish");NKe.exports={Readable:a1e,chunksDecode:c1e}});var f1e=U((OJn,QKe)=>{d();var Jjt=require("node:assert"),{ResponseStatusCodeError:LKe}=Mo(),{chunksDecode:MKe}=d1e(),Xjt=128*1024;async function Zjt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){Jjt(e);let a=[],c=0;try{for await(let p of e)if(a.push(p),c+=p.length,c>Xjt){a=[],c=0;break}}catch{a=[],c=0}let l=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!c){queueMicrotask(()=>t(new LKe(l,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let f;try{FKe(r)?f=JSON.parse(MKe(a,c)):OKe(r)&&(f=MKe(a,c))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new LKe(l,n,o,f)))}s(Zjt,"getResolveErrorBodyCallback");var FKe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),OKe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");QKe.exports={getResolveErrorBodyCallback:Zjt,isContentTypeApplicationJson:FKe,isContentTypeText:OKe}});var HKe=U((qJn,p1e)=>{"use strict";d();var eVt=require("node:assert"),{Readable:tVt}=d1e(),{InvalidArgumentError:vB,RequestAbortedError:UKe}=Mo(),ep=Pi(),{getResolveErrorBodyCallback:rVt}=f1e(),{AsyncResource:nVt}=require("node:async_hooks"),dX=class extends nVt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new vB("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:c,responseHeaders:l,throwOnError:u,highWaterMark:f}=e;try{if(typeof r!="function")throw new vB("invalid callback");if(f&&(typeof f!="number"||f<0))throw new vB("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new vB("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new vB("invalid method");if(c&&typeof c!="function")throw new vB("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw ep.isStream(a)&&ep.destroy(a.on("error",ep.nop),p),p}this.method=i,this.responseHeaders=l||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=c||null,this.throwOnError=u,this.highWaterMark=f,this.signal=n,this.reason=null,this.removeAbortListener=null,ep.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new UKe:this.removeAbortListener=ep.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new UKe,this.res?ep.destroy(this.res.on("error",ep.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}eVt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:c,context:l,responseHeaders:u,highWaterMark:f}=this,p=u==="raw"?ep.parseRawHeaders(r):ep.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?ep.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new tVt({resume:n,abort:c,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:f});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(rVt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:l}))}onData(e){return this.res.push(e)}onComplete(e){ep.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{ep.destroy(r,e)})),i&&(this.body=null,ep.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function qKe(t,e){if(e===void 0)return new Promise((r,n)=>{qKe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new dX(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(qKe,"request");p1e.exports=qKe;p1e.exports.RequestHandler=dX});var oO=U((GJn,jKe)=>{d();var{addAbortListener:iVt}=Pi(),{RequestAbortedError:oVt}=Mo(),xB=Symbol("kListener"),Xy=Symbol("kSignal");function WKe(t){t.abort?t.abort(t[Xy]?.reason):t.reason=t[Xy]?.reason??new oVt,GKe(t)}s(WKe,"abort");function sVt(t,e){if(t.reason=null,t[Xy]=null,t[xB]=null,!!e){if(e.aborted){WKe(t);return}t[Xy]=e,t[xB]=()=>{WKe(t)},iVt(t[Xy],t[xB])}}s(sVt,"addSignal");function GKe(t){t[Xy]&&("removeEventListener"in t[Xy]?t[Xy].removeEventListener("abort",t[xB]):t[Xy].removeListener("abort",t[xB]),t[Xy]=null,t[xB]=null)}s(GKe,"removeSignal");jKe.exports={addSignal:sVt,removeSignal:GKe}});var YKe=U(($Jn,zKe)=>{"use strict";d();var aVt=require("node:assert"),{finished:cVt,PassThrough:lVt}=require("node:stream"),{InvalidArgumentError:bB,InvalidReturnValueError:uVt}=Mo(),Bg=Pi(),{getResolveErrorBodyCallback:dVt}=f1e(),{AsyncResource:fVt}=require("node:async_hooks"),{addSignal:pVt,removeSignal:VKe}=oO(),m1e=class extends fVt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new bB("invalid opts");let{signal:i,method:o,opaque:a,body:c,onInfo:l,responseHeaders:u,throwOnError:f}=e;try{if(typeof n!="function")throw new bB("invalid callback");if(typeof r!="function")throw new bB("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new bB("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new bB("invalid method");if(l&&typeof l!="function")throw new bB("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Bg.isStream(c)&&Bg.destroy(c.on("error",Bg.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=c,this.onInfo=l||null,this.throwOnError=f||!1,Bg.isStream(c)&&c.on("error",p=>{this.onError(p)}),pVt(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}aVt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:c,callback:l,responseHeaders:u}=this,f=u==="raw"?Bg.parseRawHeaders(r):Bg.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:f});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Bg.parseHeaders(r):f)["content-type"];p=new lVt,this.callback=null,this.runInAsyncScope(dVt,null,{callback:l,body:p,contentType:g,statusCode:e,statusMessage:i,headers:f})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:f,opaque:a,context:c}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new uVt("expected Writable");cVt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:E,trailers:x,abort:b}=this;this.res=null,(h||!y.readable)&&Bg.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:E,trailers:x}),h&&b()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;VKe(this),r&&(this.trailers=Bg.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;VKe(this),this.factory=null,r?(this.res=null,Bg.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,Bg.destroy(o,e))}};function $Ke(t,e,r){if(r===void 0)return new Promise((n,i)=>{$Ke.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new m1e(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s($Ke,"stream");zKe.exports=$Ke});var ZKe=U((KJn,XKe)=>{"use strict";d();var{Readable:JKe,Duplex:mVt,PassThrough:hVt}=require("node:stream"),{InvalidArgumentError:sO,InvalidReturnValueError:gVt,RequestAbortedError:h1e}=Mo(),Wm=Pi(),{AsyncResource:AVt}=require("node:async_hooks"),{addSignal:yVt,removeSignal:CVt}=oO(),KKe=require("node:assert"),IB=Symbol("resume"),g1e=class extends JKe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[IB]=null}_read(){let{[IB]:e}=this;e&&(this[IB]=null,e())}_destroy(e,r){this._read(),r(e)}},A1e=class extends JKe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[IB]=e}_read(){this[IB]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new h1e),r(e)}},y1e=class extends AVt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new sO("invalid opts");if(typeof r!="function")throw new sO("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:c}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new sO("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new sO("invalid method");if(a&&typeof a!="function")throw new sO("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=c||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new g1e().on("error",Wm.nop),this.ret=new mVt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:l}=this;l?.resume&&l.resume()},"read"),write:s((l,u,f)=>{let{req:p}=this;p.push(l,u)||p._readableState.destroyed?f():p[IB]=f},"write"),destroy:s((l,u)=>{let{body:f,req:p,res:m,ret:h,abort:g}=this;!l&&!h._readableState.endEmitted&&(l=new h1e),g&&l&&g(),Wm.destroy(f,l),Wm.destroy(p,l),Wm.destroy(m,l),CVt(this),u(l)},"destroy")}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,yVt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}KKe(!i,"pipeline cannot be retried"),KKe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let l=this.responseHeaders==="raw"?Wm.parseRawHeaders(r):Wm.parseHeaders(r);this.onInfo({statusCode:e,headers:l})}return}this.res=new A1e(n);let c;try{this.handler=null;let l=this.responseHeaders==="raw"?Wm.parseRawHeaders(r):Wm.parseHeaders(r);c=this.runInAsyncScope(o,null,{statusCode:e,headers:l,opaque:i,body:this.res,context:a})}catch(l){throw this.res.on("error",Wm.nop),l}if(!c||typeof c.on!="function")throw new gVt("expected Readable");c.on("data",l=>{let{ret:u,body:f}=this;!u.push(l)&&f.pause&&f.pause()}).on("error",l=>{let{ret:u}=this;Wm.destroy(u,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||Wm.destroy(l,new h1e)}),this.body=c}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,Wm.destroy(r,e)}};function EVt(t,e){try{let r=new y1e(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new hVt().destroy(r)}}s(EVt,"pipeline");XKe.exports=EVt});var oJe=U((ZJn,iJe)=>{"use strict";d();var{InvalidArgumentError:C1e,SocketError:vVt}=Mo(),{AsyncResource:xVt}=require("node:async_hooks"),eJe=Pi(),{addSignal:bVt,removeSignal:tJe}=oO(),rJe=require("node:assert"),E1e=class extends xVt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new C1e("invalid opts");if(typeof r!="function")throw new C1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new C1e("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,bVt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}rJe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new vVt("bad upgrade",null)}onUpgrade(e,r,n){rJe(e===101);let{callback:i,opaque:o,context:a}=this;tJe(this),this.callback=null;let c=this.responseHeaders==="raw"?eJe.parseRawHeaders(r):eJe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;tJe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function nJe(t,e){if(e===void 0)return new Promise((r,n)=>{nJe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new E1e(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(nJe,"upgrade");iJe.exports=nJe});var uJe=U((rXn,lJe)=>{"use strict";d();var IVt=require("node:assert"),{AsyncResource:TVt}=require("node:async_hooks"),{InvalidArgumentError:v1e,SocketError:wVt}=Mo(),sJe=Pi(),{addSignal:_Vt,removeSignal:aJe}=oO(),x1e=class extends TVt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new v1e("invalid opts");if(typeof r!="function")throw new v1e("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new v1e("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,_Vt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}IVt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new wVt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;aJe(this),this.callback=null;let c=r;c!=null&&(c=this.responseHeaders==="raw"?sJe.parseRawHeaders(r):sJe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:c,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;aJe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function cJe(t,e){if(e===void 0)return new Promise((r,n)=>{cJe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new x1e(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(cJe,"connect");lJe.exports=cJe});var dJe=U((oXn,TB)=>{"use strict";d();TB.exports.request=HKe();TB.exports.stream=YKe();TB.exports.pipeline=ZKe();TB.exports.upgrade=oJe();TB.exports.connect=uJe()});var I1e=U((aXn,fJe)=>{"use strict";d();var{UndiciError:SVt}=Mo(),b1e=class t extends SVt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};fJe.exports={MockNotMatchedError:b1e}});var wB=U((uXn,pJe)=>{"use strict";d();pJe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var aO=U((fXn,IJe)=>{"use strict";d();var{MockNotMatchedError:$2}=I1e(),{kDispatches:fX,kMockAgent:RVt,kOriginalDispatch:kVt,kOrigin:PVt,kGetNetConnect:BVt}=wB(),{buildURL:DVt}=Pi(),{STATUS_CODES:NVt}=require("node:http"),{types:{isPromise:LVt}}=require("node:util");function FE(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(FE,"matchValue");function hJe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(hJe,"lowerCaseEntries");function gJe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):hJe(t)[e.toLocaleLowerCase()]}s(gJe,"getHeaderByName");function _1e(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(_1e,"buildHeadersFromArray");function AJe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=_1e(e)),t.headers(e?hJe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=gJe(e,r);if(!FE(n,i))return!1}return!0}s(AJe,"matchHeaders");function mJe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(mJe,"safeUrl");function MVt(t,{path:e,method:r,body:n,headers:i}){let o=FE(t.path,e),a=FE(t.method,r),c=typeof t.body<"u"?FE(t.body,n):!0,l=AJe(t,i);return o&&a&&c&&l}s(MVt,"matchKey");function yJe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(yJe,"getResponseData");function CJe(t,e){let r=e.query?DVt(e.path,e.query):e.path,n=typeof r=="string"?mJe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>FE(mJe(o),n));if(i.length===0)throw new $2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>FE(o,e.method)),i.length===0)throw new $2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?FE(o,e.body):!0),i.length===0)throw new $2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>AJe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new $2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(CJe,"getMockDispatch");function FVt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(FVt,"addMockDispatch");function T1e(t,e){let r=t.findIndex(n=>n.consumed?MVt(n,e):!1);r!==-1&&t.splice(r,1)}s(T1e,"deleteMockDispatch");function EJe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(EJe,"buildKey");function w1e(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let c=0;c<o.length;++c)r.push(a,Buffer.from(`${o[c]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(w1e,"generateKeyValues");function vJe(t){return NVt[t]||"unknown"}s(vJe,"getStatusText");async function OVt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(OVt,"getResponse");function xJe(t,e){let r=EJe(t),n=CJe(this[fX],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:c,error:l},delay:u,persist:f}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!f&&p>=m,n.pending=p<m,l!==null)return T1e(this[fX],r),e.onError(l),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[fX])},u):h(this[fX]);function h(y,E=o){let x=Array.isArray(t.headers)?_1e(t.headers):t.headers,b=typeof E=="function"?E({...t,headers:x}):E;if(LVt(b)){b.then(N=>h(y,N));return}let _=yJe(b),k=w1e(a),P=w1e(c);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,vJe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(P),T1e(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(xJe,"mockDispatch");function QVt(){let t=this[RVt],e=this[PVt],r=this[kVt];return s(function(i,o){if(t.isMockActive)try{xJe.call(this,i,o)}catch(a){if(a instanceof $2){let c=t[BVt]();if(c===!1)throw new $2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(bJe(c,e))r.call(this,i,o);else throw new $2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(QVt,"buildMockDispatch");function bJe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>FE(n,r.host)))}s(bJe,"checkNetConnect");function UVt(t){if(t){let{agent:e,...r}=t;return r}}s(UVt,"buildMockOptions");IJe.exports={getResponseData:yJe,getMockDispatch:CJe,addMockDispatch:FVt,deleteMockDispatch:T1e,buildKey:EJe,generateKeyValues:w1e,matchValue:FE,getResponse:OVt,getStatusText:vJe,mockDispatch:xJe,buildMockDispatch:QVt,checkNetConnect:bJe,buildMockOptions:UVt,getHeaderByName:gJe,buildHeadersFromArray:_1e}});var N1e=U((hXn,D1e)=>{"use strict";d();var{getResponseData:qVt,buildKey:HVt,addMockDispatch:S1e}=aO(),{kDispatches:pX,kDispatchKey:mX,kDefaultHeaders:R1e,kDefaultTrailers:k1e,kContentLength:P1e,kMockDispatch:hX}=wB(),{InvalidArgumentError:Zy}=Mo(),{buildURL:WVt}=Pi(),_B=class{static{s(this,"MockScope")}constructor(e){this[hX]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Zy("waitInMs must be a valid integer > 0");return this[hX].delay=e,this}persist(){return this[hX].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Zy("repeatTimes must be a valid integer > 0");return this[hX].times=e,this}},B1e=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new Zy("opts must be an object");if(typeof e.path>"u")throw new Zy("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=WVt(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[mX]=HVt(e),this[pX]=r,this[R1e]={},this[k1e]={},this[P1e]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=qVt(r),o=this[P1e]?{"content-length":i.length}:{},a={...this[R1e],...o,...n.headers},c={...this[k1e],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:c}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Zy("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Zy("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(c=>{let l=e(c);if(typeof l!="object"||l===null)throw new Zy("reply options callback must return an object");let u={data:"",responseOptions:{},...l};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=S1e(this[pX],this[mX],o);return new _B(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=S1e(this[pX],this[mX],n);return new _B(i)}replyWithError(e){if(typeof e>"u")throw new Zy("error must be defined");let r=S1e(this[pX],this[mX],{error:e});return new _B(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new Zy("headers must be defined");return this[R1e]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Zy("trailers must be defined");return this[k1e]=e,this}replyContentLength(){return this[P1e]=!0,this}};D1e.exports.MockInterceptor=B1e;D1e.exports.MockScope=_B});var F1e=U((yXn,PJe)=>{"use strict";d();var{promisify:GVt}=require("node:util"),jVt=YF(),{buildMockDispatch:VVt}=aO(),{kDispatches:TJe,kMockAgent:wJe,kClose:_Je,kOriginalClose:SJe,kOrigin:RJe,kOriginalDispatch:$Vt,kConnected:L1e}=wB(),{MockInterceptor:zVt}=N1e(),kJe=fa(),{InvalidArgumentError:YVt}=Mo(),M1e=class extends jVt{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new YVt("Argument opts.agent must implement Agent");this[wJe]=r.agent,this[RJe]=e,this[TJe]=[],this[L1e]=1,this[$Vt]=this.dispatch,this[SJe]=this.close.bind(this),this.dispatch=VVt.call(this),this.close=this[_Je]}get[kJe.kConnected](){return this[L1e]}intercept(e){return new zVt(e,this[TJe])}async[_Je](){await GVt(this[SJe])(),this[L1e]=0,this[wJe][kJe.kClients].delete(this[RJe])}};PJe.exports=M1e});var U1e=U((vXn,OJe)=>{"use strict";d();var{promisify:KVt}=require("node:util"),JVt=yB(),{buildMockDispatch:XVt}=aO(),{kDispatches:BJe,kMockAgent:DJe,kClose:NJe,kOriginalClose:LJe,kOrigin:MJe,kOriginalDispatch:ZVt,kConnected:O1e}=wB(),{MockInterceptor:e$t}=N1e(),FJe=fa(),{InvalidArgumentError:t$t}=Mo(),Q1e=class extends JVt{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new t$t("Argument opts.agent must implement Agent");this[DJe]=r.agent,this[MJe]=e,this[BJe]=[],this[O1e]=1,this[ZVt]=this.dispatch,this[LJe]=this.close.bind(this),this.dispatch=XVt.call(this),this.close=this[NJe]}get[FJe.kConnected](){return this[O1e]}intercept(e){return new e$t(e,this[BJe])}async[NJe](){await KVt(this[LJe])(),this[O1e]=0,this[DJe][FJe.kClients].delete(this[MJe])}};OJe.exports=Q1e});var UJe=U((TXn,QJe)=>{"use strict";d();var r$t={pronoun:"it",is:"is",was:"was",this:"this"},n$t={pronoun:"they",is:"are",was:"were",this:"these"};QJe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?r$t:n$t,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var HJe=U((RXn,qJe)=>{"use strict";d();var{Transform:i$t}=require("node:stream"),{Console:o$t}=require("node:console"),s$t=process.versions.icu?"\u2705":"Y ",a$t=process.versions.icu?"\u274C":"N ";qJe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new i$t({transform(r,n,i){i(null,r)}}),this.logger=new o$t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:c,timesInvoked:l,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?s$t:a$t,Invocations:l,Remaining:a?1/0:c-l}));return this.logger.table(r),this.transform.read().toString()}}});var VJe=U((BXn,jJe)=>{"use strict";d();var{kClients:z2}=fa(),c$t=CB(),{kAgent:q1e,kMockAgentSet:gX,kMockAgentGet:WJe,kDispatches:H1e,kIsMockActive:AX,kNetConnect:Y2,kGetNetConnect:l$t,kOptions:yX,kFactory:CX}=wB(),u$t=F1e(),d$t=U1e(),{matchValue:f$t,buildMockOptions:p$t}=aO(),{InvalidArgumentError:GJe,UndiciError:m$t}=Mo(),h$t=_F(),g$t=UJe(),A$t=HJe(),W1e=class extends h$t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[Y2]=!0,this[AX]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new GJe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new c$t(e);this[q1e]=r,this[z2]=r[z2],this[yX]=p$t(e)}get(e){let r=this[WJe](e);return r||(r=this[CX](e),this[gX](e,r)),r}dispatch(e,r){return this.get(e.origin),this[q1e].dispatch(e,r)}async close(){await this[q1e].close(),this[z2].clear()}deactivate(){this[AX]=!1}activate(){this[AX]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[Y2])?this[Y2].push(e):this[Y2]=[e];else if(typeof e>"u")this[Y2]=!0;else throw new GJe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[Y2]=!1}get isMockActive(){return this[AX]}[gX](e,r){this[z2].set(e,r)}[CX](e){let r=Object.assign({agent:this},this[yX]);return this[yX]&&this[yX].connections===1?new u$t(e,r):new d$t(e,r)}[WJe](e){let r=this[z2].get(e);if(r)return r;if(typeof e!="string"){let n=this[CX]("http://localhost:9999");return this[gX](e,n),n}for(let[n,i]of Array.from(this[z2]))if(i&&typeof n!="string"&&f$t(n,e)){let o=this[CX](e);return this[gX](e,o),o[H1e]=i[H1e],o}}[l$t](){return this[Y2]}pendingInterceptors(){let e=this[z2];return Array.from(e.entries()).flatMap(([r,n])=>n[H1e].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new A$t}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new g$t("interceptor","interceptors").pluralize(r.length);throw new m$t(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};jJe.exports=W1e});var EX=U((LXn,KJe)=>{"use strict";d();var $Je=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:y$t}=Mo(),C$t=CB();YJe()===void 0&&zJe(new C$t);function zJe(t){if(!t||typeof t.dispatch!="function")throw new y$t("Argument agent must implement Agent");Object.defineProperty(globalThis,$Je,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(zJe,"setGlobalDispatcher");function YJe(){return globalThis[$Je]}s(YJe,"getGlobalDispatcher");KJe.exports={setGlobalDispatcher:zJe,getGlobalDispatcher:YJe}});var vX=U((QXn,JJe)=>{"use strict";d();JJe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var ZJe=U((HXn,XJe)=>{"use strict";d();var E$t=XJ();XJe.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...c}=i;if(!a)return r(i,o);let l=new E$t(r,a,i,o);return r(c,l)},"redirectInterceptor")}});var tXe=U((jXn,eXe)=>{"use strict";d();var v$t=uX();eXe.exports=t=>e=>s(function(n,i){return e(n,new v$t({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var nXe=U((zXn,rXe)=>{"use strict";d();var x$t=Pi(),{InvalidArgumentError:b$t,RequestAbortedError:I$t}=Mo(),T$t=vX(),G1e=class extends T$t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new b$t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=x$t.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new I$t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function w$t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new G1e({maxSize:o},i);return e(n,a)},"Intercept")}s(w$t,"createDumpInterceptor");rXe.exports=w$t});var sXe=U((JXn,oXe)=>{"use strict";d();var{isIP:_$t}=require("node:net"),{lookup:S$t}=require("node:dns"),R$t=vX(),{InvalidArgumentError:SB,InformationalError:k$t}=Mo(),iXe=Math.pow(2,31)-1,j1e=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,c)=>{if(a||c==null||c.length===0){n(a??new k$t("No DNS entries found"));return}this.setRecords(e,c);let l=this.#i.get(e.hostname),u=this.pick(e,l,o.affinity),f;typeof u.port=="number"?f=`:${u.port}`:e.port!==""?f=`:${e.port}`:f="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${f}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let c;typeof a.port=="number"?c=`:${a.port}`:e.port!==""?c=`:${e.port}`:c="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${c}`)}}#n(e,r,n){S$t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let c of o)a.set(`${c.address}:${c.family}`,c);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,c;if(this.dualStack?(n==null&&(a==null||a===iXe?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?c=o[n]:c=o[n===4?6:4]):c=o[n],c==null||c.ips.length===0)return i;c.offset==null||c.offset===iXe?c.offset=0:c.offset++;let l=c.offset%c.ips.length;return i=c.ips[l]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(c.ips.splice(l,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new V1e(this,e,r)}},V1e=class extends R$t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};oXe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new SB("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new SB("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new SB("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new SB("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new SB("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new SB("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new j1e(n);return o=>s(function(c,l){let u=c.origin.constructor===URL?c.origin:new URL(c.origin);return _$t(u.hostname)!==0?o(c,l):(i.runLookup(u,c,(f,p)=>{if(f)return l.onError(f);let m=null;m={...c,servername:u.hostname,origin:p,headers:{host:u.hostname,...c.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:l},c))}),!0)},"dnsInterceptor")}});var K2=U((eZn,pXe)=>{"use strict";d();var{kConstruct:P$t}=fa(),{kEnumerableProperty:RB}=Pi(),{iteratorMixin:B$t,isValidHeaderName:cO,isValidHeaderValue:cXe}=X0(),{webidl:Co}=Au(),$1e=require("node:assert"),xX=require("node:util"),Fc=Symbol("headers map"),tp=Symbol("headers map sorted");function aXe(t){return t===10||t===13||t===9||t===32}s(aXe,"isHTTPWhiteSpaceCharCode");function lXe(t){let e=0,r=t.length;for(;r>e&&aXe(t.charCodeAt(r-1));)--r;for(;r>e&&aXe(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(lXe,"headerValueNormalize");function uXe(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Co.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});z1e(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)z1e(t,r[n],e[r[n]])}else throw Co.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(uXe,"fill");function z1e(t,e,r){if(r=lXe(r),cO(e)){if(!cXe(r))throw Co.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Co.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(fXe(t)==="immutable")throw new TypeError("immutable");return Y1e(t).append(e,r,!1)}s(z1e,"appendHeader");function dXe(t,e){return t[0]<e[0]?-1:1}s(dXe,"compareHeaderName");var bX=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[Fc]=new Map(e[Fc]),this[tp]=e[tp],this.cookies=e.cookies===null?null:[...e.cookies]):(this[Fc]=new Map(e),this[tp]=null)}contains(e,r){return this[Fc].has(r?e:e.toLowerCase())}clear(){this[Fc].clear(),this[tp]=null,this.cookies=null}append(e,r,n){this[tp]=null;let i=n?e:e.toLowerCase(),o=this[Fc].get(i);if(o){let a=i==="cookie"?"; ":", ";this[Fc].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[Fc].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[tp]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[Fc].set(i,{name:e,value:r})}delete(e,r){this[tp]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[Fc].delete(e)}get(e,r){return this[Fc].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[Fc])yield[e,r]}get entries(){let e={};if(this[Fc].size!==0)for(let{name:r,value:n}of this[Fc].values())e[r]=n;return e}rawValues(){return this[Fc].values()}get entriesList(){let e=[];if(this[Fc].size!==0)for(let{0:r,1:{name:n,value:i}}of this[Fc])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[Fc].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[Fc][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],$1e(i[1].value!==null);for(let o=1,a=0,c=0,l=0,u=0,f,p;o<e;++o){for(p=n.next().value,f=r[o]=[p[0],p[1].value],$1e(f[1]!==null),l=0,c=o;l<c;)u=l+(c-l>>1),r[u][0]<=f[0]?l=u+1:c=u;if(o!==u){for(a=o;a>l;)r[a]=r[--a];r[l]=f}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[Fc])r[n++]=[i,o],$1e(o!==null);return r.sort(dXe)}}},Dg=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Co.util.markAsUncloneable(this),e!==P$t&&(this.#t=new bX,this.#e="none",e!==void 0&&(e=Co.converters.HeadersInit(e,"Headers contructor","init"),uXe(this,e)))}append(e,r){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Co.converters.ByteString(e,n,"name"),r=Co.converters.ByteString(r,n,"value"),z1e(this,e,r)}delete(e){if(Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.delete"),e=Co.converters.ByteString(e,"Headers.delete","name"),!cO(e))throw Co.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Co.converters.ByteString(e,r,"name"),!cO(e))throw Co.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Co.converters.ByteString(e,r,"name"),!cO(e))throw Co.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Co.brandCheck(this,t),Co.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Co.converters.ByteString(e,n,"name"),r=Co.converters.ByteString(r,n,"value"),r=lXe(r),cO(e)){if(!cXe(r))throw Co.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Co.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Co.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[tp](){if(this.#t[tp])return this.#t[tp];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[tp]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let c=0;c<n.length;++c)e.push([o,n[c]]);else e.push([o,a])}return this.#t[tp]=e}[xX.inspect.custom](e,r){return r.depth??=e,`Headers ${xX.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:fXe,setHeadersGuard:D$t,getHeadersList:Y1e,setHeadersList:N$t}=Dg;Reflect.deleteProperty(Dg,"getHeadersGuard");Reflect.deleteProperty(Dg,"setHeadersGuard");Reflect.deleteProperty(Dg,"getHeadersList");Reflect.deleteProperty(Dg,"setHeadersList");B$t("Headers",Dg,tp,0,1);Object.defineProperties(Dg.prototype,{append:RB,delete:RB,get:RB,has:RB,set:RB,getSetCookie:RB,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[xX.inspect.custom]:{enumerable:!1}});Co.converters.HeadersInit=function(t,e,r){if(Co.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!xX.types.isProxy(t)&&n===Dg.prototype.entries)try{return Y1e(t).entriesList}catch{}return typeof n=="function"?Co.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Co.converters["record<ByteString, ByteString>"](t,e,r)}throw Co.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};pXe.exports={fill:uXe,compareHeaderName:dXe,Headers:Dg,HeadersList:bX,getHeadersGuard:fXe,setHeadersGuard:D$t,setHeadersList:N$t,getHeadersList:Y1e}});var uO=U((nZn,bXe)=>{"use strict";d();var{Headers:CXe,HeadersList:mXe,fill:L$t,getHeadersGuard:M$t,setHeadersGuard:EXe,setHeadersList:vXe}=K2(),{extractBody:hXe,cloneBody:F$t,mixinBody:O$t,hasFinalizationRegistry:Q$t,streamRegistry:U$t,bodyUnusable:q$t}=dB(),K1e=Pi(),gXe=require("node:util"),{kEnumerableProperty:rp}=K1e,{isValidReasonPhrase:H$t,isCancelled:W$t,isAborted:G$t,isBlobLike:j$t,serializeJavascriptValueToJSONString:V$t,isErrorLike:$$t,isomorphicEncode:z$t,environmentSettingsObject:Y$t}=X0(),{redirectStatusSet:K$t,nullBodyStatus:J$t}=kF(),{kState:qa,kHeaders:OE}=QI(),{webidl:hi}=Au(),{FormData:X$t}=MF(),{URLSerializer:AXe}=Uf(),{kConstruct:TX}=fa(),J1e=require("node:assert"),{types:Z$t}=require("node:util"),ezt=new TextEncoder("utf-8"),J2=class t{static{s(this,"Response")}static error(){return lO(wX(),"immutable")}static json(e,r={}){hi.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=hi.converters.ResponseInit(r));let n=ezt.encode(V$t(e)),i=hXe(n),o=lO(kB({}),"response");return yXe(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){hi.argumentLengthCheck(arguments,1,"Response.redirect"),e=hi.converters.USVString(e),r=hi.converters["unsigned short"](r);let n;try{n=new URL(e,Y$t.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!K$t.has(r))throw new RangeError(`Invalid status code ${r}`);let i=lO(kB({}),"immutable");i[qa].status=r;let o=z$t(AXe(n));return i[qa].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(hi.util.markAsUncloneable(this),e===TX)return;e!==null&&(e=hi.converters.BodyInit(e)),r=hi.converters.ResponseInit(r),this[qa]=kB({}),this[OE]=new CXe(TX),EXe(this[OE],"response"),vXe(this[OE],this[qa].headersList);let n=null;if(e!=null){let[i,o]=hXe(e);n={body:i,type:o}}yXe(this,r,n)}get type(){return hi.brandCheck(this,t),this[qa].type}get url(){hi.brandCheck(this,t);let e=this[qa].urlList,r=e[e.length-1]??null;return r===null?"":AXe(r,!0)}get redirected(){return hi.brandCheck(this,t),this[qa].urlList.length>1}get status(){return hi.brandCheck(this,t),this[qa].status}get ok(){return hi.brandCheck(this,t),this[qa].status>=200&&this[qa].status<=299}get statusText(){return hi.brandCheck(this,t),this[qa].statusText}get headers(){return hi.brandCheck(this,t),this[OE]}get body(){return hi.brandCheck(this,t),this[qa].body?this[qa].body.stream:null}get bodyUsed(){return hi.brandCheck(this,t),!!this[qa].body&&K1e.isDisturbed(this[qa].body.stream)}clone(){if(hi.brandCheck(this,t),q$t(this))throw hi.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=X1e(this[qa]);return lO(e,M$t(this[OE]))}[gXe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${gXe.formatWithOptions(r,n)}`}};O$t(J2);Object.defineProperties(J2.prototype,{type:rp,url:rp,status:rp,ok:rp,redirected:rp,statusText:rp,headers:rp,clone:rp,body:rp,bodyUsed:rp,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(J2,{json:rp,redirect:rp,error:rp});function X1e(t){if(t.internalResponse)return xXe(X1e(t.internalResponse),t.type);let e=kB({...t,body:null});return t.body!=null&&(e.body=F$t(e,t.body)),e}s(X1e,"cloneResponse");function kB(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new mXe(t?.headersList):new mXe,urlList:t?.urlList?[...t.urlList]:[]}}s(kB,"makeResponse");function wX(t){let e=$$t(t);return kB({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(wX,"makeNetworkError");function tzt(t){return t.type==="error"&&t.status===0}s(tzt,"isNetworkError");function IX(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return J1e(!(n in e)),r[n]=i,!0}})}s(IX,"makeFilteredResponse");function xXe(t,e){if(e==="basic")return IX(t,{type:"basic",headersList:t.headersList});if(e==="cors")return IX(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return IX(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return IX(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});J1e(!1)}s(xXe,"filterResponse");function rzt(t,e=null){return J1e(W$t(t)),G$t(t)?wX(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):wX(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(rzt,"makeAppropriateNetworkError");function yXe(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!H$t(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[qa].status=e.status),"statusText"in e&&e.statusText!=null&&(t[qa].statusText=e.statusText),"headers"in e&&e.headers!=null&&L$t(t[OE],e.headers),r){if(J$t.includes(t.status))throw hi.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[qa].body=r.body,r.type!=null&&!t[qa].headersList.contains("content-type",!0)&&t[qa].headersList.append("content-type",r.type,!0)}}s(yXe,"initializeResponse");function lO(t,e){let r=new J2(TX);return r[qa]=t,r[OE]=new CXe(TX),vXe(r[OE],t.headersList),EXe(r[OE],e),Q$t&&t.body?.stream&&U$t.register(r,new WeakRef(t.body.stream)),r}s(lO,"fromInnerResponse");hi.converters.ReadableStream=hi.interfaceConverter(ReadableStream);hi.converters.FormData=hi.interfaceConverter(X$t);hi.converters.URLSearchParams=hi.interfaceConverter(URLSearchParams);hi.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?hi.converters.USVString(t,e,r):j$t(t)?hi.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||Z$t.isArrayBuffer(t)?hi.converters.BufferSource(t,e,r):K1e.isFormDataLike(t)?hi.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?hi.converters.URLSearchParams(t,e,r):hi.converters.DOMString(t,e,r)};hi.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?hi.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:hi.converters.XMLHttpRequestBodyInit(t,e,r)};hi.converters.ResponseInit=hi.dictionaryConverter([{key:"status",converter:hi.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:hi.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:hi.converters.HeadersInit}]);bXe.exports={isNetworkError:tzt,makeNetworkError:wX,makeResponse:kB,makeAppropriateNetworkError:rzt,filterResponse:xXe,Response:J2,cloneResponse:X1e,fromInnerResponse:lO}});var _Xe=U((sZn,wXe)=>{"use strict";d();var{kConnected:IXe,kSize:TXe}=fa(),Z1e=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[IXe]===0&&this.value[TXe]===0?void 0:this.value}},eEe=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[IXe]===0&&e[TXe]===0&&this.finalizer(r)})}unregister(e){}};wXe.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:Z1e,FinalizationRegistry:eEe}):{WeakRef,FinalizationRegistry}}});var PB=U((lZn,HXe)=>{"use strict";d();var{extractBody:nzt,mixinBody:izt,cloneBody:ozt,bodyUnusable:SXe}=dB(),{Headers:FXe,fill:szt,HeadersList:kX,setHeadersGuard:rEe,getHeadersGuard:azt,setHeadersList:OXe,getHeadersList:RXe}=K2(),{FinalizationRegistry:czt}=_Xe()(),SX=Pi(),kXe=require("node:util"),{isValidHTTPToken:lzt,sameOrigin:PXe,environmentSettingsObject:_X}=X0(),{forbiddenMethodsSet:uzt,corsSafeListedMethodsSet:dzt,referrerPolicy:fzt,requestRedirect:pzt,requestMode:mzt,requestCredentials:hzt,requestCache:gzt,requestDuplex:Azt}=kF(),{kEnumerableProperty:Oc,normalizedMethodRecordsBase:yzt,normalizedMethodRecords:Czt}=SX,{kHeaders:np,kSignal:RX,kState:Vs,kDispatcher:tEe}=QI(),{webidl:wn}=Au(),{URLSerializer:Ezt}=Uf(),{kConstruct:PX}=fa(),vzt=require("node:assert"),{getMaxListeners:BXe,setMaxListeners:DXe,getEventListeners:xzt,defaultMaxListeners:NXe}=require("node:events"),bzt=Symbol("abortController"),QXe=new czt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),BX=new WeakMap;function LXe(t){return e;function e(){let r=t.deref();if(r!==void 0){QXe.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=BX.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}BX.delete(r.signal)}}}}s(LXe,"buildAbort");var MXe=!1,KI=class t{static{s(this,"Request")}constructor(e,r={}){if(wn.util.markAsUncloneable(this),e===PX)return;let n="Request constructor";wn.argumentLengthCheck(arguments,1,n),e=wn.converters.RequestInfo(e,n,"input"),r=wn.converters.RequestInit(r,n,"init");let i=null,o=null,a=_X.settingsObject.baseUrl,c=null;if(typeof e=="string"){this[tEe]=r.dispatcher;let x;try{x=new URL(e,a)}catch(b){throw new TypeError("Failed to parse URL from "+e,{cause:b})}if(x.username||x.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=DX({urlList:[x]}),o="cors"}else this[tEe]=r.dispatcher||e[tEe],vzt(e instanceof t),i=e[Vs],c=e[RX];let l=_X.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&PXe(i.window,l)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=DX({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:_X.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let f=Object.keys(r).length!==0;if(f&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let x=r.referrer;if(x==="")i.referrer="no-referrer";else{let b;try{b=new URL(x,a)}catch(_){throw new TypeError(`Referrer "${x}" is not a valid URL.`,{cause:_})}b.protocol==="about:"&&b.hostname==="client"||l&&!PXe(b,_X.settingsObject.baseUrl)?i.referrer="client":i.referrer=b}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw wn.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let x=r.method,b=Czt[x];if(b!==void 0)i.method=b;else{if(!lzt(x))throw new TypeError(`'${x}' is not a valid HTTP method.`);let _=x.toUpperCase();if(uzt.has(_))throw new TypeError(`'${x}' HTTP method is unsupported.`);x=yzt[_]??x,i.method=x}!MXe&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),MXe=!0)}r.signal!==void 0&&(c=r.signal),this[Vs]=i;let m=new AbortController;if(this[RX]=m.signal,c!=null){if(!c||typeof c.aborted!="boolean"||typeof c.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(c.aborted)m.abort(c.reason);else{this[bzt]=m;let x=new WeakRef(m),b=LXe(x);try{(typeof BXe=="function"&&BXe(c)===NXe||xzt(c,"abort").length>=NXe)&&DXe(1500,c)}catch{}SX.addAbortListener(c,b),QXe.register(m,{signal:c,abort:b},b)}}if(this[np]=new FXe(PX),OXe(this[np],i.headersList),rEe(this[np],"request"),p==="no-cors"){if(!dzt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);rEe(this[np],"request-no-cors")}if(f){let x=RXe(this[np]),b=r.headers!==void 0?r.headers:new kX(x);if(x.clear(),b instanceof kX){for(let{name:_,value:k}of b.rawValues())x.append(_,k,!1);x.cookies=b.cookies}else szt(this[np],b)}let h=e instanceof t?e[Vs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[x,b]=nzt(r.body,i.keepalive);g=x,b&&!RXe(this[np]).contains("content-type",!0)&&this[np].append("content-type",b)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let E=y;if(g==null&&h!=null){if(SXe(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let x=new TransformStream;h.stream.pipeThrough(x),E={source:h.source,length:h.length,stream:x.readable}}this[Vs].body=E}get method(){return wn.brandCheck(this,t),this[Vs].method}get url(){return wn.brandCheck(this,t),Ezt(this[Vs].url)}get headers(){return wn.brandCheck(this,t),this[np]}get destination(){return wn.brandCheck(this,t),this[Vs].destination}get referrer(){return wn.brandCheck(this,t),this[Vs].referrer==="no-referrer"?"":this[Vs].referrer==="client"?"about:client":this[Vs].referrer.toString()}get referrerPolicy(){return wn.brandCheck(this,t),this[Vs].referrerPolicy}get mode(){return wn.brandCheck(this,t),this[Vs].mode}get credentials(){return this[Vs].credentials}get cache(){return wn.brandCheck(this,t),this[Vs].cache}get redirect(){return wn.brandCheck(this,t),this[Vs].redirect}get integrity(){return wn.brandCheck(this,t),this[Vs].integrity}get keepalive(){return wn.brandCheck(this,t),this[Vs].keepalive}get isReloadNavigation(){return wn.brandCheck(this,t),this[Vs].reloadNavigation}get isHistoryNavigation(){return wn.brandCheck(this,t),this[Vs].historyNavigation}get signal(){return wn.brandCheck(this,t),this[RX]}get body(){return wn.brandCheck(this,t),this[Vs].body?this[Vs].body.stream:null}get bodyUsed(){return wn.brandCheck(this,t),!!this[Vs].body&&SX.isDisturbed(this[Vs].body.stream)}get duplex(){return wn.brandCheck(this,t),"half"}clone(){if(wn.brandCheck(this,t),SXe(this))throw new TypeError("unusable");let e=UXe(this[Vs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=BX.get(this.signal);n===void 0&&(n=new Set,BX.set(this.signal,n));let i=new WeakRef(r);n.add(i),SX.addAbortListener(r.signal,LXe(i))}return qXe(e,r.signal,azt(this[np]))}[kXe.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${kXe.formatWithOptions(r,n)}`}};izt(KI);function DX(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new kX(t.headersList):new kX}}s(DX,"makeRequest");function UXe(t){let e=DX({...t,body:null});return t.body!=null&&(e.body=ozt(e,t.body)),e}s(UXe,"cloneRequest");function qXe(t,e,r){let n=new KI(PX);return n[Vs]=t,n[RX]=e,n[np]=new FXe(PX),OXe(n[np],t.headersList),rEe(n[np],r),n}s(qXe,"fromInnerRequest");Object.defineProperties(KI.prototype,{method:Oc,url:Oc,headers:Oc,redirect:Oc,clone:Oc,signal:Oc,duplex:Oc,destination:Oc,body:Oc,bodyUsed:Oc,isHistoryNavigation:Oc,isReloadNavigation:Oc,keepalive:Oc,integrity:Oc,cache:Oc,credentials:Oc,attribute:Oc,referrerPolicy:Oc,referrer:Oc,mode:Oc,[Symbol.toStringTag]:{value:"Request",configurable:!0}});wn.converters.Request=wn.interfaceConverter(KI);wn.converters.RequestInfo=function(t,e,r){return typeof t=="string"?wn.converters.USVString(t,e,r):t instanceof KI?wn.converters.Request(t,e,r):wn.converters.USVString(t,e,r)};wn.converters.AbortSignal=wn.interfaceConverter(AbortSignal);wn.converters.RequestInit=wn.dictionaryConverter([{key:"method",converter:wn.converters.ByteString},{key:"headers",converter:wn.converters.HeadersInit},{key:"body",converter:wn.nullableConverter(wn.converters.BodyInit)},{key:"referrer",converter:wn.converters.USVString},{key:"referrerPolicy",converter:wn.converters.DOMString,allowedValues:fzt},{key:"mode",converter:wn.converters.DOMString,allowedValues:mzt},{key:"credentials",converter:wn.converters.DOMString,allowedValues:hzt},{key:"cache",converter:wn.converters.DOMString,allowedValues:gzt},{key:"redirect",converter:wn.converters.DOMString,allowedValues:pzt},{key:"integrity",converter:wn.converters.DOMString},{key:"keepalive",converter:wn.converters.boolean},{key:"signal",converter:wn.nullableConverter(t=>wn.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:wn.converters.any},{key:"duplex",converter:wn.converters.DOMString,allowedValues:Azt},{key:"dispatcher",converter:wn.converters.any}]);HXe.exports={Request:KI,makeRequest:DX,fromInnerRequest:qXe,cloneRequest:UXe}});var fO=U((fZn,nZe)=>{"use strict";d();var{makeNetworkError:Ko,makeAppropriateNetworkError:NX,filterResponse:nEe,makeResponse:LX,fromInnerResponse:Izt}=uO(),{HeadersList:WXe}=K2(),{Request:Tzt,cloneRequest:wzt}=PB(),JI=require("node:zlib"),{bytesMatch:_zt,makePolicyContainer:Szt,clonePolicyContainer:Rzt,requestBadPort:kzt,TAOCheck:Pzt,appendRequestOriginHeader:Bzt,responseLocationURL:Dzt,requestCurrentURL:eC,setRequestReferrerPolicyOnRedirect:Nzt,tryUpgradeRequestToAPotentiallyTrustworthyURL:Lzt,createOpaqueTimingInfo:cEe,appendFetchMetadata:Mzt,corsCheck:Fzt,crossOriginResourcePolicyCheck:Ozt,determineRequestsReferrer:Qzt,coarsenedSharedCurrentTime:dO,createDeferredPromise:Uzt,isBlobLike:qzt,sameOrigin:aEe,isCancelled:X2,isAborted:GXe,isErrorLike:Hzt,fullyReadBody:Wzt,readableStreamClose:Gzt,isomorphicEncode:MX,urlIsLocal:jzt,urlIsHttpHttpsScheme:lEe,urlHasHttpsScheme:Vzt,clampAndCoarsenConnectionTimingInfo:$zt,simpleRangeHeaderValue:zzt,buildContentRange:Yzt,createInflate:Kzt,extractMimeType:Jzt}=X0(),{kState:zXe,kDispatcher:Xzt}=QI(),Z2=require("node:assert"),{safelyExtractBody:uEe,extractBody:jXe}=dB(),{redirectStatusSet:YXe,nullBodyStatus:KXe,safeMethodsSet:Zzt,requestBodyHeader:eYt,subresourceSet:tYt}=kF(),rYt=require("node:events"),{Readable:nYt,pipeline:iYt,finished:oYt}=require("node:stream"),{addAbortListener:sYt,isErrored:aYt,isReadable:FX,bufferToLowerCasedHeaderName:VXe}=Pi(),{dataURLProcessor:cYt,serializeAMimeType:lYt,minimizeSupportedMimeType:uYt}=Uf(),{getGlobalDispatcher:dYt}=EX(),{webidl:fYt}=Au(),{STATUS_CODES:pYt}=require("node:http"),mYt=["GET","HEAD"],hYt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",iEe,OX=class extends rYt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function gYt(t){JXe(t,"fetch")}s(gYt,"handleFetchDone");function AYt(t,e=void 0){fYt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=Uzt(),n;try{n=new Tzt(t,e)}catch(f){return r.reject(f),r.promise}let i=n[zXe];if(n.signal.aborted)return oEe(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,c=!1,l=null;return sYt(n.signal,()=>{c=!0,Z2(l!=null),l.abort(n.signal.reason);let f=a?.deref();oEe(r,i,f,n.signal.reason)}),l=ZXe({request:i,processResponseEndOfBody:gYt,processResponse:s(f=>{if(!c){if(f.aborted){oEe(r,i,a,l.serializedAbortReason);return}if(f.type==="error"){r.reject(new TypeError("fetch failed",{cause:f.error}));return}a=new WeakRef(Izt(f,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[Xzt]}),r.promise}s(AYt,"fetch");function JXe(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;lEe(r)&&n!==null&&(t.timingAllowPassed||(n=cEe({startTime:n.startTime}),i=""),n.endTime=dO(),t.timingInfo=n,XXe(n,r.href,e,globalThis,i))}s(JXe,"finalizeAndReportTiming");var XXe=performance.markResourceTiming;function oEe(t,e,r,n){if(t&&t.reject(n),e.body!=null&&FX(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[zXe];i.body!=null&&FX(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(oEe,"abortFetch");function ZXe({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:c=dYt()}){Z2(c);let l=null,u=!1;t.client!=null&&(l=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let f=dO(u),p=cEe({startTime:f}),m={controller:new OX(c),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:l,crossOriginIsolatedCapability:u};return Z2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=Rzt(t.client.policyContainer):t.policyContainer=Szt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,tYt.has(t.destination),eZe(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(ZXe,"fetching");async function eZe(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!jzt(eC(r))&&(n=Ko("local URLs only")),Lzt(r),kzt(r)==="blocked"&&(n=Ko("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=Qzt(r)),n===null&&(n=await(async()=>{let o=eC(r);return aEe(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await $Xe(t)):r.mode==="same-origin"?Ko('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?Ko('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await $Xe(t)):lEe(eC(r))?(r.responseTainting="cors",await tZe(t)):Ko("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=nEe(n,"basic"):r.responseTainting==="cors"?n=nEe(n,"cors"):r.responseTainting==="opaque"?n=nEe(n,"opaque"):Z2(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=Ko()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||KXe.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(c=>sEe(t,Ko(c)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(c=>{if(!_zt(c,r.integrity)){o("integrity mismatch");return}n.body=uEe(c)[0],sEe(t,n)},"processBody");await Wzt(n.body,a,o)}else sEe(t,n)}s(eZe,"mainFetch");function $Xe(t){if(X2(t)&&t.request.redirectCount===0)return Promise.resolve(NX(t));let{request:e}=t,{protocol:r}=eC(e);switch(r){case"about:":return Promise.resolve(Ko("about scheme is not supported"));case"blob:":{iEe||(iEe=require("node:buffer").resolveObjectURL);let n=eC(e);if(n.search.length!==0)return Promise.resolve(Ko("NetworkError when attempting to fetch resource."));let i=iEe(n.toString());if(e.method!=="GET"||!qzt(i))return Promise.resolve(Ko("invalid method"));let o=LX(),a=i.size,c=MX(`${a}`),l=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),f=zzt(u,!0);if(f==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=f;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Ko("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,l),g=jXe(h);o.body=g[0];let y=MX(`${h.size}`),E=Yzt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",l,!0),o.headersList.set("content-range",E,!0)}else{let u=jXe(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",c,!0),o.headersList.set("content-type",l,!0)}return Promise.resolve(o)}case"data:":{let n=eC(e),i=cYt(n);if(i==="failure")return Promise.resolve(Ko("failed to fetch the data URL"));let o=lYt(i.mimeType);return Promise.resolve(LX({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:uEe(i.body)[0]}))}case"file:":return Promise.resolve(Ko("not implemented... yet..."));case"http:":case"https:":return tZe(t).catch(n=>Ko(n));default:return Promise.resolve(Ko("unknown scheme"))}}s($Xe,"schemeFetch");function yYt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(yYt,"finalizeResponse");function sEe(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let c=e.cacheState,l=e.bodyInfo;e.timingAllowPassed||(r=cEe(r),c="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let f=Jzt(e.headersList);f!=="failure"&&(l.contentType=uYt(f))}t.request.initiatorType!=null&&XXe(r,t.request.url.href,t.request.initiatorType,globalThis,c,l,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():oYt(i.body.stream,()=>{n()})}s(sEe,"fetchFinale");async function tZe(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await rZe(t),e.responseTainting==="cors"&&Fzt(e,r)==="failure")return Ko("cors failure");Pzt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&Ozt(e.origin,e.client,e.destination,n)==="blocked"?Ko("blocked"):(YXe.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=Ko("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await CYt(t,r):Z2(!1)),r.timingInfo=i,r)}s(tZe,"httpFetch");function CYt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=Dzt(n,eC(r).hash),i==null)return e}catch(a){return Promise.resolve(Ko(a))}if(!lEe(i))return Promise.resolve(Ko("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Ko("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!aEe(r,i))return Promise.resolve(Ko('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Ko('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Ko());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!mYt.includes(r.method)){r.method="GET",r.body=null;for(let a of eYt)r.headersList.delete(a)}aEe(eC(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Z2(r.body.source!=null),r.body=uEe(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=dO(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),Nzt(r,n),eZe(t,!0)}s(CYt,"httpRedirectFetch");async function rZe(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,c=null,l=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=wzt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",f=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),f!=null&&(p=MX(`${f}`)),p!=null&&o.headersList.append("content-length",p,!0),f!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",MX(o.referrer.href),!0),Bzt(o),Mzt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",hYt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(Vzt(eC(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),c==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Ko("only if cached");let m=await EYt(i,u,r);!Zzt.has(o.method)&&m.status>=200&&m.status<=399,l&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?Ko():X2(t)?NX(t):Ko("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(X2(t))return NX(t);t.controller.connection.destroy(),a=await rZe(t,e,!0)}return a}s(rZe,"httpNetworkOrCacheFetch");async function EYt(t,e=!1,r=!1){Z2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let c=r?"yes":"no";n.mode;let l=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(x){X2(t)||(yield x,t.processRequestBodyChunkLength?.(x.byteLength))},"processBodyChunk"),y=s(()=>{X2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),E=s(x=>{X2(t)||(x.name==="AbortError"?t.controller.abort():t.controller.terminate(x))},"processBodyError");l=async function*(){try{for await(let x of n.body.stream)yield*g(x);y()}catch(x){E(x)}}()}try{let{body:g,status:y,statusText:E,headersList:x,socket:b}=await h({body:l});if(b)i=LX({status:y,statusText:E,headersList:x,socket:b});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=LX({status:y,statusText:E,headersList:x})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),NX(t,g)):Ko(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),f=s(g=>{X2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await f(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:x,value:b}=await t.controller.next();if(GXe(t))break;g=x?void 0:b}catch(x){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=x,y=!0)}if(g===void 0){Gzt(t.controller.controller),yYt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let E=new Uint8Array(g);if(E.byteLength&&t.controller.controller.enqueue(E),aYt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){GXe(t)?(i.aborted=!0,FX(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):FX(p)&&t.controller.controller.error(new TypeError("terminated",{cause:Hzt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=eC(n),E=t.controller.dispatcher;return new Promise((x,b)=>E.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:E.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=$zt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=dO(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=dO(t.crossOriginIsolatedCapability)},onHeaders(_,k,P,N){if(_<200)return;let M=[],J="",pe=new WXe;for(let ie=0;ie<k.length;ie+=2)pe.append(VXe(k[ie]),k[ie+1].toString("latin1"),!0);let Y=pe.get("content-encoding",!0);Y&&(M=Y.toLowerCase().split(",").map(ie=>ie.trim())),J=pe.get("location",!0),this.body=new nYt({read:P});let G=[],H=J&&n.redirect==="follow"&&YXe.has(_);if(M.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!KXe.includes(_)&&!H)for(let ie=M.length-1;ie>=0;--ie){let V=M[ie];if(V==="x-gzip"||V==="gzip")G.push(JI.createGunzip({flush:JI.constants.Z_SYNC_FLUSH,finishFlush:JI.constants.Z_SYNC_FLUSH}));else if(V==="deflate")G.push(Kzt({flush:JI.constants.Z_SYNC_FLUSH,finishFlush:JI.constants.Z_SYNC_FLUSH}));else if(V==="br")G.push(JI.createBrotliDecompress({flush:JI.constants.BROTLI_OPERATION_FLUSH,finishFlush:JI.constants.BROTLI_OPERATION_FLUSH}));else{G.length=0;break}}let ce=this.onError.bind(this);return x({status:_,statusText:N,headersList:pe,body:G.length?iYt(this.body,...G,ie=>{ie&&this.onError(ie)}).on("error",ce):this.body.on("error",ce)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),b(_)},onUpgrade(_,k,P){if(_!==101)return;let N=new WXe;for(let M=0;M<k.length;M+=2)N.append(VXe(k[M]),k[M+1].toString("latin1"),!0);return x({status:_,statusText:pYt[_],headersList:N,socket:P}),!0}}))}s(h,"dispatch")}s(EYt,"httpNetworkFetch");nZe.exports={fetch:AYt,Fetch:OX,fetching:ZXe,finalizeAndReportTiming:JXe}});var dEe=U((hZn,iZe)=>{"use strict";d();iZe.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var sZe=U((AZn,oZe)=>{"use strict";d();var{webidl:ip}=Au(),QX=Symbol("ProgressEvent state"),fEe=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=ip.converters.DOMString(e,"ProgressEvent constructor","type"),r=ip.converters.ProgressEventInit(r??{}),super(e,r),this[QX]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return ip.brandCheck(this,t),this[QX].lengthComputable}get loaded(){return ip.brandCheck(this,t),this[QX].loaded}get total(){return ip.brandCheck(this,t),this[QX].total}};ip.converters.ProgressEventInit=ip.dictionaryConverter([{key:"lengthComputable",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:ip.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:ip.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);oZe.exports={ProgressEvent:fEe}});var cZe=U((EZn,aZe)=>{"use strict";d();function vYt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(vYt,"getEncoding");aZe.exports={getEncoding:vYt}});var gZe=U((bZn,hZe)=>{"use strict";d();var{kState:BB,kError:pEe,kResult:lZe,kAborted:pO,kLastProgressEventFired:mEe}=dEe(),{ProgressEvent:xYt}=sZe(),{getEncoding:uZe}=cZe(),{serializeAMimeType:bYt,parseMIMEType:dZe}=Uf(),{types:IYt}=require("node:util"),{StringDecoder:fZe}=require("string_decoder"),{btoa:pZe}=require("node:buffer"),TYt={enumerable:!0,writable:!1,configurable:!1};function wYt(t,e,r,n){if(t[BB]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[BB]="loading",t[lZe]=null,t[pEe]=null;let o=e.stream().getReader(),a=[],c=o.read(),l=!0;(async()=>{for(;!t[pO];)try{let{done:u,value:f}=await c;if(l&&!t[pO]&&queueMicrotask(()=>{XI("loadstart",t)}),l=!1,!u&&IYt.isUint8Array(f))a.push(f),(t[mEe]===void 0||Date.now()-t[mEe]>=50)&&!t[pO]&&(t[mEe]=Date.now(),queueMicrotask(()=>{XI("progress",t)})),c=o.read();else if(u){queueMicrotask(()=>{t[BB]="done";try{let p=_Yt(a,r,e.type,n);if(t[pO])return;t[lZe]=p,XI("load",t)}catch(p){t[pEe]=p,XI("error",t)}t[BB]!=="loading"&&XI("loadend",t)});break}}catch(u){if(t[pO])return;queueMicrotask(()=>{t[BB]="done",t[pEe]=u,XI("error",t),t[BB]!=="loading"&&XI("loadend",t)});break}})()}s(wYt,"readOperation");function XI(t,e){let r=new xYt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(XI,"fireAProgressEvent");function _Yt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=dZe(r||"application/octet-stream");o!=="failure"&&(i+=bYt(o)),i+=";base64,";let a=new fZe("latin1");for(let c of t)i+=pZe(a.write(c));return i+=pZe(a.end()),i}case"Text":{let i="failure";if(n&&(i=uZe(n)),i==="failure"&&r){let o=dZe(r);o!=="failure"&&(i=uZe(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),SYt(t,i)}case"ArrayBuffer":return mZe(t).buffer;case"BinaryString":{let i="",o=new fZe("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(_Yt,"packageData");function SYt(t,e){let r=mZe(t),n=RYt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(SYt,"decode");function RYt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(RYt,"BOMSniffing");function mZe(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(mZe,"combineByteSequences");hZe.exports={staticPropertyDescriptors:TYt,readOperation:wYt,fireAProgressEvent:XI}});var EZe=U((wZn,CZe)=>{"use strict";d();var{staticPropertyDescriptors:DB,readOperation:UX,fireAProgressEvent:AZe}=gZe(),{kState:eR,kError:yZe,kResult:qX,kEvents:Fo,kAborted:kYt}=dEe(),{webidl:is}=Au(),{kEnumerableProperty:Wf}=Pi(),Ng=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[eR]="empty",this[qX]=null,this[yZe]=null,this[Fo]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=is.converters.Blob(e,{strict:!1}),UX(this,e,"ArrayBuffer")}readAsBinaryString(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=is.converters.Blob(e,{strict:!1}),UX(this,e,"BinaryString")}readAsText(e,r=void 0){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=is.converters.Blob(e,{strict:!1}),r!==void 0&&(r=is.converters.DOMString(r,"FileReader.readAsText","encoding")),UX(this,e,"Text",r)}readAsDataURL(e){is.brandCheck(this,t),is.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=is.converters.Blob(e,{strict:!1}),UX(this,e,"DataURL")}abort(){if(this[eR]==="empty"||this[eR]==="done"){this[qX]=null;return}this[eR]==="loading"&&(this[eR]="done",this[qX]=null),this[kYt]=!0,AZe("abort",this),this[eR]!=="loading"&&AZe("loadend",this)}get readyState(){switch(is.brandCheck(this,t),this[eR]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return is.brandCheck(this,t),this[qX]}get error(){return is.brandCheck(this,t),this[yZe]}get onloadend(){return is.brandCheck(this,t),this[Fo].loadend}set onloadend(e){is.brandCheck(this,t),this[Fo].loadend&&this.removeEventListener("loadend",this[Fo].loadend),typeof e=="function"?(this[Fo].loadend=e,this.addEventListener("loadend",e)):this[Fo].loadend=null}get onerror(){return is.brandCheck(this,t),this[Fo].error}set onerror(e){is.brandCheck(this,t),this[Fo].error&&this.removeEventListener("error",this[Fo].error),typeof e=="function"?(this[Fo].error=e,this.addEventListener("error",e)):this[Fo].error=null}get onloadstart(){return is.brandCheck(this,t),this[Fo].loadstart}set onloadstart(e){is.brandCheck(this,t),this[Fo].loadstart&&this.removeEventListener("loadstart",this[Fo].loadstart),typeof e=="function"?(this[Fo].loadstart=e,this.addEventListener("loadstart",e)):this[Fo].loadstart=null}get onprogress(){return is.brandCheck(this,t),this[Fo].progress}set onprogress(e){is.brandCheck(this,t),this[Fo].progress&&this.removeEventListener("progress",this[Fo].progress),typeof e=="function"?(this[Fo].progress=e,this.addEventListener("progress",e)):this[Fo].progress=null}get onload(){return is.brandCheck(this,t),this[Fo].load}set onload(e){is.brandCheck(this,t),this[Fo].load&&this.removeEventListener("load",this[Fo].load),typeof e=="function"?(this[Fo].load=e,this.addEventListener("load",e)):this[Fo].load=null}get onabort(){return is.brandCheck(this,t),this[Fo].abort}set onabort(e){is.brandCheck(this,t),this[Fo].abort&&this.removeEventListener("abort",this[Fo].abort),typeof e=="function"?(this[Fo].abort=e,this.addEventListener("abort",e)):this[Fo].abort=null}};Ng.EMPTY=Ng.prototype.EMPTY=0;Ng.LOADING=Ng.prototype.LOADING=1;Ng.DONE=Ng.prototype.DONE=2;Object.defineProperties(Ng.prototype,{EMPTY:DB,LOADING:DB,DONE:DB,readAsArrayBuffer:Wf,readAsBinaryString:Wf,readAsText:Wf,readAsDataURL:Wf,abort:Wf,readyState:Wf,result:Wf,error:Wf,onloadstart:Wf,onprogress:Wf,onload:Wf,onabort:Wf,onerror:Wf,onloadend:Wf,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Ng,{EMPTY:DB,LOADING:DB,DONE:DB});CZe.exports={FileReader:Ng}});var HX=U((RZn,vZe)=>{"use strict";d();vZe.exports={kConstruct:fa().kConstruct}});var IZe=U((PZn,bZe)=>{"use strict";d();var PYt=require("node:assert"),{URLSerializer:xZe}=Uf(),{isValidHeaderName:BYt}=X0();function DYt(t,e,r=!1){let n=xZe(t,r),i=xZe(e,r);return n===i}s(DYt,"urlEquals");function NYt(t){PYt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),BYt(r)&&e.push(r);return e}s(NYt,"getFieldValues");bZe.exports={urlEquals:DYt,getFieldValues:NYt}});var _Ze=U((NZn,wZe)=>{"use strict";d();var{kConstruct:LYt}=HX(),{urlEquals:MYt,getFieldValues:hEe}=IZe(),{kEnumerableProperty:tR,isDisturbed:FYt}=Pi(),{webidl:on}=Au(),{Response:OYt,cloneResponse:QYt,fromInnerResponse:UYt}=uO(),{Request:QE,fromInnerRequest:qYt}=PB(),{kState:Lg}=QI(),{fetching:HYt}=fO(),{urlIsHttpHttpsScheme:WX,createDeferredPromise:NB,readAllBytes:WYt}=X0(),gEe=require("node:assert"),GX=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==LYt&&on.illegalConstructor(),on.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){on.brandCheck(this,t);let n="Cache.match";on.argumentLengthCheck(arguments,1,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){on.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=on.converters.RequestInfo(e,n,"request")),r=on.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){on.brandCheck(this,t);let r="Cache.add";on.argumentLengthCheck(arguments,1,r),e=on.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){on.brandCheck(this,t);let r="Cache.addAll";on.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw on.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=on.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Lg];if(!WX(h.url)||h.method!=="GET")throw on.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new QE(m)[Lg];if(!WX(h.url))throw on.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=NB();o.push(HYt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(on.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let E=hEe(y.headersList.get("vary"));for(let x of E)if(x==="*"){g.reject(on.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let b of o)b.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let c=await Promise.all(n),l=[],u=0;for(let m of c){let h={type:"put",request:i[u],response:m};l.push(h),u++}let f=NB(),p=null;try{this.#t(l)}catch(m){p=m}return queueMicrotask(()=>{p===null?f.resolve(void 0):f.reject(p)}),f.promise}async put(e,r){on.brandCheck(this,t);let n="Cache.put";on.argumentLengthCheck(arguments,2,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.Response(r,n,"response");let i=null;if(e instanceof QE?i=e[Lg]:i=new QE(e)[Lg],!WX(i.url)||i.method!=="GET")throw on.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[Lg];if(o.status===206)throw on.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=hEe(o.headersList.get("vary"));for(let g of h)if(g==="*")throw on.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(FYt(o.body.stream)||o.body.stream.locked))throw on.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=QYt(o),c=NB();if(o.body!=null){let g=o.body.stream.getReader();WYt(g).then(c.resolve,c.reject)}else c.resolve(void 0);let l=[],u={type:"put",request:i,response:a};l.push(u);let f=await c.promise;a.body!=null&&(a.body.source=f);let p=NB(),m=null;try{this.#t(l)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){on.brandCheck(this,t);let n="Cache.delete";on.argumentLengthCheck(arguments,1,n),e=on.converters.RequestInfo(e,n,"request"),r=on.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof QE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return!1}else gEe(typeof e=="string"),i=new QE(e)[Lg];let o=[],a={type:"delete",request:i,options:r};o.push(a);let c=NB(),l=null,u;try{u=this.#t(o)}catch(f){l=f}return queueMicrotask(()=>{l===null?c.resolve(!!u?.length):c.reject(l)}),c.promise}async keys(e=void 0,r={}){on.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=on.converters.RequestInfo(e,n,"request")),r=on.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof QE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new QE(e)[Lg]);let o=NB(),a=[];if(e===void 0)for(let c of this.#e)a.push(c[0]);else{let c=this.#i(i,r);for(let l of c)a.push(l[0])}return queueMicrotask(()=>{let c=[];for(let l of a){let u=qYt(l,new AbortController().signal,"immutable");c.push(u)}o.resolve(Object.freeze(c))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw on.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let c;if(a.type==="delete"){if(c=this.#i(a.request,a.options),c.length===0)return[];for(let l of c){let u=r.indexOf(l);gEe(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=a.request;if(!WX(l.url))throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw on.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});c=this.#i(a.request);for(let u of c){let f=r.indexOf(u);gEe(f!==-1),r.splice(f,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[c,l]=a;this.#n(e,c,l,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!MYt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let c=hEe(n.headersList.get("vary"));for(let l of c){if(l==="*")return!1;let u=r.headersList.get(l),f=e.headersList.get(l);if(u!==f)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof QE){if(i=e[Lg],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new QE(e)[Lg]);let o=[];if(e===void 0)for(let c of this.#e)o.push(c[1]);else{let c=this.#i(i,r);for(let l of c)o.push(l[1])}let a=[];for(let c of o){let l=UYt(c,"immutable");if(a.push(l.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(GX.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:tR,matchAll:tR,add:tR,addAll:tR,put:tR,delete:tR,keys:tR});var TZe=[{key:"ignoreSearch",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:on.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];on.converters.CacheQueryOptions=on.dictionaryConverter(TZe);on.converters.MultiCacheQueryOptions=on.dictionaryConverter([...TZe,{key:"cacheName",converter:on.converters.DOMString}]);on.converters.Response=on.interfaceConverter(OYt);on.converters["sequence<RequestInfo>"]=on.sequenceConverter(on.converters.RequestInfo);wZe.exports={Cache:GX}});var RZe=U((FZn,SZe)=>{"use strict";d();var{kConstruct:mO}=HX(),{Cache:jX}=_Ze(),{webidl:ed}=Au(),{kEnumerableProperty:hO}=Pi(),VX=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==mO&&ed.illegalConstructor(),ed.util.markAsUncloneable(this)}async match(e,r={}){if(ed.brandCheck(this,t),ed.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=ed.converters.RequestInfo(e),r=ed.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new jX(mO,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new jX(mO,n).match(e,r);if(o!==void 0)return o}}async has(e){ed.brandCheck(this,t);let r="CacheStorage.has";return ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){ed.brandCheck(this,t);let r="CacheStorage.open";if(ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new jX(mO,i)}let n=[];return this.#e.set(e,n),new jX(mO,n)}async delete(e){ed.brandCheck(this,t);let r="CacheStorage.delete";return ed.argumentLengthCheck(arguments,1,r),e=ed.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return ed.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(VX.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:hO,has:hO,open:hO,delete:hO,keys:hO});SZe.exports={CacheStorage:VX}});var PZe=U((UZn,kZe)=>{"use strict";d();kZe.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var AEe=U((HZn,MZe)=>{"use strict";d();function GYt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(GYt,"isCTLExcludingHtab");function BZe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(BZe,"validateCookieName");function DZe(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(DZe,"validateCookieValue");function NZe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(NZe,"validateCookiePath");function jYt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(jYt,"validateCookieDomain");var VYt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$Yt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$X=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function LZe(t){return typeof t=="number"&&(t=new Date(t)),`${VYt[t.getUTCDay()]}, ${$X[t.getUTCDate()]} ${$Yt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${$X[t.getUTCHours()]}:${$X[t.getUTCMinutes()]}:${$X[t.getUTCSeconds()]} GMT`}s(LZe,"toIMFDate");function zYt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(zYt,"validateCookieMaxAge");function YYt(t){if(t.name.length===0)return null;BZe(t.name),DZe(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(zYt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(jYt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(NZe(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${LZe(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(YYt,"stringify");MZe.exports={isCTLExcludingHtab:GYt,validateCookieName:BZe,validateCookiePath:NZe,validateCookieValue:DZe,toIMFDate:LZe,stringify:YYt}});var OZe=U((jZn,FZe)=>{"use strict";d();var{maxNameValuePairSize:KYt,maxAttributeValueSize:JYt}=PZe(),{isCTLExcludingHtab:XYt}=AEe(),{collectASequenceOfCodePointsFast:zX}=Uf(),ZYt=require("node:assert");function eKt(t){if(XYt(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=zX(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=zX("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>KYt?null:{name:n,value:i,...LB(r)}}s(eKt,"parseSetCookie");function LB(t,e={}){if(t.length===0)return e;ZYt(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=zX(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=zX("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>JYt)return LB(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return LB(t,e);let c=Number(i);e.maxAge=c}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",c=i.toLowerCase();c.includes("none")&&(a="None"),c.includes("strict")&&(a="Strict"),c.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return LB(t,e)}s(LB,"parseUnparsedAttributes");FZe.exports={parseSetCookie:eKt,parseUnparsedAttributes:LB}});var qZe=U((zZn,UZe)=>{"use strict";d();var{parseSetCookie:tKt}=OZe(),{stringify:rKt}=AEe(),{webidl:Zi}=Au(),{Headers:YX}=K2();function nKt(t){Zi.argumentLengthCheck(arguments,1,"getCookies"),Zi.brandCheck(t,YX,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(nKt,"getCookies");function iKt(t,e,r){Zi.brandCheck(t,YX,{strict:!1});let n="deleteCookie";Zi.argumentLengthCheck(arguments,2,n),e=Zi.converters.DOMString(e,n,"name"),r=Zi.converters.DeleteCookieAttributes(r),QZe(t,{name:e,value:"",expires:new Date(0),...r})}s(iKt,"deleteCookie");function oKt(t){Zi.argumentLengthCheck(arguments,1,"getSetCookies"),Zi.brandCheck(t,YX,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>tKt(r)):[]}s(oKt,"getSetCookies");function QZe(t,e){Zi.argumentLengthCheck(arguments,2,"setCookie"),Zi.brandCheck(t,YX,{strict:!1}),e=Zi.converters.Cookie(e);let r=rKt(e);r&&t.append("Set-Cookie",r)}s(QZe,"setCookie");Zi.converters.DeleteCookieAttributes=Zi.dictionaryConverter([{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Zi.converters.Cookie=Zi.dictionaryConverter([{converter:Zi.converters.DOMString,key:"name"},{converter:Zi.converters.DOMString,key:"value"},{converter:Zi.nullableConverter(t=>typeof t=="number"?Zi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.nullableConverter(Zi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Zi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Zi.sequenceConverter(Zi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);UZe.exports={getCookies:nKt,deleteCookie:iKt,getSetCookies:oKt,setCookie:QZe}});var FB=U((JZn,WZe)=>{"use strict";d();var{webidl:Jr}=Au(),{kEnumerableProperty:Gf}=Pi(),{kConstruct:HZe}=fa(),{MessagePort:sKt}=require("node:worker_threads"),MB=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===HZe){super(arguments[1],arguments[2]),Jr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";Jr.argumentLengthCheck(arguments,1,n),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,Jr.util.markAsUncloneable(this)}get data(){return Jr.brandCheck(this,t),this.#e.data}get origin(){return Jr.brandCheck(this,t),this.#e.origin}get lastEventId(){return Jr.brandCheck(this,t),this.#e.lastEventId}get source(){return Jr.brandCheck(this,t),this.#e.source}get ports(){return Jr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",c=null,l=[]){return Jr.brandCheck(this,t),Jr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:c,ports:l})}static createFastMessageEvent(e,r){let n=new t(HZe,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:aKt}=MB;delete MB.createFastMessageEvent;var KX=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";Jr.argumentLengthCheck(arguments,1,n),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.CloseEventInit(r),super(e,r),this.#e=r,Jr.util.markAsUncloneable(this)}get wasClean(){return Jr.brandCheck(this,t),this.#e.wasClean}get code(){return Jr.brandCheck(this,t),this.#e.code}get reason(){return Jr.brandCheck(this,t),this.#e.reason}},JX=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";Jr.argumentLengthCheck(arguments,1,n),super(e,r),Jr.util.markAsUncloneable(this),e=Jr.converters.DOMString(e,n,"type"),r=Jr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return Jr.brandCheck(this,t),this.#e.message}get filename(){return Jr.brandCheck(this,t),this.#e.filename}get lineno(){return Jr.brandCheck(this,t),this.#e.lineno}get colno(){return Jr.brandCheck(this,t),this.#e.colno}get error(){return Jr.brandCheck(this,t),this.#e.error}};Object.defineProperties(MB.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Gf,origin:Gf,lastEventId:Gf,source:Gf,ports:Gf,initMessageEvent:Gf});Object.defineProperties(KX.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Gf,code:Gf,wasClean:Gf});Object.defineProperties(JX.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Gf,filename:Gf,lineno:Gf,colno:Gf,error:Gf});Jr.converters.MessagePort=Jr.interfaceConverter(sKt);Jr.converters["sequence<MessagePort>"]=Jr.sequenceConverter(Jr.converters.MessagePort);var yEe=[{key:"bubbles",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Jr.converters.MessageEventInit=Jr.dictionaryConverter([...yEe,{key:"data",converter:Jr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:Jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:Jr.nullableConverter(Jr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:Jr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);Jr.converters.CloseEventInit=Jr.dictionaryConverter([...yEe,{key:"wasClean",converter:Jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:Jr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);Jr.converters.ErrorEventInit=Jr.dictionaryConverter([...yEe,{key:"message",converter:Jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:Jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:Jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:Jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:Jr.converters.any}]);WZe.exports={MessageEvent:MB,CloseEvent:KX,ErrorEvent:JX,createFastMessageEvent:aKt}});var rR=U((eei,GZe)=>{"use strict";d();var cKt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",lKt={enumerable:!0,writable:!1,configurable:!1},uKt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},dKt={NOT_SENT:0,PROCESSING:1,SENT:2},fKt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},pKt=2**16-1,mKt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},hKt=Buffer.allocUnsafe(0),gKt={string:1,typedArray:2,arrayBuffer:3,blob:4};GZe.exports={uid:cKt,sentCloseFrameState:dKt,staticPropertyDescriptors:lKt,states:uKt,opcodes:fKt,maxUnsigned16Bit:pKt,parserStates:mKt,emptyBuffer:hKt,sendHints:gKt}});var gO=U((rei,jZe)=>{"use strict";d();jZe.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var CO=U((iei,eet)=>{"use strict";d();var{kReadyState:AO,kController:AKt,kResponse:yKt,kBinaryType:CKt,kWebSocketURL:EKt}=gO(),{states:yO,opcodes:ZI}=rR(),{ErrorEvent:vKt,createFastMessageEvent:xKt}=FB(),{isUtf8:bKt}=require("node:buffer"),{collectASequenceOfCodePointsFast:IKt,removeHTTPWhitespace:VZe}=Uf();function TKt(t){return t[AO]===yO.CONNECTING}s(TKt,"isConnecting");function wKt(t){return t[AO]===yO.OPEN}s(wKt,"isEstablished");function _Kt(t){return t[AO]===yO.CLOSING}s(_Kt,"isClosing");function SKt(t){return t[AO]===yO.CLOSED}s(SKt,"isClosed");function CEe(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(CEe,"fireEvent");function RKt(t,e,r){if(t[AO]!==yO.OPEN)return;let n;if(e===ZI.TEXT)try{n=ZZe(r)}catch{zZe(t,"Received invalid UTF-8 in text frame.");return}else e===ZI.BINARY&&(t[CKt]==="blob"?n=new Blob([r]):n=kKt(r));CEe("message",t,xKt,{origin:t[EKt].origin,data:n})}s(RKt,"websocketMessageReceived");function kKt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(kKt,"toArrayBuffer");function PKt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(PKt,"isValidSubprotocol");function BKt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(BKt,"isValidStatusCode");function zZe(t,e){let{[AKt]:r,[yKt]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&CEe("error",t,(i,o)=>new vKt(i,o),{error:new Error(e),message:e})}s(zZe,"failWebsocketConnection");function YZe(t){return t===ZI.CLOSE||t===ZI.PING||t===ZI.PONG}s(YZe,"isControlFrame");function KZe(t){return t===ZI.CONTINUATION}s(KZe,"isContinuationFrame");function JZe(t){return t===ZI.TEXT||t===ZI.BINARY}s(JZe,"isTextBinaryFrame");function DKt(t){return JZe(t)||KZe(t)||YZe(t)}s(DKt,"isValidOpcode");function NKt(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=IKt(";",t,e),[i,o=""]=n.split("=");r.set(VZe(i,!0,!1),VZe(o,!1,!0)),e.position++}return r}s(NKt,"parseExtensions");function LKt(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(LKt,"isValidClientWindowBits");var XZe=typeof process.versions.icu=="string",$Ze=XZe?new TextDecoder("utf-8",{fatal:!0}):void 0,ZZe=XZe?$Ze.decode.bind($Ze):function(t){if(bKt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};eet.exports={isConnecting:TKt,isEstablished:wKt,isClosing:_Kt,isClosed:SKt,fireEvent:CEe,isValidSubprotocol:PKt,isValidStatusCode:BKt,failWebsocketConnection:zZe,websocketMessageReceived:RKt,utf8Decode:ZZe,isControlFrame:YZe,isContinuationFrame:KZe,isTextBinaryFrame:JZe,isValidOpcode:DKt,parseExtensions:NKt,isValidClientWindowBits:LKt}});var ZX=U((aei,tet)=>{"use strict";d();var{maxUnsigned16Bit:MKt}=rR(),XX=16386,EEe,EO=null,OB=XX;try{EEe=require("node:crypto")}catch{EEe={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function FKt(){return OB===XX&&(OB=0,EEe.randomFillSync(EO??=Buffer.allocUnsafe(XX),0,XX)),[EO[OB++],EO[OB++],EO[OB++],EO[OB++]]}s(FKt,"generateMask");var vEe=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=FKt(),i=r?.byteLength??0,o=i,a=6;i>MKt?(a+=8,o=127):i>125&&(a+=2,o=126);let c=Buffer.allocUnsafe(i+a);c[0]=c[1]=0,c[0]|=128,c[0]=(c[0]&240)+e;c[a-4]=n[0],c[a-3]=n[1],c[a-2]=n[2],c[a-1]=n[3],c[1]=o,o===126?c.writeUInt16BE(i,2):o===127&&(c[2]=c[3]=0,c.writeUIntBE(i,4,6)),c[1]|=128;for(let l=0;l<i;++l)c[a+l]=r[l]^n[l&3];return c}};tet.exports={WebsocketFrameSend:vEe}});var bEe=U((uei,cet)=>{"use strict";d();var{uid:OKt,states:vO,sentCloseFrameState:eZ,emptyBuffer:QKt,opcodes:UKt}=rR(),{kReadyState:xO,kSentClose:tZ,kByteParser:net,kReceivedClose:ret,kResponse:iet}=gO(),{fireEvent:qKt,failWebsocketConnection:eT,isClosing:HKt,isClosed:WKt,isEstablished:GKt,parseExtensions:jKt}=CO(),{channels:QB}=X3(),{CloseEvent:VKt}=FB(),{makeRequest:$Kt}=PB(),{fetching:zKt}=fO(),{Headers:YKt,getHeadersList:KKt}=K2(),{getDecodeSplit:JKt}=X0(),{WebsocketFrameSend:XKt}=ZX(),xEe;try{xEe=require("node:crypto")}catch{}function ZKt(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let c=$Kt({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=KKt(new YKt(o.headers));c.headersList=p}let l=xEe.randomBytes(16).toString("base64");c.headersList.append("sec-websocket-key",l),c.headersList.append("sec-websocket-version","13");for(let p of e)c.headersList.append("sec-websocket-protocol",p);return c.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),zKt({request:c,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){eT(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){eT(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){eT(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){eT(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=xEe.createHash("sha1").update(l+OKt).digest("base64");if(m!==h){eT(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=jKt(g),!y.has("permessage-deflate"))){eT(n,"Sec-WebSocket-Extensions header does not match.");return}let E=p.headersList.get("Sec-WebSocket-Protocol");if(E!==null&&!JKt("sec-websocket-protocol",c.headersList).includes(E)){eT(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",oet),p.socket.on("close",set),p.socket.on("error",aet),QB.open.hasSubscribers&&QB.open.publish({address:p.socket.address(),protocol:E,extensions:g}),i(p,y)}})}s(ZKt,"establishWebSocketConnection");function eJt(t,e,r,n){if(!(HKt(t)||WKt(t)))if(!GKt(t))eT(t,"Connection was closed before it was established."),t[xO]=vO.CLOSING;else if(t[tZ]===eZ.NOT_SENT){t[tZ]=eZ.PROCESSING;let i=new XKt;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=QKt,t[iet].socket.write(i.createFrame(UKt.CLOSE)),t[tZ]=eZ.SENT,t[xO]=vO.CLOSING}else t[xO]=vO.CLOSING}s(eJt,"closeWebSocketConnection");function oet(t){this.ws[net].write(t)||this.pause()}s(oet,"onSocketData");function set(){let{ws:t}=this,{[iet]:e}=t;e.socket.off("data",oet),e.socket.off("close",set),e.socket.off("error",aet);let r=t[tZ]===eZ.SENT&&t[ret],n=1005,i="",o=t[net].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[ret]||(n=1006),t[xO]=vO.CLOSED,qKt("close",t,(a,c)=>new VKt(a,c),{wasClean:r,code:n,reason:i}),QB.close.hasSubscribers&&QB.close.publish({websocket:t,code:n,reason:i})}s(set,"onSocketClose");function aet(t){let{ws:e}=this;e[xO]=vO.CLOSING,QB.socketError.hasSubscribers&&QB.socketError.publish(t),this.destroy()}s(aet,"onSocketError");cet.exports={establishWebSocketConnection:ZKt,closeWebSocketConnection:eJt}});var det=U((pei,uet)=>{"use strict";d();var{createInflateRaw:tJt,Z_DEFAULT_WINDOWBITS:rJt}=require("node:zlib"),{isValidClientWindowBits:nJt}=CO(),iJt=Buffer.from([0,0,255,255]),rZ=Symbol("kBuffer"),nZ=Symbol("kLength"),IEe=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=rJt;if(this.#t.serverMaxWindowBits){if(!nJt(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=tJt({windowBits:i}),this.#e[rZ]=[],this.#e[nZ]=0,this.#e.on("data",o=>{this.#e[rZ].push(o),this.#e[nZ]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(iJt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[rZ],this.#e[nZ]);this.#e[rZ].length=0,this.#e[nZ]=0,n(null,i)})}};uet.exports={PerMessageDeflate:IEe}});var xet=U((gei,vet)=>{"use strict";d();var{Writable:oJt}=require("node:stream"),sJt=require("node:assert"),{parserStates:jf,opcodes:UB,states:aJt,emptyBuffer:fet,sentCloseFrameState:pet}=rR(),{kReadyState:cJt,kSentClose:met,kResponse:het,kReceivedClose:get}=gO(),{channels:iZ}=X3(),{isValidStatusCode:lJt,isValidOpcode:uJt,failWebsocketConnection:Gm,websocketMessageReceived:Aet,utf8Decode:dJt,isControlFrame:yet,isTextBinaryFrame:TEe,isContinuationFrame:fJt}=CO(),{WebsocketFrameSend:Cet}=ZX(),{closeWebSocketConnection:Eet}=bEe(),{PerMessageDeflate:pJt}=det(),wEe=class extends oJt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=jf.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new pJt(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===jf.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==UB.CONTINUATION,c=r[1]&127,l=r[0]&64,u=r[0]&32,f=r[0]&16;if(!uJt(i))return Gm(this.ws,"Invalid opcode received"),e();if(o)return Gm(this.ws,"Frame cannot be masked"),e();if(l!==0&&!this.#s.has("permessage-deflate")){Gm(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||f!==0){Gm(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!TEe(i)){Gm(this.ws,"Invalid frame type was fragmented.");return}if(TEe(i)&&this.#o.length>0){Gm(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){Gm(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((c>125||a)&&yet(i)){Gm(this.ws,"Control frame either too large or fragmented");return}if(fJt(i)&&this.#o.length===0&&!this.#r.compressed){Gm(this.ws,"Unexpected continuation frame");return}c<=125?(this.#r.payloadLength=c,this.#n=jf.READ_DATA):c===126?this.#n=jf.PAYLOADLENGTH_16:c===127&&(this.#n=jf.PAYLOADLENGTH_64),TEe(i)&&(this.#r.binaryType=i,this.#r.compressed=l!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===jf.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=jf.READ_DATA}else if(this.#n===jf.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){Gm(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=jf.READ_DATA}else if(this.#n===jf.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(yet(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=jf.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){Eet(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=jf.INFO,this.#i=!0,this.run(e);return}Aet(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=jf.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);Aet(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=jf.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return fet;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){sJt(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!lJt(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=dJt(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===UB.CLOSE){if(n===1)return Gm(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return Eet(this.ws,i,o,o.length),Gm(this.ws,o),!1}if(this.ws[met]!==pet.SENT){let i=fet;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new Cet(i);this.ws[het].socket.write(o.createFrame(UB.CLOSE),a=>{a||(this.ws[met]=pet.SENT)})}return this.ws[cJt]=aJt.CLOSING,this.ws[get]=!0,!1}else if(r===UB.PING){if(!this.ws[get]){let i=new Cet(e);this.ws[het].socket.write(i.createFrame(UB.PONG)),iZ.ping.hasSubscribers&&iZ.ping.publish({payload:e})}}else r===UB.PONG&&iZ.pong.hasSubscribers&&iZ.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};vet.exports={ByteParser:wEe}});var _et=U((Cei,wet)=>{"use strict";d();var{WebsocketFrameSend:mJt}=ZX(),{opcodes:bet,sendHints:qB}=rR(),hJt=OCe(),Iet=Buffer[Symbol.species],_Ee=class{static{s(this,"SendQueue")}#e=new hJt;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==qB.blob){let o=Tet(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=Tet(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function Tet(t,e){return new mJt(gJt(t,e)).createFrame(e===qB.string?bet.TEXT:bet.BINARY)}s(Tet,"createFrame");function gJt(t,e){switch(e){case qB.string:return Buffer.from(t);case qB.arrayBuffer:case qB.blob:return new Iet(t);case qB.typedArray:return new Iet(t.buffer,t.byteOffset,t.byteLength)}}s(gJt,"toBuffer");wet.exports={SendQueue:_Ee}});var Fet=U((xei,Met)=>{"use strict";d();var{webidl:$n}=Au(),{URLSerializer:AJt}=Uf(),{environmentSettingsObject:Ret}=X0(),{staticPropertyDescriptors:tT,states:bO,sentCloseFrameState:yJt,sendHints:oZ}=rR(),{kWebSocketURL:ket,kReadyState:SEe,kController:CJt,kBinaryType:sZ,kResponse:Pet,kSentClose:EJt,kByteParser:vJt}=gO(),{isConnecting:xJt,isEstablished:bJt,isClosing:IJt,isValidSubprotocol:TJt,fireEvent:Bet}=CO(),{establishWebSocketConnection:wJt,closeWebSocketConnection:Det}=bEe(),{ByteParser:_Jt}=xet(),{kEnumerableProperty:jm,isBlobLike:Net}=Pi(),{getGlobalDispatcher:SJt}=EX(),{types:Let}=require("node:util"),{ErrorEvent:RJt,CloseEvent:kJt}=FB(),{SendQueue:PJt}=_et(),op=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),$n.util.markAsUncloneable(this);let n="WebSocket constructor";$n.argumentLengthCheck(arguments,1,n);let i=$n.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=$n.converters.USVString(e,n,"url"),r=i.protocols;let o=Ret.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(l){throw new DOMException(l,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>TJt(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[ket]=new URL(a.href);let c=Ret.settingsObject;this[CJt]=wJt(a,r,c,this,(l,u)=>this.#o(l,u),i),this[SEe]=t.CONNECTING,this[EJt]=yJt.NOT_SENT,this[sZ]="blob"}close(e=void 0,r=void 0){$n.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=$n.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=$n.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");Det(this,e,r,i)}send(e){$n.brandCheck(this,t);let r="WebSocket.send";if($n.argumentLengthCheck(arguments,1,r),e=$n.converters.WebSocketSendData(e,r,"data"),xJt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!bJt(this)||IJt(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},oZ.string)}else Let.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},oZ.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},oZ.typedArray)):Net(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},oZ.blob))}get readyState(){return $n.brandCheck(this,t),this[SEe]}get bufferedAmount(){return $n.brandCheck(this,t),this.#t}get url(){return $n.brandCheck(this,t),AJt(this[ket])}get extensions(){return $n.brandCheck(this,t),this.#n}get protocol(){return $n.brandCheck(this,t),this.#i}get onopen(){return $n.brandCheck(this,t),this.#e.open}set onopen(e){$n.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return $n.brandCheck(this,t),this.#e.error}set onerror(e){$n.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return $n.brandCheck(this,t),this.#e.close}set onclose(e){$n.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return $n.brandCheck(this,t),this.#e.message}set onmessage(e){$n.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return $n.brandCheck(this,t),this[sZ]}set binaryType(e){$n.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[sZ]="blob":this[sZ]=e}#o(e,r){this[Pet]=e;let n=new _Jt(this,r);n.on("drain",BJt),n.on("error",DJt.bind(this)),e.socket.ws=this,this[vJt]=n,this.#r=new PJt(e.socket),this[SEe]=bO.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),Bet("open",this)}};op.CONNECTING=op.prototype.CONNECTING=bO.CONNECTING;op.OPEN=op.prototype.OPEN=bO.OPEN;op.CLOSING=op.prototype.CLOSING=bO.CLOSING;op.CLOSED=op.prototype.CLOSED=bO.CLOSED;Object.defineProperties(op.prototype,{CONNECTING:tT,OPEN:tT,CLOSING:tT,CLOSED:tT,url:jm,readyState:jm,bufferedAmount:jm,onopen:jm,onerror:jm,onclose:jm,close:jm,onmessage:jm,binaryType:jm,send:jm,extensions:jm,protocol:jm,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(op,{CONNECTING:tT,OPEN:tT,CLOSING:tT,CLOSED:tT});$n.converters["sequence<DOMString>"]=$n.sequenceConverter($n.converters.DOMString);$n.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return $n.util.Type(t)==="Object"&&Symbol.iterator in t?$n.converters["sequence<DOMString>"](t):$n.converters.DOMString(t,e,r)};$n.converters.WebSocketInit=$n.dictionaryConverter([{key:"protocols",converter:$n.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:$n.converters.any,defaultValue:s(()=>SJt(),"defaultValue")},{key:"headers",converter:$n.nullableConverter($n.converters.HeadersInit)}]);$n.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return $n.util.Type(t)==="Object"&&!(Symbol.iterator in t)?$n.converters.WebSocketInit(t):{protocols:$n.converters["DOMString or sequence<DOMString>"](t)}};$n.converters.WebSocketSendData=function(t){if($n.util.Type(t)==="Object"){if(Net(t))return $n.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||Let.isArrayBuffer(t))return $n.converters.BufferSource(t)}return $n.converters.USVString(t)};function BJt(){this.ws[Pet].socket.resume()}s(BJt,"onParserDrain");function DJt(t){let e,r;t instanceof kJt?(e=t.reason,r=t.code):e=t.message,Bet("error",this,()=>new RJt("error",{error:t,message:e})),Det(this,r)}s(DJt,"onParserError");Met.exports={WebSocket:op}});var REe=U((Tei,Oet)=>{"use strict";d();function NJt(t){return t.indexOf("\0")===-1}s(NJt,"isValidLastEventId");function LJt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(LJt,"isASCIINumber");function MJt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(MJt,"delay");Oet.exports={isValidLastEventId:NJt,isASCIINumber:LJt,delay:MJt}});var Het=U((Sei,qet)=>{"use strict";d();var{Transform:FJt}=require("node:stream"),{isASCIINumber:Qet,isValidLastEventId:Uet}=REe(),UE=[239,187,191],kEe=10,aZ=13,OJt=58,QJt=32,PEe=class extends FJt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===UE[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===UE[0]&&this.buffer[1]===UE[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===UE[0]&&this.buffer[1]===UE[1]&&this.buffer[2]===UE[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===UE[0]&&this.buffer[1]===UE[1]&&this.buffer[2]===UE[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===kEe){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===kEe||this.buffer[this.pos]===aZ){this.buffer[this.pos]===aZ&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===kEe||this.buffer[this.pos]===aZ){this.buffer[this.pos]===aZ&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(OJt);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===QJt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":Qet(o)&&(r[i]=o);break;case"id":Uet(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&Qet(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&Uet(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};qet.exports={EventSourceStream:PEe}});var Ket=U((Pei,Yet)=>{"use strict";d();var{pipeline:UJt}=require("node:stream"),{fetching:qJt}=fO(),{makeRequest:HJt}=PB(),{webidl:qE}=Au(),{EventSourceStream:WJt}=Het(),{parseMIMEType:GJt}=Uf(),{createFastMessageEvent:jJt}=FB(),{isNetworkError:Wet}=uO(),{delay:VJt}=REe(),{kEnumerableProperty:nR}=Pi(),{environmentSettingsObject:Get}=X0(),jet=!1,Vet=3e3,IO=0,$et=1,TO=2,$Jt="anonymous",zJt="use-credentials",HB=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=IO;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),qE.util.markAsUncloneable(this);let n="EventSource constructor";qE.argumentLengthCheck(arguments,1,n),jet||(jet=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=qE.converters.USVString(e,n,"url"),r=qE.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:Vet};let i=Get,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=o.href;let a=$Jt;r.withCredentials&&(a=zJt,this.#i=!0);let c={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};c.client=Get.settingsObject,c.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],c.cache="no-store",c.initiator="other",c.urlList=[new URL(this.#t)],this.#r=HJt(c),this.#c()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#c(){if(this.#n===TO)return;this.#n=IO;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{Wet(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#l()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(Wet(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#l();return}let i=n.headersList.get("content-type",!0),o=i!==null?GJt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=$et,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let c=new WJt({eventSourceSettings:this.#a,push:s(l=>{this.dispatchEvent(jJt(l.type,l.options))},"push")});UJt(n.body.stream,c,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=qJt(e)}async#l(){this.#n!==TO&&(this.#n=IO,this.dispatchEvent(new Event("error")),await VJt(this.#a.reconnectionTime),this.#n===IO&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#c()))}close(){qE.brandCheck(this,t),this.#n!==TO&&(this.#n=TO,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},zet={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:IO,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:$et,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:TO,writable:!1}};Object.defineProperties(HB,zet);Object.defineProperties(HB.prototype,zet);Object.defineProperties(HB.prototype,{close:nR,onerror:nR,onmessage:nR,onopen:nR,readyState:nR,url:nR,withCredentials:nR});qE.converters.EventSourceInitDict=qE.dictionaryConverter([{key:"withCredentials",converter:qE.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:qE.converters.any}]);Yet.exports={EventSource:HB,defaultReconnectionTime:Vet}});var ett=U((Nei,Ln)=>{"use strict";d();var YJt=YF(),Jet=_F(),KJt=yB(),JJt=rKe(),XJt=CB(),ZJt=r1e(),eXt=CKe(),tXt=TKe(),Xet=Mo(),lZ=Pi(),{InvalidArgumentError:cZ}=Xet,WB=dJe(),rXt=RF(),nXt=F1e(),iXt=VJe(),oXt=U1e(),sXt=I1e(),aXt=uX(),{getGlobalDispatcher:Zet,setGlobalDispatcher:cXt}=EX(),lXt=vX(),uXt=XJ(),dXt=ZJ();Object.assign(Jet.prototype,WB);Ln.exports.Dispatcher=Jet;Ln.exports.Client=YJt;Ln.exports.Pool=KJt;Ln.exports.BalancedPool=JJt;Ln.exports.Agent=XJt;Ln.exports.ProxyAgent=ZJt;Ln.exports.EnvHttpProxyAgent=eXt;Ln.exports.RetryAgent=tXt;Ln.exports.RetryHandler=aXt;Ln.exports.DecoratorHandler=lXt;Ln.exports.RedirectHandler=uXt;Ln.exports.createRedirectInterceptor=dXt;Ln.exports.interceptors={redirect:ZJe(),retry:tXe(),dump:nXe(),dns:sXe()};Ln.exports.buildConnector=rXt;Ln.exports.errors=Xet;Ln.exports.util={parseHeaders:lZ.parseHeaders,headerNameToString:lZ.headerNameToString};function wO(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new cZ("invalid url");if(r!=null&&typeof r!="object")throw new cZ("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new cZ("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(lZ.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=lZ.parseURL(e);let{agent:i,dispatcher:o=Zet()}=r;if(i)throw new cZ("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(wO,"makeDispatcher");Ln.exports.setGlobalDispatcher=cXt;Ln.exports.getGlobalDispatcher=Zet;var fXt=fO().fetch;Ln.exports.fetch=s(async function(e,r=void 0){try{return await fXt(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Ln.exports.Headers=K2().Headers;Ln.exports.Response=uO().Response;Ln.exports.Request=PB().Request;Ln.exports.FormData=MF().FormData;Ln.exports.File=globalThis.File??require("node:buffer").File;Ln.exports.FileReader=EZe().FileReader;var{setGlobalOrigin:pXt,getGlobalOrigin:mXt}=nCe();Ln.exports.setGlobalOrigin=pXt;Ln.exports.getGlobalOrigin=mXt;var{CacheStorage:hXt}=RZe(),{kConstruct:gXt}=HX();Ln.exports.caches=new hXt(gXt);var{deleteCookie:AXt,getCookies:yXt,getSetCookies:CXt,setCookie:EXt}=qZe();Ln.exports.deleteCookie=AXt;Ln.exports.getCookies=yXt;Ln.exports.getSetCookies=CXt;Ln.exports.setCookie=EXt;var{parseMIMEType:vXt,serializeAMimeType:xXt}=Uf();Ln.exports.parseMIMEType=vXt;Ln.exports.serializeAMimeType=xXt;var{CloseEvent:bXt,ErrorEvent:IXt,MessageEvent:TXt}=FB();Ln.exports.WebSocket=Fet().WebSocket;Ln.exports.CloseEvent=bXt;Ln.exports.ErrorEvent=IXt;Ln.exports.MessageEvent=TXt;Ln.exports.request=wO(WB.request);Ln.exports.stream=wO(WB.stream);Ln.exports.pipeline=wO(WB.pipeline);Ln.exports.connect=wO(WB.connect);Ln.exports.upgrade=wO(WB.upgrade);Ln.exports.MockClient=nXt;Ln.exports.MockPool=oXt;Ln.exports.MockAgent=iXt;Ln.exports.mockErrors=sXt;var{EventSource:wXt}=Ket();Ln.exports.EventSource=wXt});var xi=U((Fei,ttt)=>{d();ttt.exports={options:{usePureJavaScript:!1}}});var itt=U((Qei,ntt)=>{d();var BEe={};ntt.exports=BEe;var rtt={};BEe.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=_Xt(t,e);else{var i=0,o=e.length,a=e.charAt(0),c=[0];for(i=0;i<t.length;++i){for(var l=0,u=t[i];l<c.length;++l)u+=c[l]<<8,c[l]=u%o,u=u/o|0;for(;u>0;)c.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=c.length-1;i>=0;--i)n+=e[c[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};BEe.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=rtt[e];if(!r){r=rtt[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var c=r[t.charCodeAt(n)];if(c===void 0)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function _Xt(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,c=t.at(r);a<o.length;++a)c+=o[a]<<8,o[a]=c%n,c=c/n|0;for(;c>0;)o.push(c%n),c=c/n|0}var l="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)l+=i;for(r=o.length-1;r>=0;--r)l+=e[o[r]];return l}s(_Xt,"_encodeWithByteBuffer")});var So=U((Hei,ctt)=>{d();var ott=xi(),stt=itt(),Pe=ctt.exports=ott.util=ott.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Pe.nextTick=process.nextTick,typeof setImmediate=="function"?Pe.setImmediate=setImmediate:Pe.setImmediate=Pe.nextTick;return}if(typeof setImmediate=="function"){Pe.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Pe.nextTick=function(c){return setImmediate(c)};return}if(Pe.setImmediate=function(c){setTimeout(c,0)},typeof window<"u"&&typeof window.postMessage=="function"){let c=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var a=c;s(c,"handler");var t="forge.setImmediate",e=[];Pe.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",c,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Pe.setImmediate;Pe.setImmediate=function(l){Date.now()-r>15?(r=Date.now(),o(l)):(e.push(l),e.length===1&&i.setAttribute("a",n=!n))}}Pe.nextTick=Pe.setImmediate})();Pe.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Pe.globalScope=function(){return Pe.isNodejs?global:typeof self>"u"?window:self}();Pe.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Pe.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Pe.isArrayBufferView=function(t){return t&&Pe.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function _O(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(_O,"_checkBitsParam");Pe.ByteBuffer=DEe;function DEe(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Pe.isArrayBuffer(t)||Pe.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof DEe||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(DEe,"ByteStringBuffer");Pe.ByteStringBuffer=DEe;var SXt=4096;Pe.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>SXt&&(this.data.substr(0,1),this._constructedStringLength=0)};Pe.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Pe.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Pe.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Pe.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Pe.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Pe.encodeUtf8(t))};Pe.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Pe.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Pe.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Pe.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Pe.ByteStringBuffer.prototype.putInt=function(t,e){_O(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Pe.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Pe.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Pe.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Pe.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Pe.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Pe.ByteStringBuffer.prototype.getInt=function(t){_O(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Pe.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Pe.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Pe.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Pe.ByteStringBuffer.prototype.copy=function(){var t=Pe.createBuffer(this.data);return t.read=this.read,t};Pe.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Pe.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Pe.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Pe.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.ByteStringBuffer.prototype.toString=function(){return Pe.decodeUtf8(this.bytes())};function RXt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Pe.isArrayBuffer(t),n=Pe.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(RXt,"DataBuffer");Pe.DataBuffer=RXt;Pe.DataBuffer.prototype.length=function(){return this.write-this.read};Pe.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Pe.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Pe.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Pe.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Pe.DataBuffer.prototype.putBytes=function(t,e){if(Pe.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Pe.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Pe.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Pe.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Pe.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Pe.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Pe.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Pe.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Pe.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Pe.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Pe.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Pe.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Pe.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Pe.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Pe.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Pe.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Pe.DataBuffer.prototype.putInt=function(t,e){_O(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Pe.DataBuffer.prototype.putSignedInt=function(t,e){return _O(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Pe.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Pe.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Pe.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Pe.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Pe.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Pe.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Pe.DataBuffer.prototype.getInt=function(t){_O(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Pe.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Pe.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Pe.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Pe.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Pe.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Pe.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Pe.DataBuffer.prototype.copy=function(){return new Pe.DataBuffer(this)};Pe.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Pe.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Pe.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Pe.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Pe.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Pe.binary.raw.encode(e);if(t==="hex")return Pe.binary.hex.encode(e);if(t==="base64")return Pe.binary.base64.encode(e);if(t==="utf8")return Pe.text.utf8.decode(e);if(t==="utf16")return Pe.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Pe.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Pe.encodeUtf8(t)),new Pe.ByteBuffer(t)};Pe.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Pe.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,c=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),c>=10&&(n+=o,o="",c=0),o+=String.fromCharCode(i),++c;return n+=o,n};Pe.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Pe.bytesToHex=function(t){return Pe.createBuffer(t).toHex()};Pe.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var rT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",nT=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],att="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Pe.encode64=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.length;)i=t.charCodeAt(c++),o=t.charCodeAt(c++),a=t.charCodeAt(c++),r+=rT.charAt(i>>2),r+=rT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=rT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":rT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=nT[t.charCodeAt(a++)-43],n=nT[t.charCodeAt(a++)-43],i=nT[t.charCodeAt(a++)-43],o=nT[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Pe.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Pe.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Pe.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:stt.encode,decode:stt.decode}};Pe.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Pe.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.binary.hex.encode=Pe.bytesToHex;Pe.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Pe.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,c=0;c<t.byteLength;)i=t[c++],o=t[c++],a=t[c++],r+=rT.charAt(i>>2),r+=rT.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=rT.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":rT.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Pe.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,c,l=0,u=r;l<t.length;)i=nT[t.charCodeAt(l++)-43],o=nT[t.charCodeAt(l++)-43],a=nT[t.charCodeAt(l++)-43],c=nT[t.charCodeAt(l++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,c!==64&&(n[u++]=(a&3)<<6|c));return e?u-r:n.subarray(0,u)};Pe.binary.base58.encode=function(t,e){return Pe.binary.baseN.encode(t,att,e)};Pe.binary.base58.decode=function(t,e){return Pe.binary.baseN.decode(t,att,e)};Pe.text={utf8:{},utf16:{}};Pe.text.utf8.encode=function(t,e,r){t=Pe.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Pe.text.utf8.decode=function(t){return Pe.decodeUtf8(String.fromCharCode.apply(null,t))};Pe.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,c=0;c<t.length;++c)i[a++]=t.charCodeAt(c),o+=2;return e?o-r:n};Pe.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Pe.deflate=function(t,e,r){if(e=Pe.decode64(t.deflate(Pe.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Pe.inflate=function(t,e,r){var n=t.inflate(Pe.encode64(e)).rval;return n===null?null:Pe.decode64(n)};var NEe=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Pe.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),LEe=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Pe.decode64(r))),r},"_getStorageObject"),kXt=s(function(t,e,r,n){var i=LEe(t,e);i===null&&(i={}),i[r]=n,NEe(t,e,i)},"_setItem"),PXt=s(function(t,e,r){var n=LEe(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),BXt=s(function(t,e,r){var n=LEe(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),NEe(t,e,n)}},"_removeItem"),DXt=s(function(t,e){NEe(t,e,null)},"_clearItems"),uZ=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var c in r){i=r[c];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(l){a=l}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Pe.setItem=function(t,e,r,n,i){uZ(kXt,arguments,i)};Pe.getItem=function(t,e,r,n){return uZ(PXt,arguments,n)};Pe.removeItem=function(t,e,r,n){uZ(BXt,arguments,n)};Pe.clearItems=function(t,e,r){uZ(DXt,arguments,r)};Pe.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Pe.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var c=r[0][1];switch(c){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+c+"?>")}}return o.push(t.substring(a)),o.join("")};Pe.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,c=n===void 0?".":n,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return l+(f?u.substr(0,f)+c:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Pe.formatSize=function(t){return t>=1073741824?t=Pe.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Pe.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Pe.formatNumber(t/1024,0)+" KiB":t=Pe.formatNumber(t,0)+" bytes",t};Pe.bytesFromIP=function(t){return t.indexOf(".")!==-1?Pe.bytesFromIPv4(t):t.indexOf(":")!==-1?Pe.bytesFromIPv6(t):null};Pe.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Pe.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Pe.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Pe.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Pe.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Pe.bytesToIP=function(t){return t.length===4?Pe.bytesToIPv4(t):t.length===16?Pe.bytesToIPv6(t):null};Pe.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Pe.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Pe.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],c=e.length;!a||c!==a.end+1?r.push({start:c,end:c}):(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),l.start===0&&e.unshift(""),l.end===7&&e.push(""))}return e.join(":")};Pe.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Pe&&!t.update)return e(null,Pe.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Pe.cores=navigator.hardwareConcurrency,e(null,Pe.cores);if(typeof Worker>"u")return Pe.cores=1,e(null,Pe.cores);if(typeof Blob>"u")return Pe.cores=2,e(null,Pe.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var c=Date.now(),l=c+4;Date.now()<l;);self.postMessage({st:c,et:l})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,c,l){if(c===0){var u=Math.floor(a.reduce(function(f,p){return f+p},0)/a.length);return Pe.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Pe.cores)}i(l,function(f,p){a.push(o(l,p)),n(a,c-1,l)})}s(n,"sample");function i(a,c){for(var l=[],u=[],f=0;f<a;++f){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)l[h].terminate();c(null,u)}}),l.push(p)}for(var f=0;f<a;++f)l[f].postMessage(f)}s(i,"map");function o(a,c){for(var l=[],u=0;u<a;++u)for(var f=c[u],p=l[u]=[],m=0;m<a;++m)if(u!==m){var h=c[m];(f.st>h.st&&f.st<h.et||h.st>f.st&&h.st<f.et)&&p.push(m)}return l.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var dZ=U((jei,ltt)=>{d();var Ml=xi();So();ltt.exports=Ml.cipher=Ml.cipher||{};Ml.cipher.algorithms=Ml.cipher.algorithms||{};Ml.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ml.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ml.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ml.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ml.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ml.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ml.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ml.cipher.algorithms[t]=e};Ml.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ml.cipher.algorithms?Ml.cipher.algorithms[t]:null};var MEe=Ml.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};MEe.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ml.util.createBuffer(),this.output=t.output||Ml.util.createBuffer(),this.mode.start(e)};MEe.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};MEe.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var OEe=U(($ei,utt)=>{d();var Fl=xi();So();Fl.cipher=Fl.cipher||{};var Qi=utt.exports=Fl.cipher.modes=Fl.cipher.modes||{};Qi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.ecb.prototype.start=function(t){};Qi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Qi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Qi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=fZ(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Qi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Qi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Qi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Qi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Qi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Qi.ofb.prototype.decrypt=Qi.ofb.prototype.encrypt;Qi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0};Qi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=fZ(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Qi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}pZ(this._inBlock)};Qi.ctr.prototype.decrypt=Qi.ctr.prototype.encrypt;Qi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Fl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Qi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Fl.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Fl.util.createBuffer(t.additionalData):r=Fl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Fl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(FEe(n*8)))}this._inBlock=this._j0.slice(0),pZ(this._inBlock),this._partialBytes=0,r=Fl.util.createBuffer(r),this._aDataLength=FEe(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Qi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),pZ(this._inBlock)};Qi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),pZ(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Qi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Fl.util.createBuffer();var n=this._aDataLength.concat(FEe(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Qi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Qi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Qi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Qi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Qi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var c=[0,0,0,0],l=a/n|0,u=(n-1-a%n)*e;c[l]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(c,t),e)}return o};Qi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var c=i[o],l=i[a];i[o+a]=[c[0]^l[0],c[1]^l[1],c[2]^l[2],c[3]^l[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function fZ(t,e){if(typeof t=="string"&&(t=Fl.util.createBuffer(t)),Fl.util.isArray(t)&&t.length>4){var r=t;t=Fl.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Fl.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(fZ,"transformIV");function pZ(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(pZ,"inc32");function FEe(t){return[t/4294967296|0,t&4294967295]}s(FEe,"from64To32")});var iT=U((Kei,mtt)=>{d();var ws=xi();dZ();OEe();So();mtt.exports=ws.aes=ws.aes||{};ws.aes.startEncrypting=function(t,e,r,n){var i=mZ({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ws.aes.createEncryptionCipher=function(t,e){return mZ({key:t,output:null,decrypt:!1,mode:e})};ws.aes.startDecrypting=function(t,e,r,n){var i=mZ({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ws.aes.createDecryptionCipher=function(t,e){return mZ({key:t,output:null,decrypt:!0,mode:e})};ws.aes.Algorithm=function(t,e){qEe||ftt();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return UEe(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return UEe(r._w,n,i,!0)},"decrypt")}}),r._init=!1};ws.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ws.util.createBuffer(e);else if(ws.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ws.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ws.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ws.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=ptt(e,t.decrypt&&!a),this._init=!0}};ws.aes._expandKey=function(t,e){return qEe||ftt(),ptt(t,e)};ws.aes._updateBlock=UEe;jB("AES-ECB",ws.cipher.modes.ecb);jB("AES-CBC",ws.cipher.modes.cbc);jB("AES-CFB",ws.cipher.modes.cfb);jB("AES-OFB",ws.cipher.modes.ofb);jB("AES-CTR",ws.cipher.modes.ctr);jB("AES-GCM",ws.cipher.modes.gcm);function jB(t,e){var r=s(function(){return new ws.aes.Algorithm(t,e)},"factory");ws.cipher.registerAlgorithm(t,r)}s(jB,"registerAlgorithm");var qEe=!1,GB=4,jd,QEe,dtt,iR,Mg;function ftt(){qEe=!0,dtt=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;jd=new Array(256),QEe=new Array(256),iR=new Array(4),Mg=new Array(4);for(var e=0;e<4;++e)iR[e]=new Array(256),Mg[e]=new Array(256);for(var r=0,n=0,i,o,a,c,l,u,f,e=0;e<256;++e){c=n^n<<1^n<<2^n<<3^n<<4,c=c>>8^c&255^99,jd[r]=c,QEe[c]=r,l=t[c],i=t[r],o=t[i],a=t[o],u=l<<24^c<<16^c<<8^(c^l),f=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)iR[p][r]=u,Mg[p][c]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(ftt,"initialize");function ptt(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,c=GB*a,l=o;l<c;++l)n=r[l-1],l%o===0?(n=jd[n>>>16&255]<<24^jd[n>>>8&255]<<16^jd[n&255]<<8^jd[n>>>24]^dtt[i]<<24,i++):o>6&&l%o===4&&(n=jd[n>>>24]<<24^jd[n>>>16&255]<<16^jd[n>>>8&255]<<8^jd[n&255]),r[l]=r[l-o]^n;if(e){var u,f=Mg[0],p=Mg[1],m=Mg[2],h=Mg[3],g=r.slice(0);c=r.length;for(var l=0,y=c-GB;l<c;l+=GB,y-=GB)if(l===0||l===c-GB)g[l]=r[y],g[l+1]=r[y+3],g[l+2]=r[y+2],g[l+3]=r[y+1];else for(var E=0;E<GB;++E)u=r[y+E],g[l+(3&-E)]=f[jd[u>>>24]]^p[jd[u>>>16&255]]^m[jd[u>>>8&255]]^h[jd[u&255]];r=g}return r}s(ptt,"_expandKey");function UEe(t,e,r,n){var i=t.length/4-1,o,a,c,l,u;n?(o=Mg[0],a=Mg[1],c=Mg[2],l=Mg[3],u=QEe):(o=iR[0],a=iR[1],c=iR[2],l=iR[3],u=jd);var f,p,m,h,g,y,E;f=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var x=3,b=1;b<i;++b)g=o[f>>>24]^a[p>>>16&255]^c[m>>>8&255]^l[h&255]^t[++x],y=o[p>>>24]^a[m>>>16&255]^c[h>>>8&255]^l[f&255]^t[++x],E=o[m>>>24]^a[h>>>16&255]^c[f>>>8&255]^l[p&255]^t[++x],h=o[h>>>24]^a[f>>>16&255]^c[p>>>8&255]^l[m&255]^t[++x],f=g,p=y,m=E;r[0]=u[f>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++x],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[f&255]^t[++x],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[f>>>8&255]<<8^u[p&255]^t[++x],r[n?1:3]=u[h>>>24]<<24^u[f>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++x]}s(UEe,"_updateBlock");function mZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ws.cipher.createDecipher(r,t.key):n=ws.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof ws.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(mZ,"_createCipher")});var oT=U((Zei,htt)=>{d();var SO=xi();SO.pki=SO.pki||{};var HEe=htt.exports=SO.pki.oids=SO.oids=SO.oids||{};function Pt(t,e){HEe[t]=e,HEe[e]=t}s(Pt,"_IN");function qo(t,e){HEe[t]=e}s(qo,"_I_");Pt("1.2.840.113549.1.1.1","rsaEncryption");Pt("1.2.840.113549.1.1.4","md5WithRSAEncryption");Pt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Pt("1.2.840.113549.1.1.7","RSAES-OAEP");Pt("1.2.840.113549.1.1.8","mgf1");Pt("1.2.840.113549.1.1.9","pSpecified");Pt("1.2.840.113549.1.1.10","RSASSA-PSS");Pt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Pt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Pt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Pt("1.3.101.112","EdDSA25519");Pt("1.2.840.10040.4.3","dsa-with-sha1");Pt("1.3.14.3.2.7","desCBC");Pt("1.3.14.3.2.26","sha1");Pt("1.3.14.3.2.29","sha1WithRSASignature");Pt("2.16.840.1.101.3.4.2.1","sha256");Pt("2.16.840.1.101.3.4.2.2","sha384");Pt("2.16.840.1.101.3.4.2.3","sha512");Pt("2.16.840.1.101.3.4.2.4","sha224");Pt("2.16.840.1.101.3.4.2.5","sha512-224");Pt("2.16.840.1.101.3.4.2.6","sha512-256");Pt("1.2.840.113549.2.2","md2");Pt("1.2.840.113549.2.5","md5");Pt("1.2.840.113549.1.7.1","data");Pt("1.2.840.113549.1.7.2","signedData");Pt("1.2.840.113549.1.7.3","envelopedData");Pt("1.2.840.113549.1.7.4","signedAndEnvelopedData");Pt("1.2.840.113549.1.7.5","digestedData");Pt("1.2.840.113549.1.7.6","encryptedData");Pt("1.2.840.113549.1.9.1","emailAddress");Pt("1.2.840.113549.1.9.2","unstructuredName");Pt("1.2.840.113549.1.9.3","contentType");Pt("1.2.840.113549.1.9.4","messageDigest");Pt("1.2.840.113549.1.9.5","signingTime");Pt("1.2.840.113549.1.9.6","counterSignature");Pt("1.2.840.113549.1.9.7","challengePassword");Pt("1.2.840.113549.1.9.8","unstructuredAddress");Pt("1.2.840.113549.1.9.14","extensionRequest");Pt("1.2.840.113549.1.9.20","friendlyName");Pt("1.2.840.113549.1.9.21","localKeyId");Pt("1.2.840.113549.1.9.22.1","x509Certificate");Pt("1.2.840.113549.1.12.10.1.1","keyBag");Pt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Pt("1.2.840.113549.1.12.10.1.3","certBag");Pt("1.2.840.113549.1.12.10.1.4","crlBag");Pt("1.2.840.113549.1.12.10.1.5","secretBag");Pt("1.2.840.113549.1.12.10.1.6","safeContentsBag");Pt("1.2.840.113549.1.5.13","pkcs5PBES2");Pt("1.2.840.113549.1.5.12","pkcs5PBKDF2");Pt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Pt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Pt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Pt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Pt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Pt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Pt("1.2.840.113549.2.7","hmacWithSHA1");Pt("1.2.840.113549.2.8","hmacWithSHA224");Pt("1.2.840.113549.2.9","hmacWithSHA256");Pt("1.2.840.113549.2.10","hmacWithSHA384");Pt("1.2.840.113549.2.11","hmacWithSHA512");Pt("1.2.840.113549.3.7","des-EDE3-CBC");Pt("2.16.840.1.101.3.4.1.2","aes128-CBC");Pt("2.16.840.1.101.3.4.1.22","aes192-CBC");Pt("2.16.840.1.101.3.4.1.42","aes256-CBC");Pt("2.5.4.3","commonName");Pt("2.5.4.4","surname");Pt("2.5.4.5","serialNumber");Pt("2.5.4.6","countryName");Pt("2.5.4.7","localityName");Pt("2.5.4.8","stateOrProvinceName");Pt("2.5.4.9","streetAddress");Pt("2.5.4.10","organizationName");Pt("2.5.4.11","organizationalUnitName");Pt("2.5.4.12","title");Pt("2.5.4.13","description");Pt("2.5.4.15","businessCategory");Pt("2.5.4.17","postalCode");Pt("2.5.4.42","givenName");Pt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Pt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Pt("2.16.840.1.113730.1.1","nsCertType");Pt("2.16.840.1.113730.1.13","nsComment");qo("2.5.29.1","authorityKeyIdentifier");qo("2.5.29.2","keyAttributes");qo("2.5.29.3","certificatePolicies");qo("2.5.29.4","keyUsageRestriction");qo("2.5.29.5","policyMapping");qo("2.5.29.6","subtreesConstraint");qo("2.5.29.7","subjectAltName");qo("2.5.29.8","issuerAltName");qo("2.5.29.9","subjectDirectoryAttributes");qo("2.5.29.10","basicConstraints");qo("2.5.29.11","nameConstraints");qo("2.5.29.12","policyConstraints");qo("2.5.29.13","basicConstraints");Pt("2.5.29.14","subjectKeyIdentifier");Pt("2.5.29.15","keyUsage");qo("2.5.29.16","privateKeyUsagePeriod");Pt("2.5.29.17","subjectAltName");Pt("2.5.29.18","issuerAltName");Pt("2.5.29.19","basicConstraints");qo("2.5.29.20","cRLNumber");qo("2.5.29.21","cRLReason");qo("2.5.29.22","expirationDate");qo("2.5.29.23","instructionCode");qo("2.5.29.24","invalidityDate");qo("2.5.29.25","cRLDistributionPoints");qo("2.5.29.26","issuingDistributionPoint");qo("2.5.29.27","deltaCRLIndicator");qo("2.5.29.28","issuingDistributionPoint");qo("2.5.29.29","certificateIssuer");qo("2.5.29.30","nameConstraints");Pt("2.5.29.31","cRLDistributionPoints");Pt("2.5.29.32","certificatePolicies");qo("2.5.29.33","policyMappings");qo("2.5.29.34","policyConstraints");Pt("2.5.29.35","authorityKeyIdentifier");qo("2.5.29.36","policyConstraints");Pt("2.5.29.37","extKeyUsage");qo("2.5.29.46","freshestCRL");qo("2.5.29.54","inhibitAnyPolicy");Pt("1.3.6.1.4.1.11129.2.4.2","timestampList");Pt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Pt("1.3.6.1.5.5.7.3.1","serverAuth");Pt("1.3.6.1.5.5.7.3.2","clientAuth");Pt("1.3.6.1.5.5.7.3.3","codeSigning");Pt("1.3.6.1.5.5.7.3.4","emailProtection");Pt("1.3.6.1.5.5.7.3.8","timeStamping")});var Fg=U((rti,Att)=>{d();var $s=xi();So();oT();var or=Att.exports=$s.asn1=$s.asn1||{};or.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};or.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};or.create=function(t,e,r,n,i){if($s.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var c={tagClass:t,type:e,constructed:r,composed:r||$s.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(c.bitStringContents=i.bitStringContents,c.original=or.copy(c)),c};or.copy=function(t,e){var r;if($s.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(or.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:or.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};or.equals=function(t,e,r){if($s.util.isArray(t)){if(!$s.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!or.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&or.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};or.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function RO(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(RO,"_checkBufferLength");var NXt=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;RO(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");or.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.length(),n=hZ(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function hZ(t,e,r,n){var i;RO(t,e,2);var o=t.getByte();e--;var a=o&192,c=o&31;i=t.length();var l=NXt(t,e);if(e-=i-t.length(),l!==void 0&&l>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=l,u}l=e}var f,p,m=(o&32)===32;if(m)if(f=[],l===void 0)for(;;){if(RO(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),f.push(hZ(t,e,r+1,n)),e-=i-t.length()}else for(;l>0;)i=t.length(),f.push(hZ(t,l,r+1,n)),e-=i-t.length(),l-=i-t.length();if(f===void 0&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&(p=t.bytes(l)),f===void 0&&n.decodeBitStrings&&a===or.Class.UNIVERSAL&&c===or.Type.BITSTRING&&l>1){var h=t.read,g=e,y=0;if(c===or.Type.BITSTRING&&(RO(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var E={strict:!0,decodeBitStrings:!0},x=hZ(t,e,r+1,E),b=i-t.length();e-=b,c==or.Type.BITSTRING&&b++;var _=x.tagClass;b===l&&(_===or.Class.UNIVERSAL||_===or.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch{}f===void 0&&(t.read=h,e=g)}if(f===void 0){if(l===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=e}if(c===or.Type.BMPSTRING)for(f="";l>0;l-=2)RO(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(l),e-=l}var k=p===void 0?null:{bitStringContents:p};return or.create(a,c,m,f,k)}s(hZ,"_fromDer");or.toDer=function(t){var e=$s.util.createBuffer(),r=t.tagClass|t.type,n=$s.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=or.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(or.toDer(t.value[o]))}else if(t.type===or.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===or.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),c="";do c+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(c.length|128);for(var o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(n),e};or.oidToDer=function(t){var e=t.split("."),r=$s.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,c=2;c<e.length;++c){n=!0,i=[],o=parseInt(e[c],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var l=i.length-1;l>=0;--l)r.putByte(i[l])}return r};or.derToOid=function(t){var e;typeof t=="string"&&(t=$s.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};or.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),c=0;if(t.length>11){var l=t.charAt(10),u=10;l!=="+"&&l!=="-"&&(c=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,0),u&&(l=t.charAt(u),l==="+"||l==="-")){var f=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=f*60+p;m*=6e4,l==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};or.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),c=parseInt(t.substr(12,2),10),l=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(l=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,c,l),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,c,l)),e};or.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};or.integerToDer=function(t){var e=$s.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};or.derToInteger=function(t){typeof t=="string"&&(t=$s.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};or.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&$s.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=or.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var c;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var gtt=/[^\\u0000-\\u00ff]/;or.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case or.Class.UNIVERSAL:n+="Universal:";break;case or.Class.APPLICATION:n+="Application:";break;case or.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case or.Class.PRIVATE:n+="Private:";break}if(t.tagClass===or.Class.UNIVERSAL)switch(n+=t.type,t.type){case or.Type.NONE:n+=" (None)";break;case or.Type.BOOLEAN:n+=" (Boolean)";break;case or.Type.INTEGER:n+=" (Integer)";break;case or.Type.BITSTRING:n+=" (Bit string)";break;case or.Type.OCTETSTRING:n+=" (Octet string)";break;case or.Type.NULL:n+=" (Null)";break;case or.Type.OID:n+=" (Object Identifier)";break;case or.Type.ODESC:n+=" (Object Descriptor)";break;case or.Type.EXTERNAL:n+=" (External or Instance of)";break;case or.Type.REAL:n+=" (Real)";break;case or.Type.ENUMERATED:n+=" (Enumerated)";break;case or.Type.EMBEDDED:n+=" (Embedded PDV)";break;case or.Type.UTF8:n+=" (UTF8)";break;case or.Type.ROID:n+=" (Relative Object Identifier)";break;case or.Type.SEQUENCE:n+=" (Sequence)";break;case or.Type.SET:n+=" (Set)";break;case or.Type.PRINTABLESTRING:n+=" (Printable String)";break;case or.Type.IA5String:n+=" (IA5String (ASCII))";break;case or.Type.UTCTIME:n+=" (UTC time)";break;case or.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case or.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,c="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,c+=or.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(c+=","));n+=i+"Sub values: "+a+c}else{if(n+=i+"Value: ",t.type===or.Type.OID){var l=or.derToOid(t.value);n+=l,$s.pki&&$s.pki.oids&&l in $s.pki.oids&&(n+=" ("+$s.pki.oids[l]+") ")}if(t.type===or.Type.INTEGER)try{n+=or.derToInteger(t.value)}catch{n+="0x"+$s.util.bytesToHex(t.value)}else if(t.type===or.Type.BITSTRING){if(t.value.length>1?n+="0x"+$s.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===or.Type.OCTETSTRING)gtt.test(t.value)||(n+="("+t.value+") "),n+="0x"+$s.util.bytesToHex(t.value);else if(t.type===or.Type.UTF8)try{n+=$s.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+$s.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===or.Type.PRINTABLESTRING||t.type===or.Type.IA5String?n+=t.value:gtt.test(t.value)?n+="0x"+$s.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var tC=U((oti,ytt)=>{d();var gZ=xi();ytt.exports=gZ.md=gZ.md||{};gZ.md.algorithms=gZ.md.algorithms||{}});var VB=U((ati,Ctt)=>{d();var HE=xi();tC();So();var LXt=Ctt.exports=HE.hmac=HE.hmac||{};LXt.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in HE.md.algorithms)e=HE.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=HE.util.createBuffer(a);else if(HE.util.isArray(a)){var c=a;a=HE.util.createBuffer();for(var l=0;l<c.length;++l)a.putByte(c[l])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=HE.util.createBuffer(),n=HE.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var c=a.at(l);r.putByte(54^c),n.putByte(92^c)}if(u<e.blockLength)for(var c=e.blockLength-u,l=0;l<c;++l)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var yZ=U((lti,btt)=>{d();var rC=xi();tC();So();var vtt=btt.exports=rC.md5=rC.md5||{};rC.md.md5=rC.md.algorithms.md5=vtt;vtt.create=function(){xtt||MXt();var t=null,e=rC.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=rC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=rC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Ett(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=rC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(WEe.substr(0,n.blockLength-a));for(var c,l=0,u=n.fullMessageLength.length-1;u>=0;--u)c=n.fullMessageLength[u]*8+l,l=c/4294967296>>>0,i.putInt32Le(c>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};Ett(f,r,i);var p=rC.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var WEe=null,AZ=null,kO=null,$B=null,xtt=!1;function MXt(){WEe="\x80",WEe+=rC.util.fillString("\0",64),AZ=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],kO=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],$B=new Array(64);for(var t=0;t<64;++t)$B[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);xtt=!0}s(MXt,"_init");function Ett(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),l=c^o&(a^c),n=i+l+$B[f]+e[f],u=kO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<32;++f)l=a^c&(o^a),n=i+l+$B[f]+e[AZ[f]],u=kO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<48;++f)l=o^a^c,n=i+l+$B[f]+e[AZ[f]],u=kO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;for(;f<64;++f)l=a^(o|~c),n=i+l+$B[f]+e[AZ[f]],u=kO[f],i=c,c=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,p-=64}}s(Ett,"_update")});var oR=U((fti,Ttt)=>{d();var EZ=xi();So();var Itt=Ttt.exports=EZ.pem=EZ.pem||{};Itt.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=CZ(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=CZ(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=CZ(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=CZ(t.headers[i]);return t.procType&&(r+=`\r
`),r+=EZ.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Itt.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var c={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:EZ.util.decode64(o[3])};if(e.push(c),!!o[2]){for(var l=o[2].split(i),u=0;o&&u<l.length;){for(var f=l[u].replace(/\s+$/,""),p=u+1;p<l.length;++p){var m=l[p];if(!/\s/.test(m[0]))break;f+=m,u=p}if(o=f.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(FXt(g[y]));if(c.procType)if(!c.contentDomain&&h.name==="Content-Domain")c.contentDomain=g[0]||"";else if(!c.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');c.dekInfo={algorithm:g[0],parameters:g[1]||null}}else c.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');c.procType={version:g[0],type:g[1]}}}++u}if(c.procType==="ENCRYPTED"&&!c.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function CZ(t){for(var e=t.name+": ",r=[],n=s(function(l,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var c=e[a];c===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+c+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(CZ,"foldHeader");function FXt(t){return t.replace(/^\s+/,"")}s(FXt,"ltrim")});var PO=U((hti,_tt)=>{d();var pa=xi();dZ();OEe();So();_tt.exports=pa.des=pa.des||{};pa.des.startEncrypting=function(t,e,r,n){var i=vZ({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};pa.des.createEncryptionCipher=function(t,e){return vZ({key:t,output:null,decrypt:!1,mode:e})};pa.des.startDecrypting=function(t,e,r,n){var i=vZ({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};pa.des.createDecryptionCipher=function(t,e){return vZ({key:t,output:null,decrypt:!0,mode:e})};pa.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return wtt(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return wtt(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};pa.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=pa.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=VXt(e),this._init=!0}};nC("DES-ECB",pa.cipher.modes.ecb);nC("DES-CBC",pa.cipher.modes.cbc);nC("DES-CFB",pa.cipher.modes.cfb);nC("DES-OFB",pa.cipher.modes.ofb);nC("DES-CTR",pa.cipher.modes.ctr);nC("3DES-ECB",pa.cipher.modes.ecb);nC("3DES-CBC",pa.cipher.modes.cbc);nC("3DES-CFB",pa.cipher.modes.cfb);nC("3DES-OFB",pa.cipher.modes.ofb);nC("3DES-CTR",pa.cipher.modes.ctr);function nC(t,e){var r=s(function(){return new pa.des.Algorithm(t,e)},"factory");pa.cipher.registerAlgorithm(t,r)}s(nC,"registerAlgorithm");var OXt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],QXt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],UXt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],qXt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],HXt=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],WXt=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],GXt=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],jXt=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function VXt(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,E=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,_,k=0;k<y;k++){var P=t.getInt32(),N=t.getInt32();_=(P>>>4^N)&252645135,N^=_,P^=_<<4,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>2^N)&858993459,N^=_,P^=_<<2,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=(N>>>8^P)&16711935,P^=_,N^=_<<8,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=P<<8|N>>>20&240,P=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var M=0;M<x.length;++M){x[M]?(P=P<<2|P>>>26,N=N<<2|N>>>26):(P=P<<1|P>>>27,N=N<<1|N>>>27),P&=-15,N&=-15;var J=e[P>>>28]|r[P>>>24&15]|n[P>>>20&15]|i[P>>>16&15]|o[P>>>12&15]|a[P>>>8&15]|c[P>>>4&15],pe=l[N>>>28]|u[N>>>24&15]|f[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(pe>>>16^J)&65535,E[b++]=J^_,E[b++]=pe^_<<16}}return E}s(VXt,"_createKeys");function wtt(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,c=e[0],l=e[1];a=(c>>>4^l)&252645135,l^=a,c^=a<<4,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,c=c<<1|c>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],p=o[u+2],m=o[u];m!=f;m+=p){var h=l^t[m],g=(l>>>4|l<<28)^t[m+1];a=c,c=l,l=a^(QXt[h>>>24&63]|qXt[h>>>16&63]|WXt[h>>>8&63]|jXt[h&63]|OXt[g>>>24&63]|UXt[g>>>16&63]|HXt[g>>>8&63]|GXt[g&63])}a=c,c=l,l=a}c=c>>>1|c<<31,l=l>>>1|l<<31,a=(c>>>1^l)&1431655765,l^=a,c^=a<<1,a=(l>>>8^c)&16711935,c^=a,l^=a<<8,a=(l>>>2^c)&858993459,c^=a,l^=a<<2,a=(c>>>16^l)&65535,l^=a,c^=a<<16,a=(c>>>4^l)&252645135,l^=a,c^=a<<4,r[0]=c,r[1]=l}s(wtt,"_updateBlock");function vZ(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=pa.cipher.createDecipher(r,t.key):n=pa.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var c=null;a instanceof pa.util.ByteBuffer&&(c=a,a={}),a=a||{},a.output=c,a.iv=o,i.call(n,a)},n}s(vZ,"_createCipher")});var xZ=U((yti,Stt)=>{d();var Vd=xi();VB();tC();So();var $Xt=Vd.pkcs5=Vd.pkcs5||{},WE;Vd.util.isNodejs&&!Vd.options.usePureJavaScript&&(WE=require("crypto"));Stt.exports=Vd.pbkdf2=$Xt.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),Vd.util.isNodejs&&!Vd.options.usePureJavaScript&&WE.pbkdf2&&(i===null||typeof i!="object")&&(WE.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?WE.pbkdf2Sync.length===4?WE.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):WE.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):WE.pbkdf2Sync.length===4?WE.pbkdf2Sync(t,e,r,n).toString("binary"):WE.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Vd.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Vd.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var c=new Error("Derived key is too long.");if(o)return o(c);throw c}var l=Math.ceil(n/a),u=n-(l-1)*a,f=Vd.hmac.create();f.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=l;++y){f.start(null,null),f.update(e),f.update(Vd.util.int32ToBytes(y)),m=g=f.digest().getBytes();for(var E=2;E<=r;++E)f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Vd.util.xorBytes(m,h,a),g=h;p+=y<l?m:m.substr(0,u)}return p}var y=1,E;function x(){if(y>l)return o(null,p);f.start(null,null),f.update(e),f.update(Vd.util.int32ToBytes(y)),m=g=f.digest().getBytes(),E=2,b()}s(x,"outer");function b(){if(E<=r)return f.start(null,null),f.update(g),h=f.digest().getBytes(),m=Vd.util.xorBytes(m,h,a),g=h,++E,Vd.util.setImmediate(b);p+=y<l?m:m.substr(0,u),++y,x()}s(b,"inner"),x()}});var jEe=U((vti,Dtt)=>{d();var iC=xi();tC();So();var ktt=Dtt.exports=iC.sha256=iC.sha256||{};iC.md.sha256=iC.md.algorithms.sha256=ktt;ktt.create=function(){Ptt||zXt();var t=null,e=iC.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=iC.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=iC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Rtt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=iC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(GEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Rtt(p,r,i);var m=iC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var GEe=null,Ptt=!1,Btt=null;function zXt(){GEe="\x80",GEe+=iC.util.fillString("\0",64),Btt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ptt=!0}s(zXt,"_init");function Rtt(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b=r.length();b>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,E=t.h6,x=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),c=E^g&(y^E),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),l=f&p|m&(f^p),n=x+a+c+Btt[u]+e[u],i=o+l,x=E,E=y,y=g,g=h+n>>>0,h=m,m=p,p=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+E|0,t.h7=t.h7+x|0,b-=64}}s(Rtt,"_update")});var VEe=U((Iti,Ntt)=>{d();var oC=xi();So();var bZ=null;oC.util.isNodejs&&!oC.options.usePureJavaScript&&!process.versions["node-webkit"]&&(bZ=require("crypto"));var YXt=Ntt.exports=oC.prng=oC.prng||{};YXt.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=oC.util.createBuffer();e.key=null,E();function E(x){if(x)return f(x);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return oC.util.nextTick(function(){o(E)});var b=p(e.key,e.seed);e.generated+=b.length,y.putBytes(b),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),oC.util.setImmediate(E)}s(E,"generate")},e.generateSync=function(u){var f=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=oC.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=f(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(f(e.key,p(e.seed))),e.seed=h(f(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return c(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(p,m){if(p)return u(p);e.collect(m),c(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return c();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),c()}s(a,"_reseedSync");function c(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,p=0;p<32;++p)e.reseeds%f===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(c,"_seed");function l(u){var f=null,p=oC.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(f=s(function(P){return m.getRandomValues(P)},"getRandomValues"));var h=oC.util.createBuffer();if(f)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{f(y);for(var E=0;E<y.length;++E)h.putInt32(y[E])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(h.length()<u)for(var x,b,_,k=Math.floor(Math.random()*65536);h.length()<u;){b=16807*(k&65535),x=16807*(k>>16),b+=(x&32767)<<16,b+=x>>15,b=(b&2147483647)+(b>>31),k=b&4294967295;for(var E=0;E<3;++E)_=k>>>(E<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(l,"defaultSeedFile"),bZ?(e.seedFile=function(u,f){bZ.randomBytes(u,function(p,m){if(p)return f(p);f(null,m.toString())})},e.seedFileSync=function(u){return bZ.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,l(u))}catch(p){f(p)}},e.seedFileSync=l),e.collect=function(u){for(var f=u.length,p=0;p<f;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var p="",m=0;m<f;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var f=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",f)}},e}});var Vm=U((_ti,$Ee)=>{d();var Ol=xi();iT();jEe();VEe();So();(function(){if(Ol.random&&Ol.random.getBytes){$Ee.exports=Ol.random;return}(function(t){var e={},r=new Array(4),n=Ol.util.createBuffer();e.formatKey=function(p){var m=Ol.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Ol.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Ol.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Ol.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=Ol.md.sha256;function i(){var p=Ol.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,c=Ol.util.globalScope,l=c.crypto||c.msCrypto;if(l&&l.getRandomValues&&(a=s(function(p){return l.getRandomValues(p)},"getRandomValues")),Ol.options.usePureJavaScript||!Ol.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Ol.random)Ol.random=o;else for(var f in o)Ol.random[f]=o[f];Ol.random.createInstance=i,$Ee.exports=Ol.random})(typeof jQuery<"u"?jQuery:null)})()});var YEe=U((kti,Ftt)=>{d();var Vf=xi();So();var zEe=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Ltt=[1,2,3,5],KXt=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),JXt=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Ftt.exports=Vf.rc2=Vf.rc2||{};Vf.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Vf.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),c;for(c=n;c<128;c++)r.putByte(zEe[r.at(c-1)+r.at(c-n)&255]);for(r.setAt(128-o,zEe[r.at(128-o)&a]),c=127-o;c>=0;c--)r.setAt(c,zEe[r.at(c+1)^r.at(c+o)]);return r};var Mtt=s(function(t,e,r){var n=!1,i=null,o=null,a=null,c,l,u,f,p=[];for(t=Vf.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(c=s(function(g){for(u=0;u<4;u++)g[u]+=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=KXt(g[u],Ltt[u]),f++},"mixRound"),l=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(c=s(function(g){for(u=3;u>=0;u--)g[u]=JXt(g[u],Ltt[u]),g[u]-=p[f]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),f--},"mixRound"),l=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var E=i.getInt16Le();a!==null&&(r?E^=a.getInt16Le():a.putInt16Le(E)),y.push(E&65535)}f=r?0:63;for(var x=0;x<g.length;x++)for(var b=0;b<g[x][0];b++)g[x][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Vf.util.createBuffer(g)),n=!1,i=Vf.util.createBuffer(),o=y||new Vf.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,c],[1,l],[6,c],[1,l],[5,c]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var x=o.length(),b=o.at(x-1);b>x?y=!1:o.truncate(b)}return y},"finish")},h},"createCipher");Vf.rc2.startEncrypting=function(t,e,r){var n=Vf.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Vf.rc2.createEncryptionCipher=function(t,e){return Mtt(t,e,!0)};Vf.rc2.startDecrypting=function(t,e,r){var n=Vf.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Vf.rc2.createDecryptionCipher=function(t,e){return Mtt(t,e,!1)}});var DO=U((Dti,jtt)=>{d();var KEe=xi();jtt.exports=KEe.jsbn=KEe.jsbn||{};var GE,XXt=0xdeadbeefcafe,Ott=(XXt&16777215)==15715070;function bt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(bt,"BigInteger");KEe.jsbn.BigInteger=bt;function Ro(){return new bt(null)}s(Ro,"nbi");function ZXt(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(ZXt,"am1");function eZt(t,e,r,n,i,o){for(var a=e&32767,c=e>>15;--o>=0;){var l=this.data[t]&32767,u=this.data[t++]>>15,f=c*l+u*a;l=a*l+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(l>>>30)+(f>>>15)+c*u+(i>>>30),r.data[n++]=l&1073741823}return i}s(eZt,"am2");function Qtt(t,e,r,n,i,o){for(var a=e&16383,c=e>>14;--o>=0;){var l=this.data[t]&16383,u=this.data[t++]>>14,f=c*l+u*a;l=a*l+((f&16383)<<14)+r.data[n]+i,i=(l>>28)+(f>>14)+c*u,r.data[n++]=l&268435455}return i}s(Qtt,"am3");typeof navigator>"u"?(bt.prototype.am=Qtt,GE=28):Ott&&navigator.appName=="Microsoft Internet Explorer"?(bt.prototype.am=eZt,GE=30):Ott&&navigator.appName!="Netscape"?(bt.prototype.am=ZXt,GE=26):(bt.prototype.am=Qtt,GE=28);bt.prototype.DB=GE;bt.prototype.DM=(1<<GE)-1;bt.prototype.DV=1<<GE;var JEe=52;bt.prototype.FV=Math.pow(2,JEe);bt.prototype.F1=JEe-GE;bt.prototype.F2=2*GE-JEe;var tZt="0123456789abcdefghijklmnopqrstuvwxyz",IZ=new Array,zB,$m;zB=48;for($m=0;$m<=9;++$m)IZ[zB++]=$m;zB=97;for($m=10;$m<36;++$m)IZ[zB++]=$m;zB=65;for($m=10;$m<36;++$m)IZ[zB++]=$m;function Utt(t){return tZt.charAt(t)}s(Utt,"int2char");function qtt(t,e){var r=IZ[t.charCodeAt(e)];return r??-1}s(qtt,"intAt");function rZt(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(rZt,"bnpCopyTo");function nZt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(nZt,"bnpFromInt");function sT(t){var e=Ro();return e.fromInt(t),e}s(sT,"nbv");function iZt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:qtt(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&bt.ZERO.subTo(this,this)}s(iZt,"bnpFromString");function oZt(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(oZt,"bnpClamp");function sZt(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,c=this.DB-a*this.DB%e;if(a-- >0)for(c<this.DB&&(n=this.data[a]>>c)>0&&(i=!0,o=Utt(n));a>=0;)c<e?(n=(this.data[a]&(1<<c)-1)<<e-c,n|=this.data[--a]>>(c+=this.DB-e)):(n=this.data[a]>>(c-=e)&r,c<=0&&(c+=this.DB,--a)),n>0&&(i=!0),i&&(o+=Utt(n));return i?o:"0"}s(sZt,"bnToString");function aZt(){var t=Ro();return bt.ZERO.subTo(this,t),t}s(aZt,"bnNegate");function cZt(){return this.s<0?this.negate():this}s(cZt,"bnAbs");function lZt(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(lZt,"bnCompareTo");function TZ(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(TZ,"nbits");function uZt(){return this.t<=0?0:this.DB*(this.t-1)+TZ(this.data[this.t-1]^this.s&this.DM)}s(uZt,"bnBitLength");function dZt(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(dZt,"bnpDLShiftTo");function fZt(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(fZt,"bnpDRShiftTo");function pZt(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,c;for(c=this.t-1;c>=0;--c)e.data[c+o+1]=this.data[c]>>n|a,a=(this.data[c]&i)<<r;for(c=o-1;c>=0;--c)e.data[c]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(pZt,"bnpLShiftTo");function mZt(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(mZt,"bnpRShiftTo");function hZt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(hZt,"bnpSubTo");function gZt(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&bt.ZERO.subTo(e,e)}s(gZt,"bnpMultiplyTo");function AZt(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(AZt,"bnpSquareTo");function yZt(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ro());var o=Ro(),a=this.s,c=t.s,l=this.DB-TZ(n.data[n.t-1]);l>0?(n.lShiftTo(l,o),i.lShiftTo(l,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var p=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,E=y-u,x=e??Ro();for(o.dlShiftTo(E,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),bt.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--E>=0;){var b=r.data[--y]==f?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,b,r,E,0,u))<b)for(o.dlShiftTo(E,x),r.subTo(x,r);r.data[y]<--b;)r.subTo(x,r)}e!=null&&(r.drShiftTo(u,e),a!=c&&bt.ZERO.subTo(e,e)),r.t=u,r.clamp(),l>0&&r.rShiftTo(l,r),a<0&&bt.ZERO.subTo(r,r)}}}s(yZt,"bnpDivRemTo");function CZt(t){var e=Ro();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(bt.ZERO)>0&&t.subTo(e,e),e}s(CZt,"bnMod");function sR(t){this.m=t}s(sR,"Classic");function EZt(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(EZt,"cConvert");function vZt(t){return t}s(vZt,"cRevert");function xZt(t){t.divRemTo(this.m,null,t)}s(xZt,"cReduce");function bZt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(bZt,"cMulTo");function IZt(t,e){t.squareTo(e),this.reduce(e)}s(IZt,"cSqrTo");sR.prototype.convert=EZt;sR.prototype.revert=vZt;sR.prototype.reduce=xZt;sR.prototype.mulTo=bZt;sR.prototype.sqrTo=IZt;function TZt(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(TZt,"bnpInvDigit");function aR(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(aR,"Montgomery");function wZt(t){var e=Ro();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(bt.ZERO)>0&&this.m.subTo(e,e),e}s(wZt,"montConvert");function _Zt(t){var e=Ro();return t.copyTo(e),this.reduce(e),e}s(_Zt,"montRevert");function SZt(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(SZt,"montReduce");function RZt(t,e){t.squareTo(e),this.reduce(e)}s(RZt,"montSqrTo");function kZt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(kZt,"montMulTo");aR.prototype.convert=wZt;aR.prototype.revert=_Zt;aR.prototype.reduce=SZt;aR.prototype.mulTo=kZt;aR.prototype.sqrTo=RZt;function PZt(){return(this.t>0?this.data[0]&1:this.s)==0}s(PZt,"bnpIsEven");function BZt(t,e){if(t>4294967295||t<1)return bt.ONE;var r=Ro(),n=Ro(),i=e.convert(this),o=TZ(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(BZt,"bnpExp");function DZt(t,e){var r;return t<256||e.isEven()?r=new sR(e):r=new aR(e),this.exp(t,r)}s(DZt,"bnModPowInt");bt.prototype.copyTo=rZt;bt.prototype.fromInt=nZt;bt.prototype.fromString=iZt;bt.prototype.clamp=oZt;bt.prototype.dlShiftTo=dZt;bt.prototype.drShiftTo=fZt;bt.prototype.lShiftTo=pZt;bt.prototype.rShiftTo=mZt;bt.prototype.subTo=hZt;bt.prototype.multiplyTo=gZt;bt.prototype.squareTo=AZt;bt.prototype.divRemTo=yZt;bt.prototype.invDigit=TZt;bt.prototype.isEven=PZt;bt.prototype.exp=BZt;bt.prototype.toString=sZt;bt.prototype.negate=aZt;bt.prototype.abs=cZt;bt.prototype.compareTo=lZt;bt.prototype.bitLength=uZt;bt.prototype.mod=CZt;bt.prototype.modPowInt=DZt;bt.ZERO=sT(0);bt.ONE=sT(1);function NZt(){var t=Ro();return this.copyTo(t),t}s(NZt,"bnClone");function LZt(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(LZt,"bnIntValue");function MZt(){return this.t==0?this.s:this.data[0]<<24>>24}s(MZt,"bnByteValue");function FZt(){return this.t==0?this.s:this.data[0]<<16>>16}s(FZt,"bnShortValue");function OZt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(OZt,"bnpChunkSize");function QZt(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(QZt,"bnSigNum");function UZt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=sT(r),i=Ro(),o=Ro(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(UZt,"bnpToRadix");function qZt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,c=0;c<t.length;++c){var l=qtt(t,c);if(l<0){t.charAt(c)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&bt.ZERO.subTo(this,this)}s(qZt,"bnpFromRadix");function HZt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(bt.ONE.shiftLeft(t-1),XEe,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(bt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(HZt,"bnpFromNumber");function WZt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(WZt,"bnToByteArray");function GZt(t){return this.compareTo(t)==0}s(GZt,"bnEquals");function jZt(t){return this.compareTo(t)<0?this:t}s(jZt,"bnMin");function VZt(t){return this.compareTo(t)>0?this:t}s(VZt,"bnMax");function $Zt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s($Zt,"bnpBitwiseTo");function zZt(t,e){return t&e}s(zZt,"op_and");function YZt(t){var e=Ro();return this.bitwiseTo(t,zZt,e),e}s(YZt,"bnAnd");function XEe(t,e){return t|e}s(XEe,"op_or");function KZt(t){var e=Ro();return this.bitwiseTo(t,XEe,e),e}s(KZt,"bnOr");function Htt(t,e){return t^e}s(Htt,"op_xor");function JZt(t){var e=Ro();return this.bitwiseTo(t,Htt,e),e}s(JZt,"bnXor");function Wtt(t,e){return t&~e}s(Wtt,"op_andnot");function XZt(t){var e=Ro();return this.bitwiseTo(t,Wtt,e),e}s(XZt,"bnAndNot");function ZZt(){for(var t=Ro(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(ZZt,"bnNot");function eer(t){var e=Ro();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(eer,"bnShiftLeft");function ter(t){var e=Ro();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(ter,"bnShiftRight");function rer(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(rer,"lbit");function ner(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+rer(this.data[t]);return this.s<0?this.t*this.DB:-1}s(ner,"bnGetLowestSetBit");function ier(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(ier,"cbit");function oer(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=ier(this.data[r]^e);return t}s(oer,"bnBitCount");function ser(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(ser,"bnTestBit");function aer(t,e){var r=bt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(aer,"bnpChangeBit");function cer(t){return this.changeBit(t,XEe)}s(cer,"bnSetBit");function ler(t){return this.changeBit(t,Wtt)}s(ler,"bnClearBit");function uer(t){return this.changeBit(t,Htt)}s(uer,"bnFlipBit");function der(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(der,"bnpAddTo");function fer(t){var e=Ro();return this.addTo(t,e),e}s(fer,"bnAdd");function per(t){var e=Ro();return this.subTo(t,e),e}s(per,"bnSubtract");function mer(t){var e=Ro();return this.multiplyTo(t,e),e}s(mer,"bnMultiply");function her(t){var e=Ro();return this.divRemTo(t,e,null),e}s(her,"bnDivide");function ger(t){var e=Ro();return this.divRemTo(t,null,e),e}s(ger,"bnRemainder");function Aer(t){var e=Ro(),r=Ro();return this.divRemTo(t,e,r),new Array(e,r)}s(Aer,"bnDivideAndRemainder");function yer(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(yer,"bnpDMultiply");function Cer(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(Cer,"bnpDAddOffset");function BO(){}s(BO,"NullExp");function Gtt(t){return t}s(Gtt,"nNop");function Eer(t,e,r){t.multiplyTo(e,r)}s(Eer,"nMulTo");function ver(t,e){t.squareTo(e)}s(ver,"nSqrTo");BO.prototype.convert=Gtt;BO.prototype.revert=Gtt;BO.prototype.mulTo=Eer;BO.prototype.sqrTo=ver;function xer(t){return this.exp(t,new BO)}s(xer,"bnPow");function ber(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(ber,"bnpMultiplyLowerTo");function Ier(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(Ier,"bnpMultiplyUpperTo");function YB(t){this.r2=Ro(),this.q3=Ro(),bt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(YB,"Barrett");function Ter(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Ro();return t.copyTo(e),this.reduce(e),e}s(Ter,"barrettConvert");function wer(t){return t}s(wer,"barrettRevert");function _er(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(_er,"barrettReduce");function Ser(t,e){t.squareTo(e),this.reduce(e)}s(Ser,"barrettSqrTo");function Rer(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(Rer,"barrettMulTo");YB.prototype.convert=Ter;YB.prototype.revert=wer;YB.prototype.reduce=_er;YB.prototype.mulTo=Rer;YB.prototype.sqrTo=Ser;function ker(t,e){var r=t.bitLength(),n,i=sT(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new sR(e):e.isEven()?o=new YB(e):o=new aR(e);var a=new Array,c=3,l=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var f=Ro();for(o.sqrTo(a[1],f);c<=u;)a[c]=Ro(),o.mulTo(f,a[c-2],a[c]),c+=2}var p=t.t-1,m,h=!0,g=Ro(),y;for(r=TZ(t.data[p])-1;p>=0;){for(r>=l?m=t.data[p]>>r-l&u:(m=(t.data[p]&(1<<r+1)-1)<<l-r,p>0&&(m|=t.data[p-1]>>this.DB+r-l)),c=n;(m&1)==0;)m>>=1,--c;if((r-=c)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;c>1;)o.sqrTo(i,g),o.sqrTo(g,i),c-=2;c>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(ker,"bnModPow");function Per(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(Per,"bnGCD");function Ber(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(Ber,"bnpModInt");function Der(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return bt.ZERO;for(var r=t.clone(),n=this.clone(),i=sT(1),o=sT(0),a=sT(0),c=sT(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!c.isEven())&&(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(o,c))}if(n.compareTo(bt.ONE)!=0)return bt.ZERO;if(c.compareTo(t)>=0)return c.subtract(t);if(c.signum()<0)c.addTo(t,c);else return c;return c.signum()<0?c.add(t):c}s(Der,"bnModInverse");var Og=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Ner=(1<<26)/Og[Og.length-1];function Ler(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Og[Og.length-1]){for(e=0;e<Og.length;++e)if(r.data[0]==Og[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Og.length;){for(var n=Og[e],i=e+1;i<Og.length&&n<Ner;)n*=Og[i++];for(n=r.modInt(n);e<i;)if(n%Og[e++]==0)return!1}return r.millerRabin(t)}s(Ler,"bnIsProbablePrime");function Mer(t){var e=this.subtract(bt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Fer(),o,a=0;a<t;++a){do o=new bt(this.bitLength(),i);while(o.compareTo(bt.ONE)<=0||o.compareTo(e)>=0);var c=o.modPow(n,this);if(c.compareTo(bt.ONE)!=0&&c.compareTo(e)!=0){for(var l=1;l++<r&&c.compareTo(e)!=0;)if(c=c.modPowInt(2,this),c.compareTo(bt.ONE)==0)return!1;if(c.compareTo(e)!=0)return!1}}return!0}s(Mer,"bnpMillerRabin");function Fer(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(Fer,"bnGetPrng");bt.prototype.chunkSize=OZt;bt.prototype.toRadix=UZt;bt.prototype.fromRadix=qZt;bt.prototype.fromNumber=HZt;bt.prototype.bitwiseTo=$Zt;bt.prototype.changeBit=aer;bt.prototype.addTo=der;bt.prototype.dMultiply=yer;bt.prototype.dAddOffset=Cer;bt.prototype.multiplyLowerTo=ber;bt.prototype.multiplyUpperTo=Ier;bt.prototype.modInt=Ber;bt.prototype.millerRabin=Mer;bt.prototype.clone=NZt;bt.prototype.intValue=LZt;bt.prototype.byteValue=MZt;bt.prototype.shortValue=FZt;bt.prototype.signum=QZt;bt.prototype.toByteArray=WZt;bt.prototype.equals=GZt;bt.prototype.min=jZt;bt.prototype.max=VZt;bt.prototype.and=YZt;bt.prototype.or=KZt;bt.prototype.xor=JZt;bt.prototype.andNot=XZt;bt.prototype.not=ZZt;bt.prototype.shiftLeft=eer;bt.prototype.shiftRight=ter;bt.prototype.getLowestSetBit=ner;bt.prototype.bitCount=oer;bt.prototype.testBit=ser;bt.prototype.setBit=cer;bt.prototype.clearBit=ler;bt.prototype.flipBit=uer;bt.prototype.add=fer;bt.prototype.subtract=per;bt.prototype.multiply=mer;bt.prototype.divide=her;bt.prototype.remainder=ger;bt.prototype.divideAndRemainder=Aer;bt.prototype.modPow=ker;bt.prototype.modInverse=Der;bt.prototype.pow=xer;bt.prototype.gcd=Per;bt.prototype.isProbablePrime=Ler});var KB=U((Mti,Ytt)=>{d();var sC=xi();tC();So();var $tt=Ytt.exports=sC.sha1=sC.sha1||{};sC.md.sha1=sC.md.algorithms.sha1=$tt;$tt.create=function(){ztt||Oer();var t=null,e=sC.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=sC.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=sC.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=a[1],a[1]=a[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),Vtt(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=sC.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(ZEe.substr(0,n.blockLength-a));for(var c,l,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)c=n.fullMessageLength[f+1]*8,l=c/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=c>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Vtt(p,r,i);var m=sC.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var ZEe=null,ztt=!1;function Oer(){ZEe="\x80",ZEe+=sC.util.fillString("\0",64),ztt=!0}s(Oer,"_init");function Vtt(t,e,r){for(var n,i,o,a,c,l,u,f,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,c=t.h3,l=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=c^o&(a^c),n=(i<<5|i>>>27)+u+l+1518500249+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+1859775393+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&a|c&(o^a),n=(i<<5|i>>>27)+u+l+2400959708+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^a^c,n=(i<<5|i>>>27)+u+l+3395469782+n,l=c,c=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+c|0,t.h4=t.h4+l|0,p-=64}}s(Vtt,"_update")});var eve=U((Qti,Jtt)=>{d();var aC=xi();So();Vm();KB();var Ktt=Jtt.exports=aC.pkcs1=aC.pkcs1||{};Ktt.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=aC.md.sha1.create(),a||(a=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=l,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),p="",m=l-e.length,h=0;h<m;h++)p+="\0";var g=f.getBytes()+p+""+e;if(!i)i=aC.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=wZ(i,c-o.digestLength-1,a),E=aC.util.xorBytes(g,y,g.length),x=wZ(E,o.digestLength,a),b=aC.util.xorBytes(i,x,i.length);return"\0"+b+E};Ktt.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=e.length,E.expectedLength=a,E}if(i===void 0?i=aC.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var c=i.digest().getBytes(),l=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),p=wZ(f,i.digestLength,o),m=aC.util.xorBytes(u,p,u.length),h=wZ(m,a-i.digestLength-1,o),g=aC.util.xorBytes(f,h,f.length),y=g.substring(0,i.digestLength),E=l!=="\0",x=0;x<i.digestLength;++x)E|=c.charAt(x)!==y.charAt(x);for(var b=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var P=g.charCodeAt(k),N=P&1^1,M=b?65534:0;E|=P&M,b=b&N,_+=b}if(E||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function wZ(t,e,r){r||(r=aC.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s(wZ,"rsa_mgf1")});var rve=U((Hti,tve)=>{d();var aT=xi();So();DO();Vm();(function(){if(aT.prime){tve.exports=aT.prime;return}var t=tve.exports=aT.prime=aT.prime||{},e=aT.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||aT.random,E={nextBytes:s(function(x){for(var b=y.getBytesSync(x.length),_=0;_<x.length;++_)x[_]=b.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,E,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?l(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),E=0,x=f(y.bitLength());"millerRabinTests"in h&&(x=h.millerRabinTests);var b=10;"maxBlockTime"in h&&(b=h.maxBlockTime),c(y,p,m,E,x,b,g)}s(a,"primeincFindPrimeWithoutWorkers");function c(p,m,h,g,y,E,x){var b=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return x(null,p);p.dAddOffset(r[g++%8],0)}while(E<0||+new Date-b<E);aT.util.setImmediate(function(){c(p,m,h,g,y,E,x)})}s(c,"_primeinc");function l(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),E=h.workers,x=h.workLoad||100,b=x*30/8,_=h.workerScript||"forge/prime.worker.js";if(E===-1)return aT.util.estimateCores(function(P,N){P&&(N=2),E=N-1,k()});k();function k(){E=Math.max(1,E);for(var P=[],N=0;N<E;++N)P[N]=new Worker(_);for(var M=E,N=0;N<E;++N)P[N].addEventListener("message",pe);var J=!1;function pe(Y){if(!J){--M;var G=Y.data;if(G.found){for(var H=0;H<P.length;++H)P[H].terminate();return J=!0,g(null,new e(G.prime,16))}y.bitLength()>p&&(y=u(p,m));var ce=y.toString(16);Y.target.postMessage({hex:ce,workLoad:x}),y.dAddOffset(b,0)}}s(pe,"workerMessage")}s(k,"generate")}s(l,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function f(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(f,"getMillerRabinTests")})()});var NO=U((jti,irt)=>{d();var sn=xi();Fg();DO();oT();eve();rve();Vm();So();typeof Eo>"u"&&(Eo=sn.jsbn.BigInteger);var Eo,nve=sn.util.isNodejs?require("crypto"):null,He=sn.asn1,zm=sn.util;sn.pki=sn.pki||{};irt.exports=sn.pki.rsa=sn.rsa=sn.rsa||{};var ui=sn.pki,Qer=[6,4,2,4,2,4,6,2],Uer={name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},qer={name:"RSAPrivateKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Her={name:"RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Wer=sn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ger={name:"DigestInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:He.Class.UNIVERSAL,type:He.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},jer=s(function(t){var e;if(t.algorithm in ui.oids)e=ui.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=He.oidToDer(e).getBytes(),i=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]),o=He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[]);o.value.push(He.create(He.Class.UNIVERSAL,He.Type.OID,!1,n)),o.value.push(He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,""));var a=He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),He.toDer(i).getBytes()},"emsaPkcs1v15encode"),rrt=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Eo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Eo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Eo(sn.util.bytesToHex(sn.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Eo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");ui.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=nrt(t,e,r)):(i=sn.util.createBuffer(),i.putBytes(t));for(var a=new Eo(i.toHex(),16),c=rrt(a,e,n),l=c.toString(16),u=sn.util.createBuffer(),f=o-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(sn.util.hexToBytes(l)),u.getBytes()};ui.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new Eo(sn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=rrt(a,e,r),l=c.toString(16),u=sn.util.createBuffer(),f=i-Math.ceil(l.length/2);f>0;)u.putByte(0),--f;return u.putBytes(sn.util.hexToBytes(l)),n!==!1?_Z(u.getBytes(),e,r):u.getBytes()};ui.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||sn.random,i={nextBytes:s(function(c){for(var l=n.getBytesSync(c.length),u=0;u<c.length;++u)c[u]=l.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new Eo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};ui.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Eo(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,c=0;t.keys===null&&(e<=0||c<e);){if(t.state===0){var l=t.p===null?t.pBits:t.qBits,u=l-1;t.pqState===0?(t.num=new Eo(l,t.rng),t.num.testBit(u)||t.num.bitwiseTo(Eo.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>l?t.pqState=0:t.num.isProbablePrime($er(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Qer[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Eo.ONE),t.q1=t.q.subtract(Eo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Eo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)}}a=+new Date,c+=a-o,o=a}return t.keys!==null};ui.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!sn.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Xtt("generateKeyPair"))return nve.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(c,l,u){if(c)return n(c);n(null,{privateKey:ui.privateKeyFromPem(u),publicKey:ui.publicKeyFromPem(l)})});if(Ztt("generateKey")&&Ztt("exportKey"))return zm.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:trt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(c){return zm.globalScope.crypto.subtle.exportKey("pkcs8",c.privateKey)}).then(void 0,function(c){n(c)}).then(function(c){if(c){var l=ui.privateKeyFromAsn1(He.fromDer(sn.util.createBuffer(c)));n(null,{privateKey:l,publicKey:ui.setRsaPublicKey(l.n,l.e)})}});if(ert("generateKey")&&ert("exportKey")){var i=zm.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:trt(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(c){var l=c.target.result,u=zm.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(f){var p=f.target.result,m=ui.privateKeyFromAsn1(He.fromDer(sn.util.createBuffer(p)));n(null,{privateKey:m,publicKey:ui.setRsaPublicKey(m.n,m.e)})},u.onerror=function(f){n(f)}},i.onerror=function(c){n(c)};return}}else if(Xtt("generateKeyPairSync")){var o=nve.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ui.privateKeyFromPem(o.privateKey),publicKey:ui.publicKeyFromPem(o.publicKey)}}}var a=ui.rsa.createKeyPairGenerationState(t,e,r);if(!n)return ui.rsa.stepKeyPairGenerationState(a,0),a.keys;Ver(a,r,n)};ui.setRsaPublicKey=ui.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(c,l,u){return nrt(c,l,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(c,l){return sn.pkcs1.encode_rsa_oaep(l,c,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(c){return c},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return ui.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(l,u){u=_Z(u,r,!0);var f=He.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!He.validate(f,Ger,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=He.derToOid(p.algorithmIdentifier);if(!(g===sn.oids.md2||g===sn.oids.md5||g===sn.oids.sha1||g===sn.oids.sha224||g===sn.oids.sha256||g===sn.oids.sha384||g===sn.oids.sha512||g===sn.oids["sha512-224"]||g===sn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===sn.oids.md2||g===sn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(l,u){return u=_Z(u,r,!0),l===u},"verify")});var c=ui.rsa.decrypt(i,r,!0,!1);return o.verify(n,c,r.n.bitLength())},r};ui.setRsaPrivateKey=ui.rsa.setPrivateKey=function(t,e,r,n,i,o,a,c){var l={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:c};return l.decrypt=function(u,f,p){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var m=ui.rsa.decrypt(u,l,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:_Z};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:s(function(h,g){return sn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(m,l,!1)},l.sign=function(u,f){var p=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:jer},p=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:s(function(){return u},"encode")},p=1);var m=f.encode(u,l.n.bitLength());return ui.rsa.encrypt(m,l,p)},l};ui.wrapRsaPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.OCTETSTRING,!1,He.toDer(t).getBytes())])};ui.privateKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,Uer,e,r)&&(t=He.fromDer(sn.util.createBuffer(e.privateKey))),e={},r=[],!He.validate(t,qer,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,c,l,u,f,p;return i=sn.util.createBuffer(e.privateKeyModulus).toHex(),o=sn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=sn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),c=sn.util.createBuffer(e.privateKeyPrime1).toHex(),l=sn.util.createBuffer(e.privateKeyPrime2).toHex(),u=sn.util.createBuffer(e.privateKeyExponent1).toHex(),f=sn.util.createBuffer(e.privateKeyExponent2).toHex(),p=sn.util.createBuffer(e.privateKeyCoefficient).toHex(),ui.setRsaPrivateKey(new Eo(i,16),new Eo(o,16),new Eo(a,16),new Eo(c,16),new Eo(l,16),new Eo(u,16),new Eo(f,16),new Eo(p,16))};ui.privateKeyToAsn1=ui.privateKeyToRSAPrivateKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,He.integerToDer(0).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.e)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.d)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.p)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.q)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.dP)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.dQ)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.qInv))])};ui.publicKeyFromAsn1=function(t){var e={},r=[];if(He.validate(t,Wer,e,r)){var n=He.derToOid(e.publicKeyOid);if(n!==ui.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!He.validate(t,Her,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=sn.util.createBuffer(e.publicKeyModulus).toHex(),a=sn.util.createBuffer(e.publicKeyExponent).toHex();return ui.setRsaPublicKey(new Eo(o,16),new Eo(a,16))};ui.publicKeyToAsn1=ui.publicKeyToSubjectPublicKeyInfo=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.OID,!1,He.oidToDer(ui.oids.rsaEncryption).getBytes()),He.create(He.Class.UNIVERSAL,He.Type.NULL,!1,"")]),He.create(He.Class.UNIVERSAL,He.Type.BITSTRING,!1,[ui.publicKeyToRSAPublicKey(t)])])};ui.publicKeyToRSAPublicKey=function(t){return He.create(He.Class.UNIVERSAL,He.Type.SEQUENCE,!0,[He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.n)),He.create(He.Class.UNIVERSAL,He.Type.INTEGER,!1,cC(t.e))])};function nrt(t,e,r){var n=sn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,c;if(r===0||r===1){c=r===0?0:255;for(var l=0;l<a;++l)n.putByte(c)}else for(;a>0;){for(var u=0,f=sn.random.getBytes(a),l=0;l<a;++l)c=f.charCodeAt(l),c===0?++u:n.putByte(c);a=u}return n.putByte(0),n.putBytes(t),n}s(nrt,"_encodePkcs1_v1_5");function _Z(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=sn.util.createBuffer(t),a=o.getByte(),c=o.getByte();if(a!==0||r&&c!==0&&c!==1||!r&&c!=2||r&&c===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var l=0;if(c===0){l=i-3-n;for(var u=0;u<l;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(c===1)for(l=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++l}else if(c===2)for(l=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++l}var f=o.getByte();if(f!==0||l!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(_Z,"_decodePkcs1_v1_5");function Ver(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(c,l){if(c)return r(c);if(t.p=l,t.q!==null)return a(c,t.q);o(t.qBits,a)})}s(i,"generate");function o(c,l){sn.prime.generateProbablePrime(c,n,l)}s(o,"getPrime");function a(c,l){if(c)return r(c);if(t.q=l,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Eo.ONE).gcd(t.e).compareTo(Eo.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(Eo.ONE),t.q1=t.q.subtract(Eo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Eo.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:ui.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:ui.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(Ver,"_generateKeyPair");function cC(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=sn.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(cC,"_bnToBytes");function $er(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s($er,"_getMillerRabinTests");function Xtt(t){return sn.util.isNodejs&&typeof nve[t]=="function"}s(Xtt,"_detectNodeCrypto");function Ztt(t){return typeof zm.globalScope<"u"&&typeof zm.globalScope.crypto=="object"&&typeof zm.globalScope.crypto.subtle=="object"&&typeof zm.globalScope.crypto.subtle[t]=="function"}s(Ztt,"_detectSubtleCrypto");function ert(t){return typeof zm.globalScope<"u"&&typeof zm.globalScope.msCrypto=="object"&&typeof zm.globalScope.msCrypto.subtle=="object"&&typeof zm.globalScope.msCrypto.subtle[t]=="function"}s(ert,"_detectSubtleMsCrypto");function trt(t){for(var e=sn.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(trt,"_intToUint8Array")});var ive=U((zti,lrt)=>{d();var mr=xi();iT();Fg();PO();tC();oT();xZ();oR();Vm();YEe();NO();So();typeof ort>"u"&&(ort=mr.jsbn.BigInteger);var ort,lt=mr.asn1,gi=mr.pki=mr.pki||{};lrt.exports=gi.pbe=mr.pbe=mr.pbe||{};var cR=gi.oids,zer={name:"EncryptedPrivateKeyInfo",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Yer={name:"PBES2Algorithms",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ker={name:"pkcs-12PbeParams",tagClass:lt.Class.UNIVERSAL,type:lt.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:lt.Class.UNIVERSAL,type:lt.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:lt.Class.UNIVERSAL,type:lt.Type.INTEGER,constructed:!1,capture:"iterations"}]};gi.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=mr.random.getBytesSync(r.saltSize),i=r.count,o=lt.integerToDer(i),a,c,l;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,p;switch(r.algorithm){case"aes128":a=16,u=16,f=cR["aes128-CBC"],p=mr.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,f=cR["aes192-CBC"],p=mr.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,f=cR["aes256-CBC"],p=mr.aes.createEncryptionCipher;break;case"des":a=8,u=8,f=cR.desCBC,p=mr.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=crt(h),y=mr.pkcs5.pbkdf2(e,n,i,a,g),E=mr.random.getBytesSync(u),x=p(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes();var b=Jer(n,o,a,h);c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(cR.pkcs5PBES2).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(cR.pkcs5PBKDF2).getBytes()),b]),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(f).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){a=24;var _=new mr.util.ByteBuffer(n),y=gi.pbe.generatePkcs12Key(e,_,1,i,a),E=gi.pbe.generatePkcs12Key(e,_,2,i,a),x=mr.des.createEncryptionCipher(y);x.start(E),x.update(lt.toDer(t)),x.finish(),l=x.output.getBytes(),c=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(cR["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,n),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[c,lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,l)]);return k};gi.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!lt.validate(t,zer,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=lt.derToOid(n.encryptionOid),c=gi.pbe.getCipher(a,n.encryptionParams,e),l=mr.util.createBuffer(n.encryptedData);return c.update(l),c.finish()&&(r=lt.fromDer(c.output)),r};gi.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:lt.toDer(t).getBytes()};return mr.pem.encode(r,{maxline:e})};gi.encryptedPrivateKeyFromPem=function(t){var e=mr.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return lt.fromDer(e.body)};gi.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=gi.wrapRsaPrivateKey(gi.privateKeyToAsn1(t));return n=gi.encryptPrivateKeyInfo(n,e,r),gi.encryptedPrivateKeyToPem(n)}var i,o,a,c;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=mr.random.getBytesSync(16),c=mr.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=mr.random.getBytesSync(8),c=mr.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=mr.random.getBytesSync(8),c=mr.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var u=mr.pbe.opensslDeriveBytes(e,o.substr(0,8),a),f=c(u);f.start(o),f.update(lt.toDer(gi.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:mr.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return mr.pem.encode(p)};gi.decryptRsaPrivateKey=function(t,e){var r=null,n=mr.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=mr.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=mr.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=mr.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=mr.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=mr.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return mr.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return mr.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return mr.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var c=mr.util.hexToBytes(n.dekInfo.parameters),l=mr.pbe.opensslDeriveBytes(e,c.substr(0,8),o),u=a(l);if(u.start(c),u.update(mr.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=gi.decryptPrivateKeyInfo(lt.fromDer(r),e):r=lt.fromDer(r),r!==null&&(r=gi.privateKeyFromAsn1(r)),r};gi.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,c;if(typeof o>"u"||o===null){if(!("sha1"in mr.md))throw new Error('"sha1" hash algorithm unavailable.');o=mr.md.sha1.create()}var l=o.digestLength,u=o.blockLength,f=new mr.util.ByteBuffer,p=new mr.util.ByteBuffer;if(t!=null){for(c=0;c<t.length;c++)p.putInt16(t.charCodeAt(c));p.putInt16(0)}var m=p.length(),h=e.length(),g=new mr.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),E=new mr.util.ByteBuffer;for(c=0;c<y;c++)E.putByte(e.at(c%h));var x=u*Math.ceil(m/u),b=new mr.util.ByteBuffer;for(c=0;c<x;c++)b.putByte(p.at(c%m));var _=E;_.putBuffer(b);for(var k=Math.ceil(i/l),P=1;P<=k;P++){var N=new mr.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var M=0;M<n;M++)o.start(),o.update(N.getBytes()),N=o.digest();var J=new mr.util.ByteBuffer;for(c=0;c<u;c++)J.putByte(N.at(c%l));var pe=Math.ceil(h/u)+Math.ceil(m/u),Y=new mr.util.ByteBuffer;for(a=0;a<pe;a++){var G=new mr.util.ByteBuffer(_.getBytes(u)),H=511;for(c=J.length()-1;c>=0;c--)H=H>>8,H+=J.at(c)+G.at(c),G.setAt(c,H&255);Y.putBuffer(G)}_=Y,f.putBuffer(N)}return f.truncate(f.length()-i),f};gi.pbe.getCipher=function(t,e,r){switch(t){case gi.oids.pkcs5PBES2:return gi.pbe.getCipherForPBES2(t,e,r);case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:return gi.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};gi.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!lt.validate(e,Yer,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=lt.derToOid(n.kdfOid),t!==gi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=lt.derToOid(n.encOid),t!==gi.oids["aes128-CBC"]&&t!==gi.oids["aes192-CBC"]&&t!==gi.oids["aes256-CBC"]&&t!==gi.oids["des-EDE3-CBC"]&&t!==gi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,c=mr.util.createBuffer(n.kdfIterationCount);c=c.getInt(c.length()<<3);var l,u;switch(gi.oids[t]){case"aes128-CBC":l=16,u=mr.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=mr.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=mr.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=mr.des.createDecryptionCipher;break;case"desCBC":l=8,u=mr.des.createDecryptionCipher;break}var f=art(n.prfOid),p=mr.pkcs5.pbkdf2(r,a,c,l,f),m=n.encIv,h=u(p);return h.start(m),h};gi.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!lt.validate(e,Ker,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=mr.util.createBuffer(n.salt),c=mr.util.createBuffer(n.iterations);c=c.getInt(c.length()<<3);var l,u,f;switch(t){case gi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,f=mr.des.startDecrypting;break;case gi.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,f=s(function(y,E){var x=mr.rc2.createDecryptionCipher(y,40);return x.start(E,null),x},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=art(n.prfOid),m=gi.pbe.generatePkcs12Key(r,a,1,c,l,p);p.start();var h=gi.pbe.generatePkcs12Key(r,a,2,c,u,p);return f(m,h)};gi.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in mr.md))throw new Error('"md5" hash algorithm unavailable.');n=mr.md.md5.create()}e===null&&(e="");for(var i=[srt(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(srt(n,i[a-1]+t+e));return i.join("").substr(0,r)};function srt(t,e){return t.start().update(e).digest().getBytes()}s(srt,"hash");function art(t){var e;if(!t)e="hmacWithSHA1";else if(e=gi.oids[lt.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return crt(e)}s(art,"prfOidToMessageDigest");function crt(t){var e=mr.md;switch(t){case"hmacWithSHA224":e=mr.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(crt,"prfAlgorithmToMessageDigest");function Jer(t,e,r,n){var i=lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OCTETSTRING,!1,t),lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(lt.create(lt.Class.UNIVERSAL,lt.Type.INTEGER,!1,mr.util.hexToBytes(r.toString(16))),lt.create(lt.Class.UNIVERSAL,lt.Type.SEQUENCE,!0,[lt.create(lt.Class.UNIVERSAL,lt.Type.OID,!1,lt.oidToDer(gi.oids[n]).getBytes()),lt.create(lt.Class.UNIVERSAL,lt.Type.NULL,!1,"")])),i}s(Jer,"createPbkdf2Params")});var ove=U((Jti,frt)=>{d();var JB=xi();Fg();So();var ar=JB.asn1,XB=frt.exports=JB.pkcs7asn1=JB.pkcs7asn1||{};JB.pkcs7=JB.pkcs7||{};JB.pkcs7.asn1=XB;var urt={name:"ContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};XB.contentInfoValidator=urt;var drt={name:"EncryptedContentInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};XB.envelopedDataValidator={name:"EnvelopedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(drt)};XB.encryptedDataValidator={name:"EncryptedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"}].concat(drt)};var Xer={name:"SignerInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};XB.signedDataValidator={name:"SignedData",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},urt,{name:"SignedData.Certificates",tagClass:ar.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ar.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SET,capture:"signerInfos",optional:!0,value:[Xer]}]};XB.recipientInfoValidator={name:"RecipientInfo",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ar.Class.UNIVERSAL,type:ar.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ar.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ar.Class.UNIVERSAL,type:ar.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var sve=U((Zti,prt)=>{d();var lR=xi();So();lR.mgf=lR.mgf||{};var Zer=prt.exports=lR.mgf.mgf1=lR.mgf1=lR.mgf1||{};Zer.create=function(t){var e={generate:s(function(r,n){for(var i=new lR.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var c=new lR.util.ByteBuffer;c.putInt32(a),t.start(),t.update(r+c.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var hrt=U((rri,mrt)=>{d();var SZ=xi();sve();mrt.exports=SZ.mgf=SZ.mgf||{};SZ.mgf.mgf1=SZ.mgf1});var RZ=U((iri,grt)=>{d();var uR=xi();Vm();So();var etr=grt.exports=uR.pss=uR.pss||{};etr.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=uR.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||uR.random,c={};return c.encode=function(l,u){var f,p=u-1,m=Math.ceil(p/8),h=l.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new uR.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var E=e.digest().getBytes(),x=new uR.util.ByteBuffer;x.fillWithByte(0,m-o-n-2),x.putByte(1),x.putBytes(g);var b=x.getBytes(),_=m-n-1,k=r.generate(E,_),P="";for(f=0;f<_;f++)P+=String.fromCharCode(b.charCodeAt(f)^k.charCodeAt(f));var N=65280>>8*m-p&255;return P=String.fromCharCode(P.charCodeAt(0)&~N)+P.substr(1),P+E+"\xBC"},c.verify=function(l,u,f){var p,m=f-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),E=u.substr(g,n),x=65280>>8*h-m&255;if((y.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(E,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^b.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~x)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=_.substr(-o),N=new uR.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(l),N.putBytes(P),e.start(),e.update(N.getBytes());var M=e.digest().getBytes();return E===M},c}});var BZ=U((sri,vrt)=>{d();var an=xi();iT();Fg();PO();tC();hrt();oT();oR();RZ();NO();So();var j=an.asn1,jt=vrt.exports=an.pki=an.pki||{},vo=jt.oids,Ha={};Ha.CN=vo.commonName;Ha.commonName="CN";Ha.C=vo.countryName;Ha.countryName="C";Ha.L=vo.localityName;Ha.localityName="L";Ha.ST=vo.stateOrProvinceName;Ha.stateOrProvinceName="ST";Ha.O=vo.organizationName;Ha.organizationName="O";Ha.OU=vo.organizationalUnitName;Ha.organizationalUnitName="OU";Ha.E=vo.emailAddress;Ha.emailAddress="E";var yrt=an.pki.rsa.publicKeyValidator,ttr={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},yrt,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},rtr={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},ntr={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},yrt,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},itr={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[ntr,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};jt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var c=0;c<n.value.length;++c)o={},i=n.value[c],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in vo&&(o.name=vo[o.type],o.name in Ha&&(o.shortName=Ha[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};jt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=j.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var c={};if(c.type=i,c.value=o[a].value,c.valueTagClass=o[a].type,c.type in vo&&(c.name=vo[c.type],c.name in Ha&&(c.shortName=Ha[c.name])),c.type===vo.extensionRequest){c.extensions=[];for(var l=0;l<c.value.length;++l)c.extensions.push(jt.certificateExtensionFromAsn1(c.value[l]))}e.push(c)}return e};function cT(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(cT,"_getAttribute");var kZ=s(function(t,e,r){var n={};if(t!==vo["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:vo.sha1},mgf:{algorithmOid:vo.mgf1,hash:{algorithmOid:vo.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,rtr,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=j.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),PZ=s(function(t){switch(vo[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return an.md.sha1.create();case"md5WithRSAEncryption":return an.md.md5.create();case"sha256WithRSAEncryption":return an.md.sha256.create();case"sha384WithRSAEncryption":return an.md.sha384.create();case"sha512WithRSAEncryption":return an.md.sha512.create();case"RSASSA-PSS":return an.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Crt=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case vo.sha1WithRSAEncryption:case vo.sha1WithRSASignature:break;case vo["RSASSA-PSS"]:var n,i;if(n=vo[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||an.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=vo[e.signatureParameters.mgf.algorithmOid],i===void 0||an.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=an.mgf[i].create(an.md[n].create()),n=vo[e.signatureParameters.hash.algorithmOid],n===void 0||an.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=an.pss.create(an.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");jt.certificateFromPem=function(t,e,r){var n=an.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificateFromAsn1(o,e)};jt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:j.toDer(jt.certificateToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.publicKeyFromPem=function(t){var e=an.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=j.fromDer(e.body);return jt.publicKeyFromAsn1(n)};jt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:j.toDer(jt.publicKeyToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||an.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=j.toDer(jt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(jt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};jt.certificationRequestFromPem=function(t,e,r){var n=an.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(n.body,r);return jt.certificationRequestFromAsn1(o,e)};jt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:j.toDer(jt.certificationRequestToAsn1(t)).getBytes()};return an.pem.encode(r,{maxline:e})};jt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return cT(t.issuer,e)},t.issuer.addField=function(e){Ym([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return cT(t.subject,e)},t.subject.addField=function(e){Ym([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Ym(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Ym(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)Ert(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||an.md.sha1.create();var n=vo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=jt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=PZ({signatureOid:e.signatureOid,type:"certificate"});var c=e.tbsCertificate||jt.getTBSCertificate(e),l=j.toDer(c);a.update(l.getBytes())}return a!==null&&(r=Crt({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,c=0;r&&c<n.attributes.length;++c)o=n.attributes[c],a=i.attributes[c],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return jt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=vo.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return an.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};jt.certificateFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,ttr,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var c=an.util.createBuffer(r.certSerialNumber);a.serialNumber=c.toHex(),a.signatureOid=an.asn1.derToOid(r.certSignatureOid),a.signatureParameters=kZ(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=an.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=kZ(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var l=[];if(r.certValidity1UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&l.push(j.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&l.push(j.generalizedTimeToDate(r.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=r.tbsCertificate,e){a.md=PZ({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var f=an.md.sha1.create(),p=j.toDer(r.certIssuer);f.update(p.getBytes()),a.issuer.getField=function(g){return cT(a.issuer,g)},a.issuer.addField=function(g){Ym([g]),a.issuer.attributes.push(g)},a.issuer.attributes=jt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=f.digest().toHex();var m=an.md.sha1.create(),h=j.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return cT(a.subject,g)},a.subject.addField=function(g){Ym([g]),a.subject.attributes.push(g)},a.subject.attributes=jt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=jt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};jt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(jt.certificateExtensionFromAsn1(n.value[i]));return e};jt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in vo){if(e.name=vo[e.id],e.name==="keyUsage"){var r=j.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=j.fromDer(e.value);r.value.length>0&&r.value[0].type===j.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===j.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=j.fromDer(e.value),a=0;a<r.value.length;++a){var c=j.derToOid(r.value[a].value);c in vo?e[vo[c]]=!0:e[c]=!0}else if(e.name==="nsCertType"){var r=j.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var l,r=j.fromDer(e.value),u=0;u<r.value.length;++u){l=r.value[u];var f={type:l.type,value:l.value};switch(e.altNames.push(f),l.type){case 1:case 2:case 6:break;case 7:f.ip=an.util.bytesToIP(l.value);break;case 8:f.oid=j.derToOid(l.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=j.fromDer(e.value);e.subjectKeyIdentifier=an.util.bytesToHex(r.value)}}return e};jt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!j.validate(t,itr,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=j.derToOid(r.publicKeyOid);if(o!==jt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=jt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=an.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=kZ(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=an.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=kZ(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=PZ({signatureOid:a.signatureOid,type:"certification request"});var c=j.toDer(a.certificationRequestInfo);a.md.update(c.getBytes())}var l=an.md.sha1.create();return a.subject.getField=function(u){return cT(a.subject,u)},a.subject.addField=function(u){Ym([u]),a.subject.attributes.push(u)},a.subject.attributes=jt.RDNAttributesAsArray(r.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=jt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return cT(a,u)},a.addAttribute=function(u){Ym([u]),a.attributes.push(u)},a.attributes=jt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};jt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return cT(t.subject,e)},t.subject.addField=function(e){Ym([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return cT(t,e)},t.addAttribute=function(e){Ym([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Ym(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Ym(e),t.attributes=e},t.sign=function(e,r){t.md=r||an.md.sha1.create();var n=vo[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=jt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=PZ({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||jt.getCertificationRequestInfo(t),i=j.toDer(n);r.update(i.getBytes())}return r!==null&&(e=Crt({certificate:t,md:r,signature:t.signature})),e},t};function ZB(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,c=j.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass,c===j.Type.UTF8&&(a=an.util.encodeUtf8(a))),n=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(r.type).getBytes()),j.create(j.Class.UNIVERSAL,c,!1,a)])]),e.value.push(n)}return e}s(ZB,"_dnToAsn1");function Ym(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in jt.oids?e.name=jt.oids[e.type]:e.shortName&&e.shortName in Ha&&(e.name=jt.oids[Ha[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in jt.oids)e.type=jt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in Ha&&(e.shortName=Ha[e.name]),e.type===vo.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(jt.certificateExtensionToAsn1(Ert(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Ym,"_fillMissingFields");function Ert(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in jt.oids&&(t.name=jt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in jt.oids)t.id=jt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var l in t)t[l]===!0&&(l in vo?c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(vo[l]).getBytes())):l.indexOf(".")!==-1&&c.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=an.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var c=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[ZB(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];c.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=an.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);c.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var c=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),E=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,f=0;f<t.altNames.length;++f){u=t.altNames[f];var a=u.value;if(u.type===7&&u.ip){if(a=an.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));E.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(Ert,"_fillMissingExtensionFields");function ave(t,e){switch(t){case vo["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,r);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(ave,"_signatureParametersToAsn1");function otr(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=an.util.encodeUtf8(o));var c=!1;"valueConstructed"in i&&(c=i.valueConstructed);var l=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,c,o)])]);e.value.push(l)}return e}s(otr,"_CRIAttributesToAsn1");var str=new Date("1950-01-01T00:00:00Z"),atr=new Date("2050-01-01T00:00:00Z");function Art(t){return t>=str&&t<atr?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(Art,"_dateToAsn1");jt.getTBSCertificate=function(t){var e=Art(t.validity.notBefore),r=Art(t.validity.notAfter),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,an.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),ave(t.siginfo.algorithmOid,t.siginfo.parameters)]),ZB(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,r]),ZB(t.subject),jt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(jt.certificateExtensionsToAsn1(t.extensions)),n};jt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),ZB(t.subject),jt.publicKeyToAsn1(t.publicKey),otr(t)]);return e};jt.distinguishedNameToAsn1=function(t){return ZB(t)};jt.certificateToAsn1=function(t){var e=t.tbsCertificate||jt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),ave(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(jt.certificateExtensionToAsn1(t[n]));return e};jt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=j.toDer(r).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,r)),e};jt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||jt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),ave(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};jt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var c=r(a.issuer);return c},e.addCertificate=function(a){if(typeof a=="string"&&(a=an.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var c=e.certs[a.subject.hash];an.util.isArray(c)||(c=[c]),c.push(a),e.certs[a.subject.hash]=c}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=an.pki.certificateFromPem(a));var c=r(a.subject);if(!c)return!1;an.util.isArray(c)||(c=[c]);for(var l=j.toDer(jt.certificateToAsn1(a)).getBytes(),u=0;u<c.length;++u){var f=j.toDer(jt.certificateToAsn1(c[u])).getBytes();if(l===f)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var c in e.certs)if(e.certs.hasOwnProperty(c)){var l=e.certs[c];if(!an.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},e.removeCertificate=function(a){var c;if(typeof a=="string"&&(a=an.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var l=r(a.subject);if(!an.util.isArray(l))return c=e.certs[a.subject.hash],delete e.certs[a.subject.hash],c;for(var u=j.toDer(jt.certificateToAsn1(a)).getBytes(),f=0;f<l.length;++f){var p=j.toDer(jt.certificateToAsn1(l[f])).getBytes();u===p&&(c=l[f],l.splice(f,1))}return l.length===0&&delete e.certs[a.subject.hash],c};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var c=an.md.sha1.create();a.attributes=jt.RDNAttributesAsArray(ZB(a),c),a.hash=c.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};jt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};jt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,c=0;do{var l=e.shift(),u=null,f=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:jt.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(l),u===null&&l.isIssuer(l)&&(f=!0,u=l),u){var p=u;an.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(l)}catch{}}m||(a={message:"Certificate signature is invalid.",error:jt.certificateError.bad_certificate})}a===null&&(!u||f)&&!t.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:jt.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:jt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:jt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||f))){var E=l.getExtension("basicConstraints"),x=l.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:jt.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:jt.certificateError.bad_certificate}),a===null&&x!==null&&"pathLenConstraint"in E){var b=c-1;b>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:jt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,c,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:jt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!an.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++c}while(e.length>0);return!0}});var lve=U((lri,brt)=>{d();var _s=xi();Fg();VB();oT();ove();ive();Vm();NO();KB();So();BZ();var Ie=_s.asn1,Ui=_s.pki,MO=brt.exports=_s.pkcs12=_s.pkcs12||{},xrt={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},ctr={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},xrt,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},ltr={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},utr={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},dtr={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function LO(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var c=t[o].safeBags[a];if(!(n!==void 0&&c.type!==n)){if(e===null){i.push(c);continue}c.attributes[e]!==void 0&&c.attributes[e].indexOf(r)>=0&&i.push(c)}}return i}s(LO,"_getBagsByAttribute");MO.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,ctr,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(E){var x={},b;return"localKeyId"in E?b=E.localKeyId:"localKeyIdHex"in E&&(b=_s.util.hexToBytes(E.localKeyIdHex)),b===void 0&&!("friendlyName"in E)&&"bagType"in E&&(x[E.bagType]=LO(a.safeContents,null,null,E.bagType)),b!==void 0&&(x.localKeyId=LO(a.safeContents,"localKeyId",b,E.bagType)),"friendlyName"in E&&(x.friendlyName=LO(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),x},"getBags"),getBagsByFriendlyName:s(function(E,x){return LO(a.safeContents,"friendlyName",E,x)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(E,x){return LO(a.safeContents,"localKeyId",E,x)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==Ui.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var c=n.content.value[0];if(c.tagClass!==Ie.Class.UNIVERSAL||c.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(c=cve(c),n.mac){var l=null,u=0,f=Ie.derToOid(n.macAlgorithm);switch(f){case Ui.oids.sha1:l=_s.md.sha1.create(),u=20;break;case Ui.oids.sha256:l=_s.md.sha256.create(),u=32;break;case Ui.oids.sha384:l=_s.md.sha384.create(),u=48;break;case Ui.oids.sha512:l=_s.md.sha512.create(),u=64;break;case Ui.oids.md5:l=_s.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+f);var p=new _s.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(_s.util.bytesToHex(n.macIterations),16):1,h=MO.generateKey(r,p,3,m,u,l),g=_s.hmac.create();g.start(l,h),g.update(c.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return ftr(a,c.value,e,r),a};function cve(t){if(t.composed||t.constructed){for(var e=_s.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(cve,"_decodePkcs7Data");function ftr(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},c=[];if(!Ie.validate(o,xrt,a,c)){var l=new Error("Cannot read ContentInfo.");throw l.errors=c,l}var u={encrypted:!1},f=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case Ui.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");f=cve(p).value;break;case Ui.oids.encryptedData:f=ptr(p,n),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=Ie.derToOid(a.contentType),l}u.safeBags=mtr(f,r,n),t.safeContents.push(u)}}s(ftr,"_decodeAuthenticatedSafe");function ptr(t,e){var r={},n=[];if(!Ie.validate(t,_s.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==Ui.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=Ui.pbe.getCipher(o,r.encParameter,e),c=cve(r.encryptedContentAsn1),l=_s.util.createBuffer(c.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(ptr,"_decryptSafeContents");function mtr(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},c=[];if(!Ie.validate(o,ltr,a,c)){var l=new Error("Cannot read SafeBag.");throw l.errors=c,l}var u={type:Ie.derToOid(a.bagId),attributes:htr(a.bagAttributes)};n.push(u);var f,p,m=a.bagValue.value[0];switch(u.type){case Ui.oids.pkcs8ShroudedKeyBag:if(m=Ui.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ui.oids.keyBag:try{u.key=Ui.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case Ui.oids.certBag:f=dtr,p=s(function(){if(Ie.derToOid(a.certId)!==Ui.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=Ui.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(f!==void 0&&!Ie.validate(m,f,a,c)){var l=new Error("Cannot read PKCS#12 "+f.name);throw l.errors=c,l}p()}return n}s(mtr,"_decodeSafeContents");function htr(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],utr,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(Ui.oids[a]!==void 0){e[Ui.oids[a]]=[];for(var c=0;c<n.values.length;++c)e[Ui.oids[a]].push(n.values[c].value)}}return e}s(htr,"_decodeBagAttributes");MO.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=_s.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=_s.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=Ui.certificateFromPem(a));var c=_s.md.sha1.create();c.update(Ie.toDer(Ui.certificateToAsn1(a)).getBytes()),i=c.digest().getBytes()}else i=_s.random.getBytes(20);var l=[];i!==null&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&l.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),l.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,l));var u=[],f=[];e!==null&&(_s.util.isArray(e)?f=e:f=[e]);for(var p=[],m=0;m<f.length;++m){e=f[m],typeof e=="string"&&(e=Ui.certificateFromPem(e));var h=m===0?o:void 0,g=Ui.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),x=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(E).getBytes())])]);u.push(x)}var b=null;if(t!==null){var _=Ui.wrapRsaPrivateKey(Ui.privateKeyToAsn1(t));r===null?b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ui.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[b]),P=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(P)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),M;if(n.useMac){var c=_s.md.sha1.create(),J=new _s.util.ByteBuffer(_s.random.getBytes(n.saltSize)),pe=n.count,t=MO.generateKey(r,J,3,pe,20),Y=_s.hmac.create();Y.start(c,t),Y.update(Ie.toDer(N).getBytes());var G=Y.getMac();M=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,G.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,J.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(pe).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(Ui.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),M])};MO.generateKey=_s.pbe.generatePkcs12Key});var dve=U((fri,Irt)=>{d();var lT=xi();Fg();oT();ive();oR();xZ();lve();RZ();NO();So();BZ();var uve=lT.asn1,eD=Irt.exports=lT.pki=lT.pki||{};eD.pemToDer=function(t){var e=lT.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return lT.util.createBuffer(e.body)};eD.privateKeyFromPem=function(t){var e=lT.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=uve.fromDer(e.body);return eD.privateKeyFromAsn1(n)};eD.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:uve.toDer(eD.privateKeyToAsn1(t)).getBytes()};return lT.pem.encode(r,{maxline:e})};eD.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:uve.toDer(t).getBytes()};return lT.pem.encode(r,{maxline:e})}});var Ave=U((mri,Brt)=>{d();var It=xi();Fg();VB();yZ();oR();dve();Vm();KB();So();var MZ=s(function(t,e,r,n){var i=It.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),c=t.substr(0,a),l=t.substr(o,a),u=It.util.createBuffer(),f=It.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);f.start("MD5",c);var h=It.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),h.putBuffer(f.digest());f.start("SHA1",l);var y=It.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)f.start(null,null),f.update(u.getBytes()),u.putBuffer(f.digest()),f.start(null,null),f.update(u.bytes()+r),y.putBuffer(f.digest());return i.putBytes(It.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),gtr=s(function(t,e,r){var n=It.hmac.create();n.start("SHA1",t);var i=It.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Atr=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=It.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),ytr=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=It.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),sp=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return It.util.createBuffer(t.getBytes(r))},"readVector"),Km=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),K={};K.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};K.SupportedVersions=[K.Versions.TLS_1_1,K.Versions.TLS_1_0];K.Version=K.SupportedVersions[0];K.MaxFragment=15360;K.ConnectionEnd={server:0,client:1};K.PRFAlgorithm={tls_prf_sha256:0};K.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};K.CipherType={stream:0,block:1,aead:2};K.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};K.CompressionMethod={none:0,deflate:1};K.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};K.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};K.Alert={};K.Alert.Level={warning:1,fatal:2};K.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};K.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};K.CipherSuites={};K.getCipherSuite=function(t){var e=null;for(var r in K.CipherSuites){var n=K.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};K.handleUnexpected=function(t,e){var r=!t.open&&t.entity===K.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unexpected_message}})};K.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(K.queue(t,K.createAlert(t,{level:K.Alert.Level.warning,description:K.Alert.Description.no_renegotiation})),K.flush(t)),t.process()};K.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===K.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:It.util.createBuffer(o.getBytes(32)),session_id:sp(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=sp(o,2),n.compression_methods=sp(o,1)),a=r-(a-o.length()),a>0){for(var c=sp(o,2);c.length()>0;)n.extensions.push({type:[c.getByte(),c.getByte()],data:sp(c,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var u=n.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var f=sp(u.data,2);f.length()>0;){var p=f.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(sp(f,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=K.getCipherSuite(n.cipher_suite);else for(var m=It.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=K.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.handshake_failure},cipherSuite:It.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=K.CompressionMethod.none}return n};K.createSecurityParameters=function(t,e){var r=t.entity===K.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:K.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:K.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};K.handleServerHello=function(t,e,r){var n=K.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=_rt,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Etr,t.session.resuming=!1,K.createSecurityParameters(t,n)),t.session.id=i,t.process()}};K.handleClientHello=function(t,e,r){var n=K.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=It.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,c=1;c<K.SupportedVersions.length&&(a=K.SupportedVersions[c],!(a.minor<=n.version.minor));++c);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=hve,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?_tr:mve,t.session.resuming=!1,K.createSecurityParameters(t,n)),t.open=!0,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerHello(t)})),t.session.resuming?(K.queue(t,K.createRecord(t,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),t.state.pending=K.createConnectionState(t),t.state.current.write=t.state.pending.write,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createFinished(t)}))):(K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificate(t)})),t.fail||(K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerKeyExchange(t)})),t.verifyClient!==!1&&K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificateRequest(t)})),K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createServerHelloDone(t)})))),K.flush(t),t.process()}};K.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:sp(n,3)},o,a,c=[];try{for(;i.certificate_list.length()>0;)o=sp(i.certificate_list,3),a=It.asn1.fromDer(o),o=It.pki.certificateFromAsn1(a,!0),c.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate}})}var l=t.entity===K.ConnectionEnd.client;(l||t.verifyClient===!0)&&c.length===0?t.error(t,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}}):c.length===0?t.expect=l?Trt:mve:(l?t.session.serverCertificate=c[0]:t.session.clientCertificate=c[0],K.verifyCertificateChain(t,c)&&(t.expect=l?Trt:mve)),t.process()};K.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unsupported_certificate}});t.expect=vtr,t.process()};K.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:sp(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=It.pki.privateKeyFromPem(o)}catch(l){t.error(t,{message:"Could not get private key.",cause:l,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var c=t.session.clientHelloVersion;if(c.major!==a.pre_master_secret.charCodeAt(0)||c.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=It.random.getBytes(48)}t.expect=hve,t.session.clientCertificate!==null&&(t.expect=Str),t.process()};K.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:sp(n,1),certificate_authorities:sp(n,2)};t.session.certificateRequest=i,t.expect=xtr,t.process()};K.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:sp(n,2).getBytes()},a=It.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var c=t.session.clientCertificate;if(!c.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.handshake_failure}})}t.expect=hve,t.process()};K.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!It.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=K.createRecord(t,{type:K.ContentType.handshake,data:K.createCertificate(t)}),K.queue(t,e)),e=K.createRecord(t,{type:K.ContentType.handshake,data:K.createClientKeyExchange(t)}),K.queue(t,e),t.expect=Ttr;var a=s(function(c,l){c.session.certificateRequest!==null&&c.session.clientCertificate!==null&&K.queue(c,K.createRecord(c,{type:K.ContentType.handshake,data:K.createCertificateVerify(c,l)})),K.queue(c,K.createRecord(c,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),c.state.pending=K.createConnectionState(c),c.state.current.write=c.state.pending.write,K.queue(c,K.createRecord(c,{type:K.ContentType.handshake,data:K.createFinished(c)})),c.expect=_rt,K.flush(c),c.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);K.getClientSignature(t,a)};K.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.illegal_parameter}});var r=t.entity===K.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=K.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?btr:Rtr,t.process()};K.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=It.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===K.ConnectionEnd.client,c=a?"server finished":"client finished",l=t.session.sp,u=12,f=MZ;if(n=f(l.master_secret,c,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(K.queue(t,K.createRecord(t,{type:K.ContentType.change_cipher_spec,data:K.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,K.queue(t,K.createRecord(t,{type:K.ContentType.handshake,data:K.createFinished(t)}))),t.expect=a?Itr:ktr,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,K.flush(t),t.isConnected=!0,t.connected(t),t.process()};K.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case K.Alert.Description.close_notify:i="Connection closed.";break;case K.Alert.Description.unexpected_message:i="Unexpected message.";break;case K.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case K.Alert.Description.decryption_failed:i="Decryption failed.";break;case K.Alert.Description.record_overflow:i="Record overflow.";break;case K.Alert.Description.decompression_failure:i="Decompression failed.";break;case K.Alert.Description.handshake_failure:i="Handshake failure.";break;case K.Alert.Description.bad_certificate:i="Bad certificate.";break;case K.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case K.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case K.Alert.Description.certificate_expired:i="Certificate expired.";break;case K.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case K.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case K.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case K.Alert.Description.access_denied:i="Access denied.";break;case K.Alert.Description.decode_error:i="Decode error.";break;case K.Alert.Description.decrypt_error:i="Decrypt error.";break;case K.Alert.Description.export_restriction:i="Export restriction.";break;case K.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case K.Alert.Description.insufficient_security:i="Insufficient security.";break;case K.Alert.Description.internal_error:i="Internal error.";break;case K.Alert.Description.user_canceled:i="User canceled.";break;case K.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===K.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===K.ConnectionEnd.client?"server":"client",alert:n}),t.process()};K.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=It.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in LZ[t.entity][t.expect]?(t.entity===K.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:It.md.md5.create(),sha1:It.md.sha1.create()}),n!==K.HandshakeType.hello_request&&n!==K.HandshakeType.certificate_verify&&n!==K.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),LZ[t.entity][t.expect][n](t,e,i)):K.handleUnexpected(t,e)};K.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};K.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===K.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();K.queue(t,K.createRecord(t,{type:K.ContentType.heartbeat,data:K.createHeartbeat(K.HeartbeatMessageType.heartbeat_response,o)})),K.flush(t)}else if(n===K.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,It.util.createBuffer(o))}t.process()};var Ctr=0,Etr=1,Trt=2,vtr=3,xtr=4,_rt=5,btr=6,Itr=7,Ttr=8,wtr=0,_tr=1,mve=2,Str=3,hve=4,Rtr=5,ktr=6,$=K.handleUnexpected,Srt=K.handleChangeCipherSpec,yu=K.handleAlert,$d=K.handleHandshake,Rrt=K.handleApplicationData,Cu=K.handleHeartbeat,gve=[];gve[K.ConnectionEnd.client]=[[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[Srt,yu,$,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,Rrt,Cu],[$,yu,$d,$,Cu]];gve[K.ConnectionEnd.server]=[[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,$,Cu],[Srt,yu,$,$,Cu],[$,yu,$d,$,Cu],[$,yu,$d,Rrt,Cu],[$,yu,$d,$,Cu]];var uT=K.handleHelloRequest,Ptr=K.handleServerHello,krt=K.handleCertificate,wrt=K.handleServerKeyExchange,fve=K.handleCertificateRequest,DZ=K.handleServerHelloDone,Prt=K.handleFinished,LZ=[];LZ[K.ConnectionEnd.client]=[[$,$,Ptr,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,krt,wrt,fve,DZ,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,wrt,fve,DZ,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,$,fve,DZ,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,$,$,DZ,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Prt],[uT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[uT,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Btr=K.handleClientHello,Dtr=K.handleClientKeyExchange,Ntr=K.handleCertificateVerify;LZ[K.ConnectionEnd.server]=[[$,Btr,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,krt,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Dtr,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Ntr,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,Prt],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];K.generateKeys=function(t,e){var r=MZ,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===K.Versions.TLS_1_0.major&&t.version.minor===K.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),c={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(c.client_write_IV=a.getBytes(e.fixed_iv_length),c.server_write_IV=a.getBytes(e.fixed_iv_length)),c};K.createConnectionState=function(t){var e=t.entity===K.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=K.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case K.CompressionMethod.none:break;case K.CompressionMethod.deflate:n.read.compressFunction=ytr,n.write.compressFunction=Atr;break;default:throw new Error("Unsupported compression algorithm.")}}return n};K.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=It.util.createBuffer();return r.putInt32(e),r.putBytes(It.random.getBytes(28)),r};K.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};K.createAlert=function(t,e){var r=It.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),K.createRecord(t,{type:K.ContentType.alert,data:r})};K.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=It.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=It.util.createBuffer();o.putByte(K.CompressionMethod.none);var a=o.length(),c=It.util.createBuffer();if(t.virtualHost){var l=It.util.createBuffer();l.putByte(0),l.putByte(0);var u=It.util.createBuffer();u.putByte(0),Km(u,2,It.util.createBuffer(t.virtualHost));var f=It.util.createBuffer();Km(f,2,u),Km(l,2,f),c.putBuffer(l)}var p=c.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=It.util.createBuffer();return g.putByte(K.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),Km(g,1,It.util.createBuffer(m)),Km(g,2,e),Km(g,1,o),p>0&&Km(g,2,c),g};K.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=It.util.createBuffer();return n.putByte(K.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),Km(n,1,It.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};K.createCertificate=function(t){var e=t.entity===K.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=It.util.createBuffer();if(r!==null)try{It.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var c=It.pem.decode(r[a])[0];if(c.type!=="CERTIFICATE"&&c.type!=="X509 CERTIFICATE"&&c.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=c.type,l}if(c.procType&&c.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=It.util.createBuffer(c.body);o===null&&(o=It.asn1.fromDer(u.bytes(),!1));var f=It.util.createBuffer();Km(f,3,u),i.putBuffer(f)}r=It.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate}})}var p=3+i.length(),m=It.util.createBuffer();return m.putByte(K.HandshakeType.certificate),m.putInt24(p),Km(m,3,i),m};K.createClientKeyExchange=function(t){var e=It.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(It.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=It.util.createBuffer();return o.putByte(K.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};K.createServerKeyExchange=function(t){var e=0,r=It.util.createBuffer();return e>0&&(r.putByte(K.HandshakeType.server_key_exchange),r.putInt24(e)),r};K.getClientSignature=function(t,e){var r=It.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=It.pki.privateKeyFromPem(a)}catch(c){n.error(n,{message:"Could not get private key.",cause:c,send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};K.createCertificateVerify=function(t,e){var r=e.length+2,n=It.util.createBuffer();return n.putByte(K.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};K.createCertificateRequest=function(t){var e=It.util.createBuffer();e.putByte(1);var r=It.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=It.pki.distinguishedNameToAsn1(i.subject),a=It.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var c=1+e.length()+2+r.length(),l=It.util.createBuffer();return l.putByte(K.HandshakeType.certificate_request),l.putInt24(c),Km(l,1,e),Km(l,2,r),l};K.createServerHelloDone=function(t){var e=It.util.createBuffer();return e.putByte(K.HandshakeType.server_hello_done),e.putInt24(0),e};K.createChangeCipherSpec=function(){var t=It.util.createBuffer();return t.putByte(1),t};K.createFinished=function(t){var e=It.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===K.ConnectionEnd.client,n=t.session.sp,i=12,o=MZ,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var c=It.util.createBuffer();return c.putByte(K.HandshakeType.finished),c.putInt24(e.length()),c.putBuffer(e),c};K.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=It.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(It.random.getBytes(o)),n};K.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===K.ContentType.handshake||e.type===K.ContentType.alert||e.type===K.ContentType.change_cipher_spec))){if(e.type===K.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=K.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>K.MaxFragment;)n.push(K.createRecord(t,{type:e.type,data:It.util.createBuffer(i.slice(0,K.MaxFragment))})),i=i.slice(K.MaxFragment);i.length>0&&n.push(K.createRecord(t,{type:e.type,data:It.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],c=t.state.current.write;c.update(t,a)&&t.records.push(a)}}};K.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var pve=s(function(t){switch(t){case!0:return!0;case It.pki.certificateError.bad_certificate:return K.Alert.Description.bad_certificate;case It.pki.certificateError.unsupported_certificate:return K.Alert.Description.unsupported_certificate;case It.pki.certificateError.certificate_revoked:return K.Alert.Description.certificate_revoked;case It.pki.certificateError.certificate_expired:return K.Alert.Description.certificate_expired;case It.pki.certificateError.certificate_unknown:return K.Alert.Description.certificate_unknown;case It.pki.certificateError.unknown_ca:return K.Alert.Description.unknown_ca;default:return K.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Ltr=s(function(t){switch(t){case!0:return!0;case K.Alert.Description.bad_certificate:return It.pki.certificateError.bad_certificate;case K.Alert.Description.unsupported_certificate:return It.pki.certificateError.unsupported_certificate;case K.Alert.Description.certificate_revoked:return It.pki.certificateError.certificate_revoked;case K.Alert.Description.certificate_expired:return It.pki.certificateError.certificate_expired;case K.Alert.Description.certificate_unknown:return It.pki.certificateError.certificate_unknown;case K.Alert.Description.unknown_ca:return It.pki.certificateError.unknown_ca;default:return It.pki.certificateError.bad_certificate}},"_alertDescToCertError");K.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,c){var l=pve(o),u=t.verify(t,o,a,c);if(u!==!0){if(typeof u=="object"&&!It.util.isArray(u)){var f=new Error("The application rejected the certificate.");throw f.send=!0,f.alert={level:K.Alert.Level.fatal,description:K.Alert.Description.bad_certificate},u.message&&(f.message=u.message),u.alert&&(f.alert.description=u.alert),f}u!==o&&(u=Ltr(u))}return u},It.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||It.util.isArray(i))&&(i={send:!0,alert:{level:K.Alert.Level.fatal,description:pve(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:K.Alert.Level.fatal,description:pve(i.error)}),t.error(t,i)}return!t.fail};K.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=It.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var c in r.order)if(r.order[c]===a){r.order.splice(c,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=It.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};K.createConnection=function(t){var e=null;t.caStore?It.util.isArray(t.caStore)?e=It.pki.createCaStore(t.caStore):e=t.caStore:e=It.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in K.CipherSuites)r.push(K.CipherSuites[n])}var i=t.server?K.ConnectionEnd.server:K.ConnectionEnd.client,o=t.sessionCache?K.createSessionCache(t.sessionCache):null,a={version:{major:K.Version.major,minor:K.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(f,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:It.util.createBuffer(),tlsData:It.util.createBuffer(),data:It.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(f,p){p.origin=p.origin||(f.entity===K.ConnectionEnd.client?"client":"server"),p.send&&(K.queue(f,K.createAlert(f,p.alert)),K.flush(f));var m=p.fatal!==!1;m&&(f.fail=!0),t.error(f,p),m&&f.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(f){a.version={major:K.Version.major,minor:K.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===K.ConnectionEnd.client?Ctr:wtr,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(f||typeof f>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=K.createConnectionState(a)},a.reset();var c=s(function(f,p){var m=p.type-K.ContentType.change_cipher_spec,h=gve[f.entity][f.expect];m in h?h[m](f,p):K.handleUnexpected(f,p)},"_update"),l=s(function(f){var p=0,m=f.input,h=m.length();if(h<5)p=5-h;else{f.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:It.util.createBuffer(),ready:!1};var g=f.record.version.major===f.version.major;g&&f.session&&f.session.version&&(g=f.record.version.minor===f.version.minor),g||f.error(f,{message:"Incompatible TLS version.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(f){var p=0,m=f.input,h=m.length();if(h<f.record.length)p=f.record.length-h;else{f.record.fragment.putBytes(m.getBytes(f.record.length)),m.compact();var g=f.state.current.read;g.update(f,f.record)&&(f.fragmented!==null&&(f.fragmented.type===f.record.type?(f.fragmented.fragment.putBuffer(f.record.fragment),f.record=f.fragmented):f.error(f,{message:"Invalid fragmented record.",send:!0,alert:{level:K.Alert.Level.fatal,description:K.Alert.Description.unexpected_message}})),f.record.ready=!0)}return p},"_readRecord");return a.handshake=function(f){if(a.entity!==K.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,f=f||"";var p=null;f.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(f)),p===null&&(f="")),f.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(f=p.id)),a.session={id:f,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:It.md.md5.create(),sha1:It.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=K.createRandom().getBytes(),a.open=!0,K.queue(a,K.createRecord(a,{type:K.ContentType.handshake,data:K.createClientHello(a)})),K.flush(a)}},a.process=function(f){var p=0;return f&&a.input.putBytes(f),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&c(a,a.record)),p},a.prepare=function(f){return K.queue(a,K.createRecord(a,{type:K.ContentType.application_data,data:It.util.createBuffer(f)})),K.flush(a)},a.prepareHeartbeatRequest=function(f,p){return f instanceof It.util.ByteBuffer&&(f=f.bytes()),typeof p>"u"&&(p=f.length),a.expectedHeartbeatPayload=f,K.queue(a,K.createRecord(a,{type:K.ContentType.heartbeat,data:K.createHeartbeat(K.HeartbeatMessageType.heartbeat_request,f,p)})),K.flush(a)},a.close=function(f){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,K.queue(a,K.createAlert(a,{level:K.Alert.Level.warning,description:K.Alert.Description.close_notify})),K.flush(a)),a.closed(a)),a.reset(f)},a};Brt.exports=It.tls=It.tls||{};for(NZ in K)typeof K[NZ]!="function"&&(It.tls[NZ]=K[NZ]);var NZ;It.tls.prf_tls1=MZ;It.tls.hmac_sha1=gtr;It.tls.createSessionCache=K.createSessionCache;It.tls.createConnection=K.createConnection});var Lrt=U((Ari,Nrt)=>{d();var dT=xi();iT();Ave();var Jm=Nrt.exports=dT.tls;Jm.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Jm.BulkCipherAlgorithm.aes,t.cipher_type=Jm.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Jm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Drt};Jm.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Jm.BulkCipherAlgorithm.aes,t.cipher_type=Jm.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Jm.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:Drt};function Drt(t,e,r){var n=e.entity===dT.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:dT.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:dT.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=Qtr,t.write.cipherFunction=Mtr,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Jm.hmac_sha1}s(Drt,"initConnectionState");function Mtr(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Jm.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=dT.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Jm.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Ftr)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(Mtr,"encrypt_aes_cbc_sha1");function Ftr(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(Ftr,"encrypt_aes_cbc_sha1_padding");function Otr(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Otr,"decrypt_aes_cbc_sha1_padding");function Qtr(t,e){var r=!1,n;t.version.minor===Jm.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Otr);var o=e.macLength,a=dT.random.getBytesSync(o),c=i.output.length();c>=o?(t.fragment=i.output.getBytes(c-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=dT.util.createBuffer(t.fragment),t.length=t.fragment.length();var l=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=Utr(e.macKey,a,l)&&r,r}s(Qtr,"decrypt_aes_cbc_sha1");function Utr(t,e,r){var n=dT.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(Utr,"compareMacs")});var Eve=U((Eri,Qrt)=>{d();var zs=xi();tC();So();var FO=Qrt.exports=zs.sha512=zs.sha512||{};zs.md.sha512=zs.md.algorithms.sha512=FO;var Frt=zs.sha384=zs.sha512.sha384=zs.sha512.sha384||{};Frt.create=function(){return FO.create("SHA-384")};zs.md.sha384=zs.md.algorithms.sha384=Frt;zs.sha512.sha256=zs.sha512.sha256||{create:s(function(){return FO.create("SHA-512/256")},"create")};zs.md["sha512/256"]=zs.md.algorithms["sha512/256"]=zs.sha512.sha256;zs.sha512.sha224=zs.sha512.sha224||{create:s(function(){return FO.create("SHA-512/224")},"create")};zs.md["sha512/224"]=zs.md.algorithms["sha512/224"]=zs.sha512.sha224;FO.create=function(t){if(Ort||qtr(),typeof t>"u"&&(t="SHA-512"),!(t in dR))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=dR[t],r=null,n=zs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var c={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return c.start=function(){c.messageLength=0,c.fullMessageLength=c.messageLength128=[];for(var l=c.messageLengthSize/4,u=0;u<l;++u)c.fullMessageLength.push(0);n=zs.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return c},c.start(),c.update=function(l,u){u==="utf8"&&(l=zs.util.encodeUtf8(l));var f=l.length;c.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var p=c.fullMessageLength.length-1;p>=0;--p)c.fullMessageLength[p]+=f[1],f[1]=f[0]+(c.fullMessageLength[p]/4294967296>>>0),c.fullMessageLength[p]=c.fullMessageLength[p]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(l),Mrt(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),c},c.digest=function(){var l=zs.util.createBuffer();l.putBytes(n.bytes());var u=c.fullMessageLength[c.fullMessageLength.length-1]+c.messageLengthSize,f=u&c.blockLength-1;l.putBytes(yve.substr(0,c.blockLength-f));for(var p,m,h=c.fullMessageLength[0]*8,g=0;g<c.fullMessageLength.length-1;++g)p=c.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,l.putInt32(h>>>0),h=p>>>0;l.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);Mrt(y,i,l);var E=zs.util.createBuffer(),x;t==="SHA-512"?x=y.length:t==="SHA-384"?x=y.length-2:x=y.length-4;for(var g=0;g<x;++g)E.putInt32(y[g][0]),(g!==x-1||t!=="SHA-512/224")&&E.putInt32(y[g][1]);return E},c};var yve=null,Ort=!1,Cve=null,dR=null;function qtr(){yve="\x80",yve+=zs.util.fillString("\0",128),Cve=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],dR={},dR["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],dR["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],dR["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],dR["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Ort=!0}s(qtr,"_init");function Mrt(t,e,r){for(var n,i,o,a,c,l,u,f,p,m,h,g,y,E,x,b,_,k,P,N,M,J,pe,Y,G,H,ce,ie,V,Q,z,re,fe,ne,me,he=r.length();he>=128;){for(V=0;V<16;++V)e[V][0]=r.getInt32()>>>0,e[V][1]=r.getInt32()>>>0;for(;V<80;++V)re=e[V-2],Q=re[0],z=re[1],n=((Q>>>19|z<<13)^(z>>>29|Q<<3)^Q>>>6)>>>0,i=((Q<<13|z>>>19)^(z<<3|Q>>>29)^(Q<<26|z>>>6))>>>0,ne=e[V-15],Q=ne[0],z=ne[1],o=((Q>>>1|z<<31)^(Q>>>8|z<<24)^Q>>>7)>>>0,a=((Q<<31|z>>>1)^(Q<<24|z>>>8)^(Q<<25|z>>>7))>>>0,fe=e[V-7],me=e[V-16],z=i+fe[1]+a+me[1],e[V][0]=n+fe[0]+o+me[0]+(z/4294967296>>>0)>>>0,e[V][1]=z>>>0;for(y=t[0][0],E=t[0][1],x=t[1][0],b=t[1][1],_=t[2][0],k=t[2][1],P=t[3][0],N=t[3][1],M=t[4][0],J=t[4][1],pe=t[5][0],Y=t[5][1],G=t[6][0],H=t[6][1],ce=t[7][0],ie=t[7][1],V=0;V<80;++V)u=((M>>>14|J<<18)^(M>>>18|J<<14)^(J>>>9|M<<23))>>>0,f=((M<<18|J>>>14)^(M<<14|J>>>18)^(J<<23|M>>>9))>>>0,p=(G^M&(pe^G))>>>0,m=(H^J&(Y^H))>>>0,c=((y>>>28|E<<4)^(E>>>2|y<<30)^(E>>>7|y<<25))>>>0,l=((y<<4|E>>>28)^(E<<30|y>>>2)^(E<<25|y>>>7))>>>0,h=(y&x|_&(y^x))>>>0,g=(E&b|k&(E^b))>>>0,z=ie+f+m+Cve[V][1]+e[V][1],n=ce+u+p+Cve[V][0]+e[V][0]+(z/4294967296>>>0)>>>0,i=z>>>0,z=l+g,o=c+h+(z/4294967296>>>0)>>>0,a=z>>>0,ce=G,ie=H,G=pe,H=Y,pe=M,Y=J,z=N+i,M=P+n+(z/4294967296>>>0)>>>0,J=z>>>0,P=_,N=k,_=x,k=b,x=y,b=E,z=i+a,y=n+o+(z/4294967296>>>0)>>>0,E=z>>>0;z=t[0][1]+E,t[0][0]=t[0][0]+y+(z/4294967296>>>0)>>>0,t[0][1]=z>>>0,z=t[1][1]+b,t[1][0]=t[1][0]+x+(z/4294967296>>>0)>>>0,t[1][1]=z>>>0,z=t[2][1]+k,t[2][0]=t[2][0]+_+(z/4294967296>>>0)>>>0,t[2][1]=z>>>0,z=t[3][1]+N,t[3][0]=t[3][0]+P+(z/4294967296>>>0)>>>0,t[3][1]=z>>>0,z=t[4][1]+J,t[4][0]=t[4][0]+M+(z/4294967296>>>0)>>>0,t[4][1]=z>>>0,z=t[5][1]+Y,t[5][0]=t[5][0]+pe+(z/4294967296>>>0)>>>0,t[5][1]=z>>>0,z=t[6][1]+H,t[6][0]=t[6][0]+G+(z/4294967296>>>0)>>>0,t[6][1]=z>>>0,z=t[7][1]+ie,t[7][0]=t[7][0]+ce+(z/4294967296>>>0)>>>0,t[7][1]=z>>>0,he-=128}}s(Mrt,"_update")});var Urt=U(vve=>{d();var Htr=xi();Fg();var Ql=Htr.asn1;vve.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};vve.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Ql.Class.UNIVERSAL,type:Ql.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Zrt=U((Tri,Xrt)=>{d();var Eu=xi();DO();Vm();Eve();So();var Vrt=Urt(),Wtr=Vrt.publicKeyValidator,Gtr=Vrt.privateKeyValidator;typeof qrt>"u"&&(qrt=Eu.jsbn.BigInteger);var qrt,Ive=Eu.util.ByteBuffer,$f=typeof Buffer>"u"?Uint8Array:Buffer;Eu.pki=Eu.pki||{};Xrt.exports=Eu.pki.ed25519=Eu.ed25519=Eu.ed25519||{};var qi=Eu.ed25519;qi.constants={};qi.constants.PUBLIC_KEY_BYTE_LENGTH=32;qi.constants.PRIVATE_KEY_BYTE_LENGTH=64;qi.constants.SEED_BYTE_LENGTH=32;qi.constants.SIGN_BYTE_LENGTH=64;qi.constants.HASH_BYTE_LENGTH=64;qi.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=Eu.random.getBytesSync(qi.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==qi.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+qi.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=jE({message:e,encoding:"binary"});for(var r=new $f(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=new $f(qi.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return ztr(r,n),{publicKey:r,privateKey:n}};qi.privateKeyFromAsn1=function(t){var e={},r=[],n=Eu.asn1.validate(t,Gtr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Eu.asn1.derToOid(e.privateKeyOid),a=Eu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.privateKey,l=jE({message:Eu.asn1.fromDer(c).value,encoding:"binary"});return{privateKeyBytes:l}};qi.publicKeyFromAsn1=function(t){var e={},r=[],n=Eu.asn1.validate(t,Wtr,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=Eu.asn1.derToOid(e.publicKeyOid),a=Eu.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var c=e.ed25519PublicKey;if(c.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return jE({message:c,encoding:"binary"})};qi.publicKeyFromPrivateKey=function(t){t=t||{};var e=jE({message:t.privateKey,encoding:"binary"});if(e.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new $f(qi.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};qi.sign=function(t){t=t||{};var e=jE(t),r=jE({message:t.privateKey,encoding:"binary"});if(r.length===qi.constants.SEED_BYTE_LENGTH){var n=qi.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==qi.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+qi.constants.SEED_BYTE_LENGTH+" or "+qi.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length);Ytr(i,e,e.length,r);for(var o=new $f(qi.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};qi.verify=function(t){t=t||{};var e=jE(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=jE({message:t.signature,encoding:"binary"});if(r.length!==qi.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+qi.constants.SIGN_BYTE_LENGTH);var n=jE({message:t.publicKey,encoding:"binary"});if(n.length!==qi.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+qi.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length),o=new $f(qi.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<qi.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+qi.constants.SIGN_BYTE_LENGTH]=e[a];return Ktr(o,i,i.length,n)>=0};function jE(t){var e=t.message;if(e instanceof Uint8Array||e instanceof $f)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new Ive(e,r)}else if(!(e instanceof Ive))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new $f(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(jE,"messageToNativeBuffer");var Tve=_n(),FZ=_n([1]),jtr=_n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Vtr=_n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Hrt=_n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Wrt=_n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),xve=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),$tr=_n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function OO(t,e){var r=Eu.md.sha512.create(),n=new Ive(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new $f(qi.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(OO,"sha512");function ztr(t,e){var r=[_n(),_n(),_n(),_n()],n,i=OO(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Rve(r,i),Sve(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(ztr,"crypto_sign_keypair");function Ytr(t,e,r,n){var i,o,a=new Float64Array(64),c=[_n(),_n(),_n(),_n()],l=OO(n,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=l[32+i];var f=OO(t.subarray(32),r+32);for(wve(f),Rve(c,f),Sve(t,c),i=32;i<64;++i)t[i]=n[i];var p=OO(t,r+64);for(wve(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=f[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*l[o];return $rt(t.subarray(32),a),u}s(Ytr,"crypto_sign");function Ktr(t,e,r,n){var i,o,a=new $f(32),c=[_n(),_n(),_n(),_n()],l=[_n(),_n(),_n(),_n()];if(o=-1,r<64||Jtr(l,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=OO(t,r);if(wve(u),Krt(c,l,u),Rve(l,e.subarray(32)),_ve(c,l),Sve(a,c),r-=64,zrt(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(Ktr,"crypto_sign_open");function $rt(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*xve[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*xve[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*xve[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s($rt,"modL");function wve(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;$rt(t,e)}s(wve,"reduce");function _ve(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n(),u=_n(),f=_n();rD(r,t[1],t[0]),rD(f,e[1],e[0]),ms(r,r,f),tD(n,t[0],t[1]),tD(f,e[0],e[1]),ms(n,n,f),ms(i,t[3],e[3]),ms(i,i,Vtr),ms(o,t[2],e[2]),tD(o,o,o),rD(a,n,r),rD(c,o,i),tD(l,o,i),tD(u,n,r),ms(t[0],a,c),ms(t[1],u,l),ms(t[2],l,c),ms(t[3],a,u)}s(_ve,"add");function Grt(t,e,r){for(var n=0;n<4;++n)Jrt(t[n],e[n],r)}s(Grt,"cswap");function Sve(t,e){var r=_n(),n=_n(),i=_n();rrr(i,e[2]),ms(r,e[0],i),ms(n,e[1],i),OZ(t,n),t[31]^=Yrt(r)<<7}s(Sve,"pack");function OZ(t,e){var r,n,i,o=_n(),a=_n();for(r=0;r<16;++r)a[r]=e[r];for(bve(a),bve(a),bve(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,Jrt(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(OZ,"pack25519");function Jtr(t,e){var r=_n(),n=_n(),i=_n(),o=_n(),a=_n(),c=_n(),l=_n();return fT(t[2],FZ),Xtr(t[1],e),fR(i,t[1]),ms(o,i,jtr),rD(i,i,t[2]),tD(o,t[2],o),fR(a,o),fR(c,a),ms(l,c,a),ms(r,l,i),ms(r,r,o),Ztr(r,r),ms(r,r,i),ms(r,r,o),ms(r,r,o),ms(t[0],r,o),fR(n,t[0]),ms(n,n,o),jrt(n,i)&&ms(t[0],t[0],$tr),fR(n,t[0]),ms(n,n,o),jrt(n,i)?-1:(Yrt(t[0])===e[31]>>7&&rD(t[0],Tve,t[0]),ms(t[3],t[0],t[1]),0)}s(Jtr,"unpackneg");function Xtr(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(Xtr,"unpack25519");function Ztr(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)fR(r,r),n!==1&&ms(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(Ztr,"pow2523");function jrt(t,e){var r=new $f(32),n=new $f(32);return OZ(r,t),OZ(n,e),zrt(r,0,n,0)}s(jrt,"neq25519");function zrt(t,e,r,n){return trr(t,e,r,n,32)}s(zrt,"crypto_verify_32");function trr(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(trr,"vn");function Yrt(t){var e=new $f(32);return OZ(e,t),e[0]&1}s(Yrt,"par25519");function Krt(t,e,r){var n,i;for(fT(t[0],Tve),fT(t[1],FZ),fT(t[2],FZ),fT(t[3],Tve),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Grt(t,e,n),_ve(e,t),_ve(t,t),Grt(t,e,n)}s(Krt,"scalarmult");function Rve(t,e){var r=[_n(),_n(),_n(),_n()];fT(r[0],Hrt),fT(r[1],Wrt),fT(r[2],FZ),ms(r[3],Hrt,Wrt),Krt(t,r,e)}s(Rve,"scalarbase");function fT(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(fT,"set25519");function rrr(t,e){var r=_n(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)fR(r,r),n!==2&&n!==4&&ms(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(rrr,"inv25519");function bve(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(bve,"car25519");function Jrt(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(Jrt,"sel25519");function _n(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(_n,"gf");function tD(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s(tD,"A");function rD(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(rD,"Z");function fR(t,e){ms(t,e,e)}s(fR,"S");function ms(t,e,r){var n,i,o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=0,g=0,y=0,E=0,x=0,b=0,_=0,k=0,P=0,N=0,M=0,J=0,pe=0,Y=0,G=0,H=0,ce=0,ie=0,V=0,Q=0,z=0,re=0,fe=0,ne=r[0],me=r[1],he=r[2],Qe=r[3],ke=r[4],tt=r[5],Fe=r[6],ht=r[7],St=r[8],xt=r[9],Tt=r[10],le=r[11],Ue=r[12],ye=r[13],nt=r[14],ee=r[15];n=e[0],o+=n*ne,a+=n*me,c+=n*he,l+=n*Qe,u+=n*ke,f+=n*tt,p+=n*Fe,m+=n*ht,h+=n*St,g+=n*xt,y+=n*Tt,E+=n*le,x+=n*Ue,b+=n*ye,_+=n*nt,k+=n*ee,n=e[1],a+=n*ne,c+=n*me,l+=n*he,u+=n*Qe,f+=n*ke,p+=n*tt,m+=n*Fe,h+=n*ht,g+=n*St,y+=n*xt,E+=n*Tt,x+=n*le,b+=n*Ue,_+=n*ye,k+=n*nt,P+=n*ee,n=e[2],c+=n*ne,l+=n*me,u+=n*he,f+=n*Qe,p+=n*ke,m+=n*tt,h+=n*Fe,g+=n*ht,y+=n*St,E+=n*xt,x+=n*Tt,b+=n*le,_+=n*Ue,k+=n*ye,P+=n*nt,N+=n*ee,n=e[3],l+=n*ne,u+=n*me,f+=n*he,p+=n*Qe,m+=n*ke,h+=n*tt,g+=n*Fe,y+=n*ht,E+=n*St,x+=n*xt,b+=n*Tt,_+=n*le,k+=n*Ue,P+=n*ye,N+=n*nt,M+=n*ee,n=e[4],u+=n*ne,f+=n*me,p+=n*he,m+=n*Qe,h+=n*ke,g+=n*tt,y+=n*Fe,E+=n*ht,x+=n*St,b+=n*xt,_+=n*Tt,k+=n*le,P+=n*Ue,N+=n*ye,M+=n*nt,J+=n*ee,n=e[5],f+=n*ne,p+=n*me,m+=n*he,h+=n*Qe,g+=n*ke,y+=n*tt,E+=n*Fe,x+=n*ht,b+=n*St,_+=n*xt,k+=n*Tt,P+=n*le,N+=n*Ue,M+=n*ye,J+=n*nt,pe+=n*ee,n=e[6],p+=n*ne,m+=n*me,h+=n*he,g+=n*Qe,y+=n*ke,E+=n*tt,x+=n*Fe,b+=n*ht,_+=n*St,k+=n*xt,P+=n*Tt,N+=n*le,M+=n*Ue,J+=n*ye,pe+=n*nt,Y+=n*ee,n=e[7],m+=n*ne,h+=n*me,g+=n*he,y+=n*Qe,E+=n*ke,x+=n*tt,b+=n*Fe,_+=n*ht,k+=n*St,P+=n*xt,N+=n*Tt,M+=n*le,J+=n*Ue,pe+=n*ye,Y+=n*nt,G+=n*ee,n=e[8],h+=n*ne,g+=n*me,y+=n*he,E+=n*Qe,x+=n*ke,b+=n*tt,_+=n*Fe,k+=n*ht,P+=n*St,N+=n*xt,M+=n*Tt,J+=n*le,pe+=n*Ue,Y+=n*ye,G+=n*nt,H+=n*ee,n=e[9],g+=n*ne,y+=n*me,E+=n*he,x+=n*Qe,b+=n*ke,_+=n*tt,k+=n*Fe,P+=n*ht,N+=n*St,M+=n*xt,J+=n*Tt,pe+=n*le,Y+=n*Ue,G+=n*ye,H+=n*nt,ce+=n*ee,n=e[10],y+=n*ne,E+=n*me,x+=n*he,b+=n*Qe,_+=n*ke,k+=n*tt,P+=n*Fe,N+=n*ht,M+=n*St,J+=n*xt,pe+=n*Tt,Y+=n*le,G+=n*Ue,H+=n*ye,ce+=n*nt,ie+=n*ee,n=e[11],E+=n*ne,x+=n*me,b+=n*he,_+=n*Qe,k+=n*ke,P+=n*tt,N+=n*Fe,M+=n*ht,J+=n*St,pe+=n*xt,Y+=n*Tt,G+=n*le,H+=n*Ue,ce+=n*ye,ie+=n*nt,V+=n*ee,n=e[12],x+=n*ne,b+=n*me,_+=n*he,k+=n*Qe,P+=n*ke,N+=n*tt,M+=n*Fe,J+=n*ht,pe+=n*St,Y+=n*xt,G+=n*Tt,H+=n*le,ce+=n*Ue,ie+=n*ye,V+=n*nt,Q+=n*ee,n=e[13],b+=n*ne,_+=n*me,k+=n*he,P+=n*Qe,N+=n*ke,M+=n*tt,J+=n*Fe,pe+=n*ht,Y+=n*St,G+=n*xt,H+=n*Tt,ce+=n*le,ie+=n*Ue,V+=n*ye,Q+=n*nt,z+=n*ee,n=e[14],_+=n*ne,k+=n*me,P+=n*he,N+=n*Qe,M+=n*ke,J+=n*tt,pe+=n*Fe,Y+=n*ht,G+=n*St,H+=n*xt,ce+=n*Tt,ie+=n*le,V+=n*Ue,Q+=n*ye,z+=n*nt,re+=n*ee,n=e[15],k+=n*ne,P+=n*me,N+=n*he,M+=n*Qe,J+=n*ke,pe+=n*tt,Y+=n*Fe,G+=n*ht,H+=n*St,ce+=n*xt,ie+=n*Tt,V+=n*le,Q+=n*Ue,z+=n*ye,re+=n*nt,fe+=n*ee,o+=38*P,a+=38*N,c+=38*M,l+=38*J,u+=38*pe,f+=38*Y,p+=38*G,m+=38*H,h+=38*ce,g+=38*ie,y+=38*V,E+=38*Q,x+=38*z,b+=38*re,_+=38*fe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=E,t[12]=x,t[13]=b,t[14]=_,t[15]=k}s(ms,"M")});var nnt=U((Sri,rnt)=>{d();var ap=xi();So();Vm();DO();rnt.exports=ap.kem=ap.kem||{};var ent=ap.jsbn.BigInteger;ap.kem.rsa={};ap.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||ap.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),c;do c=new ent(ap.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(c.compareTo(ent.ONE)<=0);c=ap.util.hexToBytes(c.toString(16));var l=a-c.length;l>0&&(c=ap.util.fillString("\0",l)+c);var u=i.encrypt(c,"NONE"),f=t.generate(c,o);return{encapsulation:u,key:f}},n.decrypt=function(i,o,a){var c=i.decrypt(o,"NONE");return t.generate(c,a)},n};ap.kem.kdf1=function(t,e){tnt(this,t,0,e||t.digestLength)};ap.kem.kdf2=function(t,e){tnt(this,t,1,e||t.digestLength)};function tnt(t,e,r,n){t.generate=function(i,o){for(var a=new ap.util.ByteBuffer,c=Math.ceil(o/n)+r,l=new ap.util.ByteBuffer,u=r;u<c;++u){l.putInt32(u),e.start(),e.update(i+l.getBytes());var f=e.digest();a.putBytes(f.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(tnt,"_createKDF")});var ant=U((Pri,snt)=>{d();var eo=xi();So();snt.exports=eo.log=eo.log||{};eo.log.levels=["none","error","warning","info","debug","verbose","max"];var QZ={},Bve=[],UO=null;eo.log.LEVEL_LOCKED=2;eo.log.NO_LEVEL_CHECK=4;eo.log.INTERPOLATE=8;for(lC=0;lC<eo.log.levels.length;++lC)kve=eo.log.levels[lC],QZ[kve]={index:lC,name:kve.toUpperCase()};var kve,lC;eo.log.logMessage=function(t){for(var e=QZ[t.level].index,r=0;r<Bve.length;++r){var n=Bve[r];if(n.flags&eo.log.NO_LEVEL_CHECK)n.f(t);else{var i=QZ[n.level].index;e<=i&&n.f(n,t)}}};eo.log.prepareStandard=function(t){"standard"in t||(t.standard=QZ[t.level].name+" ["+t.category+"] "+t.message)};eo.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=eo.util.format.apply(this,e)}};eo.log.prepareStandardFull=function(t){"standardFull"in t||(eo.log.prepareStandard(t),t.standardFull=t.standard)};for(Pve=["error","warning","info","debug","verbose"],lC=0;lC<Pve.length;++lC)(function(e){eo.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};eo.log.logMessage(o)}})(Pve[lC]);var Pve,lC;eo.log.makeLogger=function(t){var e={flags:0,f:t};return eo.log.setLevel(e,"none"),e};eo.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&eo.log.LEVEL_LOCKED))for(var n=0;n<eo.log.levels.length;++n){var i=eo.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};eo.log.lock=function(t,e){typeof e>"u"||e?t.flags|=eo.log.LEVEL_LOCKED:t.flags&=~eo.log.LEVEL_LOCKED};eo.log.addLogger=function(t){Bve.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(int={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},qO=s(function(t,e){eo.log.prepareStandard(e);var r=int[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),nD=eo.log.makeLogger(qO)):(qO=s(function(e,r){eo.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),nD=eo.log.makeLogger(qO)),eo.log.setLevel(nD,"debug"),eo.log.addLogger(nD),UO=nD):console={log:s(function(){},"log")};var nD,int,qO;UO!==null&&typeof window<"u"&&window.location&&(QO=new URL(window.location.href).searchParams,QO.has("console.level")&&eo.log.setLevel(UO,QO.get("console.level").slice(-1)[0]),QO.has("console.lock")&&(ont=QO.get("console.lock").slice(-1)[0],ont=="true"&&eo.log.lock(UO)));var QO,ont;eo.log.consoleLogger=UO});var lnt=U((Nri,cnt)=>{d();cnt.exports=tC();yZ();KB();jEe();Eve()});var fnt=U((Mri,dnt)=>{d();var Jt=xi();iT();Fg();PO();oT();oR();ove();Vm();So();BZ();var Se=Jt.asn1,zd=dnt.exports=Jt.pkcs7=Jt.pkcs7||{};zd.messageFromPem=function(t){var e=Jt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Se.fromDer(e.body);return zd.messageFromAsn1(n)};zd.messageToPem=function(t,e){var r={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Jt.pem.encode(r,{maxline:e})};zd.messageFromAsn1=function(t){var e={},r=[];if(!Se.validate(t,zd.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Se.derToOid(e.contentType),o;switch(i){case Jt.pki.oids.envelopedData:o=zd.createEnvelopedData();break;case Jt.pki.oids.encryptedData:o=zd.createEncryptedData();break;case Jt.pki.oids.signedData:o=zd.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};zd.createSignedData=function(){var t=null;return t={type:Jt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Nve(t,n,zd.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Jt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Jt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Jt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var c=n.key;if(!c)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof c=="string"&&(c=Jt.pki.privateKeyFromPem(c));var l=n.digestAlgorithm||Jt.pki.oids.sha1;switch(l){case Jt.pki.oids.sha1:case Jt.pki.oids.sha256:case Jt.pki.oids.sha384:case Jt.pki.oids.sha512:case Jt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var f=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!f&&h.type===Jt.pki.oids.contentType){if(f=!0,p)break;continue}if(!p&&h.type===Jt.pki.oids.messageDigest){if(p=!0,f)break;continue}}if(!f||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:c,version:1,issuer:i,serialNumber:o,digestAlgorithm:l,signatureAlgorithm:Jt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Jt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Jt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Jt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Jt.md[Jt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Jt.md[Jt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var c in n)n[c].start().update(a);for(var l=new Date,u=0;u<t.signers.length;++u){var f=t.signers[u];if(f.authenticatedAttributes.length===0){if(o!==Jt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<f.authenticatedAttributes.length;++m){var h=f.authenticatedAttributes[m];h.type===Jt.pki.oids.messageDigest?h.value=n[f.digestAlgorithm].digest():h.type===Jt.pki.oids.signingTime&&(h.value||(h.value=l)),p.value.push(Dve(h)),f.authenticatedAttributesAsn1.value.push(Dve(h))}a=Se.toDer(p).getBytes(),f.md.start().update(a)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=crr(t.signers)}s(r,"addSignerInfos")};zd.createEncryptedData=function(){var t=null;return t={type:Jt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Nve(t,e,zd.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),unt(t)},"decrypt")},t};zd.createEnvelopedData=function(){var t=null;return t={type:Jt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Jt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Nve(t,e,zd.asn1.envelopedDataValidator);t.recipients=orr(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,srr(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,lrr(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,c=0;c<r.length;++c)if(o[c].type!==r[c].type||o[c].value!==r[c].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:case Jt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Jt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}unt(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Jt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Jt.pki.oids["aes128-CBC"]:n=16,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes192-CBC"]:n=24,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["aes256-CBC"]:n=32,i=16,o=Jt.aes.createEncryptionCipher;break;case Jt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Jt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Jt.util.createBuffer(Jt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Jt.util.createBuffer(Jt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var c=0;c<t.recipients.length;++c){var l=t.recipients[c];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case Jt.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}},"encrypt")},t};function nrr(t){var e={},r=[];if(!Se.validate(t,zd.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Jt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Jt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(nrr,"_recipientFromAsn1");function irr(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(irr,"_recipientToAsn1");function orr(t){for(var e=[],r=0;r<t.length;++r)e.push(nrr(t[r]));return e}s(orr,"_recipientsFromAsn1");function srr(t){for(var e=[],r=0;r<t.length;++r)e.push(irr(t[r]));return e}s(srr,"_recipientsToAsn1");function arr(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Jt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Jt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Dve(i))}e.value.push(r)}return e}s(arr,"_signerToAsn1");function crr(t){for(var e=[],r=0;r<t.length;++r)e.push(arr(t[r]));return e}s(crr,"_signersToAsn1");function Dve(t){var e;if(t.type===Jt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Jt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Jt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(Dve,"_attributeToAsn1");function lrr(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Jt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(lrr,"_encryptedContentToAsn1");function Nve(t,e,r){var n={},i=[];if(!Se.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(n.contentType);if(a!==Jt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var c="";if(Jt.util.isArray(n.encryptedContent))for(var l=0;l<n.encryptedContent.length;++l){if(n.encryptedContent[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");c+=n.encryptedContent[l].value}else c=n.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(n.encAlgorithm),parameter:Jt.util.createBuffer(n.encParameter.value),content:Jt.util.createBuffer(c)}}if(n.content){var c="";if(Jt.util.isArray(n.content))for(var l=0;l<n.content.length;++l){if(n.content[l].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");c+=n.content[l].value}else c=n.content;t.content=Jt.util.createBuffer(c)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Nve,"_fromAsn1");function unt(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Jt.pki.oids["aes128-CBC"]:case Jt.pki.oids["aes192-CBC"]:case Jt.pki.oids["aes256-CBC"]:e=Jt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Jt.pki.oids.desCBC:case Jt.pki.oids["des-EDE3-CBC"]:e=Jt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(unt,"_decryptContent")});var mnt=U((Qri,pnt)=>{d();var Qc=xi();iT();VB();yZ();KB();So();var qZ=pnt.exports=Qc.ssh=Qc.ssh||{};qZ.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=Qc.util.createBuffer();iD(a,n),uC(a,t.e),uC(a,t.n);var c=Qc.util.encode64(a.bytes(),64),l=Math.floor(c.length/66)+1;o+="Public-Lines: "+l+`\r
`,o+=c;var u=Qc.util.createBuffer();uC(u,t.d),uC(u,t.p),uC(u,t.q),uC(u,t.qInv);var f;if(!e)f=Qc.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=UZ(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=Qc.util.createBuffer();h.putBuffer(UZ("\0\0\0\0",e)),h.putBuffer(UZ("\0\0\0",e));var g=Qc.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(Qc.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),f=Qc.util.encode64(y.bytes(),64)}l=Math.floor(f.length/66)+1,o+=`\r
Private-Lines: `+l+`\r
`,o+=f;var E=UZ("putty-private-key-file-mac-key",e),x=Qc.util.createBuffer();iD(x,n),iD(x,i),iD(x,r),x.putInt32(a.length()),x.putBuffer(a),x.putInt32(u.length()),x.putBuffer(u);var b=Qc.hmac.create();return b.start("sha1",E),b.update(x.bytes()),o+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,o};qZ.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=Qc.util.createBuffer();return iD(n,r),uC(n,t.e),uC(n,t.n),r+" "+Qc.util.encode64(n.bytes())+" "+e};qZ.privateKeyToOpenSSH=function(t,e){return e?Qc.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):Qc.pki.privateKeyToPem(t)};qZ.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Qc.md.md5.create(),n="ssh-rsa",i=Qc.util.createBuffer();iD(i,n),uC(i,t.e),uC(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function uC(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=Qc.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(uC,"_addBigIntegerToBuffer");function iD(t,e){t.putInt32(e.length),t.putString(e)}s(iD,"_addStringToBuffer");function UZ(){for(var t=Qc.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(UZ,"_sha1")});var gnt=U((Hri,hnt)=>{d();hnt.exports=xi();iT();Lrt();Fg();dZ();PO();Zrt();VB();nnt();ant();lnt();sve();xZ();oR();eve();lve();fnt();dve();rve();VEe();RZ();Vm();YEe();mnt();Ave();So()});var Cnt=U(pR=>{"use strict";d();Object.defineProperty(pR,"__esModule",{value:!0});pR.convert=pR.Format=void 0;var HO=gnt(),pT;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(pT=pR.Format||(pR.Format={}));function Ant(t){var e=HO.pki.pemToDer(t),r=HO.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(Ant,"myASN");function urr(t){var e=Ant(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(urr,"txtFormat");function ynt(t,e){switch(e){case pT.der:return HO.pki.pemToDer(t);case pT.pem:return t;case pT.txt:return urr(t);case pT.asn1:return Ant(t);case pT.fingerprint:var r=HO.md.sha1.create(),n=ynt(t,pT.der);return r.update(n.getBytes()),r.digest().toHex();case pT.x509:return HO.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(ynt,"convert");pR.convert=ynt});var Tnt=U(zf=>{"use strict";d();var mT=zf&&zf.__assign||function(){return mT=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},mT.apply(this,arguments)},HZ=zf&&zf.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(zf,"__esModule",{value:!0});zf.convert=zf.Format=zf.addToGlobalAgent=zf.get=void 0;var Lve=require("https"),drr=require("tls"),Ent=require("child_process"),vnt=ett(),VE=Cnt();Object.defineProperty(zf,"Format",{enumerable:!0,get:s(function(){return VE.Format},"get")});Object.defineProperty(zf,"convert",{enumerable:!0,get:s(function(){return VE.convert},"get")});var xnt=process.platform==="darwin",bnt=Lve.globalAgent,GZ={keychain:"all",unique:!0,excludeBundled:!0,format:VE.Format.pem};function Int(t){if(t===void 0&&(t=GZ),!xnt)return[];t=mT(mT({},GZ),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,Ent.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=HZ(HZ([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,Ent.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=HZ(HZ([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var c=n.map(function(u){return(0,VE.convert)(u,VE.Format.fingerprint)}),l=t.excludeBundled?drr.rootCertificates.map(function(u){return(0,VE.convert)(u,VE.Format.fingerprint)}):[];n=n.filter(function(u,f){var p=c[f];return!(t.unique&&f!==c.indexOf(p)||t.excludeBundled&&l.includes(p))})}return n.map(function(u){return(0,VE.convert)(u,t.format)})}s(Int,"get");zf.get=Int;var WZ=bnt.options.ca,frr=s(function(t){if(t===void 0&&(t=GZ),!!xnt){var e;Array.isArray(WZ)?e=Array.from(WZ):e=typeof WZ<"u"?[WZ]:[],Int(mT(mT(mT({},GZ),t),{format:VE.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),bnt.options.ca=e,Lve.Agent=function(r){return function(n){var i=typeof n<"u"?mT({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(Lve.Agent),(0,vnt.setGlobalDispatcher)(new vnt.Agent({connect:{ca:e}}))}},"addToGlobalAgent");zf.addToGlobalAgent=frr});var wnt=U((Kri,Mve)=>{d();function prr(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let c=new t(a);i.push(c.toString())}}finally{o.done()}return Array.from(new Set(i))}s(prr,"all");process.platform!=="win32"?Mve.exports.all=()=>[]:Mve.exports.all=prr});var Nnt=U((nni,Dnt)=>{"use strict";d();function Bnt(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(Bnt,"validateParameter");function hrr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(hrr,"hasOwnProperty");function grr(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let c=e[o],l=r[a];hrr(c,"default")&&l==null&&(l=c.default),c.type==="object"&&c.default!=null&&(l=Object.assign({},c.default,l)),c.name==="options"&&(typeof l=="function"||l==null)&&(l={}),Bnt(l,e,o)?n.push(l):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((c,l)=>{if(c)return a(c);o(l)}),t.apply(this,n)});t.apply(this,n)}}s(grr,"defineOperation");Dnt.exports={defineOperation:grr,validateParameter:Bnt}});var jve=U((sni,Fnt)=>{"use strict";d();var aD=rhe()("kerberos"),sD=aD.KerberosClient,Lnt=aD.KerberosServer,hT=Nnt().defineOperation,Arr=1,yrr=2,Crr=4,Err=8,vrr=16,xrr=32,brr=64,Irr=128,Trr=256,Mnt=0,wrr=9,_rr=6;sD.prototype.step=hT(sD.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);sD.prototype.wrap=hT(sD.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);sD.prototype.unwrap=hT(sD.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);Lnt.prototype.step=hT(Lnt.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var Srr=hT(aD.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),Rrr=hT(aD.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),krr=hT(aD.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:Mnt}},{name:"callback",type:"function",required:!1}]),Prr=hT(aD.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);Fnt.exports={initializeClient:krr,initializeServer:Prr,principalDetails:Rrr,checkPassword:Srr,GSS_C_DELEG_FLAG:Arr,GSS_C_MUTUAL_FLAG:yrr,GSS_C_REPLAY_FLAG:Crr,GSS_C_SEQUENCE_FLAG:Err,GSS_C_CONF_FLAG:vrr,GSS_C_INTEG_FLAG:xrr,GSS_C_ANON_FLAG:brr,GSS_C_PROT_READY_FLAG:Irr,GSS_C_TRANS_FLAG:Trr,GSS_C_NO_OID:Mnt,GSS_MECH_OID_KRB5:wrr,GSS_MECH_OID_SPNEGO:_rr}});var Ont=U((cni,Brr)=>{Brr.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var Unt=U((lni,Qnt)=>{"use strict";d();var Drr=require("dns"),Nrr=jve(),Vve=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=Lrr(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,c,l){if(!a)return l();Drr.resolveCname(c,(u,f)=>{if(u)return l(u);Array.isArray(f)&&f.length>0&&(i.host=f[0]),l()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let c={};r!=null&&Object.assign(c,{user:e,password:r});let l=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;Nrr.initializeClient(l,c,(u,f)=>{if(u)return n(u,null);i.client=f,n(null,f)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function Lrr(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=Mrr(t),r(null,i)})}}s(Lrr,"firstTransition");function Mrr(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=Frr(t),r(null,i||"")})}}s(Mrr,"secondTransition");function Frr(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=Orr(t),r(null,a)})})}}s(Frr,"thirdTransition");function Orr(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(Orr,"fourthTransition");Qnt.exports={MongoAuthProcess:Vve}});var Hnt=U((fni,WO)=>{"use strict";d();var qnt=jve();WO.exports=qnt;WO.exports.Kerberos=qnt;WO.exports.version=Ont().version;WO.exports.processes={MongoAuthProcess:Unt().MongoAuthProcess}});var kit=U(Exe=>{"use strict";d();Object.defineProperty(Exe,"__esModule",{value:!0});Exe.assertNever=Vnr;function Vnr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Vnr,"assertNever")});var o7=U(rv=>{"use strict";d();Object.defineProperty(rv,"__esModule",{value:!0});rv.ChatCompletionContentPartOpaque=rv.ChatCompletionContentPartKind=rv.ChatRole=void 0;var $nr=kit(),kee;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(kee||(rv.ChatRole=kee={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,$nr.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(kee||(rv.ChatRole=kee={}));var Pit;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(Pit||(rv.ChatCompletionContentPartKind=Pit={}));var Bit;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(Bit||(rv.ChatCompletionContentPartOpaque=Bit={}))});var vxe=U(bC=>{"use strict";d();Object.defineProperty(bC,"__esModule",{value:!0});bC.BaseTokensPerName=bC.BaseTokensPerMessage=bC.BaseTokensPerCompletion=bC.ChatRole=void 0;var Dit;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(Dit||(bC.ChatRole=Dit={}));bC.BaseTokensPerCompletion=3;bC.BaseTokensPerMessage=3;bC.BaseTokensPerName=1});var Lit=U(Bee=>{"use strict";d();Object.defineProperty(Bee,"__esModule",{value:!0});Bee.toOpenAiChatMessage=Nit;Bee.toOpenAIChatMessages=Knr;var nv=o7(),Pee=vxe(),znr=IT();function xxe(t){return t.filter(e=>e.type===nv.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(xxe,"onlyStringContent");function Ynr(t){let e=t.map(r=>{if(r.type===nv.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===nv.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===nv.ChatCompletionContentPartKind.Opaque&&nv.ChatCompletionContentPartOpaque.usableIn(r,znr.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(Ynr,"stringAndImageContent");function Nit(t){switch(t.role){case nv.ChatRole.System:return{role:Pee.ChatRole.System,content:xxe(t.content),name:t.name};case nv.ChatRole.User:return{role:Pee.ChatRole.User,content:Ynr(t.content),name:t.name};case nv.ChatRole.Assistant:return{role:Pee.ChatRole.Assistant,content:xxe(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case nv.ChatRole.Tool:return{role:Pee.ChatRole.Tool,content:xxe(t.content),tool_call_id:t.toolCallId};default:return}}s(Nit,"toOpenAiChatMessage");function Knr(t){return t.map(Nit).filter(e=>!!e)}s(Knr,"toOpenAIChatMessages")});var Fit=U(Lee=>{"use strict";d();Object.defineProperty(Lee,"__esModule",{value:!0});Lee.toVsCodeChatMessage=Mit;Lee.toVsCodeChatMessages=Jnr;var Nee=o7();function Dee(t){return t.filter(e=>e.type===Nee.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(Dee,"onlyStringContent");var TT;function Mit(t){switch(TT??=require("vscode"),t.role){case Nee.ChatRole.Assistant:let e=TT.LanguageModelChatMessage.Assistant(Dee(t.content),t.name);return t.toolCalls&&(e.content=[new TT.LanguageModelTextPart(Dee(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new TT.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case Nee.ChatRole.User:return TT.LanguageModelChatMessage.User(Dee(t.content),t.name);case Nee.ChatRole.Tool:{let r=TT.LanguageModelChatMessage.User("");return r.content=[new TT.LanguageModelToolResultPart(t.toolCallId,[new TT.LanguageModelTextPart(Dee(t.content))])],r}default:return}}s(Mit,"toVsCodeChatMessage");function Jnr(t){return t.map(Mit).filter(e=>!!e)}s(Jnr,"toVsCodeChatMessages")});var IT=U(qg=>{"use strict";d();Object.defineProperty(qg,"__esModule",{value:!0});qg.OutputMode=qg.Raw=qg.OpenAI=void 0;qg.toMode=bxe;qg.toVSCode=Xnr;qg.toOpenAI=Znr;var Oit=Lit(),Qit=Fit();qg.OpenAI=vxe();qg.Raw=o7();var yR;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(yR||(qg.OutputMode=yR={}));function bxe(t,e){switch(t){case yR.Raw:return e;case yR.VSCode:return e instanceof Array?(0,Qit.toVsCodeChatMessages)(e):(0,Qit.toVsCodeChatMessage)(e);case yR.OpenAI:return e instanceof Array?(0,Oit.toOpenAIChatMessages)(e):(0,Oit.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(bxe,"toMode");function Xnr(t){return bxe(yR.VSCode,t)}s(Xnr,"toVSCode");function Znr(t){return bxe(yR.OpenAI,t)}s(Znr,"toOpenAI")});var Ixe=U(s7=>{"use strict";d();Object.defineProperty(s7,"__esModule",{value:!0});s7.jsonRetainedProps=void 0;s7.forEachNode=Uit;s7.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function Uit(t,e){if(e(t),t.type===1)for(let r of t.children)Uit(r,e)}s(Uit,"forEachNode")});var qit=U(Txe=>{"use strict";d();Object.defineProperty(Txe,"__esModule",{value:!0});Txe.once=eir;function eir(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(eir,"once")});var Rxe=U(nd=>{"use strict";d();Object.defineProperty(nd,"__esModule",{value:!0});nd.BudgetExceededError=nd.MaterializedChatMessageImage=nd.MaterializedChatMessageBreakpoint=nd.MaterializedChatMessageOpaque=nd.MaterializedChatMessage=nd.MaterializedChatMessageTextChunk=nd.GenericMaterializedContainer=void 0;var CD=qit(),fp=IT(),iv=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=c,this.children=o(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=_T(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return Kit(e,this.children,r)}allMetadata(){return Yit(this)}findById(e){return Sxe(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)tir(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof Wg&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof Wg||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return _xe(this,e),e}};nd.GenericMaterializedContainer=iv;var a7=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,CD.once)(async e=>await e.tokenLength({type:fp.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};nd.MaterializedChatMessageTextChunk=a7;var Wg=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=Kit(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return _xe(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Sxe(e,this)}_tokenCount=(0,CD.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,fp.toMode)(e.mode,r))});_upperBound=(0,CD.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,CD.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===fp.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===fp.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,fp.toMode)(e.mode,r))});_text=(0,CD.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of $it(this)){if(r instanceof CR||r instanceof wT){e.push(r);continue}if(r instanceof Hg){e.at(-1)instanceof Hg?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:fp.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof CR)return{type:fp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Jit(r.src),detail:r.detail}};if(r instanceof wT)return r.value;if(r instanceof Hg)return r.part;throw new Error("Unexpected element type")});if(this.role===fp.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===fp.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===fp.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===fp.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};nd.MaterializedChatMessage=Wg;var wT=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&fp.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};nd.MaterializedChatMessageOpaque=wT;var Hg=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};nd.MaterializedChatMessageBreakpoint=Hg;var CR=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,CD.once)(async e=>e.tokenLength({type:fp.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:Jit(this.src),detail:this.detail}}));isEmpty=!1};nd.MaterializedChatMessageImage=CR;function _T(t){return t instanceof iv||t instanceof Wg}s(_T,"isContainerType");function Vit(t){return t instanceof a7||t instanceof CR||t instanceof wT||t instanceof Hg}s(Vit,"isContentType");function tir(t){if(!_T(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(tir,"assertContainerOrChatMessage");function*$it(t,e=!1){for(let r of t.children)r instanceof a7?(yield{content:r,isTextSibling:e},e=!0):r instanceof CR||r instanceof wT||r instanceof Hg?yield{content:r,isTextSibling:!1}:r instanceof wT?yield{content:r,isTextSibling:!0}:(r&&(yield*$it(r,e)),e=!1)}s($it,"contentChunks");function rir(t,e){let r;function n(i,o){if(Vit(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");c7(r.node,e)}s(rir,"removeLowestPriorityLegacy");var Hit=new WeakMap;function zit(t){let e=Hit.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Hg?r=!0:t instanceof Wg?r=t.children.some(n=>n instanceof Hg):t instanceof iv&&(r=t.children.some(zit)),Hit.set(t,r),r}s(zit,"hasCachePoint");function nir(t){if(t instanceof Wg)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof Wg)return!1;return!0}s(nir,"shouldLookForCachePointInNode");function _xe(t,e){let r;if(t instanceof iv&&t.has(1)){rir(t,e);return}let n=nir(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:c}=i[o],l=a[a.length-1].children[c];if(!(n&&zit(l)&&(r=void 0,l instanceof Hg))){if(l instanceof iv&&l.has(4)){let u=[...a,l];i.splice(o+1,0,...l.children.map((f,p)=>({chain:u,index:p})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=Wit(r.value);let u=Wit(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new Mee(t);Vit(r.value)||r.value instanceof iv&&r.value.has(2)||_T(r.value)&&!r.value.children.length?c7(r.value,e):_xe(r.value,e)}s(_xe,"removeLowestPriorityChild");var Mee=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof Wg?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};nd.BudgetExceededError=Mee;function Wit(t){if(!_T(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(Wit,"getLowestPriorityAmongChildren");function*Yit(t){yield*t.metadata;for(let e of t.children)_T(e)?yield*Yit(e):yield*e.metadata}s(Yit,"allMetadata");function Kit(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(_T(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(Kit,"replaceNode");function*Git(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,_T(r)&&e.push(...r.children)}}s(Git,"forEachNode");function iir(t){let e=t;for(;e.parent;)e=e.parent;return e}s(iir,"getRoot");function jit(t){return t instanceof iv&&t.keepWithId!==void 0}s(jit,"isKeepWith");var wxe=new Set;function oir(t,e){let r=new Set;for(let n of Git(t))jit(n)&&!wxe.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)wxe.add(n);try{let n=iir(t);for(let i of Git(n))jit(i)&&r.has(i.keepWithId)?c7(i,e):i instanceof Wg&&i.toolCalls&&(i.toolCalls=sir(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&c7(i,e))}finally{for(let n of r)wxe.delete(n)}}s(oir,"removeOtherKeepWiths");function Sxe(t,e){if(e.id===t)return e;for(let r of e.children)if(_T(r)){let n=Sxe(t,r);if(n)return n}}s(Sxe,"findNodeById");function c7(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),oir(t,e),r.isEmpty?c7(r,e):r.onChunksChange())}s(c7,"removeNode");function Jit(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(Jit,"getEncodedBase64");function sir(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(sir,"filterIfDifferent")});var Zit=U(()=>{"use strict";d();function air(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(air,"_vscpp");function Xit(){throw new Error("This should not be invoked!")}s(Xit,"_vscppf");Xit.isFragment=!0;globalThis.vscpp=air;globalThis.vscppf=Xit});var Pxe=U(Fee=>{"use strict";d();Object.defineProperty(Fee,"__esModule",{value:!0});Fee.PromptElement=void 0;Zit();var kxe=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};Fee.PromptElement=kxe});var qxe=U(to=>{"use strict";d();Object.defineProperty(to,"__esModule",{value:!0});to.LogicalWrapper=to.IfEmpty=to.AbstractKeepWith=to.TokenLimit=to.Expandable=to.Chunk=to.LegacyPrioritization=to.ToolResult=to.PrioritizedList=to.Image=to.TextChunk=to.ToolMessage=to.AssistantMessage=to.UserMessage=to.SystemMessage=to.BaseChatMessage=void 0;to.isChatMessagePromptElement=cir;to.useKeepWith=fir;var u7=Gg(),nh=Pxe();function cir(t){return t instanceof Oee||t instanceof Qee||t instanceof Uee}s(cir,"isChatMessagePromptElement");var ER=class extends nh.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};to.BaseChatMessage=ER;var Oee=class extends ER{static{s(this,"SystemMessage")}constructor(e){e.role=u7.Raw.ChatRole.System,super(e)}};to.SystemMessage=Oee;var Qee=class extends ER{static{s(this,"UserMessage")}constructor(e){e.role=u7.Raw.ChatRole.User,super(e)}};to.UserMessage=Qee;var Uee=class extends ER{static{s(this,"AssistantMessage")}constructor(e){e.role=u7.Raw.ChatRole.Assistant,super(e)}};to.AssistantMessage=Uee;var lir=/\s+/g,Bxe=class extends ER{static{s(this,"ToolMessage")}constructor(e){e.role=u7.Raw.ChatRole.Tool,super(e)}};to.ToolMessage=Bxe;var qee=class extends nh.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?lir:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?o+=`
`:a.push(l)}else l!=null&&(o+=l);let c=await uir(e,i,o,n);return vscpp(vscppf,null,a,c)}render(e){return e}};to.TextChunk=qee;async function uir(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:u7.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return i;i=c,o=a}return i}s(uir,"getTextContentBelowBudget");var Dxe=class extends nh.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};to.Image=Dxe;var Nxe=class extends nh.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(qee,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};to.PrioritizedList=Nxe;var Lxe=class extends nh.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};to.ToolResult=Lxe;var Mxe=class extends nh.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};to.LegacyPrioritization=Mxe;var Fxe=class extends nh.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};to.Chunk=Fxe;var Oxe=class extends nh.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};to.Expandable=Oxe;var Qxe=class extends nh.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};to.TokenLimit=Qxe;var Hee=class extends nh.PromptElement{static{s(this,"AbstractKeepWith")}};to.AbstractKeepWith=Hee;var dir=0;function fir(){let t=dir++;return class extends Hee{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(fir,"useKeepWith");var Uxe=class extends nh.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(l7,null,this.props.alt),vscpp(l7,{flexGrow:1},this.props.children))}};to.IfEmpty=Uxe;var l7=class extends nh.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};to.LogicalWrapper=l7});var tot=U(d7=>{"use strict";d();Object.defineProperty(d7,"__esModule",{value:!0});d7.localize=pir;d7.localize2=mir;d7.getConfiguredDefaultLocale=hir;function eot(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(eot,"_format");function pir(t,e,...r){return eot(e,r)}s(pir,"localize");function mir(t,e,...r){let n=eot(e,r);return{original:n,value:n}}s(mir,"localize2");function hir(t){}s(hir,"getConfiguredDefaultLocale")});var jxe=U(Ut=>{"use strict";d();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.isAndroid=Ut.isEdge=Ut.isSafari=Ut.isFirefox=Ut.isChrome=Ut.OS=Ut.setTimeout0=Ut.setTimeout0IsFaster=Ut.translationsConfigFile=Ut.platformLocale=Ut.locale=Ut.Language=Ut.language=Ut.userAgent=Ut.platform=Ut.isCI=Ut.isMobile=Ut.isIOS=Ut.webWorkerOrigin=Ut.isWebWorker=Ut.isWeb=Ut.isElectron=Ut.isNative=Ut.isLinuxSnap=Ut.isLinux=Ut.isMacintosh=Ut.isWindows=Ut.LANGUAGE_DEFAULT=void 0;Ut.PlatformToString=Air;Ut.isLittleEndian=yir;Ut.isBigSurOrNewer=Cir;var rot=tot();Ut.LANGUAGE_DEFAULT="en";var m7=!1,h7=!1,p7=!1,sot=!1,aot=!1,Wxe=!1,cot=!1,Gxe=!1,lot=!1,uot=!1,f7,Wee=Ut.LANGUAGE_DEFAULT,Hxe=Ut.LANGUAGE_DEFAULT,dot,ov,sv=globalThis,pp;typeof sv.vscode<"u"&&typeof sv.vscode.process<"u"?pp=sv.vscode.process:typeof process<"u"&&(pp=process);var fot=typeof pp?.versions?.electron=="string",gir=fot&&pp?.type==="renderer";if(typeof pp=="object"){m7=pp.platform==="win32",h7=pp.platform==="darwin",p7=pp.platform==="linux",sot=p7&&!!pp.env.SNAP&&!!pp.env.SNAP_REVISION,cot=fot,lot=!!pp.env.CI||!!pp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,f7=Ut.LANGUAGE_DEFAULT,Wee=Ut.LANGUAGE_DEFAULT;let t=pp.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];f7=e.locale,Hxe=e.osLocale,Wee=r||Ut.LANGUAGE_DEFAULT,dot=e._translationsConfigFile}catch{}aot=!0}else typeof navigator=="object"&&!gir?(ov=navigator.userAgent,m7=ov.indexOf("Windows")>=0,h7=ov.indexOf("Macintosh")>=0,Gxe=(ov.indexOf("Macintosh")>=0||ov.indexOf("iPad")>=0||ov.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,p7=ov.indexOf("Linux")>=0,uot=ov?.indexOf("Mobi")>=0,Wxe=!0,f7=rot.getConfiguredDefaultLocale(rot.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Ut.LANGUAGE_DEFAULT,Wee=f7,Hxe=navigator.language):console.error("Unable to resolve platform.");function Air(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(Air,"PlatformToString");var Gee=0;h7?Gee=1:m7?Gee=3:p7&&(Gee=2);Ut.isWindows=m7;Ut.isMacintosh=h7;Ut.isLinux=p7;Ut.isLinuxSnap=sot;Ut.isNative=aot;Ut.isElectron=cot;Ut.isWeb=Wxe;Ut.isWebWorker=Wxe&&typeof sv.importScripts=="function";Ut.webWorkerOrigin=Ut.isWebWorker?sv.origin:void 0;Ut.isIOS=Gxe;Ut.isMobile=uot;Ut.isCI=lot;Ut.platform=Gee;Ut.userAgent=ov;Ut.language=Wee;var not;(function(t){function e(){return Ut.language}s(e,"value"),t.value=e;function r(){return Ut.language.length===2?Ut.language==="en":Ut.language.length>=3?Ut.language[0]==="e"&&Ut.language[1]==="n"&&Ut.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Ut.language==="en"}s(n,"isDefault"),t.isDefault=n})(not||(Ut.Language=not={}));Ut.locale=f7;Ut.platformLocale=Hxe;Ut.translationsConfigFile=dot;Ut.setTimeout0IsFaster=typeof sv.postMessage=="function"&&!sv.importScripts;Ut.setTimeout0=(()=>{if(Ut.setTimeout0IsFaster){let t=[];sv.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),sv.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Ut.OS=h7||Gxe?2:m7?1:3;var iot=!0,oot=!1;function yir(){if(!oot){oot=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,iot=new Uint16Array(t.buffer)[0]===513}return iot}s(yir,"isLittleEndian");Ut.isChrome=!!(Ut.userAgent&&Ut.userAgent.indexOf("Chrome")>=0);Ut.isFirefox=!!(Ut.userAgent&&Ut.userAgent.indexOf("Firefox")>=0);Ut.isSafari=!!(!Ut.isChrome&&Ut.userAgent&&Ut.userAgent.indexOf("Safari")>=0);Ut.isEdge=!!(Ut.userAgent&&Ut.userAgent.indexOf("Edg/")>=0);Ut.isAndroid=!!(Ut.userAgent&&Ut.userAgent.indexOf("Android")>=0);function Cir(t){return parseFloat(t)>=20}s(Cir,"isBigSurOrNewer")});var mot=U(IC=>{"use strict";d();Object.defineProperty(IC,"__esModule",{value:!0});IC.arch=IC.platform=IC.env=IC.cwd=void 0;var pot=jxe(),vR,Vxe=globalThis.vscode;if(typeof Vxe<"u"&&typeof Vxe.process<"u"){let t=Vxe.process;vR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?vR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:vR={get platform(){return pot.isWindows?"win32":pot.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};IC.cwd=vR.cwd;IC.env=vR.env;IC.platform=vR.platform;IC.arch=vR.arch});var got=U(ur=>{"use strict";d();Object.defineProperty(ur,"__esModule",{value:!0});ur.delimiter=ur.sep=ur.toNamespacedPath=ur.parse=ur.format=ur.extname=ur.basename=ur.dirname=ur.relative=ur.resolve=ur.join=ur.isAbsolute=ur.normalize=ur.posix=ur.win32=void 0;var ED=mot(),Eir=65,vir=97,xir=90,bir=122,kT=46,ql=47,Xf=92,ST=58,Iir=63,jee=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function Tir(t,e){if(t===null||typeof t!="object")throw new jee(e,"Object",t)}s(Tir,"validateObject");function ja(t,e){if(typeof t!="string")throw new jee(e,"string",t)}s(ja,"validateString");var Zf=ED.platform==="win32";function yi(t){return t===ql||t===Xf}s(yi,"isPathSeparator");function $xe(t){return t===ql}s($xe,"isPosixPathSeparator");function RT(t){return t>=Eir&&t<=xir||t>=vir&&t<=bir}s(RT,"isWindowsDeviceRoot");function Vee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=ql}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==kT||i.charCodeAt(i.length-2)!==kT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===kT&&c!==-1?++c:c=-1}return i}s(Vee,"normalizeString");function hot(t,e){Tir(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(hot,"_format");ur.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ja(o,"path"),o.length===0)continue}else e.length===0?o=ED.cwd():(o=ED.env[`=${e}`]||ED.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Xf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)yi(f)&&(c=1,u=!0);else if(yi(f))if(u=!0,yi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&yi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!yi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else RT(f)&&o.charCodeAt(1)===ST&&(l=o.slice(0,2),c=2,a>2&&yi(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=Vee(r,!n,"\\",yi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ja(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return $xe(o)?"\\":t;if(yi(o))if(i=!0,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else RT(o)&&t.charCodeAt(1)===ST&&(n=t.slice(0,2),r=2,e>2&&yi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?Vee(t.slice(r),!i,"\\",yi):"";return a.length===0&&!i&&(a="."),a.length>0&&yi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ja(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return yi(r)||e>2&&RT(r)&&t.charCodeAt(1)===ST&&yi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ja(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&yi(r.charCodeAt(0))){++i;let o=r.length;o>1&&yi(r.charCodeAt(1))&&(++i,o>2&&(yi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&yi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ur.win32.normalize(e)},relative(t,e){if(ja(t,"from"),ja(e,"to"),t===e)return"";let r=ur.win32.resolve(t),n=ur.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Xf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Xf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===Xf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===Xf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===Xf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===Xf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===Xf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Xf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===Xf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ur.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Xf){if(e.charCodeAt(1)===Xf){let r=e.charCodeAt(2);if(r!==Iir&&r!==kT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(RT(e.charCodeAt(0))&&e.charCodeAt(1)===ST&&e.charCodeAt(2)===Xf)return`\\\\?\\${e}`;return t},dirname(t){ja(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return yi(i)?t:".";if(yi(i)){if(r=n=1,yi(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&yi(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!yi(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else RT(i)&&t.charCodeAt(1)===ST&&(r=e>2&&yi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(yi(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ja(e,"ext"),ja(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&RT(t.charCodeAt(0))&&t.charCodeAt(1)===ST&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(yi(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(yi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ja(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===ST&&RT(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(yi(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===kT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:hot.bind(null,"\\"),parse(t){ja(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return yi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(yi(i)){if(n=1,yi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&yi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!yi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(RT(i)&&t.charCodeAt(1)===ST){if(r<=2)return e.root=e.dir=t,e;if(n=2,yi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),yi(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===kT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var wir=(()=>{if(Zf){let t=/\\/g;return()=>{let e=ED.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>ED.cwd()})();ur.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:wir();ja(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===ql)}return e=Vee(e,!r,"/",$xe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ja(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,r=t.charCodeAt(t.length-1)===ql;return t=Vee(t,!e,"/",$xe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ja(t,"path"),t.length>0&&t.charCodeAt(0)===ql},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ja(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ur.posix.normalize(e)},relative(t,e){if(ja(t,"from"),ja(e,"to"),t===e||(t=ur.posix.resolve(t),e=ur.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===ql&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===ql)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===ql?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===ql)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(ja(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===ql,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===ql){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ja(e,"ext"),ja(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===ql){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===ql){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ja(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===ql){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===kT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:hot.bind(null,"/"),parse(t){ja(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===ql,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===ql){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===kT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ur.posix.win32=ur.win32.win32=ur.win32;ur.posix.posix=ur.win32.posix=ur.posix;ur.normalize=Zf?ur.win32.normalize:ur.posix.normalize;ur.isAbsolute=Zf?ur.win32.isAbsolute:ur.posix.isAbsolute;ur.join=Zf?ur.win32.join:ur.posix.join;ur.resolve=Zf?ur.win32.resolve:ur.posix.resolve;ur.relative=Zf?ur.win32.relative:ur.posix.relative;ur.dirname=Zf?ur.win32.dirname:ur.posix.dirname;ur.basename=Zf?ur.win32.basename:ur.posix.basename;ur.extname=Zf?ur.win32.extname:ur.posix.extname;ur.format=Zf?ur.win32.format:ur.posix.format;ur.parse=Zf?ur.win32.parse:ur.posix.parse;ur.toNamespacedPath=Zf?ur.win32.toNamespacedPath:ur.posix.toNamespacedPath;ur.sep=Zf?ur.win32.sep:ur.posix.sep;ur.delimiter=Zf?ur.win32.delimiter:ur.posix.delimiter});var bot=U(vD=>{"use strict";d();Object.defineProperty(vD,"__esModule",{value:!0});vD.URI=void 0;vD.isUriComponents=Nir;vD.uriToFsPath=Kee;var Aot=got(),zee=jxe(),_ir=/^\w[\w\d+.-]*$/,Sir=/^\//,Rir=/^\/\//;function kir(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!_ir.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Sir.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Rir.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(kir,"_validateUri");function Pir(t,e){return!t&&!e?"file":t}s(Pir,"_schemeFix");function Bir(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==jg&&(e=jg+e):e=jg;break}return e}s(Bir,"_referenceResolution");var hs="",jg="/",Dir=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Yee=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||hs,this.authority=e.authority||hs,this.path=e.path||hs,this.query=e.query||hs,this.fragment=e.fragment||hs):(this.scheme=Pir(e,a),this.authority=r||hs,this.path=Bir(this.scheme,n||hs),this.query=i||hs,this.fragment=o||hs,kir(this,a))}get fsPath(){return Kee(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=hs),n===void 0?n=this.authority:n===null&&(n=hs),i===void 0?i=this.path:i===null&&(i=hs),o===void 0?o=this.query:o===null&&(o=hs),a===void 0?a=this.fragment:a===null&&(a=hs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new PT(r,n,i,o,a)}static parse(e,r=!1){let n=Dir.exec(e);return n?new PT(n[2]||hs,$ee(n[4]||hs),$ee(n[5]||hs),$ee(n[7]||hs),$ee(n[9]||hs),r):new PT(hs,hs,hs,hs,hs)}static file(e){let r=hs;if(zee.isWindows&&(e=e.replace(/\\/g,jg)),e[0]===jg&&e[1]===jg){let n=e.indexOf(jg,2);n===-1?(r=e.substring(2),e=jg):(r=e.substring(2,n),e=e.substring(n)||jg)}return new PT("file",r,e,hs,hs)}static from(e,r){return new PT(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return zee.isWindows&&e.scheme==="file"?n=t.file(Aot.win32.join(Kee(e,!0),...r)).path:n=Aot.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return zxe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new PT(e);return r._formatted=e.external??null,r._fsPath=e._sep===Eot?e.fsPath??null:null,r}}else return e}};vD.URI=Yee;function Nir(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(Nir,"isUriComponents");var Eot=zee.isWindows?1:void 0,PT=class extends Yee{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Kee(this,!1)),this._fsPath}toString(e=!1){return e?zxe(this,!0):(this._formatted||(this._formatted=zxe(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Eot),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},vot={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function yot(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=vot[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(yot,"encodeURIComponentFast");function Lir(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=vot[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(Lir,"encodeURIComponentMinimal");function Kee(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,zee.isWindows&&(r=r.replace(/\//g,"\\")),r}s(Kee,"uriToFsPath");function zxe(t,e){let r=e?Lir:yot,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=jg,n+=jg),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:yot(l,!1,!1)),n}s(zxe,"_asFormatted");function xot(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+xot(t.substr(3)):t}}s(xot,"decodeURIComponentGraceful");var Cot=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function $ee(t){return t.match(Cot)?t.replace(Cot,e=>xot(e)):t}s($ee,"percentDecode")});var Jxe=U(BT=>{"use strict";d();Object.defineProperty(BT,"__esModule",{value:!0});BT.PromptReference=BT.ChatResponseReferencePartStatusKind=BT.PromptMetadata=void 0;var g7=bot(),Yxe=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};BT.PromptMetadata=Yxe;var Iot;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(Iot||(BT.ChatResponseReferencePartStatusKind=Iot={}));var Kxe=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?g7.URI.from(n):{uri:g7.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?g7.URI.from(e.iconPath):"light"in e.iconPath?{light:g7.URI.from(e.iconPath.light),dark:g7.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};BT.PromptReference=Kxe});var sbe=U(bD=>{"use strict";d();Object.defineProperty(bD,"__esModule",{value:!0});bD.PromptRenderer=bD.MetadataMap=void 0;var Mir=Ixe(),A7=Rxe(),xD=IT(),hc=qxe(),obe=Jxe(),Tot;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(Tot||(bD.MetadataMap=Tot={}));var Zxe=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new Xee(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=Rot(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let f=this.createElement(u),p;f instanceof hc.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(f);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:f,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=s(l=>{let u=0;for(let f=l+1;f<a.length;f++)for(let{element:p}of a[f]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[l,u]of a.entries()){let f=c(l),p=0;for(let{element:E}of u)p+=E.props.flexBasis??1;let m=0,h=u.map(E=>{if(E.tokenLimit===void 0)return!1;let x=E.element.props.flexBasis??1,b=x/p;return Math.floor(e.remainingTokenBudget*b)<E.tokenLimit?!1:(p-=x,m+=E.tokenLimit,!0)}),g=u.map((E,x)=>{let b=(E.element.props.flexBasis??1)/p;return{tokenBudget:h[x]?E.tokenLimit:Math.floor((e.remainingTokenBudget-m)*b),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:xD.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-f),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:f,elements:u.map((E,x)=>({id:E.element.node.id,tokenBudget:g[x].tokenBudget}))}),await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=await _ot(E,()=>x.prepare?.(g[b],n,i));E.node.setState(_)}));let y=await Promise.all(u.map(async({element:E,promptElementInstance:x},b)=>{let _=g[b];return await _ot(E,()=>x.render(E.node.getState(),_,n,i))}));for(let[E,{element:x,promptElementInstance:b}]of u.entries()){let _=g[E],k=y[E];if(!k)continue;let P=await this._processPromptRenderPiece(new xR(_.tokenBudget,this._endpoint),x,b,k,n,i);b instanceof hc.Expandable&&this._growables.push({initialConsume:P,elem:x.node}),e.consume(P)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let c=Sot(i),l=new xR(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await Fir(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,o,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new xR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,xD.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new xR(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,f=l.map(m=>{if(!(m instanceof TC))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Zee),p=i.map(m=>{if(!(m instanceof TC)||l.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(Zee);return{metadata:{get:s(m=>l.find(h=>h instanceof m),"get"),getAll:s(m=>l.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:f,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let c=o.length-1;c>=0;c--){let l=o[c];if(l.limit>e)continue;let u=n.findById(l.id);if(!u)continue;let f=await u.tokenCount(this._tokenizer);if(f<l.limit&&!await this._grow(u,f,l.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>l.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>l.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof hc.Expandable))throw new Error("unreachable: expected growable");let c=new Xee(null,0,o.elem.id),l=new xR(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:xD.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),f=c.materialize();if(!e.replaceNode(o.elem.id,f))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===hc.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},Jee(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new TC(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let c of i){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&o.push(c.value),c.kind==="intrinsic")if(c.name==="br")o.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new TC(l));else this._handleIntrinsic(e,c.name,c.props,Jee(c.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};bD.PromptRenderer=Zxe;async function Fir(t,e,r,n){let i=0;if((0,hc.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,xD.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:xD.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(Fir,"computeTokensConsumedByLiterals");function Sot(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new rbe(String(t))):Oir(t)?Jee(t.children,e):Qir(t)?Jee(t,e):typeof t.ctor=="string"?e.push(new ebe(t.ctor,t.props,t.children)):e.push(new tbe(t.ctor,t.props,t.children)),e)}s(Sot,"flattenAndReduce");function Jee(t,e=[]){for(let r of t)Sot(r,e);return e}s(Jee,"flattenAndReduceArr");var ebe=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},tbe=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},rbe=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},xR=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},Xee=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new TC(obe.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return y7.fromJSON(i,a,o);default:}}).filter(Zee),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new hc.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,hc.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new hc.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new hc.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof hc.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof hc.Chunk&&(this._objFlags|=2),this._obj instanceof hc.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new y7(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new y7(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(Zee),props:{},references:this._metadata.filter(r=>r instanceof TC).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=Xxe(this._obj.props,Mir.jsonRetainedProps)),this._obj instanceof hc.BaseChatMessage)e.ctor=1,Object.assign(e.props,Xxe(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof hc.Image)return{...e,ctor:3,props:{...e.props,...Xxe(this._obj.props,["src","detail"])}};this._obj instanceof hc.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof hc.Image)return new A7.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof hc.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new A7.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof hc.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof hc.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new A7.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof hc.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof hc.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new nbe({type:xD.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},nbe=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new A7.MaterializedChatMessageBreakpoint(e,this.part)}},y7=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new TC(obe.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new A7.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof TC).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function Oir(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(Oir,"isFragmentCtor");function Zee(t){return t!==void 0}s(Zee,"isDefined");var ibe=class extends obe.PromptMetadata{static{s(this,"InternalMetadata")}},TC=class extends ibe{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function Qir(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(Qir,"isIterable");function Xxe(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(Xxe,"pickProps");function Rot(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(Rot,"atPath");var wot=new WeakSet;async function _ot(t,e){try{return await e()}catch(r){throw r instanceof Error&&!wot.has(r)&&r.constructor.name!=="CancellationError"&&(wot.add(r),r.message+=` (at tsx element ${Rot(t.path)})`),r}}s(_ot,"annotateError")});var kot=U(ete=>{"use strict";d();Object.defineProperty(ete,"__esModule",{value:!0});ete.VSCodeTokenizer=void 0;var abe=IT(),cbe=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=abe.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==abe.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===abe.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};ete.VSCodeTokenizer=cbe});var Pot=U(ID=>{"use strict";d();Object.defineProperty(ID,"__esModule",{value:!0});ID.tracerCss=ID.tracerSrc=void 0;ID.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';ID.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var Mot=U(rte=>{"use strict";d();Object.defineProperty(rte,"__esModule",{value:!0});rte.HTMLTracer=void 0;var Bot=Pot(),bR=Rxe(),Uir=IT(),lbe=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return ube.create({epochs:this.epochs,traceData:Not(this.traceData)})}serveRouter(e){return new tte({baseAddress:e,epochs:this.epochs,traceData:Not(this.traceData)})}};rte.HTMLTracer=lbe;var tte=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${Bot.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await Dot(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${Bot.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),c=await Dot(i.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},ube=class t extends tte{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{o.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),i=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function Dot(t,e){return{container:await Lot(t,e.container,!1),removed:e.removed,budget:e.budget}}s(Dot,"serializeRenderData");async function Lot(t,e,r){let n={metadata:e.metadata.map(Hir),priority:e.priority};if(e instanceof bR.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof bR.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof bR.MaterializedChatMessageOpaque||e instanceof bR.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>Lot(t,o,r||e instanceof bR.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof bR.GenericMaterializedContainer)return{...i,type:0};if(e instanceof bR.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:Uir.Raw.ChatRole.display(e.role),text:o}}}qir(e)}s(Lot,"serializeMaterialized");function qir(t){throw new Error("unreachable")}s(qir,"assertNever");function Hir(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(Hir,"serializeMetadata");var Not=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var Oot=U(Fot=>{"use strict";d();Object.defineProperty(Fot,"__esModule",{value:!0})});var Uot=U(Qot=>{"use strict";d();Object.defineProperty(Qot,"__esModule",{value:!0})});var Hot=U(qot=>{"use strict";d();Object.defineProperty(qot,"__esModule",{value:!0})});var Gg=U(Ks=>{"use strict";d();var Wir=Ks&&Ks.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),IR=Ks&&Ks.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Wir(e,t,r)};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.contentType=Ks.PromptRenderer=Ks.MetadataMap=Ks.PromptElement=Ks.JSONTree=void 0;Ks.renderPrompt=Vir;Ks.renderElementJSON=$ir;var dbe=IT(),Wot=sbe(),Gir=kot();IR(Mot(),Ks);Ks.JSONTree=Ixe();IR(IT(),Ks);IR(qxe(),Ks);IR(Jxe(),Ks);IR(Oot(),Ks);IR(Uot(),Ks);IR(Hot(),Ks);var jir=Pxe();Object.defineProperty(Ks,"PromptElement",{enumerable:!0,get:s(function(){return jir.PromptElement},"get")});var Got=sbe();Object.defineProperty(Ks,"MetadataMap",{enumerable:!0,get:s(function(){return Got.MetadataMap},"get")});Object.defineProperty(Ks,"PromptRenderer",{enumerable:!0,get:s(function(){return Got.PromptRenderer},"get")});async function Vir(t,e,r,n,i,o,a=dbe.OutputMode.VSCode){let c="countTokens"in n?new Gir.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,l=new Wot.PromptRenderer(r,t,e,c),u=await l.render(i,o),f=l.getUsedContext();return{...u,usedContext:f}}s(Vir,"renderPrompt");Ks.contentType="application/vnd.codechat.prompt+json.1";function $ir(t,e,r,n){return new Wot.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:dbe.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===dbe.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s($ir,"renderElementJSON")});var yp=U(V7=>{"use strict";d();Object.defineProperty(V7,"__esModule",{value:!0});V7.dedent=void 0;function jat(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(c,l){var u=l.match(/\n([\t ]+|(?!\s).)/g);return u?c.concat(u.map(function(f){var p,m;return(m=(p=f.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):c},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(c){return c.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(c,l){var u=a.match(/(?:^|\n)( *)$/),f=u?u[1]:"",p=c;typeof c=="string"&&c.includes(`
`)&&(p=String(c).split(`
`).map(function(m,h){return h===0?m:""+f+m}).join(`
`)),a+=p+n[l+1]}),a}s(jat,"dedent");V7.dedent=jat;V7.default=jat});var Zat=U(DIe=>{"use strict";d();Object.defineProperty(DIe,"__esModule",{value:!0});DIe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var oct=U(LIe=>{"use strict";d();Object.defineProperty(LIe,"__esModule",{value:!0});var ect=require("worker_threads"),Hsr=require("v8"),Wsr=require("os"),tct=Zat(),Tre="ready",rct="spawning",Gsr="busy",wre="off",nct=Wsr.cpus().length,ict=process.version.replace("v","").split("."),jsr=parseInt(ict[0]),Vsr=parseInt(ict[1]),NIe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=nct,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new ect.Worker(tct.workerFile,{eval:!0});e.status=rct,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=Tre,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=wre,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:l})=>l===wre).forEach(l=>this.resurrect(l)),this.taskQueue.length===0)return;let e;for(let l=0;l<this.workers.length;l++)if(this.workers[l].status===Tre){e=this.workers[l];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=Gsr;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:c}=r;try{let l="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}l+=`let ${m} = ${h}
`}let u=Hsr.serialize(o.data),f=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${l}
        const dataParsed = JSON.parse('${f}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,c(h)}),n.once("error",m=>{e.status=wre,c(m),this.tick()}),n.postMessage(p)}catch(l){this.free(n),c(l)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=Tre,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:nct,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let c=new ect.Worker(tct.workerFile,{eval:!0});this.workers.push({status:rct,worker:c}),c.once("online",(l=>()=>{process.nextTick(()=>{this.workers[l].status=Tre,this.workers[l].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),c.once("error",(l=>u=>{this.workers[l].status=wre,this.workers[l].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(jsr>=12&&Vsr>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};LIe.default=new NIe});var _re=U(QR=>{"use strict";d();var $sr=QR&&QR.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(QR,"__esModule",{value:!0});var $7=$sr(oct()),zsr=`job needs a function.
Try with:
> job(() => {...}, config)`,Ysr=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function Ksr(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(zsr));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(Ysr));$7.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(Ksr,"job");QR.job=Ksr;QR.stop=$7.default.teardown.bind($7.default);QR.start=$7.default.setup.bind($7.default)});var xct=U(UR=>{"use strict";d();var FC=UR&&UR.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},jIe=UR&&UR.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Cv,VT;Object.defineProperty(UR,"__esModule",{value:!0});var VIe=class{static{s(this,"AwaitLock")}constructor(){Cv.set(this,!1),VT.set(this,new Set)}get acquired(){return FC(this,Cv,"f")}acquireAsync({timeout:e}={}){if(!FC(this,Cv,"f"))return jIe(this,Cv,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{FC(this,VT,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),FC(this,VT,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{FC(this,VT,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return FC(this,Cv,"f")?!1:(jIe(this,Cv,!0,"f"),!0)}release(){if(!FC(this,Cv,"f"))throw new Error("Cannot release an unacquired lock");if(FC(this,VT,"f").size>0){let[e]=FC(this,VT,"f");FC(this,VT,"f").delete(e),e()}else jIe(this,Cv,!1,"f")}};UR.default=VIe;Cv=new WeakMap,VT=new WeakMap});var Swe=U((sYi,Ndt)=>{d();var CQ=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,b0r=typeof AbortController=="function",oie=b0r?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new Pdt}abort(){this.signal.dispatchEvent("abort")}},I0r=typeof AbortSignal=="function",T0r=typeof oie.AbortSignal=="function",Pdt=I0r?AbortSignal:T0r?oie.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},wwe=new Set,bwe=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;sie(r)&&_we(r,`${t} option`,`options.${e}`,yN)},"deprecatedOption"),Iwe=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(sie(r)){let{prototype:n}=yN,{get:i}=Object.getOwnPropertyDescriptor(n,t);_we(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),w0r=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(sie(r)){let{prototype:n}=yN,{get:i}=Object.getOwnPropertyDescriptor(n,t);_we(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),Bdt=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),sie=s(t=>!wwe.has(t),"shouldWarn"),_we=s((t,e,r,n)=>{wwe.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;Bdt(i,"DeprecationWarning",t,n)},"warn"),YR=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Ddt=s(t=>YR(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?AN:null:null,"getUintArray"),AN=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Twe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=Ddt(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},yN=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:E,noDeleteOnFetchRejection:x,noDeleteOnStaleGet:b}=e,{length:_,maxAge:k,stale:P}=e instanceof t?{}:e;if(r!==0&&!YR(r))throw new TypeError("max option must be a nonnegative integer");let N=r?Ddt(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=E,!this.fetchMethod&&E!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new Twe(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof f=="function"?(this.disposeAfter=f,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!x,this.maxSize!==0){if(!YR(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!l||!!P,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=YR(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!YR(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let M="LRU_CACHE_UNBOUNDED";sie(M)&&(wwe.add(M),Bdt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,t))}P&&bwe("stale","allowStale"),k&&bwe("maxAge","ttl"),_&&bwe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new AN(this.max),this.starts=new AN(this.max),this.setItemTTL=(n,i,o=CQ.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?CQ.now():0};let e=0,r=s(()=>{let n=CQ.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new AN(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!YR(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!YR(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return Iwe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let c=CQ.now()-this.starts[r];a.start=Math.floor(Date.now()-c)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=CQ.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,c),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),l=!1;else{let f=this.valList[u];r!==f&&(this.isBackgroundFetch(f)?f.__abortController.abort():o||(this.dispose(f,e,"set"),this.disposeAfter&&this.disposed.push([f,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),l||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new oie,c={signal:a.signal,options:n,context:i},l=s(m=>(a.signal.aborted||this.set(e,m,c.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),f=s(m=>m(this.fetchMethod(e,o,c)),"pcall"),p=new Promise(f).then(l,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,c.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:f},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let E=this.backgroundFetch(e,g,h,p);return r&&E.__staleWhileFetching!==void 0?E.__staleWhileFetching:E.__returned=E}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],c=this.isBackgroundFetch(a);return this.isStale(o)?c?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):c?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Iwe("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Iwe("reset","clear"),this.clear}get length(){return w0r("length","size"),this.size}static get AbortController(){return oie}static get AbortSignal(){return Pdt}};Ndt.exports=yN});var Pwe=U((lYi,Ldt)=>{"use strict";d();var EQ=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},Rwe=class extends EQ{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},kwe=class extends EQ{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};Ldt.exports={FetchBaseError:EQ,FetchError:Rwe,AbortError:kwe}});var Tv=U((fYi,Fdt)=>{"use strict";d();var{constants:{MAX_LENGTH:_0r}}=require("buffer"),{pipeline:aie,PassThrough:S0r}=require("stream"),{promisify:R0r}=require("util"),{createGunzip:k0r,createInflate:P0r,createBrotliDecompress:B0r,constants:{Z_SYNC_FLUSH:Mdt}}=require("zlib"),D0r=fy()("helix-fetch:utils"),N0r=R0r(aie),L0r=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),M0r=s((t,e,r,n)=>{if(!L0r(t,e))return r;let i=s(o=>{o&&(D0r(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return aie(r,k0r({flush:Mdt,finishFlush:Mdt}),i);case"deflate":case"x-deflate":return aie(r,P0r(),i);case"br":return aie(r,B0r(),i);default:return r}},"decodeStream"),F0r=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),cie=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?O0r(t,e):Q0r(t,e);default:return 0}},"calcSize"),O0r=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:cie(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),Q0r=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=cie(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=cie(t[i],e)}),r},"calcObjectSize"),U0r=s(t=>cie(t,new WeakSet),"sizeof"),q0r=s(async t=>{let e=new S0r,r=0,n=[];return e.on("data",i=>{if(r+i.length>_0r)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await N0r(t,e),Buffer.concat(n,r)},"streamToBuffer");Fdt.exports={decodeStream:M0r,isPlainObject:F0r,sizeof:U0r,streamToBuffer:q0r}});var uie=U((hYi,qdt)=>{"use strict";d();var{PassThrough:Odt,Readable:wv}=require("stream"),{types:{isAnyArrayBuffer:Udt}}=require("util"),{FetchError:H0r,FetchBaseError:W0r}=Pwe(),{streamToBuffer:G0r}=Tv(),j0r=Buffer.alloc(0),uh=Symbol("Body internals"),V0r=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Qdt=s(async t=>{if(t[uh].disturbed)throw new TypeError("Already read");if(t[uh].error)throw new TypeError(`Stream had error: ${t[uh].error.message}`);t[uh].disturbed=!0;let{stream:e}=t[uh];return e===null?j0r:G0r(e)},"consume"),lie=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=wv.from(e.toString()):e instanceof wv?r=e:Buffer.isBuffer(e)?r=wv.from(e):Udt(e)?r=wv.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=wv.from(e):r=wv.from(String(e)),this[uh]={stream:r,disturbed:!1,error:null},e instanceof wv&&r.on("error",n=>{let i=n instanceof W0r?n:new H0r(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[uh].error=i})}get body(){return this[uh].stream}get bodyUsed(){return this[uh].disturbed}async buffer(){return Qdt(this)}async arrayBuffer(){return V0r(await this.buffer())}async text(){return(await Qdt(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(lie.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var $0r=s(t=>{if(t[uh].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[uh],r=e;if(e instanceof wv){r=new Odt;let n=new Odt;e.pipe(r),e.pipe(n),t[uh].stream=n}return r},"cloneStream"),z0r=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||Udt(t)||t instanceof wv?null:"text/plain; charset=utf-8","guessContentType");qdt.exports={Body:lie,cloneStream:$0r,guessContentType:z0r}});var CN=U((yYi,jdt)=>{"use strict";d();var{validateHeaderName:Hdt,validateHeaderValue:Wdt}=require("http"),{isPlainObject:Y0r}=Tv(),_v=Symbol("Headers internals"),vQ=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof Hdt=="function")Hdt(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),Gdt=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof Wdt=="function")Wdt(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),die=class t{static{s(this,"Headers")}constructor(e={}){if(this[_v]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(Y0r(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[_v].map.set(vQ(e),Gdt(r,e))}has(e){return this[_v].map.has(vQ(e))}get(e){let r=this[_v].map.get(vQ(e));return r===void 0?null:r}append(e,r){let n=vQ(e),i=Gdt(r,e),o=this[_v].map.get(n);this[_v].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[_v].map.delete(vQ(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[_v].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[_v].map)}};Object.defineProperties(die.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));jdt.exports={Headers:die}});var Bwe=U((vYi,Vdt)=>{"use strict";d();var{EventEmitter:K0r}=require("events"),sA=Symbol("AbortSignal internals"),EN=class{static{s(this,"AbortSignal")}constructor(){this[sA]={eventEmitter:new K0r,onabort:null,aborted:!1}}get aborted(){return this[sA].aborted}get onabort(){return this[sA].onabort}set onabort(e){this[sA].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[sA].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[sA].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[sA][n]=="function"&&this[n](r),this[sA].eventEmitter.emit(e,r)}fire(){this[sA].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(EN.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var pie=class extends EN{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[sA].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[sA].timerId)}};Object.defineProperties(pie.prototype,{clear:{enumerable:!0}});var fie=Symbol("AbortController internals"),mie=class{static{s(this,"AbortController")}constructor(){this[fie]={signal:new EN}}get signal(){return this[fie].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[fie].signal.aborted||this[fie].signal.fire()}};Object.defineProperties(mie.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});Vdt.exports={AbortController:mie,AbortSignal:EN,TimeoutSignal:pie}});var xQ=U((IYi,Ydt)=>{"use strict";d();var{randomBytes:J0r}=require("crypto"),{Readable:X0r}=require("stream"),Nwe=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),Z0r=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),$dt=s(t=>`--${t}--\r
\r
`,"getFooter"),zdt=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,Nwe(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*epr(t,e){for(let[r,n]of t)yield zdt(e,r,n),Nwe(n)?yield*n.stream():yield n,yield`\r
`;yield $dt(e)}s(epr,"formDataIterator");var tpr=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(zdt(e,n,i)),r+=Nwe(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength($dt(e)),r},"getFormDataLength"),Dwe=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=J0r(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=tpr(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return X0r.from(epr(this.fd,this.boundary))}};Ydt.exports={isFormData:Z0r,FormDataSerializer:Dwe}});var Jdt=U((SYi,Kdt)=>{"use strict";d();var{AbortSignal:_Yi}=Bwe(),{Body:rpr,cloneStream:npr,guessContentType:ipr}=uie(),{Headers:opr}=CN(),{isPlainObject:spr}=Tv(),{isFormData:apr,FormDataSerializer:cpr}=xQ(),lpr=20,tw=Symbol("Request internals"),hie=class t extends rpr{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?npr(n):null),c=new opr(r.headers||n&&n.headers||{});if(apr(a)&&!c.has("content-type")){let p=new cpr(a);a=p.stream(),c.set("content-type",p.contentType()),!c.has("transfer-encoding")&&!c.has("content-length")&&c.set("content-length",p.length())}if(!c.has("content-type"))if(spr(a))a=JSON.stringify(a),c.set("content-type","application/json");else{let p=ipr(a);p&&c.set("content-type",p)}super(a);let l=n?n.signal:null;"signal"in r&&(l=r.signal);let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let f=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(f))throw new TypeError(`'${f}' is not a valid cache option`);this[tw]={init:{...r},method:o,redirect:u,cache:f,headers:c,parsedURL:i,signal:l},r.follow===void 0?!n||n.follow===void 0?this.follow=lpr:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[tw].method}get url(){return this[tw].parsedURL.toString()}get headers(){return this[tw].headers}get redirect(){return this[tw].redirect}get cache(){return this[tw].cache}get signal(){return this[tw].signal}clone(){return new t(this)}get init(){return this[tw].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(hie.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});Kdt.exports={Request:hie}});var Lwe=U((PYi,Xdt)=>{"use strict";d();var{Body:upr,cloneStream:dpr,guessContentType:fpr}=uie(),{Headers:ppr}=CN(),{isPlainObject:mpr}=Tv(),{isFormData:hpr,FormDataSerializer:gpr}=xQ(),aA=Symbol("Response internals"),gie=class t extends upr{static{s(this,"Response")}constructor(e=null,r={}){let n=new ppr(r.headers),i=e;if(hpr(i)&&!n.has("content-type")){let o=new gpr(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(mpr(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=fpr(i);o&&n.set("content-type",o)}super(i),this[aA]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[aA].url||""}get status(){return this[aA].status}get statusText(){return this[aA].statusText}get ok(){return this[aA].status>=200&&this[aA].status<300}get redirected(){return this[aA].counter>0}get headers(){return this[aA].headers}get httpVersion(){return this[aA].httpVersion}get decoded(){return this[aA].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(dpr(this),{...this[aA]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(gie.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Xdt.exports={Response:gie}});var eft=U((LYi,Zdt)=>{"use strict";d();var Apr=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),ypr=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Cpr=new Set([500,502,503,504]),Epr={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},vpr={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function KR(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(KR,"toNumberOrZero");function xpr(t){return t?Cpr.has(t.status):!0}s(xpr,"isErrorResponse");function Mwe(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(Mwe,"parseCacheControl");function bpr(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(bpr,"formatCacheControl");Zdt.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Mwe(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=Mwe(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":bpr(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&ypr.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Apr.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=Mwe(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)Epr[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return KR(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return KR(this._rescc["s-maxage"])}if(this._rescc["max-age"])return KR(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+KR(this._rescc["stale-if-error"]),n=e+KR(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+KR(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+KR(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&xpr(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!vpr[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var ift=U((OYi,nft)=>{"use strict";d();var Ipr=eft(),{Headers:Tpr}=CN(),tft=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),rft=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Fwe=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Ipr(tft(e),rft(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(tft(e))}responseHeaders(e){return new Tpr(this.policy.responseHeaders(rft(e)))}timeToLive(){return this.policy.timeToLive()}};nft.exports=Fwe});var aft=U((qYi,sft)=>{"use strict";d();var{Readable:wpr}=require("stream"),{Headers:oft}=CN(),{Response:_pr}=Lwe(),rw=Symbol("CacheableResponse internals"),Spr=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),Owe=class t extends _pr{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new oft(r.headers);this[rw]={headers:n,bufferedBody:e}}get headers(){return this[rw].headers}set headers(e){if(e instanceof oft)this[rw].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return wpr.from(this[rw].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[rw].bufferedBody}async arrayBuffer(){return Spr(this[rw].bufferedBody)}async text(){return this[rw].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c}=this;return new t(this[rw].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:c})}get[Symbol.toStringTag](){return this.constructor.name}},Rpr=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l}=t;return new Owe(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:c,counter:l})},"cacheableResponse");sft.exports={cacheableResponse:Rpr}});var Aie=U((GYi,cft)=>{"use strict";d();var Qwe=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};cft.exports={RequestAbortedError:Qwe}});var pft=U(($Yi,fft)=>{"use strict";d();var uft=require("http"),dft=require("https"),{Readable:kpr}=require("stream"),Sv=fy()("helix-fetch:h1"),{RequestAbortedError:lft}=Aie(),{decodeStream:Ppr}=Tv(),Bpr=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new dft.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new uft.Agent(n),r.httpAgent):void 0},"getAgent"),Dpr=s(t=>{t.h1={}},"setupContext"),Npr=s(async({h1:t})=>{t.httpAgent&&(Sv("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Sv("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Lpr=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l}=t,u=e?Ppr(n,l,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:c,headers:l,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Mpr=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?dft:uft,i=Bpr(t,e.protocol),o={...r,agent:i},{socket:a,body:c}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((l,u)=>u==="createConnection"&&!a.inUse?(f,p)=>{Sv(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:l[u],"get")}):o.createConnection=(l,u)=>{Sv(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((l,u)=>{Sv(`${o.method} ${e.href}`);let f,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Sv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new lft),f&&f.abort()},"onAbortSignal");if(p){if(p.aborted){u(new lft);return}p.addEventListener("abort",m)}f=n(e,o),f.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Sv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),l(Lpr(h,o.decode,u))}),f.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Sv(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),f.aborted||(Sv(`${o.method} ${e.href} failed with: ${h.message}`),f.abort(),u(h))}),c instanceof kpr?c.pipe(f):(c&&f.write(c),f.end())})},"h1Request");fft.exports={request:Mpr,setupContext:Dpr,resetContext:Npr}});var Aft=U((KYi,gft)=>{"use strict";d();var{connect:Fpr,constants:Opr}=require("http2"),{Readable:Qpr}=require("stream"),Xs=fy()("helix-fetch:h2"),{RequestAbortedError:mft}=Aie(),{decodeStream:Upr}=Tv(),{NGHTTP2_CANCEL:bQ}=Opr,qpr=5*60*1e3,Hpr=5e3,Wpr=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Gpr=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),Xs(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),hft=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?Upr(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),jpr=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:c,pushedStreamIdleTimeout:l=Hpr}}}=t,u=i[":path"],f=`${e}${u}`;Xs(`received PUSH_PROMISE: ${f}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(f,i,s(()=>{n.close(bQ)},"rejectPush")),n.on("push",(p,m)=>{Xs(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(l,()=>{Xs(`closing pushed stream #${n.id} after ${l} ms of inactivity`),n.close(bQ)}),c&&c(f,i,hft(p,n,r))}),n.on("aborted",()=>{Xs(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{Xs(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{Xs(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),Vpr=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,c=`${i}${o}${a}`,{options:{h2:l={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:f=qpr,pushPromiseHandler:p,pushHandler:m}=l,h={...r},{method:g,headers:y,socket:E,body:x,decode:b}=h;return E&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let P=u[n];if(!P||P.closed||P.destroyed){let Y=!(t.options.rejectUnauthorized===!1||l.rejectUnauthorized===!1),G={...l,rejectUnauthorized:Y};E&&!E.inUse&&(G.createConnection=()=>(Xs(`reusing socket #${E.id} (${E.servername})`),E.inUse=!0,E)),P=Fpr(n,{...G,settings:{enablePush:!!(p||m)}}),P.setMaxListeners(1e3),P.setTimeout(f,()=>{Xs(`closing session ${n} after ${f} ms of inactivity`),P.close()}),P.once("connect",()=>{Xs(`session ${n} established`),Xs(`caching session ${n}`),u[n]=P}),P.on("localSettings",ce=>{Xs(`session ${n} localSettings: ${JSON.stringify(ce)}`)}),P.on("remoteSettings",ce=>{Xs(`session ${n} remoteSettings: ${JSON.stringify(ce)}`)}),P.once("close",()=>{Xs(`session ${n} closed`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.once("error",ce=>{Xs(`session ${n} encountered error: ${ce}`),u[n]===P&&(Xs(`discarding cached session ${n}`),delete u[n])}),P.on("frameError",(ce,ie,V)=>{Xs(`session ${n} encountered frameError: type: ${ce}, code: ${ie}, id: ${V}`)}),P.once("goaway",(ce,ie,V)=>{Xs(`session ${n} received GOAWAY frame: errorCode: ${ce}, lastStreamID: ${ie}, opaqueData: ${V?V.toString():void 0}`)}),P.on("stream",(ce,ie,V)=>{jpr(t,n,b,ce,ie,V)})}else E&&E.id!==P.socket.id&&!E.inUse&&(Xs(`discarding redundant socket used for ALPN: #${E.id} ${E.servername}`),E.destroy());Xs(`${g} ${e.host}${c}`);let N,{signal:M}=h,J=s(()=>{M.removeEventListener("abort",J),k(new mft),N&&N.close(bQ)},"onAbortSignal");if(M){if(M.aborted){k(new mft);return}M.addEventListener("abort",J)}let pe=s(Y=>{Xs(`session ${n} encountered error during ${h.method} ${e.href}: ${Y}`),k(Y)},"onSessionError");P.once("error",pe),N=P.request({":method":g,":path":c,...y}),N.once("response",Y=>{P.off("error",pe),M&&M.removeEventListener("abort",J),_(hft(Y,N,h.decode,k))}),N.once("error",Y=>{P.off("error",pe),M&&M.removeEventListener("abort",J),N.rstCode!==bQ&&(Xs(`${h.method} ${e.href} failed with: ${Y.message}`),N.close(bQ),k(Y))}),N.once("frameError",(Y,G,H)=>{P.off("error",pe),Xs(`encountered frameError during ${h.method} ${e.href}: type: ${Y}, code: ${G}, id: ${H}`)}),N.on("push",(Y,G)=>{Xs(`received 'push' event: headers: ${JSON.stringify(Y)}, flags: ${G}`)}),x instanceof Qpr?x.pipe(N):(x&&N.write(x),N.end())})},"request");gft.exports={request:Vpr,setupContext:Wpr,resetContext:Gpr}});var Cft=U((ZYi,yft)=>{"use strict";d();var{EventEmitter:$pr}=require("events"),zpr=s(()=>{let t={},e=new $pr;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");yft.exports=zpr});var Eft=U((rKi,Ypr)=>{Ypr.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var Tft=U((nKi,Ift)=>{"use strict";d();var{Readable:Kpr}=require("stream"),Jpr=require("tls"),{types:{isAnyArrayBuffer:Xpr}}=require("util"),Zpr=Swe(),Uwe=fy()("helix-fetch:core"),{RequestAbortedError:yie}=Aie(),qwe=pft(),Cie=Aft(),emr=Cft(),{isPlainObject:tmr}=Tv(),{isFormData:rmr,FormDataSerializer:nmr}=xQ(),{version:imr}=Eft(),Hwe="h2",Wwe="h2c",Gwe="http/1.0",JR="http/1.1",omr=100,smr=60*60*1e3,amr=[Hwe,JR,Gwe],cmr=`helix-fetch/${imr}`,lmr={method:"GET",compress:!0,decode:!0},vft=0,xft=emr(),bft=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new yie;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new yie);return}i.addEventListener("abort",a)}let c=+t.port||443,l=s(u=>{i&&i.removeEventListener("abort",a),u instanceof yie||(Uwe(`connecting to ${t.hostname}:${c} failed with: ${u.message}`),n(u))},"onError");o=Jpr.connect(c,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",l),vft+=1,o.id=vft,o.secureConnecting=!1,Uwe(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",l)}),"connectTLS"),umr=s(async(t,e)=>{let r=await xft.acquire(t.origin);try{return r||(r=await bft(t,e)),r}finally{xft.release(t.origin,r)}},"connect"),dmr=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=JR,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Wwe,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:c={}}}=t,l=!(o===!1||a.rejectUnauthorized===!1||c.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:l};t.options.ca&&(u.ca=t.options.ca);let f=await umr(e,u);return i=f.alpnProtocol,i||(i=JR),t.alpnCache.set(n,i),{protocol:i,socket:f}},"determineProtocol"),fmr=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),pmr=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},c=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=c,u.servername=a.host;let f=await bft(e,u);return{protocol:f.alpnProtocol||JR,socket:f}}return{protocol:c.alpnProtocol||JR,socket:c}},"getProtocolAndSocketFromFactory"),mmr=s(async(t,e,r)=>{let n=new URL(e),i={...lmr,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=fmr(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(rmr(i.body)){let u=new nmr(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":tmr(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Xpr(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Kpr||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:c,socket:l=null}=t.socketFactory?await pmr(t.socketFactory,n,i,t.alpnProtocols):await dmr(t,n,a);switch(Uwe(`${n.host} -> ${c}`),c){case Hwe:try{return await Cie.request(t,n,l?{...i,socket:l}:i)}catch(u){let{code:f,message:p}=u;throw f==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Wwe:return Cie.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),l?{...i,socket:l}:i);case Gwe:case JR:return qwe.request(t,n,l?{...i,socket:l}:i);default:throw new TypeError(`unsupported protocol: ${c}`)}},"request"),hmr=s(async t=>(t.alpnCache.clear(),Promise.all([qwe.resetContext(t),Cie.resetContext(t)])),"resetContext"),gmr=s(t=>{let{options:{alpnProtocols:e=amr,alpnCacheTTL:r=smr,alpnCacheSize:n=omr,userAgent:i=cmr,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new Zpr({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,qwe.setupContext(t),Cie.setupContext(t)},"setupContext");Ift.exports={request:mmr,setupContext:gmr,resetContext:hmr,RequestAbortedError:yie,ALPN_HTTP2:Hwe,ALPN_HTTP2C:Wwe,ALPN_HTTP1_1:JR,ALPN_HTTP1_0:Gwe}});var _ft=U((sKi,wft)=>{"use strict";d();var Amr=fy()("helix-fetch:core"),{request:ymr,setupContext:Cmr,resetContext:Emr,RequestAbortedError:vmr,ALPN_HTTP2:xmr,ALPN_HTTP2C:bmr,ALPN_HTTP1_1:Imr,ALPN_HTTP1_0:Tmr}=Tft(),jwe=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},Cmr(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:vmr,ALPN_HTTP2:xmr,ALPN_HTTP2C:bmr,ALPN_HTTP1_1:Imr,ALPN_HTTP1_0:Tmr}}async request(e,r){return ymr(this,e,r)}setCA(e){this.options.ca=e}async reset(){return Amr("resetting context"),Emr(this)}};wft.exports=new jwe().api()});var Bft=U((lKi,Pft)=>{"use strict";d();var{EventEmitter:wmr}=require("events"),{Readable:IQ}=require("stream"),Vwe=fy()("helix-fetch"),_mr=Swe(),{Body:Smr}=uie(),{Headers:Kwe}=CN(),{Request:XR}=Jdt(),{Response:zwe}=Lwe(),{FetchBaseError:Rmr,FetchError:TQ,AbortError:Eie}=Pwe(),{AbortController:kmr,AbortSignal:Pmr,TimeoutSignal:Bmr}=Bwe(),Dmr=ift(),{cacheableResponse:Nmr}=aft(),{sizeof:Lmr}=Tv(),{isFormData:Mmr}=xQ(),{context:Fmr,RequestAbortedError:Omr}=_ft(),Sft=["GET","HEAD"],Qmr=500,Umr=100*1024*1024,$we="push",Rft=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof XR&&typeof r>"u"?e:new XR(e,r),{method:o,body:a,signal:c,compress:l,decode:u,follow:f,redirect:p,init:{body:m}}=i,h;if(c&&c.aborted){let P=new Eie("The operation was aborted.");throw i.init.body instanceof IQ&&i.init.body.destroy(P),P}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof IQ)&&!Mmr(m)?m:a,compress:l,decode:u,follow:f,redirect:p,signal:c})}catch(P){throw m instanceof IQ&&m.destroy(P),P instanceof TypeError?P:P instanceof Omr?new Eie("The operation was aborted."):new TQ(P.message,"system",P)}let g=s(()=>{c.removeEventListener("abort",g);let P=new Eie("The operation was aborted.");i.init.body instanceof IQ&&i.init.body.destroy(P),h.readable.emit("error",P)},"abortHandler");c&&c.addEventListener("abort",g);let{statusCode:y,statusText:E,httpVersion:x,headers:b,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:P}=b,N=P==null?null:new URL(P,i.url);switch(i.redirect){case"manual":break;case"error":throw c&&c.removeEventListener("abort",g),new TQ(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw c&&c.removeEventListener("abort",g),new TQ(`maximum redirect reached at: ${i.url}`,"max-redirect");let M={headers:new Kwe(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof IQ)throw c&&c.removeEventListener("abort",g),new TQ("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(M.method="GET",M.body=void 0,M.headers.delete("content-length")),c&&c.removeEventListener("abort",g),Rft(t,new XR(N,M))}default:}}return c&&(_.once("end",()=>{c.removeEventListener("abort",g)}),_.once("error",()=>{c.removeEventListener("abort",g)})),new zwe(_,{url:i.url,status:y,statusText:E,headers:b,httpVersion:x,decoded:k,counter:i.counter})},"fetch"),kft=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!Sft.includes(e.method))return r;let n=new Dmr(e,r,{shared:!1});if(n.storable()){let i=await Nmr(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),qmr=s(async(t,e,r)=>{let n=new XR(e,r);if(t.options.maxCacheSize!==0&&Sft.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:c}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){c.headers=new Kwe(a.responseHeaders(c));let l=c.clone();return l.fromCache=!0,l}}let o=await Rft(t,n);return n.cache!=="no-store"?kft(t,n,o):o},"cachingFetch"),Hmr=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),Wmr=s(t=>new Bmr(t),"timeoutSignal"),Ywe=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:Umr,i=Qmr;n===0&&(n=1,i=1);let o=s(({response:c},l)=>Lmr(c),"sizeCalculation");this.cache=new _mr({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new wmr,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(p=>p.startsWith(":")).forEach(p=>delete f[p]),this.pushPromiseHandler(c,f,u)},this.options.h2.pushHandler=(c,l,u)=>{let f={...l};Object.keys(f).filter(x=>x.startsWith(":")).forEach(x=>delete f[x]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:E}=u;this.pushHandler(c,f,new zwe(y,{url:c,status:p,statusText:m,headers:g,httpVersion:h,decoded:E}))}),this.context=Fmr(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:Smr,Headers:Kwe,Request:XR,Response:zwe,AbortController:kmr,AbortSignal:Pmr,FetchBaseError:Rmr,FetchError:TQ,AbortError:Eie,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:Hmr,timeoutSignal:Wmr,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return qmr(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on($we,e)}offPush(e){return this.eventEmitter.off($we,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){Vwe(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new XR(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Vwe(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){Vwe(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await kft(this,new XR(e,{headers:r}),n);this.eventEmitter.emit($we,e,i)}};Pft.exports=new Ywe().api()});var Nft=U((fKi,Dft)=>{"use strict";d();Dft.exports=Bft()});var Tpt=U((fuo,Ipt)=>{d();Ipt.exports=bpt;bpt.sync=XAr;var vpt=require("fs");function JAr(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(JAr,"checkPathExt");function xpt(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:JAr(e,r)}s(xpt,"checkStat");function bpt(t,e,r){vpt.stat(t,function(n,i){r(n,n?!1:xpt(i,t,e))})}s(bpt,"isexe");function XAr(t,e){return xpt(vpt.statSync(t),t,e)}s(XAr,"sync")});var kpt=U((huo,Rpt)=>{d();Rpt.exports=_pt;_pt.sync=ZAr;var wpt=require("fs");function _pt(t,e,r){wpt.stat(t,function(n,i){r(n,n?!1:Spt(i,e))})}s(_pt,"isexe");function ZAr(t,e){return Spt(wpt.statSync(t),e)}s(ZAr,"sync");function Spt(t,e){return t.isFile()&&eyr(t,e)}s(Spt,"checkStat");function eyr(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),c=parseInt("100",8),l=parseInt("010",8),u=parseInt("001",8),f=c|l,p=r&u||r&l&&i===a||r&c&&n===o||r&f&&o===0;return p}s(eyr,"checkMode")});var Bpt=U((Cuo,Ppt)=>{d();var yuo=require("fs"),woe;process.platform==="win32"||global.TESTING_WINDOWS?woe=Tpt():woe=kpt();Ppt.exports=$_e;$_e.sync=tyr;function $_e(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){$_e(t,e||{},function(o,a){o?i(o):n(a)})})}woe(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s($_e,"isexe");function tyr(t,e){try{return woe.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(tyr,"sync")});var Qpt=U((xuo,Opt)=>{d();var QN=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Dpt=require("path"),ryr=QN?";":":",Npt=Bpt(),Lpt=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),Mpt=s((t,e)=>{let r=e.colon||ryr,n=t.match(/\//)||QN&&t.match(/\\/)?[""]:[...QN?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=QN?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=QN?i.split(r):[""];return QN&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),Fpt=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=Mpt(t,e),a=[],c=s(u=>new Promise((f,p)=>{if(u===n.length)return e.all&&a.length?f(a):p(Lpt(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=Dpt.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;f(l(y,u,0))}),"step"),l=s((u,f,p)=>new Promise((m,h)=>{if(p===i.length)return m(c(f+1));let g=i[p];Npt(u+g,{pathExt:o},(y,E)=>{if(!y&&E)if(e.all)a.push(u+g);else return m(u+g);return m(l(u,f,p+1))})}),"subStep");return r?c(0).then(u=>r(null,u),r):c(0)},"which"),nyr=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=Mpt(t,e),o=[];for(let a=0;a<r.length;a++){let c=r[a],l=/^".*"$/.test(c)?c.slice(1,-1):c,u=Dpt.join(l,t),f=!l&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=f+n[p];try{if(Npt.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw Lpt(t)},"whichSync");Opt.exports=Fpt;Fpt.sync=nyr});var qpt=U((Tuo,z_e)=>{"use strict";d();var Upt=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");z_e.exports=Upt;z_e.exports.default=Upt});var jpt=U((Suo,Gpt)=>{"use strict";d();var Hpt=require("path"),iyr=Qpt(),oyr=qpt();function Wpt(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=iyr.sync(t.command,{path:r[oyr({env:r})],pathExt:e?Hpt.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=Hpt.resolve(i?t.options.cwd:"",a)),a}s(Wpt,"resolveCommandAttempt");function syr(t){return Wpt(t)||Wpt(t,!0)}s(syr,"resolveCommand");Gpt.exports=syr});var Vpt=U((Puo,K_e)=>{"use strict";d();var Y_e=/([()\][%!^"`<>&|;, *?])/g;function ayr(t){return t=t.replace(Y_e,"^$1"),t}s(ayr,"escapeCommand");function cyr(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Y_e,"^$1"),e&&(t=t.replace(Y_e,"^$1")),t}s(cyr,"escapeArgument");K_e.exports.command=ayr;K_e.exports.argument=cyr});var zpt=U((Nuo,$pt)=>{"use strict";d();$pt.exports=/^#!(.*)/});var Kpt=U((Muo,Ypt)=>{"use strict";d();var lyr=zpt();Ypt.exports=(t="")=>{let e=t.match(lyr);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var Xpt=U((Ouo,Jpt)=>{"use strict";d();var J_e=require("fs"),uyr=Kpt();function dyr(t){let r=Buffer.alloc(150),n;try{n=J_e.openSync(t,"r"),J_e.readSync(n,r,0,150,0),J_e.closeSync(n)}catch{}return uyr(r.toString())}s(dyr,"readShebang");Jpt.exports=dyr});var rmt=U((quo,tmt)=>{"use strict";d();var fyr=require("path"),Zpt=jpt(),emt=Vpt(),pyr=Xpt(),myr=process.platform==="win32",hyr=/\.(?:com|exe)$/i,gyr=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ayr(t){t.file=Zpt(t);let e=t.file&&pyr(t.file);return e?(t.args.unshift(t.file),t.command=e,Zpt(t)):t.file}s(Ayr,"detectShebang");function yyr(t){if(!myr)return t;let e=Ayr(t),r=!hyr.test(e);if(t.options.forceShell||r){let n=gyr.test(e);t.command=fyr.normalize(t.command),t.command=emt.command(t.command),t.args=t.args.map(o=>emt.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(yyr,"parseNonShell");function Cyr(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:yyr(n)}s(Cyr,"parse");tmt.exports=Cyr});var omt=U((Guo,imt)=>{"use strict";d();var X_e=process.platform==="win32";function Z_e(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(Z_e,"notFoundError");function Eyr(t,e){if(!X_e)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=nmt(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(Eyr,"hookChildProcess");function nmt(t,e){return X_e&&t===1&&!e.file?Z_e(e.original,"spawn"):null}s(nmt,"verifyENOENT");function vyr(t,e){return X_e&&t===1&&!e.file?Z_e(e.original,"spawnSync"):null}s(vyr,"verifyENOENTSync");imt.exports={hookChildProcess:Eyr,verifyENOENT:nmt,verifyENOENTSync:vyr,notFoundError:Z_e}});var cmt=U(($uo,UN)=>{"use strict";d();var smt=require("child_process"),eSe=rmt(),tSe=omt();function amt(t,e,r){let n=eSe(t,e,r),i=smt.spawn(n.command,n.args,n.options);return tSe.hookChildProcess(i,n),i}s(amt,"spawn");function xyr(t,e,r){let n=eSe(t,e,r),i=smt.spawnSync(n.command,n.args,n.options);return i.error=i.error||tSe.verifyENOENTSync(i.status,n),i}s(xyr,"spawnSync");UN.exports=amt;UN.exports.spawn=amt;UN.exports.sync=xyr;UN.exports._parse=eSe;UN.exports._enoent=tSe});var Fyr={};ra(Fyr,{getTokenizer:()=>ho,getTokenizerAsync:()=>g7e,main:()=>wmt});module.exports=Kht(Fyr);d();d();W2e().install();d();d();var g6="github.copilot",G2e="github-enterprise";d();d();d();d();d();d();var Bs=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};d();d();var Up=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return Lq(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};d();var qp="X-Copilot-RelatedPluginVersion-",A6=(Q=>(Q.Market="X-MSEdge-Market",Q.CorpNet="X-FD-Corpnet",Q.Build="X-VSCode-Build",Q.ApplicationVersion="X-VSCode-AppVersion",Q.TargetPopulation="X-VSCode-TargetPopulation",Q.ClientId="X-MSEdge-ClientId",Q.ExtensionName="X-VSCode-ExtensionName",Q.ExtensionVersion="X-VSCode-ExtensionVersion",Q.ExtensionRelease="X-VSCode-ExtensionRelease",Q.Language="X-VSCode-Language",Q.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",Q.CopilotEngine="X-Copilot-Engine",Q.CopilotOverrideEngine="X-Copilot-OverrideEngine",Q.CopilotRepository="X-Copilot-Repository",Q.CopilotFileType="X-Copilot-FileType",Q.CopilotUserKind="X-Copilot-UserKind",Q.CopilotDogfood="X-Copilot-Dogfood",Q.CopilotCustomModel="X-Copilot-CustomModel",Q.CopilotOrgs="X-Copilot-Orgs",Q.CopilotCustomModelNames="X-Copilot-CustomModelNames",Q.CopilotTrackingId="X-Copilot-CopilotTrackingId",Q.CopilotClientVersion="X-Copilot-ClientVersion",Q.CopilotRelatedPluginVersionCppTools=qp+"msvscodecpptools",Q.CopilotRelatedPluginVersionCMakeTools=qp+"msvscodecmaketools",Q.CopilotRelatedPluginVersionMakefileTools=qp+"msvscodemakefiletools",Q.CopilotRelatedPluginVersionCSharpDevKit=qp+"msdotnettoolscsdevkit",Q.CopilotRelatedPluginVersionPython=qp+"mspythonpython",Q.CopilotRelatedPluginVersionPylance=qp+"mspythonvscodepylance",Q.CopilotRelatedPluginVersionJavaPack=qp+"vscjavavscodejavapack",Q.CopilotRelatedPluginVersionTypescript=qp+"vscodetypescriptlanguagefeatures",Q.CopilotRelatedPluginVersionTypescriptNext=qp+"msvscodevscodetypescriptnext",Q.CopilotRelatedPluginVersionCSharp=qp+"msdotnettoolscsharp",Q))(A6||{});var Lgt={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},m_=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=Lgt[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};d();var jn=class{static{s(this,"Fetcher")}getImplementation(){return this}},y6=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Nu(t){return!t||typeof t!="object"?!1:t instanceof y6||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Nu,"isAbortError");var Wk=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},VA=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},Mgt=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function C6(t,e=!0){return t instanceof Error?e&&"cause"in t&&C6(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof Wk||t instanceof VA||t?.message?.startsWith("net::")||Mgt.has(t.code??""):!1}s(C6,"isNetworkError");var Zx=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new Wk(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new Wk(`Response body truncated: actualLength=${o}`,"Truncated"):new Wk(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function h_(t,e,r,n,i,o,a,c,l){let u={...c,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(As).sessionId,"VScode-MachineId":t.get(As).machineId,...A0(t),"X-GitHub-Api-Version":$A};n&&(u["OpenAI-Intent"]=n);let f={method:"POST",headers:u,json:o,timeout:l},p=t.get(jn);if(a){let h=new AbortController;a.onCancellationRequested(()=>{Rt(t,"networking.cancelRequest",Dr.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),f.signal=h.signal}return p.fetch(e,f).catch(h=>{if(Fgt(h))return Rt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,f));throw h})}s(h_,"postRequest");function Fgt(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(Fgt,"isInterruptedNetworkError");d();d();var Jl=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,c=r.enterprise_list,l=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=c?.toString(),this.sku=l,this.optedIn=n,this.ftFlag=i)})}};var EH=Ne(rb()),vH=Ne(require("os"));var Ogt=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function Qgt(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(Ogt),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(Qgt,"buildExceptionDetail");function Zae(t,e){let r=t.get(nn),n=r.getEditorInfo(),i=t.get(Jl),o={"#editor":n.devName??n.name,"#editor_version":zA({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":zA(r.getEditorPluginInfo()),"#session_id":t.get(As).sessionId,"#machine_id":t.get(As).machineId,"#architecture":vH.arch(),"#os_platform":vH.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(Zae,"buildContext");function ZRe(t,e){let r=t.get(lo),n=t.get(nn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:Zae(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let c=0,l=e;for(;l instanceof Error&&c<10;){let f=Qgt(l);o.exception_detail.unshift(f),a.unshift([l,f]),c+=1,l=l.cause}let u=[];for(let[f,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${f.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,EH.SHA256)(EH.enc.Utf16.parse(u.join(`
`))).toString()),o}s(ZRe,"buildPayload");d();var v6=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};d();d();var t5e=Ne(rb());var Or=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},g_=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}},bH=class extends Or{static{s(this,"LRUDisposableCacheMap")}delete(e){let r=this.peek(e);return r&&r.dispose(),super.delete(e)}clear(){for(let e of this.values())e.dispose();super.clear()}uncache(e){let r=this.peek(e);return super.delete(e),r}};var YA=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Or}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};d();var Hp=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:n5e(r,n),verboseLogging:qgt(r,n),testMode:e,simulation:Ugt(n)})}};function Lh(t){return t.get(Hp).flags.testMode}s(Lh,"isRunningInTest");function Gk(t){return Lh(t)}s(Gk,"shouldFailForDebugPurposes");function x6(t){return t.get(Hp).flags.debug}s(x6,"isDebugEnabled");function r5e(t){return t.get(Hp).flags.verboseLogging}s(r5e,"isVerboseLoggingEnabled");function n5e(t,e){return t.includes("--debug")||ece(e,"DEBUG")}s(n5e,"determineDebugFlag");function Ugt(t){return ece(t,"SIMULATION")}s(Ugt,"determineSimulationFlag");function IH(t){return t.get(Hp).flags.simulation}s(IH,"isRunningInSimulation");function qgt(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||ece(e,"VERBOSE")||n5e(t,e)}s(qgt,"determineVerboseLoggingEnabled");function ece(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(ece,"determineEnvFlagEnabled");d();var Xa=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};d();var s5e=require("os"),a5e=Ne(require("path"));function b6(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(b6,"redactPaths");var Hgt=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),Wgt=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function rce(t){if(Hgt.has(t))return t;for(let e of Wgt)if(e.test(t))return t;return b6(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(rce,"redactMessage");function TH(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(TH,"escapeForRegExp");var Ggt=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+TH((0,s5e.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function tce(t){return t.replace(Ggt,"~")}s(tce,"redactHomeDir");var c5e="[\\\\/]?([^:)]*)(?=:\\d)",i5e=new RegExp(TH(a5e.sep),"g"),o5e=new RegExp(TH(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+c5e,"gi");function nce(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let c of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(c+`
`)){a=o.slice(c.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let c of a)if(o5e.test(c))i.stack+=`
${b6(c.replace(o5e,(l,u)=>"./"+u.replace(i5e,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(c))i.stack+=`
${b6(c)}`;else{let l=!1;for(let{prefix:u,path:f}of n){let p=new RegExp(TH(f.replace(/[\\/]$/,""))+c5e,"gi");if(p.test(c)){i.stack+=`
${b6(c.replace(p,(m,h)=>u+h.replace(i5e,"/")))}`,l=!0;break}}if(l)continue;r?i.stack+=`
${tce(c)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=tce(o));return t.cause instanceof Error&&(i.cause=nce(t.cause,e,r,n)),i}s(nce,"cloneError");function l5e(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(l5e,"errorMessageWithoutPath");function u5e(t,e){return nce(t,s(function(n){return tce(l5e(n))},"prepareMessage"),!0,e)}s(u5e,"prepareErrorForRestrictedTelemetry");function d5e(t,e,r=!1){return nce(t,s(function(i){if(r)return rce(l5e(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=b6(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(d5e,"redactError");d();d();var Lu={};ra(Lu,{HasPropertyKey:()=>wH,IsArray:()=>Za,IsAsyncIterator:()=>ice,IsBigInt:()=>I6,IsBoolean:()=>T1,IsDate:()=>A_,IsFunction:()=>oce,IsIterator:()=>sce,IsNull:()=>ace,IsNumber:()=>y0,IsObject:()=>Go,IsRegExp:()=>T6,IsString:()=>as,IsSymbol:()=>cce,IsUint8Array:()=>w1,IsUndefined:()=>ec});d();function wH(t,e){return e in t}s(wH,"HasPropertyKey");function ice(t){return Go(t)&&!Za(t)&&!w1(t)&&Symbol.asyncIterator in t}s(ice,"IsAsyncIterator");function Za(t){return Array.isArray(t)}s(Za,"IsArray");function I6(t){return typeof t=="bigint"}s(I6,"IsBigInt");function T1(t){return typeof t=="boolean"}s(T1,"IsBoolean");function A_(t){return t instanceof globalThis.Date}s(A_,"IsDate");function oce(t){return typeof t=="function"}s(oce,"IsFunction");function sce(t){return Go(t)&&!Za(t)&&!w1(t)&&Symbol.iterator in t}s(sce,"IsIterator");function ace(t){return t===null}s(ace,"IsNull");function y0(t){return typeof t=="number"}s(y0,"IsNumber");function Go(t){return typeof t=="object"&&t!==null}s(Go,"IsObject");function T6(t){return t instanceof globalThis.RegExp}s(T6,"IsRegExp");function as(t){return typeof t=="string"}s(as,"IsString");function cce(t){return typeof t=="symbol"}s(cce,"IsSymbol");function w1(t){return t instanceof globalThis.Uint8Array}s(w1,"IsUint8Array");function ec(t){return t===void 0}s(ec,"IsUndefined");function jgt(t){return t.map(e=>_H(e))}s(jgt,"ArrayType");function Vgt(t){return new Date(t.getTime())}s(Vgt,"DateType");function $gt(t){return new Uint8Array(t)}s($gt,"Uint8ArrayType");function zgt(t){return new RegExp(t.source,t.flags)}s(zgt,"RegExpType");function Ygt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=_H(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=_H(t[r]);return e}s(Ygt,"ObjectType");function _H(t){return Za(t)?jgt(t):A_(t)?Vgt(t):w1(t)?$gt(t):T6(t)?zgt(t):Go(t)?Ygt(t):t}s(_H,"Visit");function Ds(t){return _H(t)}s(Ds,"Clone");function jk(t,e){return e===void 0?Ds(t):Ds({...e,...t})}s(jk,"CloneType");d();d();d();function SH(t){return Ei(t)&&globalThis.Symbol.asyncIterator in t}s(SH,"IsAsyncIterator");function RH(t){return Ei(t)&&globalThis.Symbol.iterator in t}s(RH,"IsIterator");function lce(t){return Ei(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(lce,"IsStandardObject");function kH(t){return t instanceof globalThis.Promise}s(kH,"IsPromise");function Cd(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(Cd,"IsDate");function f5e(t){return t instanceof globalThis.Map}s(f5e,"IsMap");function p5e(t){return t instanceof globalThis.Set}s(p5e,"IsSet");function Wp(t){return globalThis.ArrayBuffer.isView(t)}s(Wp,"IsTypedArray");function Vk(t){return t instanceof globalThis.Uint8Array}s(Vk,"IsUint8Array");function vn(t,e){return e in t}s(vn,"HasPropertyKey");function Ei(t){return t!==null&&typeof t=="object"}s(Ei,"IsObject");function xn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(xn,"IsArray");function Ns(t){return t===void 0}s(Ns,"IsUndefined");function _1(t){return t===null}s(_1,"IsNull");function KA(t){return typeof t=="boolean"}s(KA,"IsBoolean");function Vr(t){return typeof t=="number"}s(Vr,"IsNumber");function PH(t){return globalThis.Number.isInteger(t)}s(PH,"IsInteger");function Xl(t){return typeof t=="bigint"}s(Xl,"IsBigInt");function ro(t){return typeof t=="string"}s(ro,"IsString");function nb(t){return typeof t=="function"}s(nb,"IsFunction");function S1(t){return typeof t=="symbol"}s(S1,"IsSymbol");function C0(t){return Xl(t)||KA(t)||_1(t)||Vr(t)||ro(t)||S1(t)||Ns(t)}s(C0,"IsValueType");var ys;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let c=Ei(a);return t.AllowArrayObject?c:c&&!xn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Vr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let c=Ns(a);return t.AllowNullVoid?c||a===null:c}s(o,"IsVoidLike"),t.IsVoidLike=o})(ys||(ys={}));d();function Kgt(t){return globalThis.Object.freeze(t).map(e=>w6(e))}s(Kgt,"ImmutableArray");function Jgt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=w6(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=w6(t[r]);return globalThis.Object.freeze(e)}s(Jgt,"ImmutableObject");function w6(t){return Za(t)?Kgt(t):A_(t)?t:w1(t)?t:T6(t)?t:Go(t)?Jgt(t):t}s(w6,"Immutable");function it(t,e){let r=e!==void 0?{...e,...t}:t;switch(ys.InstanceMode){case"freeze":return w6(r);case"clone":return Ds(r);default:return r}}s(it,"CreateType");d();var bn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};d();d();d();var oa=Symbol.for("TypeBox.Transform"),Mh=Symbol.for("TypeBox.Readonly"),Zl=Symbol.for("TypeBox.Optional"),Gp=Symbol.for("TypeBox.Hint"),et=Symbol.for("TypeBox.Kind");function $k(t){return Go(t)&&t[Mh]==="Readonly"}s($k,"IsReadonly");function uf(t){return Go(t)&&t[Zl]==="Optional"}s(uf,"IsOptional");function uce(t){return $i(t,"Any")}s(uce,"IsAny");function dce(t){return $i(t,"Argument")}s(dce,"IsArgument");function Fh(t){return $i(t,"Array")}s(Fh,"IsArray");function y_(t){return $i(t,"AsyncIterator")}s(y_,"IsAsyncIterator");function C_(t){return $i(t,"BigInt")}s(C_,"IsBigInt");function R1(t){return $i(t,"Boolean")}s(R1,"IsBoolean");function Oh(t){return $i(t,"Computed")}s(Oh,"IsComputed");function Qh(t){return $i(t,"Constructor")}s(Qh,"IsConstructor");function Xgt(t){return $i(t,"Date")}s(Xgt,"IsDate");function Uh(t){return $i(t,"Function")}s(Uh,"IsFunction");function qh(t){return $i(t,"Integer")}s(qh,"IsInteger");function va(t){return $i(t,"Intersect")}s(va,"IsIntersect");function E_(t){return $i(t,"Iterator")}s(E_,"IsIterator");function $i(t,e){return Go(t)&&et in t&&t[et]===e}s($i,"IsKindOf");function BH(t){return T1(t)||y0(t)||as(t)}s(BH,"IsLiteralValue");function E0(t){return $i(t,"Literal")}s(E0,"IsLiteral");function v0(t){return $i(t,"MappedKey")}s(v0,"IsMappedKey");function Ls(t){return $i(t,"MappedResult")}s(Ls,"IsMappedResult");function ib(t){return $i(t,"Never")}s(ib,"IsNever");function Zgt(t){return $i(t,"Not")}s(Zgt,"IsNot");function _6(t){return $i(t,"Null")}s(_6,"IsNull");function Hh(t){return $i(t,"Number")}s(Hh,"IsNumber");function tc(t){return $i(t,"Object")}s(tc,"IsObject");function v_(t){return $i(t,"Promise")}s(v_,"IsPromise");function x_(t){return $i(t,"Record")}s(x_,"IsRecord");function Da(t){return $i(t,"Ref")}s(Da,"IsRef");function fce(t){return $i(t,"RegExp")}s(fce,"IsRegExp");function k1(t){return $i(t,"String")}s(k1,"IsString");function S6(t){return $i(t,"Symbol")}s(S6,"IsSymbol");function x0(t){return $i(t,"TemplateLiteral")}s(x0,"IsTemplateLiteral");function eAt(t){return $i(t,"This")}s(eAt,"IsThis");function To(t){return Go(t)&&oa in t}s(To,"IsTransform");function b0(t){return $i(t,"Tuple")}s(b0,"IsTuple");function P1(t){return $i(t,"Undefined")}s(P1,"IsUndefined");function no(t){return $i(t,"Union")}s(no,"IsUnion");function tAt(t){return $i(t,"Uint8Array")}s(tAt,"IsUint8Array");function rAt(t){return $i(t,"Unknown")}s(rAt,"IsUnknown");function nAt(t){return $i(t,"Unsafe")}s(nAt,"IsUnsafe");function iAt(t){return $i(t,"Void")}s(iAt,"IsVoid");function ob(t){return Go(t)&&et in t&&as(t[et])}s(ob,"IsKind");function sa(t){return uce(t)||dce(t)||Fh(t)||R1(t)||C_(t)||y_(t)||Oh(t)||Qh(t)||Xgt(t)||Uh(t)||qh(t)||va(t)||E_(t)||E0(t)||v0(t)||Ls(t)||ib(t)||Zgt(t)||_6(t)||Hh(t)||tc(t)||v_(t)||x_(t)||Da(t)||fce(t)||k1(t)||S6(t)||x0(t)||eAt(t)||b0(t)||P1(t)||no(t)||tAt(t)||rAt(t)||nAt(t)||iAt(t)||ob(t)}s(sa,"IsSchema");var Be={};ra(Be,{IsAny:()=>A5e,IsArgument:()=>y5e,IsArray:()=>C5e,IsAsyncIterator:()=>E5e,IsBigInt:()=>v5e,IsBoolean:()=>x5e,IsComputed:()=>b5e,IsConstructor:()=>I5e,IsDate:()=>T5e,IsFunction:()=>w5e,IsImport:()=>uAt,IsInteger:()=>_5e,IsIntersect:()=>S5e,IsIterator:()=>R5e,IsKind:()=>tke,IsKindOf:()=>ki,IsLiteral:()=>k6,IsLiteralBoolean:()=>dAt,IsLiteralNumber:()=>P5e,IsLiteralString:()=>k5e,IsLiteralValue:()=>B5e,IsMappedKey:()=>D5e,IsMappedResult:()=>N5e,IsNever:()=>L5e,IsNot:()=>M5e,IsNull:()=>F5e,IsNumber:()=>O5e,IsObject:()=>Q5e,IsOptional:()=>lAt,IsPromise:()=>U5e,IsProperties:()=>DH,IsReadonly:()=>cAt,IsRecord:()=>q5e,IsRecursive:()=>fAt,IsRef:()=>H5e,IsRegExp:()=>W5e,IsSchema:()=>Ms,IsString:()=>G5e,IsSymbol:()=>j5e,IsTemplateLiteral:()=>V5e,IsThis:()=>$5e,IsTransform:()=>z5e,IsTuple:()=>Y5e,IsUint8Array:()=>J5e,IsUndefined:()=>K5e,IsUnion:()=>gce,IsUnionLiteral:()=>pAt,IsUnknown:()=>X5e,IsUnsafe:()=>Z5e,IsVoid:()=>eke,TypeGuardUnknownTypeError:()=>pce});d();var pce=class extends bn{static{s(this,"TypeGuardUnknownTypeError")}},oAt=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function m5e(t){try{return new RegExp(t),!0}catch{return!1}}s(m5e,"IsPattern");function mce(t){if(!as(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(mce,"IsControlCharacterFree");function h5e(t){return hce(t)||Ms(t)}s(h5e,"IsAdditionalProperties");function R6(t){return ec(t)||I6(t)}s(R6,"IsOptionalBigInt");function cs(t){return ec(t)||y0(t)}s(cs,"IsOptionalNumber");function hce(t){return ec(t)||T1(t)}s(hce,"IsOptionalBoolean");function jo(t){return ec(t)||as(t)}s(jo,"IsOptionalString");function sAt(t){return ec(t)||as(t)&&mce(t)&&m5e(t)}s(sAt,"IsOptionalPattern");function aAt(t){return ec(t)||as(t)&&mce(t)}s(aAt,"IsOptionalFormat");function g5e(t){return ec(t)||Ms(t)}s(g5e,"IsOptionalSchema");function cAt(t){return Go(t)&&t[Mh]==="Readonly"}s(cAt,"IsReadonly");function lAt(t){return Go(t)&&t[Zl]==="Optional"}s(lAt,"IsOptional");function A5e(t){return ki(t,"Any")&&jo(t.$id)}s(A5e,"IsAny");function y5e(t){return ki(t,"Argument")&&y0(t.index)}s(y5e,"IsArgument");function C5e(t){return ki(t,"Array")&&t.type==="array"&&jo(t.$id)&&Ms(t.items)&&cs(t.minItems)&&cs(t.maxItems)&&hce(t.uniqueItems)&&g5e(t.contains)&&cs(t.minContains)&&cs(t.maxContains)}s(C5e,"IsArray");function E5e(t){return ki(t,"AsyncIterator")&&t.type==="AsyncIterator"&&jo(t.$id)&&Ms(t.items)}s(E5e,"IsAsyncIterator");function v5e(t){return ki(t,"BigInt")&&t.type==="bigint"&&jo(t.$id)&&R6(t.exclusiveMaximum)&&R6(t.exclusiveMinimum)&&R6(t.maximum)&&R6(t.minimum)&&R6(t.multipleOf)}s(v5e,"IsBigInt");function x5e(t){return ki(t,"Boolean")&&t.type==="boolean"&&jo(t.$id)}s(x5e,"IsBoolean");function b5e(t){return ki(t,"Computed")&&as(t.target)&&Za(t.parameters)&&t.parameters.every(e=>Ms(e))}s(b5e,"IsComputed");function I5e(t){return ki(t,"Constructor")&&t.type==="Constructor"&&jo(t.$id)&&Za(t.parameters)&&t.parameters.every(e=>Ms(e))&&Ms(t.returns)}s(I5e,"IsConstructor");function T5e(t){return ki(t,"Date")&&t.type==="Date"&&jo(t.$id)&&cs(t.exclusiveMaximumTimestamp)&&cs(t.exclusiveMinimumTimestamp)&&cs(t.maximumTimestamp)&&cs(t.minimumTimestamp)&&cs(t.multipleOfTimestamp)}s(T5e,"IsDate");function w5e(t){return ki(t,"Function")&&t.type==="Function"&&jo(t.$id)&&Za(t.parameters)&&t.parameters.every(e=>Ms(e))&&Ms(t.returns)}s(w5e,"IsFunction");function uAt(t){return ki(t,"Import")&&wH(t,"$defs")&&Go(t.$defs)&&DH(t.$defs)&&wH(t,"$ref")&&as(t.$ref)&&t.$ref in t.$defs}s(uAt,"IsImport");function _5e(t){return ki(t,"Integer")&&t.type==="integer"&&jo(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(_5e,"IsInteger");function DH(t){return Go(t)&&Object.entries(t).every(([e,r])=>mce(e)&&Ms(r))}s(DH,"IsProperties");function S5e(t){return ki(t,"Intersect")&&!(as(t.type)&&t.type!=="object")&&Za(t.allOf)&&t.allOf.every(e=>Ms(e)&&!z5e(e))&&jo(t.type)&&(hce(t.unevaluatedProperties)||g5e(t.unevaluatedProperties))&&jo(t.$id)}s(S5e,"IsIntersect");function R5e(t){return ki(t,"Iterator")&&t.type==="Iterator"&&jo(t.$id)&&Ms(t.items)}s(R5e,"IsIterator");function ki(t,e){return Go(t)&&et in t&&t[et]===e}s(ki,"IsKindOf");function k5e(t){return k6(t)&&as(t.const)}s(k5e,"IsLiteralString");function P5e(t){return k6(t)&&y0(t.const)}s(P5e,"IsLiteralNumber");function dAt(t){return k6(t)&&T1(t.const)}s(dAt,"IsLiteralBoolean");function k6(t){return ki(t,"Literal")&&jo(t.$id)&&B5e(t.const)}s(k6,"IsLiteral");function B5e(t){return T1(t)||y0(t)||as(t)}s(B5e,"IsLiteralValue");function D5e(t){return ki(t,"MappedKey")&&Za(t.keys)&&t.keys.every(e=>y0(e)||as(e))}s(D5e,"IsMappedKey");function N5e(t){return ki(t,"MappedResult")&&DH(t.properties)}s(N5e,"IsMappedResult");function L5e(t){return ki(t,"Never")&&Go(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(L5e,"IsNever");function M5e(t){return ki(t,"Not")&&Ms(t.not)}s(M5e,"IsNot");function F5e(t){return ki(t,"Null")&&t.type==="null"&&jo(t.$id)}s(F5e,"IsNull");function O5e(t){return ki(t,"Number")&&t.type==="number"&&jo(t.$id)&&cs(t.exclusiveMaximum)&&cs(t.exclusiveMinimum)&&cs(t.maximum)&&cs(t.minimum)&&cs(t.multipleOf)}s(O5e,"IsNumber");function Q5e(t){return ki(t,"Object")&&t.type==="object"&&jo(t.$id)&&DH(t.properties)&&h5e(t.additionalProperties)&&cs(t.minProperties)&&cs(t.maxProperties)}s(Q5e,"IsObject");function U5e(t){return ki(t,"Promise")&&t.type==="Promise"&&jo(t.$id)&&Ms(t.item)}s(U5e,"IsPromise");function q5e(t){return ki(t,"Record")&&t.type==="object"&&jo(t.$id)&&h5e(t.additionalProperties)&&Go(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&m5e(r[0])&&Go(e.patternProperties)&&Ms(e.patternProperties[r[0]])})(t)}s(q5e,"IsRecord");function fAt(t){return Go(t)&&Gp in t&&t[Gp]==="Recursive"}s(fAt,"IsRecursive");function H5e(t){return ki(t,"Ref")&&jo(t.$id)&&as(t.$ref)}s(H5e,"IsRef");function W5e(t){return ki(t,"RegExp")&&jo(t.$id)&&as(t.source)&&as(t.flags)&&cs(t.maxLength)&&cs(t.minLength)}s(W5e,"IsRegExp");function G5e(t){return ki(t,"String")&&t.type==="string"&&jo(t.$id)&&cs(t.minLength)&&cs(t.maxLength)&&sAt(t.pattern)&&aAt(t.format)}s(G5e,"IsString");function j5e(t){return ki(t,"Symbol")&&t.type==="symbol"&&jo(t.$id)}s(j5e,"IsSymbol");function V5e(t){return ki(t,"TemplateLiteral")&&t.type==="string"&&as(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(V5e,"IsTemplateLiteral");function $5e(t){return ki(t,"This")&&jo(t.$id)&&as(t.$ref)}s($5e,"IsThis");function z5e(t){return Go(t)&&oa in t}s(z5e,"IsTransform");function Y5e(t){return ki(t,"Tuple")&&t.type==="array"&&jo(t.$id)&&y0(t.minItems)&&y0(t.maxItems)&&t.minItems===t.maxItems&&(ec(t.items)&&ec(t.additionalItems)&&t.minItems===0||Za(t.items)&&t.items.every(e=>Ms(e)))}s(Y5e,"IsTuple");function K5e(t){return ki(t,"Undefined")&&t.type==="undefined"&&jo(t.$id)}s(K5e,"IsUndefined");function pAt(t){return gce(t)&&t.anyOf.every(e=>k5e(e)||P5e(e))}s(pAt,"IsUnionLiteral");function gce(t){return ki(t,"Union")&&jo(t.$id)&&Go(t)&&Za(t.anyOf)&&t.anyOf.every(e=>Ms(e))}s(gce,"IsUnion");function J5e(t){return ki(t,"Uint8Array")&&t.type==="Uint8Array"&&jo(t.$id)&&cs(t.minByteLength)&&cs(t.maxByteLength)}s(J5e,"IsUint8Array");function X5e(t){return ki(t,"Unknown")&&jo(t.$id)}s(X5e,"IsUnknown");function Z5e(t){return ki(t,"Unsafe")}s(Z5e,"IsUnsafe");function eke(t){return ki(t,"Void")&&t.type==="void"&&jo(t.$id)}s(eke,"IsVoid");function tke(t){return Go(t)&&et in t&&as(t[et])&&!oAt.includes(t[et])}s(tke,"IsKind");function Ms(t){return Go(t)&&(A5e(t)||y5e(t)||C5e(t)||x5e(t)||v5e(t)||E5e(t)||b5e(t)||I5e(t)||T5e(t)||w5e(t)||_5e(t)||S5e(t)||R5e(t)||k6(t)||D5e(t)||N5e(t)||L5e(t)||M5e(t)||F5e(t)||O5e(t)||Q5e(t)||U5e(t)||q5e(t)||H5e(t)||W5e(t)||G5e(t)||j5e(t)||V5e(t)||$5e(t)||Y5e(t)||K5e(t)||gce(t)||J5e(t)||X5e(t)||Z5e(t)||eke(t)||tke(t))}s(Ms,"IsSchema");d();var Ace="(true|false)",P6="(0|[1-9][0-9]*)",yce="(.*)",mAt="(?!.*)",yvr=`^${Ace}$`,JA=`^${P6}$`,XA=`^${yce}$`,rke=`^${mAt}$`;d();var Wh={};ra(Wh,{Clear:()=>gAt,Delete:()=>AAt,Entries:()=>hAt,Get:()=>EAt,Has:()=>yAt,Set:()=>CAt});d();var zk=new Map;function hAt(){return new Map(zk)}s(hAt,"Entries");function gAt(){return zk.clear()}s(gAt,"Clear");function AAt(t){return zk.delete(t)}s(AAt,"Delete");function yAt(t){return zk.has(t)}s(yAt,"Has");function CAt(t,e){zk.set(t,e)}s(CAt,"Set");function EAt(t){return zk.get(t)}s(EAt,"Get");var Ed={};ra(Ed,{Clear:()=>xAt,Delete:()=>bAt,Entries:()=>vAt,Get:()=>wAt,Has:()=>IAt,Set:()=>TAt});d();var Yk=new Map;function vAt(){return new Map(Yk)}s(vAt,"Entries");function xAt(){return Yk.clear()}s(xAt,"Clear");function bAt(t){return Yk.delete(t)}s(bAt,"Delete");function IAt(t){return Yk.has(t)}s(IAt,"Has");function TAt(t,e){Yk.set(t,e)}s(TAt,"Set");function wAt(t){return Yk.get(t)}s(wAt,"Get");d();function nke(t,e){return t.includes(e)}s(nke,"SetIncludes");function ike(t){return[...new Set(t)]}s(ike,"SetDistinct");function _At(t,e){return t.filter(r=>e.includes(r))}s(_At,"SetIntersect");function SAt(t,e){return t.reduce((r,n)=>_At(r,n),e)}s(SAt,"SetIntersectManyResolve");function oke(t){return t.length===1?t[0]:t.length>1?SAt(t.slice(1),t[0]):[]}s(oke,"SetIntersectMany");function ske(t){let e=[];for(let r of t)e.push(...r);return e}s(ske,"SetUnionMany");d();function sb(t){return it({[et]:"Any"},t)}s(sb,"Any");d();function Kk(t,e){return it({[et]:"Array",type:"array",items:t},e)}s(Kk,"Array");d();function ake(t){return it({[et]:"Argument",index:t})}s(ake,"Argument");d();function Jk(t,e){return it({[et]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(Jk,"AsyncIterator");d();d();function Cs(t,e,r){return it({[et]:"Computed",target:t,parameters:e},r)}s(Cs,"Computed");d();d();function RAt(t,e){let{[e]:r,...n}=t;return n}s(RAt,"DiscardKey");function xa(t,e){return e.reduce((r,n)=>RAt(r,n),t)}s(xa,"Discard");d();function mi(t){return it({[et]:"Never",not:{}},t)}s(mi,"Never");d();d();function uo(t){return it({[et]:"MappedResult",properties:t})}s(uo,"MappedResult");d();d();function Xk(t,e,r){return it({[et]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(Xk,"Constructor");d();function ZA(t,e,r){return it({[et]:"Function",type:"Function",parameters:t,returns:e},r)}s(ZA,"Function");d();d();d();d();function B6(t,e){return it({[et]:"Union",anyOf:t},e)}s(B6,"UnionCreate");function kAt(t){return t.some(e=>uf(e))}s(kAt,"IsUnionOptional");function cke(t){return t.map(e=>uf(e)?PAt(e):e)}s(cke,"RemoveOptionalFromRest");function PAt(t){return xa(t,[Zl])}s(PAt,"RemoveOptionalFromType");function BAt(t,e){return kAt(t)?Mu(B6(cke(t),e)):B6(cke(t),e)}s(BAt,"ResolveUnion");function ey(t,e){return t.length===1?it(t[0],e):t.length===0?mi(e):BAt(t,e)}s(ey,"UnionEvaluated");d();function wo(t,e){return t.length===0?mi(e):t.length===1?it(t[0],e):B6(t,e)}s(wo,"Union");d();d();d();var NH=class extends bn{static{s(this,"TemplateLiteralParserError")}};function DAt(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(DAt,"Unescape");function Cce(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(Cce,"IsNonEscaped");function D1(t,e){return Cce(t,e,"(")}s(D1,"IsOpenParen");function D6(t,e){return Cce(t,e,")")}s(D6,"IsCloseParen");function lke(t,e){return Cce(t,e,"|")}s(lke,"IsSeparator");function NAt(t){if(!(D1(t,0)&&D6(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(D1(t,r)&&(e+=1),D6(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(NAt,"IsGroup");function LAt(t){return t.slice(1,t.length-1)}s(LAt,"InGroup");function MAt(t){let e=0;for(let r=0;r<t.length;r++)if(D1(t,r)&&(e+=1),D6(t,r)&&(e-=1),lke(t,r)&&e===0)return!0;return!1}s(MAt,"IsPrecedenceOr");function FAt(t){for(let e=0;e<t.length;e++)if(D1(t,e))return!0;return!1}s(FAt,"IsPrecedenceAnd");function OAt(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(D1(t,o)&&(e+=1),D6(t,o)&&(e-=1),lke(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(Zk(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(Zk(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(OAt,"Or");function QAt(t){function e(i,o){if(!D1(i,o))throw new NH("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=o;c<i.length;c++)if(D1(i,c)&&(a+=1),D6(i,c)&&(a-=1),a===0)return[o,c];throw new NH("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(D1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(D1(t,i)){let[o,a]=e(t,i),c=t.slice(o,a+1);n.push(Zk(c)),i=a}else{let[o,a]=r(t,i),c=t.slice(o,a);c.length>0&&n.push(Zk(c)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(QAt,"And");function Zk(t){return NAt(t)?Zk(LAt(t)):MAt(t)?OAt(t):FAt(t)?QAt(t):{type:"const",const:DAt(t)}}s(Zk,"TemplateLiteralParse");function e4(t){return Zk(t.slice(1,t.length-1))}s(e4,"TemplateLiteralParseExact");var Ece=class extends bn{static{s(this,"TemplateLiteralFiniteError")}};function UAt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(UAt,"IsNumberExpression");function qAt(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(qAt,"IsBooleanExpression");function HAt(t){return t.type==="const"&&t.const===".*"}s(HAt,"IsStringExpression");function b_(t){return UAt(t)||HAt(t)?!1:qAt(t)?!0:t.type==="and"?t.expr.every(e=>b_(e)):t.type==="or"?t.expr.every(e=>b_(e)):t.type==="const"?!0:(()=>{throw new Ece("Unknown expression type")})()}s(b_,"IsTemplateLiteralExpressionFinite");function LH(t){let e=e4(t.pattern);return b_(e)}s(LH,"IsTemplateLiteralFinite");d();var vce=class extends bn{static{s(this,"TemplateLiteralGenerateError")}};function*uke(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of uke(t.slice(1)))yield`${e}${r}`}s(uke,"GenerateReduce");function*WAt(t){return yield*uke(t.expr.map(e=>[...N6(e)]))}s(WAt,"GenerateAnd");function*GAt(t){for(let e of t.expr)yield*N6(e)}s(GAt,"GenerateOr");function*jAt(t){return yield t.const}s(jAt,"GenerateConst");function*N6(t){return t.type==="and"?yield*WAt(t):t.type==="or"?yield*GAt(t):t.type==="const"?yield*jAt(t):(()=>{throw new vce("Unknown expression")})()}s(N6,"TemplateLiteralExpressionGenerate");function t4(t){let e=e4(t.pattern);return b_(e)?[...N6(e)]:[]}s(t4,"TemplateLiteralGenerate");d();d();function zi(t,e){return it({[et]:"Literal",const:t,type:typeof t},e)}s(zi,"Literal");d();function MH(t){return it({[et]:"Boolean",type:"boolean"},t)}s(MH,"Boolean");d();function r4(t){return it({[et]:"BigInt",type:"bigint"},t)}s(r4,"BigInt");d();function jp(t){return it({[et]:"Number",type:"number"},t)}s(jp,"Number");d();function vd(t){return it({[et]:"String",type:"string"},t)}s(vd,"String");function*VAt(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield MH():e==="number"?yield jp():e==="bigint"?yield r4():e==="string"?yield vd():yield(()=>{let r=e.split("|").map(n=>zi(n.trim()));return r.length===0?mi():r.length===1?r[0]:ey(r)})()}s(VAt,"FromUnion");function*$At(t){if(t[1]!=="{"){let e=zi("$"),r=xce(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=VAt(t.slice(2,e)),n=xce(t.slice(e+1));return yield*[...r,...n]}yield zi(t)}s($At,"FromTerminal");function*xce(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=zi(t.slice(0,e)),n=$At(t.slice(e));return yield*[r,...n]}yield zi(t)}s(xce,"FromSyntax");function dke(t){return[...xce(t)]}s(dke,"TemplateLiteralSyntax");d();var bce=class extends bn{static{s(this,"TemplateLiteralPatternError")}};function zAt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(zAt,"Escape");function fke(t,e){return x0(t)?t.pattern.slice(1,t.pattern.length-1):no(t)?`(${t.anyOf.map(r=>fke(r,e)).join("|")})`:Hh(t)?`${e}${P6}`:qh(t)?`${e}${P6}`:C_(t)?`${e}${P6}`:k1(t)?`${e}${yce}`:E0(t)?`${e}${zAt(t.const.toString())}`:R1(t)?`${e}${Ace}`:(()=>{throw new bce(`Unexpected Kind '${t[et]}'`)})()}s(fke,"Visit");function Ice(t){return`^${t.map(e=>fke(e,"")).join("")}$`}s(Ice,"TemplateLiteralPattern");d();function I_(t){let r=t4(t).map(n=>zi(n));return ey(r)}s(I_,"TemplateLiteralToUnion");d();function FH(t,e){let r=as(t)?Ice(dke(t)):Ice(t);return it({[et]:"TemplateLiteral",type:"string",pattern:r},e)}s(FH,"TemplateLiteral");function YAt(t){return t4(t).map(r=>r.toString())}s(YAt,"FromTemplateLiteral");function KAt(t){let e=[];for(let r of t)e.push(...df(r));return e}s(KAt,"FromUnion");function JAt(t){return[t.toString()]}s(JAt,"FromLiteral");function df(t){return[...new Set(x0(t)?YAt(t):no(t)?KAt(t.anyOf):E0(t)?JAt(t.const):Hh(t)?["[number]"]:qh(t)?["[number]"]:[])]}s(df,"IndexPropertyKeys");d();function XAt(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=ab(t,df(e[i]),r);return n}s(XAt,"FromProperties");function ZAt(t,e,r){return XAt(t,e.properties,r)}s(ZAt,"FromMappedResult");function pke(t,e,r){let n=ZAt(t,e,r);return uo(n)}s(pke,"IndexFromMappedResult");function hke(t,e){return t.map(r=>gke(r,e))}s(hke,"FromRest");function eyt(t){return t.filter(e=>!ib(e))}s(eyt,"FromIntersectRest");function tyt(t,e){return OH(eyt(hke(t,e)))}s(tyt,"FromIntersect");function ryt(t){return t.some(e=>ib(e))?[]:t}s(ryt,"FromUnionRest");function nyt(t,e){return ey(ryt(hke(t,e)))}s(nyt,"FromUnion");function iyt(t,e){return e in t?t[e]:e==="[number]"?ey(t):mi()}s(iyt,"FromTuple");function oyt(t,e){return e==="[number]"?t:mi()}s(oyt,"FromArray");function syt(t,e){return e in t?t[e]:mi()}s(syt,"FromProperty");function gke(t,e){return va(t)?tyt(t.allOf,e):no(t)?nyt(t.anyOf,e):b0(t)?iyt(t.items??[],e):Fh(t)?oyt(t.items,e):tc(t)?syt(t.properties,e):mi()}s(gke,"IndexFromPropertyKey");function L6(t,e){return e.map(r=>gke(t,r))}s(L6,"IndexFromPropertyKeys");function mke(t,e){return ey(L6(t,e))}s(mke,"FromSchema");function ab(t,e,r){if(Da(t)||Da(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!sa(t)||!sa(e))throw new bn(n);return Cs("Index",[t,e])}return Ls(e)?pke(t,e,r):v0(e)?Ake(t,e,r):it(sa(e)?mke(t,df(e)):mke(t,e),r)}s(ab,"Index");function ayt(t,e,r){return{[e]:ab(t,[e],Ds(r))}}s(ayt,"MappedIndexPropertyKey");function cyt(t,e,r){return e.reduce((n,i)=>({...n,...ayt(t,i,r)}),{})}s(cyt,"MappedIndexPropertyKeys");function lyt(t,e,r){return cyt(t,e.keys,r)}s(lyt,"MappedIndexProperties");function Ake(t,e,r){let n=lyt(t,e,r);return uo(n)}s(Ake,"IndexFromMappedKey");d();function n4(t,e){return it({[et]:"Iterator",type:"Iterator",items:t},e)}s(n4,"Iterator");d();function uyt(t){let e=[];for(let r in t)uf(t[r])||e.push(r);return e}s(uyt,"RequiredKeys");function dyt(t,e){let r=uyt(t),n=r.length>0?{[et]:"Object",type:"object",properties:t,required:r}:{[et]:"Object",type:"object",properties:t};return it(n,e)}s(dyt,"_Object");var _o=dyt;d();function QH(t,e){return it({[et]:"Promise",type:"Promise",item:t},e)}s(QH,"Promise");d();d();function fyt(t){return it(xa(t,[Mh]))}s(fyt,"RemoveReadonly");function pyt(t){return it({...t,[Mh]:"Readonly"})}s(pyt,"AddReadonly");function myt(t,e){return e===!1?fyt(t):pyt(t)}s(myt,"ReadonlyWithFlag");function ff(t,e){let r=e??!0;return Ls(t)?yke(t,r):myt(t,r)}s(ff,"Readonly");function hyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=ff(t[n],e);return r}s(hyt,"FromProperties");function gyt(t,e){return hyt(t.properties,e)}s(gyt,"FromMappedResult");function yke(t,e){let r=gyt(t,e);return uo(r)}s(yke,"ReadonlyFromMappedResult");d();function Vp(t,e){return it(t.length>0?{[et]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[et]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Vp,"Tuple");function Cke(t,e){return t in e?$p(t,e[t]):uo(e)}s(Cke,"FromMappedResult");function Ayt(t){return{[t]:zi(t)}}s(Ayt,"MappedKeyToKnownMappedResultProperties");function yyt(t){let e={};for(let r of t)e[r]=zi(r);return e}s(yyt,"MappedKeyToUnknownMappedResultProperties");function Cyt(t,e){return nke(e,t)?Ayt(t):yyt(e)}s(Cyt,"MappedKeyToMappedResultProperties");function Eyt(t,e){let r=Cyt(t,e);return Cke(t,r)}s(Eyt,"FromMappedKey");function M6(t,e){return e.map(r=>$p(t,r))}s(M6,"FromRest");function vyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=$p(t,e[n]);return r}s(vyt,"FromProperties");function $p(t,e){let r={...e};return uf(e)?Mu($p(t,xa(e,[Zl]))):$k(e)?ff($p(t,xa(e,[Mh]))):Ls(e)?Cke(t,e.properties):v0(e)?Eyt(t,e.keys):Qh(e)?Xk(M6(t,e.parameters),$p(t,e.returns),r):Uh(e)?ZA(M6(t,e.parameters),$p(t,e.returns),r):y_(e)?Jk($p(t,e.items),r):E_(e)?n4($p(t,e.items),r):va(e)?Fu(M6(t,e.allOf),r):no(e)?wo(M6(t,e.anyOf),r):b0(e)?Vp(M6(t,e.items??[]),r):tc(e)?_o(vyt(t,e.properties),r):Fh(e)?Kk($p(t,e.items),r):v_(e)?QH($p(t,e.item),r):e}s($p,"FromSchemaType");function xyt(t,e){let r={};for(let n of t)r[n]=$p(n,e);return r}s(xyt,"MappedFunctionReturnType");function Eke(t,e,r){let n=sa(t)?df(t):t,i=e({[et]:"MappedKey",keys:n}),o=xyt(n,i);return _o(o,r)}s(Eke,"Mapped");d();function byt(t){return it(xa(t,[Zl]))}s(byt,"RemoveOptional");function Iyt(t){return it({...t,[Zl]:"Optional"})}s(Iyt,"AddOptional");function Tyt(t,e){return e===!1?byt(t):Iyt(t)}s(Tyt,"OptionalWithFlag");function Mu(t,e){let r=e??!0;return Ls(t)?vke(t,r):Tyt(t,r)}s(Mu,"Optional");function wyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Mu(t[n],e);return r}s(wyt,"FromProperties");function _yt(t,e){return wyt(t.properties,e)}s(_yt,"FromMappedResult");function vke(t,e){let r=_yt(t,e);return uo(r)}s(vke,"OptionalFromMappedResult");d();function F6(t,e={}){let r=t.every(i=>tc(i)),n=sa(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return it(e.unevaluatedProperties===!1||sa(e.unevaluatedProperties)||r?{...n,[et]:"Intersect",type:"object",allOf:t}:{...n,[et]:"Intersect",allOf:t},e)}s(F6,"IntersectCreate");function Syt(t){return t.every(e=>uf(e))}s(Syt,"IsIntersectOptional");function Ryt(t){return xa(t,[Zl])}s(Ryt,"RemoveOptionalFromType");function xke(t){return t.map(e=>uf(e)?Ryt(e):e)}s(xke,"RemoveOptionalFromRest");function kyt(t,e){return Syt(t)?Mu(F6(xke(t),e)):F6(xke(t),e)}s(kyt,"ResolveIntersect");function OH(t,e={}){if(t.length===1)return it(t[0],e);if(t.length===0)return mi(e);if(t.some(r=>To(r)))throw new Error("Cannot intersect transform types");return kyt(t,e)}s(OH,"IntersectEvaluated");d();function Fu(t,e){if(t.length===1)return it(t[0],e);if(t.length===0)return mi(e);if(t.some(r=>To(r)))throw new Error("Cannot intersect transform types");return F6(t,e)}s(Fu,"Intersect");d();function zp(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new bn("Ref: $ref must be a string");return it({[et]:"Ref",$ref:e},r)}s(zp,"Ref");function Pyt(t,e){return Cs("Awaited",[Cs(t,e)])}s(Pyt,"FromComputed");function Byt(t){return Cs("Awaited",[zp(t)])}s(Byt,"FromRef");function Dyt(t){return Fu(bke(t))}s(Dyt,"FromIntersect");function Nyt(t){return wo(bke(t))}s(Nyt,"FromUnion");function Lyt(t){return i4(t)}s(Lyt,"FromPromise");function bke(t){return t.map(e=>i4(e))}s(bke,"FromRest");function i4(t,e){return it(Oh(t)?Pyt(t.target,t.parameters):va(t)?Dyt(t.allOf):no(t)?Nyt(t.anyOf):v_(t)?Lyt(t.item):Da(t)?Byt(t.$ref):t,e)}s(i4,"Awaited");d();d();d();d();function Ike(t){let e=[];for(let r of t)e.push(pf(r));return e}s(Ike,"FromRest");function Myt(t){let e=Ike(t);return ske(e)}s(Myt,"FromIntersect");function Fyt(t){let e=Ike(t);return oke(e)}s(Fyt,"FromUnion");function Oyt(t){return t.map((e,r)=>r.toString())}s(Oyt,"FromTuple");function Qyt(t){return["[number]"]}s(Qyt,"FromArray");function Uyt(t){return globalThis.Object.getOwnPropertyNames(t)}s(Uyt,"FromProperties");function qyt(t){return Tce?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(qyt,"FromPatternProperties");function pf(t){return va(t)?Myt(t.allOf):no(t)?Fyt(t.anyOf):b0(t)?Oyt(t.items??[]):Fh(t)?Qyt(t.items):tc(t)?Uyt(t.properties):x_(t)?qyt(t.patternProperties):[]}s(pf,"KeyOfPropertyKeys");var Tce=!1;function N1(t){Tce=!0;let e=pf(t);return Tce=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(N1,"KeyOfPattern");function Hyt(t,e){return Cs("KeyOf",[Cs(t,e)])}s(Hyt,"FromComputed");function Wyt(t){return Cs("KeyOf",[zp(t)])}s(Wyt,"FromRef");function Gyt(t,e){let r=pf(t),n=jyt(r),i=ey(n);return it(i,e)}s(Gyt,"KeyOfFromType");function jyt(t){return t.map(e=>e==="[number]"?jp():zi(e))}s(jyt,"KeyOfPropertyKeysToRest");function o4(t,e){return Oh(t)?Hyt(t.target,t.parameters):Da(t)?Wyt(t.$ref):Ls(t)?Tke(t,e):Gyt(t,e)}s(o4,"KeyOf");function Vyt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=o4(t[n],Ds(e));return r}s(Vyt,"FromProperties");function $yt(t,e){return Vyt(t.properties,e)}s($yt,"FromMappedResult");function Tke(t,e){let r=$yt(t,e);return uo(r)}s(Tke,"KeyOfFromMappedResult");d();function UH(t){let e=pf(t),r=L6(t,e);return e.map((n,i)=>[e[i],r[i]])}s(UH,"KeyOfPropertyEntries");function zyt(t){let e=[];for(let r of t)e.push(...pf(r));return ike(e)}s(zyt,"CompositeKeys");function Yyt(t){return t.filter(e=>!ib(e))}s(Yyt,"FilterNever");function Kyt(t,e){let r=[];for(let n of t)r.push(...L6(n,[e]));return Yyt(r)}s(Kyt,"CompositeProperty");function Jyt(t,e){let r={};for(let n of e)r[n]=OH(Kyt(t,n));return r}s(Jyt,"CompositeProperties");function wke(t,e){let r=zyt(t),n=Jyt(t,r);return _o(n,e)}s(wke,"Composite");d();d();function qH(t){return it({[et]:"Date",type:"Date"},t)}s(qH,"Date");d();function HH(t){return it({[et]:"Null",type:"null"},t)}s(HH,"Null");d();function WH(t){return it({[et]:"Symbol",type:"symbol"},t)}s(WH,"Symbol");d();function GH(t){return it({[et]:"Undefined",type:"undefined"},t)}s(GH,"Undefined");d();function jH(t){return it({[et]:"Uint8Array",type:"Uint8Array"},t)}s(jH,"Uint8Array");d();function Gh(t){return it({[et]:"Unknown"},t)}s(Gh,"Unknown");function Xyt(t){return t.map(e=>wce(e,!1))}s(Xyt,"FromArray");function Zyt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=ff(wce(t[r],!1));return e}s(Zyt,"FromProperties");function VH(t,e){return e===!0?t:ff(t)}s(VH,"ConditionalReadonly");function wce(t,e){return ice(t)?VH(sb(),e):sce(t)?VH(sb(),e):Za(t)?ff(Vp(Xyt(t))):w1(t)?jH():A_(t)?qH():Go(t)?VH(_o(Zyt(t)),e):oce(t)?VH(ZA([],Gh()),e):ec(t)?GH():ace(t)?HH():cce(t)?WH():I6(t)?r4():y0(t)?zi(t):T1(t)?zi(t):as(t)?zi(t):_o({})}s(wce,"FromValue");function _ke(t,e){return it(wce(t,!0),e)}s(_ke,"Const");d();function Ske(t,e){return Qh(t)?Vp(t.parameters,e):mi(e)}s(Ske,"ConstructorParameters");d();function Rke(t,e){if(ec(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>zi(o));return wo(i,{...e,[Gp]:"Enum"})}s(Rke,"Enum");d();d();d();var Sce=class extends bn{static{s(this,"ExtendsResolverError")}},ot;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(ot||(ot={}));function Yp(t){return t===ot.False?t:ot.True}s(Yp,"IntoBooleanResult");function s4(t){throw new Sce(t)}s(s4,"Throw");function xc(t){return Be.IsNever(t)||Be.IsIntersect(t)||Be.IsUnion(t)||Be.IsUnknown(t)||Be.IsAny(t)}s(xc,"IsStructuralRight");function bc(t,e){return Be.IsNever(e)?Mke(t,e):Be.IsIntersect(e)?$H(t,e):Be.IsUnion(e)?Bce(t,e):Be.IsUnknown(e)?Uke(t,e):Be.IsAny(e)?Pce(t,e):s4("StructuralRight")}s(bc,"StructuralRight");function Pce(t,e){return ot.True}s(Pce,"FromAnyRight");function eCt(t,e){return Be.IsIntersect(e)?$H(t,e):Be.IsUnion(e)&&e.anyOf.some(r=>Be.IsAny(r)||Be.IsUnknown(r))?ot.True:Be.IsUnion(e)?ot.Union:Be.IsUnknown(e)||Be.IsAny(e)?ot.True:ot.Union}s(eCt,"FromAny");function tCt(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)?ot.True:ot.False}s(tCt,"FromArrayRight");function rCt(t,e){return Be.IsObject(e)&&zH(e)?ot.True:xc(e)?bc(t,e):Be.IsArray(e)?Yp(Vo(t.items,e.items)):ot.False}s(rCt,"FromArray");function nCt(t,e){return xc(e)?bc(t,e):Be.IsAsyncIterator(e)?Yp(Vo(t.items,e.items)):ot.False}s(nCt,"FromAsyncIterator");function iCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsBigInt(e)?ot.True:ot.False}s(iCt,"FromBigInt");function Nke(t,e){return Be.IsLiteralBoolean(t)||Be.IsBoolean(t)?ot.True:ot.False}s(Nke,"FromBooleanRight");function oCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsBoolean(e)?ot.True:ot.False}s(oCt,"FromBoolean");function sCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsConstructor(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>Yp(Vo(e.parameters[n],r))===ot.True)?Yp(Vo(t.returns,e.returns)):ot.False:ot.False}s(sCt,"FromConstructor");function aCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsDate(e)?ot.True:ot.False}s(aCt,"FromDate");function cCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsFunction(e)?t.parameters.length>e.parameters.length?ot.False:t.parameters.every((r,n)=>Yp(Vo(e.parameters[n],r))===ot.True)?Yp(Vo(t.returns,e.returns)):ot.False:ot.False}s(cCt,"FromFunction");function Lke(t,e){return Be.IsLiteral(t)&&Lu.IsNumber(t.const)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(Lke,"FromIntegerRight");function lCt(t,e){return Be.IsInteger(e)||Be.IsNumber(e)?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):ot.False}s(lCt,"FromInteger");function $H(t,e){return e.allOf.every(r=>Vo(t,r)===ot.True)?ot.True:ot.False}s($H,"FromIntersectRight");function uCt(t,e){return t.allOf.some(r=>Vo(r,e)===ot.True)?ot.True:ot.False}s(uCt,"FromIntersect");function dCt(t,e){return xc(e)?bc(t,e):Be.IsIterator(e)?Yp(Vo(t.items,e.items)):ot.False}s(dCt,"FromIterator");function fCt(t,e){return Be.IsLiteral(e)&&e.const===t.const?ot.True:xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsString(e)?Qke(t,e):Be.IsNumber(e)?Fke(t,e):Be.IsInteger(e)?Lke(t,e):Be.IsBoolean(e)?Nke(t,e):ot.False}s(fCt,"FromLiteral");function Mke(t,e){return ot.False}s(Mke,"FromNeverRight");function pCt(t,e){return ot.True}s(pCt,"FromNever");function kke(t){let[e,r]=[t,0];for(;Be.IsNot(e);)e=e.not,r+=1;return r%2===0?e:Gh()}s(kke,"UnwrapTNot");function mCt(t,e){return Be.IsNot(t)?Vo(kke(t),e):Be.IsNot(e)?Vo(t,kke(e)):s4("Invalid fallthrough for Not")}s(mCt,"FromNot");function hCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsNull(e)?ot.True:ot.False}s(hCt,"FromNull");function Fke(t,e){return Be.IsLiteralNumber(t)||Be.IsNumber(t)||Be.IsInteger(t)?ot.True:ot.False}s(Fke,"FromNumberRight");function gCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsInteger(e)||Be.IsNumber(e)?ot.True:ot.False}s(gCt,"FromNumber");function mf(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(mf,"IsObjectPropertyCount");function Pke(t){return zH(t)}s(Pke,"IsObjectStringLike");function Bke(t){return mf(t,0)||mf(t,1)&&"description"in t.properties&&Be.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Be.IsString(t.properties.description.anyOf[0])&&Be.IsUndefined(t.properties.description.anyOf[1])||Be.IsString(t.properties.description.anyOf[1])&&Be.IsUndefined(t.properties.description.anyOf[0]))}s(Bke,"IsObjectSymbolLike");function _ce(t){return mf(t,0)}s(_ce,"IsObjectNumberLike");function Dke(t){return mf(t,0)}s(Dke,"IsObjectBooleanLike");function ACt(t){return mf(t,0)}s(ACt,"IsObjectBigIntLike");function yCt(t){return mf(t,0)}s(yCt,"IsObjectDateLike");function CCt(t){return zH(t)}s(CCt,"IsObjectUint8ArrayLike");function ECt(t){let e=jp();return mf(t,0)||mf(t,1)&&"length"in t.properties&&Yp(Vo(t.properties.length,e))===ot.True}s(ECt,"IsObjectFunctionLike");function vCt(t){return mf(t,0)}s(vCt,"IsObjectConstructorLike");function zH(t){let e=jp();return mf(t,0)||mf(t,1)&&"length"in t.properties&&Yp(Vo(t.properties.length,e))===ot.True}s(zH,"IsObjectArrayLike");function xCt(t){let e=ZA([sb()],sb());return mf(t,0)||mf(t,1)&&"then"in t.properties&&Yp(Vo(t.properties.then,e))===ot.True}s(xCt,"IsObjectPromiseLike");function Oke(t,e){return Vo(t,e)===ot.False||Be.IsOptional(t)&&!Be.IsOptional(e)?ot.False:ot.True}s(Oke,"Property");function Ou(t,e){return Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:Be.IsNever(t)||Be.IsLiteralString(t)&&Pke(e)||Be.IsLiteralNumber(t)&&_ce(e)||Be.IsLiteralBoolean(t)&&Dke(e)||Be.IsSymbol(t)&&Bke(e)||Be.IsBigInt(t)&&ACt(e)||Be.IsString(t)&&Pke(e)||Be.IsSymbol(t)&&Bke(e)||Be.IsNumber(t)&&_ce(e)||Be.IsInteger(t)&&_ce(e)||Be.IsBoolean(t)&&Dke(e)||Be.IsUint8Array(t)&&CCt(e)||Be.IsDate(t)&&yCt(e)||Be.IsConstructor(t)&&vCt(e)||Be.IsFunction(t)&&ECt(e)?ot.True:Be.IsRecord(t)&&Be.IsString(Rce(t))?e[Gp]==="Record"?ot.True:ot.False:Be.IsRecord(t)&&Be.IsNumber(Rce(t))?mf(e,0)?ot.True:ot.False:ot.False}s(Ou,"FromObjectRight");function bCt(t,e){return xc(e)?bc(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!Be.IsOptional(e.properties[r]))return ot.False;if(Be.IsOptional(e.properties[r]))return ot.True;if(Oke(t.properties[r],e.properties[r])===ot.False)return ot.False}return ot.True})():ot.False}s(bCt,"FromObject");function ICt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&xCt(e)?ot.True:Be.IsPromise(e)?Yp(Vo(t.item,e.item)):ot.False}s(ICt,"FromPromise");function Rce(t){return JA in t.patternProperties?jp():XA in t.patternProperties?vd():s4("Unknown record key pattern")}s(Rce,"RecordKey");function kce(t){return JA in t.patternProperties?t.patternProperties[JA]:XA in t.patternProperties?t.patternProperties[XA]:s4("Unable to get record value schema")}s(kce,"RecordValue");function Kp(t,e){let[r,n]=[Rce(e),kce(e)];return Be.IsLiteralString(t)&&Be.IsNumber(r)&&Yp(Vo(t,n))===ot.True?ot.True:Be.IsUint8Array(t)&&Be.IsNumber(r)||Be.IsString(t)&&Be.IsNumber(r)||Be.IsArray(t)&&Be.IsNumber(r)?Vo(t,n):Be.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(Oke(n,t.properties[i])===ot.False)return ot.False;return ot.True})():ot.False}s(Kp,"FromRecordRight");function TCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Vo(kce(t),kce(e)):ot.False}s(TCt,"FromRecord");function wCt(t,e){let r=Be.IsRegExp(t)?vd():t,n=Be.IsRegExp(e)?vd():e;return Vo(r,n)}s(wCt,"FromRegExp");function Qke(t,e){return Be.IsLiteral(t)&&Lu.IsString(t.const)||Be.IsString(t)?ot.True:ot.False}s(Qke,"FromStringRight");function _Ct(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsString(e)?ot.True:ot.False}s(_Ct,"FromString");function SCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsSymbol(e)?ot.True:ot.False}s(SCt,"FromSymbol");function RCt(t,e){return Be.IsTemplateLiteral(t)?Vo(I_(t),e):Be.IsTemplateLiteral(e)?Vo(t,I_(e)):s4("Invalid fallthrough for TemplateLiteral")}s(RCt,"FromTemplateLiteral");function kCt(t,e){return Be.IsArray(e)&&t.items!==void 0&&t.items.every(r=>Vo(r,e.items)===ot.True)}s(kCt,"IsArrayOfTuple");function PCt(t,e){return Be.IsNever(t)?ot.True:Be.IsUnknown(t)?ot.False:Be.IsAny(t)?ot.Union:ot.False}s(PCt,"FromTupleRight");function BCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)&&zH(e)||Be.IsArray(e)&&kCt(t,e)?ot.True:Be.IsTuple(e)?Lu.IsUndefined(t.items)&&!Lu.IsUndefined(e.items)||!Lu.IsUndefined(t.items)&&Lu.IsUndefined(e.items)?ot.False:Lu.IsUndefined(t.items)&&!Lu.IsUndefined(e.items)||t.items.every((r,n)=>Vo(r,e.items[n])===ot.True)?ot.True:ot.False:ot.False}s(BCt,"FromTuple");function DCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsUint8Array(e)?ot.True:ot.False}s(DCt,"FromUint8Array");function NCt(t,e){return xc(e)?bc(t,e):Be.IsObject(e)?Ou(t,e):Be.IsRecord(e)?Kp(t,e):Be.IsVoid(e)?FCt(t,e):Be.IsUndefined(e)?ot.True:ot.False}s(NCt,"FromUndefined");function Bce(t,e){return e.anyOf.some(r=>Vo(t,r)===ot.True)?ot.True:ot.False}s(Bce,"FromUnionRight");function LCt(t,e){return t.anyOf.every(r=>Vo(r,e)===ot.True)?ot.True:ot.False}s(LCt,"FromUnion");function Uke(t,e){return ot.True}s(Uke,"FromUnknownRight");function MCt(t,e){return Be.IsNever(e)?Mke(t,e):Be.IsIntersect(e)?$H(t,e):Be.IsUnion(e)?Bce(t,e):Be.IsAny(e)?Pce(t,e):Be.IsString(e)?Qke(t,e):Be.IsNumber(e)?Fke(t,e):Be.IsInteger(e)?Lke(t,e):Be.IsBoolean(e)?Nke(t,e):Be.IsArray(e)?tCt(t,e):Be.IsTuple(e)?PCt(t,e):Be.IsObject(e)?Ou(t,e):Be.IsUnknown(e)?ot.True:ot.False}s(MCt,"FromUnknown");function FCt(t,e){return Be.IsUndefined(t)||Be.IsUndefined(t)?ot.True:ot.False}s(FCt,"FromVoidRight");function OCt(t,e){return Be.IsIntersect(e)?$H(t,e):Be.IsUnion(e)?Bce(t,e):Be.IsUnknown(e)?Uke(t,e):Be.IsAny(e)?Pce(t,e):Be.IsObject(e)?Ou(t,e):Be.IsVoid(e)?ot.True:ot.False}s(OCt,"FromVoid");function Vo(t,e){return Be.IsTemplateLiteral(t)||Be.IsTemplateLiteral(e)?RCt(t,e):Be.IsRegExp(t)||Be.IsRegExp(e)?wCt(t,e):Be.IsNot(t)||Be.IsNot(e)?mCt(t,e):Be.IsAny(t)?eCt(t,e):Be.IsArray(t)?rCt(t,e):Be.IsBigInt(t)?iCt(t,e):Be.IsBoolean(t)?oCt(t,e):Be.IsAsyncIterator(t)?nCt(t,e):Be.IsConstructor(t)?sCt(t,e):Be.IsDate(t)?aCt(t,e):Be.IsFunction(t)?cCt(t,e):Be.IsInteger(t)?lCt(t,e):Be.IsIntersect(t)?uCt(t,e):Be.IsIterator(t)?dCt(t,e):Be.IsLiteral(t)?fCt(t,e):Be.IsNever(t)?pCt(t,e):Be.IsNull(t)?hCt(t,e):Be.IsNumber(t)?gCt(t,e):Be.IsObject(t)?bCt(t,e):Be.IsRecord(t)?TCt(t,e):Be.IsString(t)?_Ct(t,e):Be.IsSymbol(t)?SCt(t,e):Be.IsTuple(t)?BCt(t,e):Be.IsPromise(t)?ICt(t,e):Be.IsUint8Array(t)?DCt(t,e):Be.IsUndefined(t)?NCt(t,e):Be.IsUnion(t)?LCt(t,e):Be.IsUnknown(t)?MCt(t,e):Be.IsVoid(t)?OCt(t,e):s4(`Unknown left type operand '${t[et]}'`)}s(Vo,"Visit");function cb(t,e){return Vo(t,e)}s(cb,"ExtendsCheck");d();d();d();function QCt(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=a4(t[a],e,r,n,Ds(i));return o}s(QCt,"FromProperties");function UCt(t,e,r,n,i){return QCt(t.properties,e,r,n,i)}s(UCt,"FromMappedResult");function qke(t,e,r,n,i){let o=UCt(t,e,r,n,i);return uo(o)}s(qke,"ExtendsFromMappedResult");function qCt(t,e,r,n){let i=cb(t,e);return i===ot.Union?wo([r,n]):i===ot.True?r:n}s(qCt,"ExtendsResolve");function a4(t,e,r,n,i){return Ls(t)?qke(t,e,r,n,i):v0(t)?it(Hke(t,e,r,n,i)):it(qCt(t,e,r,n),i)}s(a4,"Extends");function HCt(t,e,r,n,i){return{[t]:a4(zi(t),e,r,n,Ds(i))}}s(HCt,"FromPropertyKey");function WCt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...HCt(a,e,r,n,i)}),{})}s(WCt,"FromPropertyKeys");function GCt(t,e,r,n,i){return WCt(t.keys,e,r,n,i)}s(GCt,"FromMappedKey");function Hke(t,e,r,n,i){let o=GCt(t,e,r,n,i);return uo(o)}s(Hke,"ExtendsFromMappedKey");d();function jCt(t){return t.allOf.every(e=>L1(e))}s(jCt,"Intersect");function VCt(t){return t.anyOf.some(e=>L1(e))}s(VCt,"Union");function $Ct(t){return!L1(t.not)}s($Ct,"Not");function L1(t){return t[et]==="Intersect"?jCt(t):t[et]==="Union"?VCt(t):t[et]==="Not"?$Ct(t):t[et]==="Undefined"}s(L1,"ExtendsUndefinedCheck");d();function Wke(t,e){return c4(I_(t),e)}s(Wke,"ExcludeFromTemplateLiteral");function zCt(t,e){let r=t.filter(n=>cb(n,e)===ot.False);return r.length===1?r[0]:wo(r)}s(zCt,"ExcludeRest");function c4(t,e,r={}){return x0(t)?it(Wke(t,e),r):Ls(t)?it(Gke(t,e),r):it(no(t)?zCt(t.anyOf,e):cb(t,e)!==ot.False?mi():t,r)}s(c4,"Exclude");function YCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=c4(t[n],e);return r}s(YCt,"FromProperties");function KCt(t,e){return YCt(t.properties,e)}s(KCt,"FromMappedResult");function Gke(t,e){let r=KCt(t,e);return uo(r)}s(Gke,"ExcludeFromMappedResult");d();d();d();function jke(t,e){return l4(I_(t),e)}s(jke,"ExtractFromTemplateLiteral");function JCt(t,e){let r=t.filter(n=>cb(n,e)!==ot.False);return r.length===1?r[0]:wo(r)}s(JCt,"ExtractRest");function l4(t,e,r){return x0(t)?it(jke(t,e),r):Ls(t)?it(Vke(t,e),r):it(no(t)?JCt(t.anyOf,e):cb(t,e)!==ot.False?t:mi(),r)}s(l4,"Extract");function XCt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=l4(t[n],e);return r}s(XCt,"FromProperties");function ZCt(t,e){return XCt(t.properties,e)}s(ZCt,"FromMappedResult");function Vke(t,e){let r=ZCt(t,e);return uo(r)}s(Vke,"ExtractFromMappedResult");d();function $ke(t,e){return Qh(t)?it(t.returns,e):mi(e)}s($ke,"InstanceType");d();d();function YH(t){return ff(Mu(t))}s(YH,"ReadonlyOptional");d();function T_(t,e,r){return it({[et]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(T_,"RecordCreateFromPattern");function Dce(t,e,r){let n={};for(let i of t)n[i]=e;return _o(n,{...r,[Gp]:"Record"})}s(Dce,"RecordCreateFromKeys");function e1t(t,e,r){return LH(t)?Dce(df(t),e,r):T_(t.pattern,e,r)}s(e1t,"FromTemplateLiteralKey");function t1t(t,e,r){return Dce(df(wo(t)),e,r)}s(t1t,"FromUnionKey");function r1t(t,e,r){return Dce([t.toString()],e,r)}s(r1t,"FromLiteralKey");function n1t(t,e,r){return T_(t.source,e,r)}s(n1t,"FromRegExpKey");function i1t(t,e,r){let n=ec(t.pattern)?XA:t.pattern;return T_(n,e,r)}s(i1t,"FromStringKey");function o1t(t,e,r){return T_(XA,e,r)}s(o1t,"FromAnyKey");function s1t(t,e,r){return T_(rke,e,r)}s(s1t,"FromNeverKey");function a1t(t,e,r){return _o({true:e,false:e},r)}s(a1t,"FromBooleanKey");function c1t(t,e,r){return T_(JA,e,r)}s(c1t,"FromIntegerKey");function l1t(t,e,r){return T_(JA,e,r)}s(l1t,"FromNumberKey");function KH(t,e,r={}){return no(t)?t1t(t.anyOf,e,r):x0(t)?e1t(t,e,r):E0(t)?r1t(t.const,e,r):R1(t)?a1t(t,e,r):qh(t)?c1t(t,e,r):Hh(t)?l1t(t,e,r):fce(t)?n1t(t,e,r):k1(t)?i1t(t,e,r):uce(t)?o1t(t,e,r):ib(t)?s1t(t,e,r):mi(r)}s(KH,"Record");function JH(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(JH,"RecordPattern");function zke(t){let e=JH(t);return e===XA?vd():e===JA?jp():vd({pattern:e})}s(zke,"RecordKey");function XH(t){return t.patternProperties[JH(t)]}s(XH,"RecordValue");function u1t(t,e){return e.parameters=O6(t,e.parameters),e.returns=jh(t,e.returns),e}s(u1t,"FromConstructor");function d1t(t,e){return e.parameters=O6(t,e.parameters),e.returns=jh(t,e.returns),e}s(d1t,"FromFunction");function f1t(t,e){return e.allOf=O6(t,e.allOf),e}s(f1t,"FromIntersect");function p1t(t,e){return e.anyOf=O6(t,e.anyOf),e}s(p1t,"FromUnion");function m1t(t,e){return ec(e.items)||(e.items=O6(t,e.items)),e}s(m1t,"FromTuple");function h1t(t,e){return e.items=jh(t,e.items),e}s(h1t,"FromArray");function g1t(t,e){return e.items=jh(t,e.items),e}s(g1t,"FromAsyncIterator");function A1t(t,e){return e.items=jh(t,e.items),e}s(A1t,"FromIterator");function y1t(t,e){return e.item=jh(t,e.item),e}s(y1t,"FromPromise");function C1t(t,e){let r=b1t(t,e.properties);return{...e,..._o(r)}}s(C1t,"FromObject");function E1t(t,e){let r=jh(t,zke(e)),n=jh(t,XH(e)),i=KH(r,n);return{...e,...i}}s(E1t,"FromRecord");function v1t(t,e){return e.index in t?t[e.index]:Gh()}s(v1t,"FromArgument");function x1t(t,e){let r=$k(e),n=uf(e),i=jh(t,e);return r&&n?YH(i):r&&!n?ff(i):!r&&n?Mu(i):i}s(x1t,"FromProperty");function b1t(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:x1t(t,e[n])}),{})}s(b1t,"FromProperties");function O6(t,e){return e.map(r=>jh(t,r))}s(O6,"FromTypes");function jh(t,e){return Qh(e)?u1t(t,e):Uh(e)?d1t(t,e):va(e)?f1t(t,e):no(e)?p1t(t,e):b0(e)?m1t(t,e):Fh(e)?h1t(t,e):y_(e)?g1t(t,e):E_(e)?A1t(t,e):v_(e)?y1t(t,e):tc(e)?C1t(t,e):x_(e)?E1t(t,e):dce(e)?v1t(t,e):e}s(jh,"FromType");function Yke(t,e){return jh(e,jk(t))}s(Yke,"Instantiate");d();function Kke(t){return it({[et]:"Integer",type:"integer"},t)}s(Kke,"Integer");d();d();d();function I1t(t,e,r){return{[t]:Vh(zi(t),e,Ds(r))}}s(I1t,"MappedIntrinsicPropertyKey");function T1t(t,e,r){return t.reduce((i,o)=>({...i,...I1t(o,e,r)}),{})}s(T1t,"MappedIntrinsicPropertyKeys");function w1t(t,e,r){return T1t(t.keys,e,r)}s(w1t,"MappedIntrinsicProperties");function Jke(t,e,r){let n=w1t(t,e,r);return uo(n)}s(Jke,"IntrinsicFromMappedKey");function _1t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(_1t,"ApplyUncapitalize");function S1t(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(S1t,"ApplyCapitalize");function R1t(t){return t.toUpperCase()}s(R1t,"ApplyUppercase");function k1t(t){return t.toLowerCase()}s(k1t,"ApplyLowercase");function P1t(t,e,r){let n=e4(t.pattern);if(!b_(n))return{...t,pattern:Xke(t.pattern,e)};let a=[...N6(n)].map(u=>zi(u)),c=Zke(a,e),l=wo(c);return FH([l],r)}s(P1t,"FromTemplateLiteral");function Xke(t,e){return typeof t=="string"?e==="Uncapitalize"?_1t(t):e==="Capitalize"?S1t(t):e==="Uppercase"?R1t(t):e==="Lowercase"?k1t(t):t:t.toString()}s(Xke,"FromLiteralValue");function Zke(t,e){return t.map(r=>Vh(r,e))}s(Zke,"FromRest");function Vh(t,e,r={}){return v0(t)?Jke(t,e,r):x0(t)?P1t(t,e,r):no(t)?wo(Zke(t.anyOf,e),r):E0(t)?zi(Xke(t.const,e),r):it(t,r)}s(Vh,"Intrinsic");function e4e(t,e={}){return Vh(t,"Capitalize",e)}s(e4e,"Capitalize");d();function t4e(t,e={}){return Vh(t,"Lowercase",e)}s(t4e,"Lowercase");d();function r4e(t,e={}){return Vh(t,"Uncapitalize",e)}s(r4e,"Uncapitalize");d();function n4e(t,e={}){return Vh(t,"Uppercase",e)}s(n4e,"Uppercase");d();d();d();d();d();function B1t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=lb(t[i],e,Ds(r));return n}s(B1t,"FromProperties");function D1t(t,e,r){return B1t(t.properties,e,r)}s(D1t,"FromMappedResult");function i4e(t,e,r){let n=D1t(t,e,r);return uo(n)}s(i4e,"OmitFromMappedResult");function N1t(t,e){return t.map(r=>Nce(r,e))}s(N1t,"FromIntersect");function L1t(t,e){return t.map(r=>Nce(r,e))}s(L1t,"FromUnion");function M1t(t,e){let{[e]:r,...n}=t;return n}s(M1t,"FromProperty");function F1t(t,e){return e.reduce((r,n)=>M1t(r,n),t)}s(F1t,"FromProperties");function O1t(t,e){let r=xa(t,[oa,"$id","required","properties"]),n=F1t(t.properties,e);return _o(n,r)}s(O1t,"FromObject");function Q1t(t){let e=t.reduce((r,n)=>BH(n)?[...r,zi(n)]:r,[]);return wo(e)}s(Q1t,"UnionFromPropertyKeys");function Nce(t,e){return va(t)?Fu(N1t(t.allOf,e)):no(t)?wo(L1t(t.anyOf,e)):tc(t)?O1t(t,e):_o({})}s(Nce,"OmitResolve");function lb(t,e,r){let n=Za(e)?Q1t(e):e,i=sa(e)?df(e):e,o=Da(t),a=Da(e);return Ls(t)?i4e(t,i,r):v0(e)?o4e(t,e,r):o&&a?Cs("Omit",[t,n],r):!o&&a?Cs("Omit",[t,n],r):o&&!a?Cs("Omit",[t,n],r):it({...Nce(t,i),...r})}s(lb,"Omit");function U1t(t,e,r){return{[e]:lb(t,[e],Ds(r))}}s(U1t,"FromPropertyKey");function q1t(t,e,r){return e.reduce((n,i)=>({...n,...U1t(t,i,r)}),{})}s(q1t,"FromPropertyKeys");function H1t(t,e,r){return q1t(t,e.keys,r)}s(H1t,"FromMappedKey");function o4e(t,e,r){let n=H1t(t,e,r);return uo(n)}s(o4e,"OmitFromMappedKey");d();d();d();function W1t(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=ub(t[i],e,Ds(r));return n}s(W1t,"FromProperties");function G1t(t,e,r){return W1t(t.properties,e,r)}s(G1t,"FromMappedResult");function s4e(t,e,r){let n=G1t(t,e,r);return uo(n)}s(s4e,"PickFromMappedResult");function j1t(t,e){return t.map(r=>Lce(r,e))}s(j1t,"FromIntersect");function V1t(t,e){return t.map(r=>Lce(r,e))}s(V1t,"FromUnion");function $1t(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s($1t,"FromProperties");function z1t(t,e){let r=xa(t,[oa,"$id","required","properties"]),n=$1t(t.properties,e);return _o(n,r)}s(z1t,"FromObject");function Y1t(t){let e=t.reduce((r,n)=>BH(n)?[...r,zi(n)]:r,[]);return wo(e)}s(Y1t,"UnionFromPropertyKeys");function Lce(t,e){return va(t)?Fu(j1t(t.allOf,e)):no(t)?wo(V1t(t.anyOf,e)):tc(t)?z1t(t,e):_o({})}s(Lce,"PickResolve");function ub(t,e,r){let n=Za(e)?Y1t(e):e,i=sa(e)?df(e):e,o=Da(t),a=Da(e);return Ls(t)?s4e(t,i,r):v0(e)?a4e(t,e,r):o&&a?Cs("Pick",[t,n],r):!o&&a?Cs("Pick",[t,n],r):o&&!a?Cs("Pick",[t,n],r):it({...Lce(t,i),...r})}s(ub,"Pick");function K1t(t,e,r){return{[e]:ub(t,[e],Ds(r))}}s(K1t,"FromPropertyKey");function J1t(t,e,r){return e.reduce((n,i)=>({...n,...K1t(t,i,r)}),{})}s(J1t,"FromPropertyKeys");function X1t(t,e,r){return J1t(t,e.keys,r)}s(X1t,"FromMappedKey");function a4e(t,e,r){let n=X1t(t,e,r);return uo(n)}s(a4e,"PickFromMappedKey");d();d();function Z1t(t,e){return Cs("Partial",[Cs(t,e)])}s(Z1t,"FromComputed");function eEt(t){return Cs("Partial",[zp(t)])}s(eEt,"FromRef");function tEt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Mu(t[r]);return e}s(tEt,"FromProperties");function rEt(t){let e=xa(t,[oa,"$id","required","properties"]),r=tEt(t.properties);return _o(r,e)}s(rEt,"FromObject");function c4e(t){return t.map(e=>l4e(e))}s(c4e,"FromRest");function l4e(t){return Oh(t)?Z1t(t.target,t.parameters):Da(t)?eEt(t.$ref):va(t)?Fu(c4e(t.allOf)):no(t)?wo(c4e(t.anyOf)):tc(t)?rEt(t):C_(t)||R1(t)||qh(t)||E0(t)||_6(t)||Hh(t)||k1(t)||S6(t)||P1(t)?t:_o({})}s(l4e,"PartialResolve");function u4(t,e){return Ls(t)?u4e(t,e):it({...l4e(t),...e})}s(u4,"Partial");function nEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=u4(t[n],Ds(e));return r}s(nEt,"FromProperties");function iEt(t,e){return nEt(t.properties,e)}s(iEt,"FromMappedResult");function u4e(t,e){let r=iEt(t,e);return uo(r)}s(u4e,"PartialFromMappedResult");d();d();function oEt(t,e){return Cs("Required",[Cs(t,e)])}s(oEt,"FromComputed");function sEt(t){return Cs("Required",[zp(t)])}s(sEt,"FromRef");function aEt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=xa(t[r],[Zl]);return e}s(aEt,"FromProperties");function cEt(t){let e=xa(t,[oa,"$id","required","properties"]),r=aEt(t.properties);return _o(r,e)}s(cEt,"FromObject");function d4e(t){return t.map(e=>f4e(e))}s(d4e,"FromRest");function f4e(t){return Oh(t)?oEt(t.target,t.parameters):Da(t)?sEt(t.$ref):va(t)?Fu(d4e(t.allOf)):no(t)?wo(d4e(t.anyOf)):tc(t)?cEt(t):C_(t)||R1(t)||qh(t)||E0(t)||_6(t)||Hh(t)||k1(t)||S6(t)||P1(t)?t:_o({})}s(f4e,"RequiredResolve");function d4(t,e){return Ls(t)?p4e(t,e):it({...f4e(t),...e})}s(d4,"Required");function lEt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=d4(t[n],e);return r}s(lEt,"FromProperties");function uEt(t,e){return lEt(t.properties,e)}s(uEt,"FromMappedResult");function p4e(t,e){let r=uEt(t,e);return uo(r)}s(p4e,"RequiredFromMappedResult");function dEt(t,e){return e.map(r=>Da(r)?Mce(t,r.$ref):I0(t,r))}s(dEt,"DereferenceParameters");function Mce(t,e){return e in t?Da(t[e])?Mce(t,t[e].$ref):I0(t,t[e]):mi()}s(Mce,"Dereference");function fEt(t){return i4(t[0])}s(fEt,"FromAwaited");function pEt(t){return ab(t[0],t[1])}s(pEt,"FromIndex");function mEt(t){return o4(t[0])}s(mEt,"FromKeyOf");function hEt(t){return u4(t[0])}s(hEt,"FromPartial");function gEt(t){return lb(t[0],t[1])}s(gEt,"FromOmit");function AEt(t){return ub(t[0],t[1])}s(AEt,"FromPick");function yEt(t){return d4(t[0])}s(yEt,"FromRequired");function CEt(t,e,r){let n=dEt(t,r);return e==="Awaited"?fEt(n):e==="Index"?pEt(n):e==="KeyOf"?mEt(n):e==="Partial"?hEt(n):e==="Omit"?gEt(n):e==="Pick"?AEt(n):e==="Required"?yEt(n):mi()}s(CEt,"FromComputed");function EEt(t,e){return Kk(I0(t,e))}s(EEt,"FromArray");function vEt(t,e){return Jk(I0(t,e))}s(vEt,"FromAsyncIterator");function xEt(t,e,r){return Xk(Q6(t,e),I0(t,r))}s(xEt,"FromConstructor");function bEt(t,e,r){return ZA(Q6(t,e),I0(t,r))}s(bEt,"FromFunction");function IEt(t,e){return Fu(Q6(t,e))}s(IEt,"FromIntersect");function TEt(t,e){return n4(I0(t,e))}s(TEt,"FromIterator");function wEt(t,e){return _o(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:I0(t,e[n])}),{}))}s(wEt,"FromObject");function _Et(t,e){let[r,n]=[I0(t,XH(e)),JH(e)],i=jk(e);return i.patternProperties[n]=r,i}s(_Et,"FromRecord");function SEt(t,e){return Da(e)?{...Mce(t,e.$ref),[oa]:e[oa]}:e}s(SEt,"FromTransform");function REt(t,e){return Vp(Q6(t,e))}s(REt,"FromTuple");function kEt(t,e){return wo(Q6(t,e))}s(kEt,"FromUnion");function Q6(t,e){return e.map(r=>I0(t,r))}s(Q6,"FromTypes");function I0(t,e){return uf(e)?it(I0(t,xa(e,[Zl])),e):$k(e)?it(I0(t,xa(e,[Mh])),e):To(e)?it(SEt(t,e),e):Fh(e)?it(EEt(t,e.items),e):y_(e)?it(vEt(t,e.items),e):Oh(e)?it(CEt(t,e.target,e.parameters)):Qh(e)?it(xEt(t,e.parameters,e.returns),e):Uh(e)?it(bEt(t,e.parameters,e.returns),e):va(e)?it(IEt(t,e.allOf),e):E_(e)?it(TEt(t,e.items),e):tc(e)?it(wEt(t,e.properties),e):x_(e)?it(_Et(t,e)):b0(e)?it(REt(t,e.items||[]),e):no(e)?it(kEt(t,e.anyOf),e):e}s(I0,"FromType");function PEt(t,e){return e in t?I0(t,t[e]):mi()}s(PEt,"ComputeType");function m4e(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:PEt(t,r)}),{})}s(m4e,"ComputeModuleProperties");var Fce=class{static{s(this,"TModule")}constructor(e){let r=m4e(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:it(this.$defs[e],r)};return it({[et]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function h4e(t){return new Fce(t)}s(h4e,"Module");d();function g4e(t,e){return it({[et]:"Not",not:t},e)}s(g4e,"Not");d();function A4e(t,e){return Uh(t)?Vp(t.parameters,e):mi()}s(A4e,"Parameters");d();var BEt=0;function y4e(t,e={}){ec(e.$id)&&(e.$id=`T${BEt++}`);let r=jk(t({[et]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,it({[Gp]:"Recursive",...r},e)}s(y4e,"Recursive");d();function C4e(t,e){let r=as(t)?new globalThis.RegExp(t):t;return it({[et]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(C4e,"RegExp");d();function DEt(t){return va(t)?t.allOf:no(t)?t.anyOf:b0(t)?t.items??[]:[]}s(DEt,"RestResolve");function E4e(t){return DEt(t)}s(E4e,"Rest");d();function v4e(t,e){return Uh(t)?it(t.returns,e):mi(e)}s(v4e,"ReturnType");d();var Oce=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new Qce(this.schema,e)}},Qce=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[oa].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[oa].Decode(a)),"Decode")};return{...r,[oa]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[oa]:n}}Encode(e){return To(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function x4e(t){return new Oce(t)}s(x4e,"Transform");d();function b4e(t={}){return it({[et]:t[et]??"Unsafe"},t)}s(b4e,"Unsafe");d();function I4e(t){return it({[et]:"Void",type:"void"},t)}s(I4e,"Void");d();var Uce={};ra(Uce,{Any:()=>sb,Argument:()=>ake,Array:()=>Kk,AsyncIterator:()=>Jk,Awaited:()=>i4,BigInt:()=>r4,Boolean:()=>MH,Capitalize:()=>e4e,Composite:()=>wke,Const:()=>_ke,Constructor:()=>Xk,ConstructorParameters:()=>Ske,Date:()=>qH,Enum:()=>Rke,Exclude:()=>c4,Extends:()=>a4,Extract:()=>l4,Function:()=>ZA,Index:()=>ab,InstanceType:()=>$ke,Instantiate:()=>Yke,Integer:()=>Kke,Intersect:()=>Fu,Iterator:()=>n4,KeyOf:()=>o4,Literal:()=>zi,Lowercase:()=>t4e,Mapped:()=>Eke,Module:()=>h4e,Never:()=>mi,Not:()=>g4e,Null:()=>HH,Number:()=>jp,Object:()=>_o,Omit:()=>lb,Optional:()=>Mu,Parameters:()=>A4e,Partial:()=>u4,Pick:()=>ub,Promise:()=>QH,Readonly:()=>ff,ReadonlyOptional:()=>YH,Record:()=>KH,Recursive:()=>y4e,Ref:()=>zp,RegExp:()=>C4e,Required:()=>d4,Rest:()=>E4e,ReturnType:()=>v4e,String:()=>vd,Symbol:()=>WH,TemplateLiteral:()=>FH,Transform:()=>x4e,Tuple:()=>Vp,Uint8Array:()=>jH,Uncapitalize:()=>r4e,Undefined:()=>GH,Union:()=>wo,Unknown:()=>Gh,Unsafe:()=>b4e,Uppercase:()=>n4e,Void:()=>I4e});d();var I=Uce;d();d();function NEt(t){switch(t.errorType){case Xe.ArrayContains:return"Expected array to contain at least one matching value";case Xe.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Xe.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Xe.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Xe.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Xe.ArrayUniqueItems:return"Expected array elements to be unique";case Xe.Array:return"Expected array";case Xe.AsyncIterator:return"Expected AsyncIterator";case Xe.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Xe.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Xe.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Xe.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Xe.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Xe.BigInt:return"Expected bigint";case Xe.Boolean:return"Expected boolean";case Xe.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Xe.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Xe.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Xe.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Xe.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Xe.Date:return"Expected Date";case Xe.Function:return"Expected function";case Xe.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Xe.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Xe.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Xe.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Xe.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Xe.Integer:return"Expected integer";case Xe.IntersectUnevaluatedProperties:return"Unexpected property";case Xe.Intersect:return"Expected all values to match";case Xe.Iterator:return"Expected Iterator";case Xe.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Xe.Never:return"Never";case Xe.Not:return"Value should not match";case Xe.Null:return"Expected null";case Xe.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Xe.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Xe.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Xe.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Xe.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Xe.Number:return"Expected number";case Xe.Object:return"Expected object";case Xe.ObjectAdditionalProperties:return"Unexpected property";case Xe.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Xe.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Xe.ObjectRequiredProperty:return"Expected required property";case Xe.Promise:return"Expected Promise";case Xe.RegExp:return"Expected string to match regular expression";case Xe.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Xe.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Xe.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Xe.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Xe.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Xe.String:return"Expected string";case Xe.Symbol:return"Expected symbol";case Xe.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Xe.Tuple:return"Expected tuple";case Xe.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Xe.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Xe.Uint8Array:return"Expected Uint8Array";case Xe.Undefined:return"Expected undefined";case Xe.Union:return"Expected union value";case Xe.Void:return"Expected void";case Xe.Kind:return`Expected kind '${t.schema[et]}'`;default:return"Unknown error type"}}s(NEt,"DefaultErrorFunction");var LEt=NEt;function T4e(){return LEt}s(T4e,"GetErrorFunction");d();var qce=class extends bn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function MEt(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new qce(t);return fo(r,e)}s(MEt,"Resolve");function yl(t,e){return!ro(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(yl,"Pushref");function fo(t,e){return t[et]==="This"||t[et]==="Ref"?MEt(t,e):t}s(fo,"Deref");d();var Hce=class extends bn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},T0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(T0||(T0={}));var f4=BigInt("14695981039346656037"),[FEt,OEt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],QEt=Array.from({length:256}).map((t,e)=>BigInt(e)),w4e=new Float64Array(1),_4e=new DataView(w4e.buffer),S4e=new Uint8Array(w4e.buffer);function*UEt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(UEt,"NumberToBytes");function qEt(t){Qu(T0.Array);for(let e of t)p4(e)}s(qEt,"ArrayType");function HEt(t){Qu(T0.Boolean),Qu(t?1:0)}s(HEt,"BooleanType");function WEt(t){Qu(T0.BigInt),_4e.setBigInt64(0,t);for(let e of S4e)Qu(e)}s(WEt,"BigIntType");function GEt(t){Qu(T0.Date),p4(t.getTime())}s(GEt,"DateType");function jEt(t){Qu(T0.Null)}s(jEt,"NullType");function VEt(t){Qu(T0.Number),_4e.setFloat64(0,t);for(let e of S4e)Qu(e)}s(VEt,"NumberType");function $Et(t){Qu(T0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())p4(e),p4(t[e])}s($Et,"ObjectType");function zEt(t){Qu(T0.String);for(let e=0;e<t.length;e++)for(let r of UEt(t.charCodeAt(e)))Qu(r)}s(zEt,"StringType");function YEt(t){Qu(T0.Symbol),p4(t.description)}s(YEt,"SymbolType");function KEt(t){Qu(T0.Uint8Array);for(let e=0;e<t.length;e++)Qu(t[e])}s(KEt,"Uint8ArrayType");function JEt(t){return Qu(T0.Undefined)}s(JEt,"UndefinedType");function p4(t){if(xn(t))return qEt(t);if(KA(t))return HEt(t);if(Xl(t))return WEt(t);if(Cd(t))return GEt(t);if(_1(t))return jEt(t);if(Vr(t))return VEt(t);if(Ei(t))return $Et(t);if(ro(t))return zEt(t);if(S1(t))return YEt(t);if(Vk(t))return KEt(t);if(Ns(t))return JEt(t);throw new Hce(t)}s(p4,"Visit");function Qu(t){f4=f4^QEt[t],f4=f4*FEt%OEt}s(Qu,"FNV1A64");function db(t){return f4=BigInt("14695981039346656037"),p4(t),f4}s(db,"Hash");d();var Wce=class extends bn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function XEt(t){return t[et]==="Any"||t[et]==="Unknown"}s(XEt,"IsAnyOrUnknown");function Mi(t){return t!==void 0}s(Mi,"IsDefined");function ZEt(t,e,r){return!0}s(ZEt,"FromAny");function evt(t,e,r){return!0}s(evt,"FromArgument");function tvt(t,e,r){if(!xn(r)||Mi(t.minItems)&&!(r.length>=t.minItems)||Mi(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>Cl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let c=db(a);if(o.has(c))return!1;o.add(c)}return!0}())return!1;if(!(Mi(t.contains)||Vr(t.minContains)||Vr(t.maxContains)))return!0;let n=Mi(t.contains)?t.contains:mi(),i=r.reduce((o,a)=>Cl(n,e,a)?o+1:o,0);return!(i===0||Vr(t.minContains)&&i<t.minContains||Vr(t.maxContains)&&i>t.maxContains)}s(tvt,"FromArray");function rvt(t,e,r){return SH(r)}s(rvt,"FromAsyncIterator");function nvt(t,e,r){return!(!Xl(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(nvt,"FromBigInt");function ivt(t,e,r){return KA(r)}s(ivt,"FromBoolean");function ovt(t,e,r){return Cl(t.returns,e,r.prototype)}s(ovt,"FromConstructor");function svt(t,e,r){return!(!Cd(r)||Mi(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Mi(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Mi(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Mi(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Mi(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(svt,"FromDate");function avt(t,e,r){return nb(r)}s(avt,"FromFunction");function cvt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cl(i,[...e,...n],r)}s(cvt,"FromImport");function lvt(t,e,r){return!(!PH(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(lvt,"FromInteger");function uvt(t,e,r){let n=t.allOf.every(i=>Cl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(N1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(sa(t.unevaluatedProperties)){let i=new RegExp(N1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||Cl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(uvt,"FromIntersect");function dvt(t,e,r){return RH(r)}s(dvt,"FromIterator");function fvt(t,e,r){return r===t.const}s(fvt,"FromLiteral");function pvt(t,e,r){return!1}s(pvt,"FromNever");function mvt(t,e,r){return!Cl(t.not,e,r)}s(mvt,"FromNot");function hvt(t,e,r){return _1(r)}s(hvt,"FromNull");function gvt(t,e,r){return!(!ys.IsNumberLike(r)||Mi(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Mi(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Mi(t.minimum)&&!(r>=t.minimum)||Mi(t.maximum)&&!(r<=t.maximum)||Mi(t.multipleOf)&&r%t.multipleOf!==0)}s(gvt,"FromNumber");function Avt(t,e,r){if(!ys.IsObjectLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Cl(o,e,r[i])||(L1(o)||XEt(o))&&!(i in r))return!1}else if(ys.IsExactOptionalProperty(r,i)&&!Cl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||Cl(t.additionalProperties,e,r[o])):!0}s(Avt,"FromObject");function yvt(t,e,r){return kH(r)}s(yvt,"FromPromise");function Cvt(t,e,r){if(!ys.IsRecordLike(r)||Mi(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Mi(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,f])=>o.test(u)?Cl(i,e,f):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,f])=>o.test(u)?!0:Cl(t.additionalProperties,e,f)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&c&&l}s(Cvt,"FromRecord");function Evt(t,e,r){return Cl(fo(t,e),e,r)}s(Evt,"FromRef");function vvt(t,e,r){let n=new RegExp(t.source,t.flags);return Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(vvt,"FromRegExp");function xvt(t,e,r){return!ro(r)||Mi(t.minLength)&&!(r.length>=t.minLength)||Mi(t.maxLength)&&!(r.length<=t.maxLength)||Mi(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Mi(t.format)?Wh.Has(t.format)?Wh.Get(t.format)(r):!1:!0}s(xvt,"FromString");function bvt(t,e,r){return S1(r)}s(bvt,"FromSymbol");function Ivt(t,e,r){return ro(r)&&new RegExp(t.pattern).test(r)}s(Ivt,"FromTemplateLiteral");function Tvt(t,e,r){return Cl(fo(t,e),e,r)}s(Tvt,"FromThis");function wvt(t,e,r){if(!xn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!Cl(t.items[n],e,r[n]))return!1;return!0}s(wvt,"FromTuple");function _vt(t,e,r){return Ns(r)}s(_vt,"FromUndefined");function Svt(t,e,r){return t.anyOf.some(n=>Cl(n,e,r))}s(Svt,"FromUnion");function Rvt(t,e,r){return!(!Vk(r)||Mi(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Mi(t.minByteLength)&&!(r.length>=t.minByteLength))}s(Rvt,"FromUint8Array");function kvt(t,e,r){return!0}s(kvt,"FromUnknown");function Pvt(t,e,r){return ys.IsVoidLike(r)}s(Pvt,"FromVoid");function Bvt(t,e,r){return Ed.Has(t[et])?Ed.Get(t[et])(t,r):!1}s(Bvt,"FromKind");function Cl(t,e,r){let n=Mi(t.$id)?yl(t,e):e,i=t;switch(i[et]){case"Any":return ZEt(i,n,r);case"Argument":return evt(i,n,r);case"Array":return tvt(i,n,r);case"AsyncIterator":return rvt(i,n,r);case"BigInt":return nvt(i,n,r);case"Boolean":return ivt(i,n,r);case"Constructor":return ovt(i,n,r);case"Date":return svt(i,n,r);case"Function":return avt(i,n,r);case"Import":return cvt(i,n,r);case"Integer":return lvt(i,n,r);case"Intersect":return uvt(i,n,r);case"Iterator":return dvt(i,n,r);case"Literal":return fvt(i,n,r);case"Never":return pvt(i,n,r);case"Not":return mvt(i,n,r);case"Null":return hvt(i,n,r);case"Number":return gvt(i,n,r);case"Object":return Avt(i,n,r);case"Promise":return yvt(i,n,r);case"Record":return Cvt(i,n,r);case"Ref":return Evt(i,n,r);case"RegExp":return vvt(i,n,r);case"String":return xvt(i,n,r);case"Symbol":return bvt(i,n,r);case"TemplateLiteral":return Ivt(i,n,r);case"This":return Tvt(i,n,r);case"Tuple":return wvt(i,n,r);case"Undefined":return _vt(i,n,r);case"Union":return Svt(i,n,r);case"Uint8Array":return Rvt(i,n,r);case"Unknown":return kvt(i,n,r);case"Void":return Pvt(i,n,r);default:if(!Ed.Has(i[et]))throw new Wce(i);return Bvt(i,n,r)}}s(Cl,"Visit");function Ii(...t){return t.length===3?Cl(t[0],t[1],t[2]):Cl(t[0],[],t[1])}s(Ii,"Check");var Xe;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Xe||(Xe={}));var Gce=class extends bn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function M1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(M1,"EscapeKey");function Fi(t){return t!==void 0}s(Fi,"IsDefined");var fb=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function tr(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:T4e()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(tr,"Create");function*Dvt(t,e,r,n){}s(Dvt,"FromAny");function*Nvt(t,e,r,n){}s(Nvt,"FromArgument");function*Lvt(t,e,r,n){if(!xn(n))return yield tr(Xe.Array,t,r,n);Fi(t.minItems)&&!(n.length>=t.minItems)&&(yield tr(Xe.ArrayMinItems,t,r,n)),Fi(t.maxItems)&&!(n.length<=t.maxItems)&&(yield tr(Xe.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*El(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let c of n){let l=db(c);if(a.has(l))return!1;a.add(l)}return!0}()&&(yield tr(Xe.ArrayUniqueItems,t,r,n)),!(Fi(t.contains)||Fi(t.minContains)||Fi(t.maxContains)))return;let i=Fi(t.contains)?t.contains:mi(),o=n.reduce((a,c,l)=>El(i,e,`${r}${l}`,c).next().done===!0?a+1:a,0);o===0&&(yield tr(Xe.ArrayContains,t,r,n)),Vr(t.minContains)&&o<t.minContains&&(yield tr(Xe.ArrayMinContains,t,r,n)),Vr(t.maxContains)&&o>t.maxContains&&(yield tr(Xe.ArrayMaxContains,t,r,n))}s(Lvt,"FromArray");function*Mvt(t,e,r,n){SH(n)||(yield tr(Xe.AsyncIterator,t,r,n))}s(Mvt,"FromAsyncIterator");function*Fvt(t,e,r,n){if(!Xl(n))return yield tr(Xe.BigInt,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.BigIntExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.BigIntExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.BigIntMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.BigIntMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield tr(Xe.BigIntMultipleOf,t,r,n))}s(Fvt,"FromBigInt");function*Ovt(t,e,r,n){KA(n)||(yield tr(Xe.Boolean,t,r,n))}s(Ovt,"FromBoolean");function*Qvt(t,e,r,n){yield*El(t.returns,e,r,n.prototype)}s(Qvt,"FromConstructor");function*Uvt(t,e,r,n){if(!Cd(n))return yield tr(Xe.Date,t,r,n);Fi(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield tr(Xe.DateExclusiveMaximumTimestamp,t,r,n)),Fi(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield tr(Xe.DateExclusiveMinimumTimestamp,t,r,n)),Fi(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield tr(Xe.DateMaximumTimestamp,t,r,n)),Fi(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield tr(Xe.DateMinimumTimestamp,t,r,n)),Fi(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield tr(Xe.DateMultipleOfTimestamp,t,r,n))}s(Uvt,"FromDate");function*qvt(t,e,r,n){nb(n)||(yield tr(Xe.Function,t,r,n))}s(qvt,"FromFunction");function*Hvt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*El(o,[...e,...i],r,n)}s(Hvt,"FromImport");function*Wvt(t,e,r,n){if(!PH(n))return yield tr(Xe.Integer,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.IntegerExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.IntegerExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.IntegerMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.IntegerMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.IntegerMultipleOf,t,r,n))}s(Wvt,"FromInteger");function*Gvt(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of El(o,e,r,n))i=!0,yield a;if(i)return yield tr(Xe.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(N1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield tr(Xe.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(N1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let c=El(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}s(Gvt,"FromIntersect");function*jvt(t,e,r,n){RH(n)||(yield tr(Xe.Iterator,t,r,n))}s(jvt,"FromIterator");function*Vvt(t,e,r,n){n!==t.const&&(yield tr(Xe.Literal,t,r,n))}s(Vvt,"FromLiteral");function*$vt(t,e,r,n){yield tr(Xe.Never,t,r,n)}s($vt,"FromNever");function*zvt(t,e,r,n){El(t.not,e,r,n).next().done===!0&&(yield tr(Xe.Not,t,r,n))}s(zvt,"FromNot");function*Yvt(t,e,r,n){_1(n)||(yield tr(Xe.Null,t,r,n))}s(Yvt,"FromNull");function*Kvt(t,e,r,n){if(!ys.IsNumberLike(n))return yield tr(Xe.Number,t,r,n);Fi(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield tr(Xe.NumberExclusiveMaximum,t,r,n)),Fi(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield tr(Xe.NumberExclusiveMinimum,t,r,n)),Fi(t.maximum)&&!(n<=t.maximum)&&(yield tr(Xe.NumberMaximum,t,r,n)),Fi(t.minimum)&&!(n>=t.minimum)&&(yield tr(Xe.NumberMinimum,t,r,n)),Fi(t.multipleOf)&&n%t.multipleOf!==0&&(yield tr(Xe.NumberMultipleOf,t,r,n))}s(Kvt,"FromNumber");function*Jvt(t,e,r,n){if(!ys.IsObjectLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of i)a.includes(c)||(yield tr(Xe.ObjectRequiredProperty,t.properties[c],`${r}/${M1(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)o.includes(c)||(yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${M1(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)o.includes(c)||(yield*El(t.additionalProperties,e,`${r}/${M1(c)}`,n[c]));for(let c of o){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*El(l,e,`${r}/${M1(c)}`,n[c]),L1(t)&&!(c in n)&&(yield tr(Xe.ObjectRequiredProperty,l,`${r}/${M1(c)}`,void 0))):ys.IsExactOptionalProperty(n,c)&&(yield*El(l,e,`${r}/${M1(c)}`,n[c]))}}s(Jvt,"FromObject");function*Xvt(t,e,r,n){kH(n)||(yield tr(Xe.Promise,t,r,n))}s(Xvt,"FromPromise");function*Zvt(t,e,r,n){if(!ys.IsRecordLike(n))return yield tr(Xe.Object,t,r,n);Fi(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield tr(Xe.ObjectMinProperties,t,r,n)),Fi(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield tr(Xe.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*El(o,e,`${r}/${M1(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*El(t.additionalProperties,e,`${r}/${M1(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield tr(Xe.ObjectAdditionalProperties,t,`${r}/${M1(c)}`,l)}}s(Zvt,"FromRecord");function*ext(t,e,r,n){yield*El(fo(t,e),e,r,n)}s(ext,"FromRef");function*txt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);if(Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield tr(Xe.RegExp,t,r,n)}s(txt,"FromRegExp");function*rxt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);Fi(t.minLength)&&!(n.length>=t.minLength)&&(yield tr(Xe.StringMinLength,t,r,n)),Fi(t.maxLength)&&!(n.length<=t.maxLength)&&(yield tr(Xe.StringMaxLength,t,r,n)),ro(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))),ro(t.format)&&(Wh.Has(t.format)?Wh.Get(t.format)(n)||(yield tr(Xe.StringFormat,t,r,n)):yield tr(Xe.StringFormatUnknown,t,r,n))}s(rxt,"FromString");function*nxt(t,e,r,n){S1(n)||(yield tr(Xe.Symbol,t,r,n))}s(nxt,"FromSymbol");function*ixt(t,e,r,n){if(!ro(n))return yield tr(Xe.String,t,r,n);new RegExp(t.pattern).test(n)||(yield tr(Xe.StringPattern,t,r,n))}s(ixt,"FromTemplateLiteral");function*oxt(t,e,r,n){yield*El(fo(t,e),e,r,n)}s(oxt,"FromThis");function*sxt(t,e,r,n){if(!xn(n))return yield tr(Xe.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield tr(Xe.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield tr(Xe.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*El(t.items[i],e,`${r}/${i}`,n[i])}s(sxt,"FromTuple");function*axt(t,e,r,n){Ns(n)||(yield tr(Xe.Undefined,t,r,n))}s(axt,"FromUndefined");function*cxt(t,e,r,n){if(Ii(t,e,n))return;let i=t.anyOf.map(o=>new fb(El(o,e,r,n)));yield tr(Xe.Union,t,r,n,i)}s(cxt,"FromUnion");function*lxt(t,e,r,n){if(!Vk(n))return yield tr(Xe.Uint8Array,t,r,n);Fi(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield tr(Xe.Uint8ArrayMaxByteLength,t,r,n)),Fi(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield tr(Xe.Uint8ArrayMinByteLength,t,r,n))}s(lxt,"FromUint8Array");function*uxt(t,e,r,n){}s(uxt,"FromUnknown");function*dxt(t,e,r,n){ys.IsVoidLike(n)||(yield tr(Xe.Void,t,r,n))}s(dxt,"FromVoid");function*fxt(t,e,r,n){Ed.Get(t[et])(t,n)||(yield tr(Xe.Kind,t,r,n))}s(fxt,"FromKind");function*El(t,e,r,n){let i=Fi(t.$id)?[...e,t]:e,o=t;switch(o[et]){case"Any":return yield*Dvt(o,i,r,n);case"Argument":return yield*Nvt(o,i,r,n);case"Array":return yield*Lvt(o,i,r,n);case"AsyncIterator":return yield*Mvt(o,i,r,n);case"BigInt":return yield*Fvt(o,i,r,n);case"Boolean":return yield*Ovt(o,i,r,n);case"Constructor":return yield*Qvt(o,i,r,n);case"Date":return yield*Uvt(o,i,r,n);case"Function":return yield*qvt(o,i,r,n);case"Import":return yield*Hvt(o,i,r,n);case"Integer":return yield*Wvt(o,i,r,n);case"Intersect":return yield*Gvt(o,i,r,n);case"Iterator":return yield*jvt(o,i,r,n);case"Literal":return yield*Vvt(o,i,r,n);case"Never":return yield*$vt(o,i,r,n);case"Not":return yield*zvt(o,i,r,n);case"Null":return yield*Yvt(o,i,r,n);case"Number":return yield*Kvt(o,i,r,n);case"Object":return yield*Jvt(o,i,r,n);case"Promise":return yield*Xvt(o,i,r,n);case"Record":return yield*Zvt(o,i,r,n);case"Ref":return yield*ext(o,i,r,n);case"RegExp":return yield*txt(o,i,r,n);case"String":return yield*rxt(o,i,r,n);case"Symbol":return yield*nxt(o,i,r,n);case"TemplateLiteral":return yield*ixt(o,i,r,n);case"This":return yield*oxt(o,i,r,n);case"Tuple":return yield*sxt(o,i,r,n);case"Undefined":return yield*axt(o,i,r,n);case"Union":return yield*cxt(o,i,r,n);case"Uint8Array":return yield*lxt(o,i,r,n);case"Unknown":return yield*uxt(o,i,r,n);case"Void":return yield*dxt(o,i,r,n);default:if(!Ed.Has(o[et]))throw new Gce(t);return yield*fxt(o,i,r,n)}}s(El,"Visit");function ty(...t){let e=t.length===3?El(t[0],t[1],"",t[2]):El(t[0],[],"",t[1]);return new fb(e)}s(ty,"Errors");d();d();var m4=class extends bn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},jce=class extends bn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function aa(t,e,r){try{return To(t)?t[oa].Decode(r):r}catch(n){throw new jce(t,e,r,n)}}s(aa,"Default");function pxt(t,e,r,n){return xn(n)?aa(t,r,n.map((i,o)=>$h(t.items,e,`${r}/${o}`,i))):aa(t,r,n)}s(pxt,"FromArray");function mxt(t,e,r,n){if(!Ei(n)||C0(n))return aa(t,r,n);let i=UH(t),o=i.map(f=>f[0]),a={...n};for(let[f,p]of i)f in a&&(a[f]=$h(p,e,`${r}/${f}`,a[f]));if(!To(t.unevaluatedProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(mxt,"FromIntersect");function hxt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=$h(o,[...e,...i],r,n);return aa(t,r,a)}s(hxt,"FromImport");function gxt(t,e,r,n){return aa(t,r,$h(t.not,e,r,n))}s(gxt,"FromNot");function Axt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=pf(t),o={...n};for(let u of i)vn(o,u)&&(Ns(o[u])&&(!P1(t.properties[u])||ys.IsExactOptionalProperty(o,u))||(o[u]=$h(t.properties[u],e,`${r}/${u}`,o[u])));if(!sa(t.additionalProperties))return aa(t,r,o);let a=Object.getOwnPropertyNames(o),c=t.additionalProperties,l={...o};for(let u of a)i.includes(u)||(l[u]=aa(c,`${r}/${u}`,l[u]));return aa(t,r,l)}s(Axt,"FromObject");function yxt(t,e,r,n){if(!Ei(n))return aa(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let f of Object.getOwnPropertyNames(n))o.test(f)&&(a[f]=$h(t.patternProperties[i],e,`${r}/${f}`,a[f]));if(!sa(t.additionalProperties))return aa(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.test(f)||(u[f]=aa(l,`${r}/${f}`,u[f]));return aa(t,r,u)}s(yxt,"FromRecord");function Cxt(t,e,r,n){let i=fo(t,e);return aa(t,r,$h(i,e,r,n))}s(Cxt,"FromRef");function Ext(t,e,r,n){let i=fo(t,e);return aa(t,r,$h(i,e,r,n))}s(Ext,"FromThis");function vxt(t,e,r,n){return xn(n)&&xn(t.items)?aa(t,r,t.items.map((i,o)=>$h(i,e,`${r}/${o}`,n[o]))):aa(t,r,n)}s(vxt,"FromTuple");function xxt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=$h(i,e,r,n);return aa(t,r,o)}return aa(t,r,n)}s(xxt,"FromUnion");function $h(t,e,r,n){let i=yl(t,e),o=t;switch(t[et]){case"Array":return pxt(o,i,r,n);case"Import":return hxt(o,i,r,n);case"Intersect":return mxt(o,i,r,n);case"Not":return gxt(o,i,r,n);case"Object":return Axt(o,i,r,n);case"Record":return yxt(o,i,r,n);case"Ref":return Cxt(o,i,r,n);case"Symbol":return aa(o,r,n);case"This":return Ext(o,i,r,n);case"Tuple":return vxt(o,i,r,n);case"Union":return xxt(o,i,r,n);default:return aa(o,r,n)}}s($h,"Visit");function h4(t,e,r){return $h(t,e,"",r)}s(h4,"TransformDecode");d();var g4=class extends bn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},Vce=class extends bn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function eu(t,e,r){try{return To(t)?t[oa].Encode(r):r}catch(n){throw new Vce(t,e,r,n)}}s(eu,"Default");function bxt(t,e,r,n){let i=eu(t,r,n);return xn(i)?i.map((o,a)=>zh(t.items,e,`${r}/${a}`,o)):i}s(bxt,"FromArray");function Ixt(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=eu(t,r,n);return zh(o,[...e,...i],r,a)}s(Ixt,"FromImport");function Txt(t,e,r,n){let i=eu(t,r,n);if(!Ei(n)||C0(n))return i;let o=UH(t),a=o.map(p=>p[0]),c={...i};for(let[p,m]of o)p in c&&(c[p]=zh(m,e,`${r}/${p}`,c[p]));if(!To(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,f={...c};for(let p of l)a.includes(p)||(f[p]=eu(u,`${r}/${p}`,f[p]));return f}s(Txt,"FromIntersect");function wxt(t,e,r,n){return eu(t.not,r,eu(t,r,n))}s(wxt,"FromNot");function _xt(t,e,r,n){let i=eu(t,r,n);if(!Ei(i))return i;let o=pf(t),a={...i};for(let f of o)vn(a,f)&&(Ns(a[f])&&(!P1(t.properties[f])||ys.IsExactOptionalProperty(a,f))||(a[f]=zh(t.properties[f],e,`${r}/${f}`,a[f])));if(!sa(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let f of c)o.includes(f)||(u[f]=eu(l,`${r}/${f}`,u[f]));return u}s(_xt,"FromObject");function Sxt(t,e,r,n){let i=eu(t,r,n);if(!Ei(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),c={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(c[p]=zh(t.patternProperties[o],e,`${r}/${p}`,c[p]));if(!sa(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,f={...c};for(let p of l)a.test(p)||(f[p]=eu(u,`${r}/${p}`,f[p]));return f}s(Sxt,"FromRecord");function Rxt(t,e,r,n){let i=fo(t,e),o=zh(i,e,r,n);return eu(t,r,o)}s(Rxt,"FromRef");function kxt(t,e,r,n){let i=fo(t,e),o=zh(i,e,r,n);return eu(t,r,o)}s(kxt,"FromThis");function Pxt(t,e,r,n){let i=eu(t,r,n);return xn(t.items)?t.items.map((o,a)=>zh(o,e,`${r}/${a}`,i[a])):[]}s(Pxt,"FromTuple");function Bxt(t,e,r,n){for(let i of t.anyOf){if(!Ii(i,e,n))continue;let o=zh(i,e,r,n);return eu(t,r,o)}for(let i of t.anyOf){let o=zh(i,e,r,n);if(Ii(t,e,o))return eu(t,r,o)}return eu(t,r,n)}s(Bxt,"FromUnion");function zh(t,e,r,n){let i=yl(t,e),o=t;switch(t[et]){case"Array":return bxt(o,i,r,n);case"Import":return Ixt(o,i,r,n);case"Intersect":return Txt(o,i,r,n);case"Not":return wxt(o,i,r,n);case"Object":return _xt(o,i,r,n);case"Record":return Sxt(o,i,r,n);case"Ref":return Rxt(o,i,r,n);case"This":return kxt(o,i,r,n);case"Tuple":return Pxt(o,i,r,n);case"Union":return Bxt(o,i,r,n);default:return eu(o,r,n)}}s(zh,"Visit");function A4(t,e,r){return zh(t,e,"",r)}s(A4,"TransformEncode");d();function Dxt(t,e){return To(t)||Yc(t.items,e)}s(Dxt,"FromArray");function Nxt(t,e){return To(t)||Yc(t.items,e)}s(Nxt,"FromAsyncIterator");function Lxt(t,e){return To(t)||Yc(t.returns,e)||t.parameters.some(r=>Yc(r,e))}s(Lxt,"FromConstructor");function Mxt(t,e){return To(t)||Yc(t.returns,e)||t.parameters.some(r=>Yc(r,e))}s(Mxt,"FromFunction");function Fxt(t,e){return To(t)||To(t.unevaluatedProperties)||t.allOf.some(r=>Yc(r,e))}s(Fxt,"FromIntersect");function Oxt(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return To(t)||Yc(n,[...r,...e])}s(Oxt,"FromImport");function Qxt(t,e){return To(t)||Yc(t.items,e)}s(Qxt,"FromIterator");function Uxt(t,e){return To(t)||Yc(t.not,e)}s(Uxt,"FromNot");function qxt(t,e){return To(t)||Object.values(t.properties).some(r=>Yc(r,e))||sa(t.additionalProperties)&&Yc(t.additionalProperties,e)}s(qxt,"FromObject");function Hxt(t,e){return To(t)||Yc(t.item,e)}s(Hxt,"FromPromise");function Wxt(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return To(t)||Yc(n,e)||sa(t.additionalProperties)&&To(t.additionalProperties)}s(Wxt,"FromRecord");function Gxt(t,e){return To(t)?!0:Yc(fo(t,e),e)}s(Gxt,"FromRef");function jxt(t,e){return To(t)?!0:Yc(fo(t,e),e)}s(jxt,"FromThis");function Vxt(t,e){return To(t)||!Ns(t.items)&&t.items.some(r=>Yc(r,e))}s(Vxt,"FromTuple");function $xt(t,e){return To(t)||t.anyOf.some(r=>Yc(r,e))}s($xt,"FromUnion");function Yc(t,e){let r=yl(t,e),n=t;if(t.$id&&$ce.has(t.$id))return!1;switch(t.$id&&$ce.add(t.$id),t[et]){case"Array":return Dxt(n,r);case"AsyncIterator":return Nxt(n,r);case"Constructor":return Lxt(n,r);case"Function":return Mxt(n,r);case"Import":return Oxt(n,r);case"Intersect":return Fxt(n,r);case"Iterator":return Qxt(n,r);case"Not":return Uxt(n,r);case"Object":return qxt(n,r);case"Promise":return Hxt(n,r);case"Record":return Wxt(n,r);case"Ref":return Gxt(n,r);case"This":return jxt(n,r);case"Tuple":return Vxt(n,r);case"Union":return $xt(n,r);default:return To(t)}}s(Yc,"Visit");var $ce=new Set;function F1(t,e){return $ce.clear(),Yc(t,e)}s(F1,"HasTransform");var zce=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=F1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return ty(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new m4(this.schema,e,this.Errors(e).First());return this.hasTransform?h4(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?A4(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new g4(this.schema,e,this.Errors(e).First());return r}},O1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(O1||(O1={}));var ZH;(function(t){function e(o){return o.length===0?!1:O1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let c=o.charCodeAt(a);if(!(O1.IsAlpha(c)||O1.IsNumeric(c)||O1.DollarSign(c)||O1.IsUnderscore(c)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(ZH||(ZH={}));var Yce;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);O1.IsNumeric(o)||O1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(Yce||(Yce={}));var Kce;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(Kce||(Kce={}));var Jce=class extends bn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},eW=class extends bn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},w_;(function(t){function e(a,c,l){return ys.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${ZH.Encode(a,c)} !== undefined ? ${l} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return ys.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return ys.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return ys.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return ys.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(w_||(w_={}));var Fs;(function(t){function e(le){return le[et]==="Any"||le[et]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(le,Ue,ye){yield"true"}s(r,"FromAny");function*n(le,Ue,ye){yield"true"}s(n,"FromArgument");function*i(le,Ue,ye){yield`Array.isArray(${ye})`;let[nt,ee]=[Fe("value","any"),Fe("acc","number")];Vr(le.maxItems)&&(yield`${ye}.length <= ${le.maxItems}`),Vr(le.minItems)&&(yield`${ye}.length >= ${le.minItems}`);let oe=he(le.items,Ue,"value");if(yield`${ye}.every((${nt}) => ${oe})`,Ms(le.contains)||Vr(le.minContains)||Vr(le.maxContains)){let We=Ms(le.contains)?le.contains:mi(),De=he(We,Ue,"value"),xe=Vr(le.minContains)?[`(count >= ${le.minContains})`]:[],Ye=Vr(le.maxContains)?[`(count <= ${le.maxContains})`]:[],st=`const count = value.reduce((${ee}, ${nt}) => ${De} ? acc + 1 : acc, 0)`,yt=["(count > 0)",...xe,...Ye].join(" && ");yield`((${nt}) => { ${st}; return ${yt}})(${ye})`}le.uniqueItems===!0&&(yield`((${nt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(le,Ue,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(le,Ue,ye){yield`(typeof ${ye} === 'bigint')`,Xl(le.exclusiveMaximum)&&(yield`${ye} < BigInt(${le.exclusiveMaximum})`),Xl(le.exclusiveMinimum)&&(yield`${ye} > BigInt(${le.exclusiveMinimum})`),Xl(le.maximum)&&(yield`${ye} <= BigInt(${le.maximum})`),Xl(le.minimum)&&(yield`${ye} >= BigInt(${le.minimum})`),Xl(le.multipleOf)&&(yield`(${ye} % BigInt(${le.multipleOf})) === 0`)}s(a,"FromBigInt");function*c(le,Ue,ye){yield`(typeof ${ye} === 'boolean')`}s(c,"FromBoolean");function*l(le,Ue,ye){yield*ne(le.returns,Ue,`${ye}.prototype`)}s(l,"FromConstructor");function*u(le,Ue,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Vr(le.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${le.exclusiveMaximumTimestamp}`),Vr(le.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${le.exclusiveMinimumTimestamp}`),Vr(le.maximumTimestamp)&&(yield`${ye}.getTime() <= ${le.maximumTimestamp}`),Vr(le.minimumTimestamp)&&(yield`${ye}.getTime() >= ${le.minimumTimestamp}`),Vr(le.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${le.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*f(le,Ue,ye){yield`(typeof ${ye} === 'function')`}s(f,"FromFunction");function*p(le,Ue,ye){let nt=globalThis.Object.getOwnPropertyNames(le.$defs).reduce((ee,oe)=>[...ee,le.$defs[oe]],[]);yield*ne(zp(le.$ref),[...Ue,...nt],ye)}s(p,"FromImport");function*m(le,Ue,ye){yield`Number.isInteger(${ye})`,Vr(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),Vr(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),Vr(le.maximum)&&(yield`${ye} <= ${le.maximum}`),Vr(le.minimum)&&(yield`${ye} >= ${le.minimum}`),Vr(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(m,"FromInteger");function*h(le,Ue,ye){let nt=le.allOf.map(ee=>he(ee,Ue,ye)).join(" && ");if(le.unevaluatedProperties===!1){let ee=ke(`${new RegExp(N1(le))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.test(key))`;yield`(${nt} && ${oe})`}else if(Ms(le.unevaluatedProperties)){let ee=ke(`${new RegExp(N1(le))};`),oe=`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.test(key) || ${he(le.unevaluatedProperties,Ue,`${ye}[key]`)})`;yield`(${nt} && ${oe})`}else yield`(${nt})`}s(h,"FromIntersect");function*g(le,Ue,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(le,Ue,ye){typeof le.const=="number"||typeof le.const=="boolean"?yield`(${ye} === ${le.const})`:yield`(${ye} === '${Kce.Escape(le.const)}')`}s(y,"FromLiteral");function*E(le,Ue,ye){yield"false"}s(E,"FromNever");function*x(le,Ue,ye){yield`(!${he(le.not,Ue,ye)})`}s(x,"FromNot");function*b(le,Ue,ye){yield`(${ye} === null)`}s(b,"FromNull");function*_(le,Ue,ye){yield w_.IsNumberLike(ye),Vr(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),Vr(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),Vr(le.maximum)&&(yield`${ye} <= ${le.maximum}`),Vr(le.minimum)&&(yield`${ye} >= ${le.minimum}`),Vr(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(_,"FromNumber");function*k(le,Ue,ye){yield w_.IsObjectLike(ye),Vr(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),Vr(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let nt=Object.getOwnPropertyNames(le.properties);for(let ee of nt){let oe=ZH.Encode(ye,ee),We=le.properties[ee];if(le.required&&le.required.includes(ee))yield*ne(We,Ue,oe),(L1(We)||e(We))&&(yield`('${ee}' in ${ye})`);else{let De=he(We,Ue,oe);yield w_.IsExactOptionalProperty(ye,ee,De)}}if(le.additionalProperties===!1)if(le.required&&le.required.length===nt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${nt.length}`;else{let ee=`[${nt.map(oe=>`'${oe}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${ee}.includes(key))`}if(typeof le.additionalProperties=="object"){let ee=he(le.additionalProperties,Ue,`${ye}[key]`),oe=`[${nt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${oe}.includes(key) || ${ee}))`}}s(k,"FromObject");function*P(le,Ue,ye){yield`${ye} instanceof Promise`}s(P,"FromPromise");function*N(le,Ue,ye){yield w_.IsRecordLike(ye),Vr(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),Vr(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let[nt,ee]=Object.entries(le.patternProperties)[0],oe=ke(`${new RegExp(nt)}`),We=he(ee,Ue,"value"),De=Ms(le.additionalProperties)?he(le.additionalProperties,Ue,ye):le.additionalProperties===!1?"false":"true",xe=`(${oe}.test(key) ? ${We} : ${De})`;yield`(Object.entries(${ye}).every(([key, value]) => ${xe}))`}s(N,"FromRecord");function*M(le,Ue,ye){let nt=fo(le,Ue);if(me.functions.has(le.$ref))return yield`${Qe(le.$ref)}(${ye})`;yield*ne(nt,Ue,ye)}s(M,"FromRef");function*J(le,Ue,ye){let nt=ke(`${new RegExp(le.source,le.flags)};`);yield`(typeof ${ye} === 'string')`,Vr(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),Vr(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),yield`${nt}.test(${ye})`}s(J,"FromRegExp");function*pe(le,Ue,ye){yield`(typeof ${ye} === 'string')`,Vr(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),Vr(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),le.pattern!==void 0&&(yield`${ke(`${new RegExp(le.pattern)};`)}.test(${ye})`),le.format!==void 0&&(yield`format('${le.format}', ${ye})`)}s(pe,"FromString");function*Y(le,Ue,ye){yield`(typeof ${ye} === 'symbol')`}s(Y,"FromSymbol");function*G(le,Ue,ye){yield`(typeof ${ye} === 'string')`,yield`${ke(`${new RegExp(le.pattern)};`)}.test(${ye})`}s(G,"FromTemplateLiteral");function*H(le,Ue,ye){yield`${Qe(le.$ref)}(${ye})`}s(H,"FromThis");function*ce(le,Ue,ye){if(yield`Array.isArray(${ye})`,le.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${le.maxItems})`;for(let nt=0;nt<le.items.length;nt++)yield`${he(le.items[nt],Ue,`${ye}[${nt}]`)}`}s(ce,"FromTuple");function*ie(le,Ue,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*V(le,Ue,ye){yield`(${le.anyOf.map(ee=>he(ee,Ue,ye)).join(" || ")})`}s(V,"FromUnion");function*Q(le,Ue,ye){yield`${ye} instanceof Uint8Array`,Vr(le.maxByteLength)&&(yield`(${ye}.length <= ${le.maxByteLength})`),Vr(le.minByteLength)&&(yield`(${ye}.length >= ${le.minByteLength})`)}s(Q,"FromUint8Array");function*z(le,Ue,ye){yield"true"}s(z,"FromUnknown");function*re(le,Ue,ye){yield w_.IsVoidLike(ye)}s(re,"FromVoid");function*fe(le,Ue,ye){let nt=me.instances.size;me.instances.set(nt,le),yield`kind('${le[et]}', ${nt}, ${ye})`}s(fe,"FromKind");function*ne(le,Ue,ye,nt=!0){let ee=ro(le.$id)?[...Ue,le]:Ue,oe=le;if(nt&&ro(le.$id)){let We=Qe(le.$id);if(me.functions.has(We))return yield`${We}(${ye})`;{me.functions.set(We,"<deferred>");let De=tt(We,le,Ue,"value",!1);return me.functions.set(We,De),yield`${We}(${ye})`}}switch(oe[et]){case"Any":return yield*r(oe,ee,ye);case"Argument":return yield*n(oe,ee,ye);case"Array":return yield*i(oe,ee,ye);case"AsyncIterator":return yield*o(oe,ee,ye);case"BigInt":return yield*a(oe,ee,ye);case"Boolean":return yield*c(oe,ee,ye);case"Constructor":return yield*l(oe,ee,ye);case"Date":return yield*u(oe,ee,ye);case"Function":return yield*f(oe,ee,ye);case"Import":return yield*p(oe,ee,ye);case"Integer":return yield*m(oe,ee,ye);case"Intersect":return yield*h(oe,ee,ye);case"Iterator":return yield*g(oe,ee,ye);case"Literal":return yield*y(oe,ee,ye);case"Never":return yield*E(oe,ee,ye);case"Not":return yield*x(oe,ee,ye);case"Null":return yield*b(oe,ee,ye);case"Number":return yield*_(oe,ee,ye);case"Object":return yield*k(oe,ee,ye);case"Promise":return yield*P(oe,ee,ye);case"Record":return yield*N(oe,ee,ye);case"Ref":return yield*M(oe,ee,ye);case"RegExp":return yield*J(oe,ee,ye);case"String":return yield*pe(oe,ee,ye);case"Symbol":return yield*Y(oe,ee,ye);case"TemplateLiteral":return yield*G(oe,ee,ye);case"This":return yield*H(oe,ee,ye);case"Tuple":return yield*ce(oe,ee,ye);case"Undefined":return yield*ie(oe,ee,ye);case"Union":return yield*V(oe,ee,ye);case"Uint8Array":return yield*Q(oe,ee,ye);case"Unknown":return yield*z(oe,ee,ye);case"Void":return yield*re(oe,ee,ye);default:if(!Ed.Has(oe[et]))throw new Jce(le);return yield*fe(oe,ee,ye)}}s(ne,"Visit");let me={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(le,Ue,ye,nt=!0){return`(${[...ne(le,Ue,ye,nt)].join(" && ")})`}s(he,"CreateExpression");function Qe(le){return`check_${Yce.Encode(le)}`}s(Qe,"CreateFunctionName");function ke(le){let Ue=`local_${me.variables.size}`;return me.variables.set(Ue,`const ${Ue} = ${le}`),Ue}s(ke,"CreateVariable");function tt(le,Ue,ye,nt,ee=!0){let[oe,We]=[`
`,st=>"".padStart(st," ")],De=Fe("value","any"),xe=ht("boolean"),Ye=[...ne(Ue,ye,nt,ee)].map(st=>`${We(4)}${st}`).join(` &&${oe}`);return`function ${le}(${De})${xe} {${oe}${We(2)}return (${oe}${Ye}${oe}${We(2)})
}`}s(tt,"CreateFunction");function Fe(le,Ue){let ye=me.language==="typescript"?`: ${Ue}`:"";return`${le}${ye}`}s(Fe,"CreateParameter");function ht(le){return me.language==="typescript"?`: ${le}`:""}s(ht,"CreateReturns");function St(le,Ue,ye){let nt=tt("check",le,Ue,"value"),ee=Fe("value","any"),oe=ht("boolean"),We=[...me.functions.values()],De=[...me.variables.values()],xe=ro(le.$id)?`return function check(${ee})${oe} {
  return ${Qe(le.$id)}(value)
}`:`return ${nt}`;return[...De,...We,xe].join(`
`)}s(St,"Build");function xt(...le){let Ue={language:"javascript"},[ye,nt,ee]=le.length===2&&xn(le[1])?[le[0],le[1],Ue]:le.length===2&&!xn(le[1])?[le[0],[],le[1]]:le.length===3?[le[0],le[1],le[2]]:le.length===1?[le[0],[],Ue]:[null,[],Ue];if(me.language=ee.language,me.variables.clear(),me.functions.clear(),me.instances.clear(),!Ms(ye))throw new eW(ye);for(let oe of nt)if(!Ms(oe))throw new eW(oe);return St(ye,nt,ee)}s(xt,"Code"),t.Code=xt;function Tt(le,Ue=[]){let ye=xt(le,Ue,{language:"javascript"}),nt=globalThis.Function("kind","format","hash",ye),ee=new Map(me.instances);function oe(Ye,st,yt){if(!Ed.Has(Ye)||!ee.has(st))return!1;let qt=Ed.Get(Ye),dr=ee.get(st);return qt(dr,yt)}s(oe,"typeRegistryFunction");function We(Ye,st){return Wh.Has(Ye)?Wh.Get(Ye)(st):!1}s(We,"formatRegistryFunction");function De(Ye){return db(Ye)}s(De,"hashFunction");let xe=nt(oe,We,De);return new zce(le,Ue,xe,ye)}s(Tt,"Compile"),t.Compile=Tt})(Fs||(Fs={}));var WW=Ne(rb());d();d();var tu=[];for(let t=0;t<256;++t)tu.push((t+256).toString(16).slice(1));function R4e(t,e=0){return(tu[t[e+0]]+tu[t[e+1]]+tu[t[e+2]]+tu[t[e+3]]+"-"+tu[t[e+4]]+tu[t[e+5]]+"-"+tu[t[e+6]]+tu[t[e+7]]+"-"+tu[t[e+8]]+tu[t[e+9]]+"-"+tu[t[e+10]]+tu[t[e+11]]+tu[t[e+12]]+tu[t[e+13]]+tu[t[e+14]]+tu[t[e+15]]).toLowerCase()}s(R4e,"unsafeStringify");d();var k4e=require("crypto");var rW=new Uint8Array(256),tW=rW.length;function Xce(){return tW>rW.length-16&&((0,k4e.randomFillSync)(rW),tW=0),rW.slice(tW,tW+=16)}s(Xce,"rng");d();d();var P4e=require("crypto"),Zce={randomUUID:P4e.randomUUID};function zxt(t,e,r){if(Zce.randomUUID&&!e&&!t)return Zce.randomUUID();t=t||{};let n=t.random??t.rng?.()??Xce();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return R4e(n)}s(zxt,"v4");var cr=zxt;var GW=Ne(di());function F4(t){return t===1}s(F4,"isRestricted");var Xbt=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],Y6=8192,Zbt=21;var xl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return F4(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(Q4(e))return this.reporterRestricted;if(Gk(e))return new v6}getFTReporter(e){if(aDe(e))return this.reporterFT;if(Gk(e))return new v6}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}},eIt=I.Object({},{additionalProperties:I.String()}),tIt=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),rIt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function nIt(t){return rIt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(nIt,"isOomError");function iIt(t){return C6(t)?"network":nIt(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(iIt,"getErrorType");var Dr=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=Fs.Compile(eIt)}static{this.validateTelemetryMeasurements=Fs.Compile(tIt)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},la())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=la())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Bt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=zA(e.get(nn).getEditorInfo()),this.properties.editor_plugin_version=zA(e.get(nn).getEditorPluginInfo());let r=e.get(As);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${B_(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(nn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=zA(n.getEditorInfo());let i=e.get(jn);this.properties.fetcher=i.name;let o=e.get(nu).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let r=fDe(e);r["copilot.build"]=pDe(e),r["copilot.buildType"]=sy(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(F4(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>Y6){let a=0,c=0;for(;o>0&&c<Zbt;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+Y6;o<Y6&&(u=a+o),r[l]=i.slice(a,u),o-=Y6,a+=Y6}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=aIt(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(Gk(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return Jh(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),F4(r)&&Jh(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,cDe(e))}},oy=class t extends Dr{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new m_({}),exp:Up.createEmptyConfig()})}};function K6(t,e,r,n){t.get(xl).getReporter(t,e)?.sendTelemetryEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(K6,"sendTelemetryEvent");function oIt(t,e,r,n){t.get(xl).getReporter(t,e)?.sendTelemetryErrorEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(oIt,"sendTelemetryErrorEvent");function sIt(t,e,r,n){t.get(xl).getFTReporter(t)?.sendTelemetryEvent(r,Dr.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(sIt,"sendFTTelemetryEvent");function O4(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(O4,"telemetrizePromptLength");function la(){return performance.now()}s(la,"now");function aIt(t){return Math.floor(t/1e3)}s(aIt,"nowSeconds");function Q4(t){return t.get(Jl).optedIn}s(Q4,"shouldSendRestricted");function aDe(t){return t.get(Jl).ftFlag!==""}s(aDe,"shouldSendFinetuningTelemetry");function Rt(t,e,r,n){return t.get(Xa).register(cIt(t,e,la(),r?.extendedBy(),n))}s(Rt,"telemetry");async function cIt(t,e,r,n,i=0){let o=n||Dr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!F4(i)||Q4(t))&&K6(t,i,e,o),F4(i)&&Xbt.includes(e)&&aDe(t)&&sIt(t,i,e,o)}s(cIt,"_telemetry");function Lq(t,e){return t.get(Xa).register(lIt(t,e,la()))}s(Lq,"telemetryExpProblem");async function lIt(t,e,r){let n="expProblem",i=Dr.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),K6(t,0,n,i)}s(lIt,"_telemetryExpProblem");function Sue(t,e,r,n){return t.get(Xa).register(uIt(t,e,r,n))}s(Sue,"telemetryRaw");async function uIt(t,e,r,n){let i={...r,...cDe(t)};K6(t,0,e,{properties:i,measurements:n})}s(uIt,"_telemetryRaw");function cDe(t){let e=t.get(nn),r={unique_id:cr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:zA(e.getEditorInfo())},n=t.get(Jl);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(cDe,"createRequiredProperties");var _ue=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,WW.SHA256)(WW.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ia(t,e,r,n,i){return t.get(Xa).register(lDe(t,e,la(),r,{...n},i))}s(Ia,"telemetryException");async function lDe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Nu(a)||a instanceof Bs||a instanceof GW.ConnectionError||a instanceof GW.ResponseError)return}else{if(a=new _ue(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let c=t.get(nn).getEditorInfo(),l;c.root&&(l=[{prefix:`${c.name}:`,path:c.root}]);let u=Q4(t),f=d5e(a,l,u),p=iIt(a),m=p==="exception",h=Dr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:f.stack||f.toString(),message:f.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=rce(y.value):y.value="[redacted]");if(o??=ZRe(t,f),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=u5e(a,l),E=Dr.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(E.properties.errno=o.rollup_id),await E.makeReadyForSending(t,1,"IncludeExp",r),E.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=E.properties.unique_id,K6(t,1,`error.${p}`,E)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(YA).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),K6(t,0,`error.${p}`,h)}s(lDe,"_telemetryException");function Wu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await lDe(t,a,la(),r,n)}},"wrapped");return(...o)=>t.get(Xa).register(i(...o))}s(Wu,"telemetryCatch");function Jh(t,e,r,n){return t.get(Xa).register(dIt(t,e,la(),r?.extendedBy(),n))}s(Jh,"telemetryError");async function dIt(t,e,r,n,i=0){if(F4(i)&&!Q4(t))return;let o=n||Dr.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),oIt(t,i,e,o)}s(dIt,"_telemetryError");function uDe(t,e,r,n,i){let o=Dr.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return o.extendWithRequestId(n),Rt(t,"engine.completion",o,1)}s(uDe,"logEngineCompletion");function dDe(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Rt(t,"engine.prompt",i,1)}s(dDe,"logEnginePrompt");d();d();var mDe=Ne(di()),hDe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Rue;(r=>(r.method="github/didChangeAuth",r.type=new mDe.ProtocolNotificationType(r.method)))(Rue||={});d();var gDe=Ne(di()),kue;(r=>(r.method="copilot/ipCodeCitation",r.type=new gDe.NotificationType(r.method)))(kue||={});d();var ADe=Ne(di()),jW;(r=>(r.method="context/update",r.type=new ADe.ProtocolRequestType(r.method)))(jW||={});d();d();var xb="Cancelled";d();var In=Ne(di()),J6=I.String(),Cf=I.Object({uri:J6}),D_=I.Intersect([Cf,I.Object({version:I.Optional(I.Integer())})]),A6r=I.Required(D_),bl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),rc=I.Object({start:bl,end:bl}),Pue=I.Union([I.Integer(),I.String()]),y6r=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});d();var yDe=Ne(di()),Bue;(r=>(r.method="textDocument/didFocus",r.type=new yDe.ProtocolNotificationType(r.method)))(Bue||={});d();var fIt=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),pIt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),CDe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),EDe=I.Object({editorInfo:I.Optional(CDe),editorPluginInfo:I.Optional(CDe),relatedPluginInfo:I.Optional(I.Array(pIt)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(fIt)),githubAppId:I.Optional(I.String())});d();var X6=Ne(di());var VW=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(VW||{}),mIt=I.Enum(VW),hIt=I.Object({triggerKind:mIt,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:rc,tooltipSignature:I.Optional(I.String())}))}),vDe=I.Object({textDocument:D_,position:bl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:hIt,data:I.Optional(I.Unknown())}),Due;(r=>(r.method="textDocument/inlineCompletion",r.type=new X6.ProtocolRequestType(r.method)))(Due||={});var xDe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),bDe=I.Object({item:xDe}),Nue;(r=>(r.method="textDocument/didShowCompletion",r.type=new X6.ProtocolNotificationType(r.method)))(Nue||={});var IDe=I.Object({item:xDe,acceptedLength:I.Integer({minimum:1})}),Lue;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new X6.ProtocolNotificationType(r.method)))(Lue||={});d();var TDe=Ne(di()),Mue;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new TDe.ProtocolRequestType(r.method)))(Mue||={});d();var wDe=Ne(di()),_De=I.Object({textDocument:D_,position:bl}),gIt=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),SDe=I.Object({item:gIt}),Fue;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new wDe.ProtocolNotificationType(r.method)))(Fue||={});d();var $W=Ne(di());var RDe=I.Object({textDocument:D_,position:bl,partialResultToken:I.Optional(Pue),workDoneToken:I.Optional(Pue)}),zW;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new $W.ProtocolRequestType(n.method),n.partialResult=new $W.ProgressType))(zW||={});d();var kDe=Ne(di()),Oue;(r=>(r.method="copilot/related",r.type=new kDe.ProtocolRequestType(r.method)))(Oue||={});d();var PDe=Ne(di()),Que;(r=>(r.method="statusNotification",r.type=new PDe.ProtocolNotificationType(r.method)))(Que||={});var BDe=Ne(require("events"));var Xh=class{static{s(this,"CopilotTokenNotifier")}#e=new BDe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...r){return this.#e.emit(e,...r)}on(e,r,n){let i=Wu(e,n,`event.${r}`);return this.#e.on(r,i),In.Disposable.create(()=>this.#e.off(r,i))}};function ia(t,e){return t.get(Xh).on(t,"CopilotToken",e)}s(ia,"onCopilotToken");function Z6(t,e){return t.get(Xh).emitToken(e)}s(Z6,"emitCopilotToken");function YW(t){return t.get(Xh).lastToken}s(YW,"getLastCopilotToken");d();var KW=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};d();function Uue(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(Uue,"findKnownOrg");function DDe(t){let e=t.organization_list??[];return Uue(e)??""}s(DDe,"getUserKind");d();d();var N_=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(N_||{}),Tc=class{static{s(this,"LogTarget")}},ay=class{static{s(this,"TelemetryLogSender")}},vt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get(Tc).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(ay).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(ay).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},fn=new vt("default");d();var wc=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};d();var iu=class{static{s(this,"UrlOpener")}};var AIt=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],NDe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",LDe="https://gh.io/copilot-network-errors",xd=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&AIt.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new vt("certificates").error(e,`${NDe} Please visit ${LDe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(wc).showWarningMessage(NDe,n).then(i=>{if(i?.title===n.title)return e.get(iu).open(LDe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};d();d();function JW(){return typeof process>"u"}s(JW,"isWeb");function e9(){return typeof process<"u"&&process.env.MSBENCH_MODE==="true"}s(e9,"isMsBenchModeEnabled");var que=class extends VA{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Zp(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...JW()?{}:A0(t),...n.headers}};let i=await t.get(jn).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new VA(i);if(!i.headers.get("x-github-request-id"))throw new que(i);return i}s(Zp,"apiFetch");d();d();var ODe=require("os"),XW=require("path");d();var MDe;(()=>{"use strict";var t={975:G=>{function H(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(H,"e");function ce(V,Q){for(var z,re="",fe=0,ne=-1,me=0,he=0;he<=V.length;++he){if(he<V.length)z=V.charCodeAt(he);else{if(z===47)break;z=47}if(z===47){if(!(ne===he-1||me===1))if(ne!==he-1&&me===2){if(re.length<2||fe!==2||re.charCodeAt(re.length-1)!==46||re.charCodeAt(re.length-2)!==46){if(re.length>2){var Qe=re.lastIndexOf("/");if(Qe!==re.length-1){Qe===-1?(re="",fe=0):fe=(re=re.slice(0,Qe)).length-1-re.lastIndexOf("/"),ne=he,me=0;continue}}else if(re.length===2||re.length===1){re="",fe=0,ne=he,me=0;continue}}Q&&(re.length>0?re+="/..":re="..",fe=2)}else re.length>0?re+="/"+V.slice(ne+1,he):re=V.slice(ne+1,he),fe=he-ne-1;ne=he,me=0}else z===46&&me!==-1?++me:me=-1}return re}s(ce,"r");var ie={resolve:s(function(){for(var V,Q="",z=!1,re=arguments.length-1;re>=-1&&!z;re--){var fe;re>=0?fe=arguments[re]:(V===void 0&&(V=process.cwd()),fe=V),H(fe),fe.length!==0&&(Q=fe+"/"+Q,z=fe.charCodeAt(0)===47)}return Q=ce(Q,!z),z?Q.length>0?"/"+Q:"/":Q.length>0?Q:"."},"resolve"),normalize:s(function(V){if(H(V),V.length===0)return".";var Q=V.charCodeAt(0)===47,z=V.charCodeAt(V.length-1)===47;return(V=ce(V,!Q)).length!==0||Q||(V="."),V.length>0&&z&&(V+="/"),Q?"/"+V:V},"normalize"),isAbsolute:s(function(V){return H(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,Q=0;Q<arguments.length;++Q){var z=arguments[Q];H(z),z.length>0&&(V===void 0?V=z:V+="/"+z)}return V===void 0?".":ie.normalize(V)},"join"),relative:s(function(V,Q){if(H(V),H(Q),V===Q||(V=ie.resolve(V))===(Q=ie.resolve(Q)))return"";for(var z=1;z<V.length&&V.charCodeAt(z)===47;++z);for(var re=V.length,fe=re-z,ne=1;ne<Q.length&&Q.charCodeAt(ne)===47;++ne);for(var me=Q.length-ne,he=fe<me?fe:me,Qe=-1,ke=0;ke<=he;++ke){if(ke===he){if(me>he){if(Q.charCodeAt(ne+ke)===47)return Q.slice(ne+ke+1);if(ke===0)return Q.slice(ne+ke)}else fe>he&&(V.charCodeAt(z+ke)===47?Qe=ke:ke===0&&(Qe=0));break}var tt=V.charCodeAt(z+ke);if(tt!==Q.charCodeAt(ne+ke))break;tt===47&&(Qe=ke)}var Fe="";for(ke=z+Qe+1;ke<=re;++ke)ke!==re&&V.charCodeAt(ke)!==47||(Fe.length===0?Fe+="..":Fe+="/..");return Fe.length>0?Fe+Q.slice(ne+Qe):(ne+=Qe,Q.charCodeAt(ne)===47&&++ne,Q.slice(ne))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(H(V),V.length===0)return".";for(var Q=V.charCodeAt(0),z=Q===47,re=-1,fe=!0,ne=V.length-1;ne>=1;--ne)if((Q=V.charCodeAt(ne))===47){if(!fe){re=ne;break}}else fe=!1;return re===-1?z?"/":".":z&&re===1?"//":V.slice(0,re)},"dirname"),basename:s(function(V,Q){if(Q!==void 0&&typeof Q!="string")throw new TypeError('"ext" argument must be a string');H(V);var z,re=0,fe=-1,ne=!0;if(Q!==void 0&&Q.length>0&&Q.length<=V.length){if(Q.length===V.length&&Q===V)return"";var me=Q.length-1,he=-1;for(z=V.length-1;z>=0;--z){var Qe=V.charCodeAt(z);if(Qe===47){if(!ne){re=z+1;break}}else he===-1&&(ne=!1,he=z+1),me>=0&&(Qe===Q.charCodeAt(me)?--me==-1&&(fe=z):(me=-1,fe=he))}return re===fe?fe=he:fe===-1&&(fe=V.length),V.slice(re,fe)}for(z=V.length-1;z>=0;--z)if(V.charCodeAt(z)===47){if(!ne){re=z+1;break}}else fe===-1&&(ne=!1,fe=z+1);return fe===-1?"":V.slice(re,fe)},"basename"),extname:s(function(V){H(V);for(var Q=-1,z=0,re=-1,fe=!0,ne=0,me=V.length-1;me>=0;--me){var he=V.charCodeAt(me);if(he!==47)re===-1&&(fe=!1,re=me+1),he===46?Q===-1?Q=me:ne!==1&&(ne=1):Q!==-1&&(ne=-1);else if(!fe){z=me+1;break}}return Q===-1||re===-1||ne===0||ne===1&&Q===re-1&&Q===z+1?"":V.slice(Q,re)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(Q,z){var re=z.dir||z.root,fe=z.base||(z.name||"")+(z.ext||"");return re?re===z.root?re+fe:re+"/"+fe:fe}(0,V)},"format"),parse:s(function(V){H(V);var Q={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return Q;var z,re=V.charCodeAt(0),fe=re===47;fe?(Q.root="/",z=1):z=0;for(var ne=-1,me=0,he=-1,Qe=!0,ke=V.length-1,tt=0;ke>=z;--ke)if((re=V.charCodeAt(ke))!==47)he===-1&&(Qe=!1,he=ke+1),re===46?ne===-1?ne=ke:tt!==1&&(tt=1):ne!==-1&&(tt=-1);else if(!Qe){me=ke+1;break}return ne===-1||he===-1||tt===0||tt===1&&ne===he-1&&ne===me+1?he!==-1&&(Q.base=Q.name=me===0&&fe?V.slice(1,he):V.slice(me,he)):(me===0&&fe?(Q.name=V.slice(1,ne),Q.base=V.slice(1,he)):(Q.name=V.slice(me,ne),Q.base=V.slice(me,he)),Q.ext=V.slice(ne,he)),me>0?Q.dir=V.slice(0,me-1):fe&&(Q.dir="/"),Q},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,G.exports=ie}},e={};function r(G){var H=e[G];if(H!==void 0)return H.exports;var ce=e[G]={exports:{}};return t[G](ce,ce.exports,r),ce.exports}s(r,"r"),r.d=(G,H)=>{for(var ce in H)r.o(H,ce)&&!r.o(G,ce)&&Object.defineProperty(G,ce,{enumerable:!0,get:H[ce]})},r.o=(G,H)=>Object.prototype.hasOwnProperty.call(G,H),r.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>Y,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,c=/^\/\//;function l(G,H){if(!G.scheme&&H)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${G.authority}", path: "${G.path}", query: "${G.query}", fragment: "${G.fragment}"}`);if(G.scheme&&!o.test(G.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(G.path){if(G.authority){if(!a.test(G.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(c.test(G.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(l,"a");let u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(H){return H instanceof m||!!H&&typeof H.authority=="string"&&typeof H.fragment=="string"&&typeof H.path=="string"&&typeof H.query=="string"&&typeof H.scheme=="string"&&typeof H.fsPath=="string"&&typeof H.with=="function"&&typeof H.toString=="function"}scheme;authority;path;query;fragment;constructor(H,ce,ie,V,Q,z=!1){typeof H=="object"?(this.scheme=H.scheme||u,this.authority=H.authority||u,this.path=H.path||u,this.query=H.query||u,this.fragment=H.fragment||u):(this.scheme=function(re,fe){return re||fe?re:"file"}(H,z),this.authority=ce||u,this.path=function(re,fe){switch(re){case"https":case"http":case"file":fe?fe[0]!==f&&(fe=f+fe):fe=f}return fe}(this.scheme,ie||u),this.query=V||u,this.fragment=Q||u,l(this,z))}get fsPath(){return b(this,!1)}with(H){if(!H)return this;let{scheme:ce,authority:ie,path:V,query:Q,fragment:z}=H;return ce===void 0?ce=this.scheme:ce===null&&(ce=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),V===void 0?V=this.path:V===null&&(V=u),Q===void 0?Q=this.query:Q===null&&(Q=u),z===void 0?z=this.fragment:z===null&&(z=u),ce===this.scheme&&ie===this.authority&&V===this.path&&Q===this.query&&z===this.fragment?this:new g(ce,ie,V,Q,z)}static parse(H,ce=!1){let ie=p.exec(H);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),ce):new g(u,u,u,u,u)}static file(H){let ce=u;if(i&&(H=H.replace(/\\/g,f)),H[0]===f&&H[1]===f){let ie=H.indexOf(f,2);ie===-1?(ce=H.substring(2),H=f):(ce=H.substring(2,ie),H=H.substring(ie)||f)}return new g("file",ce,H,u,u)}static from(H){let ce=new g(H.scheme,H.authority,H.path,H.query,H.fragment);return l(ce,!0),ce}toString(H=!1){return _(this,H)}toJSON(){return this}static revive(H){if(H){if(H instanceof m)return H;{let ce=new g(H);return ce._formatted=H.external,ce._fsPath=H._sep===h?H.fsPath:null,ce}}return H}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=b(this,!1)),this._fsPath}toString(H=!1){return H?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let H={$mid:1};return this._fsPath&&(H.fsPath=this._fsPath,H._sep=h),this._formatted&&(H.external=this._formatted),this.path&&(H.path=this.path),this.scheme&&(H.scheme=this.scheme),this.authority&&(H.authority=this.authority),this.query&&(H.query=this.query),this.fragment&&(H.fragment=this.fragment),H}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function E(G,H,ce){let ie,V=-1;for(let Q=0;Q<G.length;Q++){let z=G.charCodeAt(Q);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||H&&z===47||ce&&z===91||ce&&z===93||ce&&z===58)V!==-1&&(ie+=encodeURIComponent(G.substring(V,Q)),V=-1),ie!==void 0&&(ie+=G.charAt(Q));else{ie===void 0&&(ie=G.substr(0,Q));let re=y[z];re!==void 0?(V!==-1&&(ie+=encodeURIComponent(G.substring(V,Q)),V=-1),ie+=re):V===-1&&(V=Q)}}return V!==-1&&(ie+=encodeURIComponent(G.substring(V))),ie!==void 0?ie:G}s(E,"m");function x(G){let H;for(let ce=0;ce<G.length;ce++){let ie=G.charCodeAt(ce);ie===35||ie===63?(H===void 0&&(H=G.substr(0,ce)),H+=y[ie]):H!==void 0&&(H+=G[ce])}return H!==void 0?H:G}s(x,"y");function b(G,H){let ce;return ce=G.authority&&G.path.length>1&&G.scheme==="file"?`//${G.authority}${G.path}`:G.path.charCodeAt(0)===47&&(G.path.charCodeAt(1)>=65&&G.path.charCodeAt(1)<=90||G.path.charCodeAt(1)>=97&&G.path.charCodeAt(1)<=122)&&G.path.charCodeAt(2)===58?H?G.path.substr(1):G.path[1].toLowerCase()+G.path.substr(2):G.path,i&&(ce=ce.replace(/\//g,"\\")),ce}s(b,"v");function _(G,H){let ce=H?x:E,ie="",{scheme:V,authority:Q,path:z,query:re,fragment:fe}=G;if(V&&(ie+=V,ie+=":"),(Q||V==="file")&&(ie+=f,ie+=f),Q){let ne=Q.indexOf("@");if(ne!==-1){let me=Q.substr(0,ne);Q=Q.substr(ne+1),ne=me.lastIndexOf(":"),ne===-1?ie+=ce(me,!1,!1):(ie+=ce(me.substr(0,ne),!1,!1),ie+=":",ie+=ce(me.substr(ne+1),!1,!0)),ie+="@"}Q=Q.toLowerCase(),ne=Q.lastIndexOf(":"),ne===-1?ie+=ce(Q,!1,!0):(ie+=ce(Q.substr(0,ne),!1,!0),ie+=Q.substr(ne))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58){let ne=z.charCodeAt(1);ne>=65&&ne<=90&&(z=`/${String.fromCharCode(ne+32)}:${z.substr(3)}`)}else if(z.length>=2&&z.charCodeAt(1)===58){let ne=z.charCodeAt(0);ne>=65&&ne<=90&&(z=`${String.fromCharCode(ne+32)}:${z.substr(2)}`)}ie+=ce(z,!0,!1)}return re&&(ie+="?",ie+=ce(re,!1,!1)),fe&&(ie+="#",ie+=H?fe:E(fe,!1,!1)),ie}s(_,"b");function k(G){try{return decodeURIComponent(G)}catch{return G.length>3?G.substr(0,3)+k(G.substr(3)):G}}s(k,"C");let P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(G){return G.match(P)?G.replace(P,H=>k(H)):G}s(N,"w");var M=r(975);let J=M.posix||M,pe="/";var Y;(function(G){G.joinPath=function(H,...ce){return H.with({path:J.join(H.path,...ce)})},G.resolvePath=function(H,...ce){let ie=H.path,V=!1;ie[0]!==pe&&(ie=pe+ie,V=!0);let Q=J.resolve(ie,...ce);return V&&Q[0]===pe&&!H.authority&&(Q=Q.substring(1)),H.with({path:Q})},G.dirname=function(H){if(H.path.length===0||H.path===pe)return H;let ce=J.dirname(H.path);return ce.length===1&&ce.charCodeAt(0)===46&&(ce=""),H.with({path:ce})},G.basename=function(H){return J.basename(H.path)},G.extname=function(H){return J.extname(H.path)}})(Y||(Y={})),MDe=n})();var{URI:bb,Utils:t9}=MDe;function QDe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+QDe(t.substring(3)):t}}s(QDe,"decodeURIComponentGraceful");var FDe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Hue(t){return t.match(FDe)?t.replace(FDe,e=>QDe(e)):t}s(Hue,"percentDecode");function Kc(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return bb.file(t).toString()}s(Kc,"makeFsUri");function L_(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?bb.parse(e[1]+e[2],!0):bb.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(L_,"parseUri");function UDe(t){return L_(t),t}s(UDe,"validateUri");function Jc(t){try{return L_(t).toString()}catch{return t}}s(Jc,"normalizeUri");var qDe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function La(t){let e=L_(t);if(!qDe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,ODe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,XW.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(La,"fsPath");function ls(t){try{return La(t)}catch{return}}s(ls,"getFsPath");function HDe(t){let e=ls(t);if(e)return bb.file(e).toString()}s(HDe,"getFsUri");function M_(t,...e){let r,n=ls(t);return n?r=Kc((0,XW.resolve)(n,...e)):r=t9.resolvePath(L_(t),...e.map(i=>WDe(i))).toString(),typeof t=="string"?r:{uri:r}}s(M_,"resolveFilePath");function Lo(t,...e){let r=t9.joinPath(L_(t),...e.map(WDe)).toString();return typeof t=="string"?r:{uri:r}}s(Lo,"joinPath");function WDe(t){return yIt(t)?t.replaceAll("\\","/"):t}s(WDe,"pathToURIPath");function yIt(t){return/^[^/\\]*\\/.test(t)}s(yIt,"isWinPath");function Oi(t){return Hue((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Oi,"basename");function Gu(t){let e=t9.dirname(L_(t)),r;return qDe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(Gu,"dirname");function GDe(t){return t9.extname(L_(t))}s(GDe,"extname");var bd=class{static{s(this,"NetworkConfiguration")}};function ZW(t,e){try{let r=new URL(e??"");if(r.protocol==="https:"||!Gue(t)&&r.protocol==="http:")return r.href}catch{}}s(ZW,"ensurePermittedUrl");var F_={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function Wue(t,e,r){if(r&&Lh(t)){for(let n of r){let i=vi(t,n);if(i)return i}return}for(let n of e){let i=vi(t,n);if(i)return i}}s(Wue,"urlConfigOverride");function CIt(t,e){switch(e){case"api":return Wue(t,[kt.DebugOverrideCapiUrl,kt.DebugOverrideCapiUrlLegacy],[kt.DebugTestOverrideCapiUrl,kt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return Wue(t,[kt.DebugOverrideProxyUrl,kt.DebugOverrideProxyUrlLegacy],[kt.DebugTestOverrideProxyUrl,kt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Gue(t))return Wue(t,[kt.DebugSnippyOverrideUrl])}}s(CIt,"getEndpointOverrideUrl");function cy(t,e,r,...n){let i=CIt(t,r)??e.endpoints[r];return Lo(i,...n)}s(cy,"getEndpointUrl");function U4(t){return YW(t)?.endpoints??F_}s(U4,"getLastKnownEndpoints");function jDe(t,e){if(e&&!ZW(t,e)){t.get(wc).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(bd).setConfiguredUrls(t,{serverUrl:e})}s(jDe,"updateServerUrl");var S0=new vt("auth"),zDe=60;function Ib(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com/",r="https://api.github.com/"),{apiUrl:r,serverUrl:e}}s(Ib,"fillGitHubUrls");function VDe(){return Math.floor(Date.now()/1e3)}s(VDe,"nowSeconds");async function eG(t,e){let r=Dr.createAndMarkAsIssued({},{});Rt(t,"auth.new_login");let n=await EIt(t,e),i=await n.json(),o=i.user_notification;if($De(t,o,e),n.status===401){let f="Failed to get copilot token due to 401 status. Please sign out and try again.";return S0.info(t,f),Jh(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:f,envelope:i}}if(!n.ok||!i.token){S0.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),Jh(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let f=i.error_details;return f?.notification_id!=="not_signed_up"&&$De(t,f,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...f}}let a=i.expires_at;i.expires_at=VDe()+i.refresh_in+zDe;let c=await jue(t,e),l;c.ok&&(l=await c.json());let u=new O_(i,l);return Z6(t,u),Rt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:VDe()})),{kind:"success",copilotToken:u}}s(eG,"authFromGitHubSession");async function EIt(t,e){let r={"X-GitHub-Api-Version":"2024-12-15"},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Zp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(xd).notifyUser(t,i),i}}s(EIt,"fetchCopilotToken");async function jue(t,e){let r={"X-GitHub-Api-Version":$A},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Zp(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(xd).notifyUser(t,i),i}}s(jue,"fetchCopilotUserInfo");function $De(t,e,r){e&&t.get(wc).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(nn).getEditorPluginInfo(),c=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(iu).open(c)}e.notification_id&&o&&await vIt(t,e.notification_id,r)}).catch(n=>{S0.exception(t,n,"copilotToken.notification")})}s($De,"notifyUser");async function vIt(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Zp(t,r,n,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&S0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(vIt,"sendNotificationResultToGitHub");var O_=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new KW(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??F_}needsRefresh(){return(this.envelope.expires_at-zDe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return Uue(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,c]=o.split("=");r.set(a,c)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};d();d();var r9="apps",Vue="hosts",Q_=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}async getAuthRecord(e){let r=this.getAuthAuthority(e),n=e.githubAppId,i=await this.persistenceManager.read(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}));if(!n&&!i?(n=Zh,i=await this.persistenceManager.read(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:n}))):n??=this.ctx.get(Il).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:n,authAuthority:r};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(Vue,e);if(r)return{...r,githubAppId:Zh}}async saveAuthRecord(e){await this.persistenceManager.update(r9,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let r=this.getAuthAuthority(e),n=await this.getAuthRecord({authAuthority:r});n&&(n.githubAppId===Zh&&await this.persistenceManager.delete(Vue,r),await this.persistenceManager.delete(r9,this.authRecordKey(this.ctx,{authAuthority:r})),await this.persistenceManager.delete(r9,this.authRecordKey(this.ctx,{authAuthority:r,githubAppId:Zh})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(Vue)}authRecordKey(e,r){let n=r.githubAppId??e.get(Il).findAppIdToAuthenticate();return`${this.getAuthAuthority(r)}:${n}`}getAuthAuthority(e){return e.authAuthority}};d();d();var ZDe=Ne(KDe()),eNe=Ne(XDe()),R0=Ne(require("os"));var q4=class{constructor(e,r,n,i,o=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(jn).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{fn.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new eNe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:n,extensionConfig:{[ZDe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=xIt(e),this.commonProperties=bIt(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function xIt(t){let e={},r=t.get(As);e["ai.session.id"]=r.sessionId;let n=t.get(Jl);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${R0.type()} ${R0.release()}`,e["ai.device.osArchitecture"]=R0.arch(),e["ai.device.osPlatform"]=R0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(lo).getVersion(),e}s(xIt,"getTags");function bIt(t){let e={};e.common_os=R0.platform(),e.common_platformversion=R0.release(),e.common_arch=R0.arch(),e.common_cpu=Array.from(new Set(R0.cpus().map(n=>n.model))).join();let r=t.get(As);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(bIt,"getCommonProperties");var IIt="7d7048df-6dd0-4048-bb23-b716c1461f8f",TIt="3fdd7f28-937a-48c8-9a21-ba337db23bd1",wIt="f0000000-0000-0000-0000-000000000000";function tNe(t){return new URL(t).hostname==="github.com"?F_.telemetry:t.replace("://","://copilot-telemetry-service.")}s(tNe,"getEndpointForServerUrl");var Ef=class{constructor(e,r){this.ctx=e;this.namespace=r;this.serverUrl="https://github.com/";this.rootUrl=tNe(this.serverUrl);this.shuttingDown=new Set;ia(e,n=>this.updateServiceEndpoints(n.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let r=this.ctx;this._enabled=e;let n=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:n,enabled:this._enabled},e)){let i=r.get(xl);i.setReporter(new q4(r,this.namespace,n,IIt)),i.setRestrictedReporter(new q4(r,this.namespace,n,TIt)),i.setFTReporter(new q4(r,this.namespace,n,wIt,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(xl).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=tNe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var Dn=class{constructor(e,r){this.ctx=e;this.env=r;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Qr)}get authPersistence(){return this.ctx.get(Q_)}getConfiguredUrls(){return this.ctx.get(bd).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let r=e?.localChecksOnly??!1,n;return e?.githubAppId!==void 0?n=await this.getPersistedSession(e):n=await this.getSession(),n===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):r?{status:"MaybeOK",user:n.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(n,e?.freshSignIn??!1),user:n.login})}async getTokenWithSignUpLimited(e,r){try{await this._copilotTokenManager.getToken()}catch(n){if(n instanceof em)return r&&n.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):n.result.reason==="HTTP401"?"NotSignedIn":n.result.reason;throw n}return"OK"}async getSession({authAuthority:e}={}){let r=_It(this.env)??this.#e;if(r!==null){if(r){let n={...r,...Ib(r)};if(!e||e===new URL(n.serverUrl).hostname)return n}return await this.getPersistedSession()}}async getPersistedSession(e){let r=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(r===void 0)return;let n={...this.getConfiguredUrls(),accessToken:r.oauth_token,login:r.user,githubAppId:r.githubAppId};return r.dev_override&&sy(this.ctx)==="dev"&&(n.devOverride={copilotTokenUrl:r.dev_override.copilot_token_url,copilotUserInfoUrl:r.dev_override.copilot_user_info_url,notificationUrl:r.dev_override.notification_url,contentRestrictionsUrl:r.dev_override.content_restrictions_url}),n}async signUpLimited(e){let r="copilot_internal/subscribe_limited_user";try{return(await(await Zp(this.ctx,e,r,{method:"POST",headers:{"X-GitHub-Api-Version":$A},body:JSON.stringify({restricted_telemetry:this.ctx.get(Ef).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(n){return S0.exception(this.ctx,n,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function _It(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(_It,"getSessionFromEnv");d();var po=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},nG=class extends po{static{s(this,"NoOpStatusReporter")}didChange(){}};var Qr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},em=class extends Bs{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},iG=class extends Qr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new em({reason:"NotSignedIn"});if(!r.accessToken)throw new em({reason:"HTTP401"});let n=await eG(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new em(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(rNe(this.ctx))throw r;S0.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(po).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(po);if(n instanceof em)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Rt(this.ctx,"auth.reset_token_"+r),S0.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):S0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},H4=class extends iG{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(Dn).getSession()}};d();var ly=class{static{s(this,"Clock")}now(){return new Date}};d();var eg=class{static{s(this,"ExpConfigMaker")}},n9=class extends eg{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(jn),a=Object.keys(i).length===0?this.defaultFilters:i,c=new URL("telemetry",n.telemetry).href,l;try{l=await o.fetch(c,{method:"GET",headers:a,timeout:5e3})}catch(m){return Up.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!l.ok)return Up.createFallbackConfig(r,`ExP responded with ${l.status}`);let u;try{u=await l.json()}catch(m){if(m instanceof SyntaxError)return Ia(r,m,"fetchExperiments"),Up.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let f=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(f.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Up(f.Parameters,u.AssignmentContext,p.join(";"))}},oG=class extends eg{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Up.createEmptyConfig())}};d();d();var sG=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},$ue=class extends sG{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},nNe=s(t=>new $ue(t),"DEFAULT_GRANULARITY"),aG=class extends sG{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let c of o)n.push(this.prefix+a+c);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var iNe="X-Copilot-ClientTimeBucket",cG=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=nNe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new aG(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(iNe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(iNe,o))}}};d();d();d();d();d();d();d();var lG="4.10.2",i9="04b07795-8ddb-461a-bbee-02f9e1bf7b46",oNe="common",q1;(function(t){t.AzureChina="https://login.chinacloudapi.cn",t.AzureGermany="https://login.microsoftonline.de",t.AzureGovernment="https://login.microsoftonline.us",t.AzurePublicCloud="https://login.microsoftonline.com"})(q1||(q1={}));var o9=q1.AzurePublicCloud,sNe="login.microsoftonline.com",aNe=["*"],cNe="cae",lNe="nocae",uNe="msal.cache";var zue;var dNe;function SIt(t){var e,r,n,i,o,a,c;let l={cache:{},broker:{isEnabled:(r=(e=t.brokerOptions)===null||e===void 0?void 0:e.enabled)!==null&&r!==void 0?r:!1,enableMsaPassthrough:(i=(n=t.brokerOptions)===null||n===void 0?void 0:n.legacyEnableMsaPassthrough)!==null&&i!==void 0?i:!1,parentWindowHandle:(o=t.brokerOptions)===null||o===void 0?void 0:o.parentWindowHandle}};if(!((a=t.tokenCachePersistenceOptions)===null||a===void 0)&&a.enabled){if(zue===void 0)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));let u=t.tokenCachePersistenceOptions.name||uNe;l.cache.cachePlugin=zue(Object.assign({name:`${u}.${lNe}`},t.tokenCachePersistenceOptions)),l.cache.cachePluginCae=zue(Object.assign({name:`${u}.${cNe}`},t.tokenCachePersistenceOptions))}if(!((c=t.brokerOptions)===null||c===void 0)&&c.enabled){if(dNe===void 0)throw new Error(["Broker for WAM was requested to be enabled, but no native broker was configured.","You must install the identity-broker plugin package (`npm install --save @azure/identity-broker`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(createNativeBrokerPlugin())` before using `enableBroker`."].join(" "));l.broker.nativeBrokerPlugin=dNe.broker}return l}s(SIt,"generatePluginConfiguration");var fNe={generatePluginConfiguration:SIt};d();d();d();d();d();var pNe=require("node:os"),mNe=Ne(require("node:util"),1),hNe=Ne(require("node:process"),1);function gNe(t,...e){hNe.stderr.write(`${mNe.default.format(t,...e)}${pNe.EOL}`)}s(gNe,"log");var ANe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,yNe,Yue=[],Kue=[],uG=[];ANe&&Jue(ANe);var CNe=Object.assign(t=>ENe(t),{enable:Jue,enabled:Xue,disable:RIt,log:gNe});function Jue(t){yNe=t,Yue=[],Kue=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?Kue.push(new RegExp(`^${n.substr(1)}$`)):Yue.push(new RegExp(`^${n}$`));for(let n of uG)n.enabled=Xue(n.namespace)}s(Jue,"enable");function Xue(t){if(t.endsWith("*"))return!0;for(let e of Kue)if(e.test(t))return!1;for(let e of Yue)if(e.test(t))return!0;return!1}s(Xue,"enabled");function RIt(){let t=yNe||"";return Jue(""),t}s(RIt,"disable");function ENe(t){let e=Object.assign(r,{enabled:Xue(t),destroy:kIt,log:CNe.log,namespace:t,extend:PIt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),uG.push(e),e}s(ENe,"createDebugger");function kIt(){let t=uG.indexOf(this);return t>=0?(uG.splice(t,1),!0):!1}s(kIt,"destroy");function PIt(t){let e=ENe(`${this.namespace}:${t}`);return e.log=this.log,e}s(PIt,"extend");var W4=CNe;var xNe=new Set,dG=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,pG,Zue=W4("azure");Zue.log=(...t)=>{W4.log(...t)};var ede=["verbose","info","warning","error"];dG&&(TNe(dG)?BIt(dG):console.error(`AZURE_LOG_LEVEL set to unknown log level '${dG}'; logging is not enabled. Acceptable values: ${ede.join(", ")}.`));function BIt(t){if(t&&!TNe(t))throw new Error(`Unknown log level '${t}'. Acceptable values: ${ede.join(",")}`);pG=t;let e=[];for(let r of xNe)INe(r)&&e.push(r.namespace);W4.enable(e.join(","))}s(BIt,"setLogLevel");function mG(){return pG}s(mG,"getLogLevel");var vNe={verbose:400,info:300,warning:200,error:100};function Tb(t){let e=Zue.extend(t);return bNe(Zue,e),{error:fG(e,"error"),warning:fG(e,"warning"),info:fG(e,"info"),verbose:fG(e,"verbose")}}s(Tb,"createClientLogger");function bNe(t,e){e.log=(...r)=>{t.log(...r)}}s(bNe,"patchLogMethod");function fG(t,e){let r=Object.assign(t.extend(e),{level:e});if(bNe(t,r),INe(r)){let n=W4.disable();W4.enable(n+","+r.namespace)}return xNe.add(r),r}s(fG,"createLogger");function INe(t){return!!(pG&&vNe[t.level]<=vNe[pG])}s(INe,"shouldEnable");function TNe(t){return ede.includes(t)}s(TNe,"isAzureLogLevel");var k0=Tb("identity");function hG(t){return t.reduce((e,r)=>(process.env[r]?e.assigned.push(r):e.missing.push(r),e),{missing:[],assigned:[]})}s(hG,"processEnvVars");function Xc(t){return`SUCCESS. Scopes: ${Array.isArray(t)?t.join(", "):t}.`}s(Xc,"formatSuccess");function ko(t,e){let r="ERROR.";return t?.length&&(r+=` Scopes: ${Array.isArray(t)?t.join(", "):t}.`),`${r} Error message: ${typeof e=="string"?e:e.message}.`}s(ko,"formatError");function wNe(t,e,r=k0){let n=e?`${e.fullTitle} ${t}`:t;function i(l){r.info(`${n} =>`,l)}s(i,"info");function o(l){r.warning(`${n} =>`,l)}s(o,"warning");function a(l){r.verbose(`${n} =>`,l)}s(a,"verbose");function c(l){r.error(`${n} =>`,l)}return s(c,"error"),{title:t,fullTitle:n,info:i,warning:o,verbose:a,error:c}}s(wNe,"credentialLoggerInstance");function oi(t,e=k0){let r=wNe(t,void 0,e);return Object.assign(Object.assign({},r),{parent:e,getToken:wNe("=> getToken()",r,e)})}s(oi,"credentialLogger");d();d();d();function DIt(t){return t&&typeof t.error=="string"&&typeof t.error_description=="string"}s(DIt,"isErrorResponse");var SNe="CredentialUnavailableError",$r=class extends Error{static{s(this,"CredentialUnavailableError")}constructor(e,r){super(e,r),this.name=SNe}},gG="AuthenticationError",wb=class extends Error{static{s(this,"AuthenticationError")}constructor(e,r,n){let i={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(DIt(r))i=_Ne(r);else if(typeof r=="string")try{let o=JSON.parse(r);i=_Ne(o)}catch{e===400?i={error:"invalid_request",errorDescription:`The service indicated that the request was invalid.

${r}`}:i={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${r}`}}else i={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${i.error} Status code: ${e}
More details:
${i.errorDescription},`,n),this.statusCode=e,this.errorResponse=i,this.name=gG}},RNe="AggregateAuthenticationError",s9=class extends Error{static{s(this,"AggregateAuthenticationError")}constructor(e,r){let n=e.join(`
`);super(`${r}
${n}`),this.errors=e,this.name=RNe}};function _Ne(t){return{error:t.error,errorDescription:t.error_description,correlationId:t.correlation_id,errorCodes:t.error_codes,timestamp:t.timestamp,traceId:t.trace_id}}s(_Ne,"convertOAuthErrorResponseToErrorResponse");var tg=class extends Error{static{s(this,"AuthenticationRequiredError")}constructor(e){super(e.message,e.cause?{cause:e.cause}:void 0),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function NIt(t){return`The current credential is not configured to acquire tokens for tenant ${t}. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.`}s(NIt,"createConfigurationErrorMessage");function _c(t,e,r=[],n){var i;let o;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH||t==="adfs"?o=t:o=(i=e?.tenantId)!==null&&i!==void 0?i:t,t&&o!==t&&!r.includes("*")&&!r.some(a=>a.localeCompare(o)===0)){let a=NIt(o);throw n?.info(a),new $r(a)}return o}s(_c,"processMultiTenantRequest");function ou(t,e){if(!e.match(/^[0-9a-zA-Z-.]+$/)){let r=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw t.info(ko("",r)),r}}s(ou,"checkTenantId");function AG(t,e,r){return e?(ou(t,e),e):(r||(r=i9),r!==i9?"common":"organizations")}s(AG,"resolveTenantId");function Zc(t){return!t||t.length===0?[]:t.includes("*")?aNe:t}s(Zc,"resolveAdditionallyAllowedTenantIds");d();d();d();d();d();var a9="$",G4="_";d();function MIt(t,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof t=="string"||typeof t=="number"||typeof t=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||t===void 0||t===null)}s(MIt,"isPrimitiveBody");function FIt(t){let e=Object.assign(Object.assign({},t.headers),t.body);return t.hasNullableType&&Object.getOwnPropertyNames(e).length===0?t.shouldWrapBody?{body:null}:null:t.shouldWrapBody?Object.assign(Object.assign({},t.headers),{body:t.body}):e}s(FIt,"handleNullableResponseAndWrappableBody");function tde(t,e){var r,n;let i=t.parsedHeaders;if(t.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:t.parsedBody});let o=e&&e.bodyMapper,a=!!o?.nullable,c=o?.type.name;if(c==="Stream")return Object.assign(Object.assign({},i),{blobBody:t.blobBody,readableStreamBody:t.readableStreamBody});let l=c==="Composite"&&o.type.modelProperties||{},u=Object.keys(l).some(f=>l[f].serializedName==="");if(c==="Sequence"||u){let f=(r=t.parsedBody)!==null&&r!==void 0?r:[];for(let p of Object.keys(l))l[p].serializedName&&(f[p]=(n=t.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))f[p]=i[p];return a&&!t.parsedBody&&!i&&Object.getOwnPropertyNames(l).length===0?null:f}return FIt({body:t.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:MIt(t.parsedBody,c)})}s(tde,"flattenResponse");var uy={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};d();d();d();d();d();var dy=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};d();d();d();var kNe=require("node:os"),PNe=Ne(require("node:util"),1),BNe=Ne(require("node:process"),1);function DNe(t,...e){BNe.stderr.write(`${PNe.default.format(t,...e)}${kNe.EOL}`)}s(DNe,"log");var NNe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,LNe,rde=[],nde=[],yG=[];NNe&&ide(NNe);var MNe=Object.assign(t=>FNe(t),{enable:ide,enabled:ode,disable:OIt,log:DNe});function ide(t){LNe=t,rde=[],nde=[];let e=/\*/g,r=t.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of r)n.startsWith("-")?nde.push(new RegExp(`^${n.substr(1)}$`)):rde.push(new RegExp(`^${n}$`));for(let n of yG)n.enabled=ode(n.namespace)}s(ide,"enable");function ode(t){if(t.endsWith("*"))return!0;for(let e of nde)if(e.test(t))return!1;for(let e of rde)if(e.test(t))return!0;return!1}s(ode,"enabled");function OIt(){let t=LNe||"";return ide(""),t}s(OIt,"disable");function FNe(t){let e=Object.assign(r,{enabled:ode(t),destroy:QIt,log:MNe.log,namespace:t,extend:UIt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return s(r,"debug"),yG.push(e),e}s(FNe,"createDebugger");function QIt(){let t=yG.indexOf(this);return t>=0?(yG.splice(t,1),!0):!1}s(QIt,"destroy");function UIt(t){let e=FNe(`${this.namespace}:${t}`);return e.log=this.log,e}s(UIt,"extend");var j4=MNe;var sde=["verbose","info","warning","error"],ONe={verbose:400,info:300,warning:200,error:100};function QNe(t,e){e.log=(...r)=>{t.log(...r)}}s(QNe,"patchLogMethod");function UNe(t){return sde.includes(t)}s(UNe,"isTypeSpecRuntimeLogLevel");function qIt(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,i=j4(t.namespace);i.log=(...f)=>{j4.log(...f)};function o(f){if(f&&!UNe(f))throw new Error(`Unknown log level '${f}'. Acceptable values: ${sde.join(",")}`);n=f;let p=[];for(let m of e)a(m)&&p.push(m.namespace);j4.enable(p.join(","))}s(o,"contextSetLogLevel"),r&&(UNe(r)?o(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${sde.join(", ")}.`));function a(f){return!!(n&&ONe[f.level]<=ONe[n])}s(a,"shouldEnable");function c(f,p){let m=Object.assign(f.extend(p),{level:p});if(QNe(f,m),a(m)){let h=j4.disable();j4.enable(h+","+m.namespace)}return e.add(m),m}s(c,"createLogger");function l(){return n}s(l,"contextGetLogLevel");function u(f){let p=i.extend(f);return QNe(i,p),{error:c(p,"error"),warning:c(p,"warning"),info:c(p,"info"),verbose:c(p,"verbose")}}return s(u,"contextCreateClientLogger"),{setLogLevel:o,getLogLevel:l,createClientLogger:u,logger:i}}s(qIt,"createLoggerContext");var qNe=qIt({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"}),HIt=qNe.logger;function c9(t){return qNe.createClientLogger(t)}s(c9,"createClientLogger");d();function CG(t){return t.toLowerCase()}s(CG,"normalizeName");function*WIt(t){for(let e of t.values())yield[e.name,e.value]}s(WIt,"headerIterator");var ade=class{static{s(this,"HttpHeadersImpl")}constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(CG(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(CG(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(CG(e))}delete(e){this._headersMap.delete(CG(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,i]of this._headersMap)r[n]=i.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return WIt(this._headersMap)}};function P0(t){return new ade(t)}s(P0,"createHttpHeaders");d();d();d();d();var HNe=require("node:crypto");var cde,GIt=typeof((cde=globalThis?.crypto)===null||cde===void 0?void 0:cde.randomUUID)=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):HNe.randomUUID;function V4(){return GIt()}s(V4,"randomUUID");var lde=class{static{s(this,"PipelineRequestImpl")}constructor(e){var r,n,i,o,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:P0(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||V4(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1,this.requestOverrides=e.requestOverrides,this.authSchemes=e.authSchemes}};function EG(t){return new lde(t)}s(EG,"createPipelineRequest");d();var WNe=new Set(["Deserialize","Serialize","Retry","Sign"]),ude=class t{static{s(this,"HttpPipeline")}constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!WNe.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!WNe.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((o,a)=>c=>a.sendRequest(c,o),o=>e.sendRequest(o))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(g){return{name:g,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}s(n,"createPhase");let i=n("Serialize"),o=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[i,o,a,c,l];function f(g){return g==="Retry"?c:g==="Serialize"?i:g==="Deserialize"?a:g==="Sign"?l:o}s(f,"getPhase");for(let g of this._policies){let y=g.policy,E=g.options,x=y.name;if(r.has(x))throw new Error("Duplicate policy names not allowed in pipeline");let b={policy:y,dependsOn:new Set,dependants:new Set};E.afterPhase&&(b.afterPhase=f(E.afterPhase),b.afterPhase.hasAfterPolicies=!0),r.set(x,b),f(E.phase).policies.add(b)}for(let g of this._policies){let{policy:y,options:E}=g,x=y.name,b=r.get(x);if(!b)throw new Error(`Missing node for policy ${x}`);if(E.afterPolicies)for(let _ of E.afterPolicies){let k=r.get(_);k&&(b.dependsOn.add(k),k.dependants.add(b))}if(E.beforePolicies)for(let _ of E.beforePolicies){let k=r.get(_);k&&(k.dependsOn.add(b),b.dependants.add(k))}}function p(g){g.hasRun=!0;for(let y of g.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let E of y.dependants)E.dependsOn.delete(y);r.delete(y.policy.name),g.policies.delete(y)}}s(p,"walkPhase");function m(){for(let g of u){if(p(g),g.policies.size>0&&g!==o){o.hasRun||p(o);return}g.hasAfterPolicies&&p(o)}}s(m,"walkPhases");let h=0;for(;r.size>0;){h++;let g=e.length;if(m(),e.length<=g&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function vG(){return ude.create()}s(vG,"createEmptyPipeline");d();d();d();function $4(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s($4,"isObject");function U_(t){if($4(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}s(U_,"isError");d();var GNe=require("node:util"),jNe=GNe.inspect.custom;d();var dde="REDACTED",jIt=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],VIt=["api-version"],rg=class{static{s(this,"Sanitizer")}constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=jIt.concat(e),r=VIt.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||$4(i)){if(r.has(i))return"[Circular]";r.add(i)}return i},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,dde);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=dde;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=dde;return r}};var $It=new rg,su=class t extends Error{static{s(this,"RestError")}constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.defineProperty(this,jNe,{value:s(()=>`RestError: ${this.message} 
 ${$It.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`,"value"),enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}};su.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";su.PARSE_ERROR="PARSE_ERROR";function xG(t){return t instanceof su?!0:U_(t)&&t.name==="RestError"}s(xG,"isRestError");d();function vf(t,e){return Buffer.from(t,e)}s(vf,"stringToUint8Array");d();d();var z4=Ne(require("node:http"),1),Y4=Ne(require("node:https"),1),IG=Ne(require("node:zlib"),1),$Ne=require("node:stream");d();var tm=c9("ts-http-runtime");var zIt={};function l9(t){return t&&typeof t.pipe=="function"}s(l9,"isReadableStream");function VNe(t){return t.readable===!1?Promise.resolve():new Promise(e=>{let r=s(()=>{e(),t.removeListener("close",r),t.removeListener("end",r),t.removeListener("error",r)},"handler");t.on("close",r),t.on("end",r),t.on("error",r)})}s(VNe,"isStreamComplete");function zNe(t){return t&&typeof t.byteLength=="number"}s(zNe,"isArrayBuffer");var bG=class extends $Ne.Transform{static{s(this,"ReportTransform")}_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},fde=class{static{s(this,"NodeHttpClient")}constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,i;let o=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new dy("The operation was aborted. Request has already been canceled.");a=s(m=>{m.type==="abort"&&o.abort()},"abortListener"),e.abortSignal.addEventListener("abort",a)}let c;e.timeout>0&&(c=setTimeout(()=>{let m=new rg;tm.info(`request to '${m.sanitizeUrl(e.url)}' timed out. canceling...`),o.abort()},e.timeout));let l=e.headers.get("Accept-Encoding"),u=l?.includes("gzip")||l?.includes("deflate"),f=typeof e.body=="function"?e.body():e.body;if(f&&!e.headers.has("Content-Length")){let m=XIt(f);m!==null&&e.headers.set("Content-Length",m)}let p;try{if(f&&e.onUploadProgress){let x=e.onUploadProgress,b=new bG(x);b.on("error",_=>{tm.error("Error in upload progress",_)}),l9(f)?f.pipe(b):b.end(f),f=b}let m=await this.makeRequest(e,o,f);c!==void 0&&clearTimeout(c);let h=YIt(m),y={status:(r=m.statusCode)!==null&&r!==void 0?r:0,headers:h,request:e};if(e.method==="HEAD")return m.resume(),y;p=u?KIt(m,h):m;let E=e.onDownloadProgress;if(E){let x=new bG(E);x.on("error",b=>{tm.error("Error in download progress",b)}),p.pipe(x),p=x}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((i=e.streamResponseStatusCodes)===null||i===void 0)&&i.has(y.status)?y.readableStreamBody=p:y.bodyAsText=await JIt(p),y}finally{if(e.abortSignal&&a){let m=Promise.resolve();l9(f)&&(m=VNe(f));let h=Promise.resolve();l9(p)&&(h=VNe(p)),Promise.all([m,h]).then(()=>{var g;a&&((g=e.abortSignal)===null||g===void 0||g.removeEventListener("abort",a))}).catch(g=>{tm.warning("Error when cleaning up abortListener on httpRequest",g)})}}}makeRequest(e,r,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c=(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),l=Object.assign({agent:c,hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})},e.requestOverrides);return new Promise((u,f)=>{let p=a?z4.request(l,u):Y4.request(l,u);p.once("error",m=>{var h;f(new su(m.message,{code:(h=m.code)!==null&&h!==void 0?h:su.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let m=new dy("The operation was aborted. Rejecting from abort signal callback while making request.");p.destroy(m),f(m)}),n&&l9(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):zNe(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(tm.error("Unrecognized body type",n),f(new su("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,r){var n;let i=e.disableKeepAlive;if(r)return i?z4.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new z4.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return Y4.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:zIt,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(tm.info("No cached TLS Agent exist, creating a new Agent"),a=new Y4.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function YIt(t){let e=P0();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}s(YIt,"getResponseHeaders");function KIt(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=IG.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=IG.createInflate();return t.pipe(n),n}return t}s(KIt,"getDecodedResponseStream");function JIt(t){return new Promise((e,r)=>{let n=[];t.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",i=>{i&&i?.name==="AbortError"?r(i):r(new su(`Error reading response as text: ${i.message}`,{code:su.PARSE_ERROR}))})})}s(JIt,"streamToText");function XIt(t){return t?Buffer.isBuffer(t)?t.length:l9(t)?null:zNe(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}s(XIt,"getBodyLength");function YNe(){return new fde}s(YNe,"createNodeHttpClient");function TG(){return YNe()}s(TG,"createDefaultHttpClient");d();d();d();d();var pde="logPolicy";function wG(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:tm.info,n=new rg({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:pde,async sendRequest(i,o){if(!r.enabled)return o(i);r(`Request: ${n.sanitize(i)}`);let a=await o(i);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}s(wG,"logPolicy");d();var mde="redirectPolicy",KNe=["GET","HEAD"];function _G(t={}){let{maxRetries:e=20}=t;return{name:mde,async sendRequest(r,n){let i=await n(r);return JNe(n,i,e)}}}s(_G,"redirectPolicy");async function JNe(t,e,r,n=0){let{request:i,status:o,headers:a}=e,c=a.get("location");if(c&&(o===300||o===301&&KNe.includes(i.method)||o===302&&KNe.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<r){let l=new URL(c,i.url);i.url=l.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await t(i);return JNe(t,u,r,n+1)}return e}s(JNe,"handleRedirect");d();d();d();function XNe(){return"User-Agent"}s(XNe,"getHeaderName");d();function ZNe(){return XNe()}s(ZNe,"getUserAgentHeaderName");var x7r=ZNe();d();var hde="decompressResponsePolicy";function SG(){return{name:hde,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}s(SG,"decompressResponsePolicy");d();d();d();d();function u9(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}s(u9,"getRandomIntegerInclusive");function d9(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+u9(0,n/2)}}s(d9,"calculateRetryDelay");d();d();var ZIt="The operation was aborted.";function e8e(t,e,r){return new Promise((n,i)=>{let o,a,c=s(()=>i(new dy(r?.abortErrorMsg?r?.abortErrorMsg:ZIt)),"rejectOnAbort"),l=s(()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)},"removeListeners");if(a=s(()=>(o&&clearTimeout(o),l(),c()),"onAborted"),r?.abortSignal&&r.abortSignal.aborted)return c();o=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}s(e8e,"delay");function t8e(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}s(t8e,"parseHeaderValueAsNumber");var gde="Retry-After",eTt=["retry-after-ms","x-ms-retry-after-ms",gde];function r8e(t){if(t&&[429,503].includes(t.status))try{for(let i of eTt){let o=t8e(t,i);if(o===0||o)return o*(i===gde?1e3:1)}let e=t.headers.get(gde);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}s(r8e,"getRetryAfterInMs");function n8e(t){return Number.isFinite(r8e(t))}s(n8e,"isThrottlingRetryResponse");function Ade(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=r8e(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}s(Ade,"throttlingRetryStrategy");var tTt=1e3,rTt=1e3*64;function RG(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:tTt,i=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:rTt;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:a,responseError:c}){let l=iTt(c),u=l&&t.ignoreSystemErrors,f=nTt(a),p=f&&t.ignoreHttpStatusCodes;return a&&(n8e(a)||!f)||p||u?{skipStrategy:!0}:c&&!l&&!f?{errorToThrow:c}:d9(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}s(RG,"exponentialRetryStrategy");function nTt(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}s(nTt,"isExponentialRetryResponse");function iTt(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}s(iTt,"isSystemError");d();var oTt=c9("ts-http-runtime retryPolicy"),sTt="retryPolicy";function _b(t,e={maxRetries:3}){let r=e.logger||oTt;return{name:sTt,async sendRequest(n,i){var o,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await i(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(f){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=f,!f||l.name!=="RestError")throw f;c=l.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw r.error(`Retry ${u}: Request aborted.`),new dy;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:3)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let f of t){let p=f.logger||r;p.info(`Retry ${u}: Processing retry strategy ${f.name}.`);let m=f.retry({retryCount:u,response:c,responseError:l});if(m.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:g,redirectTo:y}=m;if(h)throw p.error(`Retry ${u}: Retry strategy ${f.name} throws error:`,h),h;if(g||g===0){p.info(`Retry ${u}: Retry strategy ${f.name} retries after ${g}`),await e8e(g,void 0,{abortSignal:n.abortSignal});continue e}if(y){p.info(`Retry ${u}: Retry strategy ${f.name} redirects to ${y}`),n.url=y;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}s(_b,"retryPolicy");var yde="defaultRetryPolicy";function kG(t={}){var e;return{name:yde,sendRequest:_b([Ade(),RG(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:3}).sendRequest}}s(kG,"defaultRetryPolicy");d();d();var Cde,Ede,vde,xde,i8e=typeof window<"u"&&typeof window.document<"u",o8e=typeof self=="object"&&typeof self?.importScripts=="function"&&(((Cde=self.constructor)===null||Cde===void 0?void 0:Cde.name)==="DedicatedWorkerGlobalScope"||((Ede=self.constructor)===null||Ede===void 0?void 0:Ede.name)==="ServiceWorkerGlobalScope"||((vde=self.constructor)===null||vde===void 0?void 0:vde.name)==="SharedWorkerGlobalScope"),s8e=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",a8e=typeof Bun<"u"&&typeof Bun.version<"u",Sb=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!(!((xde=globalThis.process.versions)===null||xde===void 0)&&xde.node);var c8e=typeof navigator<"u"&&navigator?.product==="ReactNative";var bde="formDataPolicy";function aTt(t){var e;let r={};for(let[n,i]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(i);return r}s(aTt,"formDataToFormDataMap");function PG(){return{name:bde,async sendRequest(t,e){if(Sb&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=aTt(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=cTt(t.formData):await lTt(t.formData,t),t.formData=void 0}return e(t)}}}s(PG,"formDataPolicy");function cTt(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.append(r,i.toString());else e.append(r,n.toString());return e.toString()}s(cTt,"wwwFormUrlEncode");async function lTt(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[i,o]of Object.entries(t))for(let a of Array.isArray(o)?o:[o])if(typeof a=="string")n.push({headers:P0({"Content-Disposition":`form-data; name="${i}"`}),body:vf(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${i}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=P0();l.set("Content-Disposition",`form-data; name="${i}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}s(lTt,"prepareFormData");d();var F8e=Ne(k8e(),1),O8e=Ne(D8e(),1);var cwt="HTTPS_PROXY",lwt="HTTP_PROXY",uwt="ALL_PROXY",dwt="NO_PROXY",Bde="proxyPolicy",N8e=[],Q8e=!1,fwt=new Map;function QG(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}s(QG,"getEnvironmentValue");function pwt(){if(!process)return;let t=QG(cwt),e=QG(uwt),r=QG(lwt);return t||e||r}s(pwt,"loadEnvironmentProxyValue");function mwt(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return r?.set(n,i),i}s(mwt,"isBypassed");function hwt(){let t=QG(dwt);return Q8e=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}s(hwt,"loadNoProxy");function gwt(){let t=pwt();return t?new URL(t):void 0}s(gwt,"getDefaultProxySettingsInternal");function L8e(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}s(L8e,"getUrlFromProxySettings");function M8e(t,e,r){if(t.agent)return;let i=new URL(t.url).protocol!=="https:";t.tlsSettings&&tm.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let o=t.headers.toJSON();i?(e.httpProxyAgent||(e.httpProxyAgent=new O8e.HttpProxyAgent(r,{headers:o})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new F8e.HttpsProxyAgent(r,{headers:o})),t.agent=e.httpsProxyAgent)}s(M8e,"setProxyAgentOnRequest");function UG(t,e){Q8e||N8e.push(...hwt());let r=t?L8e(t):gwt(),n={};return{name:Bde,async sendRequest(i,o){var a;return!i.proxySettings&&r&&!mwt(i.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:N8e,e?.customNoProxyList?void 0:fwt)?M8e(i,n,r):i.proxySettings&&M8e(i,n,L8e(i.proxySettings)),o(i)}}}s(UG,"proxyPolicy");d();var Dde="agentPolicy";function qG(t){return{name:Dde,sendRequest:s(async(e,r)=>(e.agent||(e.agent=t),r(e)),"sendRequest")}}s(qG,"agentPolicy");d();var Nde="tlsPolicy";function HG(t){return{name:Nde,sendRequest:s(async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e)),"sendRequest")}}s(HG,"tlsPolicy");d();d();function WG(t){return typeof t.stream=="function"}s(WG,"isBlob");d();d();function U8e(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:s(function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}s(U8e,"__values");function my(t){return this instanceof my?(this.v=t,this):new my(t)}s(my,"__await");function Lde(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(g){return Promise.resolve(g).then(h,p)}}function c(h,g){n[h]&&(i[h]=function(y){return new Promise(function(E,x){o.push([h,y,E,x])>1||l(h,y)})},g&&(i[h]=g(i[h])))}function l(h,g){try{u(n[h](g))}catch(y){m(o[0][3],y)}}function u(h){h.value instanceof my?Promise.resolve(h.value.v).then(f,p):m(o[0][2],h)}function f(h){l("next",h)}function p(h){l("throw",h)}function m(h,g){h(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}s(Lde,"__asyncGenerator");function q8e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof U8e=="function"?U8e(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(c,l){a=t[o](a),i(c,l,a.done,a.value)})}}function i(o,a,c,l){Promise.resolve(l).then(function(u){o({value:u,done:c})},a)}}s(q8e,"__asyncValues");var GG=require("stream");function H8e(){return Lde(this,arguments,s(function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield my(e.read());if(r)return yield my(void 0);yield yield my(n)}}finally{e.releaseLock()}},"streamAsyncIterator_1"))}s(H8e,"streamAsyncIterator");function Awt(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=H8e.bind(t)),t.values||(t.values=H8e.bind(t))}s(Awt,"makeAsyncIterable");function W8e(t){return t instanceof ReadableStream?(Awt(t),GG.Readable.fromWeb(t)):t}s(W8e,"ensureNodeStream");function ywt(t){return t instanceof Uint8Array?GG.Readable.from(Buffer.from(t)):WG(t)?W8e(t.stream()):W8e(t)}s(ywt,"toStream");async function G8e(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(ywt);return GG.Readable.from(function(){return Lde(this,arguments,function*(){var r,n,i,o;for(let u of e)try{for(var a=!0,c=(n=void 0,q8e(u)),l;l=yield my(c.next()),r=l.done,!r;a=!0)o=l.value,a=!1,yield yield my(o)}catch(f){n={error:f}}finally{try{!a&&!r&&(i=c.return)&&(yield my(i.call(c)))}finally{if(n)throw n.error}}})}())}}s(G8e,"concat");function Cwt(){return`----AzSDKFormBoundary${V4()}`}s(Cwt,"generateBoundary");function Ewt(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}s(Ewt,"encodeHeaders");function vwt(t){return t instanceof Uint8Array?t.byteLength:WG(t)?t.size===-1?void 0:t.size:void 0}s(vwt,"getLength");function xwt(t){let e=0;for(let r of t){let n=vwt(r);if(n===void 0)return;e+=n}return e}s(xwt,"getTotalLength");async function bwt(t,e,r){let n=[vf(`--${r}`,"utf-8"),...e.flatMap(o=>[vf(`\r
`,"utf-8"),vf(Ewt(o.headers),"utf-8"),vf(`\r
`,"utf-8"),o.body,vf(`\r
--${r}`,"utf-8")]),vf(`--\r
\r
`,"utf-8")],i=xwt(n);i&&t.headers.set("Content-Length",i),t.body=await G8e(n)}s(bwt,"buildRequestBody");var p9="multipartPolicy",Iwt=70,Twt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function wwt(t){if(t.length>Iwt)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!Twt.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}s(wwt,"assertValidBoundary");function jG(){return{name:p9,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,i=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",o=i.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!o)throw new Error(`Got multipart request body, but content-type header was not multipart: ${i}`);let[,a,c]=o;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?wwt(n):n=Cwt(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await bwt(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}s(jG,"multipartPolicy");d();d();d();d();d();d();d();d();d();d();d();d();function VG(){return vG()}s(VG,"createEmptyPipeline");d();d();d();var hy=Tb("core-rest-pipeline");d();d();d();d();function Ode(t={}){return wG(Object.assign({logger:hy.info},t))}s(Ode,"logPolicy");d();function Qde(t={}){return _G(t)}s(Qde,"redirectPolicy");d();d();d();var tP=Ne(require("node:os"),1),$G=Ne(require("node:process"),1);function j8e(){return"User-Agent"}s(j8e,"getHeaderName");async function V8e(t){if($G&&$G.versions){let e=$G.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${tP.arch()}-${tP.type()}-${tP.release()})`)}s(V8e,"setPlatformSpecificData");d();var zG="1.22.0";function Lwt(t){let e=[];for(let[r,n]of t){let i=n?`${r}/${n}`:r;e.push(i)}return e.join(" ")}s(Lwt,"getUserAgentString");function $8e(){return j8e()}s($8e,"getUserAgentHeaderName");async function YG(t){let e=new Map;e.set("core-rest-pipeline",zG),await V8e(e);let r=Lwt(e);return t?`${t} ${r}`:r}s(YG,"getUserAgentValue");var z8e=$8e(),Y8e="userAgentPolicy";function Ude(t={}){let e=YG(t.userAgentPrefix);return{name:Y8e,async sendRequest(r,n){return r.headers.has(z8e)||r.headers.set(z8e,await e),n(r)}}}s(Ude,"userAgentPolicy");d();d();d();d();d();d();d();d();d();var W_=class extends Error{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError"}};function qde(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:i}=e??{};return new Promise((o,a)=>{function c(){a(new W_(i??"The operation was aborted."))}s(c,"rejectOnAbort");function l(){n?.removeEventListener("abort",u)}s(l,"removeListeners");function u(){r?.(),l(),c()}if(s(u,"onAbort"),n?.aborted)return c();try{t(f=>{l(),o(f)},f=>{l(),a(f)})}catch(f){a(f)}n?.addEventListener("abort",u)})}s(qde,"createAbortablePromise");d();var Uwt="The delay was aborted.";function Hde(t,e){let r,{abortSignal:n,abortErrorMsg:i}=e??{};return qde(o=>{r=setTimeout(o,t)},{cleanupBeforeAbort:s(()=>clearTimeout(r),"cleanupBeforeAbort"),abortSignal:n,abortErrorMsg:i??Uwt})}s(Hde,"delay");d();function rP(t){if(U_(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}s(rP,"getErrorMessage");d();function K8e(t,e){return d9(t,e)}s(K8e,"calculateRetryDelay");function KG(t){return U_(t)}s(KG,"isError");var JG=Sb,nP=Sb;var J8e=Symbol("rawContent");function Wde(t){return typeof t[J8e]=="function"}s(Wde,"hasRawContent");function X8e(t){return Wde(t)?t[J8e]():t}s(X8e,"getRawContent");var XG=p9;function Gde(){let t=jG();return{name:XG,sendRequest:s(async(e,r)=>{if(e.multipartBody)for(let n of e.multipartBody.parts)Wde(n.body)&&(n.body=X8e(n.body));return t.sendRequest(e,r)},"sendRequest")}}s(Gde,"multipartPolicy");d();function jde(){return SG()}s(jde,"decompressResponsePolicy");d();function Vde(t={}){return kG(t)}s(Vde,"defaultRetryPolicy");d();function $de(){return PG()}s($de,"formDataPolicy");d();function zde(t,e){return UG(t,e)}s(zde,"proxyPolicy");d();var Z8e="setClientRequestIdPolicy";function Yde(t="x-ms-client-request-id"){return{name:Z8e,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}s(Yde,"setClientRequestIdPolicy");d();function Kde(t){return qG(t)}s(Kde,"agentPolicy");d();function Jde(t){return HG(t)}s(Jde,"tlsPolicy");d();d();d();d();var iP={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function e6e(t={}){let e=new Xde(t.parentContext);return t.span&&(e=e.setValue(iP.span,t.span)),t.namespace&&(e=e.setValue(iP.namespace,t.namespace)),e}s(e6e,"createTracingContext");var Xde=class t{static{s(this,"TracingContextImpl")}constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};d();var r6e=Ne(t6e(),1),ej=r6e.state;function qwt(){return{end:s(()=>{},"end"),isRecording:s(()=>!1,"isRecording"),recordException:s(()=>{},"recordException"),setAttribute:s(()=>{},"setAttribute"),setStatus:s(()=>{},"setStatus"),addEvent:s(()=>{},"addEvent")}}s(qwt,"createDefaultTracingSpan");function Hwt(){return{createRequestHeaders:s(()=>({}),"createRequestHeaders"),parseTraceparentHeader:s(()=>{},"parseTraceparentHeader"),startSpan:s((t,e)=>({span:qwt(),tracingContext:e6e({parentContext:e.tracingContext})}),"startSpan"),withContext(t,e,...r){return e(...r)}}}s(Hwt,"createDefaultInstrumenter");function m9(){return ej.instrumenterImplementation||(ej.instrumenterImplementation=Hwt()),ej.instrumenterImplementation}s(m9,"getInstrumenter");d();function h9(t){let{namespace:e,packageName:r,packageVersion:n}=t;function i(u,f,p){var m;let h=m9().startSpan(u,Object.assign(Object.assign({},p),{packageName:r,packageVersion:n,tracingContext:(m=f?.tracingOptions)===null||m===void 0?void 0:m.tracingContext})),g=h.tracingContext,y=h.span;g.getValue(iP.namespace)||(g=g.setValue(iP.namespace,e)),y.setAttribute("az.namespace",g.getValue(iP.namespace));let E=Object.assign({},f,{tracingOptions:Object.assign(Object.assign({},f?.tracingOptions),{tracingContext:g})});return{span:y,updatedOptions:E}}s(i,"startSpan");async function o(u,f,p,m){let{span:h,updatedOptions:g}=i(u,f,m);try{let y=await a(g.tracingOptions.tracingContext,()=>Promise.resolve(p(g,h)));return h.setStatus({status:"success"}),y}catch(y){throw h.setStatus({status:"error",error:y}),y}finally{h.end()}}s(o,"withSpan");function a(u,f,...p){return m9().withContext(u,f,...p)}s(a,"withContext");function c(u){return m9().parseTraceparentHeader(u)}s(c,"parseTraceparentHeader");function l(u){return m9().createRequestHeaders(u)}return s(l,"createRequestHeaders"),{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}s(h9,"createTracingClient");d();var oP=su;function g9(t){return xG(t)}s(g9,"isRestError");var n6e="tracingPolicy";function Zde(t={}){let e=YG(t.userAgentPrefix),r=new rg({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=Wwt();return{name:n6e,async sendRequest(i,o){var a;if(!n)return o(i);let c=await e,l={"http.url":r.sanitizeUrl(i.url),"http.method":i.method,"http.user_agent":c,requestId:i.requestId};c&&(l["http.user_agent"]=c);let{span:u,tracingContext:f}=(a=Gwt(n,i,l))!==null&&a!==void 0?a:{};if(!u||!f)return o(i);try{let p=await n.withContext(f,o,i);return Vwt(u,p),p}catch(p){throw jwt(u,p),p}}}}s(Zde,"tracingPolicy");function Wwt(){try{return h9({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:zG})}catch(t){hy.warning(`Error when creating the TracingClient: ${rP(t)}`);return}}s(Wwt,"tryCreateTracingClient");function Gwt(t,e,r){try{let{span:n,updatedOptions:i}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let o=t.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,c]of Object.entries(o))e.headers.set(a,c);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){hy.warning(`Skipping creating a tracing span due to an error: ${rP(n)}`);return}}s(Gwt,"tryCreateSpan");function jwt(t,e){try{t.setStatus({status:"error",error:KG(e)?e:void 0}),g9(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){hy.warning(`Skipping tracing span processing due to an error: ${rP(r)}`)}}s(jwt,"tryProcessError");function Vwt(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),e.status>=400&&t.setStatus({status:"error"}),t.end()}catch(r){hy.warning(`Skipping tracing span processing due to an error: ${rP(r)}`)}}s(Vwt,"tryProcessResponse");d();d();function tj(t){if(t instanceof AbortSignal)return{abortSignal:t};if(t.aborted)return{abortSignal:AbortSignal.abort(t.reason)};let e=new AbortController,r=!0;function n(){r&&(t.removeEventListener("abort",i),r=!1)}s(n,"cleanup");function i(){e.abort(t.reason),n()}return s(i,"listener"),t.addEventListener("abort",i),{abortSignal:e.signal,cleanup:n}}s(tj,"wrapAbortSignalLike");var $wt="wrapAbortSignalLikePolicy";function i6e(){return{name:$wt,sendRequest:s(async(t,e)=>{if(!t.abortSignal)return e(t);let{abortSignal:r,cleanup:n}=tj(t.abortSignal);t.abortSignal=r;try{return await e(t)}finally{n?.()}},"sendRequest")}}s(i6e,"wrapAbortSignalLikePolicy");function efe(t){var e;let r=VG();return nP&&(t.agent&&r.addPolicy(Kde(t.agent)),t.tlsOptions&&r.addPolicy(Jde(t.tlsOptions)),r.addPolicy(zde(t.proxyOptions)),r.addPolicy(jde())),r.addPolicy(i6e()),r.addPolicy($de(),{beforePolicies:[XG]}),r.addPolicy(Ude(t.userAgentOptions)),r.addPolicy(Yde((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy(Gde(),{afterPhase:"Deserialize"}),r.addPolicy(Vde(t.retryOptions),{phase:"Retry"}),r.addPolicy(Zde(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),nP&&r.addPolicy(Qde(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Ode(t.loggingOptions),{afterPhase:"Sign"}),r}s(efe,"createPipelineFromOptions");d();function tfe(){let t=TG();return{async sendRequest(e){let{abortSignal:r,cleanup:n}=e.abortSignal?tj(e.abortSignal):{};try{return e.abortSignal=r,await t.sendRequest(e)}finally{n?.()}}}}s(tfe,"createDefaultHttpClient");d();function kb(t){return P0(t)}s(kb,"createHttpHeaders");d();function ng(t){return EG(t)}s(ng,"createPipelineRequest");d();d();d();d();var Ywt=Tb("core-rest-pipeline retryPolicy");function rfe(t,e={maxRetries:3}){return _b(t,Object.assign({logger:Ywt},e))}s(rfe,"retryPolicy");d();d();var Kwt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Jwt(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let o=await t();if(o===null)throw new Error("Failed to refresh access token.");return o}}s(n,"tryGetAccessToken");let i=await n();for(;i===null;)await Hde(e),i=await n();return i}s(Jwt,"beginRefresh");function nfe(t,e){let r=null,n=null,i,o=Object.assign(Object.assign({},Kwt),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return a.isRefreshing?!1:n?.refreshAfterTimestamp&&n.refreshAfterTimestamp<Date.now()?!0:((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var f;return a.isRefreshing||(r=Jwt(s(()=>t.getToken(l,u),"tryGetAccessToken"),o.retryIntervalInMs,(f=n?.expiresOnTimestamp)!==null&&f!==void 0?f:Date.now()).then(m=>(r=null,n=m,i=u.tenantId,n)).catch(m=>{throw r=null,n=null,i=void 0,m})),r}return s(c,"refresh"),async(l,u)=>{let f=!!u.claims,p=i!==u.tenantId;return f&&(n=null),p||f||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}s(nfe,"createTokenCycler");var c6e="bearerTokenAuthenticationPolicy";async function rj(t,e){try{return[await e(t),void 0]}catch(r){if(g9(r)&&r.response)return[r.response,r];throw r}}s(rj,"trySendRequest");async function Xwt(t){let{scopes:e,getAccessToken:r,request:n}=t,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions,enableCae:!0},o=await r(e,i);o&&t.request.headers.set("Authorization",`Bearer ${o.token}`)}s(Xwt,"defaultAuthorizeRequest");function o6e(t){return t.status===401&&t.headers.has("WWW-Authenticate")}s(o6e,"isChallengeResponse");async function s6e(t,e){var r;let{scopes:n}=t,i=await t.getAccessToken(n,{enableCae:!0,claims:e});return i?(t.request.headers.set("Authorization",`${(r=i.tokenType)!==null&&r!==void 0?r:"Bearer"} ${i.token}`),!0):!1}s(s6e,"authorizeRequestOnCaeChallenge");function nj(t){var e,r,n;let{credential:i,scopes:o,challengeCallbacks:a}=t,c=t.logger||hy,l={authorizeRequest:(r=(e=a?.authorizeRequest)===null||e===void 0?void 0:e.bind(a))!==null&&r!==void 0?r:Xwt,authorizeRequestOnChallenge:(n=a?.authorizeRequestOnChallenge)===null||n===void 0?void 0:n.bind(a)},u=i?nfe(i):()=>Promise.resolve(null);return{name:c6e,async sendRequest(f,p){if(!f.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(o)?o:[o],request:f,getAccessToken:u,logger:c});let m,h,g;if([m,h]=await rj(f,p),o6e(m)){let y=a6e(m.headers.get("WWW-Authenticate"));if(y){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await s6e({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await rj(f,p))}else if(l.authorizeRequestOnChallenge&&(g=await l.authorizeRequestOnChallenge({scopes:Array.isArray(o)?o:[o],request:f,response:m,getAccessToken:u,logger:c}),g&&([m,h]=await rj(f,p)),o6e(m)&&(y=a6e(m.headers.get("WWW-Authenticate")),y))){let E;try{E=atob(y)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${y}`),m}g=await s6e({scopes:Array.isArray(o)?o:[o],response:m,request:f,getAccessToken:u,logger:c},E),g&&([m,h]=await rj(f,p))}}if(h)throw h;return m}}}s(nj,"bearerTokenAuthenticationPolicy");function Zwt(t){let e=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,r=/(\w+)="([^"]*)"/g,n=[],i;for(;(i=e.exec(t))!==null;){let o=i[1],a=i[2],c={},l;for(;(l=r.exec(a))!==null;)c[l[1]]=l[2];n.push({scheme:o,params:c})}return n}s(Zwt,"parseChallenges");function a6e(t){var e;return t?(e=Zwt(t).find(n=>n.scheme==="Bearer"&&n.params.claims&&n.params.error==="insufficient_claims"))===null||e===void 0?void 0:e.params.claims:void 0}s(a6e,"getCaeChallengeClaims");d();d();d();d();d();d();var u6e=Ne(l6e(),1),ife=u6e.state;function Pb(t,e,r){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=d6e(t,n);!a.propertyFound&&r&&(a=d6e(r,n));let c=!1;a.propertyFound||(c=i.required||n[0]==="options"&&n.length===2),o=c?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let c=i.type.modelProperties[a],l=n[a],u=Pb(t,{parameterPath:l,mapper:c},r);u!==void 0&&(o||(o={}),o[a]=u)}}return o}s(Pb,"getOperationArgumentValueFromParameter");function d6e(t,e){let r={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(t&&i in t)t=t[i];else break}return n===e.length&&(r.propertyValue=t,r.propertyFound=!0),r}s(d6e,"getPropertyFromParameterPath");var f6e=Symbol.for("@azure/core-client original request");function e_t(t){return f6e in t}s(e_t,"hasOriginalRequest");function H1(t){if(e_t(t))return H1(t[f6e]);let e=ife.operationRequestMap.get(t);return e||(e={},ife.operationRequestMap.set(t,e)),e}s(H1,"getOperationRequestInfo");var t_t=["application/json","text/json"],r_t=["application/xml","application/atom+xml"],p6e="deserializationPolicy";function ofe(t={}){var e,r,n,i,o,a,c;let l=(r=(e=t.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&r!==void 0?r:t_t,u=(i=(n=t.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:r_t,f=t.parseXML,p=t.serializerOptions,m={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=p?.xml.xmlCharKey)!==null&&c!==void 0?c:G4}};return{name:p6e,async sendRequest(h,g){let y=await g(h);return o_t(l,u,y,m,f)}}}s(ofe,"deserializationPolicy");function n_t(t){let e,r=t.request,n=H1(r),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,t):e=i.responses[t.status]),e}s(n_t,"getOperationResponseMap");function i_t(t){let e=t.request,r=H1(e),n=r?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(t),i}s(i_t,"shouldDeserializeResponse");async function o_t(t,e,r,n,i){let o=await c_t(t,e,r,n,i);if(!i_t(o))return o;let a=H1(o.request),c=a?.operationSpec;if(!c||!c.responses)return o;let l=n_t(o),{error:u,shouldReturnResponse:f}=a_t(o,c,l,n);if(u)throw u;if(f)return o;if(l){if(l.bodyMapper){let p=o.parsedBody;c.isXML&&l.bodyMapper.type.name===uy.Sequence&&(p=typeof p=="object"?p[l.bodyMapper.xmlElementName]:[]);try{o.parsedBody=c.serializer.deserialize(l.bodyMapper,p,"operationRes.parsedBody",n)}catch(m){throw new oP(`Error ${m} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else c.httpMethod==="HEAD"&&(o.parsedBody=r.status>=200&&r.status<300);l.headersMapper&&(o.parsedHeaders=c.serializer.deserialize(l.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return o}s(o_t,"deserializeResponseBody");function s_t(t){let e=Object.keys(t.responses);return e.length===0||e.length===1&&e[0]==="default"}s(s_t,"isOperationSpecEmpty");function a_t(t,e,r,n){var i;let o=200<=t.status&&t.status<300;if(s_t(e)?o:!!r)if(r){if(!r.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let c=r??e.responses.default,l=!((i=t.request.streamResponseStatusCodes)===null||i===void 0)&&i.has(t.status)?`Unexpected status code: ${t.status}`:t.bodyAsText,u=new oP(l,{statusCode:t.status,request:t.request,response:t});if(!c)throw u;let f=c.bodyMapper,p=c.headersMapper;try{if(t.parsedBody){let m=t.parsedBody,h;if(f){let y=m;if(e.isXML&&f.type.name===uy.Sequence){y=[];let E=f.xmlElementName;typeof m=="object"&&E&&(y=m[E])}h=e.serializer.deserialize(f,y,"error.response.parsedBody",n)}let g=m.error||h||m;u.code=g.code,g.message&&(u.message=g.message),f&&(u.response.parsedBody=h)}t.headers&&p&&(u.response.parsedHeaders=e.serializer.deserialize(p,t.headers.toJSON(),"operationRes.parsedHeaders"))}catch(m){u.message=`Error "${m.message}" occurred in deserializing the responseBody - "${t.bodyAsText}" for the default response.`}return{error:u,shouldReturnResponse:!1}}s(a_t,"handleErrorResponse");async function c_t(t,e,r,n,i){var o;if(!(!((o=r.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(r.status))&&r.bodyAsText){let a=r.bodyAsText,c=r.headers.get("Content-Type")||"",l=c?c.split(";").map(u=>u.toLowerCase()):[];try{if(l.length===0||l.some(u=>t.indexOf(u)!==-1))return r.parsedBody=JSON.parse(a),r;if(l.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return r.parsedBody=u,r}}catch(u){let f=`Error "${u}" occurred while parsing the response body - ${r.bodyAsText}.`,p=u.code||oP.PARSE_ERROR;throw new oP(f,{code:p,statusCode:r.status,request:r.request,response:r})}}return r}s(c_t,"parse");d();d();function m6e(t){let e=new Set;for(let r in t.responses){let n=t.responses[r];n.bodyMapper&&n.bodyMapper.type.name===uy.Stream&&e.add(Number(r))}return e}s(m6e,"getStreamingResponseStatusCodes");function gy(t){let{parameterPath:e,mapper:r}=t,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=r.serializedName,n}s(gy,"getPathStringFromParameter");var h6e="serializationPolicy";function sfe(t={}){let e=t.stringifyXML;return{name:h6e,async sendRequest(r,n){let i=H1(r),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(l_t(r,a,o),u_t(r,a,o,e)),n(r)}}}s(sfe,"serializationPolicy");function l_t(t,e,r){var n,i;if(r.headerParameters)for(let a of r.headerParameters){let c=Pb(e,a);if(c!=null||a.mapper.required){c=r.serializer.serialize(a.mapper,c,gy(a));let l=a.mapper.headerCollectionPrefix;if(l)for(let u of Object.keys(c))t.headers.set(l+u,c[u]);else t.headers.set(a.mapper.serializedName||gy(a),c)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))t.headers.set(a,o[a])}s(l_t,"serializeHeaders");function u_t(t,e,r,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,c,l;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,f={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(c=u?.xml.xmlCharKey)!==null&&c!==void 0?c:G4}},p=f.xml.xmlCharKey;if(r.requestBody&&r.requestBody.mapper){t.body=Pb(e,r.requestBody);let m=r.requestBody.mapper,{required:h,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:x,xmlNamespacePrefix:b,nullable:_}=m,k=m.type.name;try{if(t.body!==void 0&&t.body!==null||_&&t.body===null||h){let P=gy(r.requestBody);t.body=r.serializer.serialize(m,t.body,P,f);let N=k===uy.Stream;if(r.isXML){let M=b?`xmlns:${b}`:"xmlns",J=d_t(x,M,k,t.body,f);k===uy.Sequence?t.body=n(f_t(J,E||y||g,M,x),{rootName:y||g,xmlCharKey:p}):N||(t.body=n(J,{rootName:y||g,xmlCharKey:p}))}else{if(k===uy.String&&(!((l=r.contentType)===null||l===void 0)&&l.match("text/plain")||r.mediaType==="text"))return;N||(t.body=JSON.stringify(t.body))}}}catch(P){throw new Error(`Error "${P.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(r.formDataParameters&&r.formDataParameters.length>0){t.formData={};for(let m of r.formDataParameters){let h=Pb(e,m);if(h!=null){let g=m.mapper.serializedName||gy(m);t.formData[g]=r.serializer.serialize(m.mapper,h,gy(m),f)}}}}s(u_t,"serializeRequestBody");function d_t(t,e,r,n,i){if(t&&!["Composite","Sequence","Dictionary"].includes(r)){let o={};return o[i.xml.xmlCharKey]=n,o[a9]={[e]:t},o}return n}s(d_t,"getXmlValueWithNamespace");function f_t(t,e,r,n){if(Array.isArray(t)||(t=[t]),!r||!n)return{[e]:t};let i={[e]:t};return i[a9]={[r]:n},i}s(f_t,"prepareXMLRootList");function afe(t={}){let e=efe(t??{});return t.credentialOptions&&e.addPolicy(nj({credential:t.credentialOptions.credential,scopes:t.credentialOptions.credentialScopes})),e.addPolicy(sfe(t.serializationOptions),{phase:"Serialize"}),e.addPolicy(ofe(t.deserializationOptions),{phase:"Deserialize"}),e}s(afe,"createClientPipeline");d();var cfe;function g6e(){return cfe||(cfe=tfe()),cfe}s(g6e,"getCachedDefaultHttpClient");d();var p_t={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function y6e(t,e,r,n){let i=m_t(e,r,n),o=!1,a=A6e(t,i);if(e.path){let u=A6e(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),h_t(u)?(a=u,o=!0):a=g_t(a,u)}let{queryParams:c,sequenceParams:l}=A_t(e,r,n);return a=C_t(a,c,l,o),a}s(y6e,"getRequestUrl");function A6e(t,e){let r=t;for(let[n,i]of e)r=r.split(n).join(i);return r}s(A6e,"replaceAll");function m_t(t,e,r){var n;let i=new Map;if(!((n=t.urlParameters)===null||n===void 0)&&n.length)for(let o of t.urlParameters){let a=Pb(e,o,r),c=gy(o);a=t.serializer.serialize(o.mapper,a,c),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||c}}`,a)}return i}s(m_t,"calculateUrlReplacements");function h_t(t){return t.includes("://")}s(h_t,"isAbsoluteUrl");function g_t(t,e){if(!e)return t;let r=new URL(t),n=r.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(r.search=r.search?`${r.search}&${a}`:a)}else n=n+e;return r.pathname=n,r.toString()}s(g_t,"appendPath");function A_t(t,e,r){var n;let i=new Map,o=new Set;if(!((n=t.queryParameters)===null||n===void 0)&&n.length)for(let a of t.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let c=Pb(e,a,r);if(c!=null||a.mapper.required){c=t.serializer.serialize(a.mapper,c,gy(a));let l=a.collectionFormat?p_t[a.collectionFormat]:"";if(Array.isArray(c)&&(c=c.map(u=>u??"")),a.collectionFormat==="Multi"&&c.length===0)continue;Array.isArray(c)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(c=c.join(l)),a.skipEncoding||(Array.isArray(c)?c=c.map(u=>encodeURIComponent(u)):c=encodeURIComponent(c)),Array.isArray(c)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(c=c.join(l)),i.set(a.mapper.serializedName||gy(a),c)}}return{queryParams:i,sequenceParams:o}}s(A_t,"calculateQueryParameters");function y_t(t){let e=new Map;if(!t||t[0]!=="?")return e;t=t.slice(1);let r=t.split("&");for(let n of r){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}s(y_t,"simpleParseQueryParams");function C_t(t,e,r,n=!1){if(e.size===0)return t;let i=new URL(t),o=y_t(i.search);for(let[c,l]of e){let u=o.get(c);if(Array.isArray(u))if(Array.isArray(l)){u.push(...l);let f=new Set(u);o.set(c,Array.from(f))}else u.push(l);else u?(Array.isArray(l)?l.unshift(u):r.has(c)&&o.set(c,[u,l]),n||o.set(c,l)):o.set(c,l)}let a=[];for(let[c,l]of o)if(typeof l=="string")a.push(`${c}=${l}`);else if(Array.isArray(l))for(let u of l)a.push(`${c}=${u}`);else a.push(`${c}=${l}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}s(C_t,"appendQueryParams");d();var lfe=Tb("core-client");var A9=class{static{s(this,"ServiceClient")}constructor(e={}){var r,n;if(this._requestContentType=e.requestContentType,this._endpoint=(r=e.endpoint)!==null&&r!==void 0?r:e.baseUri,e.baseUri&&lfe.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||g6e(),this.pipeline=e.pipeline||E_t(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,r){let n=r.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=y6e(n,r,e,this),o=ng({url:i});o.method=r.httpMethod;let a=H1(o);a.operationSpec=r,a.operationArguments=e;let c=r.contentType||this._requestContentType;c&&r.requestBody&&o.headers.set("Content-Type",c);let l=e.options;if(l){let u=l.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),l.abortSignal&&(o.abortSignal=l.abortSignal),l.tracingOptions&&(o.tracingOptions=l.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=m6e(r));try{let u=await this.sendRequest(o),f=tde(u,r.responses[u.status]);return l?.onResponse&&l.onResponse(u,f),f}catch(u){if(typeof u=="object"&&u?.response){let f=u.response,p=tde(f,r.responses[u.statusCode]||r.responses.default);u.details=p,l?.onResponse&&l.onResponse(f,p,u)}throw u}}};function E_t(t){let e=v_t(t),r=t.credential&&e?{credentialScopes:e,credential:t.credential}:void 0;return afe(Object.assign(Object.assign({},t),{credentialOptions:r}))}s(E_t,"createDefaultPipeline");function v_t(t){if(t.credentialScopes)return t.credentialScopes;if(t.endpoint)return`${t.endpoint}/.default`;if(t.baseUri)return`${t.baseUri}/.default`;if(t.credential&&!t.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}s(v_t,"getCredentialScopes");d();d();d();function C6e(t){return t==="adfs"?"oauth2/token":"oauth2/v2.0/token"}s(C6e,"getIdentityTokenEndpointSuffix");d();var es=h9({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:lG});d();var E6e="/.default",v6e="Specifying a `clientId` or `resourceId` is not supported by the Service Fabric managed identity environment. The managed identity configuration is determined by the Service Fabric cluster resource configuration. See https://aka.ms/servicefabricmi for more information";function y9(t){let e="";if(Array.isArray(t)){if(t.length!==1)return;e=t[0]}else typeof t=="string"&&(e=t);return e.endsWith(E6e)?e.substr(0,e.lastIndexOf(E6e)):e}s(y9,"mapScopesToResource");function x6e(t){if(typeof t.expires_on=="number")return t.expires_on*1e3;if(typeof t.expires_on=="string"){let e=+t.expires_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.expires_on);if(!isNaN(r))return r}if(typeof t.expires_in=="number")return Date.now()+t.expires_in*1e3;throw new Error(`Failed to parse token expiration from body. expires_in="${t.expires_in}", expires_on="${t.expires_on}"`)}s(x6e,"parseExpirationTimestamp");function b6e(t){if(t.refresh_on){if(typeof t.refresh_on=="number")return t.refresh_on*1e3;if(typeof t.refresh_on=="string"){let e=+t.refresh_on;if(!isNaN(e))return e*1e3;let r=Date.parse(t.refresh_on);if(!isNaN(r))return r}throw new Error(`Failed to parse refresh_on from body. refresh_on="${t.refresh_on}"`)}else return}s(b6e,"parseRefreshTimestamp");var C9="noCorrelationId";function x_t(t){let e=t?.authorityHost;return JG&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??o9}s(x_t,"getIdentityClientAuthorityHost");var W1=class extends A9{static{s(this,"IdentityClient")}constructor(e){var r,n;let i=`azsdk-js-identity/${lG}`,o=!((r=e?.userAgentOptions)===null||r===void 0)&&r.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${i}`:`${i}`,a=x_t(e);if(!a.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:o},baseUri:a})),this.allowInsecureConnection=!1,this.authorityHost=a,this.abortControllers=new Map,this.allowLoggingAccountIdentifiers=(n=e?.loggingOptions)===null||n===void 0?void 0:n.allowLoggingAccountIdentifiers,this.tokenCredentialOptions=Object.assign({},e),e?.allowInsecureConnection&&(this.allowInsecureConnection=e.allowInsecureConnection)}async sendTokenRequest(e){k0.info(`IdentityClient: sending token request to [${e.url}]`);let r=await this.sendRequest(e);if(r.bodyAsText&&(r.status===200||r.status===201)){let n=JSON.parse(r.bodyAsText);if(!n.access_token)return null;this.logIdentifiers(r);let i={accessToken:{token:n.access_token,expiresOnTimestamp:x6e(n),refreshAfterTimestamp:b6e(n),tokenType:"Bearer"},refreshToken:n.refresh_token};return k0.info(`IdentityClient: [${e.url}] token acquired, expires on ${i.accessToken.expiresOnTimestamp}`),i}else{let n=new wb(r.status,r.bodyAsText);throw k0.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${n.errorResponse.errorDescription}`),n}}async refreshAccessToken(e,r,n,i,o,a={}){if(i===void 0)return null;k0.info(`IdentityClient: refreshing access token with client ID: ${r}, scopes: ${n} started`);let c={grant_type:"refresh_token",client_id:r,refresh_token:i,scope:n};o!==void 0&&(c.client_secret=o);let l=new URLSearchParams(c);return es.withSpan("IdentityClient.refreshAccessToken",a,async u=>{try{let f=C6e(e),p=ng({url:`${this.authorityHost}/${e}/${f}`,method:"POST",body:l.toString(),abortSignal:a.abortSignal,headers:kb({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u.tracingOptions}),m=await this.sendTokenRequest(p);return k0.info(`IdentityClient: refreshed token for client ID: ${r}`),m}catch(f){if(f.name===gG&&f.errorResponse.error==="interaction_required")return k0.info(`IdentityClient: interaction required for client ID: ${r}`),null;throw k0.warning(`IdentityClient: failed refreshing token for client ID: ${r}: ${f}`),f}})}generateAbortSignal(e){let r=new AbortController,n=this.abortControllers.get(e)||[];n.push(r),this.abortControllers.set(e,n);let i=r.signal.onabort;return r.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i.apply(r.signal,o)},r.signal}abortRequests(e){let r=e||C9,n=[...this.abortControllers.get(r)||[],...this.abortControllers.get(C9)||[]];if(n.length){for(let i of n)i.abort();this.abortControllers.set(r,void 0)}}getCorrelationId(e){var r;let n=(r=e?.body)===null||r===void 0?void 0:r.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||C9}async sendGetRequestAsync(e,r){let n=ng({url:e,method:"GET",body:r?.body,allowInsecureConnection:this.allowInsecureConnection,headers:kb(r?.headers),abortSignal:this.generateAbortSignal(C9)}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,r){let n=ng({url:e,method:"POST",body:r?.body,headers:kb(r?.headers),allowInsecureConnection:this.allowInsecureConnection,abortSignal:this.generateAbortSignal(this.getCorrelationId(r))}),i=await this.sendRequest(n);return this.logIdentifiers(i),{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}getTokenCredentialOptions(){return this.tokenCredentialOptions}logIdentifiers(e){if(!this.allowLoggingAccountIdentifiers||!e.bodyAsText)return;let r="No User Principal Name available";try{let i=(e.parsedBody||JSON.parse(e.bodyAsText)).access_token;if(!i)return;let o=i.split(".")[1],{appid:a,upn:c,tid:l,oid:u}=JSON.parse(Buffer.from(o,"base64").toString("utf8"));k0.info(`[Authenticated account] Client ID: ${a}. Tenant ID: ${l}. User Principal Name: ${c||r}. Object ID (user): ${u}`)}catch(n){k0.warning("allowLoggingAccountIdentifiers was set, but we couldn't log the account information. Error:",n.message)}}};var vKr=oi("VisualStudioCodeCredential");var xKr={AzureCloud:q1.AzurePublicCloud,AzureChina:q1.AzureChina,AzureGermanCloud:q1.AzureGermany,AzureUSGovernment:q1.AzureGovernment};d();d();var Q0={};ra(Q0,{AuthError:()=>Xn,AuthErrorCodes:()=>lP,AuthErrorMessage:()=>dfe,AzureCloudInstance:()=>Y1,ClientApplication:()=>Xb,ClientAssertion:()=>nE,ClientAuthError:()=>Qb,ClientAuthErrorCodes:()=>ts,ClientAuthErrorMessage:()=>pfe,ClientConfigurationError:()=>hP,ClientConfigurationErrorCodes:()=>mP,ClientConfigurationErrorMessage:()=>yfe,ClientCredentialClient:()=>Zb,ConfidentialClientApplication:()=>LP,CryptoProvider:()=>by,DeviceCodeClient:()=>BP,DistributedCachePlugin:()=>PV,InteractionRequiredAuthError:()=>M0,InteractionRequiredAuthErrorCodes:()=>Sj,InteractionRequiredAuthErrorMessage:()=>I0e,LogLevel:()=>Ta,Logger:()=>N0,ManagedIdentityApplication:()=>MP,ManagedIdentitySourceNames:()=>Vn,OnBehalfOfClient:()=>NP,PromptValue:()=>Db,ProtocolMode:()=>ju,PublicClientApplication:()=>DP,ResponseMode:()=>Ay,ServerError:()=>_d,TokenCache:()=>bP,TokenCacheContext:()=>F0,UsernamePasswordClient:()=>PP,internals:()=>T0e,version:()=>ag});d();var T0e={};ra(T0e,{Deserializer:()=>tE,Serializer:()=>Bb});d();d();var Bb=class{static{s(this,"Serializer")}static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp,tenantProfiles:i.tenantProfiles?.map(o=>JSON.stringify(o))}}),r}static serializeIdTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),r}static serializeAccessTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash}}),r}static serializeRefreshTokens(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),r}static serializeAppMetadata(e){let r={};return Object.keys(e).map(function(n){let i=e[n];r[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),r}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}};d();d();d();d();d();d();d();d();d();var Je={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Jn={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,GONE:410,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},bf=[Je.OPENID_SCOPE,Je.PROFILE_SCOPE,Je.OFFLINE_ACCESS_SCOPE],ufe=[...bf,Je.EMAIL_SCOPE],vs={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"};var If={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},G_={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},Db={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},oj={PLAIN:"plain",S256:"S256"},sP={CODE:"code",IDTOKEN_TOKEN:"id_token token",IDTOKEN_TOKEN_REFRESHTOKEN:"id_token token refresh_token"};var Ay={QUERY:"query",FRAGMENT:"fragment",FORM_POST:"form_post"},Tf={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},j_={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ma={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},mo={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var E9="appmetadata",I6e="client_info",G1="1",aP={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Id={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},el={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Yi={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},yy={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},v9={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},x9={username:"username",password:"password"},V_={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},sj={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},us={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"};var cP=300,cu={BASE64:"base64",HEX:"hex",UTF8:"utf-8"};var lP={};ra(lP,{postRequestFailed:()=>I9,unexpectedError:()=>b9});d();var b9="unexpected_error",I9="post_request_failed";var aj={[b9]:"Unexpected error in authentication.",[I9]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},dfe={unexpectedError:{code:b9,desc:aj[b9]},postRequestFailed:{code:I9,desc:aj[I9]}},Xn=class t extends Error{static{s(this,"AuthError")}constructor(e,r,n){let i=r?`${e}: ${r}`:e;super(i),Object.setPrototypeOf(this,t.prototype),this.errorCode=e||Je.EMPTY_STRING,this.errorMessage=r||Je.EMPTY_STRING,this.subError=n||Je.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function ffe(t,e){return new Xn(t,e?`${aj[t]} ${e}`:aj[t])}s(ffe,"createAuthError");var ts={};ra(ts,{authTimeNotFound:()=>j1,authorizationCodeMissingFromServerResponse:()=>aS,bindingKeyNotRemoved:()=>L9,cannotAppendScopeSet:()=>iS,cannotRemoveEmptyScope:()=>nS,clientInfoDecodingError:()=>Nb,clientInfoEmptyError:()=>$_,deviceCodeExpired:()=>S9,deviceCodePollingCancelled:()=>_9,deviceCodeUnknownError:()=>R9,emptyInputScopeSet:()=>Fb,endSessionEndpointNotSupported:()=>cS,endpointResolutionError:()=>Td,hashNotDeserialized:()=>J_,invalidAssertion:()=>B9,invalidCacheEnvironment:()=>$1,invalidCacheRecord:()=>oS,invalidClientCredential:()=>D9,invalidState:()=>ig,keyIdMissing:()=>lS,maxAgeTranspired:()=>eS,methodNotImplemented:()=>Ti,missingTenantIdError:()=>O9,multipleMatchingAccounts:()=>w9,multipleMatchingAppMetadata:()=>tS,multipleMatchingTokens:()=>T9,nestedAppAuthBridgeDisabled:()=>Q9,networkError:()=>Y_,noAccountFound:()=>k9,noAccountInSilentRequest:()=>V1,noCryptoObject:()=>Ob,noNetworkConnectivity:()=>M9,nonceMismatch:()=>Z_,nullOrEmptyToken:()=>z_,openIdConfigError:()=>K_,requestCannotBeMade:()=>rS,stateMismatch:()=>X_,stateNotFound:()=>Mb,tokenClaimsCnfRequiredForSignedJwt:()=>sS,tokenParsingError:()=>Lb,tokenRefreshRequired:()=>z1,unexpectedCredentialType:()=>P9,userCanceled:()=>F9,userTimeoutReached:()=>N9});d();var Nb="client_info_decoding_error",$_="client_info_empty_error",Lb="token_parsing_error",z_="null_or_empty_token",Td="endpoints_resolution_error",Y_="network_error",K_="openid_config_error",J_="hash_not_deserialized",ig="invalid_state",X_="state_mismatch",Mb="state_not_found",Z_="nonce_mismatch",j1="auth_time_not_found",eS="max_age_transpired",T9="multiple_matching_tokens",w9="multiple_matching_accounts",tS="multiple_matching_appMetadata",rS="request_cannot_be_made",nS="cannot_remove_empty_scope",iS="cannot_append_scopeset",Fb="empty_input_scopeset",_9="device_code_polling_cancelled",S9="device_code_expired",R9="device_code_unknown_error",V1="no_account_in_silent_request",oS="invalid_cache_record",$1="invalid_cache_environment",k9="no_account_found",Ob="no_crypto_object",P9="unexpected_credential_type",B9="invalid_assertion",D9="invalid_client_credential",z1="token_refresh_required",N9="user_timeout_reached",sS="token_claims_cnf_required_for_signedjwt",aS="authorization_code_missing_from_server_response",L9="binding_key_not_removed",cS="end_session_endpoint_not_supported",lS="key_id_missing",M9="no_network_connectivity",F9="user_canceled",O9="missing_tenant_id_error",Ti="method_not_implemented",Q9="nested_app_auth_bridge_disabled";var Zn={[Nb]:"The client info could not be parsed/decoded correctly",[$_]:"The client info was empty",[Lb]:"Token cannot be parsed",[z_]:"The token is null or empty",[Td]:"Endpoints cannot be resolved",[Y_]:"Network request failed",[K_]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[J_]:"The hash parameters could not be deserialized",[ig]:"State was not the expected format",[X_]:"State mismatch error",[Mb]:"State not found",[Z_]:"Nonce mismatch error",[j1]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[eS]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[T9]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[w9]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[tS]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[rS]:"Token request cannot be made without authorization code or refresh token.",[nS]:"Cannot remove null or empty scope from ScopeSet",[iS]:"Cannot append ScopeSet",[Fb]:"Empty input ScopeSet cannot be processed",[_9]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[S9]:"Device code is expired.",[R9]:"Device code stopped polling for unknown reasons.",[V1]:"Please pass an account object, silent flow is not supported without account information",[oS]:"Cache record object was null or undefined.",[$1]:"Invalid environment when attempting to create cache entry",[k9]:"No account found in cache for given key.",[Ob]:"No crypto object detected.",[P9]:"Unexpected credential type.",[B9]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[D9]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[z1]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[N9]:"User defined timeout for device code polling reached",[sS]:"Cannot generate a POP jwt if the token_claims are not populated",[aS]:"Server response does not contain an authorization code to proceed",[L9]:"Could not remove the credential's binding key from storage.",[cS]:"The provided authority does not support logout",[lS]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[M9]:"No network connectivity. Check your internet connection.",[F9]:"User cancelled the flow.",[O9]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ti]:"This method has not been implemented",[Q9]:"The nested app auth bridge is disabled"},pfe={clientInfoDecodingError:{code:Nb,desc:Zn[Nb]},clientInfoEmptyError:{code:$_,desc:Zn[$_]},tokenParsingError:{code:Lb,desc:Zn[Lb]},nullOrEmptyToken:{code:z_,desc:Zn[z_]},endpointResolutionError:{code:Td,desc:Zn[Td]},networkError:{code:Y_,desc:Zn[Y_]},unableToGetOpenidConfigError:{code:K_,desc:Zn[K_]},hashNotDeserialized:{code:J_,desc:Zn[J_]},invalidStateError:{code:ig,desc:Zn[ig]},stateMismatchError:{code:X_,desc:Zn[X_]},stateNotFoundError:{code:Mb,desc:Zn[Mb]},nonceMismatchError:{code:Z_,desc:Zn[Z_]},authTimeNotFoundError:{code:j1,desc:Zn[j1]},maxAgeTranspired:{code:eS,desc:Zn[eS]},multipleMatchingTokens:{code:T9,desc:Zn[T9]},multipleMatchingAccounts:{code:w9,desc:Zn[w9]},multipleMatchingAppMetadata:{code:tS,desc:Zn[tS]},tokenRequestCannotBeMade:{code:rS,desc:Zn[rS]},removeEmptyScopeError:{code:nS,desc:Zn[nS]},appendScopeSetError:{code:iS,desc:Zn[iS]},emptyInputScopeSetError:{code:Fb,desc:Zn[Fb]},DeviceCodePollingCancelled:{code:_9,desc:Zn[_9]},DeviceCodeExpired:{code:S9,desc:Zn[S9]},DeviceCodeUnknownError:{code:R9,desc:Zn[R9]},NoAccountInSilentRequest:{code:V1,desc:Zn[V1]},invalidCacheRecord:{code:oS,desc:Zn[oS]},invalidCacheEnvironment:{code:$1,desc:Zn[$1]},noAccountFound:{code:k9,desc:Zn[k9]},noCryptoObj:{code:Ob,desc:Zn[Ob]},unexpectedCredentialType:{code:P9,desc:Zn[P9]},invalidAssertion:{code:B9,desc:Zn[B9]},invalidClientCredential:{code:D9,desc:Zn[D9]},tokenRefreshRequired:{code:z1,desc:Zn[z1]},userTimeoutReached:{code:N9,desc:Zn[N9]},tokenClaimsRequired:{code:sS,desc:Zn[sS]},noAuthorizationCodeFromServer:{code:aS,desc:Zn[aS]},bindingKeyNotRemovedError:{code:L9,desc:Zn[L9]},logoutNotSupported:{code:cS,desc:Zn[cS]},keyIdMissing:{code:lS,desc:Zn[lS]},noNetworkConnectivity:{code:M9,desc:Zn[M9]},userCanceledError:{code:F9,desc:Zn[F9]},missingTenantIdError:{code:O9,desc:Zn[O9]},nestedAppAuthBridgeDisabled:{code:Q9,desc:Zn[Q9]}},Qb=class t extends Xn{static{s(this,"ClientAuthError")}constructor(e,r){super(e,r?`${Zn[e]}: ${r}`:Zn[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,t.prototype)}};function mt(t,e){return new Qb(t,e)}s(mt,"createClientAuthError");var uP={createNewGuid:s(()=>{throw mt(Ti)},"createNewGuid"),base64Decode:s(()=>{throw mt(Ti)},"base64Decode"),base64Encode:s(()=>{throw mt(Ti)},"base64Encode"),base64UrlEncode:s(()=>{throw mt(Ti)},"base64UrlEncode"),encodeKid:s(()=>{throw mt(Ti)},"encodeKid"),async getPublicKeyThumbprint(){throw mt(Ti)},async removeTokenBindingKey(){throw mt(Ti)},async clearKeystore(){throw mt(Ti)},async signJwt(){throw mt(Ti)},async hashString(){throw mt(Ti)}};d();var Ta;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(Ta||(Ta={}));var N0=class t{static{s(this,"Logger")}constructor(e,r,n){this.level=Ta.Info;let i=s(()=>{},"defaultLoggerCallback"),o=e||t.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||i,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:Ta.Info,this.correlationId=o.correlationId||Je.EMPTY_STRING,this.packageName=r||Je.EMPTY_STRING,this.packageVersion=n||Je.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info}}clone(e,r,n){return new t({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,r)}logMessage(e,r){if(r.logLevel>this.level||!this.piiLoggingEnabled&&r.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${r.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Ta[r.logLevel]} - ${e}`;this.executeCallback(r.logLevel,o,r.containsPii||!1)}executeCallback(e,r,n){this.localCallback&&this.localCallback(e,r,n)}error(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}errorPii(e,r){this.logMessage(e,{logLevel:Ta.Error,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}warning(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}warningPii(e,r){this.logMessage(e,{logLevel:Ta.Warning,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}info(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}infoPii(e,r){this.logMessage(e,{logLevel:Ta.Info,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}verbose(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}verbosePii(e,r){this.logMessage(e,{logLevel:Ta.Verbose,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}trace(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!1,correlationId:r||Je.EMPTY_STRING})}tracePii(e,r){this.logMessage(e,{logLevel:Ta.Trace,containsPii:!0,correlationId:r||Je.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};d();var cj="@azure/msal-common",dP="15.8.1";d();var Y1={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};d();var tl={};ra(tl,{createAccessTokenEntity:()=>gfe,createIdTokenEntity:()=>hfe,createRefreshTokenEntity:()=>Afe,generateAppMetadataKey:()=>L_t,generateAuthorityMetadataExpiresAt:()=>dj,generateCredentialKey:()=>H9,isAccessTokenEntity:()=>T_t,isAppMetadataEntity:()=>M_t,isAuthorityMetadataEntity:()=>F_t,isAuthorityMetadataExpired:()=>fj,isCredentialEntity:()=>uj,isIdTokenEntity:()=>w_t,isRefreshTokenEntity:()=>__t,isServerTelemetryEntity:()=>D_t,isThrottlingEntity:()=>N_t,updateAuthorityEndpointMetadata:()=>pP,updateCloudDiscoveryMetadata:()=>W9});d();var lj={};ra(lj,{checkMaxAge:()=>U9,extractTokenClaims:()=>K1,getJWSPayload:()=>T6e});d();function K1(t,e){let r=T6e(t);try{let n=e(r);return JSON.parse(n)}catch{throw mt(Lb)}}s(K1,"extractTokenClaims");function T6e(t){if(!t)throw mt(z_);let r=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!r||r.length<4)throw mt(Lb);return r[2]}s(T6e,"getJWSPayload");function U9(t,e){if(e===0||Date.now()-3e5>t+e)throw mt(eS)}s(U9,"checkMaxAge");var Qs={};ra(Qs,{delay:()=>I_t,isTokenExpired:()=>fP,nowSeconds:()=>L0,toDateFromSeconds:()=>q9,toSecondsFromDate:()=>b_t,wasClockTurnedBack:()=>mfe});d();function L0(){return Math.round(new Date().getTime()/1e3)}s(L0,"nowSeconds");function b_t(t){return t.getTime()/1e3}s(b_t,"toSecondsFromDate");function q9(t){return t?new Date(Number(t)*1e3):new Date}s(q9,"toDateFromSeconds");function fP(t,e){let r=Number(t)||0;return L0()+e>r}s(fP,"isTokenExpired");function mfe(t){return Number(t)>L0()}s(mfe,"wasClockTurnedBack");function I_t(t,e){return new Promise(r=>setTimeout(()=>r(e),t))}s(I_t,"delay");function H9(t){return[S_t(t),R_t(t),k_t(t),P_t(t),B_t(t)].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(H9,"generateCredentialKey");function hfe(t,e,r,n,i){return{credentialType:mo.ID_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r,realm:i}}s(hfe,"createIdTokenEntity");function gfe(t,e,r,n,i,o,a,c,l,u,f,p,m,h,g){let y={homeAccountId:t,credentialType:mo.ACCESS_TOKEN,secret:r,cachedAt:L0().toString(),expiresOn:a.toString(),extendedExpiresOn:c.toString(),environment:e,clientId:n,realm:i,target:o,tokenType:f||Yi.BEARER};if(p&&(y.userAssertionHash=p),u&&(y.refreshOn=u.toString()),h&&(y.requestedClaims=h,y.requestedClaimsHash=g),y.tokenType?.toLowerCase()!==Yi.BEARER.toLowerCase())switch(y.credentialType=mo.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Yi.POP:let E=K1(r,l);if(!E?.cnf?.kid)throw mt(sS);y.keyId=E.cnf.kid;break;case Yi.SSH:y.keyId=m}return y}s(gfe,"createAccessTokenEntity");function Afe(t,e,r,n,i,o,a){let c={credentialType:mo.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:n,secret:r};return o&&(c.userAssertionHash=o),i&&(c.familyId=i),a&&(c.expiresOn=a.toString()),c}s(Afe,"createRefreshTokenEntity");function uj(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}s(uj,"isCredentialEntity");function T_t(t){return t?uj(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===mo.ACCESS_TOKEN||t.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}s(T_t,"isAccessTokenEntity");function w_t(t){return t?uj(t)&&t.hasOwnProperty("realm")&&t.credentialType===mo.ID_TOKEN:!1}s(w_t,"isIdTokenEntity");function __t(t){return t?uj(t)&&t.credentialType===mo.REFRESH_TOKEN:!1}s(__t,"isRefreshTokenEntity");function S_t(t){return[t.homeAccountId,t.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(S_t,"generateAccountId");function R_t(t){let e=t.credentialType===mo.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(R_t,"generateCredentialId");function k_t(t){return(t.target||"").toLowerCase()}s(k_t,"generateTarget");function P_t(t){return(t.requestedClaimsHash||"").toLowerCase()}s(P_t,"generateClaimsHash");function B_t(t){return t.tokenType&&t.tokenType.toLowerCase()!==Yi.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}s(B_t,"generateScheme");function D_t(t,e){let r=t.indexOf(el.CACHE_KEY)===0,n=!0;return e&&(n=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),r&&n}s(D_t,"isServerTelemetryEntity");function N_t(t,e){let r=!1;t&&(r=t.indexOf(yy.THROTTLING_PREFIX)===0);let n=!0;return e&&(n=e.hasOwnProperty("throttleTime")),r&&n}s(N_t,"isThrottlingEntity");function L_t({environment:t,clientId:e}){return[E9,t,e].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}s(L_t,"generateAppMetadataKey");function M_t(t,e){return e?t.indexOf(E9)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}s(M_t,"isAppMetadataEntity");function F_t(t,e){return e?t.indexOf(aP.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}s(F_t,"isAuthorityMetadataEntity");function dj(){return L0()+aP.REFRESH_TIME_SECONDS}s(dj,"generateAuthorityMetadataExpiresAt");function pP(t,e,r){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=r,t.jwks_uri=e.jwks_uri}s(pP,"updateAuthorityEndpointMetadata");function W9(t,e,r){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=r}s(W9,"updateCloudDiscoveryMetadata");function fj(t){return t.expiresAt<=L0()}s(fj,"isAuthorityMetadataExpired");d();d();var mP={};ra(mP,{authorityMismatch:()=>J9,authorityUriInsecure:()=>dS,cannotAllowPlatformBroker:()=>K9,cannotSetOIDCOptions:()=>Y9,claimsRequestParsingError:()=>G9,emptyInputScopesError:()=>pS,invalidAuthenticationHeader:()=>z9,invalidAuthorityMetadata:()=>AS,invalidClaims:()=>Ub,invalidCloudDiscoveryMetadata:()=>qb,invalidCodeChallengeMethod:()=>j9,logoutRequestEmpty:()=>hS,missingNonceAuthenticationHeader:()=>$9,missingSshJwk:()=>J1,missingSshKid:()=>V9,pkceParamsMissing:()=>gS,redirectUriEmpty:()=>uS,tokenRequestEmpty:()=>mS,untrustedAuthority:()=>yS,urlEmptyError:()=>fS,urlParseError:()=>Cy});d();var uS="redirect_uri_empty",G9="claims_request_parsing_error",dS="authority_uri_insecure",Cy="url_parse_error",fS="empty_url_error",pS="empty_input_scopes_error",Ub="invalid_claims",mS="token_request_empty",hS="logout_request_empty",j9="invalid_code_challenge_method",gS="pkce_params_missing",qb="invalid_cloud_discovery_metadata",AS="invalid_authority_metadata",yS="untrusted_authority",J1="missing_ssh_jwk",V9="missing_ssh_kid",$9="missing_nonce_authentication_header",z9="invalid_authentication_header",Y9="cannot_set_OIDCOptions",K9="cannot_allow_platform_broker",J9="authority_mismatch";var Fa={[uS]:"A redirect URI is required for all calls, and none has been set.",[G9]:"Could not parse the given claims request object.",[dS]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Cy]:"URL could not be parsed into appropriate segments.",[fS]:"URL was empty or null.",[pS]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ub]:"Given claims parameter must be a stringified JSON object.",[mS]:"Token request was empty and not found in cache.",[hS]:"The logout request was null or undefined.",[j9]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[gS]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[qb]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[AS]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[yS]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[J1]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[V9]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[$9]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[z9]:"Invalid authentication header provided",[Y9]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[K9]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[J9]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},yfe={redirectUriNotSet:{code:uS,desc:Fa[uS]},claimsRequestParsingError:{code:G9,desc:Fa[G9]},authorityUriInsecure:{code:dS,desc:Fa[dS]},urlParseError:{code:Cy,desc:Fa[Cy]},urlEmptyError:{code:fS,desc:Fa[fS]},emptyScopesError:{code:pS,desc:Fa[pS]},invalidClaimsRequest:{code:Ub,desc:Fa[Ub]},tokenRequestEmptyError:{code:mS,desc:Fa[mS]},logoutRequestEmptyError:{code:hS,desc:Fa[hS]},invalidCodeChallengeMethod:{code:j9,desc:Fa[j9]},invalidCodeChallengeParams:{code:gS,desc:Fa[gS]},invalidCloudDiscoveryMetadata:{code:qb,desc:Fa[qb]},invalidAuthorityMetadata:{code:AS,desc:Fa[AS]},untrustedAuthority:{code:yS,desc:Fa[yS]},missingSshJwk:{code:J1,desc:Fa[J1]},missingSshKid:{code:V9,desc:Fa[V9]},missingNonceAuthenticationHeader:{code:$9,desc:Fa[$9]},invalidAuthenticationHeader:{code:z9,desc:Fa[z9]},cannotSetOIDCOptions:{code:Y9,desc:Fa[Y9]},cannotAllowPlatformBroker:{code:K9,desc:Fa[K9]},authorityMismatch:{code:J9,desc:Fa[J9]}},hP=class t extends Xn{static{s(this,"ClientConfigurationError")}constructor(e){super(e,Fa[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,t.prototype)}};function rs(t){return new hP(t)}s(rs,"createClientConfigurationError");d();var ua=class{static{s(this,"StringUtils")}static isEmptyObj(e){if(e)try{let r=JSON.parse(e);return Object.keys(r).length===0}catch{}return!0}static startsWith(e,r){return e.indexOf(r)===0}static endsWith(e,r){return e.length>=r.length&&e.lastIndexOf(r)===e.length-r.length}static queryStringToObject(e){let r={},n=e.split("&"),i=s(o=>decodeURIComponent(o.replace(/\+/g," ")),"decode");return n.forEach(o=>{if(o.trim()){let[a,c]=o.split(/=(.+)/g,2);a&&c&&(r[i(a)]=i(c))}}),r}static trimArrayEntries(e){return e.map(r=>r.trim())}static removeEmptyStringsFromArray(e){return e.filter(r=>!!r)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,r){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(r)}};var Sc=class t{static{s(this,"ScopeSet")}constructor(e){let r=e?ua.trimArrayEntries([...e]):[],n=r?ua.removeEmptyStringsFromArray(r):[];if(!n||!n.length)throw rs(pS);this.scopes=new Set,n.forEach(i=>this.scopes.add(i))}static fromString(e){let n=(e||Je.EMPTY_STRING).split(" ");return new t(n)}static createSearchScopes(e){let r=new t(e);return r.containsOnlyOIDCScopes()?r.removeScope(Je.OFFLINE_ACCESS_SCOPE):r.removeOIDCScopes(),r}containsScope(e){let r=this.printScopesLowerCase().split(" "),n=new t(r);return e?n.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(r=>this.containsScope(r))}containsOnlyOIDCScopes(){let e=0;return ufe.forEach(r=>{this.containsScope(r)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(r=>this.appendScope(r))}catch{throw mt(iS)}}removeScope(e){if(!e)throw mt(nS);this.scopes.delete(e.trim())}removeOIDCScopes(){ufe.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw mt(Fb);let r=new Set;return e.scopes.forEach(n=>r.add(n.toLowerCase())),this.scopes.forEach(n=>r.add(n.toLowerCase())),r}intersectingScopeSets(e){if(!e)throw mt(Fb);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let r=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount();return r.size<i+n}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(r=>e.push(r)),e}printScopes(){return this.scopes?this.asArray().join(" "):Je.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};d();d();function gP(t,e){if(!t)throw mt($_);try{let r=e(t);return JSON.parse(r)}catch{throw mt(Nb)}}s(gP,"buildClientInfo");function Ey(t){if(!t)throw mt(Nb);let e=t.split(Ma.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?Je.EMPTY_STRING:e[1]}}s(Ey,"buildClientInfoFromHomeAccountId");d();function w6e(t,e){return!!t&&!!e&&t===e.split(".")[1]}s(w6e,"tenantIdMatchesHomeTenant");function X9(t,e,r,n){if(n){let{oid:i,sub:o,tid:a,name:c,tfp:l,acr:u}=n,f=a||l||u||"";return{tenantId:f,localAccountId:i||o||"",name:c,isHomeTenant:w6e(f,t)}}else return{tenantId:r,localAccountId:e,isHomeTenant:w6e(r,t)}}s(X9,"buildTenantProfile");function pj(t,e,r,n){let i=t;if(e){let{isHomeTenant:o,...a}=e;i={...t,...a}}if(r){let{isHomeTenant:o,...a}=X9(t.homeAccountId,t.localAccountId,t.tenantId,r);return i={...i,...a,idTokenClaims:r,idToken:n},i}return i}s(pj,"updateAccountTenantProfileData");d();var om={Default:0,Adfs:1,Dsts:2,Ciam:3};d();function mj(t){return t&&(t.tid||t.tfp||t.acr)||null}s(mj,"getTenantIdFromIdTokenClaims");d();var ju={AAD:"AAD",OIDC:"OIDC",EAR:"EAR"};var lu=class t{static{s(this,"AccountEntity")}generateAccountId(){return[this.homeAccountId,this.environment].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return t.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let r=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",r||e.tenantId||""].join(Ma.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,r,n){let i=new t;r.authorityType===om.Adfs?i.authorityType=j_.ADFS_ACCOUNT_TYPE:r.protocolMode===ju.OIDC?i.authorityType=j_.GENERIC_ACCOUNT_TYPE:i.authorityType=j_.MSSTS_ACCOUNT_TYPE;let o;e.clientInfo&&n&&(o=gP(e.clientInfo,n)),i.clientInfo=e.clientInfo,i.homeAccountId=e.homeAccountId,i.nativeAccountId=e.nativeAccountId;let a=e.environment||r&&r.getPreferredCache();if(!a)throw mt($1);i.environment=a,i.realm=o?.utid||mj(e.idTokenClaims)||"",i.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let c=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(i.username=c||l||"",i.name=e.idTokenClaims?.name||"",i.cloudGraphHostName=e.cloudGraphHostName,i.msGraphHost=e.msGraphHost,e.tenantProfiles)i.tenantProfiles=e.tenantProfiles;else{let u=X9(e.homeAccountId,i.localAccountId,i.realm,e.idTokenClaims);i.tenantProfiles=[u]}return i}static createFromAccountInfo(e,r,n){let i=new t;return i.authorityType=e.authorityType||j_.GENERIC_ACCOUNT_TYPE,i.homeAccountId=e.homeAccountId,i.localAccountId=e.localAccountId,i.nativeAccountId=e.nativeAccountId,i.realm=e.tenantId,i.environment=e.environment,i.username=e.username,i.name=e.name,i.cloudGraphHostName=r,i.msGraphHost=n,i.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),i}static generateHomeAccountId(e,r,n,i,o){if(!(r===om.Adfs||r===om.Dsts)){if(e)try{let a=gP(e,i.base64Decode);if(a.uid&&a.utid)return`${a.uid}.${a.utid}`}catch{}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,r,n){if(!e||!r)return!1;let i=!0;if(n){let o=e.idTokenClaims||{},a=r.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===r.homeAccountId&&e.localAccountId===r.localAccountId&&e.username===r.username&&e.tenantId===r.tenantId&&e.environment===r.environment&&e.nativeAccountId===r.nativeAccountId&&i}};d();d();var uu={};ra(uu,{getDeserializedResponse:()=>Cfe,mapToQueryString:()=>vy,stripLeadingHashOrQuery:()=>_6e});d();function _6e(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}s(_6e,"stripLeadingHashOrQuery");function Cfe(t){if(!t||t.indexOf("=")<0)return null;try{let e=_6e(t),r=Object.fromEntries(new URLSearchParams(e));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch{throw mt(J_)}return null}s(Cfe,"getDeserializedResponse");function vy(t,e=!0,r){let n=new Array;return t.forEach((i,o)=>{!e&&r&&o in r?n.push(`${o}=${i}`):n.push(`${o}=${encodeURIComponent(i)}`)}),n.join("&")}s(vy,"mapToQueryString");var wi=class t{static{s(this,"UrlString")}get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw rs(fS);e.includes("#")||(this._urlString=t.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let r=e.toLowerCase();return ua.endsWith(r,"?")?r=r.slice(0,-1):ua.endsWith(r,"?/")&&(r=r.slice(0,-2)),ua.endsWith(r,"/")||(r+="/"),r}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw rs(Cy)}if(!e.HostNameAndPort||!e.PathSegments)throw rs(Cy);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw rs(dS)}static appendQueryString(e,r){return r?e.indexOf("?")<0?`${e}?${r}`:`${e}&${r}`:e}static removeHashFromUrl(e){return t.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let r=this.getUrlComponents(),n=r.PathSegments;return e&&n.length!==0&&(n[0]===If.COMMON||n[0]===If.ORGANIZATIONS)&&(n[0]=e),t.constructAuthorityUriFromObject(r)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=this.urlString.match(e);if(!r)throw rs(Cy);let n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5],QueryString:r[7]},i=n.AbsolutePath.split("/");return i=i.filter(o=>o&&o.length>0),n.PathSegments=i,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){let r=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(r);if(!n)throw rs(Cy);return n[2]}static getAbsoluteUrl(e,r){if(e[0]===Je.FORWARD_SLASH){let i=new t(r).getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new t(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Cfe(e)}};var R6e={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Efe=R6e.endpointMetadata,vfe=R6e.instanceDiscoveryMetadata,xfe=new Set;vfe.metadata.forEach(t=>{t.aliases.forEach(e=>{xfe.add(e)})});function k6e(t,e){let r,n=t.canonicalAuthority;if(n){let i=new wi(n).getUrlComponents().HostNameAndPort;r=S6e(i,t.cloudDiscoveryMetadata?.metadata,Id.CONFIG,e)||S6e(i,vfe.metadata,Id.HARDCODED_VALUES,e)||t.knownAuthorities}return r||[]}s(k6e,"getAliasesFromStaticSources");function S6e(t,e,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),t&&e){let i=Z9(e,t);if(i)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),i.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}s(S6e,"getAliasesFromMetadata");function P6e(t){return Z9(vfe.metadata,t)}s(P6e,"getCloudDiscoveryMetadataFromHardcodedValues");function Z9(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(n.aliases.includes(e))return n}return null}s(Z9,"getCloudDiscoveryMetadataFromNetworkResponse");d();d();var bfe="cache_quota_exceeded",hj="cache_error_unknown";var Ife={[bfe]:"Exceeded cache storage capacity.",[hj]:"Unexpected error occurred when using cache storage."},eL=class t extends Xn{static{s(this,"CacheError")}constructor(e,r){let n=r||(Ife[e]?Ife[e]:Ife[hj]);super(`${e}: ${n}`),Object.setPrototypeOf(this,t.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}};function B6e(t){return t instanceof Error?t.name==="QuotaExceededError"||t.name==="NS_ERROR_DOM_QUOTA_REACHED"||t.message.includes("exceeded the quota")?new eL(bfe):new eL(t.name,t.message):new eL(hj)}s(B6e,"createCacheError");var Hb=class{static{s(this,"CacheManager")}constructor(e,r,n,i,o){this.clientId=e,this.cryptoImpl=r,this.commonLogger=n.clone(cj,dP),this.staticAuthorityOptions=o,this.performanceClient=i}getAllAccounts(e,r){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,r),r,e)}getAccountInfoFilteredBy(e,r){let n=this.getAllAccounts(e,r);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e,r){let n=this.getAccountsFilteredBy(e,r);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,r,n){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,r,n?.tenantId,n))}getTenantedAccountInfoByFilter(e,r,n,i,o){let a=null,c;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;let l=this.getIdToken(e,i,r,n.tenantId);return l&&(c=K1(l.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(c,o))?null:(a=pj(e,n,c,l?.secret),a)}getTenantProfilesFromAccountEntity(e,r,n,i){let o=e.getAccountInfo(),a=o.tenantProfiles||new Map,c=this.getTokenKeys();if(n){let u=a.get(n);if(u)a=new Map([[n,u]]);else return[]}let l=[];return a.forEach(u=>{let f=this.getTenantedAccountInfoByFilter(o,c,u,r,i);f&&l.push(f)}),l}tenantProfileMatchesFilter(e,r){return!(r.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,r.localAccountId)||r.name&&e.name!==r.name||r.isHomeTenant!==void 0&&e.isHomeTenant!==r.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,r){return!(r&&(r.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,r.localAccountId)||r.loginHint&&!this.matchLoginHintFromTokenClaims(e,r.loginHint)||r.username&&!this.matchUsername(e.preferred_username,r.username)||r.name&&!this.matchName(e,r.name)||r.sid&&!this.matchSid(e,r.sid)))}async saveCacheRecord(e,r,n){if(!e)throw mt(oS);try{e.account&&await this.setAccount(e.account,r),e.idToken&&n?.idToken!==!1&&await this.setIdTokenCredential(e.idToken,r),e.accessToken&&n?.accessToken!==!1&&await this.saveAccessToken(e.accessToken,r),e.refreshToken&&n?.refreshToken!==!1&&await this.setRefreshTokenCredential(e.refreshToken,r),e.appMetadata&&this.setAppMetadata(e.appMetadata,r)}catch(i){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Xn?i:B6e(i)}}async saveAccessToken(e,r){let n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=Sc.fromString(e.target);i.accessToken.forEach(a=>{if(!this.accessTokenKeyMatchesFilter(a,n,!1))return;let c=this.getAccessTokenCredential(a,r);c&&this.credentialMatchesFilter(c,n)&&Sc.fromString(c.target).intersectingScopeSets(o)&&this.removeAccessToken(a,r)}),await this.setAccessTokenCredential(e,r)}getAccountsFilteredBy(e,r){let n=this.getAccountKeys(),i=[];return n.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let a=this.getAccount(o,r);if(!a||e.homeAccountId&&!this.matchHomeAccountId(a,e.homeAccountId)||e.username&&!this.matchUsername(a.username,e.username)||e.environment&&!this.matchEnvironment(a,e.environment)||e.realm&&!this.matchRealm(a,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(a,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(a,e.authorityType))return;let c={localAccountId:e?.localAccountId,name:e?.name},l=a.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,c));l&&l.length===0||i.push(a)}),i}isAccountKey(e,r,n){return!(e.split(Ma.CACHE_KEY_SEPARATOR).length<3||r&&!e.toLowerCase().includes(r.toLowerCase())||n&&!e.toLowerCase().includes(n.toLowerCase()))}isCredentialKey(e){if(e.split(Ma.CACHE_KEY_SEPARATOR).length<6)return!1;let r=e.toLowerCase();if(r.indexOf(mo.ID_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN.toLowerCase())===-1&&r.indexOf(mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&r.indexOf(mo.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(r.indexOf(mo.REFRESH_TOKEN.toLowerCase())>-1){let n=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${this.clientId}${Ma.CACHE_KEY_SEPARATOR}`,i=`${mo.REFRESH_TOKEN}${Ma.CACHE_KEY_SEPARATOR}${G1}${Ma.CACHE_KEY_SEPARATOR}`;if(r.indexOf(n.toLowerCase())===-1&&r.indexOf(i.toLowerCase())===-1)return!1}else if(r.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,r){return!(r.clientId&&!this.matchClientId(e,r.clientId)||r.userAssertionHash&&!this.matchUserAssertionHash(e,r.userAssertionHash)||typeof r.homeAccountId=="string"&&!this.matchHomeAccountId(e,r.homeAccountId)||r.environment&&!this.matchEnvironment(e,r.environment)||r.realm&&!this.matchRealm(e,r.realm)||r.credentialType&&!this.matchCredentialType(e,r.credentialType)||r.familyId&&!this.matchFamilyId(e,r.familyId)||r.target&&!this.matchTarget(e,r.target)||(r.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==r.requestedClaimsHash||e.credentialType===mo.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(r.tokenType&&!this.matchTokenType(e,r.tokenType)||r.tokenType===Yi.SSH&&r.keyId&&!this.matchKeyId(e,r.keyId)))}getAppMetadataFilteredBy(e){let r=this.getKeys(),n={};return r.forEach(i=>{if(!this.isAppMetadata(i))return;let o=this.getAppMetadata(i);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(n[i]=o))}),n}getAuthorityMetadataByAlias(e){let r=this.getAuthorityMetadataKeys(),n=null;return r.forEach(i=>{if(!this.isAuthorityMetadata(i)||i.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(i);o&&o.aliases.indexOf(e)!==-1&&(n=o)}),n}removeAllAccounts(e){this.getAccountKeys().forEach(n=>{this.removeAccount(n,e)})}removeAccount(e,r){let n=this.getAccount(e,r);n&&(this.removeAccountContext(n,r),this.removeItem(e,r))}removeAccountContext(e,r){let n=this.getTokenKeys(),i=e.generateAccountId();n.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o,r)}),n.accessToken.forEach(o=>{o.indexOf(i)===0&&this.removeAccessToken(o,r)}),n.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o,r)})}removeAccessToken(e,r){let n=this.getAccessTokenCredential(e,r);if(this.removeItem(e,r),this.performanceClient.incrementFields({accessTokensRemoved:1},r),!n||n.credentialType.toLowerCase()!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Yi.POP)return;let i=n.keyId;i&&this.cryptoImpl.removeTokenBindingKey(i).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${i}`,r),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},r)})}removeAppMetadata(e){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n,e)}),!0}readAccountFromCache(e,r){let n=lu.generateAccountCacheKey(e);return this.getAccount(n,r)}getIdToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getIdToken called");let a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.ID_TOKEN,clientId:this.clientId,realm:i},c=this.getIdTokensByFilter(a,r,n),l=c.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let u=c;if(!i){let f=new Map;c.forEach((m,h)=>{m.realm===e.tenantId&&f.set(h,m)});let p=f.size;if(p<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),c.values().next().value;if(p===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),f.values().next().value;u=f}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((f,p)=>{this.removeIdToken(p,r)}),o&&r&&o.addFields({multiMatchedID:c.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),c.values().next().value}getIdTokensByFilter(e,r,n){let i=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(a=>{if(!this.idTokenKeyMatchesFilter(a,{clientId:this.clientId,...e}))return;let c=this.getIdTokenCredential(a,r);c&&this.credentialMatchesFilter(c,e)&&o.set(a,c)}),o}idTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}removeIdToken(e,r){this.removeItem(e,r)}removeRefreshToken(e,r){this.removeItem(e,r)}getAccessToken(e,r,n,i){let o=r.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);let a=Sc.createSearchScopes(r.scopes),c=r.authenticationScheme||Yi.BEARER,l=c&&c.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:l,clientId:this.clientId,realm:i||e.tenantId,target:a,tokenType:c,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash},f=n&&n.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){let g=this.getAccessTokenCredential(h,o);g&&this.credentialMatchesFilter(g,u)&&p.push(g)}});let m=p.length;return m<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):m>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),p.forEach(h=>{this.removeAccessToken(H9(h),o)}),this.performanceClient.addFields({multiMatchedAT:p.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),p[0])}accessTokenKeyMatchesFilter(e,r,n){let i=e.toLowerCase();if(r.clientId&&i.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&i.indexOf(r.homeAccountId.toLowerCase())===-1||r.realm&&i.indexOf(r.realm.toLowerCase())===-1||r.requestedClaimsHash&&i.indexOf(r.requestedClaimsHash.toLowerCase())===-1)return!1;if(r.target){let o=r.target.asArray();for(let a=0;a<o.length;a++){if(n&&!i.includes(o[a].toLowerCase()))return!1;if(!n&&i.includes(o[a].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,r){let n=this.getTokenKeys(),i=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let a=this.getAccessTokenCredential(o,r);a&&this.credentialMatchesFilter(a,e)&&i.push(a)}),i}getRefreshToken(e,r,n,i,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let a=r?G1:void 0,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:mo.REFRESH_TOKEN,clientId:this.clientId,familyId:a},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,u=[];l.forEach(p=>{if(this.refreshTokenKeyMatchesFilter(p,c)){let m=this.getRefreshTokenCredential(p,n);m&&this.credentialMatchesFilter(m,c)&&u.push(m)}});let f=u.length;return f<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(f>1&&o&&n&&o.addFields({multiMatchedRT:f},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,r){let n=e.toLowerCase();return!(r.familyId&&n.indexOf(r.familyId.toLowerCase())===-1||!r.familyId&&r.clientId&&n.indexOf(r.clientId.toLowerCase())===-1||r.homeAccountId&&n.indexOf(r.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let r={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),i=Object.keys(n).map(a=>n[a]),o=i.length;if(o<1)return null;if(o>1)throw mt(tS);return i[0]}isAppMetadataFOCI(e){let r=this.readAppMetadataFromCache(e);return!!(r&&r.familyId===G1)}matchHomeAccountId(e,r){return typeof e.homeAccountId=="string"&&r===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,r){let n=e.oid||e.sub;return r===n}matchLocalAccountIdFromTenantProfile(e,r){return e.localAccountId===r}matchName(e,r){return r.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,r){return!!(e&&typeof e=="string"&&r?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,r){return!!(e.userAssertionHash&&r===e.userAssertionHash)}matchEnvironment(e,r){if(this.staticAuthorityOptions){let i=k6e(this.staticAuthorityOptions,this.commonLogger);if(i.includes(r)&&i.includes(e.environment))return!0}let n=this.getAuthorityMetadataByAlias(r);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,r){return e.credentialType&&r.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,r){return!!(e.clientId&&r===e.clientId)}matchFamilyId(e,r){return!!(e.familyId&&r===e.familyId)}matchRealm(e,r){return e.realm?.toLowerCase()===r.toLowerCase()}matchNativeAccountId(e,r){return!!(e.nativeAccountId&&r===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,r){return e.login_hint===r||e.preferred_username===r||e.upn===r}matchSid(e,r){return e.sid===r}matchAuthorityType(e,r){return!!(e.authorityType&&r.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,r){return e.credentialType!==mo.ACCESS_TOKEN&&e.credentialType!==mo.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:Sc.fromString(e.target).containsScopeSet(r)}matchTokenType(e,r){return!!(e.tokenType&&e.tokenType===r)}matchKeyId(e,r){return!!(e.keyId&&e.keyId===r)}isAppMetadata(e){return e.indexOf(E9)!==-1}isAuthorityMetadata(e){return e.indexOf(aP.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${aP.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,r){for(let n in r)e[n]=r[n];return e}},tL=class extends Hb{static{s(this,"DefaultStorageClass")}async setAccount(){throw mt(Ti)}getAccount(){throw mt(Ti)}async setIdTokenCredential(){throw mt(Ti)}getIdTokenCredential(){throw mt(Ti)}async setAccessTokenCredential(){throw mt(Ti)}getAccessTokenCredential(){throw mt(Ti)}async setRefreshTokenCredential(){throw mt(Ti)}getRefreshTokenCredential(){throw mt(Ti)}setAppMetadata(){throw mt(Ti)}getAppMetadata(){throw mt(Ti)}setServerTelemetry(){throw mt(Ti)}getServerTelemetry(){throw mt(Ti)}setAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadata(){throw mt(Ti)}getAuthorityMetadataKeys(){throw mt(Ti)}setThrottlingCache(){throw mt(Ti)}getThrottlingCache(){throw mt(Ti)}removeItem(){throw mt(Ti)}getKeys(){throw mt(Ti)}getAccountKeys(){throw mt(Ti)}getTokenKeys(){throw mt(Ti)}};d();d();var Ve={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",InitializeCache:"initializeCache",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",GetAuthCodeUrl:"getAuthCodeUrl",GetStandardParams:"getStandardParams",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",HandleResponseEar:"handleResponseEar",HandleResponsePlatformBroker:"handleResponsePlatformBroker",HandleResponseCode:"handleResponseCode",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",ImportExistingCache:"importExistingCache",SetUserData:"setUserData",LocalStorageUpdated:"localStorageUpdated",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues",GenerateHKDF:"generateHKDF",GenerateBaseKey:"generateBaseKey",Base64Decode:"base64Decode",UrlEncodeArr:"urlEncodeArr",Encrypt:"encrypt",Decrypt:"decrypt",GenerateEarKey:"generateEarKey",DecryptEarResponse:"decryptEarResponse"},ZXr=new Map([[Ve.AcquireTokenByCode,"ATByCode"],[Ve.AcquireTokenByRefreshToken,"ATByRT"],[Ve.AcquireTokenSilent,"ATS"],[Ve.AcquireTokenSilentAsync,"ATSAsync"],[Ve.AcquireTokenPopup,"ATPopup"],[Ve.AcquireTokenRedirect,"ATRedirect"],[Ve.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[Ve.CryptoOptsSignJwt,"CryptoSignJwt"],[Ve.SilentCacheClientAcquireToken,"SltCacheClientAT"],[Ve.SilentIframeClientAcquireToken,"SltIframeClientAT"],[Ve.SilentRefreshClientAcquireToken,"SltRClientAT"],[Ve.SsoSilent,"SsoSlt"],[Ve.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[Ve.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[Ve.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[Ve.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[Ve.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[Ve.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[Ve.BrokerHandhshake,"BrokerHandshake"],[Ve.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[Ve.AcquireTokenByBroker,"ATByBroker"],[Ve.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[Ve.RefreshTokenClientAcquireToken,"RTClientAT"],[Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[Ve.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[Ve.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[Ve.AcquireTokenFromCache,"ATFromCache"],[Ve.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[Ve.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[Ve.AcquireTokenBySilentIframe,"ATBySltIframe"],[Ve.InitializeBaseRequest,"InitBaseReq"],[Ve.InitializeSilentRequest,"InitSltReq"],[Ve.InitializeClientApplication,"InitClientApplication"],[Ve.InitializeCache,"InitCache"],[Ve.ImportExistingCache,"importCache"],[Ve.SetUserData,"setUserData"],[Ve.LocalStorageUpdated,"localStorageUpdated"],[Ve.SilentIframeClientTokenHelper,"SIClientTHelper"],[Ve.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[Ve.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[Ve.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[Ve.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[Ve.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[Ve.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[Ve.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[Ve.GetAuthCodeUrl,"GetAuthCodeUrl"],[Ve.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[Ve.HandleCodeResponse,"HandleCodeResp"],[Ve.HandleResponseEar,"HandleRespEar"],[Ve.HandleResponseCode,"HandleRespCode"],[Ve.HandleResponsePlatformBroker,"HandleRespPlatBroker"],[Ve.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[Ve.AuthClientAcquireToken,"AuthClientAT"],[Ve.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[Ve.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[Ve.PopTokenGenerateCnf,"PopTGenCnf"],[Ve.PopTokenGenerateKid,"PopTGenKid"],[Ve.HandleServerTokenResponse,"HandleServerTRes"],[Ve.DeserializeResponse,"DeserializeRes"],[Ve.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[Ve.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[Ve.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[Ve.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[Ve.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[Ve.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[Ve.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[Ve.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[Ve.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[Ve.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[Ve.AcquireTokenByCodeAsync,"ATByCodeAsync"],[Ve.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[Ve.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[Ve.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[Ve.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[Ve.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[Ve.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[Ve.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[Ve.NativeGenerateAuthResult,"NtvGenAuthRes"],[Ve.RemoveHiddenIframe,"RemoveHiddenIframe"],[Ve.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[Ve.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[Ve.GeneratePkceCodes,"GenPkceCodes"],[Ve.GenerateCodeVerifier,"GenCodeVerifier"],[Ve.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[Ve.Sha256Digest,"Sha256Digest"],[Ve.GetRandomValues,"GetRandomValues"],[Ve.GenerateHKDF,"genHKDF"],[Ve.GenerateBaseKey,"genBaseKey"],[Ve.Base64Decode,"b64Decode"],[Ve.UrlEncodeArr,"urlEncArr"],[Ve.Encrypt,"encrypt"],[Ve.Decrypt,"decrypt"],[Ve.GenerateEarKey,"genEarKey"],[Ve.DecryptEarResponse,"decryptEarResp"]]),D6e={NotStarted:0,InProgress:1,Completed:2};var gj=class{static{s(this,"StubPerformanceMeasurement")}startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},CS=class{static{s(this,"StubPerformanceClient")}generateId(){return"callback-id"}startMeasurement(e,r){return{end:s(()=>null,"end"),discard:s(()=>{},"discard"),add:s(()=>{},"add"),increment:s(()=>{},"increment"),event:{eventId:this.generateId(),status:D6e.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:r||""},measurement:new gj}}startPerformanceMeasurement(){return new gj}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var O_t={tokenRenewalOffsetSeconds:cP,preventCorsPreflight:!1},Q_t={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info,correlationId:Je.EMPTY_STRING},U_t={claimsBasedCachingEnabled:!1},q_t={async sendGetRequestAsync(){throw mt(Ti)},async sendPostRequestAsync(){throw mt(Ti)}},H_t={sku:Je.SKU,version:dP,cpu:Je.EMPTY_STRING,os:Je.EMPTY_STRING},W_t={clientSecret:Je.EMPTY_STRING,clientAssertion:void 0},G_t={azureCloudInstance:Y1.None,tenant:`${Je.DEFAULT_COMMON_TENANT}`},j_t={application:{appName:"",appVersion:""}};function N6e({authOptions:t,systemOptions:e,loggerOptions:r,cacheOptions:n,storageInterface:i,networkInterface:o,cryptoInterface:a,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:f,persistencePlugin:p,serializableCache:m}){let h={...Q_t,...r};return{authOptions:V_t(t),systemOptions:{...O_t,...e},loggerOptions:h,cacheOptions:{...U_t,...n},storageInterface:i||new tL(t.clientId,uP,new N0(h),new CS),networkInterface:o||q_t,cryptoInterface:a||uP,clientCredentials:c||W_t,libraryInfo:{...H_t,...l},telemetry:{...j_t,...u},serverTelemetryManager:f||null,persistencePlugin:p||null,serializableCache:m||null}}s(N6e,"buildClientConfiguration");function V_t(t){return{clientCapabilities:[],azureCloudOptions:G_t,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...t}}s(V_t,"buildAuthOptions");function Aj(t){return t.authOptions.authority.options.protocolMode===ju.OIDC}s(Aj,"isOidcProtocolMode");d();var wd={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var rr={};ra(rr,{addApplicationTelemetry:()=>iL,addAuthorizationCode:()=>h0e,addBrokerParameters:()=>eE,addCcsOid:()=>X1,addCcsUpn:()=>Wb,addClaims:()=>TS,addClientAssertion:()=>aL,addClientAssertionType:()=>cL,addClientCapabilitiesToClaims:()=>L6e,addClientId:()=>bS,addClientInfo:()=>_S,addClientSecret:()=>sL,addCodeChallengeParams:()=>aSt,addCodeVerifier:()=>A0e,addCorrelationId:()=>wS,addDeviceCode:()=>cSt,addDomainHint:()=>f0e,addEARParameters:()=>pSt,addExtraQueryParameters:()=>Z1,addGrantType:()=>lL,addIdTokenHint:()=>d0e,addInstanceAware:()=>uL,addLibraryInfo:()=>nL,addLoginHint:()=>yP,addLogoutHint:()=>y0e,addNativeBroker:()=>sSt,addNonce:()=>m0e,addOboAssertion:()=>lSt,addPassword:()=>fSt,addPopToken:()=>dL,addPostLogoutRedirectUri:()=>u0e,addPrompt:()=>p0e,addRedirectUri:()=>IS,addRefreshToken:()=>g0e,addRequestTokenUse:()=>uSt,addResponseMode:()=>l0e,addResponseType:()=>oSt,addScopes:()=>xS,addServerTelemetry:()=>pL,addSid:()=>bj,addSshJwk:()=>fL,addState:()=>oL,addThrottling:()=>mL,addUsername:()=>dSt,instrumentBrokerParams:()=>vS});d();var ES={};ra(ES,{ACCESS_TOKEN:()=>Y_t,BROKER_CLIENT_ID:()=>rL,BROKER_REDIRECT_URI:()=>xj,CCS_HEADER:()=>nSt,CLAIMS:()=>Sfe,CLIENT_ASSERTION:()=>Xfe,CLIENT_ASSERTION_TYPE:()=>Zfe,CLIENT_ID:()=>xy,CLIENT_INFO:()=>eSt,CLIENT_REQUEST_ID:()=>Ofe,CLIENT_SECRET:()=>Jfe,CODE:()=>Nfe,CODE_CHALLENGE:()=>Lfe,CODE_CHALLENGE_METHOD:()=>Mfe,CODE_VERIFIER:()=>Ffe,DEVICE_CODE:()=>Kfe,DOMAIN_HINT:()=>s0e,EAR_JWE_CRYPTO:()=>c0e,EAR_JWK:()=>a0e,ERROR:()=>$_t,ERROR_DESCRIPTION:()=>z_t,EXPIRES_IN:()=>J_t,FOCI:()=>rSt,GRANT_TYPE:()=>_fe,ID_TOKEN:()=>K_t,ID_TOKEN_HINT:()=>Yfe,INSTANCE_AWARE:()=>AP,LOGIN_HINT:()=>o0e,LOGOUT_HINT:()=>n0e,NATIVE_BROKER:()=>r0e,NONCE:()=>Bfe,OBO_ASSERTION:()=>e0e,ON_BEHALF_OF:()=>tSt,POST_LOGOUT_URI:()=>zfe,PROMPT:()=>Dfe,REDIRECT_URI:()=>yj,REFRESH_TOKEN:()=>kfe,REFRESH_TOKEN_EXPIRES_IN:()=>X_t,REQUESTED_TOKEN_USE:()=>t0e,REQ_CNF:()=>Ej,RESPONSE_MODE:()=>wfe,RESPONSE_TYPE:()=>Tfe,RETURN_SPA_CODE:()=>vj,SCOPE:()=>Rfe,SESSION_STATE:()=>Z_t,SID:()=>i0e,STATE:()=>Pfe,TOKEN_TYPE:()=>Cj,X_APP_NAME:()=>Vfe,X_APP_VER:()=>$fe,X_CLIENT_CPU:()=>Hfe,X_CLIENT_CURR_TELEM:()=>Wfe,X_CLIENT_EXTRA_SKU:()=>iSt,X_CLIENT_LAST_TELEM:()=>Gfe,X_CLIENT_OS:()=>qfe,X_CLIENT_SKU:()=>Qfe,X_CLIENT_VER:()=>Ufe,X_MS_LIB_CAPABILITY:()=>jfe});d();var xy="client_id",yj="redirect_uri",Tfe="response_type",wfe="response_mode",_fe="grant_type",Sfe="claims",Rfe="scope",$_t="error",z_t="error_description",Y_t="access_token",K_t="id_token",kfe="refresh_token",J_t="expires_in",X_t="refresh_token_expires_in",Pfe="state",Bfe="nonce",Dfe="prompt",Z_t="session_state",eSt="client_info",Nfe="code",Lfe="code_challenge",Mfe="code_challenge_method",Ffe="code_verifier",Ofe="client-request-id",Qfe="x-client-SKU",Ufe="x-client-VER",qfe="x-client-OS",Hfe="x-client-CPU",Wfe="x-client-current-telemetry",Gfe="x-client-last-telemetry",jfe="x-ms-lib-capability",Vfe="x-app-name",$fe="x-app-ver",zfe="post_logout_redirect_uri",Yfe="id_token_hint",Kfe="device_code",Jfe="client_secret",Xfe="client_assertion",Zfe="client_assertion_type",Cj="token_type",Ej="req_cnf",e0e="assertion",t0e="requested_token_use",tSt="on_behalf_of",rSt="foci",nSt="X-AnchorMailbox",vj="return_spa_code",r0e="nativebroker",n0e="logout_hint",i0e="sid",o0e="login_hint",s0e="domain_hint",iSt="x-client-xtra-sku",rL="brk_client_id",xj="brk_redirect_uri",AP="instance_aware",a0e="ear_jwk",c0e="ear_jwe_crypto";function vS(t,e,r){if(!e)return;let n=t.get(xy);n&&t.has(rL)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:t.get(yj)},e)}s(vS,"instrumentBrokerParams");function oSt(t,e){t.set(Tfe,e)}s(oSt,"addResponseType");function l0e(t,e){t.set(wfe,e||Ay.QUERY)}s(l0e,"addResponseMode");function sSt(t){t.set(r0e,"1")}s(sSt,"addNativeBroker");function xS(t,e,r=!0,n=bf){r&&!n.includes("openid")&&!e.includes("openid")&&n.push("openid");let i=r?[...e||[],...n]:e||[],o=new Sc(i);t.set(Rfe,o.printScopes())}s(xS,"addScopes");function bS(t,e){t.set(xy,e)}s(bS,"addClientId");function IS(t,e){t.set(yj,e)}s(IS,"addRedirectUri");function u0e(t,e){t.set(zfe,e)}s(u0e,"addPostLogoutRedirectUri");function d0e(t,e){t.set(Yfe,e)}s(d0e,"addIdTokenHint");function f0e(t,e){t.set(s0e,e)}s(f0e,"addDomainHint");function yP(t,e){t.set(o0e,e)}s(yP,"addLoginHint");function Wb(t,e){t.set(vs.CCS_HEADER,`UPN:${e}`)}s(Wb,"addCcsUpn");function X1(t,e){t.set(vs.CCS_HEADER,`Oid:${e.uid}@${e.utid}`)}s(X1,"addCcsOid");function bj(t,e){t.set(i0e,e)}s(bj,"addSid");function TS(t,e,r){let n=L6e(e,r);try{JSON.parse(n)}catch{throw rs(Ub)}t.set(Sfe,n)}s(TS,"addClaims");function wS(t,e){t.set(Ofe,e)}s(wS,"addCorrelationId");function nL(t,e){t.set(Qfe,e.sku),t.set(Ufe,e.version),e.os&&t.set(qfe,e.os),e.cpu&&t.set(Hfe,e.cpu)}s(nL,"addLibraryInfo");function iL(t,e){e?.appName&&t.set(Vfe,e.appName),e?.appVersion&&t.set($fe,e.appVersion)}s(iL,"addApplicationTelemetry");function p0e(t,e){t.set(Dfe,e)}s(p0e,"addPrompt");function oL(t,e){e&&t.set(Pfe,e)}s(oL,"addState");function m0e(t,e){t.set(Bfe,e)}s(m0e,"addNonce");function aSt(t,e,r){if(e&&r)t.set(Lfe,e),t.set(Mfe,r);else throw rs(gS)}s(aSt,"addCodeChallengeParams");function h0e(t,e){t.set(Nfe,e)}s(h0e,"addAuthorizationCode");function cSt(t,e){t.set(Kfe,e)}s(cSt,"addDeviceCode");function g0e(t,e){t.set(kfe,e)}s(g0e,"addRefreshToken");function A0e(t,e){t.set(Ffe,e)}s(A0e,"addCodeVerifier");function sL(t,e){t.set(Jfe,e)}s(sL,"addClientSecret");function aL(t,e){e&&t.set(Xfe,e)}s(aL,"addClientAssertion");function cL(t,e){e&&t.set(Zfe,e)}s(cL,"addClientAssertionType");function lSt(t,e){t.set(e0e,e)}s(lSt,"addOboAssertion");function uSt(t,e){t.set(t0e,e)}s(uSt,"addRequestTokenUse");function lL(t,e){t.set(_fe,e)}s(lL,"addGrantType");function _S(t){t.set(I6e,"1")}s(_S,"addClientInfo");function uL(t){t.has(AP)||t.set(AP,"true")}s(uL,"addInstanceAware");function Z1(t,e){Object.entries(e).forEach(([r,n])=>{!t.has(r)&&n&&t.set(r,n)})}s(Z1,"addExtraQueryParameters");function L6e(t,e){let r;if(!t)r={};else try{r=JSON.parse(t)}catch{throw rs(Ub)}return e&&e.length>0&&(r.hasOwnProperty(G_.ACCESS_TOKEN)||(r[G_.ACCESS_TOKEN]={}),r[G_.ACCESS_TOKEN][G_.XMS_CC]={values:e}),JSON.stringify(r)}s(L6e,"addClientCapabilitiesToClaims");function dSt(t,e){t.set(x9.username,e)}s(dSt,"addUsername");function fSt(t,e){t.set(x9.password,e)}s(fSt,"addPassword");function dL(t,e){e&&(t.set(Cj,Yi.POP),t.set(Ej,e))}s(dL,"addPopToken");function fL(t,e){e&&(t.set(Cj,Yi.SSH),t.set(Ej,e))}s(fL,"addSshJwk");function pL(t,e){t.set(Wfe,e.generateCurrentRequestHeaderValue()),t.set(Gfe,e.generateLastRequestHeaderValue())}s(pL,"addServerTelemetry");function mL(t){t.set(jfe,yy.X_MS_LIB_CAPABILITY_VALUE)}s(mL,"addThrottling");function y0e(t,e){t.set(n0e,e)}s(y0e,"addLogoutHint");function eE(t,e,r){t.has(rL)||t.set(rL,e),t.has(xj)||t.set(xj,r)}s(eE,"addBrokerParameters");function pSt(t,e){t.set(a0e,encodeURIComponent(e)),t.set(c0e,"eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}s(pSt,"addEARParameters");var Tj={};ra(Tj,{createDiscoveredInstance:()=>E0e});d();d();d();function M6e(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}s(M6e,"isOpenIdConfigResponse");d();function F6e(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}s(F6e,"isCloudInstanceDiscoveryResponse");d();function O6e(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}s(O6e,"isCloudInstanceDiscoveryErrorResponse");d();d();var Q6e=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}try{let c=t(...o);return a?.end({success:!0}),r.trace(`Returning result from ${e}`),c}catch(c){r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c}},"invoke"),Ki=s((t,e,r,n,i)=>(...o)=>{r.trace(`Executing function ${e}`);let a=n?.startMeasurement(e,i);if(i){let c=e+"CallCount";n?.incrementFields({[c]:1},i)}return n?.setPreQueueTime(e,i),t(...o).then(c=>(r.trace(`Returning result from ${e}`),a?.end({success:!0}),c)).catch(c=>{r.trace(`Error occurred in ${e}`);try{r.trace(JSON.stringify(c))}catch{r.trace("Unable to print error message.")}throw a?.end({success:!1},c),c})},"invokeAsync");var hL=class t{static{s(this,"RegionDiscovery")}constructor(e,r,n,i){this.networkInterface=e,this.logger=r,this.performanceClient=n,this.correlationId=i}async detectRegion(e,r){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryDetectRegion,this.correlationId);let n=e;if(n)r.region_source=V_.ENVIRONMENT_VARIABLE;else{let i=t.IMDS_OPTIONS;try{let o=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(Je.IMDS_VERSION,i);if(o.status===Jn.SUCCESS&&(n=o.body,r.region_source=V_.IMDS),o.status===Jn.BAD_REQUEST){let a=await Ki(this.getCurrentVersion.bind(this),Ve.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return r.region_source=V_.FAILED_AUTO_DETECTION,null;let c=await Ki(this.getRegionFromIMDS.bind(this),Ve.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===Jn.SUCCESS&&(n=c.body,r.region_source=V_.IMDS)}}catch{return r.region_source=V_.FAILED_AUTO_DETECTION,null}}return n||(r.region_source=V_.FAILED_AUTO_DETECTION),n||null}async getRegionFromIMDS(e,r){return this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?api-version=${e}&format=text`,r,Je.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(Ve.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let r=await this.networkInterface.sendGetRequestAsync(`${Je.IMDS_ENDPOINT}?format=json`,e);return r.status===Jn.BAD_REQUEST&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}};hL.IMDS_OPTIONS={headers:{Metadata:"true"}};var og=class t{static{s(this,"Authority")}constructor(e,r,n,i,o,a,c,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=r,this.cacheManager=n,this.authorityOptions=i,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=c,this.correlationId=a,this.managedIdentity=l||!1,this.regionDiscovery=new hL(r,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL))return om.Ciam;let r=e.PathSegments;if(r.length)switch(r[0].toLowerCase()){case Je.ADFS:return om.Adfs;case Je.DSTS:return om.Dsts}return om.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new wi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw mt(Td)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw mt(Td)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw mt(Td)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw mt(cS);return this.replacePath(this.metadata.end_session_endpoint)}else throw mt(Td)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw mt(Td)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw mt(Td)}canReplaceTenant(e){return e.PathSegments.length===1&&!t.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===om.Default&&this.protocolMode!==ju.OIDC}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let r=e,i=new wi(this.metadata.canonical_authority).getUrlComponents(),o=i.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((c,l)=>{let u=o[l];if(l===0&&this.canReplaceTenant(i)){let f=new wi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==f&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${f}`),u=f)}c!==u&&(r=r.replace(`/${u}/`,`/${c}/`))}),this.replaceTenant(r)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===om.Adfs||this.protocolMode===ju.OIDC&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),r=await Ki(this.updateCloudDiscoveryMetadata.bind(this),Ve.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let n=await Ki(this.updateEndpointMetadata.bind(this),Ve.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,r,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:dj(),jwks_uri:""}),e}updateCachedMetadata(e,r,n){r!==Id.CACHE&&n?.source!==Id.CACHE&&(e.expiresAt=dj(),e.canonical_authority=this.canonicalAuthority);let i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateEndpointMetadata,this.correlationId);let r=this.updateEndpointMetadataFromLocalSources(e);if(r){if(r.source===Id.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){let i=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r.metadata);pP(e,i,!1),e.canonical_authority=this.canonicalAuthority}return r.source}let n=await Ki(this.getEndpointMetadataFromNetwork.bind(this),Ve.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await Ki(this.updateMetadataWithRegionalInformation.bind(this),Ve.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n)),pP(e,n,!0),Id.NETWORK;throw mt(K_,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let r=this.getEndpointMetadataFromConfig();if(r)return this.logger.verbose("Found endpoint metadata in authority configuration"),pP(e,r,!1),{source:Id.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let i=this.getEndpointMetadataFromHardcodedValues();if(i)return pP(e,i,!1),{source:Id.HARDCODED_VALUES,metadata:i};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let n=fj(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Id.CACHE}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new wi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw rs(AS)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},r=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{let n=await this.networkInterface.sendGetRequestAsync(r,e);return M6e(n.body)?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Efe?Efe[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let r=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==Je.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=sj.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,t.replaceWithRegionalInformation(e,r);let n=await Ki(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Ve.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=sj.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=n,t.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=sj.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Ve.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let r=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;let n=await Ki(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(n)return W9(e,n,!0),Id.NETWORK;throw rs(yS)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Je.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Je.NOT_APPLICABLE}`);let r=this.getCloudDiscoveryMetadataFromConfig();if(r)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),W9(e,r,!1),Id.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let i=P6e(this.hostnameAndPort);if(i)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),W9(e,i,!1),Id.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let n=fj(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),Id.CACHE):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===om.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),r=Z9(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),r)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),r;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),rs(qb)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Ve.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${Je.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,r={},n=null;try{let i=await this.networkInterface.sendGetRequestAsync(e,r),o,a;if(F6e(i.body))o=i.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(O6e(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),o=i.body,o.error===Je.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Z9(a,this.hostnameAndPort)}catch(i){if(i instanceof Xn)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{let o=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=t.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(r=>r&&wi.getDomainFromUrl(r).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,r){let n;if(r&&r.azureCloudInstance!==Y1.None){let i=r.tenant?r.tenant:Je.DEFAULT_COMMON_TENANT;n=`${r.azureCloudInstance}/${i}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Je.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw mt(Td)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return xfe.has(e)}static isPublicCloudAuthority(e){return Je.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,r,n){let i=new wi(e);i.validateAsUri();let o=i.getUrlComponents(),a=`${r}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${r}.${Je.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let c=wi.constructAuthorityUriFromObject({...i.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${c}?${n}`:c}static replaceWithRegionalInformation(e,r){let n={...e};return n.authorization_endpoint=t.buildRegionalAuthorityString(n.authorization_endpoint,r),n.token_endpoint=t.buildRegionalAuthorityString(n.token_endpoint,r),n.end_session_endpoint&&(n.end_session_endpoint=t.buildRegionalAuthorityString(n.end_session_endpoint,r)),n}static transformCIAMAuthority(e){let r=e,i=new wi(e).getUrlComponents();if(i.PathSegments.length===0&&i.HostNameAndPort.endsWith(Je.CIAM_AUTH_URL)){let o=i.HostNameAndPort.split(".")[0];r=`${r}${o}${Je.AAD_TENANT_DOMAIN_SUFFIX}`}return r}};og.reservedTenantDomains=new Set(["{tenant}","{tenantid}",If.COMMON,If.CONSUMERS,If.ORGANIZATIONS]);function U6e(t){let n=new wi(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case If.COMMON:case If.ORGANIZATIONS:case If.CONSUMERS:return;default:return n}}s(U6e,"getTenantFromAuthorityString");function Ij(t){return t.endsWith(Je.FORWARD_SLASH)?t:`${t}${Je.FORWARD_SLASH}`}s(Ij,"formatAuthorityUri");function C0e(t){let e=t.cloudDiscoveryMetadata,r;if(e)try{r=JSON.parse(e)}catch{throw rs(qb)}return{canonicalAuthority:t.authority?Ij(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:r}}s(C0e,"buildStaticAuthorityOptions");async function E0e(t,e,r,n,i,o,a){a?.addQueueMeasurement(Ve.AuthorityFactoryCreateDiscoveredInstance,o);let c=og.transformCIAMAuthority(Ij(t)),l=new og(c,e,r,n,i,o,a);try{return await Ki(l.resolveEndpointsAsync.bind(l),Ve.AuthorityResolveEndpointsAsync,i,a,o)(),l}catch{throw mt(Td)}}s(E0e,"createDiscoveredInstance");d();d();var _d=class t extends Xn{static{s(this,"ServerError")}constructor(e,r,n,i,o){super(e,r,n),this.name="ServerError",this.errorNo=i,this.status=o,Object.setPrototypeOf(this,t.prototype)}};d();function CP(t,e,r){return{clientId:t,authority:e.authority,scopes:e.scopes,homeAccountIdentifier:r,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,embeddedClientId:e.embeddedClientId||e.tokenBodyParameters?.clientId}}s(CP,"getRequestThumbprint");var gL=class t{static{s(this,"ThrottlingUtils")}static generateThrottlingStorageKey(e){return`${yy.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,r,n){let i=t.generateThrottlingStorageKey(r),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,n);return}throw new _d(o.errorCodes?.join(" ")||Je.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,r,n,i){if(t.checkResponseStatus(n)||t.checkResponseForRetryAfter(n)){let o={throttleTime:t.calculateThrottleTime(parseInt(n.headers[vs.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t.generateThrottlingStorageKey(r),o,i)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(vs.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let r=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(r||yy.DEFAULT_THROTTLE_TIME_SECONDS),n+yy.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,r,n,i){let o=CP(r,n,i),a=this.generateThrottlingStorageKey(o);e.removeItem(a,n.correlationId)}};d();var wj=class t extends Xn{static{s(this,"NetworkError")}constructor(e,r,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,t.prototype),this.name="NetworkError",this.error=e,this.httpStatus=r,this.responseHeaders=n}};var du=class{static{s(this,"BaseClient")}constructor(e,r){this.config=N6e(e),this.logger=new N0(this.config.loggerOptions,cj,dP),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=r}createTokenRequestHeaders(e){let r={};if(r[vs.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case wd.HOME_ACCOUNT_ID:try{let n=Ey(e.credential);r[vs.CCS_HEADER]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case wd.UPN:r[vs.CCS_HEADER]=`UPN: ${e.credential}`;break}return r}async executePostToTokenEndpoint(e,r,n,i,o,a){a&&this.performanceClient?.addQueueMeasurement(a,o);let c=await this.sendPostRequest(i,e,{body:r,headers:n},o);return this.config.serverTelemetryManager&&c.status<500&&c.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),c}async sendPostRequest(e,r,n,i){gL.preProcess(this.cacheManager,e,i);let o;try{o=await Ki(this.networkClient.sendPostRequestAsync.bind(this.networkClient),Ve.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,i)(r,n);let a=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:a[vs.X_MS_HTTP_VERSION]||"",requestId:a[vs.X_MS_REQUEST_ID]||""},i)}catch(a){if(a instanceof wj){let c=a.responseHeaders;throw c&&this.performanceClient?.addFields({httpVerToken:c[vs.X_MS_HTTP_VERSION]||"",requestId:c[vs.X_MS_REQUEST_ID]||"",contentTypeHeader:c[vs.CONTENT_TYPE]||void 0,contentLengthHeader:c[vs.CONTENT_LENGTH]||void 0,httpStatus:a.httpStatus},i),a.error}throw a instanceof Xn?a:mt(Y_)}return gL.postProcess(this.cacheManager,e,o,i),o}async updateAuthority(e,r){this.performanceClient?.addQueueMeasurement(Ve.UpdateTokenEndpointAuthority,r);let n=`https://${e}/${this.authority.tenant}/`,i=await E0e(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,r,this.performanceClient);this.authority=i}createTokenQueryParameters(e){let r=new Map;return e.embeddedClientId&&eE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Z1(r,e.tokenQueryParameters),wS(r,e.correlationId),vS(r,e.correlationId,this.performanceClient),vy(r)}};d();d();var Sj={};ra(Sj,{badToken:()=>jb,consentRequired:()=>x0e,interactionRequired:()=>v0e,loginRequired:()=>b0e,nativeAccountUnavailable:()=>AL,noTokensFound:()=>Gb,refreshTokenExpired:()=>yL,uxNotAllowed:()=>_j});d();var Gb="no_tokens_found",AL="native_account_unavailable",yL="refresh_token_expired",_j="ux_not_allowed",v0e="interaction_required",x0e="consent_required",b0e="login_required",jb="bad_token";var q6e=[v0e,x0e,b0e,jb,_j],mSt=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Rj={[Gb]:"No refresh token found in the cache. Please sign-in.",[AL]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[yL]:"Refresh token has expired.",[jb]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[_j]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."},I0e={noTokensFoundError:{code:Gb,desc:Rj[Gb]},native_account_unavailable:{code:AL,desc:Rj[AL]},bad_token:{code:jb,desc:Rj[jb]}},M0=class t extends Xn{static{s(this,"InteractionRequiredAuthError")}constructor(e,r,n,i,o,a,c,l){super(e,r,n),Object.setPrototypeOf(this,t.prototype),this.timestamp=i||Je.EMPTY_STRING,this.traceId=o||Je.EMPTY_STRING,this.correlationId=a||Je.EMPTY_STRING,this.claims=c||Je.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function kj(t,e,r){let n=!!t&&q6e.indexOf(t)>-1,i=!!r&&mSt.indexOf(r)>-1,o=!!e&&q6e.some(a=>e.indexOf(a)>-1);return n||o||i}s(kj,"isInteractionRequiredError");function Pj(t){return new M0(t,Rj[t])}s(Pj,"createInteractionRequiredAuthError");d();var Bj=class t{static{s(this,"ProtocolUtils")}static setRequestState(e,r,n){let i=t.generateLibraryState(e,n);return r?`${i}${Je.RESOURCE_DELIM}${r}`:i}static generateLibraryState(e,r){if(!e)throw mt(Ob);let n={id:e.createNewGuid()};r&&(n.meta=r);let i=JSON.stringify(n);return e.base64Encode(i)}static parseRequestState(e,r){if(!e)throw mt(Ob);if(!r)throw mt(ig);try{let n=r.split(Je.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(Je.RESOURCE_DELIM):Je.EMPTY_STRING,a=e.base64Decode(i),c=JSON.parse(a);return{userRequestState:o||Je.EMPTY_STRING,libraryState:c}}catch{throw mt(ig)}}};d();var hSt={SW:"sw"},Vb=class{static{s(this,"PopTokenGenerator")}constructor(e,r){this.cryptoUtils=e,this.performanceClient=r}async generateCnf(e,r){this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateCnf,e.correlationId);let n=await Ki(this.generateKid.bind(this),Ve.PopTokenGenerateCnf,r,this.performanceClient,e.correlationId)(e),i=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:i}}async generateKid(e){return this.performanceClient?.addQueueMeasurement(Ve.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:hSt.SW}}async signPopToken(e,r,n){return this.signPayload(e,r,n)}async signPayload(e,r,n,i){let{resourceRequestMethod:o,resourceRequestUri:a,shrClaims:c,shrNonce:l,shrOptions:u}=n,p=(a?new wi(a):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:L0(),m:o?.toUpperCase(),u:p?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:p?.AbsolutePath,q:p?.QueryString?[[],p.QueryString]:void 0,client_claims:c||void 0,...i},r,u,n.correlationId)}};d();var F0=class{static{s(this,"TokenCacheContext")}constructor(e,r){this.cache=e,this.hasChanged=r}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};var nc=class t{static{s(this,"ResponseHandler")}constructor(e,r,n,i,o,a,c){this.clientId=e,this.cacheStorage=r,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a,this.performanceClient=c}validateTokenResponse(e,r){if(e.error||e.error_description||e.suberror){let n=`Error(s): ${e.error_codes||Je.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Je.NOT_AVAILABLE} - Description: ${e.error_description||Je.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Je.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Je.NOT_AVAILABLE}`,i=e.error_codes?.length?e.error_codes[0]:void 0,o=new _d(e.error,n,e.suberror,i,e.status);if(r&&e.status&&e.status>=Jn.SERVER_ERROR_RANGE_START&&e.status<=Jn.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(r&&e.status&&e.status>=Jn.CLIENT_ERROR_RANGE_START&&e.status<=Jn.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw kj(e.error,e.error_description,e.suberror)?new M0(e.error,e.error_description,e.suberror,e.timestamp||Je.EMPTY_STRING,e.trace_id||Je.EMPTY_STRING,e.correlation_id||Je.EMPTY_STRING,e.claims||Je.EMPTY_STRING,i):o}}async handleServerTokenResponse(e,r,n,i,o,a,c,l,u){this.performanceClient?.addQueueMeasurement(Ve.HandleServerTokenResponse,e.correlation_id);let f;if(e.id_token){if(f=K1(e.id_token||Je.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&f.nonce!==o.nonce)throw mt(Z_);if(i.maxAge||i.maxAge===0){let g=f.auth_time;if(!g)throw mt(j1);U9(g,i.maxAge)}}this.homeAccountIdentifier=lu.generateHomeAccountId(e.client_info||Je.EMPTY_STRING,r.authorityType,this.logger,this.cryptoObj,f);let p;o&&o.state&&(p=Bj.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0;let m=this.generateCacheRecord(e,r,n,i,f,a,o),h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new F0(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),c&&!l&&m.account){let g=m.account.generateAccountKey();if(!this.cacheStorage.getAccount(g,i.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,void 0,u)}await this.cacheStorage.saveCacheRecord(m,i.correlationId,i.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return t.generateAuthenticationResult(this.cryptoObj,r,m,!1,i,f,p,e,u)}generateCacheRecord(e,r,n,i,o,a,c){let l=r.getPreferredCache();if(!l)throw mt($1);let u=mj(o),f,p;e.id_token&&o&&(f=hfe(this.homeAccountIdentifier,l,e.id_token,this.clientId,u||""),p=H6e(this.cacheStorage,r,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i.correlationId,o,e.client_info,l,u,c,void 0,this.logger));let m=null;if(e.access_token){let y=e.scope?Sc.fromString(e.scope):new Sc(i.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,x=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,b=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,_=n+E,k=_+x,P=b&&b>0?n+b:void 0;m=gfe(this.homeAccountIdentifier,l,e.access_token,this.clientId,u||r.tenant||"",y.printScopes(),_,k,this.cryptoObj.base64Decode,P,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}let h=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=n+E}h=Afe(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,a,y)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:l,familyId:e.foci}),{account:p,idToken:f,accessToken:m,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,r,n,i,o,a,c,l,u){let f=Je.EMPTY_STRING,p=[],m=null,h,g,y=Je.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType===Yi.POP&&!o.popKid){let _=new Vb(e),{secret:k,keyId:P}=n.accessToken;if(!P)throw mt(lS);f=await _.signPopToken(k,P,o)}else f=n.accessToken.secret;p=Sc.fromString(n.accessToken.target).asArray(),m=q9(n.accessToken.expiresOn),h=q9(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(g=q9(n.accessToken.refreshOn))}n.appMetadata&&(y=n.appMetadata.familyId===G1?G1:"");let E=a?.oid||a?.sub||"",x=a?.tid||"";l?.spa_accountid&&n.account&&(n.account.nativeAccountId=l?.spa_accountid);let b=n.account?pj(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:r.canonicalAuthority,uniqueId:E,tenantId:x,scopes:p,account:b,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:f,fromCache:i,expiresOn:m,extExpiresOn:h,refreshOn:g,correlationId:o.correlationId,requestId:u||Je.EMPTY_STRING,familyId:y,tokenType:n.accessToken?.tokenType||Je.EMPTY_STRING,state:c?c.userRequestState:Je.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||Je.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||Je.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}}};function H6e(t,e,r,n,i,o,a,c,l,u,f,p){p?.verbose("setCachedAccount called");let h=t.getAccountKeys().find(b=>b.startsWith(r)),g=null;h&&(g=t.getAccount(h,i));let y=g||lu.createAccount({homeAccountId:r,idTokenClaims:o,clientInfo:a,environment:c,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:f},e,n),E=y.tenantProfiles||[],x=l||y.realm;if(x&&!E.find(b=>b.tenantId===x)){let b=X9(r,y.localAccountId,x,o);E.push(b)}return y.tenantProfiles=E,y}s(H6e,"buildAccountToCache");d();async function Sd(t,e,r){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:r})}s(Sd,"getClientAssertion");var CL=class extends du{static{s(this,"AuthorizationCodeClient")}constructor(e,r){super(e,r),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,r){if(this.performanceClient?.addQueueMeasurement(Ve.AuthClientAcquireToken,e.correlationId),!e.code)throw mt(rS);let n=L0(),i=await Ki(this.executeTokenRequest.bind(this),Ve.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=i.headers?.[vs.X_MS_REQUEST_ID],a=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return a.validateTokenResponse(i.body),Ki(a.handleServerTokenResponse.bind(a),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,n,e,r,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw rs(hS);let r=this.createLogoutUrlQueryString(e);return wi.appendQueryString(this.authority.endSessionEndpoint,r)}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.AuthClientExecuteTokenRequest,r.correlationId);let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,r.correlationId)(r),a;if(r.clientInfo)try{let u=gP(r.clientInfo,this.cryptoUtils.base64Decode);a={credential:`${u.uid}${Ma.CLIENT_INFO_SEPARATOR}${u.utid}`,type:wd.HOME_ACCOUNT_ID}}catch(u){this.logger.verbose("Could not parse client info for CCS Header: "+u)}let c=this.createTokenRequestHeaders(a||r.ccsCredential),l=CP(this.config.authOptions.clientId,r);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,r.correlationId)(i,o,c,l,r.correlationId,Ve.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.AuthClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(bS(r,e.embeddedClientId||e.tokenBodyParameters?.[xy]||this.config.authOptions.clientId),this.includeRedirectUri)IS(r,e.redirectUri);else if(!e.redirectUri)throw rs(uS);if(xS(r,e.scopes,!0,this.oidcDefaultScopes),h0e(r,e.code),nL(r,this.config.libraryInfo),iL(r,this.config.telemetry.application),mL(r),this.serverTelemetryManager&&!Aj(this.config)&&pL(r,this.serverTelemetryManager),e.codeVerifier&&A0e(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&sL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let i=this.config.clientCredentials.clientAssertion;aL(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),cL(r,i.assertionType)}if(lL(r,Tf.AUTHORIZATION_CODE_GRANT),_S(r),e.authenticationScheme===Yi.POP){let i=new Vb(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(await Ki(i.generateCnf.bind(i),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,dL(r,o)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)fL(r,e.sshJwk);else throw rs(J1);(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&TS(r,e.claims,this.config.authOptions.clientCapabilities);let n;if(e.clientInfo)try{let i=gP(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${i.uid}${Ma.CLIENT_INFO_SEPARATOR}${i.utid}`,type:wd.HOME_ACCOUNT_ID}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case wd.HOME_ACCOUNT_ID:try{let i=Ey(n.credential);X1(r,i)}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case wd.UPN:Wb(r,n.credential);break}return e.embeddedClientId&&eE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Z1(r,e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[vj])&&Z1(r,{[vj]:"1"}),vS(r,e.correlationId,this.performanceClient),vy(r)}createLogoutUrlQueryString(e){let r=new Map;return e.postLogoutRedirectUri&&u0e(r,e.postLogoutRedirectUri),e.correlationId&&wS(r,e.correlationId),e.idTokenHint&&d0e(r,e.idTokenHint),e.state&&oL(r,e.state),e.logoutHint&&y0e(r,e.logoutHint),e.extraQueryParameters&&Z1(r,e.extraQueryParameters),this.config.authOptions.instanceAware&&uL(r),vy(r,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}};d();var gSt=300,SS=class extends du{static{s(this,"RefreshTokenClient")}constructor(e,r){super(e,r)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireToken,e.correlationId);let r=L0(),n=await Ki(this.executeTokenRequest.bind(this),Ve.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=n.headers?.[vs.X_MS_REQUEST_ID],o=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),Ki(o.handleServerTokenResponse.bind(o),Ve.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){if(!e)throw rs(mS);if(this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw mt(V1);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){let i=n instanceof M0&&n.errorCode===Gb,o=n instanceof _d&&n.errorCode===v9.INVALID_GRANT_ERROR&&n.subError===v9.CLIENT_MISMATCH_ERROR;if(i||o)return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return Ki(this.acquireTokenWithCachedRefreshToken.bind(this),Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let n=Q6e(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ve.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,r,e.correlationId,void 0,this.performanceClient);if(!n)throw Pj(Gb);if(n.expiresOn&&fP(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||gSt))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Pj(yL);let i={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||Yi.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:wd.HOME_ACCOUNT_ID}};try{return await Ki(this.acquireToken.bind(this),Ve.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(i)}catch(o){if(o instanceof M0&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===jb)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let a=H9(n);this.cacheManager.removeRefreshToken(a,e.correlationId)}throw o}}async executeTokenRequest(e,r){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientExecuteTokenRequest,e.correlationId);let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(r.tokenEndpoint,n),o=await Ki(this.createTokenRequestBody.bind(this),Ve.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),c=CP(this.config.authOptions.clientId,e);return Ki(this.executePostToTokenEndpoint.bind(this),Ve.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(i,o,a,c,e.correlationId,Ve.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ve.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let r=new Map;if(bS(r,e.embeddedClientId||e.tokenBodyParameters?.[xy]||this.config.authOptions.clientId),e.redirectUri&&IS(r,e.redirectUri),xS(r,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),lL(r,Tf.REFRESH_TOKEN_GRANT),_S(r),nL(r,this.config.libraryInfo),iL(r,this.config.telemetry.application),mL(r),this.serverTelemetryManager&&!Aj(this.config)&&pL(r,this.serverTelemetryManager),g0e(r,e.refreshToken),this.config.clientCredentials.clientSecret&&sL(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let n=this.config.clientCredentials.clientAssertion;aL(r,await Sd(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),cL(r,n.assertionType)}if(e.authenticationScheme===Yi.POP){let n=new Vb(this.cryptoUtils,this.performanceClient),i;e.popKid?i=this.cryptoUtils.encodeKid(e.popKid):i=(await Ki(n.generateCnf.bind(n),Ve.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,dL(r,i)}else if(e.authenticationScheme===Yi.SSH)if(e.sshJwk)fL(r,e.sshJwk);else throw rs(J1);if((!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&TS(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case wd.HOME_ACCOUNT_ID:try{let n=Ey(e.ccsCredential.credential);X1(r,n)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case wd.UPN:Wb(r,e.ccsCredential.credential);break}return e.embeddedClientId&&eE(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Z1(r,e.tokenBodyParameters),vS(r,e.correlationId,this.performanceClient),vy(r)}};d();var EL=class extends du{static{s(this,"SilentFlowClient")}constructor(e,r){super(e,r)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientAcquireCachedToken,e.correlationId);let r=us.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ua.isEmptyObj(e.claims))throw this.setCacheOutcome(us.FORCE_REFRESH_OR_CLAIMS,e.correlationId),mt(z1);if(!e.account)throw mt(V1);let n=e.account.tenantId||U6e(e.authority),i=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,i,n);if(o){if(mfe(o.cachedAt)||fP(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),mt(z1);o.refreshOn&&fP(o.refreshOn,0)&&(r=us.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN,e.correlationId),mt(z1);let a=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,i,n,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(r,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Ki(this.generateResultFromCacheRecord.bind(this),Ve.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(c,e),r]}setCacheOutcome(e,r){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},r),e!==us.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,r){this.performanceClient?.addQueueMeasurement(Ve.SilentFlowClientGenerateResultFromCacheRecord,r.correlationId);let n;if(e.idToken&&(n=K1(e.idToken.secret,this.config.cryptoInterface.base64Decode)),r.maxAge||r.maxAge===0){let i=n?.auth_time;if(!i)throw mt(j1);U9(i,r.maxAge)}return nc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,r,n)}};var vL={};ra(vL,{getAuthorizationCodePayload:()=>CSt,getAuthorizeUrl:()=>ySt,getStandardAuthorizeRequestParameters:()=>ASt,validateAuthorizationResponse:()=>W6e});d();function ASt(t,e,r,n){let i=e.correlationId,o=new Map;bS(o,e.embeddedClientId||e.extraQueryParameters?.[xy]||t.clientId);let a=[...e.scopes||[],...e.extraScopesToConsent||[]];if(xS(o,a,!0,t.authority.options.OIDCOptions?.defaultScopes),IS(o,e.redirectUri),wS(o,i),l0e(o,e.responseMode),_S(o),e.prompt&&(p0e(o,e.prompt),n?.addFields({prompt:e.prompt},i)),e.domainHint&&(f0e(o,e.domainHint),n?.addFields({domainHintFromRequest:!0},i)),e.prompt!==Db.SELECT_ACCOUNT)if(e.sid&&e.prompt===Db.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),bj(o,e.sid),n?.addFields({sidFromRequest:!0},i);else if(e.account){let c=vSt(e.account),l=xSt(e.account);if(l&&e.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),yP(o,l),n?.addFields({loginHintFromClaim:!0},i);try{let u=Ey(e.account.homeAccountId);X1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(c&&e.prompt===Db.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),bj(o,c),n?.addFields({sidFromClaim:!0},i);try{let u=Ey(e.account.homeAccountId);X1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),yP(o,e.loginHint),Wb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i);else if(e.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),yP(o,e.account.username),n?.addFields({loginHintFromUpn:!0},i);try{let u=Ey(e.account.homeAccountId);X1(o,u)}catch{r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),yP(o,e.loginHint),Wb(o,e.loginHint),n?.addFields({loginHintFromRequest:!0},i));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return e.nonce&&m0e(o,e.nonce),e.state&&oL(o,e.state),(e.claims||t.clientCapabilities&&t.clientCapabilities.length>0)&&TS(o,e.claims,t.clientCapabilities),e.embeddedClientId&&eE(o,t.clientId,t.redirectUri),t.instanceAware&&(!e.extraQueryParameters||!Object.keys(e.extraQueryParameters).includes(AP))&&uL(o),o}s(ASt,"getStandardAuthorizeRequestParameters");function ySt(t,e,r,n){let i=vy(e,r,n);return wi.appendQueryString(t.authorizationEndpoint,i)}s(ySt,"getAuthorizeUrl");function CSt(t,e){if(W6e(t,e),!t.code)throw mt(aS);return t}s(CSt,"getAuthorizationCodePayload");function W6e(t,e){if(!t.state||!e)throw t.state?mt(Mb,"Cached State"):mt(Mb,"Server State");let r,n;try{r=decodeURIComponent(t.state)}catch{throw mt(ig,t.state)}try{n=decodeURIComponent(e)}catch{throw mt(ig,t.state)}if(r!==n)throw mt(X_);if(t.error||t.error_description||t.suberror){let i=ESt(t);throw kj(t.error,t.error_description,t.suberror)?new M0(t.error||"",t.error_description,t.suberror,t.timestamp||"",t.trace_id||"",t.correlation_id||"",t.claims||"",i):new _d(t.error||"",t.error_description,t.suberror,i)}}s(W6e,"validateAuthorizationResponse");function ESt(t){let e="code=",r=t.error_uri?.lastIndexOf(e);return r&&r>=0?t.error_uri?.substring(r+e.length):void 0}s(ESt,"parseServerErrorNo");function vSt(t){return t.idTokenClaims?.sid||null}s(vSt,"extractAccountSid");function xSt(t){return t.idTokenClaims?.login_hint||null}s(xSt,"extractLoginHint");d();var G6e=",",j6e="|";function bSt(t){let{skus:e,libraryName:r,libraryVersion:n,extensionName:i,extensionVersion:o}=t,a=new Map([[0,[r,n]],[2,[i,o]]]),c=[];if(e?.length){if(c=e.split(G6e),c.length<4)return e}else c=Array.from({length:4},()=>j6e);return a.forEach((l,u)=>{l.length===2&&l[0]?.length&&l[1]?.length&&ISt({skuArr:c,index:u,skuName:l[0],skuVersion:l[1]})}),c.join(G6e)}s(bSt,"makeExtraSkuString");function ISt(t){let{skuArr:e,index:r,skuName:n,skuVersion:i}=t;r>=e.length||(e[r]=[n,i].join(j6e))}s(ISt,"setSku");var RS=class t{static{s(this,"ServerTelemetryManager")}constructor(e,r){this.cacheOutcome=us.NOT_APPLICABLE,this.cacheManager=r,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Je.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Je.EMPTY_STRING,this.telemetryCacheKey=el.CACHE_KEY+Ma.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${el.VALUE_SEPARATOR}${this.cacheOutcome}`,r=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&r.push(`broker_error=${n}`);let i=r.join(el.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),a=[e,o].join(el.VALUE_SEPARATOR);return[el.SCHEMA_VERSION,a,i].join(el.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*r).join(el.VALUE_SEPARATOR),i=e.errors.slice(0,r).join(el.VALUE_SEPARATOR),o=e.errors.length,a=r<o?el.OVERFLOW_TRUE:el.OVERFLOW_FALSE,c=[o,a].join(el.VALUE_SEPARATOR);return[el.SCHEMA_VERSION,e.cacheHits,n,i,c].join(el.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let r=this.getLastRequests();r.errors.length>=el.MAX_CACHED_ERRORS&&(r.failedRequests.shift(),r.failedRequests.shift(),r.errors.shift()),r.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Xn?e.subError?r.errors.push(e.subError):e.errorCode?r.errors.push(e.errorCode):r.errors.push(e.toString()):r.errors.push(e.toString()):r.errors.push(el.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),r=t.maxErrorsToSend(e),n=e.errors.length;if(r===n)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{let i={failedRequests:e.failedRequests.slice(r*2),errors:e.errors.slice(r),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i,this.correlationId)}}static maxErrorsToSend(e){let r,n=0,i=0,o=e.errors.length;for(r=0;r<o;r++){let a=e.failedRequests[2*r]||Je.EMPTY_STRING,c=e.failedRequests[2*r+1]||Je.EMPTY_STRING,l=e.errors[r]||Je.EMPTY_STRING;if(i+=a.toString().length+c.toString().length+l.length+3,i<el.MAX_LAST_HEADER_BYTES)n+=1;else break}return n}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||Je.EMPTY_STRING),e.push(this.regionSource||Je.EMPTY_STRING),e.push(this.regionOutcome||Je.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let r=this.getLastRequests();r.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return bSt(e)}};var tE=class{static{s(this,"Deserializer")}static deserializeJSONBlob(e){return e?JSON.parse(e):{}}static deserializeAccounts(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app,tenantProfiles:i.tenantProfiles?.map(c=>JSON.parse(c))},a=new lu;Hb.toObject(a,o),r[n]=a}),r}static deserializeIdTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm};r[n]=o}),r}static deserializeAccessTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash,userAssertionHash:i.userAssertionHash};r[n]=o}),r}static deserializeRefreshTokens(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm};r[n]=o}),r}static deserializeAppMetadata(e){let r={};return e&&Object.keys(e).map(function(n){let i=e[n];r[n]={clientId:i.client_id,environment:i.environment,familyId:i.family_id}}),r}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}};d();d();var V6e="system_assigned_managed_identity",kSt="managed_identity",w0e=`https://login.microsoftonline.com/${kSt}/`,wf={AUTHORIZATION_HEADER_NAME:"Authorization",METADATA_HEADER_NAME:"Metadata",APP_SERVICE_SECRET_HEADER_NAME:"X-IDENTITY-HEADER",ML_AND_SF_SECRET_HEADER_NAME:"secret"},Rc={API_VERSION:"api-version",RESOURCE:"resource",SHA256_TOKEN_TO_REFRESH:"token_sha256_to_refresh",XMS_CC:"xms_cc"},Nn={AZURE_POD_IDENTITY_AUTHORITY_HOST:"AZURE_POD_IDENTITY_AUTHORITY_HOST",DEFAULT_IDENTITY_CLIENT_ID:"DEFAULT_IDENTITY_CLIENT_ID",IDENTITY_ENDPOINT:"IDENTITY_ENDPOINT",IDENTITY_HEADER:"IDENTITY_HEADER",IDENTITY_SERVER_THUMBPRINT:"IDENTITY_SERVER_THUMBPRINT",IMDS_ENDPOINT:"IMDS_ENDPOINT",MSI_ENDPOINT:"MSI_ENDPOINT",MSI_SECRET:"MSI_SECRET"},Vn={APP_SERVICE:"AppService",AZURE_ARC:"AzureArc",CLOUD_SHELL:"CloudShell",DEFAULT_TO_IMDS:"DefaultToImds",IMDS:"Imds",MACHINE_LEARNING:"MachineLearning",SERVICE_FABRIC:"ServiceFabric"},wa={SYSTEM_ASSIGNED:"system-assigned",USER_ASSIGNED_CLIENT_ID:"user-assigned-client-id",USER_ASSIGNED_RESOURCE_ID:"user-assigned-resource-id",USER_ASSIGNED_OBJECT_ID:"user-assigned-object-id"},Us={GET:"get",POST:"post"},Dj={SUCCESS_RANGE_START:Jn.SUCCESS_RANGE_START,SUCCESS_RANGE_END:Jn.SUCCESS_RANGE_END,SERVER_ERROR:Jn.SERVER_ERROR},$6e="REGION_NAME",z6e="MSAL_FORCE_REGION",Y6e=32,K6e={SHA256:"sha256"},Nj={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},rl={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",AUTHORIZATION_PENDING:"authorization_pending",HTTP_PROTOCOL:"http://",LOCALHOST:"localhost"},rE={acquireTokenSilent:62,acquireTokenByUsernamePassword:371,acquireTokenByDeviceCode:671,acquireTokenByClientCredential:771,acquireTokenByCode:871,acquireTokenByRefreshToken:872},sm={RSA_256:"RS256",PSS_256:"PS256",X5T_256:"x5t#S256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},Lj={INTERVAL_MS:100,TIMEOUT_MS:5e3},J6e=4096;d();d();d();d();var EP=class{static{s(this,"NetworkUtils")}static getNetworkResponse(e,r,n){return{headers:e,body:r,status:n}}static urlToHttpOptions(e){let r={protocol:e.protocol,hostname:e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(r.port=Number(e.port)),(e.username||e.password)&&(r.auth=`${decodeURIComponent(e.username)}:${decodeURIComponent(e.password)}`),r}};var Mj=Ne(require("http"),1),_0e=Ne(require("https"),1);var vP=class{static{s(this,"HttpClient")}constructor(e,r){this.proxyUrl=e||"",this.customAgentOptions=r||{}}async sendGetRequestAsync(e,r,n){return this.proxyUrl?X6e(e,this.proxyUrl,Us.GET,r,this.customAgentOptions,n):Z6e(e,Us.GET,r,this.customAgentOptions,n)}async sendPostRequestAsync(e,r){return this.proxyUrl?X6e(e,this.proxyUrl,Us.POST,r,this.customAgentOptions):Z6e(e,Us.POST,r,this.customAgentOptions)}},X6e=s((t,e,r,n,i,o)=>{let a=new URL(t),c=new URL(e),l=n?.headers||{},u={host:c.hostname,port:c.port,method:"CONNECT",path:a.hostname,headers:l};i&&Object.keys(i).length&&(u.agent=new Mj.default.Agent(i));let f="";if(r===Us.POST){let m=n?.body||"";f=`Content-Type: application/x-www-form-urlencoded\r
Content-Length: ${m.length}\r
\r
${m}`}else o&&(u.timeout=o);let p=`${r.toUpperCase()} ${a.href} HTTP/1.1\r
Host: ${a.host}\r
Connection: close\r
`+f+`\r
`;return new Promise((m,h)=>{let g=Mj.default.request(u);o&&g.on("timeout",()=>{g.destroy(),h(new Error("Request time out"))}),g.end(),g.on("connect",(y,E)=>{let x=y?.statusCode||Dj.SERVER_ERROR;(x<Dj.SUCCESS_RANGE_START||x>Dj.SUCCESS_RANGE_END)&&(g.destroy(),E.destroy(),h(new Error(`Error connecting to proxy. Http status code: ${y.statusCode}. Http status message: ${y?.statusMessage||"Unknown"}`))),E.write(p);let b=[];E.on("data",_=>{b.push(_)}),E.on("end",()=>{let k=Buffer.concat([...b]).toString().split(`\r
`),P=parseInt(k[0].split(" ")[1]),N=k[0].split(" ").slice(2).join(" "),M=k[k.length-1],J=k.slice(1,k.length-2),pe=new Map;J.forEach(ce=>{let ie=ce.split(new RegExp(/:\s(.*)/s)),V=ie[0],Q=ie[1];try{let z=JSON.parse(Q);z&&typeof z=="object"&&(Q=z)}catch{}pe.set(V,Q)});let G=Object.fromEntries(pe),H=EP.getNetworkResponse(G,e9e(P,N,G,M),P);(P<Jn.SUCCESS_RANGE_START||P>Jn.SUCCESS_RANGE_END)&&H.body.error!==rl.AUTHORIZATION_PENDING&&g.destroy(),m(H)}),E.on("error",_=>{g.destroy(),E.destroy(),h(new Error(_.toString()))})}),g.on("error",y=>{g.destroy(),h(new Error(y.toString()))})})},"networkRequestViaProxy"),Z6e=s((t,e,r,n,i)=>{let o=e===Us.POST,a=r?.body||"",c=new URL(t),l=r?.headers||{},u={method:e,headers:l,...EP.urlToHttpOptions(c)};return n&&Object.keys(n).length&&(u.agent=new _0e.default.Agent(n)),o?u.headers={...u.headers,"Content-Length":a.length}:i&&(u.timeout=i),new Promise((f,p)=>{let m;u.protocol==="http:"?m=Mj.default.request(u):m=_0e.default.request(u),o&&m.write(a),i&&m.on("timeout",()=>{m.destroy(),p(new Error("Request time out"))}),m.end(),m.on("response",h=>{let g=h.headers,y=h.statusCode,E=h.statusMessage,x=[];h.on("data",b=>{x.push(b)}),h.on("end",()=>{let b=Buffer.concat([...x]).toString(),_=g,k=EP.getNetworkResponse(_,e9e(y,E,_,b),y);(y<Jn.SUCCESS_RANGE_START||y>Jn.SUCCESS_RANGE_END)&&k.body.error!==rl.AUTHORIZATION_PENDING&&m.destroy(),f(k)})}),m.on("error",h=>{m.destroy(),p(new Error(h.toString()))})})},"networkRequestViaHttps"),e9e=s((t,e,r,n)=>{let i;try{i=JSON.parse(n)}catch{let a,c;t>=Jn.CLIENT_ERROR_RANGE_START&&t<=Jn.CLIENT_ERROR_RANGE_END?(a="client_error",c="A client"):t>=Jn.SERVER_ERROR_RANGE_START&&t<=Jn.SERVER_ERROR_RANGE_END?(a="server_error",c="A server"):(a="unknown_error",c="An unknown"),i={error:a,error_description:`${c} error occured.
Http status code: ${t}
Http status message: ${e||"Unknown"}
Headers: ${JSON.stringify(r)}`}}return i},"parseBody");d();d();d();var Fj="invalid_file_extension",Oj="invalid_file_path",$b="invalid_managed_identity_id_type",Qj="invalid_secret",t9e="missing_client_id",r9e="network_unavailable",Uj="platform_not_supported",qj="unable_to_create_azure_arc",Hj="unable_to_create_cloud_shell",Wj="unable_to_create_source",xL="unable_to_read_secret_file",n9e="user_assigned_not_available_at_runtime",Gj="www_authenticate_header_missing",jj="www_authenticate_header_unsupported_format",kS={[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]:"azure_pod_identity_authority_host_url_malformed",[Nn.IDENTITY_ENDPOINT]:"identity_endpoint_url_malformed",[Nn.IMDS_ENDPOINT]:"imds_endpoint_url_malformed",[Nn.MSI_ENDPOINT]:"msi_endpoint_url_malformed"};var PSt={[Fj]:"The file path in the WWW-Authenticate header does not contain a .key file.",[Oj]:"The file path in the WWW-Authenticate header is not in a valid Windows or Linux Format.",[$b]:"More than one ManagedIdentityIdType was provided.",[Qj]:"The secret in the file on the file path in the WWW-Authenticate header is greater than 4096 bytes.",[Uj]:"The platform is not supported by Azure Arc. Azure Arc only supports Windows and Linux.",[t9e]:"A ManagedIdentityId id was not provided.",[kS.AZURE_POD_IDENTITY_AUTHORITY_HOST]:`The Managed Identity's '${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST}' environment variable is malformed.`,[kS.IDENTITY_ENDPOINT]:`The Managed Identity's '${Nn.IDENTITY_ENDPOINT}' environment variable is malformed.`,[kS.IMDS_ENDPOINT]:`The Managed Identity's '${Nn.IMDS_ENDPOINT}' environment variable is malformed.`,[kS.MSI_ENDPOINT]:`The Managed Identity's '${Nn.MSI_ENDPOINT}' environment variable is malformed.`,[r9e]:"Authentication unavailable. The request to the managed identity endpoint timed out.",[qj]:"Azure Arc Managed Identities can only be system assigned.",[Hj]:"Cloud Shell Managed Identities can only be system assigned.",[Wj]:"Unable to create a Managed Identity source based on environment variables.",[xL]:"Unable to read the secret file.",[n9e]:"Service Fabric user assigned managed identity ClientId or ResourceId is not configurable at runtime.",[Gj]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is missing.",[jj]:"A 401 response was received form the Azure Arc Managed Identity, but the www-authenticate header is in an unsupported format."},S0e=class t extends Xn{static{s(this,"ManagedIdentityError")}constructor(e){super(e,PSt[e]),this.name="ManagedIdentityError",Object.setPrototypeOf(this,t.prototype)}};function ic(t){return new S0e(t)}s(ic,"createManagedIdentityError");var Vj=class{static{s(this,"ManagedIdentityId")}get id(){return this._id}set id(e){this._id=e}get idType(){return this._idType}set idType(e){this._idType=e}constructor(e){let r=e?.userAssignedClientId,n=e?.userAssignedResourceId,i=e?.userAssignedObjectId;if(r){if(n||i)throw ic($b);this.id=r,this.idType=wa.USER_ASSIGNED_CLIENT_ID}else if(n){if(r||i)throw ic($b);this.id=n,this.idType=wa.USER_ASSIGNED_RESOURCE_ID}else if(i){if(r||n)throw ic($b);this.id=i,this.idType=wa.USER_ASSIGNED_OBJECT_ID}else this.id=V6e,this.idType=wa.SYSTEM_ASSIGNED}};d();var wl={invalidLoopbackAddressType:{code:"invalid_loopback_server_address_type",desc:"Loopback server address is not type string. This is unexpected."},unableToLoadRedirectUri:{code:"unable_to_load_redirectUrl",desc:"Loopback server callback was invoked without a url. This is unexpected."},noAuthCodeInResponse:{code:"no_auth_code_in_response",desc:"No auth code found in the server response. Please check your network trace to determine what happened."},noLoopbackServerExists:{code:"no_loopback_server_exists",desc:"No loopback server exists yet."},loopbackServerAlreadyExists:{code:"loopback_server_already_exists",desc:"Loopback server already exists. Cannot create another."},loopbackServerTimeout:{code:"loopback_server_timeout",desc:"Timed out waiting for auth code listener to be registered."},stateNotFoundError:{code:"state_not_found",desc:"State not found. Please verify that the request originated from msal."},thumbprintMissing:{code:"thumbprint_missing_from_client_certificate",desc:"Client certificate does not contain a SHA-1 or SHA-256 thumbprint."}},_f=class t extends Xn{static{s(this,"NodeAuthError")}constructor(e,r){super(e,r),this.name="NodeAuthError"}static createInvalidLoopbackAddressTypeError(){return new t(wl.invalidLoopbackAddressType.code,`${wl.invalidLoopbackAddressType.desc}`)}static createUnableToLoadRedirectUrlError(){return new t(wl.unableToLoadRedirectUri.code,`${wl.unableToLoadRedirectUri.desc}`)}static createNoAuthCodeInResponseError(){return new t(wl.noAuthCodeInResponse.code,`${wl.noAuthCodeInResponse.desc}`)}static createNoLoopbackServerExistsError(){return new t(wl.noLoopbackServerExists.code,`${wl.noLoopbackServerExists.desc}`)}static createLoopbackServerAlreadyExistsError(){return new t(wl.loopbackServerAlreadyExists.code,`${wl.loopbackServerAlreadyExists.desc}`)}static createLoopbackServerTimeoutError(){return new t(wl.loopbackServerTimeout.code,`${wl.loopbackServerTimeout.desc}`)}static createStateNotFoundError(){return new t(wl.stateNotFoundError.code,wl.stateNotFoundError.desc)}static createThumbprintMissingError(){return new t(wl.thumbprintMissing.code,wl.thumbprintMissing.desc)}};var BSt={clientId:Je.EMPTY_STRING,authority:Je.DEFAULT_AUTHORITY,clientSecret:Je.EMPTY_STRING,clientAssertion:Je.EMPTY_STRING,clientCertificate:{thumbprint:Je.EMPTY_STRING,thumbprintSha256:Je.EMPTY_STRING,privateKey:Je.EMPTY_STRING,x5c:Je.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:Je.EMPTY_STRING,authorityMetadata:Je.EMPTY_STRING,clientCapabilities:[],protocolMode:ju.AAD,azureCloudOptions:{azureCloudInstance:Y1.None,tenant:Je.EMPTY_STRING},skipAuthorityMetadataCache:!1,encodeExtraQueryParams:!1},DSt={claimsBasedCachingEnabled:!1},R0e={loggerCallback:s(()=>{},"loggerCallback"),piiLoggingEnabled:!1,logLevel:Ta.Info},NSt={loggerOptions:R0e,networkClient:new vP,proxyUrl:Je.EMPTY_STRING,customAgentOptions:{},disableInternalRetries:!1},LSt={application:{appName:Je.EMPTY_STRING,appVersion:Je.EMPTY_STRING}};function i9e({auth:t,broker:e,cache:r,system:n,telemetry:i}){let o={...NSt,networkClient:new vP(n?.proxyUrl,n?.customAgentOptions),loggerOptions:n?.loggerOptions||R0e,disableInternalRetries:n?.disableInternalRetries||!1};if(t.clientCertificate&&!t.clientCertificate.thumbprint&&!t.clientCertificate.thumbprintSha256)throw _f.createStateNotFoundError();return{auth:{...BSt,...t},broker:{...e},cache:{...DSt,...r},system:{...o,...n},telemetry:{...LSt,...i}}}s(i9e,"buildAppConfiguration");function o9e({clientCapabilities:t,managedIdentityIdParams:e,system:r}){let n=new Vj(e),i=r?.loggerOptions||R0e,o;return r?.networkClient?o=r.networkClient:o=new vP(r?.proxyUrl,r?.customAgentOptions),{clientCapabilities:t||[],managedIdentityId:n,system:{loggerOptions:i,networkClient:o},disableInternalRetries:r?.disableInternalRetries||!1}}s(o9e,"buildManagedIdentityConfiguration");d();d();d();d();var s9e=Ne(require("crypto"));var zj=new Uint8Array(256),$j=zj.length;function k0e(){return $j>zj.length-16&&(s9e.default.randomFillSync(zj),$j=0),zj.slice($j,$j+=16)}s(k0e,"rng");d();d();d();var a9e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function MSt(t){return typeof t=="string"&&a9e.test(t)}s(MSt,"validate");var c9e=MSt;var fu=[];for(let t=0;t<256;++t)fu.push((t+256).toString(16).substr(1));function FSt(t,e=0){let r=(fu[t[e+0]]+fu[t[e+1]]+fu[t[e+2]]+fu[t[e+3]]+"-"+fu[t[e+4]]+fu[t[e+5]]+"-"+fu[t[e+6]]+fu[t[e+7]]+"-"+fu[t[e+8]]+fu[t[e+9]]+"-"+fu[t[e+10]]+fu[t[e+11]]+fu[t[e+12]]+fu[t[e+13]]+fu[t[e+14]]+fu[t[e+15]]).toLowerCase();if(!c9e(r))throw TypeError("Stringified UUID is invalid");return r}s(FSt,"stringify");var l9e=FSt;d();function OSt(t,e,r){t=t||{};let n=t.random||(t.rng||k0e)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return l9e(n)}s(OSt,"v4");var P0e=OSt;var xP=class{static{s(this,"GuidGenerator")}generateGuid(){return P0e()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}};d();var O0=class t{static{s(this,"EncodingUtils")}static base64Encode(e,r){return Buffer.from(e,r).toString(cu.BASE64)}static base64EncodeUrl(e,r){return t.base64Encode(e,r).replace(/=/g,Je.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,cu.BASE64).toString("utf8")}static base64DecodeUrl(e){let r=e.replace(/-/g,"+").replace(/_/g,"/");for(;r.length%4;)r+="=";return t.base64Decode(r)}};d();d();var u9e=Ne(require("crypto"),1);var zb=class{static{s(this,"HashUtils")}sha256(e){return u9e.default.createHash(K6e.SHA256).update(e).digest()}};var d9e=Ne(require("crypto"),1);var Yj=class{static{s(this,"PkceGenerator")}constructor(){this.hashUtils=new zb}async generatePkceCodes(){let e=this.generateCodeVerifier(),r=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:r}}generateCodeVerifier(){let e=[],r=256-256%Nj.CV_CHARSET.length;for(;e.length<=Y6e;){let i=d9e.default.randomBytes(1)[0];if(i>=r)continue;let o=i%Nj.CV_CHARSET.length;e.push(Nj.CV_CHARSET[o])}let n=e.join(Je.EMPTY_STRING);return O0.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return O0.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}};var by=class{static{s(this,"CryptoProvider")}constructor(){this.pkceGenerator=new Yj,this.guidGenerator=new xP,this.hashUtils=new zb}base64UrlEncode(){throw new Error("Method not implemented.")}encodeKid(){throw new Error("Method not implemented.")}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return O0.base64Encode(e)}base64Decode(e){return O0.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return O0.base64EncodeUrl(this.hashUtils.sha256(e).toString(cu.BASE64),cu.BASE64)}};d();d();var Yb=class extends Hb{static{s(this,"NodeStorage")}constructor(e,r,n,i){super(r,n,e,new CS,i),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let r={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e){let i=e[n];if(typeof i=="object")if(i instanceof lu)r.accounts[n]=i;else if(tl.isIdTokenEntity(i))r.idTokens[n]=i;else if(tl.isAccessTokenEntity(i))r.accessTokens[n]=i;else if(tl.isRefreshTokenEntity(i))r.refreshTokens[n]=i;else if(tl.isAppMetadataEntity(n,i))r.appMetadata[n]=i;else continue}return r}inMemoryCacheToCache(e){let r=this.getCache();return r={...r,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},r}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let r=this.inMemoryCacheToCache(e);this.setCache(r),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,r){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=r,this.setCache(n)}getAccountKeys(){let e=this.getInMemoryCache();return Object.keys(e.accounts)}getTokenKeys(){let e=this.getInMemoryCache();return{idToken:Object.keys(e.idTokens),accessToken:Object.keys(e.accessTokens),refreshToken:Object.keys(e.refreshTokens)}}getAccount(e){return this.getItem(e)?Object.assign(new lu,this.getItem(e)):null}async setAccount(e){let r=e.generateAccountKey();this.setItem(r,e)}getIdTokenCredential(e){let r=this.getItem(e);return tl.isIdTokenEntity(r)?r:null}async setIdTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getAccessTokenCredential(e){let r=this.getItem(e);return tl.isAccessTokenEntity(r)?r:null}async setAccessTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getRefreshTokenCredential(e){let r=this.getItem(e);return tl.isRefreshTokenEntity(r)?r:null}async setRefreshTokenCredential(e){let r=tl.generateCredentialKey(e);this.setItem(r,e)}getAppMetadata(e){let r=this.getItem(e);return tl.isAppMetadataEntity(e,r)?r:null}setAppMetadata(e){let r=tl.generateAppMetadataKey(e);this.setItem(r,e)}getServerTelemetry(e){let r=this.getItem(e);return r&&tl.isServerTelemetryEntity(e,r)?r:null}setServerTelemetry(e,r){this.setItem(e,r)}getAuthorityMetadata(e){let r=this.getItem(e);return r&&tl.isAuthorityMetadataEntity(e,r)?r:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,r){this.setItem(e,r)}getThrottlingCache(e){let r=this.getItem(e);return r&&tl.isThrottlingEntity(e,r)?r:null}setThrottlingCache(e,r){this.setItem(e,r)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let r=!1,n=this.getCache();return n[e]&&(delete n[e],r=!0),r&&(this.setCache(n),this.emitChange()),r}removeOutdatedAccount(e){this.removeItem(e)}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(r=>{this.removeItem(r)}),this.emitChange()}static generateInMemoryCache(e){return tE.deserializeAllCache(tE.deserializeJSONBlob(e))}static generateJsonCache(e){return Bb.serializeAllCache(e)}updateCredentialCacheKey(e,r){let n=tl.generateCredentialKey(r);if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${r.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${r.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}};d();var bL={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},bP=class{static{s(this,"TokenCache")}constructor(e,r,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=r}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Bb.serializeAllCache(this.storage.getInMemoryCache());return this.cacheSnapshot?(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)):this.logger.trace("No cache snapshot to merge"),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,this.cacheSnapshot){this.logger.trace("Reading cache snapshot from disk");let r=tE.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(r)}else this.logger.trace("No cache snapshot to deserialize")}getKVStore(){return this.storage.getCache()}getCacheSnapshot(){let e=Yb.generateInMemoryCache(this.cacheSnapshot);return this.storage.inMemoryCacheToCache(e)}async getAllAccounts(e=new by().createNewGuid()){this.logger.trace("getAllAccounts called");let r;try{return this.persistence&&(r=new F0(this,!1),await this.persistence.beforeCacheAccess(r)),this.storage.getAllAccounts({},e)}finally{this.persistence&&r&&await this.persistence.afterCacheAccess(r)}}async getAccountByHomeId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let r=await this.getAllAccounts();return e&&r&&r.length&&r.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e,r){this.logger.trace("removeAccount called");let n;try{this.persistence&&(n=new F0(this,!0),await this.persistence.beforeCacheAccess(n)),this.storage.removeAccount(lu.generateAccountCacheKey(e),r||new xP().generateGuid())}finally{this.persistence&&n&&await this.persistence.afterCacheAccess(n)}}async overwriteCache(){if(!this.persistence){this.logger.info("No persistence layer specified, cache cannot be overwritten");return}this.logger.info("Overwriting in-memory cache with persistent cache"),this.storage.clear();let e=new F0(this,!1);await this.persistence.beforeCacheAccess(e);let r=this.getCacheSnapshot();this.storage.setCache(r),await this.persistence.afterCacheAccess(e)}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,r){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,r);return this.mergeUpdates(n,r)}mergeUpdates(e,r){return Object.keys(r).forEach(n=>{let i=r[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",c=!Array.isArray(i),l=typeof e[n]<"u"&&e[n]!==null;o&&a&&c&&l?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,r){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,r.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,r.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,r.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,r.IdToken):e.IdToken,c=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,r.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:c}}mergeRemovalsDict(e,r){let n={...e};return Object.keys(e).forEach(i=>{(!r||!r.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...bL.Account,...e.Account},IdToken:{...bL.IdToken,...e.IdToken},AccessToken:{...bL.AccessToken,...e.AccessToken},RefreshToken:{...bL.RefreshToken,...e.RefreshToken},AppMetadata:{...bL.AppMetadata,...e.AppMetadata}}}};d();var HFe=Ne(qFe(),1);var nE=class t{static{s(this,"ClientAssertion")}static fromAssertion(e){let r=new t;return r.jwt=e,r}static fromCertificate(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!1,n&&(i.publicCertificate=this.parseCertificate(n)),i}static fromCertificateWithSha256Thumbprint(e,r,n){let i=new t;return i.privateKey=r,i.thumbprint=e,i.useSha256=!0,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,r,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&r===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,r,n);if(this.jwt)return this.jwt;throw mt(ts.invalidAssertion)}createJwt(e,r,n){this.issuer=r,this.jwtAudience=n;let i=Qs.nowSeconds();this.expirationTime=i+600;let a={alg:this.useSha256?sm.PSS_256:sm.RSA_256},c=this.useSha256?sm.X5T_256:sm.X5T;Object.assign(a,{[c]:O0.base64EncodeUrl(this.thumbprint,cu.HEX)}),this.publicCertificate&&Object.assign(a,{[sm.X5C]:this.publicCertificate});let l={[sm.AUDIENCE]:this.jwtAudience,[sm.EXPIRATION_TIME]:this.expirationTime,[sm.ISSUER]:this.issuer,[sm.SUBJECT]:this.issuer,[sm.NOT_BEFORE]:i,[sm.JWT_ID]:e.createNewGuid()};return this.jwt=HFe.default.sign(l,this.privateKey,{header:a}),this.jwt}isExpired(){return this.expirationTime<Qs.nowSeconds()}static parseCertificate(e){let r=/-----BEGIN CERTIFICATE-----\r*\n(.+?)\r*\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=r.exec(e))!==null;)n.push(i[1].replace(/\r*\n/g,Je.EMPTY_STRING));return n}};d();var bV="@azure/msal-node",ag="3.6.3";d();var PP=class extends du{static{s(this,"UsernamePasswordClient")}constructor(e){super(e)}async acquireToken(e){this.logger.info("in acquireToken call in username-password client");let r=Qs.nowSeconds(),n=await this.executeTokenRequest(this.authority,e),i=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(n.body),i.handleServerTokenResponse(n.body,this.authority,r,e)}async executeTokenRequest(e,r){let n=this.createTokenQueryParameters(r),i=wi.appendQueryString(e.tokenEndpoint,n),o=await this.createTokenRequestBody(r),a=this.createTokenRequestHeaders({credential:r.username,type:wd.UPN}),c={clientId:this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid};return this.executePostToTokenEndpoint(i,o,a,c,r.correlationId)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addUsername(r,e.username),rr.addPassword(r,e.password),rr.addScopes(r,e.scopes),rr.addResponseType(r,sP.IDTOKEN_TOKEN),rr.addGrantType(r,Tf.RESOURCE_OWNER_PASSWORD_GRANT),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.username&&rr.addCcsUpn(r,e.username),uu.mapToQueryString(r)}};d();function WFe(t,e,r,n){let i=vL.getStandardAuthorizeRequestParameters({...t.auth,authority:e,redirectUri:r.redirectUri||""},r,n);return rr.addLibraryInfo(i,{sku:rl.MSAL_SKU,version:ag,cpu:process.arch||"",os:process.platform||""}),t.auth.protocolMode!==ju.OIDC&&rr.addApplicationTelemetry(i,t.telemetry.application),rr.addResponseType(i,sP.CODE),r.codeChallenge&&r.codeChallengeMethod&&rr.addCodeChallengeParams(i,r.codeChallenge,r.codeChallengeMethod),rr.addExtraQueryParameters(i,r.extraQueryParameters||{}),vL.getAuthorizeUrl(e,i,t.auth.encodeExtraQueryParams,r.extraQueryParameters)}s(WFe,"getAuthCodeRequestUrl");var Xb=class{static{s(this,"ClientApplication")}constructor(e){this.config=i9e(e),this.cryptoProvider=new by,this.logger=new N0(this.config.system.loggerOptions,bV,ag),this.storage=new Yb(this.logger,this.config.auth.clientId,this.cryptoProvider,C0e(this.config.auth)),this.tokenCache=new bP(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||Ay.QUERY,authenticationScheme:Yi.BEARER,state:e.state||"",nonce:e.nonce||""},n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions);return WFe(this.config,n,r,this.logger)}async acquireTokenByCode(e,r){this.logger.info("acquireTokenByCode called"),e.state&&r&&(this.logger.info("acquireTokenByCode - validating state"),this.validateState(e.state,r.state||""),r={...r,state:""});let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},i=this.initializeServerTelemetryManager(rE.acquireTokenByCode,n.correlationId);try{let o=await this.createAuthority(n.authority,n.correlationId,void 0,e.azureCloudOptions),a=await this.buildOauthClientConfiguration(o,n.correlationId,n.redirectUri,i),c=new CL(a);return this.logger.verbose("Auth code client created",n.correlationId),await c.acquireToken(n,r)}catch(o){throw o instanceof Xn&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e),authenticationScheme:Yi.BEARER},n=this.initializeServerTelemetryManager(rE.acquireTokenByRefreshToken,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new SS(o);return this.logger.verbose("Refresh token client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let r={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(rE.acquireTokenSilent,r.correlationId,r.forceRefresh);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,r.redirectUri||"",n),a=new EL(o);this.logger.verbose("Silent flow client created",r.correlationId);try{return await this.tokenCache.overwriteCache(),await this.acquireCachedTokenSilent(r,a,o)}catch(c){if(c instanceof Qb&&c.errorCode===ts.tokenRefreshRequired)return new SS(o).acquireTokenByRefreshToken(r);throw c}}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireCachedTokenSilent(e,r,n){let[i,o]=await r.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...bf]});if(o===us.PROACTIVELY_REFRESHED){this.logger.info("ClientApplication:acquireCachedTokenSilent - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");let a=new SS(n);try{await a.acquireTokenByRefreshToken(e)}catch{}}return i}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(rE.acquireTokenByUsernamePassword,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new PP(o);return this.logger.verbose("Username password client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}validateState(e,r){if(!e)throw _f.createStateNotFoundError();if(e!==r)throw mt(ts.stateMismatch)}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,r,n,i){return this.logger.verbose("buildOauthClientConfiguration called",r),this.logger.info(`Building oauth client configuration with the following authority: ${e.tokenEndpoint}.`,r),i?.updateRegionDiscoveryMetadata(e.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:e,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:n},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:r},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:i,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:await this.getClientAssertion(e)},libraryInfo:{sku:rl.MSAL_SKU,version:ag,cpu:process.arch||Je.EMPTY_STRING,os:process.platform||Je.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}async getClientAssertion(e){return this.developerProvidedClientAssertion&&(this.clientAssertion=nE.fromAssertion(await Sd(this.developerProvidedClientAssertion,this.config.auth.clientId,e.tokenEndpoint))),this.clientAssertion&&{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:rl.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===Yi.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=Yi.BEARER,this.config.cache.claimsBasedCachingEnabled&&e.claims&&!ua.isEmptyObj(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...bf],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,r,n){let i={clientId:this.config.auth.clientId,correlationId:r,apiId:e,forceRefresh:n||!1};return new RS(i,this.storage)}async createAuthority(e,r,n,i){this.logger.verbose("createAuthority called",r);let o=og.generateAuthority(e,i||this.config.auth.azureCloudOptions),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:n,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache};return Tj.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a,this.logger,r)}clearCache(){this.storage.clear()}};d();var GFe=Ne(require("http"),1);var IV=class{static{s(this,"LoopbackClient")}async listenForAuthCode(e,r){if(this.server)throw _f.createLoopbackServerAlreadyExistsError();return new Promise((n,i)=>{this.server=GFe.default.createServer((o,a)=>{let c=o.url;if(c){if(c===Je.FORWARD_SLASH){a.end(e||"Auth code was successfully acquired. You can close this window now.");return}}else{a.end(r||"Error occurred loading redirectUrl"),i(_f.createUnableToLoadRedirectUrlError());return}let l=this.getRedirectUri(),u=new URL(c,l),f=uu.getDeserializedResponse(u.search)||{};f.code&&(a.writeHead(Jn.REDIRECT,{location:l}),a.end()),f.error&&a.end(r||`Error occurred: ${f.error}`),n(f)}),this.server.listen(0,"127.0.0.1")})}getRedirectUri(){if(!this.server||!this.server.listening)throw _f.createNoLoopbackServerExistsError();let e=this.server.address();if(!e||typeof e=="string"||!e.port)throw this.closeServer(),_f.createInvalidLoopbackAddressTypeError();let r=e&&e.port;return`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}:${r}`}closeServer(){this.server&&(this.server.close(),typeof this.server.closeAllConnections=="function"&&this.server.closeAllConnections(),this.server.unref(),this.server=void 0)}};d();var BP=class extends du{static{s(this,"DeviceCodeClient")}constructor(e){super(e)}async acquireToken(e){let r=await this.getDeviceCode(e);e.deviceCodeCallback(r);let n=Qs.nowSeconds(),i=await this.acquireTokenWithDeviceCode(e,r),o=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i),o.handleServerTokenResponse(i,this.authority,n,e)}async getDeviceCode(e){let r=this.createExtraQueryParameters(e),n=wi.appendQueryString(this.authority.deviceCodeEndpoint,r),i=this.createQueryString(e),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return this.executePostRequestToDeviceCodeEndpoint(n,i,o,a,e.correlationId)}createExtraQueryParameters(e){let r=new Map;return e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),uu.mapToQueryString(r)}async executePostRequestToDeviceCodeEndpoint(e,r,n,i,o){let{body:{user_code:a,device_code:c,verification_uri:l,expires_in:u,interval:f,message:p}}=await this.sendPostRequest(i,e,{body:r,headers:n},o);return{userCode:a,deviceCode:c,verificationUri:l,expiresIn:u,interval:f,message:p}}createQueryString(e){let r=new Map;return rr.addScopes(r,e.scopes),rr.addClientId(r,this.config.authOptions.clientId),e.extraQueryParameters&&rr.addExtraQueryParameters(r,e.extraQueryParameters),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}continuePolling(e,r,n){if(n)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),mt(ts.deviceCodePollingCancelled);if(r&&r<e&&Qs.nowSeconds()>r)throw this.logger.error(`User defined timeout for device code polling reached. The timeout was set for ${r}`),mt(ts.userTimeoutReached);if(Qs.nowSeconds()>e)throw r&&this.logger.verbose(`User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for ${r}`),this.logger.error(`Device code expired. Expiration time of device code was ${e}`),mt(ts.deviceCodeExpired);return!0}async acquireTokenWithDeviceCode(e,r){let n=this.createTokenQueryParameters(e),i=wi.appendQueryString(this.authority.tokenEndpoint,n),o=this.createTokenRequestBody(e,r),a=this.createTokenRequestHeaders(),c=e.timeout?Qs.nowSeconds()+e.timeout:void 0,l=Qs.nowSeconds()+r.expiresIn,u=r.interval*1e3;for(;this.continuePolling(l,c,e.cancel);){let f={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},p=await this.executePostToTokenEndpoint(i,o,a,f,e.correlationId);if(p.body&&p.body.error)if(p.body.error===Je.AUTHORIZATION_PENDING)this.logger.info("Authorization pending. Continue polling."),await Qs.delay(u);else throw this.logger.info("Unexpected error in polling from the server"),ffe(lP.postRequestFailed,p.body.error);else return this.logger.verbose("Authorization completed successfully. Polling stopped."),p.body}throw this.logger.error("Polling stopped for unknown reasons."),mt(ts.deviceCodeUnknownError)}createTokenRequestBody(e,r){let n=new Map;rr.addScopes(n,e.scopes),rr.addClientId(n,this.config.authOptions.clientId),rr.addGrantType(n,Tf.DEVICE_CODE_GRANT),rr.addDeviceCode(n,r.deviceCode);let i=e.correlationId||this.config.cryptoInterface.createNewGuid();return rr.addCorrelationId(n,i),rr.addClientInfo(n),rr.addLibraryInfo(n,this.config.libraryInfo),rr.addApplicationTelemetry(n,this.config.telemetry.application),rr.addThrottling(n),this.serverTelemetryManager&&rr.addServerTelemetry(n,this.serverTelemetryManager),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(n,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(n)}};var DP=class extends Xb{static{s(this,"PublicClientApplication")}constructor(e){super(e),this.config.broker.nativeBrokerPlugin&&(this.config.broker.nativeBrokerPlugin.isBrokerAvailable?(this.nativeBrokerPlugin=this.config.broker.nativeBrokerPlugin,this.nativeBrokerPlugin.setLogger(this.config.system.loggerOptions)):this.logger.warning("NativeBroker implementation was provided but the broker is unavailable.")),this.skus=RS.makeExtraSkuString({libraryName:rl.MSAL_SKU,libraryVersion:ag})}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let r=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(rE.acquireTokenByDeviceCode,r.correlationId);try{let i=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),o=await this.buildOauthClientConfiguration(i,r.correlationId,"",n),a=new BP(o);return this.logger.verbose("Device code client created",r.correlationId),await a.acquireToken(r)}catch(i){throw i instanceof Xn&&i.setCorrelationId(r.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenInteractive(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();this.logger.trace("acquireTokenInteractive called",r);let{openBrowser:n,successTemplate:i,errorTemplate:o,windowHandle:a,loopbackClient:c,...l}=e;if(this.nativeBrokerPlugin){let g={...l,clientId:this.config.auth.clientId,scopes:e.scopes||bf,redirectUri:`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...l.extraQueryParameters,...l.tokenQueryParameters,[ES.X_CLIENT_EXTRA_SKU]:this.skus},accountId:l.account?.nativeAccountId};return this.nativeBrokerPlugin.acquireTokenInteractive(g,a)}let{verifier:u,challenge:f}=await this.cryptoProvider.generatePkceCodes(),p=c||new IV,m={},h=null;try{let g=p.listenForAuthCode(i,o).then(k=>{m=k}).catch(k=>{h=k}),y=await this.waitForRedirectUri(p),E={...l,correlationId:r,scopes:e.scopes||bf,redirectUri:y,responseMode:Ay.QUERY,codeChallenge:f,codeChallengeMethod:oj.S256},x=await this.getAuthCodeUrl(E);if(await n(x),await g,h)throw h;if(m.error)throw new _d(m.error,m.error_description,m.suberror);if(!m.code)throw _f.createNoAuthCodeInResponseError();let b=m.client_info,_={code:m.code,codeVerifier:u,clientInfo:b||Je.EMPTY_STRING,...E};return await this.acquireTokenByCode(_)}finally{p.closeServer()}}async acquireTokenSilent(e){let r=e.correlationId||this.cryptoProvider.createNewGuid();if(this.logger.trace("acquireTokenSilent called",r),this.nativeBrokerPlugin){let n={...e,clientId:this.config.auth.clientId,scopes:e.scopes||bf,redirectUri:`${rl.HTTP_PROTOCOL}${rl.LOCALHOST}`,authority:e.authority||this.config.auth.authority,correlationId:r,extraParameters:{...e.tokenQueryParameters,[ES.X_CLIENT_EXTRA_SKU]:this.skus},accountId:e.account.nativeAccountId,forceRefresh:e.forceRefresh||!1};return this.nativeBrokerPlugin.acquireTokenSilent(n)}return super.acquireTokenSilent(e)}async signOut(e){if(this.nativeBrokerPlugin&&e.account.nativeAccountId){let r={clientId:this.config.auth.clientId,accountId:e.account.nativeAccountId,correlationId:e.correlationId||this.cryptoProvider.createNewGuid()};await this.nativeBrokerPlugin.signOut(r)}await this.getTokenCache().removeAccount(e.account,e.correlationId)}async getAllAccounts(){if(this.nativeBrokerPlugin){let e=this.cryptoProvider.createNewGuid();return this.nativeBrokerPlugin.getAllAccounts(this.config.auth.clientId,e)}return this.getTokenCache().getAllAccounts()}async waitForRedirectUri(e){return new Promise((r,n)=>{let i=0,o=setInterval(()=>{if(Lj.TIMEOUT_MS/Lj.INTERVAL_MS<i){clearInterval(o),n(_f.createLoopbackServerTimeoutError());return}try{let a=e.getRedirectUri();clearInterval(o),r(a);return}catch(a){if(a instanceof Xn&&a.errorCode===wl.noLoopbackServerExists.code){i++;return}clearInterval(o),n(a);return}},Lj.INTERVAL_MS)})}};d();d();var Zb=class extends du{static{s(this,"ClientCredentialClient")}constructor(e,r){super(e),this.appTokenProvider=r}async acquireToken(e){if(e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority);let[r,n]=await this.getCachedAuthenticationResult(e,this.config,this.cryptoUtils,this.authority,this.cacheManager,this.serverTelemetryManager);return r?(n===us.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.executeTokenRequest(e,this.authority,!0)),r):this.executeTokenRequest(e,this.authority)}async getCachedAuthenticationResult(e,r,n,i,o,a){let c=r,l=r,u=us.NOT_APPLICABLE,f;c.serializableCache&&c.persistencePlugin&&(f=new F0(c.serializableCache,!1),await c.persistencePlugin.beforeCacheAccess(f));let p=this.readAccessTokenFromCache(i,l.managedIdentityId?.id||c.authOptions.clientId,new Sc(e.scopes||[]),o,e.correlationId);return c.serializableCache&&c.persistencePlugin&&f&&await c.persistencePlugin.afterCacheAccess(f),p?Qs.isTokenExpired(p.expiresOn,c.systemOptions?.tokenRenewalOffsetSeconds||cP)?(a?.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED),[null,us.CACHED_ACCESS_TOKEN_EXPIRED]):(p.refreshOn&&Qs.isTokenExpired(p.refreshOn.toString(),0)&&(u=us.PROACTIVELY_REFRESHED,a?.setCacheOutcome(us.PROACTIVELY_REFRESHED)),[await nc.generateAuthenticationResult(n,i,{account:null,idToken:null,accessToken:p,refreshToken:null,appMetadata:null},!0,e),u]):(a?.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN),[null,us.NO_CACHED_ACCESS_TOKEN])}readAccessTokenFromCache(e,r,n,i,o){let a={homeAccountId:Je.EMPTY_STRING,environment:e.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ACCESS_TOKEN,clientId:r,realm:e.tenant,target:Sc.createSearchScopes(n.asArray())},c=i.getAccessTokensByFilter(a,o);if(c.length<1)return null;if(c.length>1)throw mt(ts.multipleMatchingTokens);return c[0]}async executeTokenRequest(e,r,n){let i,o;if(this.appTokenProvider){this.logger.info("Using appTokenProvider extensibility.");let l={correlationId:e.correlationId,tenantId:this.config.authOptions.authority.tenant,scopes:e.scopes,claims:e.claims};o=Qs.nowSeconds();let u=await this.appTokenProvider(l);i={access_token:u.accessToken,expires_in:u.expiresInSeconds,refresh_in:u.refreshInSeconds,token_type:Yi.BEARER}}else{let l=this.createTokenQueryParameters(e),u=wi.appendQueryString(r.tokenEndpoint,l),f=await this.createTokenRequestBody(e),p=this.createTokenRequestHeaders(),m={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};this.logger.info("Sending token request to endpoint: "+r.tokenEndpoint),o=Qs.nowSeconds();let h=await this.executePostToTokenEndpoint(u,f,p,m,e.correlationId);i=h.body,i.status=h.status}let a=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(i,n),await a.handleServerTokenResponse(i,this.authority,o,e)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes,!1),rr.addGrantType(r,Tf.CLIENT_CREDENTIALS_GRANT),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=e.clientAssertion||this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(!ua.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}};d();var NP=class extends du{static{s(this,"OnBehalfOfClient")}constructor(e){super(e)}async acquireToken(e){if(this.scopeSet=new Sc(e.scopes||[]),this.userAssertionHash=await this.cryptoUtils.hashString(e.oboAssertion),e.skipCache||e.claims)return this.executeTokenRequest(e,this.authority,this.userAssertionHash);try{return await this.getCachedAuthenticationResult(e)}catch{return await this.executeTokenRequest(e,this.authority,this.userAssertionHash)}}async getCachedAuthenticationResult(e){let r=this.readAccessTokenFromCacheForOBO(this.config.authOptions.clientId,e);if(r){if(Qs.isTokenExpired(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.serverTelemetryManager?.setCacheOutcome(us.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info(`OnbehalfofFlow:getCachedAuthenticationResult - Cached access token is expired or will expire within ${this.config.systemOptions.tokenRenewalOffsetSeconds} seconds.`),mt(ts.tokenRefreshRequired)}else throw this.serverTelemetryManager?.setCacheOutcome(us.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),mt(ts.tokenRefreshRequired);let n=this.readIdTokenFromCacheForOBO(r.homeAccountId,e.correlationId),i,o=null;if(n){i=lj.extractTokenClaims(n.secret,O0.base64Decode);let a=i.oid||i.sub,c={homeAccountId:n.homeAccountId,environment:n.environment,tenantId:n.realm,username:Je.EMPTY_STRING,localAccountId:a||Je.EMPTY_STRING};o=this.cacheManager.readAccountFromCache(c,e.correlationId)}return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),nc.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:o,accessToken:r,idToken:n,refreshToken:null,appMetadata:null},!0,e,i)}readIdTokenFromCacheForOBO(e,r){let n={homeAccountId:e,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:mo.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant},i=this.cacheManager.getIdTokensByFilter(n,r);return Object.values(i).length<1?null:Object.values(i)[0]}readAccessTokenFromCacheForOBO(e,r){let n=r.authenticationScheme||Yi.BEARER,o={credentialType:n&&n.toLowerCase()!==Yi.BEARER.toLowerCase()?mo.ACCESS_TOKEN_WITH_AUTH_SCHEME:mo.ACCESS_TOKEN,clientId:e,target:Sc.createSearchScopes(this.scopeSet.asArray()),tokenType:n,keyId:r.sshKid,requestedClaimsHash:r.requestedClaimsHash,userAssertionHash:this.userAssertionHash},a=this.cacheManager.getAccessTokensByFilter(o,r.correlationId),c=a.length;if(c<1)return null;if(c>1)throw mt(ts.multipleMatchingTokens);return a[0]}async executeTokenRequest(e,r,n){let i=this.createTokenQueryParameters(e),o=wi.appendQueryString(r.tokenEndpoint,i),a=await this.createTokenRequestBody(e),c=this.createTokenRequestHeaders(),l={clientId:this.config.authOptions.clientId,authority:e.authority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid},u=Qs.nowSeconds(),f=await this.executePostToTokenEndpoint(o,a,c,l,e.correlationId),p=new nc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return p.validateTokenResponse(f.body),await p.handleServerTokenResponse(f.body,this.authority,u,e,void 0,n)}async createTokenRequestBody(e){let r=new Map;rr.addClientId(r,this.config.authOptions.clientId),rr.addScopes(r,e.scopes),rr.addGrantType(r,Tf.JWT_BEARER),rr.addClientInfo(r),rr.addLibraryInfo(r,this.config.libraryInfo),rr.addApplicationTelemetry(r,this.config.telemetry.application),rr.addThrottling(r),this.serverTelemetryManager&&rr.addServerTelemetry(r,this.serverTelemetryManager);let n=e.correlationId||this.config.cryptoInterface.createNewGuid();rr.addCorrelationId(r,n),rr.addRequestTokenUse(r,ES.ON_BEHALF_OF),rr.addOboAssertion(r,e.oboAssertion),this.config.clientCredentials.clientSecret&&rr.addClientSecret(r,this.config.clientCredentials.clientSecret);let i=this.config.clientCredentials.clientAssertion;return i&&(rr.addClientAssertion(r,await Sd(i.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),rr.addClientAssertionType(r,i.assertionType)),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&rr.addClaims(r,e.claims,this.config.authOptions.clientCapabilities),uu.mapToQueryString(r)}};var LP=class extends Xb{static{s(this,"ConfidentialClientApplication")}constructor(e){super(e);let r=!!this.config.auth.clientSecret,n=!!this.config.auth.clientAssertion,i=(!!this.config.auth.clientCertificate?.thumbprint||!!this.config.auth.clientCertificate?.thumbprintSha256)&&!!this.config.auth.clientCertificate?.privateKey;if(!this.appTokenProvider){if(r&&n||n&&i||r&&i)throw mt(ts.invalidClientCredential);if(this.config.auth.clientSecret){this.clientSecret=this.config.auth.clientSecret;return}if(this.config.auth.clientAssertion){this.developerProvidedClientAssertion=this.config.auth.clientAssertion;return}if(i)this.clientAssertion=this.config.auth.clientCertificate.thumbprintSha256?nE.fromCertificateWithSha256Thumbprint(this.config.auth.clientCertificate.thumbprintSha256,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c):nE.fromCertificate(this.config.auth.clientCertificate.thumbprint,this.config.auth.clientCertificate.privateKey,this.config.auth.clientCertificate.x5c);else throw mt(ts.invalidClientCredential);this.appTokenProvider=void 0}}SetAppTokenProvider(e){this.appTokenProvider=e}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let r;e.clientAssertion&&(r={assertion:await Sd(e.clientAssertion,this.config.auth.clientId),assertionType:rl.JWT_BEARER_ASSERTION_TYPE});let n=await this.initializeBaseRequest(e),i={...n,scopes:n.scopes.filter(m=>!bf.includes(m))},o={...e,...i,clientAssertion:r},c=new wi(o.authority).getUrlComponents().PathSegments[0];if(Object.values(If).includes(c))throw mt(ts.missingTenantIdError);let l=process.env[z6e],u;o.azureRegion!=="DisableMsalForceRegion"&&(!o.azureRegion&&l?u=l:u=o.azureRegion);let f={azureRegion:u,environmentRegion:process.env[$6e]},p=this.initializeServerTelemetryManager(rE.acquireTokenByClientCredential,o.correlationId,o.skipCache);try{let m=await this.createAuthority(o.authority,o.correlationId,f,e.azureCloudOptions),h=await this.buildOauthClientConfiguration(m,o.correlationId,"",p),g=new Zb(h,this.appTokenProvider);return this.logger.verbose("Client credential client created",o.correlationId),await g.acquireToken(o)}catch(m){throw m instanceof Xn&&m.setCorrelationId(o.correlationId),p.cacheFailedRequest(m),m}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let r={...e,...await this.initializeBaseRequest(e)};try{let n=await this.createAuthority(r.authority,r.correlationId,void 0,e.azureCloudOptions),i=await this.buildOauthClientConfiguration(n,r.correlationId,"",void 0),o=new NP(i);return this.logger.verbose("On behalf of client created",r.correlationId),await o.acquireToken(r)}catch(n){throw n instanceof Xn&&n.setCorrelationId(r.correlationId),n}}};d();d();d();d();d();function jFe(t){if(typeof t!="string")return!1;let e=new Date(t);return!isNaN(e.getTime())&&e.toISOString()===t}s(jFe,"isIso8601");d();var TV=class{static{s(this,"HttpClientWithRetries")}constructor(e,r,n){this.httpClientNoRetries=e,this.retryPolicy=r,this.logger=n}async sendNetworkRequestAsyncHelper(e,r,n){return e===Us.GET?this.httpClientNoRetries.sendGetRequestAsync(r,n):this.httpClientNoRetries.sendPostRequestAsync(r,n)}async sendNetworkRequestAsync(e,r,n){let i=await this.sendNetworkRequestAsyncHelper(e,r,n);"isNewRequest"in this.retryPolicy&&(this.retryPolicy.isNewRequest=!0);let o=0;for(;await this.retryPolicy.pauseForRetry(i.status,o,this.logger,i.headers[vs.RETRY_AFTER]);)i=await this.sendNetworkRequestAsyncHelper(e,r,n),o++;return i}async sendGetRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.GET,e,r)}async sendPostRequestAsync(e,r){return this.sendNetworkRequestAsync(Us.POST,e,r)}};var DS={MANAGED_IDENTITY_CLIENT_ID_2017:"clientid",MANAGED_IDENTITY_CLIENT_ID:"client_id",MANAGED_IDENTITY_OBJECT_ID:"object_id",MANAGED_IDENTITY_RESOURCE_ID_IMDS:"msi_res_id",MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS:"mi_res_id"},Pd=class{static{s(this,"BaseManagedIdentitySource")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async getServerTokenResponseAsync(e,r,n,i){return this.getServerTokenResponse(e)}getServerTokenResponse(e){let r,n;return e.body.expires_on&&(jFe(e.body.expires_on)&&(e.body.expires_on=new Date(e.body.expires_on).getTime()/1e3),n=e.body.expires_on-Qs.nowSeconds(),n>2*3600&&(r=n/2)),{status:e.status,access_token:e.body.access_token,expires_in:n,scope:e.body.resource,token_type:e.body.token_type,refresh_in:r,correlation_id:e.body.correlation_id||e.body.correlationId,error:typeof e.body.error=="string"?e.body.error:e.body.error?.code,error_description:e.body.message||(typeof e.body.error=="string"?e.body.error_description:e.body.error?.message),error_codes:e.body.error_codes,timestamp:e.body.timestamp,trace_id:e.body.trace_id}}async acquireTokenWithManagedIdentity(e,r,n,i){let o=this.createRequest(e.resource,r);if(e.revokedTokenSha256Hash&&(this.logger.info(`[Managed Identity] The following claims are present in the request: ${e.claims}`),o.queryParameters[Rc.SHA256_TOKEN_TO_REFRESH]=e.revokedTokenSha256Hash),e.clientCapabilities?.length){let h=e.clientCapabilities.toString();this.logger.info(`[Managed Identity] The following client capabilities are present in the request: ${h}`),o.queryParameters[Rc.XMS_CC]=h}let a=o.headers;a[vs.CONTENT_TYPE]=Je.URL_FORM_CONTENT_TYPE;let c={headers:a};Object.keys(o.bodyParameters).length&&(c.body=o.computeParametersBodyString());let l=this.disableInternalRetries?this.networkClient:new TV(this.networkClient,o.retryPolicy,this.logger),u=Qs.nowSeconds(),f;try{o.httpMethod===Us.POST?f=await l.sendPostRequestAsync(o.computeUri(),c):f=await l.sendGetRequestAsync(o.computeUri(),c)}catch(h){throw h instanceof Xn?h:mt(ts.networkError)}let p=new nc(r.id,this.nodeStorage,this.cryptoProvider,this.logger,null,null),m=await this.getServerTokenResponseAsync(f,l,o,c);return p.validateTokenResponse(m,i),p.handleServerTokenResponse(m,n,u,e)}getManagedIdentityUserAssignedIdQueryParameterKey(e,r,n){switch(e){case wa.USER_ASSIGNED_CLIENT_ID:return this.logger.info(`[Managed Identity] [API version ${n?"2017+":"2019+"}] Adding user assigned client id to the request.`),n?DS.MANAGED_IDENTITY_CLIENT_ID_2017:DS.MANAGED_IDENTITY_CLIENT_ID;case wa.USER_ASSIGNED_RESOURCE_ID:return this.logger.info("[Managed Identity] Adding user assigned resource id to the request."),r?DS.MANAGED_IDENTITY_RESOURCE_ID_IMDS:DS.MANAGED_IDENTITY_RESOURCE_ID_NON_IMDS;case wa.USER_ASSIGNED_OBJECT_ID:return this.logger.info("[Managed Identity] Adding user assigned object id to the request."),DS.MANAGED_IDENTITY_OBJECT_ID;default:throw ic($b)}}};Pd.getValidatedEnvVariableUrlString=(t,e,r,n)=>{try{return new wi(e).urlString}catch{throw n.info(`[Managed Identity] ${r} managed identity is unavailable because the '${t}' environment variable is malformed.`),ic(kS[t])}};d();d();d();var wV=class{static{s(this,"LinearRetryStrategy")}calculateDelay(e,r){if(!e)return r;let n=Math.round(parseFloat(e)*1e3);return isNaN(n)&&(n=new Date(e).valueOf()-new Date().valueOf()),Math.max(r,n)}};var OPt=3,QPt=1e3,UPt=[Jn.NOT_FOUND,Jn.REQUEST_TIMEOUT,Jn.TOO_MANY_REQUESTS,Jn.SERVER_ERROR,Jn.SERVICE_UNAVAILABLE,Jn.GATEWAY_TIMEOUT],_V=class t{static{s(this,"DefaultManagedIdentityRetryPolicy")}constructor(){this.linearRetryStrategy=new wV}static get DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS(){return QPt}async pauseForRetry(e,r,n,i){if(UPt.includes(e)&&r<OPt){let o=this.linearRetryStrategy.calculateDelay(i,t.DEFAULT_MANAGED_IDENTITY_RETRY_DELAY_MS);return n.verbose(`Retrying request in ${o}ms (retry attempt: ${r+1})`),await new Promise(a=>setTimeout(a,o)),!0}return!1}};var Rf=class{static{s(this,"ManagedIdentityRequestParameters")}constructor(e,r,n){this.httpMethod=e,this._baseEndpoint=r,this.headers={},this.bodyParameters={},this.queryParameters={},this.retryPolicy=n||new _V}computeUri(){let e=new Map;this.queryParameters&&rr.addExtraQueryParameters(e,this.queryParameters);let r=uu.mapToQueryString(e);return wi.appendQueryString(this._baseEndpoint,r)}computeParametersBodyString(){let e=new Map;return this.bodyParameters&&rr.addExtraQueryParameters(e,this.bodyParameters),uu.mapToQueryString(e)}};var qPt="2019-08-01",LL=class t extends Pd{static{s(this,"AppService")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Vn.APP_SERVICE} managed identity is unavailable because one or both of the '${Nn.IDENTITY_HEADER}' and '${Nn.IDENTITY_ENDPOINT}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,a,Vn.APP_SERVICE,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.APP_SERVICE} managed identity. Endpoint URI: ${l}. Creating ${Vn.APP_SERVICE} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.APP_SERVICE_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=qPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var iE=require("fs"),YFe=Ne(require("path"),1);var HPt="2019-11-01",VFe="http://127.0.0.1:40342/metadata/identity/oauth2/token",$Fe="N/A: himds executable exists",zFe={win32:`${process.env.ProgramData}\\AzureConnectedMachineAgent\\Tokens\\`,linux:"/var/opt/azcmagent/tokens/"},WPt={win32:`${process.env.ProgramFiles}\\AzureConnectedMachineAgent\\himds.exe`,linux:"/opt/azcmagent/bin/himds"},ML=class t extends Pd{static{s(this,"AzureArc")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IMDS_ENDPOINT];if(!e||!r){let n=WPt[process.platform];try{(0,iE.accessSync)(n,iE.constants.F_OK|iE.constants.R_OK),e=VFe,r=$Fe}catch{}}return[e,r]}static tryCreate(e,r,n,i,o,a){let[c,l]=t.getEnvironmentVariables();if(!c||!l)return e.info(`[Managed Identity] ${Vn.AZURE_ARC} managed identity is unavailable through environment variables because one or both of '${Nn.IDENTITY_ENDPOINT}' and '${Nn.IMDS_ENDPOINT}' are not defined. ${Vn.AZURE_ARC} managed identity is also unavailable through file detection.`),null;if(l===$Fe)e.info(`[Managed Identity] ${Vn.AZURE_ARC} managed identity is available through file detection. Defaulting to known ${Vn.AZURE_ARC} endpoint: ${VFe}. Creating ${Vn.AZURE_ARC} managed identity.`);else{let u=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,Vn.AZURE_ARC,e);u.endsWith("/")&&u.slice(0,-1),t.getValidatedEnvVariableUrlString(Nn.IMDS_ENDPOINT,l,Vn.AZURE_ARC,e),e.info(`[Managed Identity] Environment variables validation passed for ${Vn.AZURE_ARC} managed identity. Endpoint URI: ${u}. Creating ${Vn.AZURE_ARC} managed identity.`)}if(a.idType!==wa.SYSTEM_ASSIGNED)throw ic(qj);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Rf(Us.GET,this.identityEndpoint.replace("localhost","127.0.0.1"));return r.headers[wf.METADATA_HEADER_NAME]="true",r.queryParameters[Rc.API_VERSION]=HPt,r.queryParameters[Rc.RESOURCE]=e,r}async getServerTokenResponseAsync(e,r,n,i){let o;if(e.status===Jn.UNAUTHORIZED){let a=e.headers["www-authenticate"];if(!a)throw ic(Gj);if(!a.includes("Basic realm="))throw ic(jj);let c=a.split("Basic realm=")[1];if(!zFe.hasOwnProperty(process.platform))throw ic(Uj);let l=zFe[process.platform],u=YFe.default.basename(c);if(!u.endsWith(".key"))throw ic(Fj);if(l+u!==c)throw ic(Oj);let f;try{f=await(0,iE.statSync)(c).size}catch{throw ic(xL)}if(f>J6e)throw ic(Qj);let p;try{p=(0,iE.readFileSync)(c,cu.UTF8)}catch{throw ic(xL)}let m=`Basic ${p}`;this.logger.info("[Managed Identity] Adding authorization header to the request."),n.headers[wf.AUTHORIZATION_HEADER_NAME]=m;try{o=await r.sendGetRequestAsync(n.computeUri(),i)}catch(h){throw h instanceof Xn?h:mt(ts.networkError)}}return this.getServerTokenResponse(o||e)}};d();var FL=class t extends Pd{static{s(this,"CloudShell")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.msiEndpoint=a}static getEnvironmentVariables(){return[process.env[Nn.MSI_ENDPOINT]]}static tryCreate(e,r,n,i,o,a){let[c]=t.getEnvironmentVariables();if(!c)return e.info(`[Managed Identity] ${Vn.CLOUD_SHELL} managed identity is unavailable because the '${Nn.MSI_ENDPOINT} environment variable is not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,c,Vn.CLOUD_SHELL,e);if(e.info(`[Managed Identity] Environment variable validation passed for ${Vn.CLOUD_SHELL} managed identity. Endpoint URI: ${l}. Creating ${Vn.CLOUD_SHELL} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED)throw ic(Hj);return new t(e,r,n,i,o,c)}createRequest(e){let r=new Rf(Us.POST,this.msiEndpoint);return r.headers[wf.METADATA_HEADER_NAME]="true",r.bodyParameters[Rc.RESOURCE]=e,r}};d();d();d();var SV=class{static{s(this,"ExponentialRetryStrategy")}constructor(e,r,n){this.minExponentialBackoff=e,this.maxExponentialBackoff=r,this.exponentialDeltaBackoff=n}calculateDelay(e){return e===0?this.minExponentialBackoff:Math.min(Math.pow(2,e-1)*this.exponentialDeltaBackoff,this.maxExponentialBackoff)}};var GPt=[Jn.NOT_FOUND,Jn.REQUEST_TIMEOUT,Jn.GONE,Jn.TOO_MANY_REQUESTS],jPt=3,VPt=7,$Pt=1e3,zPt=4e3,YPt=2e3,KPt=10*1e3,RV=class t{static{s(this,"ImdsRetryPolicy")}constructor(){this.exponentialRetryStrategy=new SV(t.MIN_EXPONENTIAL_BACKOFF_MS,t.MAX_EXPONENTIAL_BACKOFF_MS,t.EXPONENTIAL_DELTA_BACKOFF_MS)}static get MIN_EXPONENTIAL_BACKOFF_MS(){return $Pt}static get MAX_EXPONENTIAL_BACKOFF_MS(){return zPt}static get EXPONENTIAL_DELTA_BACKOFF_MS(){return YPt}static get HTTP_STATUS_GONE_RETRY_AFTER_MS(){return KPt}set isNewRequest(e){this._isNewRequest=e}async pauseForRetry(e,r,n){if(this._isNewRequest&&(this._isNewRequest=!1,this.maxRetries=e===Jn.GONE?VPt:jPt),(GPt.includes(e)||e>=Jn.SERVER_ERROR_RANGE_START&&e<=Jn.SERVER_ERROR_RANGE_END&&r<this.maxRetries)&&r<this.maxRetries){let i=e===Jn.GONE?t.HTTP_STATUS_GONE_RETRY_AFTER_MS:this.exponentialRetryStrategy.calculateDelay(r);return n.verbose(`Retrying request in ${i}ms (retry attempt: ${r+1})`),await new Promise(o=>setTimeout(o,i)),!0}return!1}};var KFe="/metadata/identity/oauth2/token",JPt=`http://169.254.169.254${KFe}`,XPt="2018-02-01",kV=class t extends Pd{static{s(this,"Imds")}constructor(e,r,n,i,o,a){super(e,r,n,i,o),this.identityEndpoint=a}static tryCreate(e,r,n,i,o){let a;return process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]?(e.info(`[Managed Identity] Environment variable ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} for ${Vn.IMDS} returned endpoint: ${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}`),a=t.getValidatedEnvVariableUrlString(Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST,`${process.env[Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST]}${KFe}`,Vn.IMDS,e)):(e.info(`[Managed Identity] Unable to find ${Nn.AZURE_POD_IDENTITY_AUTHORITY_HOST} environment variable for ${Vn.IMDS}, using the default endpoint.`),a=JPt),new t(e,r,n,i,o,a)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.METADATA_HEADER_NAME]="true",n.queryParameters[Rc.API_VERSION]=XPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!0)]=r.id),n.retryPolicy=new RV,n}};d();var ZPt="2019-07-01-preview",OL=class t extends Pd{static{s(this,"ServiceFabric")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.identityEndpoint=a,this.identityHeader=c}static getEnvironmentVariables(){let e=process.env[Nn.IDENTITY_ENDPOINT],r=process.env[Nn.IDENTITY_HEADER],n=process.env[Nn.IDENTITY_SERVER_THUMBPRINT];return[e,r,n]}static tryCreate(e,r,n,i,o,a){let[c,l,u]=t.getEnvironmentVariables();if(!c||!l||!u)return e.info(`[Managed Identity] ${Vn.SERVICE_FABRIC} managed identity is unavailable because one or all of the '${Nn.IDENTITY_HEADER}', '${Nn.IDENTITY_ENDPOINT}' or '${Nn.IDENTITY_SERVER_THUMBPRINT}' environment variables are not defined.`),null;let f=t.getValidatedEnvVariableUrlString(Nn.IDENTITY_ENDPOINT,c,Vn.SERVICE_FABRIC,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.SERVICE_FABRIC} managed identity. Endpoint URI: ${f}. Creating ${Vn.SERVICE_FABRIC} managed identity.`),a.idType!==wa.SYSTEM_ASSIGNED&&e.warning(`[Managed Identity] ${Vn.SERVICE_FABRIC} user assigned managed identity is configured in the cluster, not during runtime. See also: https://learn.microsoft.com/en-us/azure/service-fabric/configure-existing-cluster-enable-managed-identity-token-service.`),new t(e,r,n,i,o,c,l)}createRequest(e,r){let n=new Rf(Us.GET,this.identityEndpoint);return n.headers[wf.ML_AND_SF_SECRET_HEADER_NAME]=this.identityHeader,n.queryParameters[Rc.API_VERSION]=ZPt,n.queryParameters[Rc.RESOURCE]=e,r.idType!==wa.SYSTEM_ASSIGNED&&(n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType)]=r.id),n}};d();var e3t="2017-09-01",t3t=`Only client id is supported for user-assigned managed identity in ${Vn.MACHINE_LEARNING}.`,QL=class t extends Pd{static{s(this,"MachineLearning")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o),this.msiEndpoint=a,this.secret=c}static getEnvironmentVariables(){let e=process.env[Nn.MSI_ENDPOINT],r=process.env[Nn.MSI_SECRET];return[e,r]}static tryCreate(e,r,n,i,o){let[a,c]=t.getEnvironmentVariables();if(!a||!c)return e.info(`[Managed Identity] ${Vn.MACHINE_LEARNING} managed identity is unavailable because one or both of the '${Nn.MSI_ENDPOINT}' and '${Nn.MSI_SECRET}' environment variables are not defined.`),null;let l=t.getValidatedEnvVariableUrlString(Nn.MSI_ENDPOINT,a,Vn.MACHINE_LEARNING,e);return e.info(`[Managed Identity] Environment variables validation passed for ${Vn.MACHINE_LEARNING} managed identity. Endpoint URI: ${l}. Creating ${Vn.MACHINE_LEARNING} managed identity.`),new t(e,r,n,i,o,a,c)}createRequest(e,r){let n=new Rf(Us.GET,this.msiEndpoint);if(n.headers[wf.METADATA_HEADER_NAME]="true",n.headers[wf.ML_AND_SF_SECRET_HEADER_NAME]=this.secret,n.queryParameters[Rc.API_VERSION]=e3t,n.queryParameters[Rc.RESOURCE]=e,r.idType===wa.SYSTEM_ASSIGNED)n.queryParameters[DS.MANAGED_IDENTITY_CLIENT_ID_2017]=process.env[Nn.DEFAULT_IDENTITY_CLIENT_ID];else if(r.idType===wa.USER_ASSIGNED_CLIENT_ID)n.queryParameters[this.getManagedIdentityUserAssignedIdQueryParameterKey(r.idType,!1,!0)]=r.id;else throw new Error(t3t);return n}};var UL=class t{static{s(this,"ManagedIdentityClient")}constructor(e,r,n,i,o){this.logger=e,this.nodeStorage=r,this.networkClient=n,this.cryptoProvider=i,this.disableInternalRetries=o}async sendManagedIdentityTokenRequest(e,r,n,i){return t.identitySource||(t.identitySource=this.selectManagedIdentitySource(this.logger,this.nodeStorage,this.networkClient,this.cryptoProvider,this.disableInternalRetries,r)),t.identitySource.acquireTokenWithManagedIdentity(e,r,n,i)}allEnvironmentVariablesAreDefined(e){return Object.values(e).every(r=>r!==void 0)}getManagedIdentitySource(){return t.sourceName=this.allEnvironmentVariablesAreDefined(OL.getEnvironmentVariables())?Vn.SERVICE_FABRIC:this.allEnvironmentVariablesAreDefined(LL.getEnvironmentVariables())?Vn.APP_SERVICE:this.allEnvironmentVariablesAreDefined(QL.getEnvironmentVariables())?Vn.MACHINE_LEARNING:this.allEnvironmentVariablesAreDefined(FL.getEnvironmentVariables())?Vn.CLOUD_SHELL:this.allEnvironmentVariablesAreDefined(ML.getEnvironmentVariables())?Vn.AZURE_ARC:Vn.DEFAULT_TO_IMDS,t.sourceName}selectManagedIdentitySource(e,r,n,i,o,a){let c=OL.tryCreate(e,r,n,i,o,a)||LL.tryCreate(e,r,n,i,o)||QL.tryCreate(e,r,n,i,o)||FL.tryCreate(e,r,n,i,o,a)||ML.tryCreate(e,r,n,i,o,a)||kV.tryCreate(e,r,n,i,o);if(!c)throw ic(Wj);return c}};var r3t=[Vn.SERVICE_FABRIC],MP=class t{static{s(this,"ManagedIdentityApplication")}constructor(e){this.config=o9e(e||{}),this.logger=new N0(this.config.system.loggerOptions,bV,ag);let r={canonicalAuthority:Je.DEFAULT_AUTHORITY};t.nodeStorage||(t.nodeStorage=new Yb(this.logger,this.config.managedIdentityId.id,uP,r)),this.networkClient=this.config.system.networkClient,this.cryptoProvider=new by;let n={protocolMode:ju.AAD,knownAuthorities:[w0e],cloudDiscoveryMetadata:"",authorityMetadata:""};this.fakeAuthority=new og(w0e,this.networkClient,t.nodeStorage,n,this.logger,this.cryptoProvider.createNewGuid(),void 0,!0),this.fakeClientCredentialClient=new Zb({authOptions:{clientId:this.config.managedIdentityId.id,authority:this.fakeAuthority}}),this.managedIdentityClient=new UL(this.logger,t.nodeStorage,this.networkClient,this.cryptoProvider,this.config.disableInternalRetries),this.hashUtils=new zb}async acquireToken(e){if(!e.resource)throw rs(mP.urlEmptyError);let r={forceRefresh:e.forceRefresh,resource:e.resource.replace("/.default",""),scopes:[e.resource.replace("/.default","")],authority:this.fakeAuthority.canonicalAuthority,correlationId:this.cryptoProvider.createNewGuid(),claims:e.claims,clientCapabilities:this.config.clientCapabilities};if(r.forceRefresh)return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority);let[n,i]=await this.fakeClientCredentialClient.getCachedAuthenticationResult(r,this.config,this.cryptoProvider,this.fakeAuthority,t.nodeStorage);if(r.claims){let o=this.managedIdentityClient.getManagedIdentitySource();if(n&&r3t.includes(o)){let a=this.hashUtils.sha256(n.accessToken).toString(cu.HEX);r.revokedTokenSha256Hash=a}return this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}return n?(i===us.PROACTIVELY_REFRESHED&&(this.logger.info("ClientCredentialClient:getCachedAuthenticationResult - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),await this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority,!0)),n):this.acquireTokenFromManagedIdentity(r,this.config.managedIdentityId,this.fakeAuthority)}async acquireTokenFromManagedIdentity(e,r,n,i){return this.managedIdentityClient.sendManagedIdentityTokenRequest(e,r,n,i)}getManagedIdentitySource(){return UL.sourceName||this.managedIdentityClient.getManagedIdentitySource()}};d();var PV=class{static{s(this,"DistributedCachePlugin")}constructor(e,r){this.client=e,this.partitionManager=r}async beforeCacheAccess(e){let r=await this.partitionManager.getKey(),n=await this.client.get(r);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let r=e.tokenCache.getKVStore(),n=Object.values(r).filter(o=>lu.isAccountEntity(o)),i;if(n.length>0){let o=n[0];i=await this.partitionManager.extractKey(o)}else i=await this.partitionManager.getKey();await this.client.set(i,e.tokenCache.serialize())}}};d();d();var qL=oi("IdentityUtils"),n3t="1.0";function FP(t,e,r){let n=s(i=>(qL.getToken.info(i),new tg({scopes:Array.isArray(t)?t:[t],getTokenOptions:r,message:i})),"error");if(!e)throw n("No response");if(!e.expiresOn)throw n('Response had no "expiresOn" property.');if(!e.accessToken)throw n('Response had no "accessToken" property.')}s(FP,"ensureValidMsalToken");function Cpe(t){let e=t?.authorityHost;return!e&&nP&&(e=process.env.AZURE_AUTHORITY_HOST),e??o9}s(Cpe,"getAuthorityHost");function Epe(t,e){return e||(e=o9),new RegExp(`${t}/?$`).test(e)?e:e.endsWith("/")?e+t:`${e}/${t}`}s(Epe,"getAuthority");function JFe(t,e,r){return t==="adfs"&&e||r?[e]:[]}s(JFe,"getKnownAuthorities");var BV=s((t,e=JG?"Node":"Browser")=>(r,n,i)=>{if(!i)switch(r){case Q0.LogLevel.Error:t.info(`MSAL ${e} V2 error: ${n}`);return;case Q0.LogLevel.Info:t.info(`MSAL ${e} V2 info message: ${n}`);return;case Q0.LogLevel.Verbose:t.info(`MSAL ${e} V2 verbose message: ${n}`);return;case Q0.LogLevel.Warning:t.info(`MSAL ${e} V2 warning: ${n}`);return}},"defaultLoggerCallback");function DV(t){switch(t){case"error":return Q0.LogLevel.Error;case"info":return Q0.LogLevel.Info;case"verbose":return Q0.LogLevel.Verbose;case"warning":return Q0.LogLevel.Warning;default:return Q0.LogLevel.Info}}s(DV,"getMSALLogLevel");function NS(t,e,r){if(e.name==="AuthError"||e.name==="ClientAuthError"||e.name==="BrowserAuthError"){let n=e;switch(n.errorCode){case"endpoints_resolution_error":return qL.info(ko(t,e.message)),new $r(e.message);case"device_code_polling_cancelled":return new W_("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":qL.info(ko(t,`Authentication returned errorCode ${n.errorCode}`));break;default:qL.info(ko(t,`Failed to acquire token: ${e.message}`));break}}return e.name==="ClientConfigurationError"||e.name==="BrowserConfigurationAuthError"||e.name==="AbortError"||e.name==="AuthenticationError"?e:e.name==="NativeAuthError"?(qL.info(ko(t,`Error from the native broker: ${e.message} with status code: ${e.statusCode}`)),e):new tg({scopes:t,getTokenOptions:r,message:e.message})}s(NS,"handleMsalError");function XFe(t){return{localAccountId:t.homeAccountId,environment:t.authority,username:t.username,homeAccountId:t.homeAccountId,tenantId:t.tenantId}}s(XFe,"publicToMsal");function ZFe(t,e){var r;return{authority:(r=e.environment)!==null&&r!==void 0?r:sNe,homeAccountId:e.homeAccountId,tenantId:e.tenantId||oNe,username:e.username,clientId:t,version:n3t}}s(ZFe,"msalToPublic");d();var i3t=1e3*64;function eOe(t){return rfe([{name:"imdsRetryPolicy",retry:s(({retryCount:e,response:r})=>r?.status!==404?{skipStrategy:!0}:K8e(e,{retryDelayInMs:t.startDelayInMs,maxRetryDelayInMs:i3t}),"retry")}],{maxRetries:t.maxRetries})}s(eOe,"imdsRetryPolicy");d();var oE="ManagedIdentityCredential - IMDS",LS=oi(oE),o3t="http://169.254.169.254",s3t="/metadata/identity/oauth2/token";function a3t(t){var e;if(!y9(t))throw new Error(`${oE}: Multiple scopes are not supported.`);let n=new URL(s3t,(e=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&e!==void 0?e:o3t),i={Accept:"application/json"};return{url:`${n}`,method:"GET",headers:kb(i)}}s(a3t,"prepareInvalidRequestOptions");var tOe={name:"imdsMsi",async isAvailable(t){let{scopes:e,identityClient:r,getTokenOptions:n}=t,i=y9(e);if(!i)return LS.info(`${oE}: Unavailable. Multiple scopes are not supported.`),!1;if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;if(!r)throw new Error("Missing IdentityClient");let o=a3t(i);return es.withSpan("ManagedIdentityCredential-pingImdsEndpoint",n??{},async a=>{var c,l;o.tracingOptions=a.tracingOptions;let u=ng(o);u.timeout=((c=a.requestOptions)===null||c===void 0?void 0:c.timeout)||1e3,u.allowInsecureConnection=!0;let f;try{LS.info(`${oE}: Pinging the Azure IMDS endpoint`),f=await r.sendRequest(u)}catch(p){return KG(p)&&LS.verbose(`${oE}: Caught error ${p.name}: ${p.message}`),LS.info(`${oE}: The Azure IMDS endpoint is unavailable`),!1}return f.status===403&&!((l=f.bodyAsText)===null||l===void 0)&&l.includes("unreachable")?(LS.info(`${oE}: The Azure IMDS endpoint is unavailable`),LS.info(`${oE}: ${f.bodyAsText}`),!1):(LS.info(`${oE}: The Azure IMDS endpoint is available`),!0)})}};d();d();d();d();d();var vpe;(function(t){t.AutoDiscoverRegion="AutoDiscoverRegion",t.USWest="westus",t.USWest2="westus2",t.USCentral="centralus",t.USEast="eastus",t.USEast2="eastus2",t.USNorthCentral="northcentralus",t.USSouthCentral="southcentralus",t.USWestCentral="westcentralus",t.CanadaCentral="canadacentral",t.CanadaEast="canadaeast",t.BrazilSouth="brazilsouth",t.EuropeNorth="northeurope",t.EuropeWest="westeurope",t.UKSouth="uksouth",t.UKWest="ukwest",t.FranceCentral="francecentral",t.FranceSouth="francesouth",t.SwitzerlandNorth="switzerlandnorth",t.SwitzerlandWest="switzerlandwest",t.GermanyNorth="germanynorth",t.GermanyWestCentral="germanywestcentral",t.NorwayWest="norwaywest",t.NorwayEast="norwayeast",t.AsiaEast="eastasia",t.AsiaSouthEast="southeastasia",t.JapanEast="japaneast",t.JapanWest="japanwest",t.AustraliaEast="australiaeast",t.AustraliaSouthEast="australiasoutheast",t.AustraliaCentral="australiacentral",t.AustraliaCentral2="australiacentral2",t.IndiaCentral="centralindia",t.IndiaSouth="southindia",t.IndiaWest="westindia",t.KoreaSouth="koreasouth",t.KoreaCentral="koreacentral",t.UAECentral="uaecentral",t.UAENorth="uaenorth",t.SouthAfricaNorth="southafricanorth",t.SouthAfricaWest="southafricawest",t.ChinaNorth="chinanorth",t.ChinaEast="chinaeast",t.ChinaNorth2="chinanorth2",t.ChinaEast2="chinaeast2",t.GermanyCentral="germanycentral",t.GermanyNorthEast="germanynortheast",t.GovernmentUSVirginia="usgovvirginia",t.GovernmentUSIowa="usgoviowa",t.GovernmentUSArizona="usgovarizona",t.GovernmentUSTexas="usgovtexas",t.GovernmentUSDodEast="usdodeast",t.GovernmentUSDodCentral="usdodcentral"})(vpe||(vpe={}));function NV(t){var e,r;let n=t;return n===void 0&&((r=(e=globalThis.process)===null||e===void 0?void 0:e.env)===null||r===void 0?void 0:r.AZURE_REGIONAL_AUTHORITY_NAME)!==void 0&&(n=process.env.AZURE_REGIONAL_AUTHORITY_NAME),n===vpe.AutoDiscoverRegion?"AUTO_DISCOVER":n}s(NV,"calculateRegionalAuthority");var kf=oi("MsalClient");function x3t(t,e,r={}){var n,i,o;let a=AG((n=r.logger)!==null&&n!==void 0?n:kf,e,t),c=Epe(a,Cpe(r)),l=new W1(Object.assign(Object.assign({},r.tokenCredentialOptions),{authorityHost:c,loggingOptions:r.loggingOptions}));return{auth:{clientId:t,authority:c,knownAuthorities:JFe(a,c,r.disableInstanceDiscovery)},system:{networkClient:l,loggerOptions:{loggerCallback:BV((i=r.logger)!==null&&i!==void 0?i:kf),logLevel:DV(mG()),piiLoggingEnabled:(o=r.loggingOptions)===null||o===void 0?void 0:o.enableUnsafeSupportLogging}}}}s(x3t,"generateMsalConfiguration");function um(t,e,r={}){var n;let i={msalConfig:x3t(t,e,r),cachedAccount:r.authenticationRecord?XFe(r.authenticationRecord):null,pluginConfiguration:fNe.generatePluginConfiguration(r),logger:(n=r.logger)!==null&&n!==void 0?n:kf},o=new Map;async function a(P={}){let N=P.enableCae?"CAE":"default",M=o.get(N);if(M)return i.logger.getToken.info("Existing PublicClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new PublicClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new DP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),o.set(N,M),M}s(a,"getPublicApp");let c=new Map;async function l(P={}){let N=P.enableCae?"CAE":"default",M=c.get(N);if(M)return i.logger.getToken.info("Existing ConfidentialClientApplication found in cache, returning it."),M;i.logger.getToken.info(`Creating new ConfidentialClientApplication with CAE ${P.enableCae?"enabled":"disabled"}.`);let J=P.enableCae?i.pluginConfiguration.cache.cachePluginCae:i.pluginConfiguration.cache.cachePlugin;return i.msalConfig.auth.clientCapabilities=P.enableCae?["cp1"]:void 0,M=new LP(Object.assign(Object.assign({},i.msalConfig),{broker:{nativeBrokerPlugin:i.pluginConfiguration.broker.nativeBrokerPlugin},cache:{cachePlugin:await J}})),c.set(N,M),M}s(l,"getConfidentialApp");async function u(P,N,M={}){if(i.cachedAccount===null)throw i.logger.getToken.info("No cached account found in local state."),new tg({scopes:N});M.claims&&(i.cachedClaims=M.claims);let J={account:i.cachedAccount,scopes:N,claims:i.cachedClaims};i.pluginConfiguration.broker.isEnabled&&(J.tokenQueryParameters||(J.tokenQueryParameters={}),i.pluginConfiguration.broker.enableMsaPassthrough&&(J.tokenQueryParameters.msal_request_type="consumer_passthrough")),M.proofOfPossessionOptions&&(J.shrNonce=M.proofOfPossessionOptions.nonce,J.authenticationScheme="pop",J.resourceRequestMethod=M.proofOfPossessionOptions.resourceRequestMethod,J.resourceRequestUri=M.proofOfPossessionOptions.resourceRequestUrl),i.logger.getToken.info("Attempting to acquire token silently");try{return await P.acquireTokenSilent(J)}catch(pe){throw NS(N,pe,M)}}s(u,"getTokenSilent");function f(P){return P?.tenantId?Epe(P.tenantId,Cpe(r)):i.msalConfig.auth.authority}s(f,"calculateRequestAuthority");async function p(P,N,M,J){var pe,Y;let G=null;try{G=await u(P,N,M)}catch(H){if(H.name!=="AuthenticationRequiredError")throw H;if(M.disableAutomaticAuthentication)throw new tg({scopes:N,getTokenOptions:M,message:"Automatic authentication has been disabled. You may call the authentication() method."})}if(G===null)try{G=await J()}catch(H){throw NS(N,H,M)}return FP(N,G,M),i.cachedAccount=(pe=G?.account)!==null&&pe!==void 0?pe:null,i.logger.getToken.info(Xc(N)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(Y=G.refreshOn)===null||Y===void 0?void 0:Y.getTime(),tokenType:G.tokenType}}s(p,"withSilentAuthentication");async function m(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client secret"),i.msalConfig.auth.clientSecret=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:NV(),claims:M?.claims});return FP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw NS(P,Y,M)}}s(m,"getTokenByClientSecret");async function h(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client assertion"),i.msalConfig.auth.clientAssertion=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:NV(),claims:M?.claims,clientAssertion:N});return FP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw NS(P,Y,M)}}s(h,"getTokenByClientAssertion");async function g(P,N,M={}){var J;i.logger.getToken.info("Attempting to acquire token using client certificate"),i.msalConfig.auth.clientCertificate=N;let pe=await l(M);try{let Y=await pe.acquireTokenByClientCredential({scopes:P,authority:f(M),azureRegion:NV(),claims:M?.claims});return FP(P,Y,M),i.logger.getToken.info(Xc(P)),{token:Y.accessToken,expiresOnTimestamp:Y.expiresOn.getTime(),refreshAfterTimestamp:(J=Y.refreshOn)===null||J===void 0?void 0:J.getTime(),tokenType:Y.tokenType}}catch(Y){throw NS(P,Y,M)}}s(g,"getTokenByClientCertificate");async function y(P,N,M={}){i.logger.getToken.info("Attempting to acquire token using device code");let J=await a(M);return p(J,P,M,()=>{var pe,Y;let G={scopes:P,cancel:(Y=(pe=M?.abortSignal)===null||pe===void 0?void 0:pe.aborted)!==null&&Y!==void 0?Y:!1,deviceCodeCallback:N,authority:f(M),claims:M?.claims},H=J.acquireTokenByDeviceCode(G);return M.abortSignal&&M.abortSignal.addEventListener("abort",()=>{G.cancel=!0}),H})}s(y,"getTokenByDeviceCode");async function E(P,N,M,J={}){i.logger.getToken.info("Attempting to acquire token using username and password");let pe=await a(J);return p(pe,P,J,()=>{let Y={scopes:P,username:N,password:M,authority:f(J),claims:J?.claims};return pe.acquireTokenByUsernamePassword(Y)})}s(E,"getTokenByUsernamePassword");function x(){if(i.cachedAccount)return ZFe(t,i.cachedAccount)}s(x,"getActiveAccount");async function b(P,N,M,J,pe={}){i.logger.getToken.info("Attempting to acquire token using authorization code");let Y;return J?(i.msalConfig.auth.clientSecret=J,Y=await l(pe)):Y=await a(pe),p(Y,P,pe,()=>Y.acquireTokenByCode({scopes:P,redirectUri:N,code:M,authority:f(pe),claims:pe?.claims}))}s(b,"getTokenByAuthorizationCode");async function _(P,N,M,J={}){var pe;kf.getToken.info("Attempting to acquire token on behalf of another user"),typeof M=="string"?(kf.getToken.info("Using client secret for on behalf of flow"),i.msalConfig.auth.clientSecret=M):typeof M=="function"?(kf.getToken.info("Using client assertion callback for on behalf of flow"),i.msalConfig.auth.clientAssertion=M):(kf.getToken.info("Using client certificate for on behalf of flow"),i.msalConfig.auth.clientCertificate=M);let Y=await l(J);try{let G=await Y.acquireTokenOnBehalfOf({scopes:P,authority:f(J),claims:J.claims,oboAssertion:N});return FP(P,G,J),kf.getToken.info(Xc(P)),{token:G.accessToken,expiresOnTimestamp:G.expiresOn.getTime(),refreshAfterTimestamp:(pe=G.refreshOn)===null||pe===void 0?void 0:pe.getTime(),tokenType:G.tokenType}}catch(G){throw NS(P,G,J)}}s(_,"getTokenOnBehalfOf");async function k(P,N={}){kf.getToken.info("Attempting to acquire token interactively");let M=await a(N);async function J(Y){var G;kf.verbose("Authentication will resume through the broker");let H=pe();i.pluginConfiguration.broker.parentWindowHandle?H.windowHandle=Buffer.from(i.pluginConfiguration.broker.parentWindowHandle):kf.warning("Parent window handle is not specified for the broker. This may cause unexpected behavior. Please provide the parentWindowHandle."),i.pluginConfiguration.broker.enableMsaPassthrough&&(((G=H.tokenQueryParameters)!==null&&G!==void 0?G:H.tokenQueryParameters={}).msal_request_type="consumer_passthrough"),Y?(H.prompt="none",kf.verbose("Attempting broker authentication using the default broker account")):kf.verbose("Attempting broker authentication without the default broker account"),N.proofOfPossessionOptions&&(H.shrNonce=N.proofOfPossessionOptions.nonce,H.authenticationScheme="pop",H.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,H.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl);try{return await M.acquireTokenInteractive(H)}catch(ce){if(kf.verbose(`Failed to authenticate through the broker: ${ce.message}`),Y)return J(!1);throw ce}}s(J,"getBrokeredToken");function pe(){var Y,G;return{openBrowser:s(async H=>{await(await Promise.resolve().then(()=>(FV(),POe))).default(H,{wait:!0,newInstance:!0})},"openBrowser"),scopes:P,authority:f(N),claims:N?.claims,loginHint:N?.loginHint,errorTemplate:(Y=N?.browserCustomizationOptions)===null||Y===void 0?void 0:Y.errorMessage,successTemplate:(G=N?.browserCustomizationOptions)===null||G===void 0?void 0:G.successMessage,prompt:N?.loginHint?"login":"select_account"}}return s(pe,"createBaseInteractiveRequest"),p(M,P,N,async()=>{var Y;let G=pe();return i.pluginConfiguration.broker.isEnabled?J((Y=i.pluginConfiguration.broker.useDefaultBrokerAccount)!==null&&Y!==void 0?Y:!1):(N.proofOfPossessionOptions&&(G.shrNonce=N.proofOfPossessionOptions.nonce,G.authenticationScheme="pop",G.resourceRequestMethod=N.proofOfPossessionOptions.resourceRequestMethod,G.resourceRequestUri=N.proofOfPossessionOptions.resourceRequestUrl),M.acquireTokenInteractive(G))})}return s(k,"getTokenByInteractiveRequest"),{getActiveAccount:x,getTokenByClientSecret:m,getTokenByClientAssertion:h,getTokenByClientCertificate:g,getTokenByDeviceCode:y,getTokenByUsernamePassword:E,getTokenByAuthorizationCode:b,getTokenOnBehalfOf:_,getTokenByInteractiveRequest:k}}s(um,"createMsalClient");var BOe=oi("ClientAssertionCredential"),qP=class{static{s(this,"ClientAssertionCredential")}constructor(e,r,n,i={}){if(!e)throw new $r("ClientAssertionCredential: tenantId is a required parameter.");if(!r)throw new $r("ClientAssertionCredential: clientId is a required parameter.");if(!n)throw new $r("ClientAssertionCredential: clientAssertion is a required parameter.");this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.options=i,this.getAssertion=n,this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:BOe,tokenCredentialOptions:this.options}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,BOe);let i=Array.isArray(e)?e:[e];return this.msalClient.getTokenByClientAssertion(i,this.getAssertion,n)})}};var DOe=require("node:fs/promises");var US="WorkloadIdentityCredential",b3t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_FEDERATED_TOKEN_FILE"],jL=oi(US),sE=class{static{s(this,"WorkloadIdentityCredential")}constructor(e){this.azureFederatedTokenFileContent=void 0,this.cacheDate=void 0;let r=hG(b3t).assigned.join(", ");jL.info(`Found the following environment variables: ${r}`);let n=e??{},i=n.tenantId||process.env.AZURE_TENANT_ID,o=n.clientId||process.env.AZURE_CLIENT_ID;if(this.federatedTokenFilePath=n.tokenFilePath||process.env.AZURE_FEDERATED_TOKEN_FILE,i&&ou(jL,i),!o)throw new $r(`${US}: is unavailable. clientId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_CLIENT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!i)throw new $r(`${US}: is unavailable. tenantId is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_TENANT_ID".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);if(!this.federatedTokenFilePath)throw new $r(`${US}: is unavailable. federatedTokenFilePath is a required parameter. In DefaultAzureCredential and ManagedIdentityCredential, this can be provided as an environment variable - "AZURE_FEDERATED_TOKEN_FILE".
        See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`);jL.info(`Invoking ClientAssertionCredential with tenant ID: ${i}, clientId: ${n.clientId} and federated token path: [REDACTED]`),this.client=new qP(i,o,this.readFileContents.bind(this),e)}async getToken(e,r){if(!this.client){let n=`${US}: is unavailable. tenantId, clientId, and federatedTokenFilePath are required parameters. 
      In DefaultAzureCredential and ManagedIdentityCredential, these can be provided as environment variables - 
      "AZURE_TENANT_ID",
      "AZURE_CLIENT_ID",
      "AZURE_FEDERATED_TOKEN_FILE". See the troubleshooting guide for more information: https://aka.ms/azsdk/js/identity/workloadidentitycredential/troubleshoot`;throw jL.info(n),new $r(n)}return jL.info("Invoking getToken() of Client Assertion Credential"),this.client.getToken(e,r)}async readFileContents(){if(this.cacheDate!==void 0&&Date.now()-this.cacheDate>=1e3*60*5&&(this.azureFederatedTokenFileContent=void 0),!this.federatedTokenFilePath)throw new $r(`${US}: is unavailable. Invalid file path provided ${this.federatedTokenFilePath}.`);if(!this.azureFederatedTokenFileContent){let r=(await(0,DOe.readFile)(this.federatedTokenFilePath,"utf8")).trim();if(r)this.azureFederatedTokenFileContent=r,this.cacheDate=Date.now();else throw new $r(`${US}: is unavailable. No content on the file ${this.federatedTokenFilePath}.`)}return this.azureFederatedTokenFileContent}};var NOe="ManagedIdentityCredential - Token Exchange",I3t=oi(NOe),Ope={name:"tokenExchangeMsi",async isAvailable(t){let e=process.env,r=!!((t||e.AZURE_CLIENT_ID)&&e.AZURE_TENANT_ID&&process.env.AZURE_FEDERATED_TOKEN_FILE);return r||I3t.info(`${NOe}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),r},async getToken(t,e={}){let{scopes:r,clientId:n}=t,i={};return new sE(Object.assign(Object.assign({clientId:n,tenantId:process.env.AZURE_TENANT_ID,tokenFilePath:process.env.AZURE_FEDERATED_TOKEN_FILE},i),{disableInstanceDiscovery:!0})).getToken(r,e)}};var U0=oi("ManagedIdentityCredential"),eI=class{static{s(this,"ManagedIdentityCredential")}constructor(e,r){var n,i;this.msiRetryConfig={maxRetries:5,startDelayInMs:800,intervalIncrement:2};let o;typeof e=="string"?(this.clientId=e,o=r??{}):(this.clientId=e?.clientId,o=e??{}),this.resourceId=o?.resourceId,this.objectId=o?.objectId;let a=[{key:"clientId",value:this.clientId},{key:"resourceId",value:this.resourceId},{key:"objectId",value:this.objectId}].filter(l=>l.value);if(a.length>1)throw new Error(`ManagedIdentityCredential: only one of 'clientId', 'resourceId', or 'objectId' can be provided. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}`);o.allowInsecureConnection=!0,((n=o.retryOptions)===null||n===void 0?void 0:n.maxRetries)!==void 0&&(this.msiRetryConfig.maxRetries=o.retryOptions.maxRetries),this.identityClient=new W1(Object.assign(Object.assign({},o),{additionalPolicies:[{policy:eOe(this.msiRetryConfig),position:"perCall"}]})),this.managedIdentityApp=new MP({managedIdentityIdParams:{userAssignedClientId:this.clientId,userAssignedResourceId:this.resourceId,userAssignedObjectId:this.objectId},system:{disableInternalRetries:!0,networkClient:this.identityClient,loggerOptions:{logLevel:DV(mG()),piiLoggingEnabled:(i=o.loggingOptions)===null||i===void 0?void 0:i.enableUnsafeSupportLogging,loggerCallback:BV(U0)}}}),this.isAvailableIdentityClient=new W1(Object.assign(Object.assign({},o),{retryOptions:{maxRetries:0}}));let c=this.managedIdentityApp.getManagedIdentitySource();if(c==="CloudShell"&&(this.clientId||this.resourceId||this.objectId))throw U0.warning(`CloudShell MSI detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r("ManagedIdentityCredential: Specifying a user-assigned managed identity is not supported for CloudShell at runtime. When using Managed Identity in CloudShell, omit the clientId, resourceId, and objectId parameters.");if(c==="ServiceFabric"&&(this.clientId||this.resourceId||this.objectId))throw U0.warning(`Service Fabric detected with user-provided IDs - throwing. Received values: ${JSON.stringify({clientId:this.clientId,resourceId:this.resourceId,objectId:this.objectId})}.`),new $r(`ManagedIdentityCredential: ${v6e}`);if(U0.info(`Using ${c} managed identity.`),a.length===1){let{key:l,value:u}=a[0];U0.info(`${c} with ${l}: ${u}`)}}async getToken(e,r={}){U0.getToken.info("Using the MSAL provider for Managed Identity.");let n=y9(e);if(!n)throw new $r(`ManagedIdentityCredential: Multiple scopes are not supported. Scopes: ${JSON.stringify(e)}`);return es.withSpan("ManagedIdentityCredential.getToken",r,async()=>{var i;try{let o=await Ope.isAvailable(this.clientId),a=this.managedIdentityApp.getManagedIdentitySource(),c=a==="DefaultToImds"||a==="Imds";if(U0.getToken.info(`MSAL Identity source: ${a}`),o){U0.getToken.info("Using the token exchange managed identity.");let u=await Ope.getToken({scopes:e,clientId:this.clientId,identityClient:this.identityClient,retryConfig:this.msiRetryConfig,resourceId:this.resourceId});if(u===null)throw new $r("Attempted to use the token exchange managed identity, but received a null response.");return u}else if(c&&(U0.getToken.info("Using the IMDS endpoint to probe for availability."),!await tOe.isAvailable({scopes:e,clientId:this.clientId,getTokenOptions:r,identityClient:this.isAvailableIdentityClient,resourceId:this.resourceId})))throw new $r("Attempted to use the IMDS endpoint, but it is not available.");U0.getToken.info("Calling into MSAL for managed identity token.");let l=await this.managedIdentityApp.acquireToken({resource:n});return this.ensureValidMsalToken(e,l,r),U0.getToken.info(Xc(e)),{expiresOnTimestamp:l.expiresOn.getTime(),token:l.accessToken,refreshAfterTimestamp:(i=l.refreshOn)===null||i===void 0?void 0:i.getTime(),tokenType:"Bearer"}}catch(o){throw U0.getToken.error(ko(e,o)),o.name==="AuthenticationRequiredError"?o:T3t(o)?new $r(`ManagedIdentityCredential: Network unreachable. Message: ${o.message}`,{cause:o}):new $r(`ManagedIdentityCredential: Authentication failed. Message ${o.message}`,{cause:o})}})}ensureValidMsalToken(e,r,n){let i=s(o=>(U0.getToken.info(o),new tg({scopes:Array.isArray(e)?e:[e],getTokenOptions:n,message:o})),"createError");if(!r)throw i("No response.");if(!r.expiresOn)throw i('Response had no "expiresOn" property.');if(!r.accessToken)throw i('Response had no "accessToken" property.')}};function T3t(t){return!!(t.errorCode==="network_error"||t.code==="ENETUNREACH"||t.code==="EHOSTUNREACH"||(t.statusCode===403||t.code===403)&&t.message.includes("unreachable"))}s(T3t,"isNetworkError");d();d();function tI(t){return Array.isArray(t)?t:[t]}s(tI,"ensureScopes");function HP(t,e){if(!t.match(/^[0-9a-zA-Z-_.:/]+$/)){let r=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(ko(t,r)),r}}s(HP,"ensureValidScopeForDevTimeCreds");function OV(t){return t.replace(/\/.default$/,"")}s(OV,"getScopeResource");var LOe=Ne(require("child_process"),1);d();function Qpe(t,e){if(!e.match(/^[0-9a-zA-Z-._ ]+$/)){let r=new Error(`Subscription '${e}' contains invalid characters. If this is the name of a subscription, use its ID instead. You can locate your subscription by following the instructions listed here: https://learn.microsoft.com/azure/azure-portal/get-subscription-tenant-id`);throw t.info(ko("",r)),r}}s(Qpe,"checkSubscription");var dm=oi("AzureCliCredential"),MOe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(dm.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzureCliAccessToken(t,e,r,n){let i=[],o=[];return e&&(i=["--tenant",e]),r&&(o=["--subscription",`"${r}"`]),new Promise((a,c)=>{try{LOe.default.execFile("az",["account","get-access-token","--output","json","--resource",t,...i,...o],{cwd:MOe.getSafeWorkingDir(),shell:!0,timeout:n},(l,u,f)=>{a({stdout:u,stderr:f,error:l})})}catch(l){c(l)}})}},VL=class{static{s(this,"AzureCliCredential")}constructor(e){e?.tenantId&&(ou(dm,e?.tenantId),this.tenantId=e?.tenantId),e?.subscription&&(Qpe(dm,e?.subscription),this.subscription=e?.subscription),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(dm,n),this.subscription&&Qpe(dm,this.subscription);let i=typeof e=="string"?e:e[0];return dm.getToken.info(`Using the scope ${i}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{HP(i,dm);let u=OV(i),f=await MOe.getAzureCliAccessToken(u,n,this.subscription,this.timeout),p=(o=f.stderr)===null||o===void 0?void 0:o.match("(.*)az login --scope(.*)"),m=((a=f.stderr)===null||a===void 0?void 0:a.match("(.*)az login(.*)"))&&!p;if(((c=f.stderr)===null||c===void 0?void 0:c.match("az:(.*)not found"))||((l=f.stderr)===null||l===void 0?void 0:l.startsWith("'az' is not recognized"))){let g=new $r("Azure CLI could not be found. Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw dm.getToken.info(ko(e,g)),g}if(m){let g=new $r("Please run 'az login' from a command prompt to authenticate before using this credential.");throw dm.getToken.info(ko(e,g)),g}try{let g=f.stdout,y=this.parseRawResponse(g);return dm.getToken.info(Xc(e)),y}catch(g){throw f.stderr?new $r(f.stderr):g}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new $r(u.message||"Unknown error while trying to retrieve the access token");throw dm.getToken.info(ko(e,f)),f}})}parseRawResponse(e){let r=JSON.parse(e),n=r.accessToken,i=Number.parseInt(r.expires_on,10)*1e3;if(!isNaN(i))return dm.getToken.info("expires_on is available and is valid, using it"),{token:n,expiresOnTimestamp:i,tokenType:"Bearer"};if(i=new Date(r.expiresOn).getTime(),isNaN(i))throw new $r(`Unexpected response from Azure CLI when getting token. Expected "expiresOn" to be a RFC3339 date string. Got: "${r.expiresOn}"`);return{token:n,expiresOnTimestamp:i,tokenType:"Bearer"}}};d();var FOe=Ne(require("child_process"),1);var aE=oi("AzureDeveloperCliCredential"),OOe={getSafeWorkingDir(){if(process.platform==="win32"){let t=process.env.SystemRoot||process.env.SYSTEMROOT;return t||(aE.getToken.warning("The SystemRoot environment variable is not set. This may cause issues when using the Azure Developer CLI credential."),t="C:\\Windows"),t}else return"/bin"},async getAzdAccessToken(t,e,r){let n=[];return e&&(n=["--tenant-id",e]),new Promise((i,o)=>{try{FOe.default.execFile("azd",["auth","token","--output","json",...t.reduce((a,c)=>a.concat("--scope",c),[]),...n],{cwd:OOe.getSafeWorkingDir(),timeout:r},(a,c,l)=>{i({stdout:c,stderr:l,error:a})})}catch(a){o(a)}})}},$L=class{static{s(this,"AzureDeveloperCliCredential")}constructor(e){e?.tenantId&&(ou(aE,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getToken(e,r={}){let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds);n&&ou(aE,n);let i;return typeof e=="string"?i=[e]:i=e,aE.getToken.info(`Using the scopes ${e}`),es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{var o,a,c,l;try{i.forEach(m=>{HP(m,aE)});let u=await OOe.getAzdAccessToken(i,n,this.timeout),f=((o=u.stderr)===null||o===void 0?void 0:o.match("not logged in, run `azd login` to login"))||((a=u.stderr)===null||a===void 0?void 0:a.match("not logged in, run `azd auth login` to login"));if(((c=u.stderr)===null||c===void 0?void 0:c.match("azd:(.*)not found"))||((l=u.stderr)===null||l===void 0?void 0:l.startsWith("'azd' is not recognized"))||u.error&&u.error.code==="ENOENT"){let m=new $r("Azure Developer CLI couldn't be found. To mitigate this issue, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw aE.getToken.info(ko(e,m)),m}if(f){let m=new $r("Please run 'azd auth login' from a command prompt to authenticate before using this credential. For more information, see the troubleshooting guidelines at https://aka.ms/azsdk/js/identity/azdevclicredential/troubleshoot.");throw aE.getToken.info(ko(e,m)),m}try{let m=JSON.parse(u.stdout);return aE.getToken.info(Xc(e)),{token:m.token,expiresOnTimestamp:new Date(m.expiresOn).getTime(),tokenType:"Bearer"}}catch(m){throw u.stderr?new $r(u.stderr):m}}catch(u){let f=u.name==="CredentialUnavailableError"?u:new $r(u.message||"Unknown error while trying to retrieve the access token");throw aE.getToken.info(ko(e,f)),f}})}};d();d();var QOe=Ne(require("child_process"),1),UOe={execFile(t,e,r){return new Promise((n,i)=>{QOe.execFile(t,e,r,(o,a,c)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(c)&&(c=c.toString("utf8")),c||o?i(c?new Error(c):o):n(a)})})}};var cE=oi("AzurePowerShellCredential"),HOe=process.platform==="win32";function WOe(t){return HOe?`${t}.exe`:t}s(WOe,"formatCommand");async function qOe(t,e){let r=[];for(let n of t){let[i,...o]=n,a=await UOe.execFile(i,o,{encoding:"utf8",timeout:e});r.push(a)}return r}s(qOe,"runCommands");var GOe={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Upe={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},w3t=s(t=>t.message.match(`(.*)${GOe.login}(.*)`),"isLoginError"),_3t=s(t=>t.message.match(GOe.installed),"isNotInstalledError"),qpe=[WOe("pwsh")];HOe&&qpe.push(WOe("powershell"));var zL=class{static{s(this,"AzurePowerShellCredential")}constructor(e){e?.tenantId&&(ou(cE,e?.tenantId),this.tenantId=e?.tenantId),this.additionallyAllowedTenantIds=Zc(e?.additionallyAllowedTenants),this.timeout=e?.processTimeoutInMs}async getAzurePowerShellAccessToken(e,r,n){for(let i of[...qpe]){try{await qOe([[i,"/?"]],n)}catch{qpe.shift();continue}let a=(await qOe([[i,"-NoProfile","-NonInteractive","-Command",`
          $tenantId = "${r??""}"
          $m = Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru
          $useSecureString = $m.Version -ge [version]'2.17.0' -and $m.Version -lt [version]'5.0.0'

          $params = @{
            ResourceUrl = "${e}"
          }

          if ($tenantId.Length -gt 0) {
            $params["TenantId"] = $tenantId
          }

          if ($useSecureString) {
            $params["AsSecureString"] = $true
          }

          $token = Get-AzAccessToken @params

          $result = New-Object -TypeName PSObject
          $result | Add-Member -MemberType NoteProperty -Name ExpiresOn -Value $token.ExpiresOn

          if ($token.Token -is [System.Security.SecureString]) {
            if ($PSVersionTable.PSVersion.Major -lt 7) {
              $ssPtr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($token.Token)
              try {
                $result | Add-Member -MemberType NoteProperty -Name Token -Value ([System.Runtime.InteropServices.Marshal]::PtrToStringBSTR($ssPtr))
              }
              finally {
                [System.Runtime.InteropServices.Marshal]::ZeroFreeBSTR($ssPtr)
              }
            }
            else {
              $result | Add-Member -MemberType NoteProperty -Name Token -Value ($token.Token | ConvertFrom-SecureString -AsPlainText)
            }
          }
          else {
            $result | Add-Member -MemberType NoteProperty -Name Token -Value $token.Token
          }

          Write-Output (ConvertTo-Json $result)
          `]]))[0];return S3t(a)}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async()=>{let n=_c(this.tenantId,r,this.additionallyAllowedTenantIds),i=typeof e=="string"?e:e[0];n&&ou(cE,n);try{HP(i,cE),cE.getToken.info(`Using the scope ${i}`);let o=OV(i),a=await this.getAzurePowerShellAccessToken(o,n,this.timeout);return cE.getToken.info(Xc(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime(),tokenType:"Bearer"}}catch(o){if(_3t(o)){let c=new $r(Upe.installed);throw cE.getToken.info(ko(i,c)),c}else if(w3t(o)){let c=new $r(Upe.login);throw cE.getToken.info(ko(i,c)),c}let a=new $r(`${o}. ${Upe.troubleshoot}`);throw cE.getToken.info(ko(i,a)),a}})}};async function S3t(t){let e=/{[^{}]*}/g,r=t.match(e),n=t;if(r)try{for(let i of r)try{let o=JSON.parse(i);if(o?.Token)return n=n.replace(i,""),n&&cE.getToken.warning(n),o}catch{continue}}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${t}`)}throw new Error(`No access token found in the output. Received output: ${t}`)}s(S3t,"parseJsonToken");d();var Hpe=oi("ChainedTokenCredential"),YL=class{static{s(this,"ChainedTokenCredential")}constructor(...e){this._sources=[],this._sources=e}async getToken(e,r={}){let{token:n}=await this.getTokenInternal(e,r);return n}async getTokenInternal(e,r={}){let n=null,i,o=[];return es.withSpan("ChainedTokenCredential.getToken",r,async a=>{for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,a),i=this._sources[c]}catch(l){if(l.name==="CredentialUnavailableError"||l.name==="AuthenticationRequiredError")o.push(l);else throw Hpe.getToken.info(ko(e,l)),l}if(!n&&o.length>0){let c=new s9(o,"ChainedTokenCredential authentication failed.");throw Hpe.getToken.info(ko(e,c)),c}if(Hpe.getToken.info(`Result for ${i.constructor.name}: ${Xc(e)}`),n===null)throw new $r("Failed to retrieve a valid token");return{token:n,successfulCredential:i}})}};d();d();var JL=require("node:crypto");var VOe=require("node:fs/promises");var KL="ClientCertificateCredential",jOe=oi(KL),XL=class{static{s(this,"ClientCertificateCredential")}constructor(e,r,n,i={}){if(!e||!r)throw new Error(`${KL}: tenantId and clientId are required parameters.`);this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.sendCertificateChain=i.sendCertificateChain,this.certificateConfiguration=Object.assign({},typeof n=="string"?{certificatePath:n}:n);let o=this.certificateConfiguration.certificate,a=this.certificateConfiguration.certificatePath;if(!this.certificateConfiguration||!(o||a))throw new Error(`${KL}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o&&a)throw new Error(`${KL}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:jOe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${KL}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,jOe);let i=Array.isArray(e)?e:[e],o=await this.buildClientCertificate();return this.msalClient.getTokenByClientCertificate(i,o,n)})}async buildClientCertificate(){var e;let r=await R3t(this.certificateConfiguration,(e=this.sendCertificateChain)!==null&&e!==void 0?e:!1),n;return this.certificateConfiguration.certificatePassword!==void 0?n=(0,JL.createPrivateKey)({key:r.certificateContents,passphrase:this.certificateConfiguration.certificatePassword,format:"pem"}).export({format:"pem",type:"pkcs8"}).toString():n=r.certificateContents,{thumbprint:r.thumbprint,thumbprintSha256:r.thumbprintSha256,privateKey:n,x5c:r.x5c}}};async function R3t(t,e){let r=t.certificate,n=t.certificatePath,i=r||await(0,VOe.readFile)(n,"utf8"),o=e?i:void 0,a=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,c=[],l;do l=a.exec(i),l&&c.push(l[3]);while(l);if(c.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");let u=(0,JL.createHash)("sha1").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase(),f=(0,JL.createHash)("sha256").update(Buffer.from(c[0],"base64")).digest("hex").toUpperCase();return{certificateContents:i,thumbprintSha256:f,thumbprint:u,x5c:o}}s(R3t,"parseCertificate");d();var $Oe=oi("ClientSecretCredential"),ZL=class{static{s(this,"ClientSecretCredential")}constructor(e,r,n,i={}){if(!e)throw new $r("ClientSecretCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!r)throw new $r("ClientSecretCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");if(!n)throw new $r("ClientSecretCredential: clientSecret is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.clientSecret=n,this.tenantId=e,this.additionallyAllowedTenantIds=Zc(i?.additionallyAllowedTenants),this.msalClient=um(r,e,Object.assign(Object.assign({},i),{logger:$Oe,tokenCredentialOptions:i}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,$Oe);let i=tI(e);return this.msalClient.getTokenByClientSecret(i,this.clientSecret,n)})}};d();var k3t=oi("UsernamePasswordCredential"),eM=class{static{s(this,"UsernamePasswordCredential")}constructor(e,r,n,i,o={}){if(!e)throw new $r("UsernamePasswordCredential: tenantId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!r)throw new $r("UsernamePasswordCredential: clientId is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!n)throw new $r("UsernamePasswordCredential: username is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");if(!i)throw new $r("UsernamePasswordCredential: password is a required parameter. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.tenantId=e,this.additionallyAllowedTenantIds=Zc(o?.additionallyAllowedTenants),this.username=n,this.password=i,this.msalClient=um(r,this.tenantId,Object.assign(Object.assign({},o),{tokenCredentialOptions:o??{}}))}async getToken(e,r={}){return es.withSpan(`${this.constructor.name}.getToken`,r,async n=>{n.tenantId=_c(this.tenantId,n,this.additionallyAllowedTenantIds,k3t);let i=tI(e);return this.msalClient.getTokenByUsernamePassword(i,this.username,this.password,n)})}};var P3t=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_CLIENT_CERTIFICATE_PASSWORD","AZURE_USERNAME","AZURE_PASSWORD","AZURE_ADDITIONALLY_ALLOWED_TENANTS","AZURE_CLIENT_SEND_CERTIFICATE_CHAIN"];function B3t(){var t;return((t=process.env.AZURE_ADDITIONALLY_ALLOWED_TENANTS)!==null&&t!==void 0?t:"").split(";")}s(B3t,"getAdditionallyAllowedTenants");var QV="EnvironmentCredential",lE=oi(QV);function D3t(){var t;let e=((t=process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN)!==null&&t!==void 0?t:"").toLowerCase(),r=e==="true"||e==="1";return lE.verbose(`AZURE_CLIENT_SEND_CERTIFICATE_CHAIN: ${process.env.AZURE_CLIENT_SEND_CERTIFICATE_CHAIN}; sendCertificateChain: ${r}`),r}s(D3t,"getSendCertificateChain");var tM=class{static{s(this,"EnvironmentCredential")}constructor(e){this._credential=void 0;let r=hG(P3t).assigned.join(", ");lE.info(`Found the following environment variables: ${r}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET,a=B3t(),c=D3t(),l=Object.assign(Object.assign({},e),{additionallyAllowedTenantIds:a,sendCertificateChain:c});if(n&&ou(lE,n),n&&i&&o){lE.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new ZL(n,i,o,l);return}let u=process.env.AZURE_CLIENT_CERTIFICATE_PATH,f=process.env.AZURE_CLIENT_CERTIFICATE_PASSWORD;if(n&&i&&u){lE.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${u}`),this._credential=new XL(n,i,{certificatePath:u,certificatePassword:f},l);return}let p=process.env.AZURE_USERNAME,m=process.env.AZURE_PASSWORD;n&&i&&p&&m&&(lE.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${p}`),lE.warning("Environment is configured to use username and password authentication. This authentication method is deprecated, as it doesn't support multifactor authentication (MFA). Use a more secure credential. For more details, see https://aka.ms/azsdk/identity/mfa."),this._credential=new eM(n,i,p,m,l))}async getToken(e,r={}){return es.withSpan(`${QV}.getToken`,r,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return lE.getToken.info(Xc(e)),i}catch(i){let o=new wb(400,{error:`${QV} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw lE.getToken.info(ko(e,o)),o}throw new $r(`${QV} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}};var Wpe=oi("DefaultAzureCredential");function N3t(t={}){var e,r,n,i;(e=t.retryOptions)!==null&&e!==void 0||(t.retryOptions={maxRetries:5,retryDelayInMs:800});let o=(r=t?.managedIdentityClientId)!==null&&r!==void 0?r:process.env.AZURE_CLIENT_ID,a=(n=t?.workloadIdentityClientId)!==null&&n!==void 0?n:o,c=t?.managedIdentityResourceId,l=process.env.AZURE_FEDERATED_TOKEN_FILE,u=(i=t?.tenantId)!==null&&i!==void 0?i:process.env.AZURE_TENANT_ID;if(c){let f=Object.assign(Object.assign({},t),{resourceId:c});return new eI(f)}if(l&&a){let f=Object.assign(Object.assign({},t),{tenantId:u});return new eI(a,f)}if(o){let f=Object.assign(Object.assign({},t),{clientId:o});return new eI(f)}return new eI(t)}s(N3t,"createDefaultManagedIdentityCredential");function L3t(t){var e,r,n;let i=(e=t?.managedIdentityClientId)!==null&&e!==void 0?e:process.env.AZURE_CLIENT_ID,o=(r=t?.workloadIdentityClientId)!==null&&r!==void 0?r:i,a=process.env.AZURE_FEDERATED_TOKEN_FILE,c=(n=t?.tenantId)!==null&&n!==void 0?n:process.env.AZURE_TENANT_ID;if(a&&o){let l=Object.assign(Object.assign({},t),{tenantId:c,clientId:o,tokenFilePath:a});return new sE(l)}if(c){let l=Object.assign(Object.assign({},t),{tenantId:c});return new sE(l)}return new sE(t)}s(L3t,"createDefaultWorkloadIdentityCredential");function M3t(t={}){let e=t.processTimeoutInMs;return new $L(Object.assign({processTimeoutInMs:e},t))}s(M3t,"createDefaultAzureDeveloperCliCredential");function F3t(t={}){let e=t.processTimeoutInMs;return new VL(Object.assign({processTimeoutInMs:e},t))}s(F3t,"createDefaultAzureCliCredential");function O3t(t={}){let e=t.processTimeoutInMs;return new zL(Object.assign({processTimeoutInMs:e},t))}s(O3t,"createDefaultAzurePowershellCredential");function Q3t(t={}){return new tM(t)}s(Q3t,"createEnvironmentCredential");var Gpe=class{static{s(this,"UnavailableDefaultCredential")}constructor(e,r){this.credentialName=e,this.credentialUnavailableErrorMessage=r}getToken(){return Wpe.getToken.info(`Skipping ${this.credentialName}, reason: ${this.credentialUnavailableErrorMessage}`),Promise.resolve(null)}},WP=class extends YL{static{s(this,"DefaultAzureCredential")}constructor(e){let r=process.env.AZURE_TOKEN_CREDENTIALS?process.env.AZURE_TOKEN_CREDENTIALS.trim().toLowerCase():void 0,n=[F3t,O3t,M3t],i=[Q3t,L3t,N3t],o=[];if(r)switch(r){case"dev":o=n;break;case"prod":o=i;break;default:{let c=`Invalid value for AZURE_TOKEN_CREDENTIALS = ${process.env.AZURE_TOKEN_CREDENTIALS}. Valid values are 'prod' or 'dev'.`;throw Wpe.warning(c),new Error(c)}}else o=[...i,...n];let a=o.map(c=>{try{return c(e)}catch(l){return Wpe.warning(`Skipped ${c.name} because of an error creating the credential: ${l}`),new Gpe(c.name,l.message)}});super(...a)}};d();var Agn=oi("InteractiveBrowserCredential");d();var _gn=oi("DeviceCodeCredential");d();var U3t="AzurePipelinesCredential",Fgn=oi(U3t);d();var $gn=oi("AuthorizationCodeCredential");d();var q3t="OnBehalfOfCredential",nAn=oi(q3t);d();function H3t(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(H3t,"getIntegrationId");function rI(t){let e={...A0(t),"X-GitHub-Api-Version":$A},r=H3t(t.get(nn));return r&&(e["Copilot-Integration-Id"]=r),e9()&&(e["ces-proxy-target"]=F_.api,e["Copilot-Integration-Id"]="autodev-test"),e}s(rI,"getCapiHeaders");function UV(t,e,...r){if(e9()){let n=r.join("/");return n.startsWith("/")&&(n=n.slice(1)),`https://ces-dev1.azurewebsites.net/api/proxy/${n}`}return cy(t,e,"api",...r)}s(UV,"getCapiUrl");async function qS(t,e){let r=await t.get(Qr).getToken(),n=UV(t,r,e),i=r.token;e9()&&(i=await YOe());let o={Authorization:`Bearer ${i}`,...rI(t)};return await t.get(jn).fetch(new URL(n).href,{method:"GET",headers:o})}s(qS,"fetchCapiUrl");async function zOe(t,e,r){let n=await t.get(Qr).getToken(),i=UV(t,n,e),o=n.token;e9()&&(o=await YOe());let a={Authorization:`Bearer ${o}`,...rI(t)};return await t.get(jn).fetch(new URL(i).href,{method:"POST",headers:a,body:r})}s(zOe,"postCapiUrl");async function YOe(){let e=await new WP().getToken("api://17b0ad65-ed36-4194-bb27-059c567bc41f/.default");if(!e)throw new Error("Failed to retrieve access token");return e.token}s(YOe,"getMsBenchToken");d();var KOe=10*60*1e3,pn={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},JOe=new Set([pn.O1Ga,pn.O3Mini,pn.O1Mini,pn.Gemini20Pro,pn.Gemini20Flash]);function fm(t){switch(t){case"edits":case"user":case"inline":return[pn.Gpt4o,pn.Gpt4turbo,pn.Gpt4,pn.O1Mini,pn.O1Ga,pn.Claude35Sonnet,pn.O3Mini,pn.Gemini20Flash,pn.Claude37Sonnet,pn.Claude37SonnetThought,pn.Gpt45,pn.Gpt41,pn.CopilotBase];case"meta":case"suggestions":case"synonyms":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt35turbo,pn.Gpt41,pn.CopilotBase];case"gitCommit":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt4,pn.Gpt41,pn.CopilotBase];case"codeReview":return[pn.Gpt4,pn.Gpt4o,pn.Gpt41,pn.CopilotBase];case"nesStubs":return[pn.Gpt4oMini,pn.Gpt4o,pn.Gpt41,pn.CopilotBase]}}s(fm,"getSupportedModelFamiliesForPrompt");var WV={textEmbedding3Small:"text-embedding-3-small"},W3t=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),G3t=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:W3t,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),XOe=I.Object({data:I.Array(G3t)}),Bd=class{static{s(this,"ModelMetadataProvider")}},qV=class extends Bd{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ia(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await qS(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){fn.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw fn.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new VA(r)}await this.processModels(r)}async fetchModel(r){let n=await qS(this.ctx,`/models/${r}`);if(!n.ok){fn.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await zOe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){fn.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>KOe}},HV=class extends Bd{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let c of a){let l=await this.fetchModel(c.trim());l!==void 0&&(l.isExperimental=!0,o.push(l))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<KOe)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};d();function ZOe(t){let e=vi(t,kt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(ZOe,"getUserSelectedModelConfiguration");d();d();d();var GP=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};d();var e7e=Ne(require("node:fs/promises")),GV=Ne(require("node:path"));async function jV(t){return await e7e.readFile(jpe(t))}s(jV,"readFile");function jpe(t){return GV.default.resolve(GV.default.extname(__filename)!==".ts"?__dirname:GV.default.resolve(__dirname,"../../dist"),t)}s(jpe,"locateFile");var jP=Ne(m7e());var JV=new Map;function ho(t="o200k_base"){let e=JV.get(t);return e!==void 0||(e=JV.get("o200k_base"),e!==void 0)?e:new XV}s(ho,"getTokenizer");async function g7e(t="o200k_base"){return await HS,ho(t)}s(g7e,"getTokenizerAsync");async function sBt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await jV(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(sBt,"parseTikTokenNoIndex");var rme=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,jP.createTokenizer)(await sBt(`resources/${e}.tiktoken.noindex`),(0,jP.getSpecialTokensByEncoder)(e),(0,jP.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new GP("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),c=this.tokenize(a);for(;c.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},nme=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},aBt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},tme=4,XV=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let i=0;i<r.length;i++)n=n*Math.pow(10,tme)+r.charCodeAt(i);return n})}detokenize(e){return e.map(r=>{let n=[],i=r.toString();for(;i.length>0;){let o=i.slice(-tme),a=String.fromCharCode(parseInt(o));n.unshift(a),i=i.slice(0,-tme)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?aBt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}};async function h7e(t){try{let e=await rme.create(t);JV.set(t,e)}catch{}}s(h7e,"setTokenizer");var HS=(async()=>{JV.set("mock",new nme),await Promise.all([h7e("cl100k_base"),h7e("o200k_base")])})();d();d();var cBt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},y7e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},ime,ZV,C7e,ome=class extends bn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),ime.add(this),ZV.set(this,void 0),cBt(this,ZV,e,"f"),this.error=r}Errors(){return new fb(y7e(this,ime,"m",C7e).call(this))}};ZV=new WeakMap,ime=new WeakSet,C7e=s(function*(){this.error&&(yield this.error),yield*y7e(this,ZV,"f")},"_AssertError_Iterator");function A7e(t,e,r){if(!Ii(t,e,r))throw new ome(ty(t,e,r))}s(A7e,"AssertValue");function e$(...t){return t.length===3?A7e(t[0],t[1],t[2]):A7e(t[0],[],t[1])}s(e$,"Assert");d();d();d();function lBt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=go(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=go(t[r]);return e}s(lBt,"FromObject");function uBt(t){return t.map(e=>go(e))}s(uBt,"FromArray");function dBt(t){return t.slice()}s(dBt,"FromTypedArray");function fBt(t){return new Map(go([...t.entries()]))}s(fBt,"FromMap");function pBt(t){return new Set(go([...t.entries()]))}s(pBt,"FromSet");function mBt(t){return new Date(t.toISOString())}s(mBt,"FromDate");function go(t){if(xn(t))return uBt(t);if(Cd(t))return mBt(t);if(Wp(t))return dBt(t);if(f5e(t))return fBt(t);if(p5e(t))return pBt(t);if(Ei(t))return lBt(t);if(C0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(go,"Clone");var q0=class extends bn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Ao(t){return nb(t)?t():go(t)}s(Ao,"FromDefault");function hBt(t,e){return vn(t,"default")?Ao(t.default):{}}s(hBt,"FromAny");function gBt(t,e){return{}}s(gBt,"FromArgument");function ABt(t,e){if(t.uniqueItems===!0&&!vn(t,"default"))throw new q0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!vn(t,"default"))throw new q0(t,"Array with the contains constraint requires a default value");return"default"in t?Ao(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>Pf(t.items,e)):[]}s(ABt,"FromArray");function yBt(t,e){return vn(t,"default")?Ao(t.default):async function*(){}()}s(yBt,"FromAsyncIterator");function CBt(t,e){return vn(t,"default")?Ao(t.default):BigInt(0)}s(CBt,"FromBigInt");function EBt(t,e){return vn(t,"default")?Ao(t.default):!1}s(EBt,"FromBoolean");function vBt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=Pf(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(vBt,"FromConstructor");function xBt(t,e){return vn(t,"default")?Ao(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(xBt,"FromDate");function bBt(t,e){return vn(t,"default")?Ao(t.default):()=>Pf(t.returns,e)}s(bBt,"FromFunction");function IBt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return Pf(n,[...e,...r])}s(IBt,"FromImport");function TBt(t,e){return vn(t,"default")?Ao(t.default):t.minimum!==void 0?t.minimum:0}s(TBt,"FromInteger");function wBt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=t.allOf.reduce((n,i)=>{let o=Pf(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!Ii(t,e,r))throw new q0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(wBt,"FromIntersect");function _Bt(t,e){return vn(t,"default")?Ao(t.default):function*(){}()}s(_Bt,"FromIterator");function SBt(t,e){return vn(t,"default")?Ao(t.default):t.const}s(SBt,"FromLiteral");function RBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"Never types cannot be created. Consider using a default value.")}s(RBt,"FromNever");function kBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"Not types must have a default value")}s(kBt,"FromNot");function PBt(t,e){return vn(t,"default")?Ao(t.default):null}s(PBt,"FromNull");function BBt(t,e){return vn(t,"default")?Ao(t.default):t.minimum!==void 0?t.minimum:0}s(BBt,"FromNumber");function DBt(t,e){if(vn(t,"default"))return Ao(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=Pf(o,e));return n}}s(DBt,"FromObject");function NBt(t,e){return vn(t,"default")?Ao(t.default):Promise.resolve(Pf(t.item,e))}s(NBt,"FromPromise");function LBt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(vn(t,"default"))return Ao(t.default);if(r===XA||r===JA)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=Pf(n,e);return o}}s(LBt,"FromRecord");function MBt(t,e){return vn(t,"default")?Ao(t.default):Pf(fo(t,e),e)}s(MBt,"FromRef");function FBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"RegExp types cannot be created. Consider using a default value.")}s(FBt,"FromRegExp");function OBt(t,e){if(t.pattern!==void 0){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(vn(t,"default"))return Ao(t.default);throw new q0(t,"String types with formats must specify a default value")}else return vn(t,"default")?Ao(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(OBt,"FromString");function QBt(t,e){return vn(t,"default")?Ao(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(QBt,"FromSymbol");function UBt(t,e){if(vn(t,"default"))return Ao(t.default);if(!LH(t))throw new q0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return t4(t)[0]}s(UBt,"FromTemplateLiteral");function qBt(t,e){if(E7e++>YBt)throw new q0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return vn(t,"default")?Ao(t.default):Pf(fo(t,e),e)}s(qBt,"FromThis");function HBt(t,e){return vn(t,"default")?Ao(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>Pf(t.items[n],e))}s(HBt,"FromTuple");function WBt(t,e){if(vn(t,"default"))return Ao(t.default)}s(WBt,"FromUndefined");function GBt(t,e){if(vn(t,"default"))return Ao(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return Pf(t.anyOf[0],e)}s(GBt,"FromUnion");function jBt(t,e){return vn(t,"default")?Ao(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(jBt,"FromUint8Array");function VBt(t,e){return vn(t,"default")?Ao(t.default):{}}s(VBt,"FromUnknown");function $Bt(t,e){if(vn(t,"default"))return Ao(t.default)}s($Bt,"FromVoid");function zBt(t,e){if(vn(t,"default"))return Ao(t.default);throw new Error("User defined types must specify a default value")}s(zBt,"FromKind");function Pf(t,e){let r=yl(t,e),n=t;switch(n[et]){case"Any":return hBt(n,r);case"Argument":return gBt(n,r);case"Array":return ABt(n,r);case"AsyncIterator":return yBt(n,r);case"BigInt":return CBt(n,r);case"Boolean":return EBt(n,r);case"Constructor":return vBt(n,r);case"Date":return xBt(n,r);case"Function":return bBt(n,r);case"Import":return IBt(n,r);case"Integer":return TBt(n,r);case"Intersect":return wBt(n,r);case"Iterator":return _Bt(n,r);case"Literal":return SBt(n,r);case"Never":return RBt(n,r);case"Not":return kBt(n,r);case"Null":return PBt(n,r);case"Number":return BBt(n,r);case"Object":return DBt(n,r);case"Promise":return NBt(n,r);case"Record":return LBt(n,r);case"Ref":return MBt(n,r);case"RegExp":return FBt(n,r);case"String":return OBt(n,r);case"Symbol":return QBt(n,r);case"TemplateLiteral":return UBt(n,r);case"This":return qBt(n,r);case"Tuple":return HBt(n,r);case"Undefined":return WBt(n,r);case"Union":return GBt(n,r);case"Uint8Array":return jBt(n,r);case"Unknown":return VBt(n,r);case"Void":return $Bt(n,r);default:if(!Ed.Has(n[et]))throw new q0(n,"Unknown type");return zBt(n,r)}}s(Pf,"Visit");var YBt=512,E7e=0;function pm(...t){return E7e=0,t.length===2?Pf(t[0],t[1]):Pf(t[0],[])}s(pm,"Create");var t$=class extends bn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function KBt(t,e,r){if(t[et]==="Object"&&typeof r=="object"&&!_1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,c]=[1/o.length,o.length];return o.reduce((l,[u,f])=>{let p=f[et]==="Literal"&&f.const===r[u]?c:0,m=Ii(f,e,r[u])?a:0,h=i.includes(u)?a:0;return l+(p+m+h)},0)}else return Ii(t,e,r)?1:0}s(KBt,"ScoreUnion");function JBt(t,e,r){let n=t.anyOf.map(a=>fo(a,e)),[i,o]=[n[0],0];for(let a of n){let c=KBt(a,e,r);c>o&&(i=a,o=c)}return i}s(JBt,"SelectUnion");function XBt(t,e,r){if("default"in t)return typeof r=="function"?t.default:go(t.default);{let n=JBt(t,e,r);return nM(n,e,r)}}s(XBt,"CastUnion");function ZBt(t,e,r){return Ii(t,e,r)?go(r):pm(t,e)}s(ZBt,"DefaultClone");function eDt(t,e,r){return Ii(t,e,r)?r:pm(t,e)}s(eDt,"Default");function tDt(t,e,r){if(Ii(t,e,r))return go(r);let n=xn(r)?go(r):pm(t,e),i=Vr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Vr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(l=>cg(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!Ii(t,e,c))throw new t$(t,"Array cast produced invalid data due to uniqueItems constraint");return c}s(tDt,"FromArray");function rDt(t,e,r){if(Ii(t,e,r))return pm(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=cg(a,e,r.prototype[o]));return i}s(rDt,"FromConstructor");function nDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return cg(i,[...e,...n],r)}s(nDt,"FromImport");function iDt(t,e,r){let n=pm(t,e),i=Ei(n)&&Ei(r)?{...n,...r}:r;return Ii(t,e,i)?i:pm(t,e)}s(iDt,"FromIntersect");function oDt(t,e,r){throw new t$(t,"Never types cannot be cast")}s(oDt,"FromNever");function sDt(t,e,r){if(Ii(t,e,r))return r;if(r===null||typeof r!="object")return pm(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=cg(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=cg(t.additionalProperties,e,r[a]))}return i}s(sDt,"FromObject");function aDt(t,e,r){if(Ii(t,e,r))return go(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return pm(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,c]of Object.entries(r))o[a]=cg(i,e,c);return o}s(aDt,"FromRecord");function cDt(t,e,r){return cg(fo(t,e),e,r)}s(cDt,"FromRef");function lDt(t,e,r){return cg(fo(t,e),e,r)}s(lDt,"FromThis");function uDt(t,e,r){return Ii(t,e,r)?go(r):xn(r)?t.items===void 0?[]:t.items.map((n,i)=>cg(n,e,r[i])):pm(t,e)}s(uDt,"FromTuple");function dDt(t,e,r){return Ii(t,e,r)?go(r):XBt(t,e,r)}s(dDt,"FromUnion");function cg(t,e,r){let n=ro(t.$id)?yl(t,e):e,i=t;switch(t[et]){case"Array":return tDt(i,n,r);case"Constructor":return rDt(i,n,r);case"Import":return nDt(i,n,r);case"Intersect":return iDt(i,n,r);case"Never":return oDt(i,n,r);case"Object":return sDt(i,n,r);case"Record":return aDt(i,n,r);case"Ref":return cDt(i,n,r);case"This":return lDt(i,n,r);case"Tuple":return uDt(i,n,r);case"Union":return dDt(i,n,r);case"Date":case"Symbol":case"Uint8Array":return ZBt(t,e,r);default:return eDt(i,n,r)}}s(cg,"Visit");function nM(...t){return t.length===3?cg(t[0],t[1],t[2]):cg(t[0],[],t[1])}s(nM,"Cast");d();function fDt(t){return ob(t)&&t[et]!=="Unsafe"}s(fDt,"IsCheckable");function pDt(t,e,r){return xn(r)?r.map(n=>Bf(t.items,e,n)):r}s(pDt,"FromArray");function mDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Bf(i,[...e,...n],r)}s(mDt,"FromImport");function hDt(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(c=>Bf(c,e,go(r))).reduce((c,l)=>Ei(l)?{...c,...l}:l,{});if(!Ei(r)||!Ei(o)||!ob(n))return o;let a=pf(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||Ii(n,e,r[c])&&(o[c]=Bf(n,e,r[c]));return o}s(hDt,"FromIntersect");function gDt(t,e,r){if(!Ei(r)||xn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(vn(t.properties,i)){r[i]=Bf(t.properties[i],e,r[i]);continue}if(ob(n)&&Ii(n,e,r[i])){r[i]=Bf(n,e,r[i]);continue}delete r[i]}return r}s(gDt,"FromObject");function ADt(t,e,r){if(!Ei(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of i){if(c.test(l)){r[l]=Bf(a,e,r[l]);continue}if(ob(n)&&Ii(n,e,r[l])){r[l]=Bf(n,e,r[l]);continue}delete r[l]}return r}s(ADt,"FromRecord");function yDt(t,e,r){return Bf(fo(t,e),e,r)}s(yDt,"FromRef");function CDt(t,e,r){return Bf(fo(t,e),e,r)}s(CDt,"FromThis");function EDt(t,e,r){if(!xn(r))return r;if(Ns(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=Bf(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(EDt,"FromTuple");function vDt(t,e,r){for(let n of t.anyOf)if(fDt(n)&&Ii(n,e,r))return Bf(n,e,r);return r}s(vDt,"FromUnion");function Bf(t,e,r){let n=ro(t.$id)?yl(t,e):e,i=t;switch(i[et]){case"Array":return pDt(i,n,r);case"Import":return mDt(i,n,r);case"Intersect":return hDt(i,n,r);case"Object":return gDt(i,n,r);case"Record":return ADt(i,n,r);case"Ref":return yDt(i,n,r);case"This":return CDt(i,n,r);case"Tuple":return EDt(i,n,r);case"Union":return vDt(i,n,r);default:return r}}s(Bf,"Visit");function r$(...t){return t.length===3?Bf(t[0],t[1],t[2]):Bf(t[0],[],t[1])}s(r$,"Clean");d();function n$(t){return ro(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(n$,"IsStringNumeric");function xDt(t){return Xl(t)||KA(t)||Vr(t)}s(xDt,"IsValueToString");function iM(t){return t===!0||Vr(t)&&t===1||Xl(t)&&t===BigInt("1")||ro(t)&&(t.toLowerCase()==="true"||t==="1")}s(iM,"IsValueTrue");function oM(t){return t===!1||Vr(t)&&(t===0||Object.is(t,-0))||Xl(t)&&t===BigInt("0")||ro(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(oM,"IsValueFalse");function bDt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(bDt,"IsTimeStringWithTimeZone");function IDt(t){return ro(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(IDt,"IsTimeStringWithoutTimeZone");function TDt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(TDt,"IsDateTimeStringWithTimeZone");function wDt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(wDt,"IsDateTimeStringWithoutTimeZone");function _Dt(t){return ro(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(_Dt,"IsDateString");function SDt(t,e){let r=x7e(t);return r===e?r:t}s(SDt,"TryConvertLiteralString");function RDt(t,e){let r=b7e(t);return r===e?r:t}s(RDt,"TryConvertLiteralNumber");function kDt(t,e){let r=v7e(t);return r===e?r:t}s(kDt,"TryConvertLiteralBoolean");function PDt(t,e){return ro(t.const)?SDt(e,t.const):Vr(t.const)?RDt(e,t.const):KA(t.const)?kDt(e,t.const):e}s(PDt,"TryConvertLiteral");function v7e(t){return iM(t)?!0:oM(t)?!1:t}s(v7e,"TryConvertBoolean");function BDt(t){let e=s(r=>r.split(".")[0],"truncateInteger");return n$(t)?BigInt(e(t)):Vr(t)?BigInt(Math.trunc(t)):oM(t)?BigInt(0):iM(t)?BigInt(1):t}s(BDt,"TryConvertBigInt");function x7e(t){return S1(t)&&t.description!==void 0?t.description.toString():xDt(t)?t.toString():t}s(x7e,"TryConvertString");function b7e(t){return n$(t)?parseFloat(t):iM(t)?1:oM(t)?0:t}s(b7e,"TryConvertNumber");function DDt(t){return n$(t)?parseInt(t):Vr(t)?Math.trunc(t):iM(t)?1:oM(t)?0:t}s(DDt,"TryConvertInteger");function NDt(t){return ro(t)&&t.toLowerCase()==="null"?null:t}s(NDt,"TryConvertNull");function LDt(t){return ro(t)&&t==="undefined"?void 0:t}s(LDt,"TryConvertUndefined");function MDt(t){return Cd(t)?t:Vr(t)?new Date(t):iM(t)?new Date(1):oM(t)?new Date(0):n$(t)?new Date(parseInt(t)):IDt(t)?new Date(`1970-01-01T${t}.000Z`):bDt(t)?new Date(`1970-01-01T${t}`):wDt(t)?new Date(`${t}.000Z`):TDt(t)?new Date(t):_Dt(t)?new Date(`${t}T00:00:00.000Z`):t}s(MDt,"TryConvertDate");function FDt(t,e,r){return(xn(r)?r:[r]).map(i=>lg(t.items,e,i))}s(FDt,"FromArray");function ODt(t,e,r){return BDt(r)}s(ODt,"FromBigInt");function QDt(t,e,r){return v7e(r)}s(QDt,"FromBoolean");function UDt(t,e,r){return MDt(r)}s(UDt,"FromDate");function qDt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return lg(i,[...e,...n],r)}s(qDt,"FromImport");function HDt(t,e,r){return DDt(r)}s(HDt,"FromInteger");function WDt(t,e,r){return t.allOf.reduce((n,i)=>lg(i,e,n),r)}s(WDt,"FromIntersect");function GDt(t,e,r){return PDt(t,r)}s(GDt,"FromLiteral");function jDt(t,e,r){return NDt(r)}s(jDt,"FromNull");function VDt(t,e,r){return b7e(r)}s(VDt,"FromNumber");function $Dt(t,e,r){if(!Ei(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))vn(r,n)&&(r[n]=lg(t.properties[n],e,r[n]));return r}s($Dt,"FromObject");function zDt(t,e,r){if(!Ei(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,c]of Object.entries(r))r[a]=lg(o,e,c);return r}s(zDt,"FromRecord");function YDt(t,e,r){return lg(fo(t,e),e,r)}s(YDt,"FromRef");function KDt(t,e,r){return x7e(r)}s(KDt,"FromString");function JDt(t,e,r){return ro(r)||Vr(r)?Symbol(r):r}s(JDt,"FromSymbol");function XDt(t,e,r){return lg(fo(t,e),e,r)}s(XDt,"FromThis");function ZDt(t,e,r){return xn(r)&&!Ns(t.items)?r.map((i,o)=>o<t.items.length?lg(t.items[o],e,i):i):r}s(ZDt,"FromTuple");function eNt(t,e,r){return LDt(r)}s(eNt,"FromUndefined");function tNt(t,e,r){for(let n of t.anyOf){let i=lg(n,e,go(r));if(Ii(n,e,i))return i}return r}s(tNt,"FromUnion");function lg(t,e,r){let n=yl(t,e),i=t;switch(t[et]){case"Array":return FDt(i,n,r);case"BigInt":return ODt(i,n,r);case"Boolean":return QDt(i,n,r);case"Date":return UDt(i,n,r);case"Import":return qDt(i,n,r);case"Integer":return HDt(i,n,r);case"Intersect":return WDt(i,n,r);case"Literal":return GDt(i,n,r);case"Null":return jDt(i,n,r);case"Number":return VDt(i,n,r);case"Object":return $Dt(i,n,r);case"Record":return zDt(i,n,r);case"Ref":return YDt(i,n,r);case"String":return KDt(i,n,r);case"Symbol":return JDt(i,n,r);case"This":return XDt(i,n,r);case"Tuple":return ZDt(i,n,r);case"Undefined":return eNt(i,n,r);case"Union":return tNt(i,n,r);default:return r}}s(lg,"Visit");function i$(...t){return t.length===3?lg(t[0],t[1],t[2]):lg(t[0],[],t[1])}s(i$,"Convert");d();function I7e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!Ii(e,r,n))throw new m4(e,n,ty(e,r,n).First());return F1(e,r)?h4(e,r,n):n}s(I7e,"Decode");d();function uE(t,e){let r=vn(t,"default")?t.default:void 0,n=nb(r)?r():go(r);return Ns(e)?n:Ei(e)&&Ei(n)?Object.assign(n,e):e}s(uE,"ValueOrDefault");function sme(t){return ob(t)&&"default"in t}s(sme,"HasDefaultProperty");function rNt(t,e,r){if(xn(r)){for(let i=0;i<r.length;i++)r[i]=Nd(t.items,e,r[i]);return r}let n=uE(t,r);if(!xn(n))return n;for(let i=0;i<n.length;i++)n[i]=Nd(t.items,e,n[i]);return n}s(rNt,"FromArray");function nNt(t,e,r){return Cd(r)?r:uE(t,r)}s(nNt,"FromDate");function iNt(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Nd(i,[...e,...n],r)}s(iNt,"FromImport");function oNt(t,e,r){let n=uE(t,r);return t.allOf.reduce((i,o)=>{let a=Nd(o,e,n);return Ei(a)?{...i,...a}:a},{})}s(oNt,"FromIntersect");function sNt(t,e,r){let n=uE(t,r);if(!Ei(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Nd(t.properties[o],e,n[o]);Ns(a)||(n[o]=Nd(t.properties[o],e,n[o]))}if(!sme(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=Nd(t.additionalProperties,e,n[o]));return n}s(sNt,"FromObject");function aNt(t,e,r){let n=uE(t,r);if(!Ei(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],c=new RegExp(o);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&sme(a)&&(n[l]=Nd(a,e,n[l]));if(!sme(i))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=Nd(i,e,n[l]));return n}s(aNt,"FromRecord");function cNt(t,e,r){return Nd(fo(t,e),e,uE(t,r))}s(cNt,"FromRef");function lNt(t,e,r){return Nd(fo(t,e),e,r)}s(lNt,"FromThis");function uNt(t,e,r){let n=uE(t,r);if(!xn(n)||Ns(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=Nd(i[a],e,n[a]));return n}s(uNt,"FromTuple");function dNt(t,e,r){let n=uE(t,r);for(let i of t.anyOf){let o=Nd(i,e,go(n));if(Ii(i,e,o))return o}return n}s(dNt,"FromUnion");function Nd(t,e,r){let n=yl(t,e),i=t;switch(i[et]){case"Array":return rNt(i,n,r);case"Date":return nNt(i,n,r);case"Import":return iNt(i,n,r);case"Intersect":return oNt(i,n,r);case"Object":return sNt(i,n,r);case"Record":return aNt(i,n,r);case"Ref":return cNt(i,n,r);case"This":return lNt(i,n,r);case"Tuple":return uNt(i,n,r);case"Union":return dNt(i,n,r);default:return uE(i,r)}}s(Nd,"Visit");function o$(...t){return t.length===3?Nd(t[0],t[1],t[2]):Nd(t[0],[],t[1])}s(o$,"Default");d();d();var ug={};ra(ug,{Delete:()=>pNt,Format:()=>sM,Get:()=>hNt,Has:()=>mNt,Set:()=>fNt,ValuePointerRootDeleteError:()=>a$,ValuePointerRootSetError:()=>s$});d();var s$=class extends bn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},a$=class extends bn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function T7e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(T7e,"Escape");function*sM(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield T7e(t.slice(e,r))),e=n+1):r=n;yield T7e(t.slice(e))}s(sM,"Format");function fNt(t,e,r){if(e==="")throw new s$(t,e,r);let[n,i,o]=[null,t,""];for(let a of sM(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(fNt,"Set");function pNt(t,e){if(e==="")throw new a$(t,e);let[r,n,i]=[null,t,""];for(let o of sM(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(pNt,"Delete");function mNt(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of sM(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(mNt,"Has");function hNt(t,e){if(e==="")return t;let r=t;for(let n of sM(e)){if(r[n]===void 0)return;r=r[n]}return r}s(hNt,"Get");d();function gNt(t,e){if(!Ei(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>WS(t[i],e[i]))}s(gNt,"ObjectType");function ANt(t,e){return Cd(e)&&t.getTime()===e.getTime()}s(ANt,"DateType");function yNt(t,e){return!xn(e)||t.length!==e.length?!1:t.every((r,n)=>WS(r,e[n]))}s(yNt,"ArrayType");function CNt(t,e){return!Wp(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>WS(r,e[n]))}s(CNt,"TypedArrayType");function ENt(t,e){return t===e}s(ENt,"ValueType");function WS(t,e){if(Cd(t))return ANt(t,e);if(Wp(t))return CNt(t,e);if(xn(t))return yNt(t,e);if(Ei(t))return gNt(t,e);if(C0(t))return ENt(t,e);throw new Error("ValueEquals: Unable to compare value")}s(WS,"Equal");var vNt=_o({type:zi("insert"),path:vd(),value:Gh()}),xNt=_o({type:zi("update"),path:vd(),value:Gh()}),bNt=_o({type:zi("delete"),path:vd()}),_7e=wo([vNt,xNt,bNt]),c$=class extends bn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function l$(t,e){return{type:"update",path:t,value:e}}s(l$,"CreateUpdate");function S7e(t,e){return{type:"insert",path:t,value:e}}s(S7e,"CreateInsert");function R7e(t){return{type:"delete",path:t}}s(R7e,"CreateDelete");function w7e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new c$(t,"Cannot diff objects with symbols")}s(w7e,"AssertDiffable");function*INt(t,e,r){if(w7e(e),w7e(r),!lce(r))return yield l$(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)vn(e,o)||(yield S7e(`${t}/${o}`,r[o]));for(let o of n)vn(r,o)&&(WS(e,r)||(yield*u$(`${t}/${o}`,e[o],r[o])));for(let o of n)vn(r,o)||(yield R7e(`${t}/${o}`))}s(INt,"ObjectType");function*TNt(t,e,r){if(!xn(r))return yield l$(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*u$(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield S7e(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield R7e(`${t}/${n}`))}s(TNt,"ArrayType");function*wNt(t,e,r){if(!Wp(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield l$(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*u$(`${t}/${n}`,e[n],r[n])}s(wNt,"TypedArrayType");function*_Nt(t,e,r){e!==r&&(yield l$(t,r))}s(_Nt,"ValueType");function*u$(t,e,r){if(lce(e))return yield*INt(t,e,r);if(xn(e))return yield*TNt(t,e,r);if(Wp(e))return yield*wNt(t,e,r);if(C0(e))return yield*_Nt(t,e,r);throw new c$(e,"Unable to diff value")}s(u$,"Visit");function k7e(t,e){return[...u$("",t,e)]}s(k7e,"Diff");function SNt(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(SNt,"IsRootUpdate");function RNt(t){return t.length===0}s(RNt,"IsIdentity");function P7e(t,e){if(SNt(e))return go(e[0].value);if(RNt(e))return go(t);let r=go(t);for(let n of e)switch(n.type){case"insert":{ug.Set(r,n.path,n.value);break}case"update":{ug.Set(r,n.path,n.value);break}case"delete":{ug.Delete(r,n.path);break}}return r}s(P7e,"Patch");d();function B7e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=F1(e,r)?A4(e,r,n):n;if(!Ii(e,r,i))throw new g4(e,i,ty(e,r,i).First());return i}s(B7e,"Encode");d();function d$(t){return Ei(t)&&!xn(t)}s(d$,"IsStandardObject");var f$=class extends bn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function kNt(t,e,r,n){if(!d$(r))ug.Set(t,e,go(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)ame(t,`${e}/${a}`,r[a],n[a])}}s(kNt,"ObjectType");function PNt(t,e,r,n){if(!xn(r))ug.Set(t,e,go(n));else{for(let i=0;i<n.length;i++)ame(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(PNt,"ArrayType");function BNt(t,e,r,n){if(Wp(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else ug.Set(t,e,go(n))}s(BNt,"TypedArrayType");function DNt(t,e,r,n){r!==n&&ug.Set(t,e,n)}s(DNt,"ValueType");function ame(t,e,r,n){if(xn(n))return PNt(t,e,r,n);if(Wp(n))return BNt(t,e,r,n);if(d$(n))return kNt(t,e,r,n);if(C0(n))return DNt(t,e,r,n)}s(ame,"Visit");function D7e(t){return Wp(t)||C0(t)}s(D7e,"IsNonMutableValue");function NNt(t,e){return d$(t)&&xn(e)||xn(t)&&d$(e)}s(NNt,"IsMismatchedValue");function N7e(t,e){if(D7e(t)||D7e(e))throw new f$("Only object and array types can be mutated at the root level");if(NNt(t,e))throw new f$("Cannot assign due type mismatch of assignable values");ame(t,"",t,e)}s(N7e,"Mutate");d();var p$=class extends bn{static{s(this,"ParseError")}constructor(e){super(e)}},cme;(function(t){let e=new Map([["Assert",(o,a,c)=>(e$(o,a,c),c)],["Cast",(o,a,c)=>nM(o,a,c)],["Clean",(o,a,c)=>r$(o,a,c)],["Clone",(o,a,c)=>go(c)],["Convert",(o,a,c)=>i$(o,a,c)],["Decode",(o,a,c)=>F1(o,a)?h4(o,a,c):c],["Default",(o,a,c)=>o$(o,a,c)],["Encode",(o,a,c)=>F1(o,a)?A4(o,a,c):c]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(cme||(cme={}));var L7e=["Clone","Clean","Default","Convert","Assert","Decode"];function LNt(t,e,r,n){return t.reduce((i,o)=>{let a=cme.Get(o);if(Ns(a))throw new p$(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(LNt,"ParseValue");function M7e(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?xn(t[0])?[t[0],t[1],[],t[2]]:[L7e,t[0],t[1],t[2]]:t.length===2?[L7e,t[0],[],t[1]]:(()=>{throw new p$("Invalid Arguments")})();return LNt(e,r,n,i)}s(M7e,"Parse");d();var Sy={};ra(Sy,{Assert:()=>e$,Cast:()=>nM,Check:()=>Ii,Clean:()=>r$,Clone:()=>go,Convert:()=>i$,Create:()=>pm,Decode:()=>I7e,Default:()=>o$,Diff:()=>k7e,Edit:()=>_7e,Encode:()=>B7e,Equal:()=>WS,Errors:()=>ty,Hash:()=>db,Mutate:()=>N7e,Parse:()=>M7e,Patch:()=>P7e,ValueErrorIterator:()=>fb});d();var MNt="gpt-4o-copilot",mm=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ia(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return MNt}parseModelsResponse(e){try{return Sy.Parse(XOe,e)}catch(r){fn.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await qS(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(fn.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=ZOe(this._ctx);if(n){let c=this.getGenericCompletionModels().map(l=>l.modelId);c.includes(n)||(c.length>0&&fn.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${c.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=vi(this._ctx,kt.DebugOverrideEngine)||vi(this._ctx,kt.DebugOverrideEngineLegacy);if(i)return new iI(i,"override");let o=e?this._ctx.get(Bt).customEngine(e):"",a=e?this._ctx.get(Bt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new iI(o,"exp"):new iI(n,"modelpicker"):o?new iI(o,"exp"):this.customModels.length>0?new iI(this.customModels[0],"custommodel"):new iI(r,"default")}},iI=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function sI(t,e=void 0){let r=t.get(mm),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(sI,"getEngineRequestInfo");d();d();var yo=class{static{s(this,"FileSystem")}};var eQe=Ne(Z7e());function tQe(t){return t!==void 0&&t!==0}s(tQe,"isRepoInfo");function rQe(t){if(t===void 0||t===0)return"";let e=dE(t);if(e==="github/github")return e;let r=c8t(t)?.toLowerCase();return r!==void 0?r:""}s(rQe,"getDogFood");function dE(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(dE,"tryGetGitHubNWO");function c8t(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(c8t,"tryGetADONWO");function aI(t,e){let r=Gu(e);return l8t(t,r)}s(aI,"extractRepoInfoInBackground");var l8t=p8t(u8t,1e4);async function u8t(t,e){let r=HDe(e);if(!r)return;let n=await d8t(t,r);if(!n)return;let i=t.get(yo),o=Lo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let c=f8t(a)??"",l=fme(c),u={uri:n};return l===void 0?{baseFolder:u,url:c,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:c,...l}}s(u8t,"extractRepoInfo");function fme(t){let e;try{if(e=(0,eQe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(fme,"parseRepoUrl");async function d8t(t,e){let r=e+"_add_to_make_longer",n=t.get(yo);for(;e!=="file:///"&&e.length<r.length;){let i=Lo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=Gu(e)}}s(d8t,"getRepoBaseUri");function f8t(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,c=!1;for(let l of t.split(`
`))if(c&&o!==void 0){if(o+=l,l.endsWith("\\"))o=o.substring(0,o.length-1);else if(c=!1,a==="origin")return o}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let f=l.match(n);if(f){if(o=f[1],o.endsWith("\\"))o=o.substring(0,o.length-1),c=!0;else if(a==="origin")return o}}}}return o}s(f8t,"getRepoUrlFromConfigText");var dme=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function p8t(t,e){let r=new Or(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),c=r.get(a);if(c)return c.result;if(n.has(a))return 0;let l=t(i,...o);return n.add(a),l.then(u=>{r.set(a,new dme(u)),n.delete(a)}),0}}s(p8t,"computeInBackgroundAndMemoize");d();var aM=500,nQe=8192-aM,iQe=4,VP=10,oQe=15,sQe=35,m8t={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function cM(t){return t=t.toLowerCase(),m8t[t]??t}s(cM,"normalizeLanguageId");var pme=class{constructor(e){this.ctx=e;this.cache=new Or(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new mme(()=>this.ctx.get(eg).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},mme=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function g8t(t){return"uri"in t}s(g8t,"isCompletionsFiltersInfo");var Bt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new pme(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=Dr.createAndMarkAsIssued(),n=void 0){if(r instanceof oy)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&g8t(e)?aI(this.ctx,e.uri):void 0,o=dE(i)??"",a=rQe(i)??"",c=e?.languageId??"",l=sI(this.ctx).modelId;n??=await this.ctx.get(Qr).getToken();let u=DDe(n),f=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":c,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":l,"X-Copilot-CustomModel":f,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},E=this.getGranularityDirectory(),x=this.makeFilterSettings(y),b=E.extendFilters(x),_=await this.getExpConfig(b.newFilterSettings,g);E.update(x,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=E.extendFilters(x),P=k.newFilterSettings,N=await this.getExpConfig(P,g),M=new Promise(J=>setTimeout(J,t.upcomingDynamicFilterCheckDelayMs));for(let J of k.otherFilterSettingsToPrefetch)M=M.then(async()=>{await new Promise(pe=>setTimeout(pe,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(J,g)});return this.prepareForUpcomingFilters(P,g),new oy(r.properties,r.measurements,r.issuedTime,{filters:P,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(As).machineId;this.granularityDirectory=new cG(e,this.ctx.get(ly))}return this.granularityDirectory}makeFilterSettings(e){return new m_({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return Up.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new m_({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=U4(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??oQe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??VP}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??nQe+aM}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}workspaceContextPercent(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextpercent??sQe}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}enableSpeculativeRequestsShown(e){return e.filtersAndExp.exp.variables.copilotspeculativerequestsshown??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}completionsDebounce(e){return e.filtersAndExp.exp.variables.copilotcompletionsdebounce}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}};d();d();var h$=Ne(m$());var gme={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function H0(t){return t in gme&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(H0,"isSupportedLanguageId");function g$(t){if(!(t in gme))throw new Error(`Unrecognized language: ${t}`);return gme[t]}s(g$,"languageIdToWasmLanguage");var hme=new Map;async function A8t(t){let e;try{e=await jV(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new GP(`Could not load tree-sitter-${t}.wasm`,r):r}return h$.default.Language.load(e)}s(A8t,"loadWasmLanguage");function yme(t){let e=g$(t);if(!hme.has(e)){let r=A8t(e);hme.set(e,r)}return hme.get(e)}s(yme,"getLanguage");var Ame=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function fE(t,e){await h$.default.init({locateFile:s(o=>jpe(o),"locateFile")});let r;try{r=new h$.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Ame(`Could not init Parse for language <${t}>`,o):o}let n=await yme(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(fE,"parseTreeSitter");function aQe(t){switch(g$(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(aQe,"getBlockCloseToken");function y8t(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(y8t,"innerQuery");var C8t=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function cQe(t){return y8t([C8t],t).length==1}s(cQe,"queryPythonIsDocstring");var Ry=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),c=n?`
${r}${a}+- `:"";return i+this.description+c}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},$u=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return lM.languageIds.has(e)||uM.languageIds.has(e)||dM.languageIds.has(e)||fM.languageIds.has(e)||pM.languageIds.has(e)||mM.languageIds.has(e)||hM.languageIds.has(e)||gM.languageIds.has(e)}static create(e,r,n,i){if(lM.languageIds.has(e))return new lM(e,r,n,i);if(uM.languageIds.has(e))return new uM(e,r,n,i);if(dM.languageIds.has(e))return new dM(e,r,n,i);if(mM.languageIds.has(e))return new mM(e,r,n,i);if(fM.languageIds.has(e))return new fM(e,r,n,i);if(pM.languageIds.has(e))return new pM(e,r,n,i);if(hM.languageIds.has(e))return new hM(e,r,n,i);if(gM.languageIds.has(e))return new gM(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await fE(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Cme=class t extends Ry{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},lM=class extends $u{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Cme(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Eme=class t extends Ry{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},uM=class extends $u{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Eme(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},vme=class t extends Ry{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},dM=class extends $u{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new vme(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},xme=class t extends Ry{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},fM=class extends $u{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new xme(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},bme=class t extends Ry{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},pM=class extends $u{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new bme(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},Ime=class t extends Ry{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},mM=class extends $u{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new Ime(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Tme=class t extends Ry{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},hM=class extends $u{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Tme(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},wme=class t extends Ry{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},gM=class extends $u{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new wme(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};d();function E8t(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(E8t,"getProxyFromEnvironment");function v8t(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(v8t,"getRejectUnauthorizedFromEnvironment");var lQe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function uQe(t){let e=E8t(t),r=AM({proxy:e,proxyStrictSSL:v8t(t)}),n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(uQe,"getHttpSettingsFromEnvironment");function AM(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:r,username:n,password:i,pathname:o,search:a,hash:c}=new URL(t.proxy);return{...t,proxy:`${e}//${r}${o}${a}${c}`,proxyAuthorization:t.proxyAuthorization||x8t(n,i)}}catch{return{...t,proxy:""}}}s(AM,"normalizeHttpSettings");function x8t(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(x8t,"getAuth");var fQe=Ne(require("events"));var _me={};ra(_me,{activationEvents:()=>H8t,badges:()=>q8t,browser:()=>W8t,bugs:()=>D8t,build:()=>_8t,buildType:()=>S8t,categories:()=>Q8t,contributes:()=>Sme,default:()=>K8t,dependencies:()=>z8t,description:()=>T8t,devDependencies:()=>$8t,displayName:()=>I8t,enabledApiProposals:()=>j8t,engines:()=>O8t,extensionPack:()=>F8t,homepage:()=>P8t,icon:()=>L8t,keywords:()=>U8t,license:()=>B8t,main:()=>G8t,name:()=>b8t,overrides:()=>Y8t,preview:()=>k8t,pricing:()=>M8t,publisher:()=>R8t,qna:()=>N8t,scripts:()=>V8t,version:()=>w8t});var b8t="copilot",I8t="GitHub Copilot",T8t="Your AI pair programmer",w8t="1.346.0",_8t="1689",S8t="prod",R8t="GitHub",k8t=!1,P8t="https://github.com/features/copilot?editor=vscode",B8t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",D8t={url:"https://github.com/microsoft/vscode/issues"},N8t="https://github.com/github-community/community/discussions/categories/copilot",L8t="assets/Copilot-App-Icon.png",M8t="Trial",F8t=["GitHub.copilot-chat","GitHub.copilot"],O8t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},Q8t=["AI","Chat","Programming Languages","Machine Learning"],U8t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],q8t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],H8t=["onStartupFinished"],W8t="./dist/web",G8t="./dist/extension",j8t=["inlineCompletionsAdditions"],Sme={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github-copilot-completions-debugger-view.refresh",title:"Refresh",icon:"$(refresh)"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],viewsContainers:{activitybar:[{id:"github-copilot-completions-debugger-panel",title:"Debugger",icon:"$(bug)",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator"}]},views:{"github-copilot-completions-debugger-panel":[{id:"github-copilot-completions-debugger-view",name:"Debugger",when:"config.github.copilot.internal.showWorkspaceContextDebugger && config.github.copilot.internal.useWorkspaceContextCoordinator",icon:"$(bug)"}]},menus:{"view/title":[{command:"github-copilot-completions-debugger-view.refresh",when:"view == github-copilot-completions-debugger-view",group:"navigation"}]}},V8t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"test:prepare-msbench":"tsx script/setupMsbench.ts","test:run-msbench":"tsx lsp-client/test/msbench/agent/index.ts","vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},$8t={"@azure/identity":"^4.10.1","@azure/keyvault-secrets":"^4.10.0","@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},z8t={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10",events:"^3.3.0","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},Y8t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},K8t={name:b8t,displayName:I8t,description:T8t,version:w8t,build:_8t,buildType:S8t,publisher:R8t,preview:k8t,homepage:P8t,license:B8t,bugs:D8t,qna:N8t,icon:L8t,pricing:M8t,extensionPack:F8t,engines:O8t,categories:Q8t,keywords:U8t,badges:q8t,activationEvents:H8t,browser:W8t,main:G8t,enabledApiProposals:j8t,contributes:Sme,scripts:V8t,devDependencies:$8t,dependencies:z8t,overrides:Y8t};var kt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",EnableSpeculativeRequestsShown:"internal.enableSpeculativeRequestsShown",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",CompletionsDebounce:"internal.completionsDebounce",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",ShowWorkspaceContextDebugger:"internal.showWorkspaceContextDebugger",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode"};function pQe(t){return["server","parsingandserver"].includes(t)}s(pQe,"shouldDoServerTrimming");var dg=class{static{s(this,"BlockModeConfig")}},zP=class extends dg{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Bt).overrideBlockMode(n);if(i)return dQe(i,r);let o=e.get(Bt).enableProgressiveReveal(n);return vi(e,kt.AlwaysRequestMultiline)??o?dQe("moremultiline",r):r=="ruby"?"parsing":H0(r)?"parsingandserver":"server"}};function J8t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(J8t,"blockModeRequiresTreeSitter");function dQe(t,e){return t==="moremultiline"&&$u.isSupported(e)?t:J8t(t)&&!H0(e)?"server":t}s(dQe,"toApplicableBlockMode");var nu=class{static{s(this,"ConfigProvider")}},YP=class extends nu{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return Z8t(e)}getOptionalConfig(e){return e6t(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},GS=class extends nu{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n;this.emitter=new fQe.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}getHttpSettings(){return this.httpSettings}setHttpSettings(r){let n=AM(r);this.httpSettings=n,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(r){return this.emitter.on("didChangeHttpSettings",r),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",r)},"dispose")}}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[kt.ShowEditorCompletions,kt.EnableAutoCompletions,kt.DelayCompletions,kt.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function X8t(t){return t?.type==="object"&&"properties"in t}s(X8t,"isContributesObject");function mQe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(mQe,"getConfigKeyRecursively");function Z8t(t){if($P.has(t))return $P.get(t);throw new Error(`Missing config default value: ${g6}.${t}`)}s(Z8t,"getConfigDefaultForKey");function e6t(t){return $P.get(t)}s(e6t,"getOptionalConfigDefaultForKey");var $P=new Map([[kt.DebugOverrideCppHeadersEnableSwitch,!1],[kt.RelatedFilesVSCodeCSharp,!1],[kt.RelatedFilesVSCodeTypeScript,!1],[kt.RelatedFilesVSCode,!1],[kt.IncludeNeighboringFiles,!1],[kt.ExcludeRelatedFiles,!1],[kt.ContextProviders,[]],[kt.DebugUseEditorFetcher,null],[kt.DebugUseElectronFetcher,null],[kt.DebugOverrideLogLevels,{}],[kt.DebugSnippyOverrideUrl,""],[kt.FetchStrategy,"auto"],[kt.UseSubsetMatching,null],[kt.ContextProviderTimeBudget,void 0],[kt.DebugOverrideCapiUrl,""],[kt.DebugTestOverrideCapiUrl,""],[kt.DebugOverrideProxyUrl,""],[kt.DebugTestOverrideProxyUrl,""],[kt.DebugOverrideEngine,""],[kt.EnableSpeculativeRequests,void 0],[kt.EnableSpeculativeRequestsShown,void 0],[kt.AlwaysRequestMultiline,void 0],[kt.ModelAlwaysTerminatesSingleline,void 0],[kt.TrimCompletionsAggressively,void 0],[kt.CompletionsDebounce,void 0],[kt.NESXTab,void 0],[kt.UseWorkspaceContextCoordinator,void 0],[kt.ShowWorkspaceContextDebugger,!1],[kt.CompletionsDelay,void 0],[kt.UseSplitContextPrompt,void 0],[kt.UseCompletionsComparisonPanel,!1],[kt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[kt.ComparisonPanelRandomizedMode,!1],[kt.ShowEditorCompletions,void 0],[kt.EnableAutoCompletions,void 0],[kt.DelayCompletions,void 0],[kt.FilterCompletions,void 0]]);for(let t of Object.values(kt)){let e=Sme.configuration[0],r=[],n=`${g6}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(X8t(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if($P.has(t))throw new Error(`Duplicate config default value ${g6}.${t}`);$P.set(t,i.default)}}if(!$P.has(t))throw new Error(`Missing config default value ${g6}.${t}`)}function vi(t,e){return t.get(nu).getConfig(e)}s(vi,"getConfig");function fDe(t){return t.get(nu).dumpForTelemetry()}s(fDe,"dumpForTelemetry");var lo=class{constructor(){this.packageJson=_me}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function Gue(t){return t.get(lo).isProduction()}s(Gue,"isProduction");function rNe(t){return t.get(lo).getBuildType()==="dev"}s(rNe,"isDevBuild");function sy(t){return t.get(lo).getBuildType()}s(sy,"getBuildType");function pDe(t){return t.get(lo).getBuild()}s(pDe,"getBuild");function B_(t){return t.get(lo).getVersion()}s(B_,"getVersion");var As=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function zA({name:t,version:e}){return`${t}/${e}`}s(zA,"formatNameAndVersion");var nn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},$A="2025-05-01";function A0(t){let e=t.get(nn);return{"Editor-Version":zA(e.getEditorInfo()),"Editor-Plugin-Version":zA(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":B_(t)}}s(A0,"editorVersionHeaders");var Zh="Iv1.b507a08c87ecfe98",Il=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??Zh}};d();var cI=require("fs"),hQe=require("os"),gQe=Ne(require("path")),KP=require("process");var pu=class{static{s(this,"PersistenceManager")}},Rme=class extends pu{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await cI.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await cI.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await cI.promises.rm(i):await cI.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await cI.promises.rm(n)}catch{}}async listSettings(){try{return(await cI.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await cI.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function kme(){return KP.env.XDG_CONFIG_HOME&&gQe.isAbsolute(KP.env.XDG_CONFIG_HOME)?KP.env.XDG_CONFIG_HOME+"/github-copilot":(0,hQe.platform)()==="win32"?KP.env.USERPROFILE+"\\AppData\\Local\\github-copilot":KP.env.HOME+"/.config/github-copilot"}s(kme,"getXdgConfigPath");function AQe(){return new Rme(kme())}s(AQe,"makeXdgPersistenceManager");d();d();d();var jS={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};d();d();var yQe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],CQe={".php":[".blade"]},VS=Object.keys(jS).flatMap(t=>jS[t].extensions);var Pme=Ne(require("node:path"));var XP=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},yM=class{static{s(this,"LanguageDetection")}},Bme=new Map,JP=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(jS)){for(let n of e)Bme.set(n,[...Bme.get(n)??[],t]);for(let n of r??[])JP.set(n,[...JP.get(n)??[],t])}var Dme=class extends yM{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Oi(e.uri),n=Pme.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new XP(o.languageId,o.isGuess,a):new XP(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(yQe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=Pme.extname(n).toLowerCase();if(i.length>0&&VS.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=CQe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(JP.has(e))return{languageId:JP.get(e)[0],isGuess:!1};let n=Bme.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),JP.has(e))return{languageId:JP.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},Nme=class extends yM{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new XP("cpp",n.isGuess,n.fileExtension):n}},Lme=class extends yM{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new XP(r.languageId,!0,""):this.delegate.detectLanguage(r)}},t6t=new Nme(new Lme(new Dme));function ZP({uri:t,languageId:e}){let r=t6t.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(ZP,"detectLanguage");d();d();d();d();function pE(t){if(t.isCancellationRequested)throw new A$}s(pE,"throwIfCancellationRequested");function C$(t){return t instanceof A$?!0:t instanceof Error&&t.name===Mme&&t.message===Mme}s(C$,"isCancellationError");var A$=class extends Error{static{s(this,"CancellationError")}constructor(){super(Mme),this.name=this.message}},Mme="Canceled",y$=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function $S(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s($S,"isTypeDefinition");var bs=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=vQe(e,e.length,i),EQe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=vQe(e,e.length,++i),EQe(n,r)):i++;return n.join("")}};function EQe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(EQe,"appendIndent");function vQe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(vQe,"consumeIndent");var hm=class{constructor(e,r,n,i,o,a,c,l,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=c;this.kind=l;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Bc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await fE(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new y$,a=[];for(let c of i.matches){let l=this.createSymbolRange(o,e,r,c.captures);l&&a.push(l)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,c=0,l=0,u=0,f=0,p=0,m=0,h=null,g=null;for(let x=0;x<i.length;x++){let b=i[x].name;b==="name"?(u=i[x].node.startIndex,f=i[x].node.endIndex):b==="reference"?(u=i[x].node.startIndex,f=i[x].node.endIndex,c=i[x].node.startIndex,l=i[x].node.endIndex,h=b):b==="body"?(p=i[x].node.startIndex,m=i[x].node.endIndex):b==="comment"?(o=o===0?i[x].node.startIndex:Math.min(o,i[x].node.startIndex),a=Math.max(a,i[x].node.endIndex)):b==="receiver"?g=bs.fromBounds(i[x].node.startIndex,i[x].node.endIndex).getText(n):(c=i[x].node.startIndex,l=i[x].node.endIndex,h=b)}h==="definition.module.filescoped"&&(m=n.length,l=m);let y=bs.fromBounds(c,l),E=c>0||l>0||u>0||f>0?new hm(r,"","",bs.fromBounds(o,a),bs.fromBounds(u,f),bs.fromBounds(p,m),y,t.kindFromString(h),0):null;if(E){t.updateScopesForSymbol(e,E);let x=E.nameRange.getText(n),b=this.createNameFromScopes(n,e.toArray());return b=g?`${g}.${b}`:b,new hm(r,b,x.substring(x.lastIndexOf(".")+1),E.commentRange,E.nameRange,E.bodyRange,E.extentRange,E.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var E$=class extends Bc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,r6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},v$=class extends Bc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,i6t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,o6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},x$=class extends Bc{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,n6t),i=new Set;try{n.matches.forEach(o=>{let a,c,l;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?c=u:u.name==="import"&&(l=u);if(a&&l){let u=this.cleanQuotedString(a.node.text),f=a.node.startIndex+1,p=a.node.endIndex-1,m=c?new bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new bs(f,p-f),h=new bs(l.node.startIndex,l.node.endIndex-l.node.startIndex),g=bs.empty,y=bs.empty,E=u.substring(u.lastIndexOf("/")+1);i.add(new hm(e,u,E,g,m,y,h,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},r6t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,n6t=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,i6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,o6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;d();var I$=class extends Bc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,s6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},T$=class extends Bc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,c6t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,l6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},w$=class extends Bc{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){return(await this.executeQuery(e,r,a6t)).filter(i=>i.kind===0)}},s6t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,a6t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,c6t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,l6t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;d();var u6t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),_$=class extends Bc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,d6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},S$=class extends Bc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,f6t)).filter(i=>!u6t.has(i.unqualifiedName))}};var d6t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,f6t=`
(call_expression function: (_) @name) @reference
`;d();var p6t=new Set(["int","str","float","bool","list","dict","tuple","set"]),R$=class extends Bc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,m6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},k$=class extends Bc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,h6t)).filter(i=>!p6t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,A6t),o=i.filter(l=>l.kind!==9),a=i.filter(l=>l.kind===9&&l.extentRange.containsRange(n)),c=[];for(let l of a)c.push(...o.filter(u=>l.extentRange.containsRange(u.extentRange)));return c}},P$=class extends Bc{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractSymbols(e,r){let n=await this.findMatches(r,g6t),i=new Set;try{n.matches.forEach(o=>{let a,c,l,u;for(let f of o.captures)f.name==="import.name"?a=f:f.name==="import.module"?l=f:f.name==="alias"?c=f:f.name==="import"&&(u=f);if(l&&u){let f=a||l,p=c?new bs(c.node.startIndex,c.node.endIndex-c.node.startIndex):new bs(f.node.startIndex,u.node.endIndex-f.node.endIndex),m=new bs(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=bs.empty,g=bs.empty,y=f.node.text,E=y.split(".").pop()||y,x;a?x=`${l.node.text}.${a.node.text}`:x=l.node.text,i.add(new hm(e,x,E,h,p,g,m,17,0))}})}finally{n.tree.delete()}return i.size>0?[...i]:[]}},m6t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,h6t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,g6t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,A6t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;d();var y6t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),e3=class extends Bc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,C6t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},t3=class extends Bc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,E6t)).filter(i=>!y6t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var C6t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,E6t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;d();var v6t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),B$=class extends e3{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,x6t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},D$=class extends t3{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,b6t),super.extractReferences(e,r)]);return[...n.filter(o=>!v6t.has(o.unqualifiedName)),...i]}},x6t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,b6t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var CM=[{symbolExtractor:new I$,referenceExtractor:new T$,importExtractor:new w$,languageId:"java"},{symbolExtractor:new E$,referenceExtractor:new v$,importExtractor:new x$,languageId:"go"},{symbolExtractor:new R$,referenceExtractor:new k$,importExtractor:new P$,languageId:"python"},{symbolExtractor:new e3,referenceExtractor:new t3,languageId:"typescript"},{symbolExtractor:new B$,referenceExtractor:new D$,languageId:"typescriptreact"},{symbolExtractor:new _$,referenceExtractor:new S$,languageId:"javascript"}];function xQe(t){let e=ZP({uri:t});if(e&&CM.some(r=>e===r.languageId))return e}s(xQe,"getSupportedLanguageIdForMultiLanguageProvider");var bQe=new Map(CM.map(t=>[t.languageId,t.referenceExtractor])),N$=new Map(CM.map(t=>[t.languageId,t.symbolExtractor])),IQe=new Map(CM.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),Fme=CM.map(t=>jS[t.languageId].extensions).flat();d();d();d();d();d();d();d();d();d();function Ome(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Ome,"virtualNode");function TQe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(TQe,"lineNode");function Qme(t){return{type:"blank",lineNumber:t,subs:[]}}s(Qme,"blankNode");function L$(t){return{type:"top",indentation:-1,subs:t??[]}}s(L$,"topNode");function mu(t){return t.type==="blank"}s(mu,"isBlank");function zS(t){return t.type==="line"}s(zS,"isLine");function YS(t){return t.type==="virtual"}s(YS,"isVirtual");d();function wQe(t,e){return zu(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(wQe,"clearLabelsIf");function KS(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>KS(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>KS(r,e)),label:t.label?e(t.label):void 0}}}s(KS,"mapLabels");function zu(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(zu,"visitTree");function Ume(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),zu(t,o,n),i}s(Ume,"foldTree");function M$(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(c=>c!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:L$()}s(M$,"rebuildTree");d();function T6t(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[f,p]=o(u+1,r[u]);return[TQe(r[u],u,n[u],f),p]}s(i,"parseNode");function o(u,f){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>f);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(Qme(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,c]=o(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push(Qme(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return L$(a)}s(T6t,"parseRaw");function EM(t,e){function r(n){if(zS(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),zu(t,r,"bottomUp")}s(EM,"labelLines");function F$(t){function e(r){if(YS(r)&&r.label===void 0){let n=r.subs.filter(i=>!mu(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),zu(t,e,"bottomUp")}s(F$,"labelVirtualInherited");function vM(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(vM,"buildLabelRules");function qme(t){let r=M$(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&zS(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&o!==void 0&&(zS(c)||YS(c))&&c.indentation>=o.indentation){let u=i.length-1;for(;u>0&&mu(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),c.subs.length>0){let f=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,f),m=o.subs.slice(f),h=m.length>0?[Ome(c.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,c]}else o.subs.push(c)}else i.push(c),mu(c)||(o=c)}return n.subs=i,n},"rebuilder"));return wQe(t,n=>n==="newVirtual"),r}s(qme,"combineClosersAndOpeners");function _Qe(t,e=mu,r){return M$(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],c,l=!1;function u(f=!1){if(c!==void 0&&(o.length>0||!f)){let p=Ome(c,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let f=0;f<i.subs.length;f++){let p=i.subs[f],m=e(p);!m&&l&&(u(),a=[]),l=m,a.push(p),mu(p)||(c=c??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(_Qe,"groupBlocks");function JS(t){return M$(t,s(function(r){return YS(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&YS(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(JS,"flattenVirtual");var w6t={opener:/^[[({]/,closer:/^[\])}]/},_6t=vM(w6t),SQe={};function Hme(t,e){SQe[t]=e}s(Hme,"registerLanguageSpecificParser");function XS(t,e){let r=T6t(t),n=SQe[e??""];return n?n(r):(EM(r,_6t),qme(r))}s(XS,"parseTree");var S6t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},R6t=vM(S6t);function RQe(t){let e=t;return EM(e,R6t),e=qme(e),e=JS(e),F$(e),zu(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!mu(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(RQe,"processJava");d();var k6t={heading:/^# /,subheading:/^## /,subsubheading:/### /},P6t=vM(k6t);function kQe(t){let e=t;if(EM(e,P6t),mu(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||mu(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=_Qe(e),e=JS(e),F$(e),e}s(kQe,"processMarkdown");d();function PQe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(PQe,"deparseLine");Hme("markdown",kQe);Hme("java",RQe);var B6t={worthUp:.9,worthSibling:.88,worthDown:.8};function Wme(t,e,r=ho(),n=B6t){let i=KS(t,o=>o?1:void 0);return zu(i,o=>{if(mu(o))return;let a=o.subs.reduce((c,l)=>Math.max(c,l.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),zu(i,o=>{if(mu(o))return;let a=o.subs.map(u=>u.label??0),c=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(c=c.map((f,p)=>Math.max(f,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let l=o.label;l!==void 0&&(c=c.map(u=>Math.max(u,n.worthDown*l))),o.subs.forEach((u,f)=>u.label=c[f])},"topDown"),D6t(i,e,r)}s(Wme,"fromTreeWithFocussedLines");function D6t(t,e,r=ho()){let n=Ume(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[PQe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Nt(n,e,r)}s(D6t,"fromTreeWithValuedLines");function W0(t,e=!0,r=!0,n,i=ho()){let o=typeof t=="string"?XS(t):XS(t.source,t.languageId);JS(o);let a=KS(o,c=>e&&c!=="closer");return zu(a,c=>{c.label===void 0&&(c.label=e&&c.label!==!1)},"topDown"),e&&zu(a,c=>{if(c.label){let l=!1;for(let u of[...c.subs].reverse())u.label&&!l?l=!0:u.label=!1}else for(let l of c.subs)l.label=!1;c.subs.length>0&&(c.label=!1)},"topDown"),r&&zu(a,c=>{c.label||=(zS(c)||mu(c))&&c.lineNumber==0},"topDown"),Wme(a,n,i)}s(W0,"elidableTextForSourceCode");d();var xM=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>ho().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Nt=class t{constructor(e,r,n=ho()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,c=Array.isArray(o)?o[0]:o;typeof c=="string"?c.split(`
`).forEach(l=>i.push(new xM(l,a,n.tokenLength(l+`
`),"strict",this.metadata))):c instanceof t?c.lines.forEach(l=>i.push(l.copy().adjustValue(a))):"source"in c&&"languageId"in c&&W0(c).lines.forEach(l=>i.push(l.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>ho().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:c,totalCost:l,priorityQueue:u}=L6t(this.lines,i);if(l<=e)return Gme(c);M6t(u,a);let f=l;for(;f>e&&u.length>0;){let m=u.shift().originalIndex,h=c[m];if(h.markedForRemoval)continue;let g=n?F6t(c,m):"",y=BQe(g,r,o,h);c[m]=y,f-=h.cost,f+=y.cost;let E=m+1;if(E<c.length){let b=c[E];O$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}let x=m-1;if(x>=0){let b=c[x];O$(b,r)&&(f-=b.cost,b.markedForRemoval=!0)}}if(f>e)return Gme([BQe("",r,o)]);let p=c.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)O$(p[m],r)&&O$(p[m-1],r)&&p.splice(m,1);return Gme(p)}};function N6t(t){return t?.text.match(/^\s*/)?.[0]??""}s(N6t,"getIndentation");function O$(t,e){return t?.text.trim()===e.trim()}s(O$,"isEllipsis");function Gme(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(Gme,"produceElidedText");function L6t(t,e){let r=0,n=[];return{lines:t.map((o,a)=>{let c=o.copy();return e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:a,value:c.value}),c}),totalCost:r,priorityQueue:n}}s(L6t,"initializeElisionContext");function M6t(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(M6t,"sortPriorityQueue");function F6t(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=N6t(i);break}}return r}s(F6t,"getClosestIndentation");function BQe(t,e,r,n){let i=t+e;return new xM(i,1/0,r.tokenLength(i+`
`),"loose",n?.metadata)}s(BQe,"getNewEllipsis");d();d();function fg(){}s(fg,"Diff");fg.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function c(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(c,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var l=r.length,u=e.length,f=1,p=l+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=l)return c(DQe(a,g[0].lastComponent,r,e,a.useLongestToken));var E=-1/0,x=1/0;function b(){for(var k=Math.max(E,-f);k<=Math.min(x,f);k+=2){var P=void 0,N=g[k-1],M=g[k+1];N&&(g[k-1]=void 0);var J=!1;if(M){var pe=M.oldPos-k;J=M&&0<=pe&&pe<l}var Y=N&&N.oldPos+1<u;if(!J&&!Y){g[k]=void 0;continue}if(!Y||J&&N.oldPos<M.oldPos?P=a.addToPath(M,!0,!1,0,i):P=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(P,r,e,k,i),P.oldPos+1>=u&&y+1>=l)return c(DQe(a,P.lastComponent,r,e,a.useLongestToken));g[k]=P,P.oldPos+1>=u&&(x=Math.min(x,k-1)),y+1>=l&&(E=Math.max(E,k+1))}f++}if(s(b,"execEditLength"),o)s(function k(){setTimeout(function(){if(f>p||Date.now()>h)return o();b()||k()},0)},"exec")();else for(;f<=p&&Date.now()<=h;){var _=b();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,c=n.length,l=e.oldPos,u=l-i,f=0;u+1<a&&l+1<c&&this.equals(n[l+1],r[u+1],o);)u++,l++,f++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return f&&!o.oneChangePerToken&&(e.lastComponent={count:f,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=l,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function DQe(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var c=0,l=o.length,u=0,f=0;c<l;c++){var p=o[c];if(p.removed)p.value=t.join(n.slice(f,f+p.count)),f+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[f+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(f+=p.count)}}return o}s(DQe,"buildValues");var xTn=new fg;function NQe(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(NQe,"longestCommonPrefix");function LQe(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(LQe,"longestCommonSuffix");function jme(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s(jme,"replacePrefix");function Vme(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(Vme,"replaceSuffix");function bM(t,e){return jme(t,e,"")}s(bM,"removePrefix");function Q$(t,e){return Vme(t,e,"")}s(Q$,"removeSuffix");function MQe(t,e){return e.slice(0,O6t(t,e))}s(MQe,"maximumOverlap");function O6t(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var c=r;c<t.length;c++){for(;o>0&&t[c]!=e[o];)o=i[o];t[c]==e[o]&&o++}return o}s(O6t,"overlapCount");var U$="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Q6t=new RegExp("[".concat(U$,"]+|\\s+|[^").concat(U$,"]"),"ug"),q$=new fg;q$.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};q$.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(Q6t)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};q$.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};q$.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&FQe(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&FQe(r,i,n,null),t};function FQe(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],c=r.value.match(/\s*$/)[0];if(t){var l=NQe(i,a);t.value=Vme(t.value,a,l),e.value=bM(e.value,l),r.value=bM(r.value,l)}if(n){var u=LQe(o,c);n.value=jme(n.value,c,u),e.value=Q$(e.value,u),r.value=Q$(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var f=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=NQe(f,p);e.value=bM(e.value,h);var g=LQe(bM(f,h),m);e.value=Q$(e.value,g),n.value=jme(n.value,f,g),t.value=Vme(t.value,f,f.slice(0,f.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],E=e.value.match(/\s*$/)[0],x=MQe(E,y);e.value=Q$(e.value,x)}else if(t){var b=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=MQe(b,_);e.value=bM(e.value,k)}}s(FQe,"dedupeWhitespaceInChangeObjects");var U6t=new fg;U6t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(U$,"]+|[^\\S\\n\\r]+|[^").concat(U$,"]"),"ug");return t.match(e)||[]};var Kme=new fg;Kme.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};Kme.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),fg.prototype.equals.call(this,t,e,r)};var q6t=new fg;q6t.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var H6t=new fg;H6t.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function $me(t){"@babel/helpers - typeof";return $me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$me(t)}s($me,"_typeof");var IM=new fg;IM.useLongestToken=!0;IM.tokenize=Kme.tokenize;IM.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(zme(t,null,null,i),i,"  ")};IM.equals=function(t,e,r){return fg.prototype.equals.call(IM,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function zme(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=zme(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),$me(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var c=[],l;for(l in t)Object.prototype.hasOwnProperty.call(t,l)&&c.push(l);for(c.sort(),o=0;o<c.length;o+=1)l=c[o],a[l]=zme(t[l],e,r,n,l);e.pop(),r.pop()}else a=t;return a}s(zme,"canonicalize");var Yme=new fg;Yme.tokenize=function(t){return t.slice()};Yme.join=Yme.removeEmpty=function(t){return t};var OQe=require("fs");async function QQe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let c=e,l=e/Math.min(4,o.size),u=[],f=Array.from(o.keys());f.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of f){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,E)=>y+E.node.extentRange.length,0);for(let y of m){if(c<=5)return u;pE(i);let E=y.node.extentRange.length/g,x=Math.min(c,E*l),b=(await G6t([y])).elide(x).getText();c-=n.tokenLength(b),u.push({uri:h,value:b})}}return u}s(QQe,"symbolRangesToCodeSnippets");async function G6t(t){if(t.length===0)return new Nt([]);let e=t[0].node.fileName,r=[],n="";try{let i=ls(e);i&&(n=(await OQe.promises.readFile(i)).toString())}catch{}for(let i of t)UQe(i,n).forEach(o=>r.push(o));return new Nt(r)}s(G6t,"sameFileSymbolRangeToElidableText");function UQe(t,e){let n=[],i=t.node,o=e.substring(Jme(e,i.commentRange.start),i.commentRange.end);n.push([Xme(o),1-3e-4]);let a=Jme(e,i.bodyRange.start),c=Jme(e,i.extentRange.start),l=i.bodyRange.length===0?e.substring(c,i.extentRange.end):e.substring(i.commentRange.length===0?c:i.commentRange.end,a);if($S(i.kind)&&(l="BEGIN "+l.trimStart()),n.push([Xme(l),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...UQe(u,e));else{let u=1-($S(t.node.kind)?3e-4:4e-4),f=e.substring(a,i.bodyRange.end);n.push([Xme(f),u])}return $S(i.kind)&&n.push(["END "+l.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(UQe,"prepareForElidableText");function Jme(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(Jme,"shiftLeftToNearestLineEndingOrAlphanumeric");function Xme(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(Xme,"trimLineEndingsAndTrailingWhitespace");var Zme=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=r}static{s(this,"ContextRetrievalStrategy")}},lI=class extends Zme{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let c=this.referenceExtractors.get(i);if(!c)return[];pE(a);let l=await c.extractReferences(e,r);pE(a);let u=Array.from(l);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let f=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>$S(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),f.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return f}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),c=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),l=s(p=>c(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=l(p),h=u.get(m)??[];u.set(m,[...h,p])}let f=[];for(let p of i){let m=u.get(c(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(f.length+m.length>r.mlcpMaxContextItems){f.push(...m.slice(0,r.mlcpMaxContextItems-f.length));break}f.push(...m)}}return f}async makeSymbolRangeNodeFromDefinition(e,r){if(pE(r),$S(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),c=Math.abs(r.extentRange.start-n);return a-c}},H$=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new lI(e,r,!0,!0)),this.strategies.set("java",new lI(e,r,!0,!0)),this.strategies.set("python",new lI(e,r,!0,!1)),this.strategies.set("typescript",new lI(e,r,!0,!0)),this.strategies.set("typescriptreact",new lI(e,r,!0,!0)),this.strategies.set("javascript",new lI(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,c){let l=await this.getContextAtPositionAsync(e,r,n,i,o,c);pE(c);let u=ho();return QQe(l,a,e,u,c)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};d();d();d();d();var ZS={Id:"id"},G0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Ji={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};d();d();var W$=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new ehe(ZS.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},TM=class t extends W${constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${G0.FilePath}');`]);this.fields=[new SM(G0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Df(G0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},wM=class t extends W${constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Ji.DocumentId}', '${Ji.ExtentStart}', '${Ji.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Ji.UnqualifiedName}');`],`FOREIGN KEY(${Ji.DocumentId}) REFERENCES Document(${ZS.Id}) ON DELETE CASCADE`);this.fields=[new Df(Ji.DocumentId),new SM(Ji.FullyQualifiedName,{notNull:!0}),new SM(Ji.UnqualifiedName,{notNull:!0}),new Df(Ji.CommentStart,{notNull:!0}),new Df(Ji.CommentLength,{notNull:!0}),new Df(Ji.NameStart,{notNull:!0}),new Df(Ji.NameLength,{notNull:!0}),new Df(Ji.BodyStart,{notNull:!0}),new Df(Ji.BodyLength,{notNull:!0}),new Df(Ji.ExtentStart,{notNull:!0}),new Df(Ji.ExtentLength,{notNull:!0}),new Df(Ji.SymbolKind,{notNull:!0}),new Df(Ji.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},_M=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},SM=class extends _M{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},Df=class extends _M{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},ehe=class extends _M{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var G$=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,c=>{c?a(c):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(c=>Object.values(c)).flat(),function(c){c?o(c):i(this)})})}async getAllRows(){let e=await this.init;return e?gm(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return gm(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${ZS.Id} = ?`,[e])}},mE=class t extends G${static{s(this,"DocumentTable")}static{this.tableName=TM.tableName}createQueryGenerator(){return new TM}async updateTimestamp(e,r){let n=await this.init;n&&await gm(n,`UPDATE ${t.tableName} SET ${G0.LastWriteTimeUtc} = ? WHERE ${G0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await gm(r,`DELETE FROM ${t.tableName} WHERE ${G0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?gm(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${G0.FilePath} = ?`,[e]):[]}},Dc=class t extends G${static{s(this,"SymbolTable")}static{this.tableName=wM.tableName}createQueryGenerator(){return new wM}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return gm(r,`DELETE FROM ${t.tableName} WHERE ${Ji.DocumentId} = ?`,[e])}};async function gm(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(gm,"runPromisifiedDBQuery");var $$=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${mE.tableName} ON ${Dc.tableName}.${Ji.DocumentId} = ${mE.tableName}.${ZS.Id}`;this.db=this.initDb(e),this.documentTable=new mE(this.db),this.symbolTable=new Dc(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>Ne(XQe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,c=>{c?o(c):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await gm(n,"pragma journal_mode=wal",[]),await gm(n,"pragma synchronous=normal",[]),await gm(n,"pragma optimize=0x10002",[]),await gm(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Ji.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${Ji.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${mE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} <= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${mE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.ExtentStart} >= ? AND (${Dc.tableName}.${Ji.ExtentStart} + ${Dc.tableName}.${Ji.ExtentLength}) <= ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Dc.tableName}`,this.innerJoinStatement,`WHERE ${mE.tableName}.${G0.FilePath} = ? AND ${Dc.tableName}.${Ji.FullyQualifiedName} LIKE ?`,`ORDER BY ${Dc.tableName}.${Ji.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,gm(n,e,r)):[]}};var z$=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new $$(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return i3(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let c=e.slice(a,a+500);a+=500;let l=await this.database.querySymbolsUsingUnqualifiedNames(c,r);i.push(...l),pE(n)}return i3(i)}async getDefinitionsAsync(e){return i3(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return i3(n)}async findSymbolsContainedByRangeAsync(e,r,n){return i3(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return i3(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function i3(t){return t.map(e=>new hm(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new bs(e.commentStart,e.commentLength),new bs(e.nameStart,e.nameLength),new bs(e.bodyStart,e.bodyLength),new bs(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s(i3,"symbolsToSymbolRanges");var K$=Ne(require("fs/promises"));var Y$=class{static{s(this,"Index")}constructor(e,r,n,i){this.storage=new z$(e),this.symbolExtractors=r,this.importExtractors=n,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=ls(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await K$.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let c=this.symbolExtractors.get(r);if(!c)return;let l=(await K$.readFile(n)).toString(),u=await c.extractSymbols(e,l),f=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(r);if(p){let m=await p.extractSymbols(e,l);f=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,f)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};d();function she(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>J6t(r))}s(she,"isIndexWorkerData");var kM=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},uI=class extends kM{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},J$=class extends kM{constructor(r){super(Yu.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},Yu={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},X$=class extends uI{constructor(r,n,i){super(r,Yu.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},Z$=class extends uI{constructor(r,n){super(r,Yu.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},ez=class extends uI{constructor(r,n,i){super(r,Yu.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},tz=class extends uI{constructor(r,n){super(r,Yu.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},rz=class extends uI{constructor(r,n,i,o,a,c){super(r,Yu.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=c}static{s(this,"GetContextRequest")}},nz=class extends uI{static{s(this,"ExitRequest")}constructor(e){super(e,Yu.Exit)}},pg=class extends kM{constructor(r,n,i){super(Yu.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function J6t(t){return"databaseFilePath"in t&&"rootPath"in t}s(J6t,"isIndexableWorkspaceFolder");var ZQe=Ne(di()),dI=require("worker_threads");var iz=class{static{s(this,"IndexInfo")}constructor(e,r){this.index=new Y$(e,N$,IQe,r),this.contextRetreival=new H$(this.index.reader,bQe)}},ahe=class t{constructor(e,r,n){this.indices=new Map;this.cancellationTokens=new Map;this.params=n;for(let i of r){let o=La(i.rootPath);this.indices.set(o,new iz(i.databaseFilePath,n))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new ZQe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case Yu.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case Yu.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case Yu.Cancel:n.get(e.id)?.cancel(),o=new pg(e.id,void 0,void 0);break;case Yu.Exit:o=await this.dispatchExit(e,r,i.token);break;case Yu.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case Yu.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case Yu.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new pg(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=La(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new pg(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new pg(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=La(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,c;return o?c=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new pg(e.id,a,c)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new pg(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new iz(e.databaseFilePath)),new pg(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=La(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new pg(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function eUe(){return she(dI.workerData)}s(eUe,"isIndexWorker");function tUe(){let t=dI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!she(dI.workerData))throw new Error("Worker data must provide a valid database path.");let e=dI.workerData.cwd;process.cwd=()=>e,new ahe(t,dI.workerData.indexWorkspaceRoots,dI.workerData.params)}s(tUe,"runIndexWorker");d();var PM=Ne(require("util"));function rUe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(sy(t)==="dev")return t.get(Tc).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",PM.format(...i)))},e.dir=(n,i)=>r(4,PM.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(PM.format(...n));i.name="Trace",e.log(i)},e}s(rUe,"createConsole");var Nv=Ne(require("fs/promises")),Imt=Ne(require("os")),zQ=Ne(require("path")),ph=Ne(hg()),Tmt=require("worker_threads");d();d();var Hz=require("assert");d();d();var uLt={right:hLt,center:gLt},dLt=0,Lz=1,fLt=2,Mz=3,Dhe=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&j0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),j0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=j0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,c)=>{let{width:l}=e[c],u=this.negatePadding(e[c]),f=a;if(u>j0.stringWidth(a)&&(f+=" ".repeat(u-j0.stringWidth(a))),e[c].align&&e[c].align!=="left"&&this.wrap){let m=uLt[e[c].align];f=m(f,u),j0.stringWidth(f)<u&&(f+=" ".repeat((l||0)-j0.stringWidth(f)-1))}let p=e[c].padding||[0,0,0,0];p[Mz]&&(o+=" ".repeat(p[Mz])),o+=KUe(e[c],f,"| "),o+=f,o+=KUe(e[c],f," |"),p[Lz]&&(o+=" ".repeat(p[Lz])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=j0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=j0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[dLt]||0).fill("")),i.push(...new Array(o.padding[fLt]||0).fill(""))),i.forEach((c,l)=>{r[l]||r.push([]);let u=r[l];for(let f=0;f<a;f++)u[f]===void 0&&u.push("");u.push(c)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[Mz]||0)+(e.padding[Lz]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||j0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,c)=>a===void 0?Math.max(o,pLt(e[c])):a)}};function KUe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(KUe,"addBorder");function pLt(t){let e=t.padding||[],r=1+(e[Mz]||0)+(e[Lz]||0);return t.border?r+4:r}s(pLt,"_minWidth");function mLt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(mLt,"getWindowWidth");function hLt(t,e){t=t.trim();let r=j0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(hLt,"alignRight");function gLt(t,e){t=t.trim();let r=j0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(gLt,"alignCenter");var j0;function JUe(t,e){return j0=e,new Dhe({width:t?.width||mLt(),wrap:t?.wrap})}s(JUe,"cliui");d();var XUe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Nhe(t){return t.replace(XUe,"")}s(Nhe,"stripAnsi");function ZUe(t,e){let[r,n]=t.match(XUe)||["",""];t=Nhe(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(ZUe,"wrap");function Lhe(t){return JUe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:Nhe,wrap:ZUe})}s(Lhe,"ui");d();var c3=require("path"),Fz=require("fs");function Mhe(t,e){let r=(0,c3.resolve)(".",t),n;for((0,Fz.statSync)(r).isDirectory()||(r=(0,c3.dirname)(r));;){if(n=e(r,(0,Fz.readdirSync)(r)),n)return(0,c3.resolve)(r,n);if(r=(0,c3.dirname)(n=r),n===r)break}}s(Mhe,"default");var hqe=require("util"),gqe=require("fs"),Aqe=require("url");d();var iqe=require("util"),qz=require("path");d();function n2(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(n2,"camelCase");function Oz(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(Oz,"decamelize");function Qz(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(Qz,"looksLikeNumber");d();d();function eqe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(eqe,"tokenizeArgString");d();var xm;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(xm||(xm={}));var hE,Uz=class{static{s(this,"YargsParser")}constructor(e){hE=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=eqe(e),o=typeof e=="string",a=ALt(Object.assign(Object.create(null),n.alias)),c=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),l=Object.assign(Object.create(null),n.default),u=n.configObjects||[],f=n.envPrefix,p=c["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||hE.format,E={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},x=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,b=new RegExp("^--"+c["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(ee){let oe=typeof ee=="object"?ee.key:ee,We=Object.keys(ee).map(function(De){return{boolean:"bools",string:"strings",number:"numbers"}[De]}).filter(Boolean).pop();We&&(E[We][oe]=!0),E.arrays[oe]=!0,E.keys.push(oe)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(ee){E.bools[ee]=!0,E.keys.push(ee)}),[].concat(n.string||[]).filter(Boolean).forEach(function(ee){E.strings[ee]=!0,E.keys.push(ee)}),[].concat(n.number||[]).filter(Boolean).forEach(function(ee){E.numbers[ee]=!0,E.keys.push(ee)}),[].concat(n.count||[]).filter(Boolean).forEach(function(ee){E.counts[ee]=!0,E.keys.push(ee)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(ee){E.normalize[ee]=!0,E.keys.push(ee)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([ee,oe])=>{typeof oe=="number"&&(E.nargs[ee]=oe,E.keys.push(ee))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([ee,oe])=>{typeof oe=="function"&&(E.coercions[ee]=oe,E.keys.push(ee))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(ee){E.configs[ee]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([ee,oe])=>{(typeof oe=="boolean"||typeof oe=="function")&&(E.configs[ee]=oe)})),Qe(n.key,a,n.default,E.arrays),Object.keys(l).forEach(function(ee){(E.aliases[ee]||[]).forEach(function(oe){l[oe]=l[ee]})});let _=null;nt();let k=[],P=Object.assign(Object.create(null),{_:[]}),N={};for(let ee=0;ee<i.length;ee++){let oe=i[ee],We=oe.replace(/^-{3,}/,"---"),De,xe,Ye,st,yt,qt;if(oe!=="--"&&/^-/.test(oe)&&St(oe))M(oe);else if(We.match(/^---+(=|$)/)){M(oe);continue}else if(oe.match(/^--.+=/)||!c["short-option-groups"]&&oe.match(/^-.+=/))st=oe.match(/^--?([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&(ke(st[1],E.arrays)?ee=pe(ee,st[1],i,st[2]):ke(st[1],E.nargs)!==!1?ee=J(ee,st[1],i,st[2]):Y(st[1],st[2],!0));else if(oe.match(b)&&c["boolean-negation"])st=oe.match(b),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],Y(xe,ke(xe,E.arrays)?[!1]:!1));else if(oe.match(/^--.+/)||!c["short-option-groups"]&&oe.match(/^-[^-]+/))st=oe.match(/^--?(.+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],ke(xe,E.arrays)?ee=pe(ee,xe,i):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i):(yt=i[ee+1],yt!==void 0&&(!yt.match(/^-/)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(Y(xe,yt),ee++):Y(xe,Tt(xe))));else if(oe.match(/^-.\..+=/))st=oe.match(/^-([^=]+)=([\s\S]*)$/),st!==null&&Array.isArray(st)&&st.length>=3&&Y(st[1],st[2]);else if(oe.match(/^-.\..+/)&&!oe.match(x))yt=i[ee+1],st=oe.match(/^-(.\..+)/),st!==null&&Array.isArray(st)&&st.length>=2&&(xe=st[1],yt!==void 0&&!yt.match(/^-/)&&!ke(xe,E.bools)&&!ke(xe,E.counts)?(Y(xe,yt),ee++):Y(xe,Tt(xe)));else if(oe.match(/^-[^-]+/)&&!oe.match(x)){Ye=oe.slice(1,-1).split(""),De=!1;for(let dr=0;dr<Ye.length;dr++){if(yt=oe.slice(dr+2),Ye[dr+1]&&Ye[dr+1]==="="){qt=oe.slice(dr+3),xe=Ye[dr],ke(xe,E.arrays)?ee=pe(ee,xe,i,qt):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i,qt):Y(xe,qt),De=!0;break}if(yt==="-"){Y(Ye[dr],yt);continue}if(/[A-Za-z]/.test(Ye[dr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(yt)&&ke(yt,E.bools)===!1){Y(Ye[dr],yt),De=!0;break}if(Ye[dr+1]&&Ye[dr+1].match(/\W/)){Y(Ye[dr],yt),De=!0;break}else Y(Ye[dr],Tt(Ye[dr]))}xe=oe.slice(-1)[0],!De&&xe!=="-"&&(ke(xe,E.arrays)?ee=pe(ee,xe,i):ke(xe,E.nargs)!==!1?ee=J(ee,xe,i):(yt=i[ee+1],yt!==void 0&&(!/^(-|--)[^-]/.test(yt)||yt.match(x))&&!ke(xe,E.bools)&&!ke(xe,E.counts)||/^(true|false)$/.test(yt)?(Y(xe,yt),ee++):Y(xe,Tt(xe))))}else if(oe.match(/^-[0-9]$/)&&oe.match(x)&&ke(oe.slice(1),E.bools))xe=oe.slice(1),Y(xe,Tt(xe));else if(oe==="--"){k=i.slice(ee+1);break}else if(c["halt-at-non-option"]){k=i.slice(ee);break}else M(oe)}z(P,!0),z(P,!1),ie(P),Q(),ne(P,E.aliases,l,!0),re(P),c["set-placeholder-key"]&&fe(P),Object.keys(E.counts).forEach(function(ee){me(P,ee.split("."))||Y(ee,0)}),p&&k.length&&(P[m]=[]),k.forEach(function(ee){P[m].push(ee)}),c["camel-case-expansion"]&&c["strip-dashed"]&&Object.keys(P).filter(ee=>ee!=="--"&&ee.includes("-")).forEach(ee=>{delete P[ee]}),c["strip-aliased"]&&[].concat(...Object.keys(a).map(ee=>a[ee])).forEach(ee=>{c["camel-case-expansion"]&&ee.includes("-")&&delete P[ee.split(".").map(oe=>n2(oe)).join(".")],delete P[ee]});function M(ee){let oe=ce("_",ee);(typeof oe=="string"||typeof oe=="number")&&P._.push(oe)}s(M,"pushPositional");function J(ee,oe,We,De){let xe,Ye=ke(oe,E.nargs);if(Ye=typeof Ye!="number"||isNaN(Ye)?1:Ye,Ye===0)return ye(De)||(_=Error(y("Argument unexpected for: %s",oe))),Y(oe,Tt(oe)),ee;let st=ye(De)?0:1;if(c["nargs-eats-options"])We.length-(ee+1)+st<Ye&&(_=Error(y("Not enough arguments following: %s",oe))),st=Ye;else{for(xe=ee+1;xe<We.length&&(!We[xe].match(/^-[^0-9]/)||We[xe].match(x)||St(We[xe]));xe++)st++;st<Ye&&(_=Error(y("Not enough arguments following: %s",oe)))}let yt=Math.min(st,Ye);for(!ye(De)&&yt>0&&(Y(oe,De),yt--),xe=ee+1;xe<yt+ee+1;xe++)Y(oe,We[xe]);return ee+yt}s(J,"eatNargs");function pe(ee,oe,We,De){let xe=[],Ye=De||We[ee+1],st=ke(oe,E.nargs);if(ke(oe,E.bools)&&!/^(true|false)$/.test(Ye))xe.push(!0);else if(ye(Ye)||ye(De)&&/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)){if(l[oe]!==void 0){let yt=l[oe];xe=Array.isArray(yt)?yt:[yt]}}else{ye(De)||xe.push(H(oe,De,!0));for(let yt=ee+1;yt<We.length&&!(!c["greedy-arrays"]&&xe.length>0||st&&typeof st=="number"&&xe.length>=st||(Ye=We[yt],/^-/.test(Ye)&&!x.test(Ye)&&!St(Ye)));yt++)ee=yt,xe.push(H(oe,Ye,o))}return typeof st=="number"&&(st&&xe.length<st||isNaN(st)&&xe.length===0)&&(_=Error(y("Not enough arguments following: %s",oe))),Y(oe,xe),ee}s(pe,"eatArray");function Y(ee,oe,We=o){if(/-/.test(ee)&&c["camel-case-expansion"]){let Ye=ee.split(".").map(function(st){return n2(st)}).join(".");G(ee,Ye)}let De=H(ee,oe,We),xe=ee.split(".");he(P,xe,De),E.aliases[ee]&&E.aliases[ee].forEach(function(Ye){let st=Ye.split(".");he(P,st,De)}),xe.length>1&&c["dot-notation"]&&(E.aliases[xe[0]]||[]).forEach(function(Ye){let st=Ye.split("."),yt=[].concat(xe);yt.shift(),st=st.concat(yt),(E.aliases[ee]||[]).includes(st.join("."))||he(P,st,De)}),ke(ee,E.normalize)&&!ke(ee,E.arrays)&&[ee].concat(E.aliases[ee]||[]).forEach(function(st){Object.defineProperty(N,st,{enumerable:!0,get(){return oe},set(yt){oe=typeof yt=="string"?hE.normalize(yt):yt}})})}s(Y,"setArg");function G(ee,oe){E.aliases[ee]&&E.aliases[ee].length||(E.aliases[ee]=[oe],h[oe]=!0),E.aliases[oe]&&E.aliases[oe].length||G(oe,ee)}s(G,"addNewAlias");function H(ee,oe,We){We&&(oe=yLt(oe)),(ke(ee,E.bools)||ke(ee,E.counts))&&typeof oe=="string"&&(oe=oe==="true");let De=Array.isArray(oe)?oe.map(function(xe){return ce(ee,xe)}):ce(ee,oe);return ke(ee,E.counts)&&(ye(De)||typeof De=="boolean")&&(De=Fhe()),ke(ee,E.normalize)&&ke(ee,E.arrays)&&(Array.isArray(oe)?De=oe.map(xe=>hE.normalize(xe)):De=hE.normalize(oe)),De}s(H,"processValue");function ce(ee,oe){return!c["parse-positional-numbers"]&&ee==="_"||!ke(ee,E.strings)&&!ke(ee,E.bools)&&!Array.isArray(oe)&&(Qz(oe)&&c["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${oe}`)))||!ye(oe)&&ke(ee,E.numbers))&&(oe=Number(oe)),oe}s(ce,"maybeCoerceNumber");function ie(ee){let oe=Object.create(null);ne(oe,E.aliases,l),Object.keys(E.configs).forEach(function(We){let De=ee[We]||oe[We];if(De)try{let xe=null,Ye=hE.resolve(hE.cwd(),De),st=E.configs[We];if(typeof st=="function"){try{xe=st(Ye)}catch(yt){xe=yt}if(xe instanceof Error){_=xe;return}}else xe=hE.require(Ye);V(xe)}catch(xe){xe.name==="PermissionDenied"?_=xe:ee[We]&&(_=Error(y("Invalid JSON config file: %s",De)))}})}s(ie,"setConfig");function V(ee,oe){Object.keys(ee).forEach(function(We){let De=ee[We],xe=oe?oe+"."+We:We;typeof De=="object"&&De!==null&&!Array.isArray(De)&&c["dot-notation"]?V(De,xe):(!me(P,xe.split("."))||ke(xe,E.arrays)&&c["combine-arrays"])&&Y(xe,De)})}s(V,"setConfigObject");function Q(){typeof u<"u"&&u.forEach(function(ee){V(ee)})}s(Q,"setConfigObjects");function z(ee,oe){if(typeof f>"u")return;let We=typeof f=="string"?f:"",De=hE.env();Object.keys(De).forEach(function(xe){if(We===""||xe.lastIndexOf(We,0)===0){let Ye=xe.split("__").map(function(st,yt){return yt===0&&(st=st.substring(We.length)),n2(st)});(oe&&E.configs[Ye.join(".")]||!oe)&&!me(ee,Ye)&&Y(Ye.join("."),De[xe])}})}s(z,"applyEnvVars");function re(ee){let oe,We=new Set;Object.keys(ee).forEach(function(De){if(!We.has(De)&&(oe=ke(De,E.coercions),typeof oe=="function"))try{let xe=ce(De,oe(ee[De]));[].concat(E.aliases[De]||[],De).forEach(Ye=>{We.add(Ye),ee[Ye]=xe})}catch(xe){_=xe}})}s(re,"applyCoercions");function fe(ee){return E.keys.forEach(oe=>{~oe.indexOf(".")||typeof ee[oe]>"u"&&(ee[oe]=void 0)}),ee}s(fe,"setPlaceholderKeys");function ne(ee,oe,We,De=!1){Object.keys(We).forEach(function(xe){me(ee,xe.split("."))||(he(ee,xe.split("."),We[xe]),De&&(g[xe]=!0),(oe[xe]||[]).forEach(function(Ye){me(ee,Ye.split("."))||he(ee,Ye.split("."),We[xe])}))})}s(ne,"applyDefaultsAndAliases");function me(ee,oe){let We=ee;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(xe){We=We[xe]||{}});let De=oe[oe.length-1];return typeof We!="object"?!1:De in We}s(me,"hasKey");function he(ee,oe,We){let De=ee;c["dot-notation"]||(oe=[oe.join(".")]),oe.slice(0,-1).forEach(function(qt){qt=tqe(qt),typeof De=="object"&&De[qt]===void 0&&(De[qt]={}),typeof De[qt]!="object"||Array.isArray(De[qt])?(Array.isArray(De[qt])?De[qt].push({}):De[qt]=[De[qt],{}],De=De[qt][De[qt].length-1]):De=De[qt]});let xe=tqe(oe[oe.length-1]),Ye=ke(oe.join("."),E.arrays),st=Array.isArray(We),yt=c["duplicate-arguments-array"];!yt&&ke(xe,E.nargs)&&(yt=!0,(!ye(De[xe])&&E.nargs[xe]===1||Array.isArray(De[xe])&&De[xe].length===E.nargs[xe])&&(De[xe]=void 0)),We===Fhe()?De[xe]=Fhe(De[xe]):Array.isArray(De[xe])?yt&&Ye&&st?De[xe]=c["flatten-duplicate-arrays"]?De[xe].concat(We):(Array.isArray(De[xe][0])?De[xe]:[De[xe]]).concat([We]):!yt&&!!Ye==!!st?De[xe]=We:De[xe]=De[xe].concat([We]):De[xe]===void 0&&Ye?De[xe]=st?We:[We]:yt&&!(De[xe]===void 0||ke(xe,E.counts)||ke(xe,E.bools))?De[xe]=[De[xe],We]:De[xe]=We}s(he,"setKey");function Qe(...ee){ee.forEach(function(oe){Object.keys(oe||{}).forEach(function(We){E.aliases[We]||(E.aliases[We]=[].concat(a[We]||[]),E.aliases[We].concat(We).forEach(function(De){if(/-/.test(De)&&c["camel-case-expansion"]){let xe=n2(De);xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].concat(We).forEach(function(De){if(De.length>1&&/[A-Z]/.test(De)&&c["camel-case-expansion"]){let xe=Oz(De,"-");xe!==We&&E.aliases[We].indexOf(xe)===-1&&(E.aliases[We].push(xe),h[xe]=!0)}}),E.aliases[We].forEach(function(De){E.aliases[De]=[We].concat(E.aliases[We].filter(function(xe){return De!==xe}))}))})})}s(Qe,"extendAliases");function ke(ee,oe){let We=[].concat(E.aliases[ee]||[],ee),De=Object.keys(oe),xe=We.find(Ye=>De.includes(Ye));return xe?oe[xe]:!1}s(ke,"checkAllAliases");function tt(ee){let oe=Object.keys(E);return[].concat(oe.map(De=>E[De])).some(function(De){return Array.isArray(De)?De.includes(ee):De[ee]})}s(tt,"hasAnyFlag");function Fe(ee,...oe){return[].concat(...oe).some(function(De){let xe=ee.match(De);return xe&&tt(xe[1])})}s(Fe,"hasFlagsMatching");function ht(ee){if(ee.match(x)||!ee.match(/^-[^-]+/))return!1;let oe=!0,We,De=ee.slice(1).split("");for(let xe=0;xe<De.length;xe++){if(We=ee.slice(xe+2),!tt(De[xe])){oe=!1;break}if(De[xe+1]&&De[xe+1]==="="||We==="-"||/[A-Za-z]/.test(De[xe])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||De[xe+1]&&De[xe+1].match(/\W/))break}return oe}s(ht,"hasAllShortFlags");function St(ee){return c["unknown-options-as-args"]&&xt(ee)}s(St,"isUnknownOptionAsArg");function xt(ee){return ee=ee.replace(/^-{3,}/,"--"),ee.match(x)||ht(ee)?!1:!Fe(ee,/^-+([^=]+?)=[\s\S]*$/,b,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(xt,"isUnknownOption");function Tt(ee){return!ke(ee,E.bools)&&!ke(ee,E.counts)&&`${ee}`in l?l[ee]:le(Ue(ee))}s(Tt,"defaultValue");function le(ee){return{[xm.BOOLEAN]:!0,[xm.STRING]:"",[xm.NUMBER]:void 0,[xm.ARRAY]:[]}[ee]}s(le,"defaultForType");function Ue(ee){let oe=xm.BOOLEAN;return ke(ee,E.strings)?oe=xm.STRING:ke(ee,E.numbers)?oe=xm.NUMBER:ke(ee,E.bools)?oe=xm.BOOLEAN:ke(ee,E.arrays)&&(oe=xm.ARRAY),oe}s(Ue,"guessType");function ye(ee){return ee===void 0}s(ye,"isUndefined");function nt(){Object.keys(E.counts).find(ee=>ke(ee,E.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",ee)),!0):ke(ee,E.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",ee)),!0):!1)}return s(nt,"checkConfiguration"),{aliases:Object.assign({},E.aliases),argv:Object.assign(N,P),configuration:c,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function ALt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(c){return e[o].indexOf(c)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,c,l){return l.indexOf(a)===c});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(ALt,"combineAliases");function Fhe(t){return t!==void 0?t+1:1}s(Fhe,"increment");function tqe(t){return t==="__proto__"?"___proto___":t}s(tqe,"sanitizeKey");function yLt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(yLt,"stripQuotes");var oqe=require("fs");var Ohe,Qhe,Uhe,rqe=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,nqe=(Qhe=(Ohe=process==null?void 0:process.versions)===null||Ohe===void 0?void 0:Ohe.node)!==null&&Qhe!==void 0?Qhe:(Uhe=process==null?void 0:process.version)===null||Uhe===void 0?void 0:Uhe.slice(1);if(nqe&&Number(nqe.match(/^([^.]+)/)[1])<rqe)throw Error(`yargs parser supports a minimum Node.js version of ${rqe}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var CLt=process?process.env:{},sqe=new Uz({cwd:process.cwd,env:s(()=>CLt,"env"),format:iqe.format,normalize:qz.normalize,resolve:qz.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,oqe.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),OM=s(function(e,r){return sqe.parse(e.slice(),r).argv},"Parser");OM.detailed=function(t,e){return sqe.parse(t.slice(),e)};OM.camelCase=n2;OM.decamelize=Oz;OM.looksLikeNumber=Qz;var aqe=OM;var Ag=require("path");d();function ELt(){return vLt()?0:1}s(ELt,"getProcessArgvBinIndex");function vLt(){return xLt()&&!process.defaultApp}s(vLt,"isBundledElectronApp");function xLt(){return!!process.versions.electron}s(xLt,"isElectronApp");function cqe(){return process.argv[ELt()]}s(cqe,"getProcessArgvBin");d();var Hs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};d();d();var l3=require("fs"),lqe=require("util"),uqe=require("path");var dqe={fs:{readFileSync:l3.readFileSync,writeFile:l3.writeFile},format:lqe.format,resolve:uqe.resolve,exists:s(t=>{try{return(0,l3.statSync)(t).isFile()}catch{return!1}},"exists")};d();var gg,qhe=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),gg.format.apply(gg.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let c=[a];return~a.indexOf("%d")&&c.push(i),gg.format.apply(gg.format,c.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),c=JSON.stringify(this.cache[i],null,2);gg.fs.writeFile(a,c,"utf-8",function(l){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(l)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{gg.fs.readFileSync&&(e=JSON.parse(gg.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=gg.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=gg.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return gg.exists(e)}};function fqe(t,e){gg=e;let r=new qhe(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(fqe,"y18n");var bLt=s(t=>fqe(t,dqe),"y18n"),pqe=bLt;var ILt="require is not supported by ESM",mqe="loading a directory of commands is not supported yet for ESM",QM;try{QM=(0,Aqe.fileURLToPath)(importMetaUrlShim)}catch{QM=process.cwd()}var TLt=QM.substring(0,QM.lastIndexOf("node_modules")),yqe={assert:{notStrictEqual:Hz.notStrictEqual,strictEqual:Hz.strictEqual},cliui:Lhe,findUp:Mhe,getEnv:s(t=>process.env[t],"getEnv"),inspect:hqe.inspect,getCallerFile:s(()=>{throw new Hs(mqe)},"getCallerFile"),getProcessArgvBin:cqe,mainFilename:TLt||process.cwd(),Parser:aqe,path:{basename:Ag.basename,dirname:Ag.dirname,extname:Ag.extname,relative:Ag.relative,resolve:Ag.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:gqe.readFileSync,require:s(()=>{throw new Hs(ILt)},"require"),requireDirectory:s(()=>{throw new Hs(mqe)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:pqe({directory:(0,Ag.resolve)(QM,"../../../locales"),updateFiles:!1})};d();d();d();function Md(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(Md,"assertNotStrictEqual");function Hhe(t,e){e.assert.strictEqual(typeof t,"string")}s(Hhe,"assertSingleKey");function u3(t){return Object.keys(t)}s(u3,"objectKeys");d();function Ws(t){return!!t&&!!t.then&&typeof t.then=="function"}s(Ws,"isPromise");d();d();d();function hI(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,c)=>{let l=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&c===r.length-1&&(l=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:l}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:l})}),o}s(hI,"parseCommand");var wLt=["first","second","third","fourth","fifth","sixth"];function br(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[hI(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,c]=n(),l=[].slice.call(a);for(;l.length&&l[l.length-1]===void 0;)l.pop();let u=c||l.length;if(u<o.demanded.length)throw new Hs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${l.length}.`);let f=o.demanded.length+o.optional.length;if(u>f)throw new Hs(`Too many arguments provided. Expected max ${f} but received ${u}.`);o.demanded.forEach(p=>{let m=l.shift(),h=Cqe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&Eqe(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(l.length===0)return;let m=l.shift(),h=Cqe(m);p.cmd.filter(y=>y===h||y==="*").length===0&&Eqe(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(br,"argsert");function Cqe(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(Cqe,"guessType");function Eqe(t,e,r){throw new Hs(`Invalid ${wLt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(Eqe,"argumentTypeError");var Wz=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(br("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function vqe(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(vqe,"commandMiddlewareFactory");function i2(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(Ws(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,c])=>Object.assign(a,c));{let a=o(i,e);return Ws(a)?a.then(c=>Object.assign(i,c)):Object.assign(i,a)}},t)}s(i2,"applyMiddleware");d();function o2(t,e,r=n=>{throw n}){try{let n=_Lt(t)?t():t;return Ws(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(o2,"maybeAsyncResult");function _Lt(t){return typeof t=="function"}s(_Lt,"isFunction");d();function Whe(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(Whe,"whichModule");var d3=/(^\*)|(^\$0)/,Ghe=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,c,l)=>{let u=o(a,c,l);if(u){if(this.requireCache.has(c))return u;this.requireCache.add(c),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let c=[],l=vqe(o);if(i=i||(()=>{}),Array.isArray(e))if(SLt(e))[e,...c]=e;else for(let u of e)this.addHandler(u);else if(kLt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(xqe(n)){this.addHandler([e].concat(c),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=hI(e);c=c.map(m=>hI(m).cmd);let f=!1,p=[u.cmd].concat(c).filter(m=>d3.test(m)?(f=!0,!1):!0);p.length===0&&f&&p.push("$0"),f&&(u.cmd=p[0],c=p.slice(1),e=e.replace(d3,u.cmd)),c.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,f,c,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:l,deprecated:a,demanded:u.demanded,optional:u.optional},f&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let c=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,l=r.getInternalMethods().getContext(),u=l.commands.slice(),f=!e;e&&(l.commands.push(e),l.fullCommands.push(c.original));let p=this.applyBuilderUpdateUsageAndParse(f,c,r,n.aliases,u,i,o,a);return Ws(p)?p.then(m=>this.applyMiddlewareAndGetResult(f,c,m.innerArgv,l,o,m.aliases,r)):this.applyMiddlewareAndGetResult(f,c,p.innerArgv,l,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,c,l){let u=r.builder,f=n;if(Gz(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),l);if(Ws(p))return p.then(m=>(f=Iqe(m)?m:n,this.parseAndUpdateUsage(e,r,f,o,a,c)))}else RLt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),f=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{f.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,f,o,a,c)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let c=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return Ws(c)?c.then(l=>({aliases:n.parsed.aliases,innerArgv:l})):{aliases:n.parsed.aliases,innerArgv:c}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=d3.test(r.original)?r.original.replace(d3,"").trim():r.original,i=e.filter(o=>!d3.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,c,l){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,l,a.parsed.error,e);n=o2(n,f=>(u(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=i2(n,a,c,!1),n=o2(n,f=>{let p=r.handler(f);return Ws(p)?p.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Ws(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,c){let l={};if(o)return n;c.getInternalMethods().getHasOutput()||(l=this.populatePositionals(r,n,i,c));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),f=i2(n,c,u,!0);return Ws(f)?f.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,c,u,l)):this.handleValidationAndGetResult(e,r,f,i,a,c,u,l)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),c={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let l=o.shift();this.populatePositional(l,r,c)}for(;a.length;){let l=a.shift();this.populatePositional(l,r,c)}return r._=n.commands.concat(r._.map(l=>""+l)),this.postProcessPositionals(r,c,this.cmdToParseOptions(e.original),i),c}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=hI(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(f=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(f)})}),!a.length)return;let c=Object.assign({},o.configuration,{"populate--":!1}),l=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:c}));if(l.error)i.getInternalMethods().getUsageInstance().fail(l.error.message,l.error);else{let u=Object.keys(r);Object.keys(r).forEach(f=>{u.push(...l.aliases[f])}),Object.keys(l.argv).forEach(f=>{u.includes(f)&&(r[f]||(r[f]=l.argv[f]),!this.isInConfigs(i,f)&&!this.isDefaulted(i,f)&&Object.prototype.hasOwnProperty.call(e,f)&&Object.prototype.hasOwnProperty.call(l.argv,f)&&(Array.isArray(e[f])||Array.isArray(l.argv[f]))?e[f]=[].concat(e[f],l.argv[f]):e[f]=l.argv[f])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=d3.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(Gz(r))return r(e,!0);xqe(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=Whe(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Md(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Md(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function bqe(t,e,r,n){return new Ghe(t,e,r,n)}s(bqe,"command");function xqe(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(xqe,"isCommandBuilderDefinition");function SLt(t){return t.every(e=>typeof e=="string")}s(SLt,"isCommandAndAliases");function Gz(t){return typeof t=="function"}s(Gz,"isCommandBuilderCallback");function RLt(t){return typeof t=="object"}s(RLt,"isCommandBuilderOptionDefinitions");function kLt(t){return typeof t=="object"&&!Array.isArray(t)}s(kLt,"isCommandHandlerDefinition");d();d();function gI(t={},e=()=>!0){let r={};return u3(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(gI,"objFilter");d();function AI(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(AI,"setBlocking");function PLt(t){return typeof t=="boolean"}s(PLt,"isBoolean");function wqe(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(H){i.push(H)},"failFn");let o=null,a=null,c=!0;n.showHelpOnFail=s(function(H=!0,ce){let[ie,V]=typeof H=="string"?[!0,H]:[H,ce];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,c=ie,n},"showHelpOnFailFn");let l=!1;n.fail=s(function(H,ce){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let Q=i[V];if(PLt(Q)){if(ce)throw ce;if(H)throw Error(H)}else Q(H,ce,n)}else{if(t.getExitProcess()&&AI(!0),!l){l=!0,c&&(t.showHelp("error"),ie.error()),(H||ce)&&ie.error(H||ce);let V=o||a;V&&((H||ce)&&ie.error(""),ie.error(V))}if(ce=ce||new Hs(H),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ce);throw ce}},"fail");let u=[],f=!1;n.usage=(G,H)=>G===null?(f=!0,u=[],n):(f=!1,u.push([G,H||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>f,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(G,H)=>{p.push([G,H||""])};let m=[];n.command=s(function(H,ce,ie,V,Q=!1){ie&&(m=m.map(z=>(z[2]=!1,z))),m.push([H,ce||"",ie,V,Q])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(H,ce){Array.isArray(H)?H.forEach(ie=>{n.describe(ie,ce)}):typeof H=="object"?Object.keys(H).forEach(ie=>{n.describe(ie,H[ie])}):h[H]=ce},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=G=>{g.push(G)};let y=!1,E;n.wrap=G=>{y=!0,E=G},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(E=J(),y=!0),E);let x="__yargsString__:";n.deferY18nLookup=G=>x+G,n.help=s(function(){if(k)return k;_();let H=t.customScriptName?t.$0:e.path.basename(t.$0),ce=t.getDemandedOptions(),ie=t.getDemandedCommands(),V=t.getDeprecatedOptions(),Q=t.getGroups(),z=t.getOptions(),re=[];re=re.concat(Object.keys(h)),re=re.concat(Object.keys(ce)),re=re.concat(Object.keys(ie)),re=re.concat(Object.keys(z.default)),re=re.filter(N),re=Object.keys(re.reduce((Fe,ht)=>(ht!=="_"&&(Fe[ht]=!0),Fe),{}));let fe=n.getWrap(),ne=e.cliui({width:fe,wrap:!!fe});if(!f){if(u.length)u.forEach(Fe=>{ne.div({text:`${Fe[0].replace(/\$0/g,H)}`}),Fe[1]&&ne.div({text:`${Fe[1]}`,padding:[1,0,0,0]})}),ne.div();else if(m.length){let Fe=null;ie._?Fe=`${H} <${r("command")}>
`:Fe=`${H} [${r("command")}]
`,ne.div(`${Fe}`)}}if(m.length>1||m.length===1&&!m[0][2]){ne.div(r("Commands:"));let Fe=t.getInternalMethods().getContext(),ht=Fe.commands.length?`${Fe.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((xt,Tt)=>xt[0].localeCompare(Tt[0])));let St=H?`${H} `:"";m.forEach(xt=>{let Tt=`${St}${ht}${xt[0].replace(/^\$0 ?/,"")}`;ne.span({text:Tt,padding:[0,2,0,2],width:b(m,fe,`${H}${ht}`)+4},{text:xt[1]});let le=[];xt[2]&&le.push(`[${r("default")}]`),xt[3]&&xt[3].length&&le.push(`[${r("aliases:")} ${xt[3].join(", ")}]`),xt[4]&&(typeof xt[4]=="string"?le.push(`[${r("deprecated: %s",xt[4])}]`):le.push(`[${r("deprecated")}]`)),le.length?ne.div({text:le.join(" "),padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}let me=(Object.keys(z.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);re=re.filter(Fe=>!t.parsed.newAliases[Fe]&&me.every(ht=>(z.alias[ht]||[]).indexOf(Fe)===-1));let he=r("Options:");Q[he]||(Q[he]=[]),P(re,z.alias,Q,he);let Qe=s(Fe=>/^--/.test(jz(Fe)),"isLongSwitch"),ke=Object.keys(Q).filter(Fe=>Q[Fe].length>0).map(Fe=>{let ht=Q[Fe].filter(N).map(St=>{if(me.includes(St))return St;for(let xt=0,Tt;(Tt=me[xt])!==void 0;xt++)if((z.alias[Tt]||[]).includes(St))return Tt;return St});return{groupName:Fe,normalizedKeys:ht}}).filter(({normalizedKeys:Fe})=>Fe.length>0).map(({groupName:Fe,normalizedKeys:ht})=>{let St=ht.reduce((xt,Tt)=>(xt[Tt]=[Tt].concat(z.alias[Tt]||[]).map(le=>Fe===n.getPositionalGroupName()?le:(/^[0-9]$/.test(le)?z.boolean.includes(Tt)?"-":"--":le.length>1?"--":"-")+le).sort((le,Ue)=>Qe(le)===Qe(Ue)?0:Qe(le)?1:-1).join(", "),xt),{});return{groupName:Fe,normalizedKeys:ht,switches:St}});if(ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).some(({normalizedKeys:Fe,switches:ht})=>!Fe.every(St=>Qe(ht[St])))&&ke.filter(({groupName:Fe})=>Fe!==n.getPositionalGroupName()).forEach(({normalizedKeys:Fe,switches:ht})=>{Fe.forEach(St=>{Qe(ht[St])&&(ht[St]=BLt(ht[St],4))})}),ke.forEach(({groupName:Fe,normalizedKeys:ht,switches:St})=>{ne.div(Fe),ht.forEach(xt=>{let Tt=St[xt],le=h[xt]||"",Ue=null;le.includes(x)&&(le=r(le.substring(x.length))),z.boolean.includes(xt)&&(Ue=`[${r("boolean")}]`),z.count.includes(xt)&&(Ue=`[${r("count")}]`),z.string.includes(xt)&&(Ue=`[${r("string")}]`),z.normalize.includes(xt)&&(Ue=`[${r("string")}]`),z.array.includes(xt)&&(Ue=`[${r("array")}]`),z.number.includes(xt)&&(Ue=`[${r("number")}]`);let ye=s(oe=>typeof oe=="string"?`[${r("deprecated: %s",oe)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),nt=[xt in V?ye(V[xt]):null,Ue,xt in ce?`[${r("required")}]`:null,z.choices&&z.choices[xt]?`[${r("choices:")} ${n.stringifiedValues(z.choices[xt])}]`:null,M(z.default[xt],z.defaultDescription[xt])].filter(Boolean).join(" ");ne.span({text:jz(Tt),padding:[0,2,0,2+Tqe(Tt)],width:b(St,fe)+4},le);let ee=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;nt&&!ee?ne.div({text:nt,padding:[0,0,0,2],align:"right"}):ne.div()}),ne.div()}),p.length&&(ne.div(r("Examples:")),p.forEach(Fe=>{Fe[0]=Fe[0].replace(/\$0/g,H)}),p.forEach(Fe=>{Fe[1]===""?ne.div({text:Fe[0],padding:[0,2,0,2]}):ne.div({text:Fe[0],padding:[0,2,0,2],width:b(p,fe)+4},{text:Fe[1]})}),ne.div()),g.length>0){let Fe=g.map(ht=>ht.replace(/\$0/g,H)).join(`
`);ne.div(`${Fe}
`)}return ne.toString().replace(/\s*$/,"")},"help");function b(G,H,ce){let ie=0;return Array.isArray(G)||(G=Object.values(G).map(V=>[V])),G.forEach(V=>{ie=Math.max(e.stringWidth(ce?`${ce} ${jz(V[0])}`:jz(V[0]))+Tqe(V[0]),ie)}),H&&(ie=Math.min(ie,parseInt((H*.5).toString(),10))),ie}s(b,"maxWidth");function _(){let G=t.getDemandedOptions(),H=t.getOptions();(Object.keys(H.alias)||[]).forEach(ce=>{H.alias[ce].forEach(ie=>{h[ie]&&n.describe(ce,h[ie]),ie in G&&t.demandOption(ce,G[ie]),H.boolean.includes(ie)&&t.boolean(ce),H.count.includes(ie)&&t.count(ce),H.string.includes(ie)&&t.string(ce),H.normalize.includes(ie)&&t.normalize(ce),H.array.includes(ie)&&t.array(ce),H.number.includes(ie)&&t.number(ce)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function P(G,H,ce,ie){let V=[],Q=null;return Object.keys(ce).forEach(z=>{V=V.concat(ce[z])}),G.forEach(z=>{Q=[z].concat(H[z]),Q.some(re=>V.indexOf(re)!==-1)||ce[ie].push(z)}),V}s(P,"addUngroupedKeys");function N(G){return t.getOptions().hiddenOptions.indexOf(G)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=G=>{let H=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:H[G])(n.help())},n.functionDescription=G=>["(",G.name?e.Parser.decamelize(G.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(H,ce){let ie="",V=ce||", ",Q=[].concat(H);return!H||!Q.length||Q.forEach(z=>{ie.length&&(ie+=V),ie+=JSON.stringify(z)}),ie},"stringifiedValues");function M(G,H){let ce=`[${r("default:")} `;if(G===void 0&&!H)return null;if(H)ce+=H;else switch(typeof G){case"string":ce+=`"${G}"`;break;case"object":ce+=JSON.stringify(G);break;default:ce+=G}return`${ce}]`}s(M,"defaultString");function J(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(J,"windowWidth");let pe=null;n.version=G=>{pe=G},n.showVersion=G=>{let H=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:H[G])(pe)},n.reset=s(function(H){return o=null,l=!1,u=[],f=!1,g=[],p=[],m=[],h=gI(h,ce=>!H[ce]),n},"reset");let Y=[];return n.freeze=s(function(){Y.push({failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(H=!1){let ce=Y.pop();ce&&(H?(h={...ce.descriptions,...h},m=[...ce.commands,...m],u=[...ce.usages,...u],p=[...ce.examples,...p],g=[...ce.epilogs,...g]):{failMessage:o,failureOutput:l,usages:u,usageDisabled:f,epilogs:g,examples:p,commands:m,descriptions:h}=ce)},"unfreeze"),n}s(wqe,"usage");function jhe(t){return typeof t=="object"}s(jhe,"isIndentedText");function BLt(t,e){return jhe(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(BLt,"addIndentation");function Tqe(t){return jhe(t)?t.indentation:0}s(Tqe,"getIndentation");function jz(t){return jhe(t)?t.text:t}s(jz,"getText");d();d();var _qe=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,Sqe=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Vhe=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,c;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(c=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&c!==void 0?c:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let c=0,l=e.length;c<l;++c)if(o[e[c]]&&o[e[c]].builder){let u=o[e[c]].builder;if(Gz(u)){this.indexAfterLastReset=c+1;let f=this.yargs.getInternalMethods().reset();return u(f,!0),f.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=hI(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let c=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+c)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(c=>{let l=!!o.configuration["boolean-negation"]&&o.boolean.includes(c);!a.includes(c)&&!o.hiddenOptions.includes(c)&&!this.argsContainKey(r,c,l)&&this.completeOptionKey(c,e,i,l&&!!o.default[c])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),c=o[n._.length-a-1];if(!c)return;let l=this.yargs.getOptions().choices[c]||[];for(let u of l)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],c;for(let l of a)if(Object.prototype.hasOwnProperty.call(o.key,l)&&Array.isArray(o.choices[l])){c=o.choices[l];break}if(c)return c.filter(l=>!n||l.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,c,l;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(x=>{let b=h[x];return typeof b=="string"&&b.length>0}),y=g?h[g]:void 0,E=(l=(c=h[e])!==null&&c!==void 0?c:y)!==null&&l!==void 0?l:"";u=`${e.replace(/:/g,"\\:")}:${E.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!f(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(Md(this.customCompletionFunction,null,this.shim),NLt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return Ws(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return LLt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return Ws(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?Sqe:_qe,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function Rqe(t,e,r,n){return new Vhe(t,e,r,n)}s(Rqe,"completion");function NLt(t){return t.length<3}s(NLt,"isSyncCompletionFunction");function LLt(t){return t.length>3}s(LLt,"isFallbackCompletionFunction");d();d();function kqe(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(kqe,"levenshtein");var Pqe=["$0","--","_"];function Bqe(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let E of Object.keys(h)){let x=h[E];x&&g.indexOf(x)<0&&g.push(x)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var E;let x=t.getInternalMethods().getCommandInstance().getCommands(),b=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!Pqe.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&b.push(k)}),y&&(_.commands.length>0||x.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{x.includes(""+k)||b.push(""+k)}),y){let P=((E=t.getDemandedCommands()._)===null||E===void 0?void 0:E.max)||0,N=_.commands.length+P;N<p._.length&&p._.slice(N).forEach(M=>{M=String(M),!_.commands.includes(M)&&!b.includes(M)&&b.push(M)})}b.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",b.length,b.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(E=>{Pqe.indexOf(E)===-1&&Object.prototype.hasOwnProperty.call(m.choices,E)&&[].concat(p[E]).forEach(x=>{m.choices[E].indexOf(x)===-1&&x!==void 0&&(h[E]=(h[E]||[]).concat(x))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(E=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",E,e.stringifiedValues(h[E]),e.stringifiedValues(m.choices[E]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){br("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(Md(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function c(f,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=f._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(f,p)):p=Object.prototype.hasOwnProperty.call(f,p),p}s(c,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let E=g,x=y;E=c(p,E),y=c(p,y),E&&!y&&m.push(` ${g} -> ${x}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let l={};o.conflicts=s(function(p,m){br("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),l[p]||(l[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):l[p].push(m))},"conflicts"),o.getConflicting=()=>l,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{l[m]&&l[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(l).forEach(m=>{l[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((E,x)=>x.length-E.length);let g=null,y=1/0;for(let E=0,x;(x=m[E])!==void 0;E++){let b=kqe(p,x);b<=3&&b<y&&(y=b,g=x)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=gI(a,m=>!p[m]),l=gI(l,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:l})},"freeze"),o.unfreeze=s(function(){let p=u.pop();Md(p,void 0,r),{implied:a,conflicting:l}=p},"unfreeze"),o}s(Bqe,"validation");d();var $he=[],UM;function Vz(t,e,r,n){UM=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=FLt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}MLt(a),$he.push(a),i=o?JSON.parse(UM.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=Vz(i,UM.path.dirname(a),r,UM)}return $he=[],r?Dqe(i,t):Object.assign({},i,t)}s(Vz,"applyExtends");function MLt(t){if($he.indexOf(t)>-1)throw new Hs(`Circular extended configurations: '${t}'.`)}s(MLt,"checkForCircularExtends");function FLt(t,e){return UM.path.resolve(t,e)}s(FLt,"getPathToDefaultConfig");function Dqe(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=Dqe(t[i],e[i]):r[i]=e[i];return r}s(Dqe,"mergeDeep");var _r=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},de=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},oc,s2,qM,bm,V0,$z,yI,a2,zz,Im,Yz,Tm,ky,$0,wm,Kz,f3,_l,Gr,Jz,Xz,z0,c2,p3,l2,CI,Zz,Un,u2,d2,f2,ei,eY,Py,Oa;function Zqe(t){return(e=[],r=t.process.cwd(),n)=>{let i=new ige(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(Zqe,"YargsFactory");var Nqe=Symbol("copyDoubleDash"),Lqe=Symbol("copyDoubleDash"),zhe=Symbol("deleteFromParserHintObject"),Mqe=Symbol("emitWarning"),Fqe=Symbol("freeze"),Oqe=Symbol("getDollarZero"),p2=Symbol("getParserConfiguration"),Qqe=Symbol("getUsageConfiguration"),Yhe=Symbol("guessLocale"),Uqe=Symbol("guessVersion"),qqe=Symbol("parsePositionalNumbers"),Khe=Symbol("pkgUp"),EI=Symbol("populateParserHintArray"),m3=Symbol("populateParserHintSingleValueDictionary"),Jhe=Symbol("populateParserHintArrayDictionary"),Xhe=Symbol("populateParserHintDictionary"),Zhe=Symbol("sanitizeKey"),ege=Symbol("setKey"),tge=Symbol("unfreeze"),Hqe=Symbol("validateAsync"),Wqe=Symbol("getCommandInstance"),Gqe=Symbol("getContext"),jqe=Symbol("getHasOutput"),Vqe=Symbol("getLoggerInstance"),$qe=Symbol("getParseContext"),zqe=Symbol("getUsageInstance"),Yqe=Symbol("getValidationInstance"),tY=Symbol("hasParseCallback"),Kqe=Symbol("isGlobalContext"),m2=Symbol("postProcess"),Jqe=Symbol("rebase"),rge=Symbol("reset"),HM=Symbol("runYargsParserAndExecuteCommands"),nge=Symbol("runValidation"),Xqe=Symbol("setHasOutput"),h2=Symbol("kTrackManuallySetKeys"),ige=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,oc.set(this,void 0),s2.set(this,void 0),qM.set(this,{commands:[],fullCommands:[]}),bm.set(this,null),V0.set(this,null),$z.set(this,"show-hidden"),yI.set(this,null),a2.set(this,!0),zz.set(this,{}),Im.set(this,!0),Yz.set(this,[]),Tm.set(this,void 0),ky.set(this,{}),$0.set(this,!1),wm.set(this,null),Kz.set(this,!0),f3.set(this,void 0),_l.set(this,""),Gr.set(this,void 0),Jz.set(this,void 0),Xz.set(this,{}),z0.set(this,null),c2.set(this,null),p3.set(this,{}),l2.set(this,{}),CI.set(this,void 0),Zz.set(this,!1),Un.set(this,void 0),u2.set(this,!1),d2.set(this,!1),f2.set(this,!1),ei.set(this,void 0),eY.set(this,{}),Py.set(this,null),Oa.set(this,void 0),_r(this,Un,i,"f"),_r(this,CI,e,"f"),_r(this,s2,r,"f"),_r(this,Jz,n,"f"),_r(this,Tm,new Wz(this),"f"),this.$0=this[Oqe](),this[rge](),_r(this,oc,de(this,oc,"f"),"f"),_r(this,ei,de(this,ei,"f"),"f"),_r(this,Oa,de(this,Oa,"f"),"f"),_r(this,Gr,de(this,Gr,"f"),"f"),de(this,Gr,"f").showHiddenOpt=de(this,$z,"f"),_r(this,f3,this[Lqe](),"f")}addHelpOpt(e,r){let n="help";return br("[string|boolean] [string]",[e,r],arguments.length),de(this,wm,"f")&&(this[zhe](de(this,wm,"f")),_r(this,wm,null,"f")),e===!1&&r===void 0?this:(_r(this,wm,typeof e=="string"?e:n,"f"),this.boolean(de(this,wm,"f")),this.describe(de(this,wm,"f"),r||de(this,ei,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(br("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:de(this,$z,"f");return this.boolean(n),this.describe(n,r||de(this,ei,"f").deferY18nLookup("Show hidden options")),de(this,Gr,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return br("<object|string|array> [string|array]",[e,r],arguments.length),this[Jhe](this.alias.bind(this),"alias",e,r),this}array(e){return br("<array|string>",[e],arguments.length),this[EI]("array",e),this[h2](e),this}boolean(e){return br("<array|string>",[e],arguments.length),this[EI]("boolean",e),this[h2](e),this}check(e,r){return br("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>o2(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&de(this,ei,"f").fail(o.toString(),o):de(this,ei,"f").fail(de(this,Un,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(de(this,ei,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return br("<object|string|array> [string|array]",[e,r],arguments.length),this[Jhe](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(br("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new Hs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new Hs("coerce callback must be provided");return de(this,Gr,"f").key[e]=!0,de(this,Tm,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?o2(()=>(o=i.getAliases(),r(n[e])),c=>{n[e]=c;let l=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&l!==!0)for(let u of o[e])n[u]=c;return n},c=>{throw new Hs(c.message)}):n},e),this}conflicts(e,r){return br("<string|object> [string|array]",[e,r],arguments.length),de(this,Oa,"f").conflicts(e,r),this}config(e="config",r,n){return br("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=Vz(e,de(this,s2,"f"),this[p2]()["deep-merge-config"]||!1,de(this,Un,"f")),de(this,Gr,"f").configObjects=(de(this,Gr,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||de(this,ei,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{de(this,Gr,"f").config[i]=n||!0}),this)}completion(e,r,n){return br("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),_r(this,V0,e||de(this,V0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(de(this,V0,"f"),r),n&&de(this,bm,"f").registerFunction(n),this}command(e,r,n,i,o,a){return br("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),de(this,oc,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){br("<string> [object]",[e,r],arguments.length);let n=de(this,Jz,"f")||de(this,Un,"f").require;return de(this,oc,"f").addDirectory(e,n,de(this,Un,"f").getCallerFile(),r),this}count(e){return br("<array|string>",[e],arguments.length),this[EI]("count",e),this[h2](e),this}default(e,r,n){return br("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Hhe(e,de(this,Un,"f")),de(this,Gr,"f").defaultDescription[e]=n),typeof r=="function"&&(Hhe(e,de(this,Un,"f")),de(this,Gr,"f").defaultDescription[e]||(de(this,Gr,"f").defaultDescription[e]=de(this,ei,"f").functionDescription(r)),r=r.call()),this[m3](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return br("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),de(this,Gr,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Md(n,!0,de(this,Un,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Md(n,!0,de(this,Un,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Md(n,!0,de(this,Un,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return br("<object|string|array> [string]",[e,r],arguments.length),this[m3](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return br("<string> [string|boolean]",[e,r],arguments.length),de(this,Gr,"f").deprecatedOptions[e]=r,this}describe(e,r){return br("<object|string|array> [string]",[e,r],arguments.length),this[ege](e,!0),de(this,ei,"f").describe(e,r),this}detectLocale(e){return br("<boolean>",[e],arguments.length),_r(this,a2,e,"f"),this}env(e){return br("[string|boolean]",[e],arguments.length),e===!1?delete de(this,Gr,"f").envPrefix:de(this,Gr,"f").envPrefix=e||"",this}epilogue(e){return br("<string>",[e],arguments.length),de(this,ei,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return br("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):de(this,ei,"f").example(e,r),this}exit(e,r){_r(this,$0,!0,"f"),_r(this,yI,r,"f"),de(this,Im,"f")&&de(this,Un,"f").process.exit(e)}exitProcess(e=!0){return br("[boolean]",[e],arguments.length),_r(this,Im,e,"f"),this}fail(e){if(br("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new Hs("Invalid first argument. Expected function or boolean 'false'");return de(this,ei,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return br("<array> [function]",[e,r],arguments.length),r?de(this,bm,"f").getCompletion(e,r):new Promise((n,i)=>{de(this,bm,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return br([],0),de(this,Gr,"f").demandedOptions}getDemandedCommands(){return br([],0),de(this,Gr,"f").demandedCommands}getDeprecatedOptions(){return br([],0),de(this,Gr,"f").deprecatedOptions}getDetectLocale(){return de(this,a2,"f")}getExitProcess(){return de(this,Im,"f")}getGroups(){return Object.assign({},de(this,ky,"f"),de(this,l2,"f"))}getHelp(){if(_r(this,$0,!0,"f"),!de(this,ei,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[HM](de(this,CI,"f"),void 0,void 0,0,!0);if(Ws(r))return r.then(()=>de(this,ei,"f").help())}let e=de(this,oc,"f").runDefaultBuilderOn(this);if(Ws(e))return e.then(()=>de(this,ei,"f").help())}return Promise.resolve(de(this,ei,"f").help())}getOptions(){return de(this,Gr,"f")}getStrict(){return de(this,u2,"f")}getStrictCommands(){return de(this,d2,"f")}getStrictOptions(){return de(this,f2,"f")}global(e,r){return br("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?de(this,Gr,"f").local=de(this,Gr,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{de(this,Gr,"f").local.includes(n)||de(this,Gr,"f").local.push(n)}),this}group(e,r){br("<string|array> <string>",[e,r],arguments.length);let n=de(this,l2,"f")[r]||de(this,ky,"f")[r];de(this,l2,"f")[r]&&delete de(this,l2,"f")[r];let i={};return de(this,ky,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return br("<string>",[e],arguments.length),de(this,Gr,"f").hiddenOptions.push(e),this}implies(e,r){return br("<string|object> [number|string|array]",[e,r],arguments.length),de(this,Oa,"f").implies(e,r),this}locale(e){return br("[string]",[e],arguments.length),e===void 0?(this[Yhe](),de(this,Un,"f").y18n.getLocale()):(_r(this,a2,!1,"f"),de(this,Un,"f").y18n.setLocale(e),this)}middleware(e,r,n){return de(this,Tm,"f").addMiddleware(e,!!r,n)}nargs(e,r){return br("<string|object|array> [number]",[e,r],arguments.length),this[m3](this.nargs.bind(this),"narg",e,r),this}normalize(e){return br("<array|string>",[e],arguments.length),this[EI]("normalize",e),this}number(e){return br("<array|string>",[e],arguments.length),this[EI]("number",e),this[h2](e),this}option(e,r){if(br("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[h2](e),de(this,Py,"f")&&(e==="version"||r?.alias==="version")&&this[Mqe](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),de(this,Gr,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(de(this,Gr,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=de(this,ei,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){br("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[Fqe](),typeof e>"u"&&(e=de(this,CI,"f")),typeof r=="object"&&(_r(this,c2,r,"f"),r=n),typeof r=="function"&&(_r(this,z0,r,"f"),r=!1),r||_r(this,CI,e,"f"),de(this,z0,"f")&&_r(this,Im,!1,"f");let i=this[HM](e,!!r),o=this.parsed;return de(this,bm,"f").setParsed(this.parsed),Ws(i)?i.then(a=>(de(this,z0,"f")&&de(this,z0,"f").call(this,de(this,yI,"f"),a,de(this,_l,"f")),a)).catch(a=>{throw de(this,z0,"f")&&de(this,z0,"f")(a,this.parsed.argv,de(this,_l,"f")),a}).finally(()=>{this[tge](),this.parsed=o}):(de(this,z0,"f")&&de(this,z0,"f").call(this,de(this,yI,"f"),i,de(this,_l,"f")),this[tge](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Ws(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Ws(i))throw new Hs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return br("<object>",[e],arguments.length),_r(this,Xz,e,"f"),this}pkgConf(e,r){br("<string> [string]",[e,r],arguments.length);let n=null,i=this[Khe](r||de(this,s2,"f"));return i[e]&&typeof i[e]=="object"&&(n=Vz(i[e],r||de(this,s2,"f"),this[p2]()["deep-merge-config"]||!1,de(this,Un,"f")),de(this,Gr,"f").configObjects=(de(this,Gr,"f").configObjects||[]).concat(n)),this}positional(e,r){br("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=gI(r,(a,c)=>a==="type"&&!["string","number","boolean"].includes(c)?!1:n.includes(a));let i=de(this,qM,"f").fullCommands[de(this,qM,"f").fullCommands.length-1],o=i?de(this,oc,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return u3(o).forEach(a=>{let c=o[a];Array.isArray(c)?c.indexOf(e)!==-1&&(r[a]=!0):c[e]&&!(a in r)&&(r[a]=c[e])}),this.group(e,de(this,ei,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return br("[boolean]",[e],arguments.length),_r(this,Zz,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return br("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&de(this,Gr,"f").narg[e]?this:(this[m3](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return br("[string] [string]",[e,r],arguments.length),e=e||this.$0,de(this,f3,"f").log(de(this,bm,"f").generateCompletionScript(e,r||de(this,V0,"f")||"completion")),this}showHelp(e){if(br("[string|function]",[e],arguments.length),_r(this,$0,!0,"f"),!de(this,ei,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[HM](de(this,CI,"f"),void 0,void 0,0,!0);if(Ws(n))return n.then(()=>{de(this,ei,"f").showHelp(e)}),this}let r=de(this,oc,"f").runDefaultBuilderOn(this);if(Ws(r))return r.then(()=>{de(this,ei,"f").showHelp(e)}),this}return de(this,ei,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return br("[boolean|string] [string]",[e,r],arguments.length),de(this,ei,"f").showHelpOnFail(e,r),this}showVersion(e){return br("[string|function]",[e],arguments.length),de(this,ei,"f").showVersion(e),this}skipValidation(e){return br("<array|string>",[e],arguments.length),this[EI]("skipValidation",e),this}strict(e){return br("[boolean]",[e],arguments.length),_r(this,u2,e!==!1,"f"),this}strictCommands(e){return br("[boolean]",[e],arguments.length),_r(this,d2,e!==!1,"f"),this}strictOptions(e){return br("[boolean]",[e],arguments.length),_r(this,f2,e!==!1,"f"),this}string(e){return br("<array|string>",[e],arguments.length),this[EI]("string",e),this[h2](e),this}terminalWidth(){return br([],0),de(this,Un,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return br("<object>",[e],arguments.length),_r(this,a2,!1,"f"),de(this,Un,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(br("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Md(e,null,de(this,Un,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new Hs(".usage() description must start with $0 if being used as alias for .command()")}else return de(this,ei,"f").usage(e),this}usageConfiguration(e){return br("<object>",[e],arguments.length),_r(this,eY,e,"f"),this}version(e,r,n){let i="version";if(br("[boolean|string] [string] [string]",[e,r,n],arguments.length),de(this,Py,"f")&&(this[zhe](de(this,Py,"f")),de(this,ei,"f").version(void 0),_r(this,Py,null,"f")),arguments.length===0)n=this[Uqe](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return _r(this,Py,typeof e=="string"?e:i,"f"),r=r||de(this,ei,"f").deferY18nLookup("Show version number"),de(this,ei,"f").version(n||void 0),this.boolean(de(this,Py,"f")),this.describe(de(this,Py,"f"),r),this}wrap(e){return br("<number|null|undefined>",[e],arguments.length),de(this,ei,"f").wrap(e),this}[(oc=new WeakMap,s2=new WeakMap,qM=new WeakMap,bm=new WeakMap,V0=new WeakMap,$z=new WeakMap,yI=new WeakMap,a2=new WeakMap,zz=new WeakMap,Im=new WeakMap,Yz=new WeakMap,Tm=new WeakMap,ky=new WeakMap,$0=new WeakMap,wm=new WeakMap,Kz=new WeakMap,f3=new WeakMap,_l=new WeakMap,Gr=new WeakMap,Jz=new WeakMap,Xz=new WeakMap,z0=new WeakMap,c2=new WeakMap,p3=new WeakMap,l2=new WeakMap,CI=new WeakMap,Zz=new WeakMap,Un=new WeakMap,u2=new WeakMap,d2=new WeakMap,f2=new WeakMap,ei=new WeakMap,eY=new WeakMap,Py=new WeakMap,Oa=new WeakMap,Nqe)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[Lqe](){return{log:s((...e)=>{this[tY]()||console.log(...e),_r(this,$0,!0,"f"),de(this,_l,"f").length&&_r(this,_l,de(this,_l,"f")+`
`,"f"),_r(this,_l,de(this,_l,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[tY]()||console.error(...e),_r(this,$0,!0,"f"),de(this,_l,"f").length&&_r(this,_l,de(this,_l,"f")+`
`,"f"),_r(this,_l,de(this,_l,"f")+e.join(" "),"f")},"error")}}[zhe](e){u3(de(this,Gr,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=de(this,Gr,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete de(this,ei,"f").getDescriptions()[e]}[Mqe](e,r,n){de(this,zz,"f")[n]||(de(this,Un,"f").process.emitWarning(e,r),de(this,zz,"f")[n]=!0)}[Fqe](){de(this,Yz,"f").push({options:de(this,Gr,"f"),configObjects:de(this,Gr,"f").configObjects.slice(0),exitProcess:de(this,Im,"f"),groups:de(this,ky,"f"),strict:de(this,u2,"f"),strictCommands:de(this,d2,"f"),strictOptions:de(this,f2,"f"),completionCommand:de(this,V0,"f"),output:de(this,_l,"f"),exitError:de(this,yI,"f"),hasOutput:de(this,$0,"f"),parsed:this.parsed,parseFn:de(this,z0,"f"),parseContext:de(this,c2,"f")}),de(this,ei,"f").freeze(),de(this,Oa,"f").freeze(),de(this,oc,"f").freeze(),de(this,Tm,"f").freeze()}[Oqe](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(de(this,Un,"f").process.argv()[0])?r=de(this,Un,"f").process.argv().slice(1,2):r=de(this,Un,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[Jqe](de(this,s2,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),de(this,Un,"f").getEnv("_")&&de(this,Un,"f").getProcessArgvBin()===de(this,Un,"f").getEnv("_")&&(e=de(this,Un,"f").getEnv("_").replace(`${de(this,Un,"f").path.dirname(de(this,Un,"f").process.execPath())}/`,"")),e}[p2](){return de(this,Xz,"f")}[Qqe](){return de(this,eY,"f")}[Yhe](){if(!de(this,a2,"f"))return;let e=de(this,Un,"f").getEnv("LC_ALL")||de(this,Un,"f").getEnv("LC_MESSAGES")||de(this,Un,"f").getEnv("LANG")||de(this,Un,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[Uqe](){return this[Khe]().version||"unknown"}[qqe](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)de(this,Un,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[Khe](e){let r=e||"*";if(de(this,p3,"f")[r])return de(this,p3,"f")[r];let n={};try{let i=e||de(this,Un,"f").mainFilename;!e&&de(this,Un,"f").path.extname(i)&&(i=de(this,Un,"f").path.dirname(i));let o=de(this,Un,"f").findUp(i,(a,c)=>{if(c.includes("package.json"))return"package.json"});Md(o,void 0,de(this,Un,"f")),n=JSON.parse(de(this,Un,"f").readFileSync(o,"utf8"))}catch{}return de(this,p3,"f")[r]=n||{},de(this,p3,"f")[r]}[EI](e,r){r=[].concat(r),r.forEach(n=>{n=this[Zhe](n),de(this,Gr,"f")[e].push(n)})}[m3](e,r,n,i){this[Xhe](e,r,n,i,(o,a,c)=>{de(this,Gr,"f")[o][a]=c})}[Jhe](e,r,n,i){this[Xhe](e,r,n,i,(o,a,c)=>{de(this,Gr,"f")[o][a]=(de(this,Gr,"f")[o][a]||[]).concat(c)})}[Xhe](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of u3(n))e(a,n[a]);else o(r,this[Zhe](n),i)}[Zhe](e){return e==="__proto__"?"___proto___":e}[ege](e,r){return this[m3](this[ege].bind(this),"key",e,r),this}[tge](){var e,r,n,i,o,a,c,l,u,f,p,m;let h=de(this,Yz,"f").pop();Md(h,void 0,de(this,Un,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,c=this,l=this,u=this,f=this,p=this,m=this,{options:{set value(y){_r(e,Gr,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){_r(r,Im,y,"f")}}.value,groups:{set value(y){_r(n,ky,y,"f")}}.value,output:{set value(y){_r(i,_l,y,"f")}}.value,exitError:{set value(y){_r(o,yI,y,"f")}}.value,hasOutput:{set value(y){_r(a,$0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){_r(c,u2,y,"f")}}.value,strictCommands:{set value(y){_r(l,d2,y,"f")}}.value,strictOptions:{set value(y){_r(u,f2,y,"f")}}.value,completionCommand:{set value(y){_r(f,V0,y,"f")}}.value,parseFn:{set value(y){_r(p,z0,y,"f")}}.value,parseContext:{set value(y){_r(m,c2,y,"f")}}.value}=h,de(this,Gr,"f").configObjects=g,de(this,ei,"f").unfreeze(),de(this,Oa,"f").unfreeze(),de(this,oc,"f").unfreeze(),de(this,Tm,"f").unfreeze()}[Hqe](e,r){return o2(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[Wqe].bind(this),getContext:this[Gqe].bind(this),getHasOutput:this[jqe].bind(this),getLoggerInstance:this[Vqe].bind(this),getParseContext:this[$qe].bind(this),getParserConfiguration:this[p2].bind(this),getUsageConfiguration:this[Qqe].bind(this),getUsageInstance:this[zqe].bind(this),getValidationInstance:this[Yqe].bind(this),hasParseCallback:this[tY].bind(this),isGlobalContext:this[Kqe].bind(this),postProcess:this[m2].bind(this),reset:this[rge].bind(this),runValidation:this[nge].bind(this),runYargsParserAndExecuteCommands:this[HM].bind(this),setHasOutput:this[Xqe].bind(this)}}[Wqe](){return de(this,oc,"f")}[Gqe](){return de(this,qM,"f")}[jqe](){return de(this,$0,"f")}[Vqe](){return de(this,f3,"f")}[$qe](){return de(this,c2,"f")||{}}[zqe](){return de(this,ei,"f")}[Yqe](){return de(this,Oa,"f")}[tY](){return!!de(this,z0,"f")}[Kqe](){return de(this,Kz,"f")}[m2](e,r,n,i){return n||Ws(e)||(r||(e=this[Nqe](e)),(this[p2]()["parse-positional-numbers"]||this[p2]()["parse-positional-numbers"]===void 0)&&(e=this[qqe](e)),i&&(e=i2(e,this,de(this,Tm,"f").getMiddleware(),!1))),e}[rge](e={}){_r(this,Gr,de(this,Gr,"f")||{},"f");let r={};r.local=de(this,Gr,"f").local||[],r.configObjects=de(this,Gr,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(c=>{n[c]=!0})}),Object.assign(de(this,l2,"f"),Object.keys(de(this,ky,"f")).reduce((a,c)=>{let l=de(this,ky,"f")[c].filter(u=>!(u in n));return l.length>0&&(a[c]=l),a},{})),_r(this,ky,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(de(this,Gr,"f")[a]||[]).filter(c=>!n[c])}),o.forEach(a=>{r[a]=gI(de(this,Gr,"f")[a],c=>!n[c])}),r.envPrefix=de(this,Gr,"f").envPrefix,_r(this,Gr,r,"f"),_r(this,ei,de(this,ei,"f")?de(this,ei,"f").reset(n):wqe(this,de(this,Un,"f")),"f"),_r(this,Oa,de(this,Oa,"f")?de(this,Oa,"f").reset(n):Bqe(this,de(this,ei,"f"),de(this,Un,"f")),"f"),_r(this,oc,de(this,oc,"f")?de(this,oc,"f").reset():bqe(de(this,ei,"f"),de(this,Oa,"f"),de(this,Tm,"f"),de(this,Un,"f")),"f"),de(this,bm,"f")||_r(this,bm,Rqe(this,de(this,ei,"f"),de(this,oc,"f"),de(this,Un,"f")),"f"),de(this,Tm,"f").reset(),_r(this,V0,null,"f"),_r(this,_l,"","f"),_r(this,yI,null,"f"),_r(this,$0,!1,"f"),this.parsed=!1,this}[Jqe](e,r){return de(this,Un,"f").path.relative(e,r)}[HM](e,r,n,i=0,o=!1){let a=!!n||o;e=e||de(this,CI,"f"),de(this,Gr,"f").__=de(this,Un,"f").y18n.__,de(this,Gr,"f").configuration=this[p2]();let c=!!de(this,Gr,"f").configuration["populate--"],l=Object.assign({},de(this,Gr,"f").configuration,{"populate--":!0}),u=de(this,Un,"f").Parser.detailed(e,Object.assign({},de(this,Gr,"f"),{configuration:{"parse-positional-numbers":!1,...l}})),f=Object.assign(u.argv,de(this,c2,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(f).forEach(y=>{y===de(this,wm,"f")&&f[y]?h=!0:y===de(this,Py,"f")&&f[y]&&(g=!0)}),f.$0=this.$0,this.parsed=u,i===0&&de(this,ei,"f").clearCachedHelpMessage();try{if(this[Yhe](),r)return this[m2](f,c,!!n,!1);de(this,wm,"f")&&[de(this,wm,"f")].concat(m[de(this,wm,"f")]||[]).filter(_=>_.length>1).includes(""+f._[f._.length-1])&&(f._.pop(),h=!0),_r(this,Kz,!1,"f");let y=de(this,oc,"f").getCommands(),E=de(this,bm,"f").completionKey in f,x=h||E||o;if(f._.length){if(y.length){let b;for(let _=i||0,k;f._[_]!==void 0;_++)if(k=String(f._[_]),y.includes(k)&&k!==de(this,V0,"f")){let P=de(this,oc,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[m2](P,c,!!n,!1)}else if(!b&&k!==de(this,V0,"f")){b=k;break}!de(this,oc,"f").hasDefaultCommand()&&de(this,Zz,"f")&&b&&!x&&de(this,Oa,"f").recommendCommands(b,y)}de(this,V0,"f")&&f._.includes(de(this,V0,"f"))&&!E&&(de(this,Im,"f")&&AI(!0),this.showCompletionScript(),this.exit(0))}if(de(this,oc,"f").hasDefaultCommand()&&!x){let b=de(this,oc,"f").runCommand(null,this,u,0,o,h||g||o);return this[m2](b,c,!!n,!1)}if(E){de(this,Im,"f")&&AI(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${de(this,bm,"f").completionKey}`)+1);return de(this,bm,"f").getCompletion(b,(_,k)=>{if(_)throw new Hs(_.message);(k||[]).forEach(P=>{de(this,f3,"f").log(P)}),this.exit(0)}),this[m2](f,!c,!!n,!1)}if(de(this,$0,"f")||(h?(de(this,Im,"f")&&AI(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(de(this,Im,"f")&&AI(!0),a=!0,de(this,ei,"f").showVersion("log"),this.exit(0))),!a&&de(this,Gr,"f").skipValidation.length>0&&(a=Object.keys(f).some(b=>de(this,Gr,"f").skipValidation.indexOf(b)>=0&&f[b]===!0)),!a){if(u.error)throw new Hs(u.error.message);if(!E){let b=this[nge](m,{},u.error);n||(p=i2(f,this,de(this,Tm,"f").getMiddleware(),!0)),p=this[Hqe](b,p??f),Ws(p)&&!n&&(p=p.then(()=>i2(f,this,de(this,Tm,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof Hs)de(this,ei,"f").fail(y.message,y);else throw y}return this[m2](p??f,c,!!n,!0)}[nge](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new Hs(n.message);de(this,Oa,"f").nonOptionCount(a),de(this,Oa,"f").requiredArguments(a,o);let c=!1;de(this,d2,"f")&&(c=de(this,Oa,"f").unknownCommands(a)),de(this,u2,"f")&&!c?de(this,Oa,"f").unknownArguments(a,e,r,!!i):de(this,f2,"f")&&de(this,Oa,"f").unknownArguments(a,e,{},!1,!1),de(this,Oa,"f").limitedChoices(a),de(this,Oa,"f").implications(a),de(this,Oa,"f").conflicting(a)}}[Xqe](){_r(this,$0,!0,"f")}[h2](e){if(typeof e=="string")de(this,Gr,"f").key[e]=!0;else for(let r of e)de(this,Gr,"f").key[r]=!0}};function Iqe(t){return!!t&&typeof t.getInternalMethods=="function"}s(Iqe,"isYargsInstance");var OLt=Zqe(yqe),eHe=OLt;d();d();d();var tHe={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function rHe(t,e,r){let n=Dr.createAndMarkAsIssued({authSource:e,authType:r});return Rt(t,tHe.NewGitHubLogin,n)}s(rHe,"telemetryNewGitHubLogin");function nHe(t,e){let r=Dr.createAndMarkAsIssued({authType:e});return Rt(t,tHe.GitHubLoginSuccess,r)}s(nHe,"telemetryGitHubLoginSuccess");var oge=class extends Bs{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function QLt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...A0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(jn).fetch(o,n)}catch(a){throw a instanceof Error&&C6(a)?new Bs(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new Bs(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(QLt,"requestDeviceFlowStage1");async function ULt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...A0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(jn).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new oge(a):new Bs(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(ULt,"requestDeviceFlowStage2");async function qLt(t,e){nHe(t,"deviceFlow");let n=await(await Zp(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new Bs(`Error retrieving user information: ${String(n.errors)}`);return n}s(qLt,"requestUserInfo");var g2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(xd).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){rHe(e,"unknown","deviceFlow");let i=await QLt(e,r,n),o=(async()=>{let a=i.expires_in,c,l=i.interval;for(;a>0;){await new Promise(f=>setTimeout(f,1e3*l));let u=await ULt(e,i.device_code,r,n);if(a-=l,c=u.access_token,c){let f=await qLt(e,{...n,accessToken:c});return{...n,githubAppId:r,login:f.login,accessToken:c}}l=u.interval??l}throw new Bs("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};d();var Fd=class{static{s(this,"CitationManager")}},rY=class extends Fd{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};d();d();d();var HLt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},ds=class{constructor(){this.capabilities={...HLt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};d();d();d();d();function sge(t,e){let r=yg(t,e);return r===-1?void 0:t[r]}s(sge,"findLastMonotonous");function yg(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(yg,"findLastIdxMonotonous");function h3(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(h3,"findFirstIdxMonotonousOrArrLen");var iHe=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=yg(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};d();var age=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?nY.isErrorNoTelemetry(e)?new nY(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},oHe=new age;function A2(t){oHe.onUnexpectedError(t)}s(A2,"onBugIndicatingError");function g3(t){WLt(t)||oHe.onUnexpectedError(t)}s(g3,"onUnexpectedError");var cge="Canceled";function WLt(t){return t instanceof By?!0:t instanceof Error&&t.name===cge&&t.message===cge}s(WLt,"isCancellationError");var By=class extends Error{static{s(this,"CancellationError")}constructor(){super(cge),this.name=this.message}};function WM(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(WM,"illegalArgument");function sHe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(sHe,"illegalState");var nY=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},dn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function GM(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(GM,"equals");function*jM(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(jM,"groupAdjacentBy");function cHe(t){return t.filter(e=>!!e)}s(cHe,"coalesce");var lHe;(c=>{function t(l){return l<0}c.isLessThan=t,s(t,"isLessThan");function e(l){return l<=0}c.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(l){return l>0}c.isGreaterThan=r,s(r,"isGreaterThan");function n(l){return l===0}c.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),c.greaterThan=1,c.lessThan=-1,c.neitherLessOrGreaterThan=0})(lHe||={});function vI(t,e){return(r,n)=>e(t(r),t(n))}s(vI,"compareBy");var xI=s((t,e)=>t-e,"numberComparator");var iY=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},aHe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||lHe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};function uHe(t,e){return t.reduce((r,n)=>r+e(n),0)}s(uHe,"sumBy");d();function mHe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(mHe,"groupBy");var fHe,pHe,dHe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[fHe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(pHe=Symbol.iterator,fHe=Symbol.toStringTag,pHe)](){return this.values()}};d();function lge(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(lge,"createSingleCallFunction");d();var uge;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let P=k.length-1;P>=0;P--)yield k[P]}_.reverse=a,s(a,"reverse");function c(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=c,s(c,"isEmpty");function l(k){return k[Symbol.iterator]().next().value}_.first=l,s(l,"first");function u(k,P){let N=0;for(let M of k)if(P(M,N++))return!0;return!1}_.some=u,s(u,"some");function f(k,P){for(let N of k)if(P(N))return N}_.find=f,s(f,"find");function*p(k,P){for(let N of k)P(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,P){let N=0;for(let M of k)yield P(M,N++)}_.map=m,s(m,"map");function*h(k,P){let N=0;for(let M of k)yield*P(M,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let P of k)yield*P}_.concat=g,s(g,"concat");function y(k,P,N){let M=N;for(let J of k)M=P(M,J);return M}_.reduce=y,s(y,"reduce");function*E(k,P,N=k.length){for(P<-k.length&&(P=0),P<0&&(P+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);P<N;P++)yield k[P]}_.slice=E,s(E,"slice");function x(k,P=Number.POSITIVE_INFINITY){let N=[];if(P===0)return[N,k];let M=k[Symbol.iterator]();for(let J=0;J<P;J++){let pe=M.next();if(pe.done)return[N,_.empty()];N.push(pe.value)}return[N,{[Symbol.iterator](){return M}}]}_.consume=x,s(x,"consume");async function b(k){let P=[];for await(let N of k)P.push(N);return Promise.resolve(P)}_.asyncToArray=b,s(b,"asyncToArray")})(uge||={});d();var dge=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function jLt(t){return Array.isArray(t)}s(jLt,"isEntries");var gHe,oY=class t{constructor(e,r){this[gHe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(jLt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new dge(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(gHe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},AHe,hHe=class{constructor(e,r){this[AHe]="ResourceSet";!e||typeof e=="function"?this._map=new oY(e):(this._map=new oY(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(AHe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var yHe,fge=class{constructor(){this[yHe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(yHe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},pge=class extends fge{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},sY=class extends pge{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var aY=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var VLt=!1,A3=null;var CHe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,l).isSingleton);if(u.length===0)return;let f=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&f.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(l){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let f=l.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(f,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),f.reverse()}s(i,"getStackTracePath");let o=new aY;for(let l of n){let u=i(l);for(let f=0;f<=u.length;f++)o.add(u.slice(0,f).join(`
`),l)}n.sort(vI(l=>l.idx,xI));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=i(l),f=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=mHe([...g].map(E=>i(E)[p]),E=>E);delete y[u[p]];for(let[E,x]of Object.entries(y))f.unshift(`    - stacktraces of ${x.length} other leaks continue with ${E}`);f.unshift(m)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${f.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function $Lt(t){A3=t}s($Lt,"setDisposableTracker");if(VLt){let t="__is_disposable_tracked__";$Lt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==ps.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==ps.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function y3(t){return A3?.trackDisposable(t),t}s(y3,"trackDisposable");function C3(t){A3?.markAsDisposed(t)}s(C3,"markAsDisposed");function mge(t,e){A3?.setParent(t,e)}s(mge,"setParentOfDisposable");function zLt(t,e){if(A3)for(let r of t)A3.setParent(r,e)}s(zLt,"setParentOfDisposables");function EHe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(EHe,"isDisposable");function cY(t){if(uge.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(cY,"dispose");function vHe(...t){let e=sc(()=>cY(t));return zLt(t,e),e}s(vHe,"combinedDisposable");function sc(t){let e=y3({dispose:lge(()=>{C3(e),t()})});return e}s(sc,"toDisposable");var hu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;y3(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(C3(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{cY(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return mge(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),mge(e,null))}},ps=class{constructor(){this._store=new hu;y3(this),mge(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){C3(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var _m=class extends ps{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let f=Math.max(0,i*(1-c/100));this._quotaInfo={quota:i,used:f,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};d();var xHe=Ne(require("events"));var lY="CompletionRequested",Dy=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new xHe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(lY,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Wu(this.ctx,e,`event.${lY}`);return this.#e.on(lY,r),In.Disposable.create(()=>this.#e.off(lY,r))}};d();var hge=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},E3=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new hge(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};d();d();d();var uY=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=THe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let c=Math.max(i.start.line,0),l=Math.max(i.end.line,0),u=this._lineOffsets,f=bHe(n.text,!1,o);if(l-c===f.length)for(let m=0,h=f.length;m<h;m++)u[m+c+1]=f[m];else f.length<1e4?u.splice(c+1,l-c,...f):this._lineOffsets=u=u.slice(0,c+1).concat(f,u.slice(l+1));let p=n.text.length-(a-o);if(p!==0)for(let m=c+1+f.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=bHe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&IHe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},bI;(function(t){function e(i,o,a,c){return new uY(i,o,a,c)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof uY)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),c=gge(o.map(YLt),(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),l=0,u=[];for(let f of c){let p=i.offsetAt(f.range.start);if(p<l)throw new Error("Overlapping edit");p>l&&u.push(a.substring(l,p)),f.newText.length&&u.push(f.newText),l=i.offsetAt(f.range.end)}return u.push(a.substr(l)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(bI||(bI={}));function gge(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);gge(n,e),gge(i,e);let o=0,a=0,c=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[c++]=n[o++]:t[c++]=i[a++];for(;o<n.length;)t[c++]=n[o++];for(;a<i.length;)t[c++]=i[a++];return t}s(gge,"mergeSort");function bHe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);IHe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(bHe,"computeLineOffsets");function IHe(t){return t===13||t===10}s(IHe,"isEOL");function THe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(THe,"getWellformedRange");function YLt(t){let e=THe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(YLt,"getWellformedEdit");d();var wHe;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(wHe||(wHe={}));var Age;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(Age||(Age={}));var _He;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(_He||(_He={}));var dY;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(dY||(dY={}));var Ju;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=dY.MAX_VALUE),i===Number.MAX_VALUE&&(i=dY.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.line)&&$e.uinteger(i.character)}s(r,"is"),t.is=r})(Ju||(Ju={}));var Is;(function(t){function e(n,i,o,a){if($e.uinteger(n)&&$e.uinteger(i)&&$e.uinteger(o)&&$e.uinteger(a))return{start:Ju.create(n,i),end:Ju.create(o,a)};if(Ju.is(n)&&Ju.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Ju.is(i.start)&&Ju.is(i.end)}s(r,"is"),t.is=r})(Is||(Is={}));var fY;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&($e.string(i.uri)||$e.undefined(i.uri))}s(r,"is"),t.is=r})(fY||(fY={}));var SHe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.targetRange)&&$e.string(i.targetUri)&&Is.is(i.targetSelectionRange)&&(Is.is(i.originSelectionRange)||$e.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(SHe||(SHe={}));var yge;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.numberRange(i.red,0,1)&&$e.numberRange(i.green,0,1)&&$e.numberRange(i.blue,0,1)&&$e.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(yge||(yge={}));var RHe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&yge.is(i.color)}s(r,"is"),t.is=r})(RHe||(RHe={}));var kHe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.undefined(i.textEdit)||x3.is(i))&&($e.undefined(i.additionalTextEdits)||$e.typedArray(i.additionalTextEdits,x3.is))}s(r,"is"),t.is=r})(kHe||(kHe={}));var PHe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(PHe||(PHe={}));var BHe;(function(t){function e(n,i,o,a,c,l){let u={startLine:n,endLine:i};return $e.defined(o)&&(u.startCharacter=o),$e.defined(a)&&(u.endCharacter=a),$e.defined(c)&&(u.kind=c),$e.defined(l)&&(u.collapsedText=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.uinteger(i.startLine)&&$e.uinteger(i.startLine)&&($e.undefined(i.startCharacter)||$e.uinteger(i.startCharacter))&&($e.undefined(i.endCharacter)||$e.uinteger(i.endCharacter))&&($e.undefined(i.kind)||$e.string(i.kind))}s(r,"is"),t.is=r})(BHe||(BHe={}));var Cge;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&fY.is(i.location)&&$e.string(i.message)}s(r,"is"),t.is=r})(Cge||(Cge={}));var DHe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(DHe||(DHe={}));var NHe;(function(t){t.Unnecessary=1,t.Deprecated=2})(NHe||(NHe={}));var LHe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&$e.string(n.href)}s(e,"is"),t.is=e})(LHe||(LHe={}));var pY;(function(t){function e(n,i,o,a,c,l){let u={range:n,message:i};return $e.defined(o)&&(u.severity=o),$e.defined(a)&&(u.code=a),$e.defined(c)&&(u.source=c),$e.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return $e.defined(o)&&Is.is(o.range)&&$e.string(o.message)&&($e.number(o.severity)||$e.undefined(o.severity))&&($e.integer(o.code)||$e.string(o.code)||$e.undefined(o.code))&&($e.undefined(o.codeDescription)||$e.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&($e.string(o.source)||$e.undefined(o.source))&&($e.undefined(o.relatedInformation)||$e.typedArray(o.relatedInformation,Cge.is))}s(r,"is"),t.is=r})(pY||(pY={}));var v3;(function(t){function e(n,i,...o){let a={title:n,command:i};return $e.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.title)&&$e.string(i.command)}s(r,"is"),t.is=r})(v3||(v3={}));var x3;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return $e.objectLiteral(a)&&$e.string(a.newText)&&Is.is(a.range)}s(i,"is"),t.is=i})(x3||(x3={}));var Ege;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&$e.string(i.label)&&($e.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&($e.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(Ege||(Ege={}));var b3;(function(t){function e(r){let n=r;return $e.string(n)}s(e,"is"),t.is=e})(b3||(b3={}));var MHe;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function r(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return x3.is(a)&&(Ege.is(a.annotationId)||b3.is(a.annotationId))}s(i,"is"),t.is=i})(MHe||(MHe={}));var vge;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&wge.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(vge||(vge={}));var xge;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&$e.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||b3.is(i.annotationId))}s(r,"is"),t.is=r})(xge||(xge={}));var bge;(function(t){function e(n,i,o,a){let c={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&$e.string(i.oldUri)&&$e.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||$e.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||$e.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||b3.is(i.annotationId))}s(r,"is"),t.is=r})(bge||(bge={}));var Ige;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&$e.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||$e.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||$e.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||b3.is(i.annotationId))}s(r,"is"),t.is=r})(Ige||(Ige={}));var Tge;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>$e.string(i.kind)?xge.is(i)||bge.is(i)||Ige.is(i):vge.is(i)))}s(e,"is"),t.is=e})(Tge||(Tge={}));var FHe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)}s(r,"is"),t.is=r})(FHe||(FHe={}));var OHe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.integer(i.version)}s(r,"is"),t.is=r})(OHe||(OHe={}));var wge;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&(i.version===null||$e.integer(i.version))}s(r,"is"),t.is=r})(wge||(wge={}));var QHe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.string(i.uri)&&$e.string(i.languageId)&&$e.integer(i.version)&&$e.string(i.text)}s(r,"is"),t.is=r})(QHe||(QHe={}));var _ge;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(_ge||(_ge={}));var VM;(function(t){function e(r){let n=r;return $e.objectLiteral(r)&&_ge.is(n.kind)&&$e.string(n.value)}s(e,"is"),t.is=e})(VM||(VM={}));var UHe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(UHe||(UHe={}));var qHe;(function(t){t.PlainText=1,t.Snippet=2})(qHe||(qHe={}));var HHe;(function(t){t.Deprecated=1})(HHe||(HHe={}));var WHe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.newText)&&Is.is(i.insert)&&Is.is(i.replace)}s(r,"is"),t.is=r})(WHe||(WHe={}));var GHe;(function(t){t.asIs=1,t.adjustIndentation=2})(GHe||(GHe={}));var jHe;(function(t){function e(r){let n=r;return n&&($e.string(n.detail)||n.detail===void 0)&&($e.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(jHe||(jHe={}));var VHe;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})(VHe||(VHe={}));var $He;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})($He||($He={}));var mY;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return $e.string(i)||$e.objectLiteral(i)&&$e.string(i.language)&&$e.string(i.value)}s(r,"is"),t.is=r})(mY||(mY={}));var zHe;(function(t){function e(r){let n=r;return!!n&&$e.objectLiteral(n)&&(VM.is(n.contents)||mY.is(n.contents)||$e.typedArray(n.contents,mY.is))&&(r.range===void 0||Is.is(r.range))}s(e,"is"),t.is=e})(zHe||(zHe={}));var YHe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(YHe||(YHe={}));var KHe;(function(t){function e(r,n,...i){let o={label:r};return $e.defined(n)&&(o.documentation=n),$e.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(KHe||(KHe={}));var JHe;(function(t){t.Text=1,t.Read=2,t.Write=3})(JHe||(JHe={}));var XHe;(function(t){function e(r,n){let i={range:r};return $e.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(XHe||(XHe={}));var ZHe;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(ZHe||(ZHe={}));var eWe;(function(t){t.Deprecated=1})(eWe||(eWe={}));var tWe;(function(t){function e(r,n,i,o,a){let c={name:r,kind:n,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(tWe||(tWe={}));var rWe;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(rWe||(rWe={}));var nWe;(function(t){function e(n,i,o,a,c,l){let u={name:n,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.name)&&$e.number(i.kind)&&Is.is(i.range)&&Is.is(i.selectionRange)&&(i.detail===void 0||$e.string(i.detail))&&(i.deprecated===void 0||$e.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(nWe||(nWe={}));var iWe;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(iWe||(iWe={}));var hY;(function(t){t.Invoked=1,t.Automatic=2})(hY||(hY={}));var oWe;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.typedArray(i.diagnostics,pY.is)&&(i.only===void 0||$e.typedArray(i.only,$e.string))&&(i.triggerKind===void 0||i.triggerKind===hY.Invoked||i.triggerKind===hY.Automatic)}s(r,"is"),t.is=r})(oWe||(oWe={}));var sWe;(function(t){function e(n,i,o){let a={title:n},c=!0;return typeof i=="string"?(c=!1,a.kind=i):v3.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&$e.string(i.title)&&(i.diagnostics===void 0||$e.typedArray(i.diagnostics,pY.is))&&(i.kind===void 0||$e.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||v3.is(i.command))&&(i.isPreferred===void 0||$e.boolean(i.isPreferred))&&(i.edit===void 0||Tge.is(i.edit))}s(r,"is"),t.is=r})(sWe||(sWe={}));var aWe;(function(t){function e(n,i){let o={range:n};return $e.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(i.range)&&($e.undefined(i.command)||v3.is(i.command))}s(r,"is"),t.is=r})(aWe||(aWe={}));var cWe;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&$e.uinteger(i.tabSize)&&$e.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(cWe||(cWe={}));var lWe;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(i.range)&&($e.undefined(i.target)||$e.string(i.target))}s(r,"is"),t.is=r})(lWe||(lWe={}));var uWe;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Is.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(uWe||(uWe={}));var dWe;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(dWe||(dWe={}));var fWe;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(fWe||(fWe={}));var pWe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(pWe||(pWe={}));var mWe;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&$e.string(i.text)}s(r,"is"),t.is=r})(mWe||(mWe={}));var hWe;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&$e.boolean(i.caseSensitiveLookup)&&($e.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(hWe||(hWe={}));var gWe;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&Is.is(i.range)&&($e.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(gWe||(gWe={}));var AWe;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.defined(i)&&Is.is(n.stoppedLocation)}s(r,"is"),t.is=r})(AWe||(AWe={}));var Sge;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Sge||(Sge={}));var Rge;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&(i.tooltip===void 0||$e.string(i.tooltip)||VM.is(i.tooltip))&&(i.location===void 0||fY.is(i.location))&&(i.command===void 0||v3.is(i.command))}s(r,"is"),t.is=r})(Rge||(Rge={}));var yWe;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return $e.objectLiteral(i)&&Ju.is(i.position)&&($e.string(i.label)||$e.typedArray(i.label,Rge.is))&&(i.kind===void 0||Sge.is(i.kind))&&i.textEdits===void 0||$e.typedArray(i.textEdits,x3.is)&&(i.tooltip===void 0||$e.string(i.tooltip)||VM.is(i.tooltip))&&(i.paddingLeft===void 0||$e.boolean(i.paddingLeft))&&(i.paddingRight===void 0||$e.boolean(i.paddingRight))}s(r,"is"),t.is=r})(yWe||(yWe={}));var CWe;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(CWe||(CWe={}));var EWe;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(EWe||(EWe={}));var vWe;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(vWe||(vWe={}));var xWe;(function(t){t.Invoked=0,t.Automatic=1})(xWe||(xWe={}));var bWe;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(bWe||(bWe={}));var IWe;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(IWe||(IWe={}));var TWe;(function(t){function e(r){let n=r;return $e.objectLiteral(n)&&Age.is(n.uri)&&$e.string(n.name)}s(e,"is"),t.is=e})(TWe||(TWe={}));var wWe;(function(t){function e(o,a,c,l){return new kge(o,a,c,l)}s(e,"create"),t.create=e;function r(o){let a=o;return!!($e.defined(a)&&$e.string(a.uri)&&($e.undefined(a.languageId)||$e.string(a.languageId))&&$e.uinteger(a.lineCount)&&$e.func(a.getText)&&$e.func(a.positionAt)&&$e.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let c=o.getText(),l=i(a,(f,p)=>{let m=f.range.start.line-p.range.start.line;return m===0?f.range.start.character-p.range.start.character:m}),u=c.length;for(let f=l.length-1;f>=0;f--){let p=l[f],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)c=c.substring(0,m)+p.newText+c.substring(h,c.length);else throw new Error("Overlapping edit");u=m}return c}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);let f=0,p=0,m=0;for(;f<l.length&&p<u.length;)a(l[f],u[p])<=0?o[m++]=l[f++]:o[m++]=u[p++];for(;f<l.length;)o[m++]=l[f++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(wWe||(wWe={}));var kge=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Ju.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Ju.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},$e;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function c(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(c,"numberRange"),t.numberRange=c;function l(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(l,"integer"),t.integer=l;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function f(h){return e.call(h)==="[object Function]"}s(f,"func"),t.func=f;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})($e||($e={}));var ns=class{static{s(this,"LocationFactory")}static{this.range=Is.create.bind(Is)}static{this.position=Ju.create.bind(Ju)}},gE=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=bI.create(e.clientUri,e.clientLanguageId,n,e.getText());return bI.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=bI.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return bI.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=ZP({uri:e,languageId:r})){return new t(Jc(e),bI.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=Is.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=Is.create(Ju.create(r,0),Ju.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};d();d();d();d();var $M={isBlocked:!1,reason:"VALID_FILE"},gY={isBlocked:!1,reason:"NO_MATCHING_POLICY"},_We={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},y2={all:"all",repo:"repo"},II=new vt("contentExclusion");d();d();var AY=class{static{s(this,"PolicyEvaluator")}};d();d();d();var SWe=new vt("repository"),C2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},Cg=class{static{s(this,"GitConfigLoader")}},yY=class extends Cg{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};d();var RWe=require("os");var CY=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return bb.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=bb.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,RWe.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var EY=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(Cg).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new CY(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var KLt=100,Pge=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},AE=class t{constructor(e){this.ctx=e;this.remoteResolver=new EY;this.cache=new Or(KLt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=Gu(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Pge(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(yo),i=Lo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=Lo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=M_(r,o[1]),c=Lo(a,"config");if(await this.tryStat(e,c)!==void 0)return c;let l=Lo(a,"config.worktree");if(await this.tryStat(e,l)!==void 0)return l;let u=Lo(a,"commondir");a=M_(a,(await e.readFileString(u)).trimEnd());let f=Lo(a,"config");return await e.stat(f),f}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};d();var E2=s((t,e)=>{if(Sy.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...Sy.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");d();d();d();var xY=new WeakMap;function bY(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&xY.has(t))return xY.get(t);switch(xY.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=bY(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+bY(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+bY(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return xY.set(t,n),n}s(bY,"t");function IY(t){return bY(t,0)}s(IY,"r");var Bge=new WeakMap;function kWe(t,e,r=IY(e)){let n,i,o=Bge.get(t);o||(Bge.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,f=0;function p(m){for(;u=n[f++];u.r(m));}s(p,"o"),Bge.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[f++],f<=m.length;u instanceof Error?n[f-1].r(u):n[f-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let c=o[0].push(r)-1,l=o[2][c]={};return o[1][c]=e,l.p=new Promise(function(u,f){l.s=u,l.r=f})}s(kWe,"n");var PWe=new WeakMap;function JLt(t,e,r,n=IY(r)){if(e||(e=PWe.get(t)),e||PWe.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=kWe(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(JLt,"n");function BWe(t,e){return function(r,n){return JLt(t,e,r,n)}}s(BWe,"o");d();var ZWe=Ne(jWe(),1);d();var YM=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");d();d();var oMt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},KM=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),sMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),VWe=s(t=>t.join(""),"rangesToString"),$We=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,c=!1,l=!1,u=!1,f=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!l){f=o+1;break}if(a=!0,y==="\\"&&!l){l=!0,o++;continue}if(y==="["&&!l){for(let[E,[x,b,_]]of Object.entries(oMt))if(t.startsWith(E,o)){if(p)return["$.",!1,t.length-r,!0];o+=E.length,_?i.push(x):n.push(x),c=c||b;continue e}}if(l=!1,p){y>p?n.push(KM(p)+"-"+KM(y)):y===p&&n.push(KM(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(KM(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(KM(y)),o++}if(f<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[sMt(y),!1,f-r,!1]}let m="["+(u?"^":"")+VWe(n)+"]",h="["+(u?"":"^")+VWe(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,c,f-r,!0]},"parseClass");d();var TI=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var aMt=new Set(["!","?","+","*","@"]),zWe=s(t=>aMt.has(t),"isExtglobType"),cMt="(?!(?:^|/)\\.\\.?(?:$|/))",TY="(?!\\.)",lMt=new Set(["[","."]),uMt=new Set(["..","."]),dMt=new Set("().*{}+?[]^$\\!"),fMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Lge="[^/]",YWe=Lge+"*?",KWe=Lge+"+?",I3=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#c;#l;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,c=-1,l=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===c+1?(y==="^"||y==="!")&&(l=!0):y==="]"&&!(h===c+2&&l)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,c=h,l=!1,g+=y;continue}if(!i.noext&&zWe(y)&&e.charAt(h)==="("){r.push(g),g="";let E=new t(y,r);h=t.#u(e,E,h,i),r.push(E);continue}g+=y}return r.push(g),h}let u=n+1,f=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===c+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(u===c+2&&l)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,c=u,l=!1,m+=h;continue}if(zWe(h)&&e.charAt(u)==="("){f.push(m),m="";let g=new t(h,f);f.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){f.push(m),m="",p.push(f),f=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),f.push(m),m="",r.push(...p,f),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,c),{_src:r,_glob:e})}get options(){return this.#c}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,E,x]=typeof h=="string"?t.#m(h,this.#t,l):h.toRegExpSource(e);return this.#t=this.#t||E,this.#i=this.#i||x,g}).join(""),f="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&uMt.has(this.#n[0]))){let g=lMt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),E=!r&&!e&&g.has(u.charAt(0));f=y?cMt:E?TY:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[f+u+p,TI(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,TI(this.toString()),!1,!1]}let a=!n||e||r||!TY?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let c="";if(this.type==="!"&&this.#d)c=(this.isStart()&&!r?TY:"")+KWe;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?TY:"")+YWe+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+o+l}return[c,TI(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let c=0;c<e.length;c++){let l=e.charAt(c);if(i){i=!1,o+=(dMt.has(l)?"\\":"")+l;continue}if(l==="\\"){c===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,f,p,m]=$We(e,c);if(p){o+=u,a=a||f,c+=p-1,r=r||m;continue}}if(l==="*"){n&&e==="*"?o+=KWe:o+=YWe,r=!0;continue}if(l==="?"){o+=Lge,r=!0;continue}o+=fMt(l)}return[o,TI(e),!!r,a]}};d();var Mge=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var ac=s((t,e,r={})=>(YM(e),!r.nocomment&&e.charAt(0)==="#"?!1:new T3(e,r).match(t)),"minimatch"),pMt=/^\*+([^+@!?\*\[\(]*)$/,mMt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),hMt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),gMt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),AMt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),yMt=/^\*+\.\*+$/,CMt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),EMt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),vMt=/^\.\*+$/,xMt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),bMt=/^\*+$/,IMt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),TMt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),wMt=/^\?+([^+@!?\*\[\(]*)?$/,_Mt=s(([t,e=""])=>{let r=eGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),SMt=s(([t,e=""])=>{let r=tGe([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),RMt=s(([t,e=""])=>{let r=tGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),kMt=s(([t,e=""])=>{let r=eGe([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),eGe=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),tGe=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),rGe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",JWe={win32:{sep:"\\"},posix:{sep:"/"}},PMt=rGe==="win32"?JWe.win32.sep:JWe.posix.sep;ac.sep=PMt;var Rm=Symbol("globstar **");ac.GLOBSTAR=Rm;var BMt="[^/]",DMt=BMt+"*?",NMt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",LMt="(?:(?!(?:\\/|^)\\.).)*?",MMt=s((t,e={})=>r=>ac(r,t,e),"filter");ac.filter=MMt;var Sm=s((t,e={})=>Object.assign({},t,e),"ext"),FMt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ac;let e=ac;return Object.assign(s((n,i,o={})=>e(n,i,Sm(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Sm(t,o))}static defaults(i){return e.defaults(Sm(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Sm(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Sm(t,o))}},unescape:s((n,i={})=>e.unescape(n,Sm(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,Sm(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,Sm(t,i)),"filter"),defaults:s(n=>e.defaults(Sm(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,Sm(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,Sm(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,Sm(t,o)),"match"),sep:e.sep,GLOBSTAR:Rm})},"defaults");ac.defaults=FMt;var nGe=s((t,e={})=>(YM(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,ZWe.default)(t)),"braceExpand");ac.braceExpand=nGe;var OMt=s((t,e={})=>new T3(t,e).makeRe(),"makeRe");ac.makeRe=OMt;var QMt=s((t,e,r={})=>{let n=new T3(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");ac.match=QMt;var XWe=/[?*]|[+@!]\(.*?\)|\[|\]/,UMt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),T3=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){YM(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||rGe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!XWe.test(o[2]))&&!XWe.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(f=>this.parse(f))];if(u)return[o[0],...o.slice(1).map(f=>this.parse(f))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],l=n[i+2],u=n[i+3];if(c!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let f=n.slice(0);f[i]="**",e.push(f),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],c="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(c==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),x=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),b=!x&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=E?3:y?0:void 0,k=b?3:x?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[P,N]=[e[_],r[k]];P.toLowerCase()===N.toLowerCase()&&(r[k]=P,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,c=0,l=e.length,u=r.length;a<l&&c<u;a++,c++){this.debug("matchOne loop");var f=r[c],p=e[a];if(this.debug(r,f,p),f===!1)return!1;if(f===Rm){this.debug("GLOBSTAR",[r,f,p]);var m=a,h=c+1;if(h===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<l;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,l,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===l))}let y;if(typeof f=="string"?(y=p===f,this.debug("string match",f,p,y)):(y=f.test(p),this.debug("pattern match",f,p,y)),!y)return!1}if(a===l&&c===u)return!0;if(a===l)return n;if(c===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return nGe(this.pattern,this.options)}parse(e){YM(e);let r=this.options;if(e==="**")return Rm;if(e==="")return"";let n,i=null;(n=e.match(bMt))?i=r.dot?TMt:IMt:(n=e.match(pMt))?i=(r.nocase?r.dot?AMt:gMt:r.dot?hMt:mMt)(n[1]):(n=e.match(wMt))?i=(r.nocase?r.dot?SMt:_Mt:r.dot?RMt:kMt)(n):(n=e.match(yMt))?i=r.dot?EMt:CMt:(n=e.match(vMt))&&(i=xMt);let o=I3.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?DMt:r.dot?NMt:LMt,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(f=>{if(f instanceof RegExp)for(let p of f.flags.split(""))i.add(p);return typeof f=="string"?UMt(f):f===Rm?Rm:f._src});return u.forEach((f,p)=>{let m=u[p+1],h=u[p-1];f!==Rm||h===Rm||(h===void 0?m!==void 0&&m!==Rm?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==Rm&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=Rm))}),u.filter(f=>f!==Rm).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+c+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<o.length;c++){let l=o[c],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ac.defaults(e).Minimatch}};ac.AST=I3;ac.Minimatch=T3;ac.escape=Mge;ac.unescape=TI;var Fge="contentExclusion",wY=class extends AY{static{s(this,"CopilotContentExclusion")}#e;#t=new Or(1e4);#i=new Or(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=M_(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??y2.all);if(!i)return gY;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let c=this.evaluateTextBasedRules(e,i,r);if(c.isBlocked)return c}catch(n){return II.exception(this.#e,n,`${Fge}.evaluate`),_We}return $M}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=$M,a,c=Hue(e.replace(r,""));e:for(let l of n)for(let u of l.paths)if(ac(c,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=Oge(l,"FILE_BLOCKED_PATH"),a=u;break e}return II.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:c,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(c=>c.ifAnyMatch),o=r.filter(c=>c.ifNoneMatch);if(!n||i.length===0&&o.length===0)return $M;let a=this.evaluateFileContent(i,o,n);return II.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>iGe(a)).some(a=>a.test(n)))return Oge(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>iGe(a)).some(a=>a.test(n)))return Oge(i,"FILE_BLOCKED_TEXT_BASED");return $M}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ia(this.#e,e,`${Fge}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=BWe(async e=>{let r=await this.#e.get(Qr).getGitHubSession();if(!r)throw new Bs("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(y2.all);e.filter(u=>u!==y2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==y2.all).join(",")),i.searchParams.set("scope",o?y2.all:y2.repo);let c=await Zp(this.#e,r,i.href),l=await c.json();if(!c.ok){if(c.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:l.message}),new VA(c)}return this.#s("fetch.success"),E2(GMt,l).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(AE).getRepo(Gu(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Rt(this.#e,`${Fge}.${e}`,Dr.createAndMarkAsIssued(r,n))}};function iGe(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(iGe,"stringToRegex");function Oge(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(Oge,"fileBlockedEvaluationResult");var qMt=I.Object({name:I.String(),type:I.String()}),HMt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:qMt}),Qge=I.Array(HMt),WMt=I.Object({rules:Qge,last_updated_at:I.String(),scope:I.String()}),GMt=I.Array(WMt);var Mc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new wY(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(pr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(pr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){if(!this.#e)return{isBlocked:!1};let i=[],o=s(async(l,u)=>{let f=Date.now(),p=await u.evaluate(e,r),m=Date.now();return i.push({key:l,result:p,elapsedMs:m-f}),p},"track"),c=(await Promise.all([o("contentExclusion.evaluate",this.#t)])).find(l=>l?.isBlocked)??{isBlocked:!1};try{for(let l of i)this.#i(l.key,e,l.result,l.elapsedMs)}catch(l){II.error(this.ctx,"Error tracking telemetry",l)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(po).setInactive(r??"Copilot is disabled"):this.ctx.get(po).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===gY.reason)return II.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let c={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},l={elapsedMs:i};return Rt(this.ctx,e,Dr.createAndMarkAsIssued(c,l)),Rt(this.ctx,e,Dr.createAndMarkAsIssued({...c,path:r},l),1),II.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function yE(t,e,r){let n=await t.get(Mc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(yE,"isDocumentValid");var pr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await yE(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Jc(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return yE(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(yo).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(yo).readFileString(e)}getWorkspaceFolder(e){let r=Jc(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Jc(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Jc(e.uri);for(let n of this.getWorkspaceFolders()){let i=Jc(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Oi(r)}};function Gs(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(Gs,"statusFromTextDocumentResult");var mn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(pr).getRelativePath(e)??Oi(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(pr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await yE(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:gE.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(yo).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(yo).stat(e)).size/1024/1024}};d();d();var Od=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function Ny(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(Ny,"delay");d();var Uge=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},_Y=class extends Uge{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var Lf=class{constructor(e){this.ctx=e;this.#e=new vt("AsyncCompletionManager");this.requests=new Or(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(qge(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new _Y;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:0,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.ctx,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Bt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Od,c=new Map,l=s(f=>()=>{let p=c.get(f);p!==void 0&&(p(),c.delete(f),!o&&c.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(f=>{if(qge(r,n,f)){if(f.state===0){let p=r.substring(f.prefix.length),{completionText:m}=f.choice;if(!m.startsWith(p)||m.length<=p.length){l(f.headerRequestId)();return}m=m.substring(p.length),f.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...f.choice,completionText:m},f.allChoicesPromise]),o=!0}}else this.cancelRequest(e,f),l(f.headerRequestId)()},"next");for(let[f,p]of this.requests)qge(r,n,p)?c.set(f,p.subject.subscribe({next:u,error:l(f),complete:l(f)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let f of c.values())f()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function qge(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(qge,"isCandidate");d();d();var XM=class{constructor(e){this.maxSize=e;this.root=new JM;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let c=o.slice(0,i.length),l=new JM;n.removeChild(o),n.addChild(c,l),l.addChild(o.slice(c.length),a),n=l,i=i.slice(c.length);break}if(i.length>0){let o=new JM;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],c=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},JM=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Eg=class{constructor(){this.cache=new XM(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new XM(100)}};d();d();d();var Ly=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return $u.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=_ae(n,$u.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{Sae(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var SY=class extends Ly{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let c=[...this.completion.matchAll(/\n/g)],l=this.lineLimit+this.lookAhead;c.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=c[this.lineLimit-1].index),c.length>=l&&l>0&&(this.lookAheadOffset=c[l-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,c=r.nextSibling;for(;c&&c.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(c);)a=c,c=c.nextSibling;return c&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function oGe(t,e){var c=[];try{let r=t.getText();let n=t.offsetAt(e);let i=_ae(c,$u.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(l){var u=l,f=!0}finally{Sae(c,u,f)}}s(oGe,"getBlockPositionType");d();d();var CE={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};d();function sGe(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let f;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?f=-.08436540015142402:t[8]>1861.5000000000002?f=-.01621425699342421:f=.01878613821895428:f=.031052879158242532:t[8]>319.50000000000006?f=-.031536619360997865:t[7]>3.5000000000000004?f=-.004510586962343298:f=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?f=.004757490541310808:t[9]>6.500000000000001?f=-.008842393772207996:t[31]>1e-35?f=.0010536183837006993:t[308]>1e-35?f=-.008145882815435419:t[2]>98.50000000000001?f=-.08404937622173021:t[276]>1e-35?f=.0020072791321856663:t[19]>1e-35?f=-.023031820639490178:f=-.04553314326377875:t[8]>2134.5000000000005?f=-.02244583113572251:t[134]>1e-35?f=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?f=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?f=-.00447733056482096:f=-.10191061664873849:f=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?f=-.07570059131536411:t[243]>1e-35?f=-.040983393346598646:t[3]>9.500000000000002?f=.014763759061483812:t[92]>1e-35?f=.05136368898963024:f=-.008162398981149495:t[127]>1e-35?f=.013999119696708346:t[23]>1e-35?t[20]>1e-35?f=.14138985500120907:f=.008668274102844162:t[284]>1e-35?f=.06356484011042893:f=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let E;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?E=.003325460510319164:E=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?E=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?E=.0697359767152808:t[230]>1e-35?E=.06513506845651572:E=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?E=.013616385013146277:E=.04171540100223404:E=-.04360396575094823:t[212]>1e-35?E=.025945477945627522:E=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?E=-.07856453318384411:E=-.014803893522351739:t[39]>1e-35?E=-.09185452630751932:t[149]>1e-35?E=-.07122426086157027:t[134]>1e-35?E=-.04231052091434186:t[227]>1e-35?E=-.029815824273994197:t[50]>1e-35?E=-.15736496271211153:t[222]>1e-35?E=-.02360285356956629:t[128]>1e-35?E=-.03922080193836443:t[136]>1e-35?E=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?E=-.0029736170756835783:E=-.06482902102259112:t[84]>1e-35?E=-.11340924635708383:t[94]>1e-35?E=-.03635703457792193:t[118]>1e-35?E=-.058181913914186034:t[126]>1e-35?E=-.062030576241517366:t[116]>1e-35?E=-.045086301850604006:t[25]>1e-35?E=-.031665223656767286:t[203]>1e-35?E=-.009444685731407691:E=.0112265153772187;let x;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?x=.022717227245241684:x=-.049700413274686266:x=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?x=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?x=-.12263724050601095:x=.0070743478891288035:t[288]>1e-35?x=-.050439138582109:x=.0255701593657891:x=-.005812703740580558:t[6]>49.50000000000001?x=-.008542694147899113:x=.035147383686665:x=-.0960461939274094:t[32]>1e-35?x=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?x=-.01800870272656664:x=-.07817304234604389:t[30]>1e-35?x=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?x=.08778416018479411:x=-.026563982720830256:x=-.05296139548112329:t[50]>1e-35?x=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?x=-.036572140520852024:t[183]>1e-35?x=-.10766853736801459:x=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?x=.09513215942486053:x=-.03641865277445567:t[10]>59.50000000000001?x=.03177172388687933:t[39]>1e-35?x=-.10234241303898953:t[243]>1e-35?x=-.02966738115984321:t[190]>1e-35?x=-.04312785336449181:t[118]>1e-35?x=-.05808521194081524:x=.006720381600740378;let b;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?b=-.046284053681928526:t[210]>1e-35?b=49778070699847876e-21:t[13]>1e-35?b=.03328070054739309:t[128]>1e-35?b=-.054790214922938896:t[126]>1e-35?b=-.08524792218532945:b=.014414055975542446:t[1]>38.50000000000001?b=-.07287851335872973:b=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?b=-.12459748864088374:b=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?b=.13044981041138526:t[9]>71.50000000000001?b=-.056068402282406865:t[9]>12.500000000000002?b=.038957722962512764:b=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?b=-.0852126122372075:t[225]>1e-35?b=.10082066771689505:t[1]>161.50000000000003?b=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?b=-.010835400874777133:b=.004607419973807752:b=-.016989075258564062:b=.009205417251698097:t[23]>1e-35?t[20]>1e-35?b=.10184317139657878:t[0]>5724.500000000001?b=-.1163666496650542:t[1]>106.50000000000001?b=.1303850608190687:t[129]>1e-35?b=.10745031509534769:b=.006166901738036226:t[31]>1e-35?b=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?b=.005004582564506611:b=-.10481581731668346:t[19]>1e-35?b=-.009850706427306281:b=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let P;t[131]>1e-35?P=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?P=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?P=-.022305242912035072:P=.024792895826340516:P=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?P=.2080083584805785:P=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?P=.060783227455868206:P=-.056904865557409035:P=-.03278952553107572:t[192]>1e-35?P=.13117402617043625:P=.01647119888257836:P=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?P=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?P=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?P=-.11083976837572328:t[146]>1e-35?P=-.03359294484446772:P=-.0042815953591236475:t[190]>1e-35?P=-.09264239592903775:t[10]>1e-35?P=.022282638485105657:P=-.0205994057928458:t[5]>4918.500000000001?P=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?P=.08935072241972036:P=-.03781647876237494:P=.0062655753179671515:t[31]>1e-35?P=.008603500300349887:t[230]>1e-35?P=.03350056932774173:t[23]>1e-35?t[241]>1e-35?P=.10277555508503314:P=.0017901817172993888:t[2]>98.50000000000001?P=-.05920081229672715:P=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let M;t[131]>1e-35?M=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?M=.07473600489975568:t[0]>93.50000000000001?M=-.021596848506011502:M=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?M=.10264284346448256:M=.031042487183181262:M=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?M=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?M=.006271403149804702:M=-.030013637555715046:t[0]>4449.500000000001?M=-.06556876058654929:M=.06437994816903034:t[32]>1e-35?M=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?M=-.09349726304052086:t[210]>1e-35?M=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?M=-.029188394315052574:M=.017219308333820193:M=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?M=-.04428555753857688:M=.0001456106867817353:t[5]>213.50000000000003?M=.01740292726636365:M=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?M=.03410288911259329:t[121]>1e-35?M=-.06056527462120627:t[8]>2592.5000000000005?M=.12166808844363577:t[191]>1e-35?M=.11669879218998758:M=-.001664858391716235:M=-.01262927450503166:M=-.04506589951879664:t[227]>1e-35?M=-.08548904959752329:M=.02156080776537726;let J;t[306]>1e-35?t[149]>1e-35?J=-.1389218965136736:J=-.032218642644416894:t[13]>1e-35?J=.006465035217331847:t[50]>1e-35?J=-.1381687930130022:t[179]>1e-35?J=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?J=-.03262719498763048:J=.023342916702125613:t[191]>1e-35?J=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?J=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?J=-.09989343595668776:J=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?J=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?J=-.09165257825246746:t[9]>32.50000000000001?J=.02484870392366004:J=-.008499493096971395:t[8]>24.500000000000004?J=.02459679192828244:J=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?J=.0015644546318714849:J=-.06579524865022705:J=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?J=.03331853632960164:J=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?J=-.019091477207111116:J=.037878468575478504:t[94]>1e-35?J=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?J=.16919658785098224:t[243]>1e-35?J=-.06580584936754524:J=.01567555159935563:t[129]>1e-35?J=.06721746994993226:t[10]>32.50000000000001?J=-.046394462507797975:J=-.006436180519584767;let pe;t[131]>1e-35?pe=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?pe=.019122095523977856:t[298]>1e-35?pe=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?pe=-.026094309429557913:t[204]>1e-35?pe=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?pe=.012643810980689466:pe=-.07884161741497837:pe=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?pe=.04493082949897325:pe=.18046359750455776:t[7]>18.500000000000004?pe=-.018667348656891496:pe=.02584325784698236:pe=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?pe=.04749240016989375:pe=-.0333334578246718:t[5]>3276.5000000000005?pe=.11330554740098908:t[7]>94.50000000000001?pe=.1296600395033268:pe=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?pe=-.13787130789142835:t[0]>1847.5000000000002?pe=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?pe=.028856848462727104:pe=-.11197632885851168:pe=.08169801342016791:t[1]>22.500000000000004?pe=-.021052888644970163:pe=.019048604298876753:t[7]>4.500000000000001?pe=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?pe=.03432638833359197:pe=-.0036767863082454973:t[1]>48.50000000000001?pe=.03087375270128195:t[2]>3.5000000000000004?pe=-.04219917149740248:pe=.018818493993207935;let Y;t[306]>1e-35?Y=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?Y=-.09091897542577475:Y=.04042943082645558:t[218]>1e-35?Y=.056254985867151:Y=-.053848117950183044:Y=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?Y=.021581808008986944:Y=-.05639286496176611:Y=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?Y=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?Y=.023885302967553288:Y=.1617794086125622:t[212]>1e-35?Y=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?Y=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?Y=.01894935813286188:Y=-.06449356357429188:Y=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?Y=-.034718828212885515:Y=.0898976288814321:t[1]>17.500000000000004?Y=-.15440137451988326:Y=-.03864183216821465:Y=.009988507307006308:Y=-.08540311947043305:t[50]>1e-35?Y=-.13323659732101975:t[134]>1e-35?Y=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?Y=.08082476177379844:Y=-.041665761903645876:t[179]>1e-35?Y=-.12405023987936657:t[39]>1e-35?Y=-.06247416524997478:t[138]>1e-35?Y=-.10724031753676487:Y=-.0005423122305122404;let G;t[308]>1e-35?G=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?G=.023223358334607133:G=-.04383410185346742:G=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?G=.023406489302867494:G=-.085521220804058:G=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?G=.028120059780969632:G=-.04211009474298743:t[294]>1e-35?G=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?G=-.0993035220737934:G=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?G=.029770210551187937:G=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?G=.06421359317599738:G=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?G=.024368404612215164:G=-.04045232374803373:t[131]>1e-35?G=.017372701982485795:t[120]>1e-35?G=.08812710275150198:t[18]>1e-35?t[90]>1e-35?G=.18451364351180236:t[7]>33.50000000000001?G=-.03850813130183531:t[195]>1e-35?G=.06966114053446336:t[3]>16.500000000000004?G=-.0012869181693341211:t[0]>4242.500000000001?G=-.054625548611291035:G=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?G=.006302103427145562:G=.13967622319898698:t[121]>1e-35?G=-.038798585213145644:t[5]>4544.500000000001?G=-.08050498033009466:G=-.002986974112681435;let H;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?H=-.03461119351456781:H=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?H=-.12404435523286539:H=-.0034376913880382956:H=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?H=.0037507103585310234:H=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?H=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?H=-.04832024079663151:t[37]>1e-35?H=-.037103393468366934:H=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?H=.032539071163832034:t[5]>1643.5000000000002?H=.036408625378035665:t[0]>1500.5000000000002?H=-.1346358322854993:H=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?H=-.1133991164577881:t[9]>52.50000000000001?H=-.024478640359723122:H=.03673777861098756:H=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?H=.002583438691776944:H=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?H=-.02141222346712401:H=.06392462314316179:t[4]>12.500000000000002?H=.08700122294434816:t[8]>267.50000000000006?H=.056923170082743224:H=-.07716309825583327:t[32]>1e-35?H=-.03961343943752142:H=.002674914122888783:t[1]>42.50000000000001?H=-.05217539654421676:t[145]>1e-35?H=.09553630282946368:H=-.009424791262477729;let ce;t[183]>1e-35?ce=-.05753337139158443:t[308]>1e-35?ce=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ce=-.10477869875380448:ce=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ce=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ce=-.04442302951713574:ce=.00012409888451734224:ce=-.092199119633697:t[225]>1e-35?ce=.13773072450201831:t[0]>2882.5000000000005?ce=.0028540012229920533:t[298]>1e-35?ce=.07134486044361629:ce=.014297412329837425:t[145]>1e-35?ce=.05608385321902638:t[92]>1e-35?ce=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ce=-.0039957800609801315:ce=.0776927564241081:t[203]>1e-35?ce=-.05502900859432093:t[105]>1e-35?ce=.06062892720841595:ce=-.009574839629252128:t[31]>1e-35?ce=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ce=.08818126313644752:t[8]>161.50000000000003?ce=.014353968957885408:ce=-.022240738532827903:t[210]>1e-35?ce=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ce=-.043902062079383485:ce=-.014741559220396223:ce=-.00934935734853194:t[6]>32.50000000000001?ce=.1514593126307404:ce=.010771222510801532:t[10]>22.500000000000004?ce=.01412495209334078:ce=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let Q;t[0]>384.50000000000006?t[84]>1e-35?Q=-.06088131453064195:t[147]>1e-35?Q=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?Q=.04219361472548491:Q=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?Q=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?Q=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?Q=-.11431764534511478:Q=.013549717238356157:Q=-.020987333767091276:t[6]>2.5000000000000004?Q=-.02914877855133127:Q=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?Q=-.10087072787978416:t[37]>1e-35?Q=-.030467397753331196:t[229]>1e-35?Q=-.1017559811057469:t[4]>20.500000000000004?Q=-.00413177742240167:t[20]>1e-35?Q=.05213315982685969:Q=.0037921635866823133:t[8]>51.50000000000001?Q=.07327913092421544:t[6]>49.50000000000001?Q=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?Q=.02744420891894289:Q=.11288946357194463:Q=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?Q=-.012329314369909049:Q=.026816658655600168:Q=-.0872405354618811:Q=.007872673500247845:t[1]>42.50000000000001?Q=-.04309044198258254:t[145]>1e-35?Q=.07572529147860785:t[7]>5.500000000000001?Q=-.013837187093264945:t[1]>17.500000000000004?Q=.04208698439539668:Q=-.06284346769019863;let z;t[294]>1e-35?z=-.0384794324818203:t[266]>1e-35?z=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?z=.07432960094940501:z=-.035248735855751855:t[134]>1e-35?z=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?z=-.01706896375068821:z=.08212247914968074:t[2]>59.50000000000001?z=-.09546478958824225:t[6]>53.50000000000001?z=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?z=.02816463285971267:z=.15449139016588445:z=-.10199787406123524:z=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?z=-.13924786681478077:z=-.0072772442570213335:t[39]>1e-35?z=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?z=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?z=-.11174465335620831:z=.00013144040097180107:z=-.08493919336681105:t[42]>1e-35?z=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?z=-.015540659878839153:z=-.14442609417300142:t[21]>1e-35?z=-.025251979447574083:z=.0023698372645272847:t[18]>1e-35?z=.07269739695712212:t[8]>2592.5000000000005?z=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?z=-.01835130329646532:t[9]>45.50000000000001?z=.02023047454629885:z=.16469378262221102:z=-.042975030085836426;let re;t[8]>2915.5000000000005?t[297]>1e-35?re=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?re=-.01034964686484714:re=-.07357437440667927:re=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?re=-.09476398869062203:t[9]>72.50000000000001?re=-.0757383854264379:re=.02806542779508718:re=-.05147742568418084:re=.10212721564444344:re=.0518263760642861:re=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?re=-.10669213185972036:re=.027050434286384796:t[302]>1e-35?re=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?re=.06354599160071946:t[1]>67.50000000000001?re=.05317447949011187:re=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?re=-.09369289448773599:t[0]>2215.5000000000005?re=.04077965380363924:t[0]>807.5000000000001?re=-.0591771776458298:re=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?re=-.016323380219241672:re=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?re=.03720704290087811:re=-.008730548158766654:t[4]>80.50000000000001?re=-.05346644687473197:re=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?re=.019984510398089086:re=-.03917825025861855:t[9]>170.50000000000003?re=-.09759719821334525:re=-.0023586682752856298;let fe;t[183]>1e-35?t[17]>1e-35?fe=.030100940443356424:t[10]>1.5000000000000002?fe=-.10861112216742408:fe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?fe=-.032062878390325456:fe=-.10808232631806887:t[8]>1641.5000000000002?fe=-.06147013392655731:t[4]>12.500000000000002?fe=.03324767551088266:t[145]>1e-35?fe=.028851633810612017:fe=-.054871239091792784:t[134]>1e-35?fe=-.023813968121342108:t[266]>1e-35?fe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?fe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?fe=-.025350325484720576:fe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?fe=.056817276537534815:fe=-.07674158463557636:fe=-.06335553143454145:t[1]>56.50000000000001?fe=.16390494217299284:fe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?fe=.041717597065890205:fe=-.10357913492269129:t[10]>29.500000000000004?fe=.1365512866715726:fe=.020600048310575665:fe=.09708785634773187:fe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?fe=-.03146213719547347:fe=.11784024316238083:fe=-.050940520532045355:fe=-.047988344143075616:t[191]>1e-35?fe=.028764654731460032:fe=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let me;t[8]>1014.5000000000001?t[9]>137.50000000000003?me=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?me=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?me=.07211107542565391:me=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?me=-.0751486415451188:t[1]>59.50000000000001?me=.13459005084554104:me=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?me=.06715575425741895:me=-.005895690393702183:t[8]>2915.5000000000005?me=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?me=-.00029068886245881074:me=.0613467393188786:t[148]>1e-35?me=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?me=.003887223773199377:me=-.08553893131979015:me=.025654192706396767:me=-.05651733979610658:me=-.02039913645229667:t[2]>7.500000000000001?me=-.1058450646728524:me=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?me=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?me=.1283258201586378:me=-.01718135372229775:me=-.07702452408491414:t[125]>1e-35?me=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?me=.04273051857848212:me=-.04533122948101463:t[2]>196.50000000000003?me=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?me=.0231032972703664:me=-.04807386814498683:me=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Qe;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Qe=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Qe=-.017696526862422682:Qe=.1450050954613223:Qe=-.05406930069823832:Qe=-.08308700260259043:t[120]>1e-35?Qe=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Qe=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Qe=.038431826961746934:Qe=-.05937462906539856:t[9]>65.50000000000001?Qe=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Qe=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Qe=-.09579030954062734:Qe=.025064711572811746:Qe=.02579440518821548:Qe=.1044440128091862:Qe=-.058348633139536844:Qe=.07766788227934436:Qe=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Qe=.07463684068207214:Qe=.18244269035484484:t[6]>39.50000000000001?Qe=-.06050050067471004:Qe=.05787759066913493:Qe=.010783225857972171:Qe=.1674891243602606:t[4]>9.500000000000002?Qe=-.004814132027475892:Qe=-.14543299413454813:Qe=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Qe=-.07634466313617769:Qe=.0287825335169114:Qe=-.06894721943300268:Qe=-.00023988459059521937;let ke;t[131]>1e-35?t[1]>93.50000000000001?ke=-.05706887458825395:t[2]>1.5000000000000002?ke=.011446637886629108:ke=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?ke=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?ke=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?ke=.026278724448495064:ke=.17053138400480508:t[0]>4463.500000000001?ke=-.06482289890096041:ke=.03026516489536295:ke=-.031785170717683144:ke=.1312690622980455:t[13]>1e-35?ke=.14336922540461444:ke=.03523850945454039:ke=-.015407465968975714:t[39]>1e-35?ke=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?ke=-.0659975068798723:ke=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?ke=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?ke=.057409156184759516:ke=.2024322059866388:ke=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?ke=.010648654146284154:t[308]>1e-35?ke=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?ke=.12364025998551711:ke=-.02247495081065243:t[1]>22.500000000000004?ke=-.0726295464624251:ke=.03481895086048152:t[0]>4331.500000000001?ke=-.04775443357020673:ke=.07172377425057568:t[2]>89.50000000000001?ke=-.11782645274716962:ke=.00010092665257989378;let tt;t[147]>1e-35?tt=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?tt=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?tt=-.016101990375700172:t[0]>2579.5000000000005?tt=-.13045089661551845:tt=-.02874367814784938:tt=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?tt=.17084176915326055:tt=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?tt=.10591712319944074:tt=-.024082167264285:tt=.16497698867036126:tt=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?tt=-.021012910475524206:tt=-.13058422554298485:t[0]>1102.5000000000002?tt=.10955864175201457:tt=-.03566689354348996:t[1]>11.500000000000002?tt=-.02093884208606101:tt=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?tt=-.013861861436128482:tt=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?tt=.10163873449625677:tt=-.02779270277623805:t[1]>26.500000000000004?tt=-.08035058228527389:tt=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?tt=-.007028075523033826:tt=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?tt=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?tt=-.0032075580718124892:tt=-.04442829143298883:tt=-.06597073245775804:tt=.0015594090939337751;let Fe;t[223]>1e-35?t[8]>668.5000000000001?Fe=-.12803889879260094:Fe=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Fe=.08967966612917375:t[1]>39.50000000000001?Fe=-.059791671514498074:Fe=.05648934961902822:t[2]>59.50000000000001?Fe=-.08633234097449628:t[6]>53.50000000000001?Fe=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Fe=.025606129643140924:Fe=.13835395886271978:Fe=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Fe=-.09975506556937946:t[10]>36.50000000000001?Fe=-.09427724661655643:t[10]>24.500000000000004?Fe=.07329330653410447:Fe=-.02271182965807972:Fe=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Fe=-.05082091374050816:Fe=.1687114435254966:t[0]>2314.5000000000005?Fe=-.06422664016383926:Fe=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Fe=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Fe=-.1274167728754332:Fe=.01308079126447365:t[4]>73.50000000000001?Fe=.13854015371106546:t[4]>48.50000000000001?Fe=-.03684255740123261:t[6]>45.50000000000001?Fe=.10329912215813097:t[10]>77.50000000000001?Fe=-.08630788656925215:Fe=.031022006843800853:t[1]>25.500000000000004?Fe=-.08278381528048026:Fe=.06664374548141594:t[84]>1e-35?Fe=-.05624227409079396:Fe=.00012184182357340415;let ht;t[179]>1e-35?ht=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ht=-.07595415373151816:ht=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ht=.022822510448266862:ht=.17491569312933697:ht=-.058362287133533565:t[2]>2.5000000000000004?ht=-.03633895806364428:ht=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ht=-.07294848747514579:ht=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ht=-.07009535282685533:t[8]>2640.0000000000005?ht=-.051761240111316276:t[131]>1e-35?ht=-.06245774419231631:ht=.03495606662854905:ht=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ht=.0015036626973581122:ht=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ht=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ht=.022343994371919224:ht=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ht=.07724450228328664:t[0]>3853.5000000000005?ht=-.15671707454435677:t[10]>28.500000000000004?ht=-.10179090671841723:ht=.014878216919760927:ht=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ht=.14054154485273487:ht=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ht=-.08632985141410315:ht=.005524157938954954:ht=-.08802502622523681:ht=-.0004649168897260341;let St;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?St=-.007458687464321174:St=-.09444966249102484:t[1]>23.500000000000004?St=.08564129697360716:St=-.07105002902845851:St=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?St=-.10326216566705966:t[1]>26.500000000000004?St=.0050539832484585365:St=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?St=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?St=.05783632021087773:t[10]>17.500000000000004?St=-.06720598671764105:t[1]>47.50000000000001?St=.097495825172558:St=-.013372242800584872:St=-.06463226787713715:t[42]>1e-35?St=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?St=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?St=.11051270080118503:St=.027719462817590454:t[8]>597.5000000000001?St=-.08441503592016869:St=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?St=-.12190088985091102:St=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?St=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?St=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?St=.016585157185448045:St=-.11032043771149425:St=.01586986028570486:t[8]>388.50000000000006?St=-.10592413013261853:St=.04930703248769364:t[13]>1e-35?St=.003621937787920821:St=-.0013786331198611841;let xt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?xt=.009769895322846493:xt=-.10620052926943656:t[9]>19.500000000000004?xt=.03781202525403449:t[9]>14.500000000000002?xt=-.11485785321365344:t[9]>6.500000000000001?xt=.07677177833073881:t[0]>4342.500000000001?xt=-.07079285609687631:t[49]>1e-35?xt=.06156814809246001:xt=-.014788509042554625:xt=-.032659201618470655:t[5]>5207.500000000001?xt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?xt=-.03094160322187924:t[1]>29.500000000000004?xt=.09474646043921069:xt=.023445783928231618:xt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?xt=-.07164443768784848:t[1]>29.500000000000004?xt=.089473622509272:t[8]>597.5000000000001?xt=-.08155349903101317:xt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?xt=-.004003900679358653:t[190]>1e-35?xt=-.09236113461485262:t[8]>3198.5000000000005?xt=-.0124130160451179:xt=.018453070064009328:t[15]>1e-35?xt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?xt=-.0009580759587680961:xt=-.03227283036698222:xt=.01369287669536875:t[1]>50.50000000000001?xt=-.04213060332500437:t[35]>1e-35?xt=-.11508095777767471:t[190]>1e-35?xt=-.08611884672400155:t[297]>1e-35?xt=.05723551879433584:xt=-.004829340082311461;let Tt;t[183]>1e-35?Tt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?Tt=-.11753465135886734:Tt=-.007515490299047085:Tt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?Tt=-.12371142493530439:t[1]>36.50000000000001?Tt=.032189417575190435:Tt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?Tt=-.0784518658439288:t[2]>54.50000000000001?Tt=.12477882322370665:Tt=.000313468482399738:Tt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?Tt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?Tt=.0353146070135579:Tt=-.06327619611098285:Tt=.02813577701641991:Tt=-.12354390728506215:t[34]>1e-35?Tt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?Tt=-.01245803535276381:Tt=-.07169472553475001:t[1]>11.500000000000002?Tt=.12989984824561698:Tt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?Tt=.010390226893521422:t[10]>14.500000000000002?Tt=.16790888126487719:Tt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?Tt=-.043398307129729134:Tt=.09963544907820426:t[9]>30.500000000000004?Tt=-.13540713124984502:t[9]>17.500000000000004?Tt=.0509435850590757:Tt=-.04761897852404613:t[4]>78.50000000000001?Tt=.09197086656470652:Tt=.0006771050176682337;let le;t[122]>1e-35?t[6]>36.50000000000001?le=.05686884451670743:le=-.05334759543084309:t[266]>1e-35?le=-.08603579519816038:t[157]>1e-35?le=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?le=-.0499592651503952:t[0]>725.5000000000001?le=.11780353905132664:le=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?le=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?le=-.03190157229022304:le=.07985197845805492:le=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?le=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?le=-.027174047777029083:le=.057117284879796476:t[3]>43.50000000000001?le=-.0016147040913107311:le=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?le=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?le=-.01466076988151239:le=.13375695925484857:le=-.04885873081899647:t[0]>5566.500000000001?le=.11086813028591343:t[8]>992.5000000000001?le=-.07622304217072383:le=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?le=.03285858361708423:le=-.12354858211764992:le=.0672788301823281:t[15]>1e-35?le=.08658836986585006:le=-.02741484278509758:t[290]>1e-35?le=-.08161310335133287:t[135]>1e-35?le=-.04824156054814152:le=.0009156904299554183;let Ue;t[3]>7.500000000000001?Ue=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ue=.03642374718166293:Ue=.16379973756366603:Ue=-.03946685266127979:t[186]>1e-35?Ue=.07618896623420895:t[96]>1e-35?Ue=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Ue=-.022822371600847505:Ue=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Ue=.044416424920571296:Ue=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ue=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Ue=.1061937286809567:t[7]>54.50000000000001?Ue=.11487507743121311:t[8]>819.5000000000001?Ue=-.07181278009001418:t[10]>25.500000000000004?Ue=.13499019430369633:t[1]>31.500000000000004?Ue=.09032979489780704:Ue=-.12754166393372374:t[9]>37.50000000000001?Ue=-.05093963635361407:Ue=-.005026651151683848:t[9]>2.5000000000000004?Ue=.07619735785573735:Ue=.012363301341532136:t[26]>1e-35?Ue=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Ue=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Ue=-.10764172927882483:Ue=.01890760098464703:Ue=.06573095405846417:t[8]>634.5000000000001?Ue=-.00783575973273707:Ue=-.050612689680229306:t[1]>22.500000000000004?Ue=-.0016842490401359626:Ue=.0738227088444087:Ue=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let nt;t[189]>1e-35?t[0]>5269.500000000001?nt=-.103183298350443:t[2]>51.50000000000001?nt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?nt=-.05186168947388339:nt=.0496996365539082:t[10]>23.500000000000004?nt=.1404445738719:t[93]>1e-35?nt=.0027146310074558505:t[5]>3821.5000000000005?nt=.002153033152069652:t[4]>2.5000000000000004?nt=.007663539551317215:nt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?nt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?nt=-.021479467709980358:nt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?nt=.021660293256233334:nt=-.0927396152303864:nt=.0665074081601698:t[0]>1550.5000000000002?nt=.08972407105958534:nt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?nt=.06761927942466854:nt=-.015762168112653286:t[17]>1e-35?nt=.10311304131145381:nt=-.017672785252336027:nt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?nt=-.10638321435298535:nt=.0007073011744385905:t[18]>1e-35?nt=-.027056185501334325:t[145]>1e-35?nt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?nt=.09762140519655171:t[9]>110.50000000000001?nt=-.06581942957595835:t[6]>54.50000000000001?nt=.04959634035251596:nt=.0022616298654554207:nt=-.007437620924990854;let ee;t[179]>1e-35?ee=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?ee=.1470294450403005:ee=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?ee=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?ee=.07965955447707423:t[10]>10.500000000000002?ee=-.09236156404262426:ee=.03396273196231458:ee=-.13246465021467432:ee=.07092822261735353:ee=-.08753829085942:ee=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?ee=.004705878789890202:ee=.13775378964952867:ee=-.04770928980587811:t[10]>29.500000000000004?ee=.011221519891071544:t[0]>3853.5000000000005?ee=.06365381191628273:ee=.15506252245336827:t[1]>37.50000000000001?ee=-.07254777021042061:ee=.026514587757252385:t[308]>1e-35?ee=.04115804816617256:t[10]>26.500000000000004?ee=.02077721353011946:t[5]>3548.5000000000005?ee=-.1280907116663952:ee=-.021974774274438:t[306]>1e-35?ee=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?ee=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?ee=-.005710865560475598:t[94]>1e-35?ee=-.06751507982853555:ee=.027250040757588703:t[9]>52.50000000000001?ee=.07060357924595577:ee=-.030297760713011795:ee=-.0006005400085266517;let oe;t[113]>1e-35?oe=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?oe=-.06996356565314456:oe=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?oe=-.08317707559926495:t[21]>1e-35?oe=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?oe=-.010538203005984922:oe=.08454819465349446:t[9]>124.50000000000001?oe=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?oe=-.08542251249346582:t[9]>50.50000000000001?oe=-.023428882537657472:oe=.010042500833979073:oe=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?oe=.03006025206979096:t[9]>108.50000000000001?oe=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?oe=.04222035773042132:oe=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?oe=-.07209095448054853:oe=.028065954981903313:oe=.08714651929917122:oe=-.006678820669279169:t[10]>40.50000000000001?oe=.006982396294941626:oe=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?oe=-.09351114982645548:t[4]>3.5000000000000004?oe=-.004837550129223451:oe=-.08324141237464677:t[303]>1e-35?oe=.10703037493990825:t[9]>156.50000000000003?oe=-.10803018621648303:t[116]>1e-35?oe=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?oe=.10261721665006701:oe=.018994509090668264:oe=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let De;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?De=.08396556264106572:De=-.0562516995099192:De=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?De=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?De=.0052017514017035915:De=-.11194119432743639:De=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?De=-.025692451287403446:De=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?De=-.11892250746801664:t[10]>22.500000000000004?De=.07548493166973796:De=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?De=.13750699058082427:t[18]>1e-35?De=.06535408879552801:De=-.054118179035040674:De=.1344282838979622:t[0]>3982.5000000000005?De=-.10409582202467015:t[19]>1e-35?De=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?De=.012705935670766466:De=.14149359442527545:De=-.047977876173706004:t[20]>1e-35?De=.057945228080337946:t[0]>3642.5000000000005?De=-.008726535792122467:De=-.08424769891378858:t[34]>1e-35?De=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?De=.01196849566739346:De=.1614642278429876:De=-.043022338150701625:t[3]>5.500000000000001?De=-.03907848255033881:De=.018280601026175593:De=.0006654540402589085;let xe;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?xe=-.01386103677247845:xe=.11386694333005128:t[4]>27.500000000000004?xe=-.021862617610091336:t[2]>31.500000000000004?xe=.0828858469030438:xe=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?xe=.11303635767048735:xe=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?xe=-.04238798044549342:xe=.022091190130494303:t[5]>5082.500000000001?xe=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?xe=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?xe=-.04291104140431434:t[17]>1e-35?xe=.11256797532342613:xe=-.017206916368289193:xe=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?xe=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?xe=.03581712466863222:xe=.14770264307668884:t[8]>73.50000000000001?xe=-.13093289429740068:xe=.042461737442702936:t[52]>1e-35?xe=.0501831919044939:xe=-.010450249720465756:xe=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?xe=.0005381332165438493:xe=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?xe=.04849637311285226:xe=-.036671377119808564:t[0]>421.50000000000006?xe=.00020968499911058945:xe=.11636422423182405:xe=-.12687837788222575:xe=.0012774367867215346;let Ye;t[120]>1e-35?Ye=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Ye=-.042799574885345304:Ye=.07412430171193245:Ye=-.11248270469336048:t[193]>1e-35?Ye=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?Ye=.028911612178122104:Ye=.12326369727728437:t[0]>4091.5000000000005?Ye=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ye=.1159839898100149:Ye=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?Ye=-.0216343737351583:Ye=-.1220272260878369:t[2]>18.500000000000004?Ye=.09152924475072398:t[8]>55.50000000000001?Ye=.039508716651005665:Ye=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?Ye=.06793009902674053:Ye=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?Ye=-.04391068849624096:Ye=.04009967593394672:t[8]>1085.5000000000002?Ye=-.024773826356034825:Ye=-.13919707884246582:Ye=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?Ye=-.11567917501901476:Ye=-.006813640337684114:t[3]>7.500000000000001?Ye=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?Ye=-.001754586408351048:Ye=-.055422422450722056:Ye=-.06090032532532226:t[0]>5269.500000000001?Ye=.11787981735983527:Ye=-.00198119768540783:Ye=.00210412924303036;let st;t[294]>1e-35?t[10]>50.50000000000001?st=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?st=-.06063239096209816:st=.03317022411417386:st=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?st=-.013608609329298802:st=.09078000157330264:t[99]>1e-35?st=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?st=-.07536137260189814:st=.006253266595455118:t[10]>28.500000000000004?st=-.006106041147592768:t[9]>156.50000000000003?st=-.11828932797811101:t[94]>1e-35?st=-.02566078479505714:t[303]>1e-35?st=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?st=-.08401252789168523:t[5]>4244.500000000001?st=.026372887658499107:t[1]>16.500000000000004?st=-.027836756345634026:st=.09205362097909099:st=.00934612788718244:t[203]>1e-35?st=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?st=-.09580979052540028:t[1]>50.50000000000001?st=-.06402211827281554:st=.08342858760095972:t[2]>36.50000000000001?st=.008114897658204584:t[92]>1e-35?st=.09541587072672864:st=-.022342147210555434:st=-.01660492519175128:st=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?st=.15846731118501817:st=.039498507912023195:t[245]>1e-35?st=.07008718676813333:st=.0019806389728814727;let yt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?yt=-.01192072916082109:yt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?yt=.06874032717466054:t[4]>40.50000000000001?yt=-.07752510020707537:t[1]>76.50000000000001?yt=-.09944032260703917:t[8]>1381.5000000000002?yt=-.054466635810800745:t[1]>32.50000000000001?yt=.05974084520839573:yt=-.0384718740755954:yt=-.11374190719134032:t[0]>2151.5000000000005?yt=-.13703645155803298:yt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?yt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?yt=.013539805885738608:yt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?yt=.09941880179344399:yt=-.01608127391210995:yt=.08025226531247417:t[9]>67.50000000000001?yt=.13525448212444113:t[6]>61.50000000000001?yt=-.05511099182158894:t[94]>1e-35?yt=-.06821509831783572:t[128]>1e-35?yt=.11361314817714643:yt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?yt=-.09954181329804547:t[197]>1e-35?yt=.10102833149755386:t[188]>1e-35?yt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?yt=-.03781554214742005:yt=.09927933385592314:yt=-.020006000056720083:yt=-.10520473615957895:yt=-.12006990846253787:yt=-.00026111570975317574;let qt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?qt=-.019188245509744628:qt=-.13354864350075848:t[0]>2461.5000000000005?qt=.051885477468354396:qt=-.0833581968852119:qt=.08233441701532287:qt=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?qt=.09926337893072812:qt=-.027753610497327715:t[0]>1972.5000000000002?qt=-.09780045823152517:qt=.032380915168504935:qt=.11502632261226381:t[17]>1e-35?qt=-.06094965899579662:t[10]>40.50000000000001?qt=-.07500475582440802:qt=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?qt=-.09584538995220808:qt=-.00908705814304442:qt=.03203281520813893:t[10]>49.50000000000001?qt=-.03146271513986384:t[2]>63.50000000000001?qt=.13172001315536286:t[224]>1e-35?qt=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?qt=.09521549382082259:qt=-.04414925613522197:t[0]>1847.5000000000002?qt=-.09118580379557353:qt=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?qt=.03525144509943896:qt=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?qt=-.04766112322938157:t[2]>10.500000000000002?qt=.0728516504357201:qt=-.05049625965272536:qt=-.10868663055825774:qt=.0005382613419948969;let dr;t[147]>1e-35?t[1]>53.50000000000001?dr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?dr=-.030504020655417463:dr=.07102458639110094:dr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?dr=.055304563442710876:t[1]>53.50000000000001?dr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?dr=-.1568835288372895:dr=-.0279829124400056:dr=.04493843959601833:dr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?dr=-.054133834303687026:t[9]>48.50000000000001?dr=.11263810289007213:t[9]>9.500000000000002?dr=-.02202034562838259:t[4]>45.50000000000001?dr=-.03410927569045158:dr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?dr=-.029687297407295893:dr=.10673602850001934:t[4]>42.50000000000001?dr=.0036275562945108117:dr=-.0760789221330622:dr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?dr=.08274426793676076:dr=-.07076234425516396:dr=.13890177606150175:dr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?dr=-.09250637750836187:dr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?dr=-.01897867921812603:dr=.04890781705365262:dr=-.11569892307597907:t[2]>106.50000000000001?dr=.09032697440623969:dr=.00047935919155035045;let Ft;t[115]>1e-35?Ft=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Ft=-.10131179514695865:t[8]>938.5000000000001?Ft=.10203729808015481:Ft=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Ft=.03574015165562999:Ft=-.07763042506449493:Ft=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Ft=.0665706259130275:Ft=-.06586817559309924:Ft=.11925564412287476:Ft=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Ft=.046017146627455346:Ft=-.08623321630086885:t[8]>1765.5000000000002?Ft=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Ft=.11143827902215087:Ft=-.01817808730473413:Ft=.16980985030210127:Ft=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Ft=.010168994879727824:Ft=-.09099594488792513:t[9]>1.5000000000000002?Ft=.0533459678147928:Ft=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Ft=-.062346959148773695:t[1]>47.50000000000001?Ft=-.0021578343835599316:t[2]>27.500000000000004?Ft=.19567373210166172:Ft=.07851555379116423:t[18]>1e-35?Ft=.03711549097804649:t[8]>359.50000000000006?Ft=.012492346746905587:t[4]>20.500000000000004?Ft=.047511695735697544:Ft=-.07999269063948773:Ft=6802045404471004e-20;let Yr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Yr=.0011484728213539738:Yr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Yr=-.09828874964938798:t[8]>1586.5000000000002?Yr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Yr=.011938269926919522:Yr=.17541983715953954:t[19]>1e-35?Yr=.023002786011088672:Yr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Yr=.06508934844183291:Yr=-.10168553534835639:Yr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Yr=.021140806225203937:Yr=-.1167833342453639:t[2]>33.50000000000001?Yr=.13163585734056618:Yr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Yr=.06314479201263888:Yr=-.09639088327091713:t[10]>29.500000000000004?Yr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Yr=40577156464836036e-21:Yr=.12322387121810757:Yr=-.03697224045046014:t[1]>22.500000000000004?Yr=.016474835887320276:Yr=.16919298733903063:Yr=.07633203630214054:Yr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Yr=.14150493354700563:Yr=-.01831155354975749:t[1]>28.500000000000004?Yr=-.07952557178685365:t[10]>28.500000000000004?Yr=.0665695554984927:Yr=-.053640139319277094:Yr=.0004754840665898665;let en;t[76]>1e-35?en=-.06814884255939921:t[179]>1e-35?en=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?en=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?en=.004193658608848433:en=-.1066968975983452:t[8]>302.50000000000006?en=.05476730110440451:en=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?en=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?en=.013555772109446666:en=-.09856116699770784:en=.0284329611813383:t[2]>52.50000000000001?en=.04008708444763762:t[9]>29.500000000000004?en=-.1289599546008197:en=-.018566534248335896:t[8]>747.5000000000001?en=.02236484980076122:en=.1148871655157582:t[8]>3084.0000000000005?en=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?en=.03164751204281298:en=.11752140436184891:t[9]>42.50000000000001?en=-.07180559595410106:t[22]>1e-35?en=.09325040416256854:en=-.016041122807939914:en=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?en=-.010718250133458515:en=.09818827994853763:en=.010180038981174032:en=-.039472162599295535:t[9]>170.50000000000003?en=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?en=-.08674788057474031:en=.02077653508548371:en=-.0003536561382007414;let yn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?yn=.018337297491457794:yn=-.05926206443180149:yn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?yn=.10747078482128616:t[126]>1e-35?yn=-.10550625192391357:t[7]>71.50000000000001?yn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?yn=.1317396472229434:yn=-.025035791351328947:yn=-.0728334305864372:t[8]>963.5000000000001?yn=.023642201723096064:yn=.183010326734258:t[128]>1e-35?yn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?yn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?yn=-.1088876900335281:yn=.02758317023002635:yn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?yn=-.01928020117446408:yn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?yn=.07893723375925096:yn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?yn=-.10301657587280551:yn=.005787463140224318:yn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?yn=-.019296977889522397:yn=-.07274529751752634:t[1]>30.500000000000004?yn=-.050368901143148286:yn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?yn=.0015332402792773946:yn=.09930153676749967:yn=-.06370844564357069:yn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ft;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ft=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ft=.08513773825688947:ft=-.1184664832315282:ft=.05676963535893477:ft=.14263843210340613:ft=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ft=-.10669720555606924:ft=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ft=.0664744575868955:ft=-.08469256188890871:ft=-.026746678040592144:t[281]>1e-35?ft=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ft=.012131807587207655:ft=-.12776015795398743:ft=.04320472481083551:ft=.08390980661550446:t[10]>227.50000000000003?ft=-.09771783809101153:t[10]>130.50000000000003?ft=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ft=-.07610698254064358:t[8]>902.5000000000001?ft=-.03136381213599649:t[131]>1e-35?ft=.0704821739127936:t[224]>1e-35?ft=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ft=.10431473040024908:t[8]>841.5000000000001?ft=.07304745320500514:ft=-.038011541882439825:ft=-.01679746695007364:t[0]>3129.5000000000005?ft=.05589952587431965:t[210]>1e-35?ft=.06227198085800842:ft=-.0011341890997947812:t[8]>740.5000000000001?ft=.04817300084412584:ft=-.000577001010789238;let Et;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?Et=-.10504730480402079:t[5]>3341.5000000000005?Et=.11087894671081754:Et=-.0406668834674614:Et=.03308382165616109:t[8]>104.50000000000001?Et=-.10431436764549162:Et=.0073928337244891455:t[4]>34.50000000000001?Et=-.10571751512748416:Et=-.006081128814142983:t[13]>1e-35?Et=.1299673566095023:t[4]>60.50000000000001?Et=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?Et=.04857126072645073:Et=-.03431365358104773:t[4]>16.500000000000004?Et=.04101865986596709:Et=.16480274980378218:t[10]>26.500000000000004?Et=.03673978504199255:t[10]>9.500000000000002?Et=-.10996402743800027:t[308]>1e-35?Et=.0553693735082498:Et=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?Et=.010902983761213922:Et=.1325118659895645:Et=-.064362945508595:t[1]>66.50000000000001?Et=.033416767779331176:Et=-.054080316225040496:t[42]>1e-35?Et=-.07762364337810815:t[10]>1089.5000000000002?Et=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?Et=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?Et=.0220102041325908:Et=-.06516708740003069:Et=.012833498905748267:t[224]>1e-35?Et=-.007038418272997865:Et=.00037666304316290967;let Zt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Zt=.07554189644995735:Zt=-.052089349455904946:Zt=-.10148206848169845:t[113]>1e-35?Zt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Zt=.07172653627995676:Zt=-.07602959317610998:Zt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Zt=-.0399322883690891:Zt=.06523495517476098:Zt=-.10358715295743802:t[193]>1e-35?Zt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Zt=.015928764772252406:Zt=.1341513061552287:Zt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Zt=-.033592997607280156:Zt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Zt=-.08402551858097379:Zt=.017401984506038796:t[1]>25.500000000000004?Zt=.13337205393591278:Zt=-.01160208350090984:Zt=.06708317942315471:t[8]>227.50000000000003?Zt=-.08486943882418681:Zt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Zt=-.10496268177586783:Zt=-.020921489532370493:Zt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Zt=.11639296062157028:Zt=-.004275784356569115:t[32]>1e-35?Zt=-.07297384970166025:Zt=.006026841626381599:Zt=.002034611134960428;let Vt;t[248]>1e-35?Vt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Vt=-.06455513326540585:t[1]>29.500000000000004?Vt=.07718474591552532:t[4]>7.500000000000001?Vt=.040139336931404826:Vt=-.09685734690563386:Vt=.00015327283570347363:t[9]>88.50000000000001?Vt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Vt=-.04077257804338707:Vt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Vt=.03778141591008941:Vt=-.06459919920634845:Vt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Vt=.14063930759326346:t[0]>179.50000000000003?Vt=.07287482250668585:t[8]>1180.5000000000002?Vt=-.14419393112726253:t[10]>28.500000000000004?Vt=-.07993142770099469:t[17]>1e-35?Vt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Vt=.05527969663610186:Vt=-.10824385941441346:t[3]>11.500000000000002?Vt=.12358502961047915:Vt=-.017509147119622873:t[0]>74.50000000000001?Vt=-.014907705458730486:t[8]>95.50000000000001?Vt=-.02225118168342062:Vt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Vt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Vt=.04962819555610421:Vt=-.07213577821855309:Vt=.09139529824708481:t[19]>1e-35?Vt=.013439401088345224:Vt=-.049274647207292056:Vt=.10531673719686951;let vr;t[40]>1e-35?t[0]>1937.5000000000002?vr=-.06421671152073961:vr=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?vr=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?vr=-.03520420769287065:t[8]>1085.5000000000002?vr=-.019817352506127633:vr=.11444439424520964:vr=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?vr=-.010490117519863269:vr=.08104430117757461:t[121]>1e-35?t[243]>1e-35?vr=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?vr=.06619344145920268:t[0]>4091.5000000000005?vr=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?vr=.10016091391222309:vr=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?vr=-.019511460451434884:vr=-.11643672465055221:t[2]>18.500000000000004?vr=.07848228087333317:t[8]>55.50000000000001?vr=.032583027899956235:vr=-.11209832692153521:t[11]>1e-35?vr=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?vr=-.09996887746328006:t[9]>2.5000000000000004?vr=.02157682011863397:vr=-.05247727848991843:vr=.07409150201483244:t[1]>38.50000000000001?vr=-.11378466075449625:t[224]>1e-35?vr=-.10741749127732923:t[1]>26.500000000000004?vr=.07343136534146562:vr=-.07013573628594773:t[25]>1e-35?vr=-.04626669734164317:vr=.05518333197956482:vr=.00032434010867555516;let Ir;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?Ir=.026313251010808853:Ir=-.08997339150292381:Ir=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?Ir=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?Ir=.0905155504503746:t[8]>1049.5000000000002?Ir=-.062312558183394054:t[8]>719.5000000000001?Ir=.09583836191410239:t[0]>3719.5000000000005?Ir=-.0778097309430818:Ir=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?Ir=-.12920865648544927:t[0]>2699.5000000000005?Ir=-.07086587879041864:Ir=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?Ir=-.11377786322600797:Ir=-.009486325820117998:t[1]>55.50000000000001?Ir=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?Ir=-.07938291201004219:t[2]>36.50000000000001?Ir=.01520046732530246:Ir=.13649854049662832:Ir=-.07145015938528873:t[8]>407.50000000000006?Ir=-.00350257360822279:Ir=.11332047082193297:Ir=-.10060624458629897:Ir=.05429496612497562:t[8]>1446.5000000000002?Ir=.006073419197482838:Ir=-.08718676350883998:Ir=-.11532497988252638:Ir=.10766270463068293:t[34]>1e-35?Ir=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?Ir=-.0004109812623829506:Ir=.021601073497455662:Ir=-7343540098965853e-20;let zt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?zt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?zt=.05995640200798119:t[0]>3443.5000000000005?zt=-.14698883458733583:zt=-.030039164579240187:t[189]>1e-35?zt=-.06086763220538141:t[1]>86.50000000000001?zt=-.05096727866142538:t[4]>64.50000000000001?zt=.11240554253834577:t[4]>45.50000000000001?zt=-.030279760168394117:t[6]>45.50000000000001?zt=.10161088917815142:t[10]>77.50000000000001?zt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?zt=-.06672020005240323:zt=.08831457502630258:t[8]>2592.5000000000005?zt=-.052617701047376654:t[10]>29.500000000000004?zt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?zt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?zt=-.064099222705728:zt=.044332487521538365:t[0]>2882.5000000000005?zt=.031099546885005065:zt=.12938467051623853:t[0]>4221.500000000001?zt=-.0928676413498701:t[9]>30.500000000000004?zt=-.05781824812803708:zt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?zt=-.06648105454098469:zt=.05985487552383097:zt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?zt=.05282385499619401:t[1]>66.50000000000001?zt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?zt=.027885690791379255:zt=-.08407126408362446:zt=.014432924125571093:zt=-9903435845205118e-20;let ir;t[76]>1e-35?ir=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?ir=.013633653464240465:ir=-.10164319411983509:ir=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?ir=.00632864847804078:ir=-.08393000368134668:ir=.07870508617440916:t[284]>1e-35?ir=.1092302727710421:ir=-.0025505047582483234:t[248]>1e-35?ir=.07101822393621864:t[274]>1e-35?ir=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?ir=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?ir=.025081789181021243:ir=-.014813325803582618:t[9]>33.50000000000001?ir=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?ir=.11926990418060353:ir=.01852125513565268:ir=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?ir=-.1178464984373743:t[283]>1e-35?ir=.043370859226927405:t[5]>4320.500000000001?ir=-.01103141226366587:t[8]>1104.5000000000002?ir=-.023053423988095886:ir=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?ir=.000579145585864887:ir=.03389152834202143:t[128]>1e-35?ir=-.14527722052568462:t[210]>1e-35?ir=-.08915971541902741:t[7]>9.500000000000002?ir=-.03307314577076116:t[18]>1e-35?ir=-.05521712302023565:ir=.009315605032770029:ir=.0036332551852289933;let Xt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Xt=-.07583539600416284:t[188]>1e-35?Xt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Xt=-.011038193049597113:Xt=.08154028164397753:t[1]>85.50000000000001?Xt=.10259361975201933:Xt=.011640408330521594:Xt=-.00023319159023748508:t[92]>1e-35?Xt=.13771692859530546:Xt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Xt=.09967230141007705:t[30]>1e-35?Xt=-.08888529037551285:Xt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Xt=.08284665960761373:Xt=-.029292565021289504:t[7]>7.500000000000001?Xt=-.09945093355204493:Xt=-.008381393701708593:t[20]>1e-35?Xt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Xt=.07585582641438211:t[8]>284.50000000000006?Xt=-.029387993239886723:Xt=.07716738177321587:t[1]>18.500000000000004?Xt=.026745348497993746:Xt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Xt=.02337306890530338:Xt=-.10390355904767366:Xt=.07390521199638532:Xt=-.06788247515155237:Xt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Xt=-.06360325615644084:Xt=.04342192339836601:Xt=-.10598779152030145:Xt=.05253384605768211;let Sr;t[3]>7.500000000000001?t[157]>1e-35?Sr=-.07514182877923786:Sr=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Sr=.028692053800951845:Sr=.14081686716133598:Sr=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Sr=.0037139292567243084:Sr=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Sr=.01202688580305612:Sr=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Sr=.043935495082738626:Sr=-.05639305759669704:t[247]>1e-35?Sr=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Sr=.10331836202616368:Sr=.0006926658459781341:t[96]>1e-35?Sr=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Sr=-.0741403257305367:Sr=.022900127535540854:t[7]>3.5000000000000004?Sr=.038110741403836294:Sr=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Sr=-.09552842289807008:t[1]>27.500000000000004?Sr=.012505935885798007:Sr=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Sr=-.1046104767723845:Sr=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Sr=.023466328488582572:Sr=.11730925774586994:Sr=-.04771965631104874:Sr=.17059689880751394:Sr=-.08181850955999449:t[26]>1e-35?Sr=-.12727482696678769:Sr=-.014343123272734182;let qr;t[147]>1e-35?t[1]>53.50000000000001?qr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?qr=-.02763546051134888:qr=.06423344777499343:qr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?qr=.049825139823021586:t[7]>22.500000000000004?qr=-.01131680751379858:t[0]>2579.5000000000005?qr=-.10673674485369694:qr=-.015387212937189957:qr=.04347325151148724:t[179]>1e-35?qr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?qr=.0650355590939066:qr=-.0473332870892226:qr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?qr=.11139543329789044:t[126]>1e-35?qr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?qr=.06370903833231022:t[10]>29.500000000000004?qr=.03415223859607161:t[10]>3.5000000000000004?qr=-.07415518117873297:qr=-.0014119203473324082:qr=.12617652343819508:t[9]>41.50000000000001?qr=-.10311145857176976:t[8]>2757.5000000000005?qr=-.08106484219011428:t[7]>71.50000000000001?qr=-.09783384432091176:t[1]>88.50000000000001?qr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?qr=-.008884084501608536:qr=.061339437777743616:qr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?qr=.01526664064166223:qr=.13534828515415498:qr=-.06985484465894776:qr=.0005758961943178744;let tn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?tn=-.029152732370514342:tn=.07173628916139178:t[1]>36.50000000000001?tn=-.08859111297255318:tn=.0018030071815630785:tn=.13652461563759322:tn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?tn=-.07145140450454163:t[21]>1e-35?tn=-.07422841663493233:tn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?tn=.11864240653986852:t[3]>33.50000000000001?tn=-.08821209591953476:tn=.05706392280054726:tn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?tn=.01953613016837112:tn=-.059781039130025006:t[148]>1e-35?tn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?tn=.07207826841738371:t[202]>1e-35?tn=.08163917539410503:tn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?tn=-.06858280496900336:tn=-.1781828899516648:tn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?tn=.018232649414147116:tn=-.04419781124222661:tn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?tn=.11452368095776105:tn=-.036496437259924026:tn=-.040445338739465486:tn=.0816572651001145:tn=-.08968914517368663:tn=.0002826343082585516;let zn;t[189]>1e-35?t[0]>5269.500000000001?zn=-.08839493050459957:t[10]>85.50000000000001?zn=.10046908365702462:t[8]>2592.5000000000005?zn=-.09632233975926387:t[8]>2000.5000000000002?zn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?zn=.035504970430426296:t[1]>31.500000000000004?zn=-.1133764813142531:zn=-.01138280942244812:t[8]>1125.5000000000002?zn=.09800530246229806:zn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?zn=.07316772160107896:zn=-.059095014819051765:zn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?zn=-.09150209066166894:t[8]>3084.0000000000005?zn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?zn=-.04449234460408263:zn=.05568837973347338:zn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?zn=.12741077850267066:zn=.007372371864985329:t[2]>39.50000000000001?zn=.02295917234617787:zn=.14966532083907075:t[1]>39.50000000000001?zn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?zn=-.02511861881285652:t[1]>27.500000000000004?zn=.08683660011672288:zn=.02956214835267301:t[9]>15.500000000000002?zn=-.016538805462996232:zn=.04352738094981517:zn=-.05561856645643868:t[9]>170.50000000000003?zn=-.07996752635874248:t[179]>1e-35?zn=-.09065975936933919:zn=-.00042817975060427177;let ai;t[39]>1e-35?t[4]>25.500000000000004?ai=.03443173196222934:ai=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?ai=-.0013415395759330318:ai=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?ai=.002297618040307216:ai=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?ai=-.015297257305397608:ai=.09651828834062742:ai=-.06636003334371929:t[10]>11.500000000000002?ai=.17631616138309397:t[0]>1639.5000000000002?ai=3804386478092585e-20:ai=-.09099296398683193:ai=-.06874415876172972:t[0]>2151.5000000000005?ai=-.1311264883406766:ai=.00809052010141122:t[253]>1e-35?ai=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?ai=.045038497754638605:ai=-.07770167665661752:ai=-.08596294280650517:ai=.08538655727027213:ai=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?ai=.054627956617973275:t[1]>61.50000000000001?ai=-.11994465088415499:t[4]>8.500000000000002?ai=.06676200239406452:ai=-.027503148069376867:t[8]>676.5000000000001?ai=-.10363964928357075:t[4]>8.500000000000002?ai=-.07589816227175682:ai=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?ai=.009093153189012338:ai=-.06119765876605404:ai=.0004668642103528348;let Hn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Hn=-.10100794502567233:Hn=.08000205636470442:Hn=-.11945419826856896:t[113]>1e-35?Hn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Hn=.1224302423880318:Hn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Hn=.0019277012166729114:t[1]>28.500000000000004?Hn=-.054445821715687494:Hn=.045645722976713245:t[30]>1e-35?Hn=.13402660155331655:Hn=.008921176001777645:Hn=-.058547426505451076:Hn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Hn=-.13526418192218206:Hn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Hn=.0007263224246135398:Hn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Hn=-.11575657261278308:Hn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Hn=-.01995960178292952:Hn=.11216586049153021:Hn=-.10050961087149474:Hn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Hn=.10303451081526649:Hn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Hn=-.043799548968209395:Hn=-.12451444314954115:t[4]>12.500000000000002?Hn=-.03838117361958468:Hn=.06504990789767144:t[57]>1e-35?Hn=.06890006938293915:Hn=.0003914274695562949;let ri;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?ri=.004271749009686975:ri=-.10523878297127605:ri=.04633982158107851:ri=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?ri=-.08655730561951676:t[8]>919.5000000000001?ri=-.0676453705610183:t[7]>18.500000000000004?ri=-.027787974193650575:ri=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?ri=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?ri=-.03473877164537313:t[8]>719.5000000000001?ri=.10471053866934404:ri=.008236107678382981:t[4]>57.50000000000001?ri=.09412219478825269:t[10]>66.50000000000001?ri=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?ri=-.040681323751002293:ri=.06374650297561021:ri=.12884615227401788:t[10]>5.500000000000001?ri=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?ri=-.05474068967150784:ri=.03744700650806603:ri=-.07846396348680855:t[1]>42.50000000000001?ri=.018972315810821302:ri=.10953621007604744:t[5]>4439.500000000001?ri=.010999776705494586:t[1]>40.50000000000001?ri=-.12394200059775967:t[10]>2.5000000000000004?ri=.013528093962849453:ri=-.09222088417048682:ri=-.12662967149701485:ri=.09327296405849603:t[3]>99.50000000000001?ri=-.013581954439986752:ri=.0005526498251862075;let ln;t[187]>1e-35?t[243]>1e-35?ln=-.08392792551692502:t[10]>68.50000000000001?ln=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?ln=-.0825306209711224:ln=.049559996084532945:ln=-.1064938580886302:ln=.03353240732240275:ln=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?ln=.16966001471529374:t[1]>57.50000000000001?ln=-.005772777673676247:ln=.09383677041525058:t[8]>747.5000000000001?ln=.054068175469351235:ln=-.049968216310277036:t[8]>753.5000000000001?ln=-.0679383555784074:t[4]>8.500000000000002?ln=-.059757341189735386:ln=.05701083682780414:ln=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?ln=.05820296128730006:ln=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?ln=.15340611616954566:ln=.04385036188666874:t[0]>4449.500000000001?ln=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?ln=.004840354641006495:ln=.09967827580276283:ln=.11605363537391578:t[9]>19.500000000000004?ln=-.0735831692725717:ln=.019973331823355176:t[306]>1e-35?t[149]>1e-35?ln=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?ln=-.02442182361342386:ln=.10334853004243093:ln=-.030431948680167104:ln=-956078595250818e-19;let ni;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?ni=-.040232505718244854:t[0]>3030.5000000000005?ni=.0634109586813073:ni=-.04043617034245621:ni=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?ni=-.007859096946435131:ni=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?ni=.05515771679628051:ni=-.04214471312668263:ni=-.09589322222261765:t[193]>1e-35?ni=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?ni=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?ni=-.08152604001147906:t[11]>1e-35?ni=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?ni=.13100930780107503:t[10]>25.500000000000004?ni=.05921074710011526:ni=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?ni=.0009447118243153454:ni=-.09820565036865991:ni=.057146909749745546:t[0]>2115.5000000000005?ni=-.12331216726611678:ni=.007281983677694285:t[2]>56.50000000000001?ni=.012310154675612615:ni=-.08873665774670461:t[6]>25.500000000000004?ni=.134708740821879:t[9]>5.500000000000001?ni=-.0805901581148979:t[224]>1e-35?ni=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?ni=.10842593386554122:t[2]>13.500000000000002?ni=.06466798320378395:ni=-.08578130788886655:ni=-.03590892078300114:ni=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let W;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?W=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?W=.020637047900190317:W=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?W=-.04632587527094407:W=.08603684785510396:W=-.05101401015448496:W=.025466432054358498:W=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?W=.020385355430046367:W=.12032592051335252:W=-.012387370292173013:t[2]>23.500000000000004?W=-.12568545484492677:W=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?W=.043528764484784536:W=.14352071657196003:W=-.009332833816977268:W=.11186782227735846:W=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?W=-.05649104643152564:W=.03884200719305747:t[42]>1e-35?W=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?W=-.04103416502526736:W=.04881823954656287:t[4]>15.500000000000002?W=.009342724662897898:t[0]>3969.5000000000005?W=-.025637309961309498:W=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?W=-.08185697075265091:t[0]>2215.5000000000005?W=.030063975892297354:t[0]>807.5000000000001?W=-.03924325550733229:W=.0415330999189793:W=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let te;t[7]>17.500000000000004?t[115]>1e-35?te=.08741852531696623:t[167]>1e-35?te=.10078975495600809:te=-.0018324767784017562:t[290]>1e-35?te=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?te=.1379733311640402:te=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?te=-.09360083033774169:te=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?te=-.015599362579530679:t[0]>4593.500000000001?te=-.12029549262691491:te=-.018917032256501397:te=.04632831686576592:te=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?te=-.05894883236412263:te=.05213944998315824:te=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?te=.07577412405680808:te=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?te=-.0277076900736147:t[1]>65.50000000000001?te=-.023587471585763506:te=.10184896592433082:te=-.057699270527916825:te=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?te=.06566902102799584:t[10]>25.500000000000004?te=-.07033633753181047:te=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?te=-.08108035861059537:te=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?te=-.12431182772561139:te=.01886235886984271:te=.0025579594894418116;let O;t[8]>2915.5000000000005?t[101]>1e-35?O=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?O=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?O=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?O=.0687641681341721:t[10]>102.50000000000001?O=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?O=-.06762578396473291:t[10]>65.50000000000001?O=-.05226727783610509:t[282]>1e-35?O=.09911438410640917:t[19]>1e-35?O=.06915156336429933:O=-.006565637886508241:O=-.08344300251849307:O=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?O=.19428463865406298:O=.016073883020956765:t[13]>1e-35?O=.06864077097923665:O=-.01388867527034731:t[0]>1847.5000000000002?O=.004655280608161356:t[1]>40.50000000000001?O=.031406054057765996:O=.12798062439212832:O=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?O=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?O=-.0706095614785733:O=.04227164041372561:O=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?O=-.07139533369873902:O=.008952586782921625:O=.06086212582180936:O=-.0816938490403437:O=-.051224901945956025:O=-.10525399124186095:O=.000270924147208224;let Re;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?Re=.029186512383291244:t[7]>1.5000000000000002?Re=-.14984127276725573:t[1]>40.50000000000001?Re=.032757060730648144:Re=-.07675575422749602:t[6]>8.500000000000002?Re=.10599766037117893:Re=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?Re=-.051394622947855385:Re=.03237141302699347:Re=.12526173027943244:Re=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Re=-.07383912482657777:t[0]>5147.500000000001?Re=.07008813937042091:t[10]>38.50000000000001?Re=-.06779203808365307:Re=-.013782769999524498:Re=.0880038869117715:Re=-.12846294176070952:t[281]>1e-35?Re=-.06810806903850834:t[10]>227.50000000000003?Re=-.08937977001661111:t[10]>130.50000000000003?Re=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?Re=.011036530162093841:Re=-.11500797478569702:Re=.03702229366129399:Re=.07242026683784307:t[189]>1e-35?Re=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?Re=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?Re=-.02608892716555304:Re=.09609599320761308:t[9]>105.50000000000001?Re=-.06848127135991534:Re=.0023675721254089715:t[86]>1e-35?Re=-.11049635625500497:Re=-.004847764219432233;let ze;t[125]>1e-35?t[0]>3969.5000000000005?ze=-.09462233499115416:ze=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?ze=-.030700661288166148:ze=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?ze=.03149547314036763:ze=-.08166208257451366:t[0]>5850.500000000001?ze=-.10228136324773157:t[102]>1e-35?ze=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?ze=.01782894842128785:t[13]>1e-35?ze=.002680190260979968:ze=.1773965720476949:t[2]>72.50000000000001?ze=.09090831938627947:t[1]>59.50000000000001?ze=-.12297206702816128:t[0]>4977.500000000001?ze=.09899015653118268:ze=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?ze=-.0675900954187773:ze=.012336403425364092:ze=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?ze=-.02671721777458802:ze=-.09242452991958029:t[284]>1e-35?ze=-.08585691288582491:ze=.013332890564324447:t[4]>14.500000000000002?ze=-.005245022074799553:t[23]>1e-35?ze=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?ze=-.09289852307936758:t[116]>1e-35?ze=-.09686573010015055:t[8]>804.5000000000001?ze=.03812547148215318:ze=.005162744968176633:t[9]>43.50000000000001?ze=-.059246106396159376:ze=.050370113808135275:ze=.000794041852811028;let Gt;t[3]>7.500000000000001?Gt=.0004981426543104341:t[9]>114.50000000000001?Gt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?Gt=-.019061766497948867:Gt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?Gt=-.006044199577160493:Gt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?Gt=.11486607015912494:t[9]>16.500000000000004?Gt=-.08686820858087294:Gt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?Gt=-.022230207980026437:Gt=.1056683690528792:Gt=-.05859530800943035:Gt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?Gt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?Gt=-.05177544573528314:Gt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?Gt=.15159657923771555:Gt=-.0060542654587671055:t[9]>5.500000000000001?Gt=-.042808028205051786:t[1]>48.50000000000001?Gt=-.010449538258110742:Gt=.10026907521968294:Gt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?Gt=-.02272452389409874:Gt=-.11202691218244319:t[5]>1809.5000000000002?Gt=-.04460413584255906:Gt=.08196329474205256:t[10]>69.50000000000001?Gt=.10221481166238167:Gt=.0004063052701699382:t[243]>1e-35?Gt=-.07563941678849846:t[18]>1e-35?Gt=.02563513231103432:Gt=-.004740081147303786;let Pr;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pr=.057446442918106:Pr=-.04404018270156349:Pr=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Pr=-.05930486238817954:t[1]>29.500000000000004?Pr=.06955866121256543:t[8]>597.5000000000001?Pr=-.06538593556505168:Pr=.06212512595497445:Pr=.00021102929959182257:t[9]>90.50000000000001?Pr=.0958061289119631:t[102]>1e-35?Pr=.07172059675638813:t[1]>47.50000000000001?Pr=-.03879798603977766:t[297]>1e-35?Pr=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Pr=.003805910996312012:Pr=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Pr=.11252376801858695:t[288]>1e-35?Pr=-.10293901912180432:Pr=.014669268837893872:t[1]>42.50000000000001?Pr=-.05988274123836837:t[145]>1e-35?Pr=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Pr=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Pr=-.03366718308159971:Pr=.11936550608549797:t[1]>31.500000000000004?Pr=-.07454716789539667:Pr=.027859650621164217:t[10]>10.500000000000002?Pr=-.11806374092321247:Pr=-.03506042229223101:Pr=-.0007080765837654515:t[10]>6.500000000000001?Pr=-.028077713664996503:t[2]>7.500000000000001?Pr=.15803724124216814:Pr=.0351381284833169:Pr=-.07877953381054767;let Ar;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?Ar=.14144941521975005:Ar=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?Ar=.10514088112381886:t[7]>18.500000000000004?Ar=-.10370643555956745:Ar=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?Ar=-.0508129468802936:t[224]>1e-35?Ar=-.037816066368733595:t[10]>43.50000000000001?Ar=.07793408602607932:Ar=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?Ar=.036972453794202324:Ar=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?Ar=.09475302525132188:Ar=-.03580104945898193:Ar=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?Ar=-.1282448778804823:Ar=-.014395808269207212:Ar=-.008940927190750592:Ar=-.1459118815453748:t[0]>4897.500000000001?Ar=-.09733068457286576:t[1]>57.50000000000001?Ar=.06575271409540207:Ar=-.019556422817450115:Ar=-.10623959222984136:t[18]>1e-35?Ar=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?Ar=.008125645893104896:Ar=-.11084368630465868:Ar=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?Ar=-.05854904579626861:t[4]>5.500000000000001?Ar=.02985784951394175:Ar=-.03247600140149334:Ar=-.11152899295304973:Ar=-.00035424577714215764;let gn;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?gn=-.06563670567578264:gn=.067656954313663:gn=-.10388217548685377:t[8]>2302.5000000000005?gn=.07190621943790435:t[4]>67.50000000000001?gn=.060020507643618604:t[4]>38.50000000000001?gn=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?gn=-.06568134366461277:t[8]>1075.5000000000002?gn=-.004768057709758692:gn=.11785959165999467:gn=-.05080221682879267:gn=.14814206127494542:gn=-.07241946332311736:t[253]>1e-35?gn=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?gn=-.02471195342450034:gn=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?gn=-.10741850739482771:gn=.010051635824944:gn=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?gn=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?gn=-.08992396138178163:gn=.010944365997007212:gn=.06221307021813793:gn=.1286024087559141:t[127]>1e-35?gn=.06568148624531012:t[10]>40.50000000000001?gn=-.07567979134643352:t[5]>5647.500000000001?gn=.07594672895572069:gn=-.018158016446439187:t[6]>55.50000000000001?gn=.009293422430111872:t[4]>45.50000000000001?gn=-.017749818406964022:t[2]>46.50000000000001?gn=.01714136511113982:gn=-724762291423549e-19;let Cn;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?Cn=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?Cn=.07084726276890757:Cn=-.11232323677722932:Cn=.04812773089510436:Cn=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?Cn=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?Cn=.0879462816013881:Cn=-.002966662093626573:t[306]>1e-35?Cn=-.04588085188342676:Cn=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?Cn=-.006600332774461143:Cn=.1272481351557754:Cn=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?Cn=.011884312066620044:Cn=.11678751052403374:t[4]>8.500000000000002?Cn=.03627129613273813:Cn=-.12132783497902287:Cn=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?Cn=-.06830131718398992:t[0]>5147.500000000001?Cn=.062360406249609306:t[4]>4.500000000000001?Cn=-.013162203864592055:Cn=-.07153029184927609:Cn=.07628618062271557:Cn=-.12085065687320373:t[190]>1e-35?Cn=-.045816889524231186:t[137]>1e-35?Cn=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?Cn=.025895337822752502:Cn=-.06503949350616421:t[10]>227.50000000000003?Cn=-.09989456525790491:t[10]>130.50000000000003?Cn=.08616651057030683:Cn=.0001234981796706021;let Tr;t[8]>1014.5000000000001?t[9]>137.50000000000003?Tr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?Tr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?Tr=-.141732381961068:Tr=-.0317152307496497:Tr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?Tr=.12191801556691254:Tr=-.0003444689085397977:Tr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?Tr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?Tr=-.05676033995381961:Tr=.10933961076803381:t[4]>26.500000000000004?Tr=-.11667582544549814:t[8]>1765.5000000000002?Tr=.032174455312047705:Tr=-.0755016390126608:t[293]>1e-35?Tr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?Tr=.026571311956824436:t[15]>1e-35?Tr=.06175459479851121:Tr=-.018778084411148754:t[9]>40.50000000000001?Tr=-.09420232889965811:Tr=-.004578248021263184:t[2]>1.5000000000000002?Tr=.005453714644971445:Tr=-.03907138175699279:Tr=-.055296364182154736:t[23]>1e-35?Tr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?Tr=-.09358146510580179:Tr=.060524657996178094:Tr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?Tr=-.12698331085931538:Tr=.006059605604079918:t[2]>196.50000000000003?Tr=-.09451315810804783:Tr=.0011390147031687425;let $t;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?$t=.05517359070460923:$t=-.04758751221404857:$t=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?$t=.1040436595565776:t[9]>21.500000000000004?$t=.04032250517675179:t[107]>1e-35?$t=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?$t=.1192453009230486:t[1]>51.50000000000001?$t=.0443376336292195:$t=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?$t=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?$t=-.08999822408398037:$t=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?$t=-.061850439226075:$t=.08849196353361093:$t=.10536348167793089:t[92]>1e-35?$t=.04894947712119185:t[9]>16.500000000000004?$t=.05900227903883853:t[9]>5.500000000000001?$t=-.11946594348916476:$t=-.03652096348071964:t[1]>41.50000000000001?$t=-.07411603110840567:$t=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?$t=.08493634342741495:t[11]>1e-35?$t=-.10899097825564363:$t=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?$t=.08356655906359918:t[7]>25.500000000000004?$t=-.09475076526194888:t[10]>5.500000000000001?$t=-.01999406228763778:$t=.06696212545889428:t[6]>20.500000000000004?$t=.14713592661393468:$t=.0459917279002218:$t=.00027445928493734093;let Wn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Wn=-.06904501553217077:Wn=.05696231672035904:Wn=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Wn=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Wn=-.011419256378538392:t[0]>3830.5000000000005?Wn=.140315841503076:Wn=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Wn=-.04027822909411164:Wn=.03176085103667189:Wn=.06779515865838849:t[4]>15.500000000000002?Wn=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Wn=.06124039747298539:Wn=-.04312732764434027:Wn=.09161522761808062:Wn=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Wn=.11211681010488772:t[13]>1e-35?Wn=.06725735814960367:Wn=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Wn=.11743605068905603:Wn=-.011309033539148687:Wn=-.07896094707523052:Wn=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Wn=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Wn=.02836295848998302:Wn=.12210680366745175:Wn=-.058302317470509096:t[5]>4144.500000000001?Wn=.06123341960495106:Wn=-.03840046906926525:Wn=-.05221474543453495:Wn=.03988215485860711:Wn=-.00033074684693083496;let ga=jMt(e+r+n+i+o+a+c+l+u+f+p+m+h+g+y+E+x+b+_+k+P+N+M+J+pe+Y+G+H+ce+ie+V+Q+z+re+fe+ne+me+he+Qe+ke+tt+Fe+ht+St+xt+Tt+le+Ue+ye+nt+ee+oe+We+De+xe+Ye+st+yt+qt+dr+Ft+Yr+en+yn+Ae+Ge+ft+Et+Zt+Vt+vr+Ir+zt+ir+Xt+Sr+qr+tn+zn+ai+Hn+ri+ln+ni+_e+W+ge+ve+te+O+Re+ze+Gt+Pr+Ar+gn+Cn+Tr+$t+Wn);return[1-ga,ga]}s(sGe,"multilineModelPredict");function jMt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(jMt,"sigmoid");var VMt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},aGe={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function cGe(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(c=>c.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(VMt[r]??[]).some(c=>o.includes(c))}s(cGe,"hasComment");var RY=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=cGe(e,-2,r),this.rstripSecondToLastLineHasComment=cGe(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},Hge=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new RY(e,n),this.suffixFeatures=new RY(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(aGe).length+1).fill(0);r[aGe[this.language]??0]=1;let n=new Array(Object.keys(CE).length+1).fill(0);n[CE[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(CE).length+1).fill(0);i[CE[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(CE).length+1).fill(0);o[CE[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(CE).length+1).fill(0);return a[CE[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function $Mt(t,e){return new Hge(t.prefix,t.suffix,e)}s($Mt,"constructMultilineFeatures");function lGe(t,e){let r=$Mt(t,e).constructFeatures();return sGe(r)[1]}s(lGe,"requestMultilineScore");d();d();d();d();async function*EE(t,e){for await(let r of t)yield e(r)}s(EE,"asyncIterableMap");async function*uGe(t,e){for await(let r of t)await e(r)&&(yield r)}s(uGe,"asyncIterableFilter");async function*ZM(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(ZM,"asyncIterableMapFilter");async function*dGe(...t){for(let e of t)yield*e}s(dGe,"asyncIterableConcat");d();async function eF(t,e,r,n){let i=Dr.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Bt).updateExPValuesAndAssignments(n,i)}s(eF,"createTelemetryWithExpWithId");function cc(t,{turn:e,conversation:r}={},n){return eF(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(cc,"createTelemetryWithExpWithTurn");function tF(t,e,r,n,i,o,a,c){let l=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:l.join(",")},f={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),c.length>0&&(u.skillResolutionsJson=JSON.stringify(zMt(c))),a=a.extendedBy(u,f),a}s(tF,"extendUserMessageTelemetryData");function zMt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(zMt,"mapSkillResolutionsForTelemetry");function fGe(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),kY(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(fGe,"createUserMessageTelemetryData");function pGe(t,e,r,n,i,o,a,c){let l=KMt(n);return kY(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...l})},{messageCharLen:n.length,numCodeBlocks:l.length,numTokens:i},c).properties.messageId}s(pGe,"createModelMessageTelemetryData");function mGe(t,e,r,n,i,o,a){kY(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(mGe,"createOffTopicMessageTelemetryData");function hGe(t,e,r,n,i,o,a,c,l){let u=kY(t,c,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},l);return YMt(t,r,o,u.properties.messageId,u.properties.conversationId,a,l,c),u.properties.messageId}s(hGe,"createSuggestionMessageTelemetryData");var gGe={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function AGe(t,e,r){let n=await cc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Qd(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(AGe,"telemetryIndexCodesearch");function kY(t,e,r,n,i,o,a){let c=a??Dr.createAndMarkAsIssued(),l={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in c.properties)){let m=cr();i.messageId=m,l.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=c.extendedBy(i,o),f=c.extendedBy(l),p=Sl(r);return Rt(t,`${p}.message`,u),Rt(t,`${p}.messageText`,f,1),u}s(kY,"telemetryMessage");function yGe(t,e,r,n){Qd(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(yGe,"createSuggestionShownTelemetryData");function YMt(t,e,r,n,i,o,a,c){Qd(t,c,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(YMt,"createSuggestionSelectedTelemetryData");function Qd(t,e,r,n,i,o){let a=o??Dr.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let c=a.extendedBy(r,n);return Rt(t,i,c),c}s(Qd,"telemetryUserAction");function _3(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Rt(t,"engine.messages",n,1)}s(_3,"logEngineMessages");function Sl(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Sl,"telemetryPrefixForUiKind");function KMt(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(KMt,"getCodeBlocks");function CGe(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(CGe,"uiKindToIntent");function wI(t){return t==="inline"?"conversationInline":"conversationPanel"}s(wI,"conversationSourceToUiKind");function EGe(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};xGe(t,"round",i.extendedBy(o,a))}s(EGe,"createAgentRoundTelemetryData");function vGe(t,e,r,n,i,o,a,c){let l={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};xGe(t,"toolCall",c.extendedBy(l,u))}s(vGe,"createToolInvocationTelemetryData");function xGe(t,e,r){return Rt(t,`${Sl("agentPanel")}.${e}`,r)}s(xGe,"logAgenticEvent");function JMt(t,e=5e4){if(t.length<=e)return t;let r=t.substring(0,e),n=[`
`,`[Original content length: ${t.length}]`,"[TRUNCATED: File content exceeded maximum length limit]"].join(`
`);return r+n}s(JMt,"truncateContentIfNeeded");function bGe(t,e,r,n,i,o,a){let c=`${Sl(e)}.${a}`,l=o.extendedBy(r,n);Rt(t,c,l);let u={...r};i.currentFileContent!==void 0&&(u.completionTextJson=JMt(i.currentFileContent));let f=o.extendedBy(u,n);Rt(t,`${c}.restricted`,f,1)}s(bGe,"telemetryEditSurvivalTracking");d();d();function vE(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(vE,"toString");var Y0=new vt("streamChoices"),Wge=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new Vge;this.tool_calls=[];this.function_call=new jge;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new Gge),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function XMt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(XMt,"splitChunk");var Gge=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},jge=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},Vge=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},_I=class t{constructor(e,r,n,i,o,a,c){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=c;this.requestId=v2(this.response);this.stats=new $ge;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let c=n.body();if(c===null)throw new Error("No response body available");return typeof c.setEncoding=="function"?c.setEncoding("utf8"):c=c.pipeThrough(new TextDecoderStream),new t(e,r,n,c,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Y0.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Y0.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Y0.debug(this.ctx,"chunk",a.toString());let[c,l]=XMt(r+a.toString());r=l;for(let u of c){let f=u.slice(5).trim();if(f=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(f)}catch{Y0.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&ZMt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Y0.error(this.ctx,"Error in response:",p.error.message):Y0.error(this.ctx,"Unexpected response with no choices or error: "+f)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Y0.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new Wge);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),E=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||E){let b=g.text.join("");if(y=this.asSolutionDecision(await e(b,{text:b,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>rF(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let x=h.finish_reason??"client-trimmed";if(Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:x,engineName:i??"",engineChoiceSource:sI(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!=null&&(Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Y0.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Y0.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let c=Number(o);if(a==null)continue;let l=a.text.join("");if(await i(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>rF(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Rt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Y0.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function PY(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Y0.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Y0.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Y0.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=rF(e.solution);return BY(t,n,o,e.index,e.requestId,i,r)}s(PY,"prepareSolutionForReturn");function rF(t){let e=t.text.join(""),r=eFt(t),n=tFt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((f,p)=>f.concat(p),[]),c=t.top_logprobs.reduce((f,p)=>f.concat(p),[]),l=t.text_offset.reduce((f,p)=>f.concat(p),[]),u=t.tokens.reduce((f,p)=>f.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:c,text_offset:l,tokens:u}}}s(rF,"convertToAPIJsonData");function ZMt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(ZMt,"isCopilotConfirmation");function IGe(t,e,r){if(!t)return{};try{return JSON.parse(t)}catch(n){throw new Error(`Failed to parse JSON for ${e} '${r}': ${vE(n)}. Input: '${t}'`)}}s(IGe,"parseCallArguments");function eFt(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.join("").trim(),i=IGe(n,"tool call",r.name);e.push({type:"function",function:{name:r.name,arguments:i},approxNumTokens:r.arguments.length+1})}return e}s(eFt,"extractToolCalls");function tFt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),r=IGe(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:r}}}s(tFt,"extractFunctionCall");var $ge=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new zge,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},zge=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};d();function DY(t,e){return t!==null&&typeof t=="object"&&e in t}s(DY,"hasKey");function Ud(t,e){return DY(t,e)?t[e]:void 0}s(Ud,"getKey");var wGe=Ne(di());var _a=new vt("fetchCompletions");function v2(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(v2,"getRequestId");function S3(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(S3,"getProcessingTime");function _Ge(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(_Ge,"uiKindToIntent");var Mf=class{static{s(this,"OpenAIFetcher")}};function rFt(t,e,r,n){return cy(t,e,"proxy","v1/engines",r,n)}s(rFt,"getProxyEngineUrl");function NY(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(NY,"sanitizeRequestOptionTelemetry");async function TGe(t,e,r,n,i,o,a,c,l,u,f){let p=t.get(po),m=rFt(t,a,r,n),h=l.extendedBy({endpoint:n,engineName:r,uiKind:c},O4(e));NY(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Rt(t,"request.sent",h);let g=la(),y=_Ge(c);return h_(t,m,a.token,y,i,o,u,f).then(E=>{let x=v2(E);h.extendWithRequestId(x);let b=la()-g;return h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> finished with ${E.status} status after ${b}ms`),h.properties.status=String(E.status),_a.debug(t,"request.response properties",h.properties),_a.debug(t,"request.response measurements",h.measurements),_a.debug(t,"prompt:",e),Rt(t,"request.response",h),E}).catch(E=>{if(Nu(E))throw Rt(t,"request.cancel",h),E;p.setWarning(Ud(E,"message")??"");let x=h.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",x),h.properties.message=String(Ud(E,"name")??""),h.properties.code=String(Ud(E,"code")??""),h.properties.errno=String(Ud(E,"errno")??""),h.properties.type=String(Ud(E,"type")??"");let b=la()-g;throw h.measurements.totalTimeMs=b,_a.info(t,`Request ${i} at <${m}> rejected with ${String(E)} after ${b}ms`),_a.debug(t,"request.error properties",h.properties),_a.debug(t,"request.error measurements",h.measurements),Rt(t,"request.error",h),E}).finally(()=>{dDe(t,e,h)})}s(TGe,"fetchWithInstrumentation");async function nFt(t,e,r,n,i,o,a,c,l,u){let f=l.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:c});NY(o,f,["messages"]),f.properties.headerRequestId=i,Rt(t,"request.sent",f);let p=la(),m=_Ge(c),h={...rI(t)};try{let g=await h_(t,n,a.token,m,i,o,u,h),y=v2(g);f.extendWithRequestId(y);let E=la()-p;return f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${E}ms`),_a.debug(t,"request.response properties",f.properties),_a.debug(t,"request.response measurements",f.measurements),_a.debug(t,"messages:",JSON.stringify(e)),Rt(t,"request.response",f),g}catch(g){if(Nu(g))throw Rt(t,"request.cancel",f),g;let y=f.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",y),f.properties.message=String(Ud(g,"name")??""),f.properties.code=String(Ud(g,"code")??""),f.properties.errno=String(Ud(g,"errno")??""),f.properties.type=String(Ud(g,"type")??"");let E=la()-p;throw f.measurements.totalTimeMs=E,_a.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${E}ms`),_a.debug(t,"request.error properties",f.properties),_a.debug(t,"request.error measurements",f.measurements),Rt(t,"request.error",f),g}finally{_3(t,e,f)}}s(nFt,"fetchChatWithInstrumentation");function Yge(t){return uGe(t,e=>e.completionText.trim().length>0)}s(Yge,"postProcessChoices");var iFt="github.copilot.completions.quotaExceeded",nF=class extends Mf{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="completions",l=await e.get(Qr).getToken(),u=await this.fetchWithParameters(e,c,r,l,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){_a.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(c,e,r);return this.handleError(e,a,h,u,l)}let p=_I.create(e,r.count,u,n,[],o).processSSE(i),m=EE(p,h=>PY(e,h,n));return{type:"success",choices:Yge(m),getProcessingTime:s(()=>S3(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,c,l={},u){if(this.#e)return{type:"canceled",reason:this.#e};let f="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:c.id,stream:!0,...l},m=n.extendedBy({endpoint:f,model:c.name}),h=e.get(po),g=await e.get(Qr).getToken(),y=await nFt(e,r,c.id,f,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){_a.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=Dr.createAndMarkAsIssued({endpoint:f,engineName:c.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let x=_I.create(e,1,y,m,[],wGe.CancellationToken.None).processSSE(),b=EE(x,_=>PY(e,_,n));return{type:"success",choices:Yge(b),getProcessingTime:s(()=>S3(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(po),c="speculation",l=await e.get(Qr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:cr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},f=await this.fetchSpeculationWithParameters(e,c,u,l,n,o);if(f==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=f.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){_a.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(f.status!==200){let g=this.createTelemetryData(c,e,u);return this.handleError(e,a,g,f,l)}let m=_I.create(e,1,f,n,[],o).processSSE(i),h=EE(m,g=>PY(e,g,n));return{type:"success",choices:Yge(h),getProcessingTime:s(()=>S3(f),"getProcessingTime")}}createTelemetryData(e,r,n){return Dr.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let c={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await Ny(0),a?.isCancellationRequested?"not-sent":await TGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let c=e.get(Bt).disableLogProb(o),l={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:MY(e),temperature:R3(e,n.count),top_p:LY(e),n:n.count,stop:SGe(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!c)&&(l.logprobs=2);let u=dE(n.repoInfo);return u!==void 0&&(l.nwo=u),n.postOptions&&Object.assign(l,n.postOptions),n.prompt.context&&(l.extra.context=n.prompt.context),await Ny(0),a?.isCancellationRequested?"not-sent":await TGe(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:iFt,title:"Learn More"});let l=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),l.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),_a.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let c=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;_a.error(e,c),r.setWarning(c),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(_a.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Rt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Qr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",_a.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(_a.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(_a.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function BY(t,e,r,n,i,o,a){return uDe(t,e,r,i,n),{completionText:e,meanLogProb:oFt(t,r),meanAlternativeLogProb:sFt(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:cr(),finishReason:r.finish_reason}}s(BY,"convertToAPIChoice");function oFt(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){fn.exception(t,r,"Error calculating mean prob")}}s(oFt,"calculateMeanLogProb");function sFt(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){fn.exception(t,r,"Error calculating mean prob")}}s(sFt,"calculateMeanAlternativeLogProb");function R3(t,e){return Lh(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(R3,"getTemperatureForSamples");var aFt={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function SGe(t,e){return aFt[e??""]??[`


`,"\n```"]}s(SGe,"getStops");function LY(t){return 1}s(LY,"getTopP");function MY(t){return aM}s(MY,"getMaxSolutionTokens");var Kge=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},FY=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Kge(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new SY(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=BY(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let f=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});f.length>0&&(c[l]=f)}return Object.keys(c).length>0?c:void 0}};d();d();var km=class{constructor(){this.cache=new Or(100)}static{s(this,"SpeculativeRequestCache")}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};var OY=new vt("getCompletions");function QY(t,e,r){(vi(t,kt.EnableSpeculativeRequestsShown)??t.get(Bt).enableSpeculativeRequestsShown(r.telemetry))&&t.get(km).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=k3(r.resultType),Rt(t,`${e}.shown`,r.telemetry)}s(QY,"telemetryShown");function RGe(t,e,r){let n=e+".accepted";Rt(t,n,r)}s(RGe,"telemetryAccepted");function kGe(t,e,r){let n=e+".rejected";Rt(t,n,r)}s(kGe,"telemetryRejected");function SI(t,e={}){return{...e,telemetryBlob:t}}s(SI,"mkCanceledResultTelemetry");function lc(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(lc,"mkBasicResultTelemetry");function PGe(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=la()-e.telemetryBlob.issuedTime,n=k3(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,c=e.performanceMetrics?.map(([l,u])=>`
${u.toFixed(2)}	${l}`).join("")??"";return OY.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${c}`),Sue(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(OY.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Rt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Sue(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(PGe,"handleGhostTextResultTelemetry");function k3(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(k3,"resultTypeToString");d();d();d();d();d();d();var Rl=class{constructor(e=()=>new Jge){this.createStatistics=e;this.statistics=new Or(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},Jge=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,f]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),f==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let c=o.reduce((u,f)=>f.usage==="full"?u+1:f.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:l,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function BGe(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(BGe,"componentStatisticsToPromptMatcher");d();var DGe=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),NGe=I.Intersect([I.Object({name:I.String(),value:I.String()}),DGe]),LGe=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),DGe]),cFt=[NGe,LGe],lFt=I.Union(cFt),uFt=new Map([["Trait",Fs.Compile(NGe)],["CodeSnippet",Fs.Compile(LGe)]]),dFt=s(t=>t,"ensureTypesAreEqual");dFt(!0);var fFt=I.Object({contextItems:I.Array(lFt)}),pFt=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),Xge=I.Object({id:I.String()}),mFt=I.Intersect([Xge,pFt]),hFt=I.Intersect([Xge,fFt]),MGe=I.Object({providers:I.Array(mFt)}),FGe=I.Object({providers:I.Array(Xge)}),Zge=I.Object({providers:I.Array(hFt),updating:I.Optional(I.Array(I.String()))}),UY=I.Intersect([vDe,I.Object({contextItems:I.Optional(Zge)})]);function qY(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(qY,"filterContextItemsByType");function OGe(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of uFt.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(OGe,"filterSupportedContextItems");function gFt(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(gFt,"validateContextItemId");function QGe(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??cr();if(!gFt(o)){let a=cr();fn.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=cr();fn.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(QGe,"addOrValidateContextItemsIDs");var AFt="content_excluded";async function UGe(t,e,r,n){let i=qY(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(f=>f.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:f.providerId,data:p}))),c=t.get(pr),l=new Map;await Promise.all(Array.from(o).map(async f=>{l.set(f,await c.getTextDocumentValidation({uri:f}))}));let u=t.get(Rl).getStatisticsForCompletion(e);return a.filter(f=>{let m=[f.data.uri,...f.data.additionalUris??[]].every(h=>l.get(h)?.status==="valid");return m?u.addExpectations(f.providerId,[[f.data,"included"]]):u.addExpectations(f.providerId,[[f.data,AFt]]),m}).map(f=>f.data)}s(UGe,"getCodeSnippetsFromContextItems");function qGe(t,e){let r=t.get(pr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(qGe,"addRelativePathToCodeSnippets");d();function Qa(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Qa,"Text");function RI(t){return t.children}s(RI,"Chunk");d();function Mr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(Mr,"functionComponentFunction");function vg(t){return{type:"f",children:t}}s(vg,"fragmentFunction");vg.isFragmentFunction=!0;var HY=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Ff,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=qGe(t.ctx,r),c=new Map;for(let u of a){let f=u.relativePath??u.snippet.uri,p=c.get(f);p===void 0&&(p=[],c.set(f,p)),p.push(u)}let l=[];for(let[u,f]of c.entries()){let p=f.filter(m=>m.snippet.value.length>0);p.length>0&&l.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,f)=>f.importance-u.importance),l.reverse(),l.map(u=>{let f=[];return f.push(Mr(Qa,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{f.push(Mr(Qa,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&f.push(Mr(Qa,{children:"---"}))}),Mr(RI,{children:f})})},"CodeSnippets");d();function eAe(t){return t.children}s(eAe,"CompletionsContext");function tAe(t){return t.children}s(tAe,"StableCompletionsContext");function rAe(t){return t.children}s(rAe,"AdditionalCompletionsContext");function WY(t){return t.name===eAe.name||t.name===tAe.name||t.name===rAe.name}s(WY,"isContextNode");d();d();d();function GY(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(GY,"findEditDistanceScore");var iF=50;function nAe(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(nAe,"approximateMaxCharacters");function oF(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Ff,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=nAe(a);return Mr(vg,{children:[Mr(x2,{document:r,position:i,maxCharacters:m}),Mr(jY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})]})}s(oF,"CurrentFile");function x2(t){if(t.document===void 0||t.position===void 0)return Mr(Qa,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Mr(Qa,{children:e})}s(x2,"BeforeCursor");function jY(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return Mr(Qa,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Mr(Qa,{});if(r===o)return Mr(Qa,{children:r});let a=o;if(r!==""){let c=ho(t.tokenizer),l=c.takeFirstTokens(o,iF);l.tokens.length>0&&100*GY(l.tokens,c.takeFirstTokens(r,iF).tokens)?.score<(t.suffixMatchThreshold??VP)*l.tokens.length&&(a=r)}return a!==r&&n(a),Mr(Qa,{children:a})}s(jY,"AfterCursor");function HGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0);e.useData(Ff,u=>{let f=u.document;(u.document.uri!==r?.uri||f.getText()!==r?.getText())&&n(f),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=nAe(a);return Mr(x2,{document:r,position:i,maxCharacters:l})}s(HGe,"DocumentPrefix");function WGe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[f,p]=e.useState();e.useData(Ff,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==f&&p(h.tokenizer)});let m=nAe(a);return Mr(jY,{document:r,position:i,suffixMatchThreshold:l,maxCharacters:m,tokenizer:f})}s(WGe,"DocumentSuffix");d();var VY=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,o),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,c,o),f=this.elidePrefix(a,u,c,o);return{blocks:[l,...f],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,c)=>{let l=0,f=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return l+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:f}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let c=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(f=>!f.markedForRemoval).flatMap(f=>f.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,i),u=l;return o.map(f=>{if(f.markedForRemoval)return u+f.tokens<=r&&!f.chunks?(u+=f.tokens,{...f,elidedValue:f.value,elidedTokens:f.tokens}):{...f,elidedValue:"",elidedTokens:0};let p=c.filter(h=>h.componentPath===f.componentPath&&h.line!=="").map(h=>h.line).join(""),m=f.tokens;return p!==f.value&&(m=p!==""?i.tokenLength(p):0),{...f,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(i+l<=r)o.unshift(c),i+=l;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return o.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[o,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[o,i]}};function GGe(t){return t.map(e=>e.elidedValue).join("")}s(GGe,"makePrompt");function jGe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(jGe,"makePrefixPrompt");function VGe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(VGe,"makeContextPrompt");d();var B3=class{constructor(e,r=iAe()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((c,l)=>l(e,r,c),{...i});if(n(e,r,o))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,o)}};function iAe(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{if(t.name===RI.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}s(iAe,"defaultTransformers");d();var sF={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},oAe={};for(let[t,e]of Object.entries(sF))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)oAe[r]=t;else oAe[t]=t;function zGe(t){return oAe[t]}s(zGe,"mdCodeBlockLangToLanguageId");var yFt={start:"//",end:""},CFt=["php","plaintext"],sAe={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function YGe(t){return Object.values(sAe).includes(t.trim())}s(YGe,"isShebangLine");function EFt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(EFt,"hasLanguageMarker");function vFt(t,e){let r=sF[e]?sF[e].lineComment:yFt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(vFt,"comment");function My(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>vFt(o,e)).join(`
`);return r?i+`
`:i}s(My,"commentBlockAsSingles");function $Y(t){let{languageId:e}=t;return CFt.indexOf(e)===-1&&!EFt(t)?e in sAe?sAe[e]:`Language: ${e}`:""}s($Y,"getLanguageMarker");function zY(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(zY,"getPathMarker");function aF(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(aF,"newLineEnded");function KGe(t){return $Ge(typeof t=="string"?t:"plaintext")}s(KGe,"getLanguage");function $Ge(t){return sF[t]!==void 0?{languageId:t,...sF[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s($Ge,"_getLanguage");var xFt=5,D3=class{constructor(){this.renderId=0;this.formatPrefix=GGe}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??"o200k_base",{prefixBlocks:l,suffixBlock:u,componentStatistics:f}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),g=new VY,{blocks:[y,...E]}=g.elide(l,p,u,m,ho(c)),x=performance.now(),b=this.formatPrefix(E),_=this.formatContext?this.formatContext(E):void 0,k=y.elidedValue,P=E.reduce((N,M)=>N+M.elidedTokens,0);return f.push(...bFt([...E,y])),{prefix:b,prefixTokens:P,suffix:k,suffixTokens:y.elidedTokens,context:_,status:"ok",metadata:{renderId:i,rendererName:"c",tokenizer:c,elisionTimeMs:x-h,renderTimeMs:performance.now()-o,componentStatistics:f,updateDataTimeMs:f.reduce((N,M)=>N+(M.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-xFt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],c=!1;if(new B3(e,aAe).walkSnapshot((f,p,m)=>{if(f===e||(f.name===oF.name&&(c=!0),f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.value===void 0||f.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:cF(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let g=f.value.endsWith(r)?f.value:f.value+r,y=g;m.type==="prefix"?y=f.value:YGe(f.value)?y=g:y=My(g,n),i.push({type:m.type==="prefix"?"prefix":"context",value:cF(y),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source})}return!0}),!c)throw new Error(`Node of type ${oF.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},aAe=[...iAe(),(t,e,r)=>WY(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===x2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===jY.name?{...r,type:"suffix"}:r];function bFt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(bFt,"computeComponentStatistics");function cF(t){return t.replace(/\r\n?/g,`
`)}s(cF,"normalizeLineEndings");d();var YY=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Ff,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(pr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},c=i.findNotebook(r);return a.relativePath&&!c?Mr(IFt,{docInfo:a}):Mr(TFt,{docInfo:a})}},"DocumentMarker"),IFt=s(t=>Mr(Qa,{children:zY(t.docInfo)}),"PathMarker"),TFt=s(t=>Mr(Qa,{children:$Y(t.docInfo)}),"LanguageMarker");d();d();d();d();function lF(t,e="Unreachable"){throw new Error(e)}s(lF,"assertNever");function kl(t,e="unexpected state"){if(!t)throw new dn(`Assertion Failed: ${e}`)}s(kl,"assert");function xg(t){if(!t()){debugger;t(),g3(new dn("Assertion Failed"))}}s(xg,"assertFn");function b2(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(b2,"checkAdjacentItems");d();d();d();d();d();var xE=s((t,e)=>t===e,"strictEquals");d();d();var js=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},uF=class{constructor(){this._first=js.Undefined;this._last=js.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===js.Undefined}clear(){let e=this._first;for(;e!==js.Undefined;){let r=e.next;e.prev=js.Undefined,e.next=js.Undefined,e=r}this._first=js.Undefined,this._last=js.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new js(e);if(this._first===js.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==js.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==js.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==js.Undefined&&e.next!==js.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===js.Undefined&&e.next===js.Undefined?(this._first=js.Undefined,this._last=js.Undefined):e.next===js.Undefined?(this._last=this._last.prev,this._last.next=js.Undefined):e.prev===js.Undefined&&(this._first=this._first.next,this._first.prev=js.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==js.Undefined;)yield e.element,e=e.next}};d();var wFt=globalThis.performance&&typeof globalThis.performance.now=="function",N3=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=wFt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var JGe=!1,_Ft=!1,I2;(ie=>{ie.None=s(()=>ps.None,"None");function e(V){if(_Ft){let{onDidAddListener:Q}=V,z=dF.create(),re=0;V.onDidAddListener=()=>{++re===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),z.print()),Q?.()}}}s(e,"_addLeakageTraceLogic");function r(V,Q){return h(V,()=>{},0,void 0,!0,void 0,Q)}ie.defer=r,s(r,"defer");function n(V){return(Q,z=null,re)=>{let fe=!1,ne;return ne=V(me=>{if(!fe)return ne?ne.dispose():fe=!0,Q.call(z,me)},null,re),fe&&ne.dispose(),ne}}ie.once=n,s(n,"once");function i(V,Q){return ie.once(ie.filter(V,Q))}ie.onceIf=i,s(i,"onceIf");function o(V,Q,z){return p((re,fe=null,ne)=>V(me=>re.call(fe,Q(me)),null,ne),z)}ie.map=o,s(o,"map");function a(V,Q,z){return p((re,fe=null,ne)=>V(me=>{Q(me),re.call(fe,me)},null,ne),z)}ie.forEach=a,s(a,"forEach");function c(V,Q,z){return p((re,fe=null,ne)=>V(me=>Q(me)&&re.call(fe,me),null,ne),z)}ie.filter=c,s(c,"filter");function l(V){return V}ie.signal=l,s(l,"signal");function u(...V){return(Q,z=null,re)=>{let fe=vHe(...V.map(ne=>ne(me=>Q.call(z,me))));return m(fe,re)}}ie.any=u,s(u,"any");function f(V,Q,z,re){let fe=z;return o(V,ne=>(fe=Q(fe,ne),fe),re)}ie.reduce=f,s(f,"reduce");function p(V,Q){let z,re={onWillAddFirstListener(){z=V(fe.fire,fe)},onDidRemoveLastListener(){z?.dispose()}};Q||e(re);let fe=new K0(re);return Q?.add(fe),fe.event}s(p,"snapshot");function m(V,Q){return Q instanceof Array?Q.push(V):Q&&Q.add(V),V}s(m,"addAndReturnDisposable");function h(V,Q,z=100,re=!1,fe=!1,ne,me){let he,Qe,ke,tt=0,Fe,ht={leakWarningThreshold:ne,onWillAddFirstListener(){he=V(xt=>{tt++,Qe=Q(Qe,xt),re&&!ke&&(St.fire(Qe),Qe=void 0),Fe=s(()=>{let Tt=Qe;Qe=void 0,ke=void 0,(!re||tt>1)&&St.fire(Tt),tt=0},"doFire"),typeof z=="number"?(clearTimeout(ke),ke=setTimeout(Fe,z)):ke===void 0&&(ke=0,queueMicrotask(Fe))})},onWillRemoveListener(){fe&&tt>0&&Fe?.()},onDidRemoveLastListener(){Fe=void 0,he.dispose()}};me||e(ht);let St=new K0(ht);return me?.add(St),St.event}ie.debounce=h,s(h,"debounce");function g(V,Q=0,z){return ie.debounce(V,(re,fe)=>re?(re.push(fe),re):[fe],Q,void 0,!0,void 0,z)}ie.accumulate=g,s(g,"accumulate");function y(V,Q=(re,fe)=>re===fe,z){let re=!0,fe;return c(V,ne=>{let me=re||!Q(ne,fe);return re=!1,fe=ne,me},z)}ie.latch=y,s(y,"latch");function E(V,Q,z){return[ie.filter(V,Q,z),ie.filter(V,re=>!Q(re),z)]}ie.split=E,s(E,"split");function x(V,Q=!1,z=[],re){let fe=z.slice(),ne=V(Qe=>{fe?fe.push(Qe):he.fire(Qe)});re&&re.add(ne);let me=s(()=>{fe?.forEach(Qe=>he.fire(Qe)),fe=null},"flush"),he=new K0({onWillAddFirstListener(){ne||(ne=V(Qe=>he.fire(Qe)),re&&re.add(ne))},onDidAddFirstListener(){fe&&(Q?setTimeout(me):me())},onDidRemoveLastListener(){ne&&ne.dispose(),ne=null}});return re&&re.add(he),he.event}ie.buffer=x,s(x,"buffer");function b(V,Q){return s((re,fe,ne)=>{let me=Q(new k);return V(function(he){let Qe=me.evaluate(he);Qe!==_&&re.call(fe,Qe)},void 0,ne)},"fn")}ie.chain=b,s(b,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(Q){return this.steps.push(Q),this}forEach(Q){return this.steps.push(z=>(Q(z),z)),this}filter(Q){return this.steps.push(z=>Q(z)?z:_),this}reduce(Q,z){let re=z;return this.steps.push(fe=>(re=Q(re,fe),re)),this}latch(Q=(z,re)=>z===re){let z=!0,re;return this.steps.push(fe=>{let ne=z||!Q(fe,re);return z=!1,re=fe,ne?fe:_}),this}evaluate(Q){for(let z of this.steps)if(Q=z(Q),Q===_)break;return Q}}function P(V,Q,z=re=>re){let re=s((...he)=>me.fire(z(...he)),"fn"),fe=s(()=>V.on(Q,re),"onFirstListenerAdd"),ne=s(()=>V.removeListener(Q,re),"onLastListenerRemove"),me=new K0({onWillAddFirstListener:fe,onDidRemoveLastListener:ne});return me.event}ie.fromNodeEventEmitter=P,s(P,"fromNodeEventEmitter");function N(V,Q,z=re=>re){let re=s((...he)=>me.fire(z(...he)),"fn"),fe=s(()=>V.addEventListener(Q,re),"onFirstListenerAdd"),ne=s(()=>V.removeEventListener(Q,re),"onLastListenerRemove"),me=new K0({onWillAddFirstListener:fe,onDidRemoveLastListener:ne});return me.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function M(V,Q){return new Promise(z=>n(V)(z,null,Q))}ie.toPromise=M,s(M,"toPromise");function J(V){let Q=new K0;return V.then(z=>{Q.fire(z)},()=>{Q.fire(void 0)}).finally(()=>{Q.dispose()}),Q.event}ie.fromPromise=J,s(J,"fromPromise");function pe(V,Q){return V(z=>Q.fire(z))}ie.forward=pe,s(pe,"forward");function Y(V,Q,z){return Q(z),V(re=>Q(re))}ie.runAndSubscribe=Y,s(Y,"runAndSubscribe");class G{constructor(Q,z){this._observable=Q;this._counter=0;this._hasChanged=!1;let re={onWillAddFirstListener:s(()=>{Q.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{Q.removeObserver(this)},"onDidRemoveLastListener")};z||e(re),this.emitter=new K0(re),z&&z.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(Q){this._counter++}handlePossibleChange(Q){}handleChange(Q,z){this._hasChanged=!0}endUpdate(Q){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function H(V,Q){return new G(V,Q).emitter.event}ie.fromObservable=H,s(H,"fromObservable");function ce(V){return(Q,z,re)=>{let fe=0,ne=!1,me={beginUpdate(){fe++},endUpdate(){fe--,fe===0&&(V.reportChanges(),ne&&(ne=!1,Q.call(z)))},handlePossibleChange(){},handleChange(){ne=!0}};V.addObserver(me),V.reportChanges();let he={dispose(){V.removeObserver(me)}};return re instanceof hu?re.add(he):Array.isArray(re)&&re.push(he),he}}ie.fromObservableLight=ce,s(ce,"fromObservableLight")})(I2||={});var cAe=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new N3,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},XGe=-1;var lAe=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(o);let l=new uAe(c,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},dF=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},uAe=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},dAe=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},SFt=0,L3=class{constructor(e){this.value=e;this.id=SFt++}static{s(this,"UniqueContainer")}},RFt=2,kFt=s((t,e)=>{if(t instanceof L3)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),K0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=XGe>0||this._options?.leakWarningThreshold?new lAe(e?.onListenerError??g3,this._options?.leakWarningThreshold??XGe):void 0,this._perfMon=this._options?._profName?new cAe(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(JGe){let e=this._listeners;queueMicrotask(()=>{kFt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],f=new dAe(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||g3)(f),ps.None}if(this._disposed)return ps.None;r&&(e=e.bind(r));let i=new L3(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=dF.create(),o=this._leakageMon.check(i.stack,this._size+1)),JGe&&(i.stack=a??dF.create()),this._listeners?this._listeners instanceof L3?(this._deliveryQueue??=new fAe,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=sc(()=>{o?.(),this._removeListener(i)});return n instanceof hu?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*RFt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||g3;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof L3)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var fAe=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};d();var qd=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return rje(e,this)}},ZGe=new Map,pAe=new WeakMap;function rje(t,e){let r=pAe.get(t);if(r)return r;let n=PFt(t,e);if(n){let i=ZGe.get(n)??0;i++,ZGe.set(n,i);let o=i===1?n:`${n}#${i}`;return pAe.set(t,o),o}}s(rje,"getDebugName");function PFt(t,e){let r=pAe.get(t);if(r)return r;let n=e.owner?DFt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=KY(a),i!==void 0))return n+i;if(e.owner!==void 0){let c=BFt(e.owner,t);if(c!==void 0)return n+c}}s(PFt,"computeDebugName");function BFt(t,e){for(let r in t)if(t[r]===e)return r}s(BFt,"findKey");var eje=new Map,tje=new WeakMap;function DFt(t){let e=tje.get(t);if(e)return e;let r=NFt(t),n=eje.get(r)??0;n++,eje.set(r,n);let i=n===1?r:`${r}#${n}`;return tje.set(t,i),i}s(DFt,"formatOwner");function NFt(t){let e=t.constructor;return e?e.name:"Object"}s(NFt,"getClassName");function KY(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(KY,"getFunctionName");d();var T2;function XY(t){T2?T2 instanceof JY?T2.loggers.push(t):T2=new JY([T2,t]):T2=t}s(XY,"addLogger");function da(){return T2}s(da,"getLogger");var mAe;function nje(t){mAe=t}s(nje,"setLogObservableFn");function ije(t){mAe&&mAe(t)}s(ije,"logObservable");var JY=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var oje;function sje(t){oje=t}s(sje,"_setRecomputeInitiallyAndOnChange");var aje;function cje(t){aje=t}s(cje,"_setKeepObserved");var hAe;function lje(t){hAe=t}s(lje,"_setDerivedOpts");var ZY=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return hAe({owner:n,debugName:s(()=>{let o=KY(i);if(o!==void 0)return o;let c=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(c)return`${this.debugName}.${c[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return hAe({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(oje(this,r)),this}keepObserved(e){return e.add(aje(this)),this}get debugValue(){return this.get()}},kI=class extends ZY{constructor(){super();this.observers=new Set;da()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&da()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&da()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!da();return ije(this),r||da()?.handleObservableCreated(this),this}};function tK(t,e){let r=new M3(t,e);try{t(r)}finally{r.finish()}}s(tK,"transaction");function gAe(t,e,r){t?e(t):tK(e,r)}s(gAe,"subtransaction");var M3=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];da()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():KY(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,da()?.handleEndTransaction(this)}};function bg(t,e){let r;return typeof t=="string"?r=new qd(void 0,t,void 0):r=new qd(t,void 0,void 0),new eK(r,e,xE)}s(bg,"observableValue");var eK=class extends kI{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,da()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new M3(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),da()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let c of this.observers)n.updateObserver(c,this),c.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};d();d();function w2(t){return new F3(new qd(void 0,void 0,t),t,void 0,void 0)}s(w2,"autorun");function AAe(t,e){return new F3(new qd(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(AAe,"autorunOpts");function rK(t,e){return new F3(new qd(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(rK,"autorunHandleChanges");function yAe(t,e){let r=new hu,n=rK({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return sc(()=>{n.dispose(),r.dispose()})}s(yAe,"autorunWithStoreHandleChanges");function CAe(t){let e=new hu,r=AAe({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return sc(()=>{r.dispose(),e.dispose()})}s(CAe,"autorunWithStore");var F3=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),da()?.handleAutorunCreated(this),this._runIfNeeded(),y3(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),da()?.handleAutorunDisposed(this),C3(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){da()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){A2(n)}finally{this._isRunning=!1}}}finally{this.disposed||da()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}xg(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){da()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){A2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new dn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=F3)(w2||={});d();function nK(t,e){return new _2(new qd(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??xE)}s(nK,"derivedOpts");lje(nK);var _2=class extends kI{constructor(r,n,i,o,a=void 0,c){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=c;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,da()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let c of this.dependenciesToBeRemoved)c.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),da()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){A2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new dn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}xg(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){da()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){A2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new dn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};d();d();function EAe(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new PI(new qd(e,void 0,n),r,n,()=>PI.globalTransaction,xE)}s(EAe,"observableFromEvent");var PI=class extends kI{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,gAe(this._getTransaction(),c=>{da()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)c.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let c=this.getDebugName();return"Event fired"+(c?`: ${c}`:"")})),this.hasValue=!0),a||da()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=PI;function e(n,i){let o=!1;PI.globalTransaction===void 0&&(PI.globalTransaction=n,o=!0);try{i()}finally{o&&(PI.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(EAe||={});function dje(t){let e=new iK(!1,void 0);return t.addObserver(e),sc(()=>{t.removeObserver(e)})}s(dje,"keepObserved");cje(dje);function fje(t,e){let r=new iK(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),sc(()=>{t.removeObserver(r)})}s(fje,"recomputeInitiallyAndOnChange");sje(fje);var iK=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function Pm(t,e,r,n){let i=new oK(r,n);return nK({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new oK(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Pm,"mapObservableArrayCached");var oK=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let c=new hu;a={out:this._map(i,c),store:c},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function vAe(t,e){let r;return yAe({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(vAe,"runOnChange");d();d();d();var pje=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),sK;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof O3?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:I2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:pje})})(sK||={});var O3=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?pje:(this._emitter||(this._emitter=new K0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},bE=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new O3),this._token}cancel(){this._token?this._token instanceof O3&&this._token.cancel():this._token=sK.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof O3&&this._token.dispose():this._token=sK.None}};d();var aK;function mje(t){aK||(aK=new pF,XY(aK)),aK.addFilteredObj(t)}s(mje,"logObservableToConsole");var pF=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return LFt([Q3(OFt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Q3(" "),Bm(fF(e.oldValue,70),{color:"red",strikeThrough:!0}),Q3(" "),Bm(fF(e.newValue,60),{color:"green"})]:[Q3(" (unchanged)")]:[Q3(" "),Bm(fF(e.newValue,60),{color:"green"}),Q3(" (initial)")]}handleObservableCreated(e){if(e instanceof _2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=c=>(i.push(c),o.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=i.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),i.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof _2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([U3("observable value changed"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Bm(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([U3("derived recomputed"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([U3("derived cleared"),Bm(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([U3("observable from event triggered"),Bm(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([U3("autorun"),Bm(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([U3("transaction"),Bm(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function LFt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let c of a)c&&i(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(LFt,"consoleTextToArgs");function Q3(t){return Bm(t,{color:"black"})}s(Q3,"normalText");function U3(t){return Bm(QFt(`${t}: `,10),{color:"black",bold:!0})}s(U3,"formatKind");function Bm(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,c])=>`${o}${a}:${c};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(Bm,"styled");function fF(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?MFt(t,e):FFt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(fF,"formatValue");function MFt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${fF(i,e-r.length)}`}return r+=" ]",r}s(MFt,"formatArray");function FFt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${fF(o,e-r.length)}`}return r+=" }",r}s(FFt,"formatObject");function OFt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(OFt,"repeat");function QFt(t,e){for(;t.length<e;)t+=" ";return t}s(QFt,"padStr");nje(mje);var UFt=!1;UFt&&XY(new pF);d();var S2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(S2||={});d();d();d();function hje(t){return t}s(hje,"identity");var cK=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=hje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},IE=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=hje):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};d();d();var Dm=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};d();function R2(t){return t<0?0:t>4294967295?4294967295:t|0}s(R2,"toUint32");function xAe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(xAe,"escapeRegExpCharacters");function Nm(t){return t.split(/\r\n|\r|\n/)}s(Nm,"splitLines");function BI(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(BI,"commonPrefixLength");function TE(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(TE,"commonSuffixLength");var HFt=/^[\t\n\r\x20-\x7E]*$/;function bAe(t){return HFt.test(t)}s(bAe,"isBasicASCII");var _Mn=String.fromCharCode(65279);var gje=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=WFt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function WFt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(WFt,"getGraphemeBreakRawData");var Aje=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Dm(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new cK({getCacheKey:JSON.stringify},e=>{function r(f){let p=new Map;for(let m=0;m<f.length;m+=2)p.set(f[m],f[m+1]);return p}s(r,"arrayToMap");function n(f,p){let m=new Map(f);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(f,p){if(!f)return p;let m=new Map;for(let[h,g]of f)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(f=>!f.startsWith("_")&&f in o);a.length===0&&(a=["_default"]);let c;for(let f of a){let p=r(o[f]);c=i(c,p)}let l=r(o._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Dm(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},yje=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};d();var Ht=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new dn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new dn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new dn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new dn(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};d();var rn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};d();var lr=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,f=r.endColumn;return n<c?(n=c,i=l):n===c&&(i=Math.max(i,l)),o>u?(o=u,a=f):o===u&&(a=Math.min(a,f)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new rn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new rn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,f=r.endLineNumber|0;if(u===f){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-f}return c-l}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};d();d();var zr=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new uK(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new uK(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new dn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new dn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new lr(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new lr(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Ht(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},uK=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=h3(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=yg(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=sge(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=sge(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[i];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new zr(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=h3(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=yg(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>o&&i.push(new zr(o,c.startLineNumber)),o=c.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new zr(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],c=o.intersect(a);c&&!c.isEmpty&&r.push(c),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Pl=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new lr(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new lr(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new lr(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return zr.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new rn(e.lineNumber,e.column+this.columnCount):new rn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return lr.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var Bl=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new IAe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Nm(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},IAe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=yg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new rn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Ig=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var dK=class extends ps{constructor(r,n,i,o,a,c){super();this.id=r;this.workspaceRoot=c;this.value=bg(this,n),this.selection=bg(this,i),this.languageId=bg(this,o),this._register(sc(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};d();d();function wE(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return rK({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let c=n.get(o.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(o);a[c]===void 0&&(a[c]={value:u,changes:[],previous:i.get(c)}),a[c].value=u,a[c].previous=i.get(c)===void 0?void 0:i.get(c),i.set(c,u)}r(a)})}s(wE,"autorunWithChanges");d();var Fy=class extends ps{static{s(this,"RecentEditsProvider")}};function GFt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(GFt,"editIsTooCloseToCursor");var fK=s((t,e)=>{let[r,n]=e.useState();return e.useData(Ff,async i=>{if(!i.document)return;let o=t.ctx.get(Fy);if(o.isEnabled())o.start();else return;let a=o.config,c=o.getRecentEdits(),l=new Set,u=t.ctx.get(pr),f=[];for(let m=c.length-1;m>=0&&!(f.length>=a.maxEdits);m--){let h=c[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!l.has(h.file);if(l.size+(g?1:0)>a.maxFiles)break;let E=h.file===i.document?.uri,x=E?i.position.line:void 0;if(GFt(h,E,x,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){l.add(h.file);let k=u.getRelativePath({uri:h.file});f.unshift(aF(`File: ${k}`)+aF(_))}}if(f.length===0){n(void 0);return}let p=aF("These are recently edited files. Do not suggest code that has been deleted.")+f.join("")+aF("End of recent edits");n(p)}),r?Mr(RI,{children:Mr(Qa,{children:r})}):void 0},"RecentEdits");d();d();d();d();d();d();var jFt={tokenizerName:"o200k_base"};function VFt(t){return{...jFt,...t}}s(VFt,"cursorContextOptions");function mF(t,e={}){let r=VFt(e),n=ho(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(mF,"getCursorContext");d();d();var $Ft={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function Cje(t){let e=$Ft[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(Cje,"announceSnippet");var TAe=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var wAe=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=JFt.get(e.languageId)??KFt}tokenize(e){return new Set(zFt(e).filter(r=>!this.stopsForLanguage.has(r)))}},Eje=new TAe(20),q3=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new wAe(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=Eje.get(o)??[],c=a.length==0,l=c?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[f,p]]of this.getWindowsDelineations(i).entries()){if(c){let g=new Set;l.slice(f,p).forEach(y=>y.forEach(E=>g.add(E),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&f>0&&n[n.length-1].endLine>f){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=f,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:f,endLine:p})}return c&&Eje.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let c=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:c,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function zFt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(zFt,"splitIntoWords");var YFt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),KFt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...YFt]),JFt=new Map([]);d();function pK(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(pK,"getBasicWindowDelineations");var mK=class t extends q3{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return pK(this.windowLength,e)}_getCursorContextInfo(e){return mF(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return XFt(e,r)}};function XFt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(XFt,"computeScore");d();var hK=class t extends q3{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return pK(this.windowLength,e)}_getCursorContextInfo(e){return mF(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):mF(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return ZFt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await fE(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function ZFt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(ZFt,"computeScore");var eOt=0,tOt=60,rOt=4,nOt=1,iOt=20,oOt=1e4,vje={snippetLength:tOt,threshold:eOt,maxTopSnippets:rOt,maxCharPerFile:oOt,maxNumberOfFiles:iOt,maxSnippetsPerFile:nOt,useSubsetMatching:!1};var _Ae={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function sOt(t,e){return(e.useSubsetMatching?hK.FACTORY(e.snippetLength):mK.FACTORY(e.snippetLength)).to(t)}s(sOt,"getMatcher");async function xje(t,e,r){let n=sOt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(xje,"getSimilarSnippets");function bje(t,e){return{..._Ae,useSubsetMatching:SAe(t,e)}}s(bje,"getCppSimilarFilesOptions");function Ije(t){return _Ae.maxTopSnippets}s(Ije,"getCppNumberOfSnippets");var aOt=new Map([["cpp",bje]]);function gK(t,e,r){let n=aOt.get(r);return n?n(t,e):{...vje,useSubsetMatching:SAe(t,e)}}s(gK,"getSimilarFilesOptions");var cOt=new Map([["cpp",Ije]]);function Tje(t,e){let r=cOt.get(e);return r?r(t):iQe}s(Tje,"getNumberOfSnippets");function SAe(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||vi(t,kt.UseSubsetMatching))??!1}s(SAe,"useSubsetMatching");d();d();d();var AK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Ff,a=>{a.traits!==r&&n(a.traits);let c=cM(a.document.detectedLanguageId);c!==i&&o(c)}),!(!r||r.length===0||!i))return Mr(vg,{children:[Mr(Qa,{children:`Consider this related information:
`}),...r.map(a=>Mr(Qa,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function wje(t,e){return vi(t,kt.UseSplitContextPrompt)??t.get(Bt).enablePromptContextProxyField(e)}s(wje,"shouldUseSplitContextPrompt");function _je(t){return Mr(vg,{children:[Mr(tAe,{children:[Mr(YY,{ctx:t,weight:.7}),Mr(AK,{weight:.6}),Mr(HY,{ctx:t,weight:.9}),Mr(yK,{ctx:t,weight:.8})]}),Mr(WGe,{weight:1}),Mr(rAe,{children:Mr(fK,{ctx:t,weight:.99})}),Mr(HGe,{weight:1})]})}s(_je,"splitContextCompletionsPrompt");d();d();d();var RAe=new Or;function Sje(t){return[...t].sort((e,r)=>{let n=RAe.get(e.uri)??0;return(RAe.get(r.uri)??0)-n})}s(Sje,"sortByAccessTimes");var Rje=s(t=>t.get(pr).onDidFocusTextDocument(e=>{e&&RAe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var CK=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let c of e)if(!(a+c.getText().length>k2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&EK(n,c.detectedLanguageId)&&(o.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(Sje(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};d();d();function kje(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(kje,"shortCircuit");d();function uOt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(uOt,"defaultHash");function kAe(t,e={}){let{hash:r=uOt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(c=>{throw n.delete(o),c})),n.set(o,a),a}}s(kAe,"memoize");var Pje={entries:[],traits:[]},vK={entries:new Map,traits:[]},PAe=class extends Or{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},nl=new vt("relatedFiles"),dOt=1e3,xK=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},P2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let c=o.entries.get(a.type);c||(c=new Map,o.entries.set(a.type,c));for(let l of a.uris)try{nl.debug(this.context,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length==0){nl.debug(this.context,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){nl.debug(this.context,`Skip ${l} due content exclusion.`);continue}u=t.dropBOM(u),c.set(l,u)}catch(u){nl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(yo).readFileString(e)}catch(r){nl.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Mc).evaluate(e,r)).isBlocked}catch(n){nl.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},fOt=3,Bje=new PAe(dOt);async function Dje(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(l){nl.exception(t,l,".getRelatedFiles"),a=void 0}a===void 0&&(Bje.bumpRetryCount(e.uri)>=fOt?a=vK:a=void 0);let c=performance.now()-o;if(nl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(l=>l.size).reduce((l,u)=>l+u,0)} related files for '${e.uri}' in ${c}ms.`:`Failing fetching files for '${e.uri}' in ${c}ms.`),a===void 0)throw new xK;return a}s(Dje,"getRelatedFiles");var BAe=kAe(Dje,{cache:Bje,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});BAe=kje(BAe,200,vK);async function bK(t,e,r,n,i,o=!1){let a=t.get(P2),c=vK;try{let l={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};c=o?await Dje(t,l,r,n,a):await BAe(t,l,r,n,a)}catch(l){c=vK,l instanceof xK&&Rt(t,"getRelatedFilesList",r)}return nl.debug(t,c!=null?`Fetched following traits ${c.traits.map(l=>`{${l.name} : ${l.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),c}s(bK,"getRelatedFilesAndTraits");function EK(t,e){return cM(t)===cM(e)}s(EK,"considerNeighborFile");var k2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,c){let l=e.get(pr);t.instance===void 0&&(t.instance=new CK(l));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(pOt(e,i))return u;let f=await l.getTextDocument({uri:r});if(!f)return nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=l.getWorkspaceFolder(f);if(!p)return nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await bK(e,f,i,o,a,c);return m.entries.size===0?(nl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((E,x)=>{let b=t.getRelativePath(x,p.uri);if(!b||u.docs.has(x))return;let _={relativePath:b,uri:x,source:E};y.unshift(_),u.docs.set(x,_)}),y.length>0&&u.neighborSource.set(g,y.map(E=>E.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function pOt(t,e){return t.get(Bt).excludeRelatedFiles(e)||vi(t,kt.ExcludeRelatedFiles)}s(pOt,"isExcludeRelatedFilesActive");function Nje(t,e){return t.get(Bt).includeNeighboringFiles(e)||vi(t,kt.IncludeNeighboringFiles)}s(Nje,"isIncludeNeighborFilesActive");var IK=10,TK={type:"contextTooShort"},wK={type:"copilotContentExclusion"},H3={type:"promptError"},Oy={type:"promptCancelled"},Lje={type:"promptTimeout"};function DI(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(DI,"trimLastLine");function W3(t,e,r,n,i,o={}){let c=t.get(pr).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);c&&l&&(r=hOt(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=wje(t,n);return t.get(_E).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(W3,"extractPrompt");function mOt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:My(n,e)}s(mOt,"addNeighboringCellsToPrompt");function hOt(t,e,r){let i=e.getCells().filter(c=>c.index<r.index&&EK(r.document.detectedLanguageId,c.document.detectedLanguageId)),o=i.length>0?i.map(c=>mOt(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(hOt,"applyEditsForNotebook");function G3(t,e,r){let i=t.get(Bt).maxPromptCompletionTokens(e)-MY(t),o=Tje(e,r),a=gK(t,e,r),c=t.get(Bt).suffixPercent(e),l=t.get(Bt).suffixMatchThreshold(e),u=t.get(Bt).workspaceContextPercent(e);if(c<0||c>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${c}`);if(l<0||l>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`workspaceContextPercent must be between 0 and 100, but was ${u}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:c,suffixMatchThreshold:l,workspaceContextPercent:u}}s(G3,"getPromptOptions");var yK=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(Ff,async l=>{l.document.uri!==r?.uri&&o([]),n(l.document);let u=k2.defaultEmptyResult();l.turnOffSimilarFiles||(u=await k2.getNeighborFilesAndTraits(t.ctx,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data));let f=await a(l.telemetryData,l.document,l,u);o(f)});async function a(l,u,f,p){let m=G3(t.ctx,l,u.detectedLanguageId);return(await c(m,l,u,f,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...Cje(g),score:g.score}))}s(a,"produceSimilarFiles");async function c(l,u,f,p,m){let h=l.similarFilesOptions||gK(t.ctx,u,f.detectedLanguageId),y=t.ctx.get(pr).getRelativePath(f),E={uri:f.uri,source:f.getText(),offset:f.offsetAt(p.position),relativePath:y,languageId:f.detectedLanguageId};return await xje(E,Array.from(m.docs.values()),h)}return s(c,"findSimilarSnippets"),Mr(vg,{children:[...i.map((l,u)=>Mr(gOt,{snippet:l}))]})},"SimilarFiles"),gOt=s((t,e)=>Mr(RI,{children:[Mr(Qa,{children:t.snippet.headline}),Mr(Qa,{children:t.snippet.snippet})]}),"SimilarFile");d();var Mje=0;function AOt(){Mje=0}s(AOt,"resetContextIndex");function yOt(){return Mje++}s(yOt,"getNextContextIndex");var _K=class extends D3{constructor(){super(...arguments);this.formatPrefix=jGe;this.formatContext=VGe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],c=!1;if(AOt(),new B3(r,COt).walkSnapshot((f,p,m)=>{if(f===r||(f.statistics.updateDataTimeMs&&f.statistics.updateDataTimeMs>0&&a.push({componentPath:f.path,updateDataTimeMs:f.statistics.updateDataTimeMs}),f.name===x2.name&&(c=!0),f.value===void 0||f.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:cF(f.value),type:"suffix",weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source});else{let y=g==="prefix",E=y||f.value.endsWith(n)?f.value:f.value+n;i.push({type:y?"prefix":"context",value:cF(E),weight:m.weight,componentPath:f.path,nodeStatistics:f.statistics,chunks:h,source:m.source,index:y?void 0:m.index})}return!0}),!c)throw new Error(`Node of type ${x2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},COt=[...aAe,(t,e,r)=>WY(t)?{...r,index:yOt()}:r];d();d();async function EOt(t){if(t.isCancellationRequested)return;let e=new Od,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(EOt,"cancellationTokenToPromise");async function Fje(t,e){if(e){let r=EOt(e);await Promise.race([t,r])}else await t}s(Fje,"raceCancellation");function DAe(t){return Array.isArray(t)}s(DAe,"isArrayOfT");async function Oje(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let c=await vOt(o,e);r.set(i,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(Oje,"resolveAll");async function vOt(t,e){let r;return t instanceof Promise?r=await xOt(t,e):r=await bOt(t,e),r}s(vOt,"resolve");async function xOt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:DAe(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await Fje(i,e),n.resolutionTime=performance.now()-r,n}s(xOt,"resolvePromise");async function bOt(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await Fje(i,e),n.resolutionTime=performance.now()-r,n}s(bOt,"resolveIterable");d();var IOt={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},TOt="ms-vscode.cpptools",wOt="CppCompletionContextProvider";function Qje(t,e,r,n){(e.includes(wOt)||e.length===1&&e[0]==="*")&&qje(t,r,n)}s(Qje,"fillInCppVSActiveExperiments");function Uje(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(TOt))&&qje(t,r,n)}s(Uje,"fillInCppVSCodeActiveExperiments");function qje(t,e,r){try{let n=IOt,i=t.get(Bt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){fn.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){fn.exception(t,n,"fillInCppActiveExperiments")}}s(qje,"addActiveExperiments");d();function SK(t,e,r){try{let n=t.get(Bt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return fn.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(SK,"fillInCSharpActiveExperiments");d();var NI="fallbackContextProvider",RK={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function Hje(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(NI))&&_Ot(t,r,n)}s(Hje,"fillInMultiLanguageActiveExperiments");function _Ot(t,e,r){try{let n=SOt(t,r);for(let[i,o]of Object.entries(n))e.set(i,o)}catch(n){fn.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(_Ot,"addActiveExperiments");function SOt(t,e){let r=RK,n=t.get(Bt).multiLanguageContextProviderParams(e);if(n)try{r=JSON.parse(n)}catch(i){fn.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return r}s(SOt,"getMultiLanguageContextProviderParamsFromExp");function Wje(t){let e={...RK};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(Wje,"getMultiLanguageContextProviderParamsFromActiveExperiments");d();var ROt="typescript-ai-context-provider";function Gje(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(ROt)))return!1;try{let i=t.get(Bt).tsContextProviderParams(n);if(i){let o=JSON.parse(i);for(let[a,c]of Object.entries(o))r.set(a,c)}}catch(i){return fn.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(Gje,"fillInTsActiveExperiments");var jje=Ne(di());var uc=class{static{s(this,"ContextProviderRegistry")}},Qy=class{static{s(this,"DefaultContextProviders")}},j3=class extends Qy{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},NAe=class extends uc{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a,c){if(a?.isCancellationRequested)return fn.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;SK(this.ctx,l,o);let u=[];if(this._providers.length===0)return u;let f=await this.matchProviders(i,o),p=f.filter(k=>k[1]>0);if(f.filter(k=>k[1]<=0).forEach(([k,P])=>{let N={providerId:k.id,matchScore:P,resolution:"none",resolutionTimeMs:0,data:[]};u.push(N)}),p.length===0)return u;if(a?.isCancellationRequested)return fn.debug(this.ctx,"Resolving context providers cancelled"),[];Uje(this.ctx,p.map(k=>k[0].id),l,o),Hje(this.ctx,p.map(k=>k[0].id),l,o),Gje(this.ctx,p.map(k=>k[0].id),l,o);let h=new jje.CancellationTokenSource;if(a){let k=a.onCancellationRequested(P=>{h.cancel(),k.dispose()})}let g=x6(this.ctx)&&!IH(this.ctx)?0:kOt(this.ctx,o),y=g>0?Date.now()+g:Number.MAX_SAFE_INTEGER,E;g>0&&(E=setTimeout(()=>{h.cancel(),h.dispose()},g));let x=new Map,b={completionId:r,opportunityId:n,documentContext:i,activeExperiments:l,timeBudget:g,timeoutEnd:y,data:c};for(let[k]of p){let P=this.ctx.get(Rl).getPreviousStatisticsForCompletion(r)?.get(k.id);P&&(b.previousUsageStatistics=P);let N=k.resolver.resolve(b,h.token);x.set(k.id,N)}let _=await Oje(x,h.token);E&&clearTimeout(E);for(let[k,P]of p){let N=_.get(k.id);if(N){if(N.status==="error")C$(N.reason)||fn.error(this.ctx,`Error resolving context from ${k.id}: `,N.reason),u.push({providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:[]});else{let M=[...N.value??[]];if((N.status==="none"||N.status==="partial")&&(fn.info(this.ctx,`Context provider ${k.id} exceeded time budget of ${g}ms`),k.resolver.resolveOnTimeout))try{let H=k.resolver.resolveOnTimeout(b);DAe(H)?M.push(...H):H&&M.push(H),M.length>0&&(N.status="partial")}catch(H){fn.error(this.ctx,`Error in fallback logic for context provider ${k.id}: `,H)}let[J,pe]=OGe(M);pe&&fn.error(this.ctx,`Dropped ${pe} context items from ${k.id} due to invalid schema`);let Y=QGe(this.ctx,J),G={providerId:k.id,matchScore:P,resolution:N.status,resolutionTimeMs:N.resolutionTime,data:Y};u.push(G)}this.ctx.get(Rl).getStatisticsForCompletion(r).setLastResolution(k.id,N.status)}else fn.error(this.ctx,`Context provider ${k.id} not found in results`)}return u.sort((k,P)=>P.matchScore-k.matchScore)}async matchProviders(r,n){let i=PK(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async c=>{if(!o&&!i.includes(c.id))return[c,0];let l=await this.match(this.ctx,c.selector,r);return[c,l]}))}},LAe=class extends uc{constructor(r){super();this.delegate=r;this._cachedContextItems=new Or(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a,c){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let u=await this.delegate.resolveAllProviders(r,n,i,o,a,c);return u.length>0&&r&&this._cachedContextItems.set(r,u),u}};function kK(t,e){return new LAe(new NAe(t,e))}s(kK,"getContextProviderRegistry");function Vje(t,e,r){let n=t.get(Rl).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:f}=o,p=n.get(a),m=p?.usage??"none";(u<=0||c==="none"||c==="error")&&(m="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:f.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="full"||E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(E=>E.usage==="partial"||E.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(Vje,"telemetrizeContextItems");function $je(t){return t.matchScore>0&&t.resolution!=="error"}s($je,"matchContextItems");function PK(t,e){let r=MAe(t,e),n=vi(t,kt.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(Qy).getIds();return Array.from(new Set([...i,...r,...n]))}s(PK,"getActiveContextProviders");function MAe(t,e){return x6(t)?["*"]:t.get(Bt).contextProviders(e)}s(MAe,"getExpContextProviders");function FAe(t,e){return PK(t,e).length>0}s(FAe,"useContextProviderAPI");function kOt(t,e){let r=vi(t,kt.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Bt).contextProviderTimeBudget(e)}s(kOt,"getContextProviderTimeBudget");d();function zje(t,e,r){let n=qY(r,"Trait");for(let o of n)POt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(zje,"getTraitsFromContextItems");function POt(t,e,r,n){let i=t.get(Rl).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(POt,"setupExpectationsForTraits");var BOt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function Yje(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let l of r){let u=BOt.get(l.name);u&&(a[u]=l.value)}let c=o.extendedBy(a,{});return Rt(e,t,c)}}s(Yje,"ReportTraitsTelemetry");d();d();d();var BK=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},DK=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var NK=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(o);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let f=this.reconcileNode(u,e.path,l,i);f!==void 0&&c.push(f)}}o.children=c}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(DOt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,c=i.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:i.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,c=new QAe(this.getOrCreateLifecycleData(a)),l=i(n.props,c),p=(Array.isArray(l)?l:[l]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new OAe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},OAe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},QAe=class{constructor(e){this.lifecycleData=e;this.stateHook=new BK(e.state),this.dataHook=new DK(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function DOt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(DOt,"isFragmentFunction");var hF=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new NK(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};function Ff(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Ff,"isCompletionRequestData");var UAe={default:{promptFunction:Kje,renderer:D3},splitContext:{promptFunction:_je,renderer:_K}};function Kje(t){return Mr(vg,{children:[Mr(eAe,{children:[Mr(YY,{ctx:t,weight:.7}),Mr(AK,{weight:.6}),Mr(HY,{ctx:t,weight:.9}),Mr(yK,{ctx:t,weight:.8}),Mr(fK,{ctx:t,weight:.99})]}),Mr(oF,{weight:1})]})}s(Kje,"defaultCompletionsPrompt");var LK=class{constructor(e,r,n){this.ctx=e;this.promptOrdering=n??"default",this.virtualPrompt=r??new hF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:i},o){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=G3(this.ctx,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,o);if(u)return u;let f=i?.separateContext?"splitContext":"default";this.setPromptOrdering(f);let p=performance.now(),{traits:m,codeSnippets:h,turnOffSimilarFiles:g,resolvedContextItems:y}=await this.resolveContext(e,r,n,o,i);if(await this.updateComponentData(r.textDocument,r.position,m,h,n,g,a,o,i,l,i?.tokenizer),o?.isCancellationRequested)return Oy;let E=this.virtualPrompt.snapshot(o),x=E.status;if(x==="cancelled")return Oy;if(x==="error")return this.errorPrompt(E.error);let b=this.renderer.render(E.snapshot,{delimiter:`
`,tokenizer:i?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},o);if(b.status==="cancelled")return Oy;if(b.status==="error")return this.errorPrompt(b.error);let[_,k]=DI(b.prefix),P={...b,prefix:_},N;if(FAe(this.ctx,n)){let J=BGe(b.metadata.componentStatistics);this.ctx.get(Rl).getStatisticsForCompletion(e).computeMatch(J),N=Vje(this.ctx,e,y),fn.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(N)}'`)}let M=performance.now();return this.resetIfEmpty(b),this.successPrompt(P,M,p,k,N)}async updateComponentData(e,r,n,i,o,a,c,l,u={},f,p){let m=this.createRequestData(e,r,o,l,u,c,n,i,a,f,p);await this.pipe.pump(m)}async resolveContext(e,r,n,i,o={}){let a=[],c,l,u=!1;if(FAe(this.ctx,n)){a=await this.ctx.get(Lm).resolution(e);let{textDocument:f}=r,p=a.filter($je);LOt(this.ctx,f.detectedLanguageId,p,n)||(u=!0),c=zje(this.ctx,e,p),Yje("contextProvider.traits",this.ctx,c,f.detectedLanguageId,f.detectedLanguageId,n),l=await UGe(this.ctx,e,p,f.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Oy;if((await this.ctx.get(Mc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return wK;if((n>0?e.getText().length:e.offsetAt(r))<IK)return TK}createRequestData(e,r,n,i,o,a,c,l,u,f,p){return{document:e,position:r,telemetryData:n,cancellationToken:i,data:o.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:f,maxPromptTokens:a,tokenizer:p}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,i,o){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:o}}errorPrompt(e){return Ia(this.ctx,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),H3}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new hF(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){return(UAe[this.promptOrdering]?.promptFunction??Kje)(this.ctx)}getRenderer(){let e=UAe[this.promptOrdering]??UAe.default;return new e.renderer}};function LOt(t,e,r,n){let i=["cpp","c"];return Nje(t,n)||i.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}s(LOt,"similarFilesEnabled");d();d();d();var MOt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function FOt(t){return MOt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(FOt,"isOomError");function LI(t,e,r,n=fn){if(!Nu(e)){if(e instanceof Error){let i=e;FOt(i)?t.get(po).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(po).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(po).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(po).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(po).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(LI,"handleException");function Jje(t){process.addListener("uncaughtException",r=>{LI(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,LI(t,r,"unhandledRejection")}finally{e=!1}})}s(Jje,"registerDefaultHandlers");d();d();d();var B2="[...]",OOt=0,MI=-1;function Uy(){return OOt++}s(Uy,"getAvailableNodeId");function Xje(t,e){let r=t.children.map(n=>n.elisionMarker??e);return[...t.text.entries()].map(([n,i])=>n===0?i:r[n-1]+i).join("")}s(Xje,"elideChildren");function Zje(t,e=B2){return r=>t.tokenLength(Xje(r,e))}s(Zje,"getTokenizerCostFunction");function eVe(t=B2){return e=>Xje(e,t).length-(e.elisionMarker??t).length}s(eVe,"getBasicCostFunction");d();var V3=class{static{s(this,"PriorityQueue")}constructor(e){if(this.heap=e?[...e]:[],this.heap.length>0)for(let r=Math.floor(this.heap.length/2)-1;r>=0;r--)this.siftDown(r)}get size(){return this.heap.length}insert(e,r){let n={item:e,priority:r};this.heap.push(n);let i=this.heap.length-1;this.siftUp(i)}peek(){return this.heap.length===0?null:this.heap[0]}pop(){if(this.heap.length===0)return null;let e=this.heap[0],r=this.heap.pop();return this.heap.length>0&&(this.heap[0]=r,this.siftDown(0)),e}clear(){let e=this.heap;return this.heap=[],e}siftUp(e){let r=this.heap[e];for(;e>0;){let n=Math.floor((e-1)/2);if(this.heap[n].priority>=r.priority)break;this.heap[e]=this.heap[n],e=n}this.heap[e]=r}siftDown(e){let r=this.heap[e],n=this.heap.length-1;for(;e<n;){let i=e,o=2*e+1,a=o+1;if(o<=n&&this.heap[o].priority>this.heap[i].priority&&(i=o),a<=n&&this.heap[a].priority>this.heap[i].priority&&(i=a),i===e)break;this.heap[e]=this.heap[i],e=i}this.heap[e]=r}};var gF=class{constructor(e,r,n,i,o=0,a=!1,c=B2){this.id=e;this.text=r;this.children=n;this.cost=i;this.weight=o;this.canMerge=a;this.elisionMarker=c;this.requireRenderedChild=!1;if(r.length!==n.length+1)throw new Error(`Text fragments length (${r.length}) must be equal to children length (${n.length}) + 1`);this.cost=Math.max(i,1),this.weight=Math.max(o,0)}static{s(this,"RenderNode")}get value(){return this.weight/this.cost}render(e=void 0,r=[],n){let i=new Set(Array.isArray(r)?r:[r]);if((e??this.cost)<this.cost||i.has(this.id))return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length};if(e===void 0){let f=s(h=>i.has(h.id),"elider"),p=[];this.recursivelyRender(p,f);let m=p.join("");return{rendered:m,cost:n?n(m):m.length}}let o=new Set,a=[],c=[],l=new V3([{item:this,priority:this.value}]),u=e;for(;u>0&&l.size>0;){let{item:f}=l.pop();if(!i.has(f.id)&&f.cost<=u){u-=f.cost,o.add(f.id),a.push(f);for(let p of f.children)l.insert(p,p.value);f.requireRenderedChild&&c.push(f)}}for(let f=c.length-1;f>=0;f--){let p=c[f];p.children.some(m=>o.has(m.id))||o.delete(p.id)}for(;o.size>0;){let f=[],p=s(g=>!o.has(g.id),"elider");this.recursivelyRender(f,p);let m=f.join("");if(n===void 0)return{rendered:m,cost:m.length};let h=n(m);if(h<=e)return{rendered:m,cost:h};for(;a.length>0&&h>e;){let g=a.pop();h-=g.cost,o.delete(g.id)}if(a.length===0)return{rendered:this.elisionMarker,cost:n(this.elisionMarker)}}return{rendered:this.elisionMarker,cost:n?n(this.elisionMarker):this.elisionMarker.length}}updateWeights(e){let r=this.recursivelyRectifyWeights(e);for(let{item:n,priority:i}of r.clear())for(let o of n.nodes)o.weight=i*o.cost}recursivelyRender(e,r,n=!1){if(r(this))return e.length>=2&&(n||e[e.length-2]===this.elisionMarker&&e[e.length-1].trim().length===0)?(e.pop(),!0):(e.push(this.elisionMarker),!0);let i=!1;for(let[o,a]of this.children.entries())e.push(this.text[o]??""),i=a.recursivelyRender(e,r,a.canMerge&&i);return e.push(this.text[this.text.length-1]??""),!1}recursivelyRectifyWeights(e){let r=this.children.map(a=>a.recursivelyRectifyWeights(e)),n=Math.max(0,e?e(this):this.weight);if(n===0&&r.reduce((a,c)=>a+c.size,0)===0)return this.weight=0,new V3([]);let i=new V3(r.flatMap(a=>a.clear())),o={nodes:[this],totalCost:this.cost,totalWeight:n};for(this.requireRenderedChild=!1;(i.peek()?.priority??0)>o.totalWeight/o.totalCost;){let{item:a}=i.pop();o.nodes.push(...a.nodes),o.totalCost+=a.totalCost,o.totalWeight+=a.totalWeight,this.requireRenderedChild=!0}return i.insert(o,o.totalWeight/o.totalCost),i}findNode(e){if(this.id===e)return this;for(let r of this.children){let n=r.findNode(e);if(n!==void 0)return n}}};function qAe(t,e,r=B2,n){if(n?.has(t.id))return n.get(t.id);let i=t.children.map(c=>qAe(c,e,r));r=t.elisionMarker??r;let o=e(t),a=new gF(t.id,t.text,i,o,0,t.canMerge,r);return n?.set(a.id,a),a}s(qAe,"snapshot");d();d();d();function AF(t,e,r){let n=t.get(e);return n===void 0&&(n=r(e),t.set(e,n)),n}s(AF,"setDefault");function QOt(t){return t.id!==void 0}s(QOt,"isNodeItem");var UOt={"RecentDocumentProvider.RecentlyOpen":.1,"RecentDocumentProvider.RecentlyFocused":.1,"RecentDocumentProvider.RecentlyEdited":.1,RecentCompletionsRequestProvider:1,"ExtensionActivityProvider.CurrentSelection":5,"ExtensionActivityProvider.PrimarySelection":2,"ExtensionActivityProvider.Selection":.2,"ExtensionActivityProvider.VisibleRange":1,FileDirectoryDocumentProvider:.05,"SymbolContextProvider.Identifiers":.2,"SymbolContextProvider.Text":.2,"TreeProximityProvider.Parent":.3,"TreeProximityProvider.Children":.3,"TreeProximityProvider.Siblings":.3,"ExtensionReferenceProvider.References":.2,"ExtensionReferenceProvider.Definitions":1},$3=class{static{s(this,"WorkspaceContextWeights")}constructor(e){let r=new Map;for(let{uri:n,weight:i}of e)r.set(n,(r.get(n)??0)+i);this.documents=[...r.entries()].map(([n,i])=>({uri:n,weight:i})).sort((n,i)=>i.weight-n.weight),this.docWeights=r,this.nodes=e.filter(({id:n})=>n!==MI),this.nodeWeights=new Map(e.map(({id:n,weight:i})=>[n,i]))}getNodeWeight(e){return this.nodeWeights.get(e)??0}getDocumentWeight(e){return this.docWeights.get(e)??0}},MK=class{constructor(e,r){this.activeContext=e;this.config=r;this.sourceWeights=UOt;this.sourceContext=new Map;this.prevUpdateTime=void 0;this.prevItems=[];this.weights=new $3([])}static{s(this,"WorkspaceContextCoordinator")}getWeights(e){if(e){let r=this.sourceContext.get(e);return r?new $3(r.items):new $3([])}return this.weights}updateWeights(){let e=new Map,r=0,n=this.config.StaleWeightHalflife;for(let[i,{items:o,updateTime:a}]of this.sourceContext.entries()){let c=this.sourceWeights[i]??0;if(c<=0||o.length===0)continue;let l=Math.exp(-Math.max(0,(this.prevUpdateTime??a)-a)/n);c*=l,r+=c,this.aggregateWeights(o,e,c,!0)}if(r>0){if(this.weights.nodes.length>0){let i=r*this.config.Laziness,o=this.prevItems;this.aggregateWeights(o,e,i,!0)}for(let[i,o]of e.entries()){let a=this.activeContext.getDocument(i)?.document;if(a===void 0)continue;let c=o.get(MI);if(c!==void 0&&c>0){o.delete(MI);let l=a.getAllIds(),u=c/l.length;for(let f of l)o.set(f,(o.get(f)??0)+u)}}this.prevItems=this.truncateAndNormalize(e),this.weights=new $3(this.prevItems)}return this.prevUpdateTime=performance.now(),this.weights}pushWorkspaceContext(e,r){let n=performance.now(),i=this.addUriAndId(r),o=new Map;this.aggregateWeights(i,o);let a=this.truncateAndNormalize(o);this.sourceContext.set(e,{items:a,updateTime:n})}addUriAndId(e){return e.filter(r=>r.weight>0).map(r=>{let n=QOt(r)?r.id:MI,i=r.uri??this.activeContext.getUri(n);return{weight:r.weight,uri:i,id:n}}).filter(r=>r.uri!==void 0)}aggregateWeights(e,r,n=1,i=!1){for(let{uri:o,id:a,weight:c}of e){if(c<=0)continue;let l=AF(r,o,()=>new Map),u=MI;(!i||this.activeContext.getUri(a)!==void 0)&&(u=a),l.set(u,(l.get(u)??0)+c*n)}}truncateAndNormalize(e){let r=[],n=new Map;for(let[l,u]of e.entries()){let f=this.activeContext.normalizeUri(l);if(f!==void 0)for(let[p,m]of u.entries())p===MI?n.set(f,m):r.push({uri:f,id:p,weight:m})}r.sort((l,u)=>u.weight-l.weight);for(let{uri:l,weight:u}of r.slice(this.config.MaxActiveNodes,r.length))n.set(l,(n.get(l)??0)+u);let i=[...n.entries()].sort((l,u)=>u[1]-l[1]).slice(0,this.config.MaxActiveFiles).map(([l,u])=>({uri:l,id:MI,weight:u})),o=r.slice(0,this.config.MaxActiveNodes).concat(i).sort((l,u)=>u.weight-l.weight),a=o.reduce((l,u)=>l+u.weight,0);return a<=0?[]:o.map(l=>({...l,weight:l.weight/a}))}};d();d();var J0=class{static{s(this,"FileSearch")}};d();d();var FK=class{constructor(e,r,n,i=!1){this.id=e;this.parts=r;this.text=n;this.canMerge=i}static{s(this,"ContextNode")}get startOffset(){return this.parts[0].root.startOffset}get endOffset(){return this.parts[this.parts.length-1].root.endOffset}get syntaxRoots(){return this.parts.map(e=>e.root)}get children(){return this.parts.flatMap(e=>e.children)}get syntaxLimits(){return this.children.flatMap(e=>e.syntaxRoots)}*syntaxNodes(){let e=new Set(this.syntaxLimits.map(r=>r.id));for(let r of this.syntaxRoots)yield*rVe(r,e)}findChild(e,r){if(e<this.startOffset||r>this.endOffset||r<e)return;let n=0,i=this.parts.length-1,o;for(;n<=i;){let c=Math.floor((n+i)/2);if(o=this.parts[c],o.root.startOffset<=e&&o.root.endOffset>=r)break;o.root.endOffset<e?n=c+1:i=c-1}if(o===void 0||i<n)return;n=0,i=o.children.length-1;let a;for(;n<=i;){let c=Math.floor((n+i)/2);if(a=o.children[c],a.startOffset<=e&&a.endOffset>=r)break;a.endOffset<e?n=c+1:i=c-1}if(!(a===void 0||i<n))return a}},OK=class{constructor(e,r,n){this._parsedDocument=e;this.minSize=r;this.updateId=Uy();this.syntaxToAbstract=new Map;this.nodeById=new Map;this.minSize=Math.max(r,1),this.maxSize=Math.max(n??2*this.minSize,this.minSize+1),this._root=this.buildTree()}static{s(this,"ContextDocument")}get uri(){return this.parsedDocument.document.uri}get version(){return this.updateId}get parsedDocument(){return this._parsedDocument}get document(){return this.parsedDocument.document}get rootId(){return this._root.id}get root(){return this._root}getNode(e){return this.nodeById.get(e)}getAllIds(){return Array.from(this.nodeById.keys())}findNode(e,r){let n=this.parsedDocument.findNode(e,r);for(;!this.syntaxToAbstract.has(n.id);){if(n.parent===null)return this.root;n=n.parent}let i=this.syntaxToAbstract.get(n.id);if(r===void 0)return i;let o=i;for(;o!==void 0;)i=o,o=i.findChild(e,r);return i}dispose(){this._parsedDocument.dispose()}update(e,r){if(this.uri!==e.document.uri)throw new Error("Can't update ContextDocument using mismatched URI");let n=this._parsedDocument;this._parsedDocument=e;try{this.recursivelyRemapNodes(this.root,r),this._root=this.buildTree()}finally{n.dispose()}this.updateId=Uy()}recursivelyRemapNodes(e,r){let n=!0;for(let u of e.children)n=n&&this.recursivelyRemapNodes(u,r);if(!n)return this.invalidateNode(e),!1;let i=[];for(let{root:u,children:f}of e.parts){let p=r(u);if(p===void 0||p.type!==u.type)return this.invalidateNode(e),!1;i.push({root:p,children:f})}let o=i[0].root.parent,a=e.parts[0].root.parent;if(o?.canMergeChildren!==a?.canMergeChildren)return this.invalidateNode(e),!1;let c=tVe(i,this._parsedDocument.document);for(let[u,f]of c.entries())if(e.text[u]!==f)return this.invalidateNode(e),!1;let l=new FK(e.id,i,e.text,e.canMerge);for(let{root:u}of e.parts)this.syntaxToAbstract.delete(u.id);for(let{root:u}of l.parts)this.syntaxToAbstract.set(u.id,l);return this.nodeById.set(e.id,l),!0}invalidateNode(e){for(let r of e.syntaxRoots)this.syntaxToAbstract.delete(r.id);this.nodeById.delete(e.id)}createNode(e,r=!1){e.sort((o,a)=>o.root.startOffset-a.root.startOffset);let n=tVe(e,this.document),i=new FK(Uy(),e,n,r);for(let{root:o}of e)this.syntaxToAbstract.set(o.id,i);return this.nodeById.set(i.id,i),i}isValidRoot(e){return e.length===1&&e[0].root.id===this.parsedDocument.root.id}buildTree(){let e=this.parsedDocument.root,r=this.buildRecursively(e);return this.createNode([{root:e,children:r}])}buildRecursively(e){if(e.endOffset-e.startOffset<this.minSize)return[];let r=e.children;if(e.canMergeChildren){let i=r.map(a=>this.syntaxToAbstract.get(a.id));for(let a=0;a<r.length;a++)if(i[a]===void 0){if(a>0&&i[a-1]!==void 0){let c=i[a-1];for(let l=a-1;l>=0&&i[l]?.id===c.id;l--)i[l]=void 0;this.invalidateNode(c)}if(a<r.length-1&&i[a+1]!==void 0){let c=i[a+1];for(;a<r.length&&i[a+1]?.id===c.id;)a++,i[a]=void 0;this.invalidateNode(c)}}let o=[];for(let a=0;a<r.length;void 0)if(i[a]!==void 0)for(o.push(i[a]);a<r.length&&i[a+1]?.id===i[a].id;)a++;else{let c=[];for(;a<r.length&&i[a]===void 0;){let l=r[a];c.push({root:l,children:this.buildRecursively(l)}),a++}o.push(...this.mergeChildren(c))}return o}let n=[];for(let i=0;i<r.length;i++){let o=r[i];if(this.syntaxToAbstract.has(o.id)){let l=this.syntaxToAbstract.get(o.id);n.push(l),i+=l.parts.length-1;continue}let a=this.buildRecursively(o),c=o.endOffset-o.startOffset-a.reduce((l,u)=>l+(u.endOffset-u.startOffset),0);o.canBeNode&&c>=this.minSize?n.push(this.createNode([{root:o,children:a}])):n.push(...a)}return n}mergeChildren(e){if(e.length===0)return[];e.sort((m,h)=>m.root.startOffset-h.root.startOffset);let r=e[e.length-1].root.endOffset-e[0].root.startOffset,n=[];for(let m of e){let h=m.root.endOffset-m.root.startOffset;for(let g of m.children){let y=g.endOffset-g.startOffset;h-=y,r-=y}n.push(h)}if(r<this.minSize)return e.flatMap(m=>m.children);let i=[0],o=0,a=null,c={line:-1,size:-1},l=e[0].root.startOffset,u=e[0].root.range.start.line;for(let m=0;m<e.length;m++){let h=e[m];if(o+=n[m]+h.root.startOffset-l,o>this.minSize&&o<this.maxSize){let g={line:h.root.range.start.line-u,size:h.root.startOffset-l};(g.line>c.line||g.line==c.line&&g.size>c.size)&&(c=g,a=m)}l=h.root.endOffset,u=h.root.range.end.line,o>=this.maxSize&&(a=a??m,i.push(a+1),m=a,o=0,a=null,c={line:-1,size:-1},l=e[m+1]?.root.startOffset,u=e[m+1]?.root.range.start.line)}i.length==1?i.push(e.length):i[i.length-1]!==e.length&&(i[i.length-1]=e.length);let f=[],p=!1;for(let m=0;m<i.length-1;m++){let h=e.slice(i[m],i[m+1]);f.push(this.createNode(h,p)),p=!0}return f}};function tVe(t,e){if(t.length===0)return[""];let r=[],n=e.positionAt(t[0].root.startOffset);for(let o of t.flatMap(a=>a.children).sort((a,c)=>a.startOffset-c.startOffset)){let a=e.positionAt(o.startOffset);r.push(e.getText({start:n,end:a})),n=e.positionAt(o.endOffset)}let i=e.positionAt(t[t.length-1].root.endOffset);return r.push(e.getText({start:n,end:i})),r}s(tVe,"buildText");function*rVe(t,e){yield t;for(let r of t.children)e.has(r.id)||(yield*rVe(r,e))}s(rVe,"walk");d();d();d();function nVe(t){return t.search(/^[a-zA-Z_]{3,}\w*$/)>=0}s(nVe,"isSymbol");var QK=class{constructor(e,r,n,i,o,a){this.id=e;this.raw=r;this.children=n;this.parent=null;let c={start:{line:i,character:0},end:{line:o,character:a.lineAt(o).text.length}},l=a.getText(c),u=l.search(/\S/);if(u===-1){let m={line:o,character:0};this.startOffset=a.offsetAt(m),this.endOffset=this.startOffset,this.text="",this.range={start:m,end:m};return}let f=l.search(/\S(?!.*\S)/s),p=a.offsetAt(c.start);this.startOffset=p+u,this.endOffset=p+f+1,this.range={start:a.positionAt(this.startOffset),end:a.positionAt(this.endOffset)},this.text=a.getText(this.range)}static{s(this,"IndentationNode")}get type(){return this.raw.type}get isLeaf(){return this.children.length===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return!1}get isText(){return!0}findNode(e,r){let n=0,i=this.children.length-1,o;for(;n<=i;){let a=Math.floor((n+i)/2);if(o=this.children[a],o.startOffset<=e&&o.endOffset>=r)break;o.endOffset<e?n=a+1:i=a-1}return o===void 0||i<n?this:o.findNode(e,r)}},HAe=class{constructor(e,r){this.document=e;this.root=r}static{s(this,"IndentationParsedDocument")}findNode(e,r){return this.root.findNode(e,r??e)}dispose(){}};function WAe(t,e,r){let n=t.subs.map(l=>({subtree:l,node:WAe(l,e,r)})).filter(l=>l.node!==null).sort((l,u)=>l.node.startOffset-u.node.startOffset),i=[],o=e;for(let l=n.length-1;l>=0;l--){let{subtree:u,node:f}=n[l];if(f.range.end.line>=o){let p=WAe(u,o,r);p!==null&&(i.push(p),o=Math.min(p.range.start.line,o))}else i.push(f),o=Math.min(f.range.start.line,o)}i.sort((l,u)=>l.startOffset-u.startOffset);let a=e,c=0;if(i.length>0&&(a=Math.min(a,i[0].range.start.line),c=Math.max(c,i[i.length-1].range.end.line)),(t.type==="blank"||t.type==="line")&&(a=Math.min(a,t.lineNumber),c=Math.max(c,t.lineNumber),t.type==="blank"&&a===c))return null;if(c=Math.min(c,e-1),a<=c){let l=new QK(Uy(),t,i,a,c,r);for(let u of i)u.parent=l;return l}return null}s(WAe,"recursivelyBuildNode");function iVe(t){let e=XS(t.getText(),t.detectedLanguageId),r=WAe(e,t.lineCount,t)??new QK(Uy(),e,[],0,t.lineCount-1,t);return new HAe(t,r)}s(iVe,"parse");function qOt(t,e){return{document:iVe(e),remapper:s(()=>{},"remapper")}}s(qOt,"update");var oVe={parse:iVe,update:qOt,dispose:s(function(){},"dispose")};d();d();var aVe=Ne(m$());function sVe(t){return{line:t.row,character:t.column}}s(sVe,"asPosition");var Mm=class t{constructor(e){this.node=e}static{s(this,"TreeSitterNode")}get raw(){return this.node}get id(){return this.node.id}get type(){return this.node.type}get text(){return this.node.text}get startOffset(){return this.node.startIndex}get endOffset(){return this.node.endIndex}get range(){return{start:sVe(this.node.startPosition),end:sVe(this.node.endPosition)}}get parent(){let e=this.node.parent;return e!==null?this.createNode(e):null}get children(){return this.node.namedChildren.map(e=>this.createNode(e))}get isLeaf(){return this.node.namedChildCount===0}get canBeNode(){return!0}get canMergeChildren(){return this.children.length>6}get isIdentifier(){return this.isLeaf&&nVe(this.text)}get isText(){return this.isLeaf&&this.text.search(/\s/)>=0}createNode(e){return new t(e)}},yF=class{constructor(e,r,n){this.textDocument=e;this.syntaxTree=r;this.nodeFactory=n}static{s(this,"TreeSitterDocument")}get document(){return this.textDocument}get root(){return this.nodeFactory(this.syntaxTree.rootNode)}findNode(e,r){let n=r===void 0?this.syntaxTree.rootNode.namedDescendantForIndex(e):this.syntaxTree.rootNode.namedDescendantForIndex(e,r);return this.nodeFactory(n)}dispose(){this.syntaxTree.delete()}},FI=class{constructor(e,r){this.language=e;this.nodeFactory=r;this.parser=new aVe.default;this.parser.setLanguage(e)}static{s(this,"TreeSitterParser")}parse(e){let r=this.parser.parse(e.getText());return new yF(e,r,this.nodeFactory)}update(e,r){if(!(e instanceof yF))throw new Error("Can only update documents created from this parser");let n=this.parser.parse(r.getText());return{document:new yF(r,n,this.nodeFactory),remapper:s(()=>{},"remapper")}}dispose(){this.parser.delete()}};var HOt=new Set(["class_specifier","function_definition","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement","compound_statement"]),WOt=new Set(["translation_unit","compound_statement","parameter_list","argument_list"]),UK=class t extends Mm{static{s(this,"CPPNode")}get canBeNode(){return HOt.has(this.type)}get canMergeChildren(){return WOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var GOt=new Set(["class_declaration","method_declaration","expression_statement","if_statement","for_statement","while_statement","try_statement","switch_statement"]),jOt=new Set(["program","block","object_creation_expression","formal_parameters","argument_list","array_initializer"]),qK=class t extends Mm{static{s(this,"JavaNode")}get canBeNode(){return GOt.has(this.type)}get canMergeChildren(){return jOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string_literal"||this.type==="line_comment"||this.type==="block_comment"}createNode(e){return new t(e)}};d();var VOt=new Set(["class_definition","function_definition","expression_statement","if_statement","for_statement","while_statement","with_statement","try_statement"]),$Ot=new Set(["module","block","parameters","dictionary","list"]),HK=class t extends Mm{static{s(this,"PythonNode")}get canBeNode(){return VOt.has(this.type)}get canMergeChildren(){return $Ot.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};d();var zOt=new Set(["class_declaration","function_declaration","arrow_function","method_definition","expression_statement","if_statement","while_statement","try_statement","for_statement","switch_statement"]),YOt=new Set(["program","statement_block","formal_parameters","arguments","object","array"]),WK=class t extends Mm{static{s(this,"TypeScriptNode")}get canBeNode(){return zOt.has(this.type)}get canMergeChildren(){return YOt.has(this.type)}get isIdentifier(){return this.type==="identifier"}get isText(){return this.type==="string"||this.type==="comment"}createNode(e){return new t(e)}};var cVe=Ne(m$());async function lVe(t){await cVe.default.init();try{let e=await yme(t);switch(t){case"python":return new FI(e,r=>new HK(r));case"typescript":return new FI(e,r=>new WK(r));case"java":return new FI(e,r=>new qK(r));case"cpp":return new FI(e,r=>new UK(r));default:return new FI(e,r=>new Mm(r))}}catch{return oVe}}s(lVe,"getParser");d();var KOt=new vt("WorkspaceContextManager"),jAe=class{constructor(e,r){this.created=e;this.invalidated=r;this.updatedDocuments=Array.from(new Set([...e.entries(),...r.entries()].filter(([n,i])=>i.size>0).map(([n,i])=>n)))}static{s(this,"WorkspaceContextChanges")}getInvalidatedNodes(e){return this.getNodes(this.invalidated,e)}getCreatedNodes(e){return this.getNodes(this.created,e)}getNodes(e,r){return r===void 0?Array.from(e.entries()).flatMap(([n,i])=>[...i].map(o=>({uri:n,id:o}))):Array.from(e.get(r)??[]).map(n=>({uri:r,id:n}))}},GK=class{constructor(e,r){this.item=e;this.disposalCallback=r}static{s(this,"CachedItem")}dispose(){this.disposalCallback(this.item)}},jK=class{constructor(e,r){this.ctx=e;this.config=r;this.listenerDisposable=void 0;this.targetSet=new Set;this.activeDocuments=new Map;this.nodeToDoc=new Map;this.createdNodes=new Map;this.invalidatedNodes=new Map;this.parsers=new Map;this.cachedDocuments=new bH;this.staleDocuments=new Set;this.pendingUpdates=new Map;this.uriCache=new Or(5e3);this.invalidDocumentCache=new g_(this.config.MaxActiveNodes,this.config.InvalidCacheTime)}static{s(this,"WorkspaceContextManager")}isStarted(){return this.listenerDisposable!==void 0}start(){this.isStarted()||(this.listenerDisposable=this.ctx.get(pr).onDidChangeTextDocument(e=>this.handleDocumentChange(e)))}getActiveDocuments(){return Array.from(this.activeDocuments.values())}getNode(e){let r=this.nodeToDoc.get(e);if(r===void 0)return;let n=this.getDocument(r);if(n===void 0)return;let i=n.document.getNode(e);if(i!==void 0)return{...n,node:i}}getDocument(e){let r=this.activeDocuments.get(e);if(r!==void 0)return{document:r,isActive:!0};let n=this.cachedDocuments.get(e);if(n!==void 0)return{document:n.item,isActive:!1}}getUri(e){return this.nodeToDoc.get(e)}normalizeUri(e){if(this.uriCache.has(e))return this.uriCache.get(e)??void 0;let r=Jc(e);if(!VS.includes(GDe(r))||this.invalidDocumentCache.has(r))return;let i=this.ctx.get(pr).getWorkspaceFolder({uri:r})!==void 0?r:null;return this.uriCache.set(e,i),i??void 0}dispose(){if(this.isStarted()){this.listenerDisposable?.dispose(),this.listenerDisposable=void 0;for(let e of this.activeDocuments.values())e.dispose();this.activeDocuments.clear(),this.cachedDocuments.clear()}}trySetActiveDocuments(e){if(this.isStarted()){this.targetSet.clear();for(let r of e){let n=this.normalizeUri(r);n!==void 0&&(this.targetSet.add(n),this.updateDocument(n))}for(let r of[...this.activeDocuments.keys()])this.targetSet.has(r)||this.deactivateDocument(r)}}popChanges(){let e=new jAe(this.createdNodes,this.invalidatedNodes);return this.createdNodes=new Map,this.invalidatedNodes=new Map,e}async flushUpdates(e){if(e!==void 0){let r=this.pendingUpdates.get(e);r!==void 0&&await r}else await Promise.all([...this.pendingUpdates.values()])}isKnownDocument(e){return this.activeDocuments.has(e)||this.cachedDocuments.has(e)||this.pendingUpdates.has(e)}deactivateDocument(e){let r=this.activeDocuments.get(e);r!==void 0&&(this.activeDocuments.delete(e),this.pendingUpdates.has(e)||this.cachedDocuments.set(e,new GK(r,n=>this.disposeDocument(n))))}async updateDocument(e){if(this.pendingUpdates.has(e))return;let r=new Od;this.pendingUpdates.set(e,r.promise);let n;this.activeDocuments.has(e)?n=this.activeDocuments.get(e):this.cachedDocuments.has(e)&&(n=this.cachedDocuments.get(e).item,this.cachedDocuments.uncache(e)),(n===void 0||this.staleDocuments.has(e))&&(this.staleDocuments.delete(e),n=await this.createUpdatedDocument(e,n)),n!==void 0&&(this.isStarted()?this.targetSet.has(e)?this.activeDocuments.set(e,n):(this.activeDocuments.delete(e),this.cachedDocuments.set(e,new GK(n,i=>this.disposeDocument(i)))):n.dispose()),this.pendingUpdates.delete(e),r.resolve()}async createUpdatedDocument(e,r){let n=await this.readTextDocument(e);if(n===void 0){r!==void 0&&this.disposeDocument(r);return}let i;try{i=await this.getParser(n.detectedLanguageId)}catch{this.invalidDocumentCache.set(e,!0),r!==void 0&&this.disposeDocument(r);return}if(r!==void 0)if(n.detectedLanguageId!==r.document.detectedLanguageId)this.disposeDocument(r);else{let{document:c,remapper:l}=i.update(r.parsedDocument,n),u=new Set(r.getAllIds());r.update(c,l);let f=new Set(r.getAllIds()),p=[...f].filter(h=>!u.has(h)),m=[...u].filter(h=>!f.has(h));return this.recordDocumentChanges(e,{created:p,invalidated:m}),r}let o=i.parse(n),a=new OK(o,this.config.MinNodeSize);return this.recordDocumentChanges(e,{created:a.getAllIds(),invalidated:[]}),a}disposeDocument(e){this.recordDocumentChanges(e.uri,{created:[],invalidated:e.getAllIds()}),e.dispose()}recordDocumentChanges(e,r){let n=AF(this.createdNodes,e,()=>new Set),i=AF(this.invalidatedNodes,e,()=>new Set);for(let o of r.created)n.add(o),this.nodeToDoc.set(o,e);for(let o of r.invalidated)n.has(o)?n.delete(o):i.add(o),this.nodeToDoc.delete(o)}async getParser(e){let r=this.parsers.get(e);return r===void 0&&(r=await lVe(e),this.parsers.set(e,r)),r}async readTextDocument(e){if(this.invalidDocumentCache.has(e))return;let r=this.ctx.get(pr),n=r.getWorkspaceFolder({uri:e}),i=!0;if(n!==void 0){let a=r.getRelativePath({uri:e});a!==void 0&&(await this.ctx.get(J0).findFiles(a,{uri:n.uri},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0})).includes(e)&&(i=!1)}if(i){KOt.debug(this.ctx,`${e} is excluded from workspace context`),this.invalidDocumentCache.set(e,!0,60*60*1e3);return}let o=await this.ctx.get(mn).getOrReadTextDocument({uri:e});if(o.status!=="valid"||o.document.uri!==e){this.invalidDocumentCache.set(e,!0);return}return o.document}handleDocumentChange(e){let r=e.document.uri;this.isKnownDocument(r)&&this.staleDocuments.add(r)}};d();var VK=class{constructor(e){this.ctx=e;this.documents=new Map;this.elisionMarker=B2;this.nodeCache=new Or(1e4);this.costFunction=eVe(this.elisionMarker),this.root=this.createRootNode()}static{s(this,"WorkspacePromptComponent")}getRoot(){return this.root}setCostFunction(e){this.costFunction=e}snapshot(e,r){this.documents.clear();for(let{uri:n}of e.documents){let i=r.getDocument(n);if(i?.isActive!==!0)continue;let o=this.createAnnotatedDocumentRoot(i.document),a=qAe(o,this.costFunction,this.elisionMarker,this.nodeCache);this.documents.set(n,a),a.updateWeights(l=>e.getNodeWeight(l.id)??0),a.requireRenderedChild=!0;let c=a.children[0];c.requireRenderedChild=c.children.length>0}this.root=this.createRootNode()}createRootNode(){let e=new Array(this.documents.size+1).fill(""),r=[...this.documents.values()];return new gF(Uy(),e,r,1,0,!0,"")}createAnnotatedDocumentRoot(e){return{text:[this.getDocumentAnnotation(e.uri,e.document.detectedLanguageId),`

`],children:[e.root],id:Uy(),elisionMarker:"",canMerge:!0}}getDocumentAnnotation(e,r){let i=this.ctx.get(pr).getRelativePath({uri:e});return My(`Related portions of ${i??e}:
`,r)}};var uVe=Ne(require("events"));var JOt={UpdateInterval:500,InvalidCacheTime:1e3*60*10,StaleWeightHalflife:1e3*10/Math.log(2),MinNodeSize:100,Laziness:.5,MaxActiveFiles:20,MaxActiveNodes:2e3},Fm=class t{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Od;this.config=JOt;this.emitter=new uVe.default;this.forceUpdateInterrupt=new Od;this.emitter.setMaxListeners(27),this.contextManager=new jK(e,this.config),this.coordinator=new MK(this.contextManager,this.config),this.promptComponent=new VK(e),this.tokenEventDisposable=ia(e,()=>{this.maybeStart()})}static{s(this,"WorkspaceContextFeature")}static{this.UpdateEventName="WorkspaceContextUpdate"}static{this.DisposeEventName="WorkspaceContextDispose"}async maybeStart(){if(this.didStart||this.didDispose)return;let e=vi(this.ctx,kt.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}get activation(){return this.deferredStart.promise}isEnabled(e){return vi(this.ctx,kt.UseWorkspaceContextCoordinator)??this.ctx.get(Bt).workspaceContextCoordinator(e)}start(){this.didStart||(this.didStart=!0,this.contextManager.start(),this.promptComponent.setCostFunction(Zje(ho())),this.deferredStart.resolve(),this.forceUpdateInterrupt=new Od,this.loop())}dispose(){this.isActive()?(this.emitter.emit(t.DisposeEventName),this.contextManager.dispose()):!this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}pushWorkspaceContext(e,r){this.isActive()&&this.coordinator.pushWorkspaceContext(e,r)}getWorkspaceContext(){return this.contextManager}getWorkspaceContextWeights(){return this.coordinator.getWeights()}getPromptComponent(){return this.promptComponent.getRoot()}onUpdate(e){return this.emitter.on(t.UpdateEventName,e),In.Disposable.create(()=>this.emitter.off(t.UpdateEventName,e))}onDisposal(e){return this.emitter.on(t.DisposeEventName,e),In.Disposable.create(()=>this.emitter.off(t.DisposeEventName,e))}async forceUpdate(){return this.forceUpdateInterrupt.promise}async loop(){try{for(;this.isActive();){let e=this.coordinator.updateWeights();this.promptComponent.snapshot(e,this.contextManager);let r=e.documents.slice(0,this.config.MaxActiveFiles).map(({uri:n})=>n);if(this.contextManager.trySetActiveDocuments(r),await this.contextManager.flushUpdates(),this.forceUpdateInterrupt.resolve(),this.forceUpdateInterrupt=new Od,this.isActive()){this.promptComponent.snapshot(e,this.contextManager);let n=this.config.UpdateInterval,i={weights:e,context:this.contextManager,changes:this.contextManager.popChanges(),responseInterval:n};this.emitter.emit(t.UpdateEventName,i),await Ny(n)}}}catch(e){LI(this.ctx,e,"WorkspaceContextFeature.loop"),this.dispose()}}};var $K=class{constructor(e){this.ctx=e;this.renderId=0;this.cachedSuffix=""}static{s(this,"WorkspaceCompletionsPromptFactory")}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionState:e,telemetryData:r,promptOpts:n},i){this.renderId++;let{maxPromptLength:o,suffixPercent:a,suffixMatchThreshold:c,workspaceContextPercent:l}=G3(this.ctx,r,e.textDocument.detectedLanguageId),u=await this.failFastPrompt(e.textDocument,e.position,a,i);if(u)return u;let f=performance.now(),{beforeCursor:p,afterCursor:m}=this.getBeforeAfterCursor(e),h=this.getPathMarker(e),g=this.checkSuffixCache(m,c,n),y=this.producePrompt(o,a,l,h,p,g,e.textDocument.detectedLanguageId,n);if(y.status==="cancelled")return Oy;if(y.status==="error")return this.errorPrompt(y.error);let[E,x]=DI(y.prefix),b={...y,prefix:E},_=performance.now();return this.successPrompt(b,_,f,x)}producePrompt(e,r,n,i,o,a,c,l){let u=performance.now(),f=ho(l?.tokenizer);a.length==0&&(r=0);let p=f.tokenLength(i),m=Math.floor(e*r/100),h=Math.floor(e*n/100),g=e-m-h-p;if(g<=0)throw new Error(`Prefix tokens must be positive, was ${g}`);let y=performance.now(),x=this.ctx.get(Fm).getPromptComponent(),{rendered:b,cost:_}=x.render(h,void 0,G=>f.tokenLength(G)),k=performance.now()-y,P=f.takeFirstTokens(a,m),N=Math.max(m-P.tokens.length,0),M=f.takeLastLinesTokens(o,g+N),J=l?.separateContext?M:My(b,c)+`
`+M,pe=f.tokenLength(M),Y=P.tokens.length;return{status:"ok",prefix:i+`
`+J,prefixTokens:p+_+pe,suffix:P.text,suffixTokens:Y,context:l?.separateContext?[b]:void 0,metadata:{renderId:this.renderId,rendererName:"w",tokenizer:l?.tokenizer??"o200k_base",elisionTimeMs:k,renderTimeMs:performance.now()-u,updateDataTimeMs:0,componentStatistics:[{componentPath:"workspace",actualTokens:_},{componentPath:"prefix",actualTokens:p+pe},{componentPath:"suffix",actualTokens:Y}]}}}getBeforeAfterCursor(e){let r=e.textDocument.getText({start:{line:0,character:0},end:e.position}),n=e.textDocument.getText({start:e.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});return{beforeCursor:r,afterCursor:n}}getPathMarker(e){let r=e.textDocument,n=this.ctx.get(pr),i=n.getRelativePath(e.textDocument),o={uri:r.uri,source:"",relativePath:i,languageId:r.detectedLanguageId},a=n.findNotebook(r);return o.relativePath&&!a?My(zY(o),o.languageId):My($Y(o),o.languageId)}checkSuffixCache(e,r,n){let i=e.replace(/^.*/,"").trimStart();if(i==="")return"";if(this.cachedSuffix===i)return this.cachedSuffix;let o=i;if(this.cachedSuffix!==""){let a=ho(n?.tokenizer),c=a.takeFirstTokens(i,iF);c.tokens.length>0&&100*GY(c.tokens,a.takeFirstTokens(this.cachedSuffix,iF).tokens)?.score<(r??VP)*c.tokens.length&&(o=this.cachedSuffix)}return o!==this.cachedSuffix&&(this.cachedSuffix=o),o}successPrompt(e,r,n,i){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:i,neighborSource:new Map,metadata:e.metadata}}async failFastPrompt(e,r,n,i){if(i?.isCancellationRequested)return Oy;if((await this.ctx.get(Mc).evaluate(e.uri,e.getText(),"UPDATE")).isBlocked)return wK;if((n>0?e.getText().length:e.offsetAt(r))<IK)return TK}errorPrompt(e){return Ia(this.ctx,e,"WorkspaceCompletionsPromptFactory"),H3}};var dVe=Ne(di());var _E=class{static{s(this,"CompletionsPromptFactory")}};function zK(t,e,r){return new VAe(new $Ae(new zAe(t,new LK(t,e,r),new $K(t),YAe)))}s(zK,"createCompletionsPromptFactory");var VAe=class extends _E{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}async prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return Oy;try{return await this.delegate.prompt(r,n)}catch{return H3}}},XOt=1200,$Ae=class{constructor(e){this.delegate=e}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(e,r){let n=new dVe.CancellationTokenSource,i=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,i),new Promise(o=>{setTimeout(()=>{n.cancel(),o(Lje)},XOt)})])}},zAe=class{constructor(e,r,n,i){this.ctx=e;this.defaultDelegate=r;this.experimentalDelegate=n;this.fn=i}static{s(this,"ExperimentalCompletionsPromptFactory")}async prompt(e,r){return this.fn(this.ctx,e.telemetryData)?this.experimentalDelegate.prompt(e,r):this.defaultDelegate.prompt(e,r)}};function YAe(t,e){let r=t.get(Fm);return r.isEnabled(e)&&r.isActive()}s(YAe,"workspaceContextEnabledAndActive");var Lm=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Or(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o,a){if(YAe(this.ctx,i))return;let c=this.ctx.get(uc),{textDocument:l,originalPosition:u,originalOffset:f,originalVersion:p,editsWithPosition:m}=e,h=c.resolveAllProviders(r,n,{uri:l.uri,languageId:l.detectedLanguageId,version:p,offset:f,position:u,proposedEdits:m.length>0?m:void 0},i,o,a?.data);this.scheduledResolutions.set(r,h)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};d();d();var YK=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await fE(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l==""?a.namedChildren[0]:a.childForFieldName(l))?.type==c)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,c=a?.nextSibling;for(;c&&c.type=="comment";){let l=c.startPosition.row==o.endPosition.row&&c.startPosition.column>=o.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)o=c,c=c.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},KK=class extends YK{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=pVe(r,n),this.isBlockStart(ZOt(r,n))&&this.isBlockBodyEmpty(r,n)}};function ZOt(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s(ZOt,"getLineAtOffset");function pVe(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(pVe,"rewindToNearestNonWs");function fVe(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(fVe,"indent");function e7t(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=fVe(t,r),i=fVe(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(e7t,"outdented");var qy=class extends YK{constructor(r,n,i,o,a,c,l){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=c;this.curlyBraceLanguage=l}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&cQe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=pVe(r,n);let i=await fE(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let f=o;for(;f.parent;){if(f.type=="function_signature"||f.type=="method_signature"){let p=o.nextSibling;return p&&f.hasError()&&e7t(f,p,r)?!0:!f.children.find(h=>h.type==";")&&f.endIndex<=n}f=f.parent}}let a=null,c=null,l=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(c!=null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId=="python"){let f=c.previousSibling;if(f!=null&&f.hasError()&&(f.text.startsWith('"""')||f.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let f=[...a.children].reverse(),p=f.find(h=>this.startKeywords.includes(h.type)),m=f.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=f.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=f.find(E=>E.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=f.find(E=>E.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||f.find(E=>E.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=f.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||f.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(l!=null){let f=this.nodeMatch[l.type],p=l.children.slice().reverse().find(m=>m.type==f);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=m==""?l.children[0]:l.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},t7t={python:new qy("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new qy("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new qy("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new qy("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new KK("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new KK("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new qy("csharp",{},new Map([]),[],"block",null,!0),java:new qy("java",{},new Map([]),[],"block",null,!0),php:new qy("php",{},new Map([]),[],"block",null,!0),cpp:new qy("cpp",{},new Map([]),[],"block",null,!0)};function KAe(t){if(!H0(t))throw new Error(`Language ${t} is not supported`);return t7t[g$(t)]}s(KAe,"getBlockParser");async function mVe(t,e,r){return H0(t)?KAe(t).isEmptyBlockStart(e,r):!1}s(mVe,"isEmptyBlockStart");async function hVe(t,e,r,n){if(H0(t))return KAe(t).isBlockBodyFinished(e,r,n)}s(hVe,"isBlockBodyFinished");async function gVe(t,e,r){if(H0(t))return KAe(t).getNodeStart(e,r)}s(gVe,"getNodeStart");var ljn=new vt("parseBlock");function CF(t,e,r){let n=e.getText(ns.range(ns.position(0,0),r)),i=e.offsetAt(r),o=e.detectedLanguageId;return a=>hVe(o,n,a,i)}s(CF,"parsingBlockFinished");function XK(t,e){return mVe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(XK,"isEmptyBlockStartUtil");async function AVe(t,e,r,n){let o=e.getText(ns.range(ns.position(0,0),r))+n,a=await gVe(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(AVe,"getNodeStartUtil");var r7t=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),n7t=new RegExp(`^(${r7t.join("|")})`);function i7t(t){return n7t.test(t.trimLeft().toLowerCase())}s(i7t,"isContinuationLine");function JK(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(JK,"indentationOfLine");function ZK(t,e){let r=t.getText(),n=t.offsetAt(e);return JAe(r,n,t.detectedLanguageId)}s(ZK,"contextIndentation");function JAe(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(f,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<f.length;)g=JK(f[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let E=f[h].trim();if(E.endsWith('"""')){if(!(E.startsWith('"""')&&E!=='"""'))for(h--;h>=0&&!f[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=JK(f[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,c]=o(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let f=c-1;f>=0;f--){let p=JK(n[f]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:l,current:a??0,next:u}}s(JAe,"contextIndentationFromText");var o7t=!1;function s7t(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&o7t&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l==0&&o!==void 0&&(u=o+u);let f=JK(u);if(f!==void 0&&(f<c||f===c&&!i7t(u)))return n.slice(0,l).join(`
`).length}return"continue"}s(s7t,"completionCutOrContinue");function yVe(t,e){return async r=>{let n=s7t(r,t,e);return n==="continue"?void 0:n}}s(yVe,"indentationBlockFinished");d();d();var CVe=2.98410452738298,EVe=-.838732736843507,vVe=1.50314646255716,xVe=-.237798634012662,eJ={python:.314368072478742},bVe={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var a7t={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function c7t(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(c7t,"linearInterpolation");var z3=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},XAe=class{constructor(e,r,n){this.link=a7t;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return c7t(n,this.logitsToQuantiles)}},IVe=new XAe(CVe,[new z3("compCharLen",EVe,t=>Math.log(1+t)),new z3("meanLogProb",vVe),new z3("meanAlternativeLogProb",xVe)].concat(Object.entries(eJ).map(t=>new z3(t[0],t[1]))),bVe);function TVe(t,e){let r={...e.measurements};return Object.keys(eJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),IVe.predict(t,r)}s(TVe,"ghostTextScoreConfidence");function wVe(t,e){let r={...e.measurements};return Object.keys(eJ).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),IVe.quantile(t,r)}s(wVe,"ghostTextScoreQuantile");d();d();var l7t=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function tJ(t){let e=t.slice();return e.reverse(),_Ve(e)||_Ve(e.filter(r=>r.trim().length>0))}s(tJ,"isRepetitive");function _Ve(t){let e=u7t(t);for(let r of l7t){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(_Ve,"isRepeatedPattern");function u7t(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(u7t,"kmp_prefix_function");function d7t(t,e,r,n){let i="}";try{i=aQe(e.detectedLanguageId)??"}"}catch{}return f7t({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(d7t,"maybeSnipCompletion");function f7t(t,e,r,n){let i=p7t(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let c=!0,l=0,u=0;for(let f=0;f+a+u<o.length;f++){let p;for(;;){let y=e.line+1+f+l;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")l++;else break}let m,h;for(;m=a+f+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){c=!1;break}}if(c)return o.slice(0,a).join(i.newLineCharacter)}return r}s(f7t,"maybeSnipCompletionImpl");function p7t(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(p7t,"splitByNewLine");function m7t(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(m7t,"matchesNextLine");function EF(t,e,r,n,i,o){if(tJ(n.tokens)){let c=Dr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Rt(t,"repetition.detected",c,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(m7t(e,r,a.completionText,!i)){let c=Dr.createAndMarkAsIssued();c.extendWithRequestId(n.requestId),Rt(t,"completion.alreadyInDocument",c),Rt(t,"completion.alreadyInDocument",c.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=d7t(t,e,r,a.completionText),a.completionText?a:void 0}s(EF,"postProcessChoiceInContext");function SVe(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let c of i){let l=r.completionText.indexOf(c,o+1);if(l>o)a++,o=l;else break}return a}}return 0}s(SVe,"checkSuffix");var BVe=Ne(rb());var Yo=new vt("ghostText");var g7t=200,RVe=20;async function DVe(t,e,r,n,i,o,a){Yo.debug(t,`Getting ${o} from network`),r=r.extendedBy();let c=e.isCycling?3:1,l=R3(t,c),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:pQe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},f={n:c,temperature:l,code_annotations:!1},p=vi(t,kt.ModelAlwaysTerminatesSingleline)??t.get(Bt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&Ly.isSupported(e.languageId)&&!p;!e.multiline&&!m?f.stop=[`
`]:e.stop&&(f.stop=e.stop),e.maxTokens!==void 0&&(f.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(l),n:JSON.stringify(c),stop:JSON.stringify(f.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:c,uiKind:"ghostText",postOptions:f,headers:e.headers,extra:u},E=await t.get(Mf).fetchAndStreamCompletions(t,y,r,i,n);return E.type==="failed"?{type:"failed",reason:E.reason,telemetryData:lc(r)}:E.type==="canceled"?(Yo.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:E.reason,telemetryData:SI(r)}):a(h,E.getProcessingTime(),E.choices)}catch(y){if(Nu(y))return{type:"canceled",reason:"network request aborted",telemetryData:SI(r,{cancelledNetworkRequest:!0})};if(Yo.exception(t,y,"Error on ghost text request"),t.get(xd).notifyUser(t,y),Gk(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:lc(r)}}}s(DVe,"genericGetCompletionsFromNetwork");function ZAe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}s(ZAe,"postProcessChoices");async function A7t(t,e,r,n,i){return DVe(t,e,r,n,i,"completions",async(o,a,c)=>{let u=await c[Symbol.asyncIterator]().next();if(u.done)return Yo.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:lc(r)};if(n?.isCancellationRequested)return Yo.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:SI(r)};let f=u.value;if(f===void 0)return Yo.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:lc(r)};LVe(t,"performance",f,o,a),Yo.debug(t,`Awaited first result, id:  ${f.choiceIndex}`);let p=ZAe(f,e);p&&(nJ(t,e,p),Yo.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of c){if(g===void 0)continue;Yo.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=ZAe(g,e,h);y&&(h.push(y),nJ(t,e,y))}})();return Lh(t)&&await m,p?{type:"success",value:[eye(p,{forceSingleLine:!1}),m],telemetryData:lc(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:lc(r)}})}s(A7t,"getCompletionsFromNetwork");async function y7t(t,e,r,n,i){return DVe(t,e,r,n,i,"all completions",async(o,a,c)=>{let l=[];for await(let u of c){if(n?.isCancellationRequested)return Yo.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:SI(r)};let f=ZAe(u,e,l);f&&l.push(f)}if(l.length>0){for(let u of l)nJ(t,e,u);LVe(t,"cyclingPerformance",l[0],o,a)}return{type:"success",value:[l,Promise.resolve()],telemetryData:lc(r),telemetryBlob:r,resultType:3}})}s(y7t,"getAllCompletionsFromNetwork");function eye(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(eye,"makeGhostAPIChoice");function kVe(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(kVe,"takeNLines");async function C7t(t,e,r,n,i,o,a,c){let l=t.get(Bt).multilineAfterAcceptLines(c),u=t.get(dg).forLanguage(t,e.textDocument.detectedLanguageId,c);switch(u){case"server":return a?{blockMode:"parsing",requestMultiline:!0,finishedCb:kVe(l),stop:[`

`],maxTokens:RVe*l}:{blockMode:"server",requestMultiline:!0,finishedCb:s(f=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let f;try{f=await S7t(t,u,e.textDocument,e.position,o,a,n)}catch{f={requestMultiline:!1}}if(!a&&f.requestMultiline&&t.get(Bt).singleLineUnlessAccepted(c)&&(f.requestMultiline=!1),f.requestMultiline){let p;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?p=ns.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):p=e.position,{blockMode:u,requestMultiline:!0,...PVe(t,u,e.textDocument,p,f.blockPosition,r,!0,n.prompt,c)}}if(a){let p={blockMode:"parsing",requestMultiline:!0,finishedCb:kVe(l),stop:[`

`],maxTokens:RVe*l};return u==="moremultiline"&&(p.blockMode="moremultiline"),p}return{blockMode:u,requestMultiline:!1,...PVe(t,u,e.textDocument,e.position,f.blockPosition,r,!1,n.prompt,c)}}}}s(C7t,"getGhostTextStrategy");function PVe(t,e,r,n,i,o,a,c,l){if(a&&e==="moremultiline"&&Ly.isSupported(r.detectedLanguageId)){let u=i==="empty-block"||i==="block-end"?t.get(Bt).longLookaheadSize(l):t.get(Bt).shortLookaheadSize(l);return{finishedCb:new FY(t,o,r.detectedLanguageId,!1,u,(p,m)=>{let h={prefix:o+p,prompt:{...c,prefix:c.prefix+p}};nJ(t,h,m)}).getFinishedCallback(),maxTokens:g7t}}return{finishedCb:a?CF(t,r,n):u=>{}}}s(PVe,"buildFinishedCallback");var E7t={isCycling:!1,promptOnly:!1,isSpeculative:!1};function v7t(t,e,r){let n=vi(t,kt.CompletionsDebounce)??t.get(Bt).completionsDebounce(r)??e.debounceMs;if(n===void 0)return 0;let i=la()-r.issuedTime;return Math.max(0,n-i)}s(v7t,"getRemainingDebounceMs");function rJ(t,e,r){return r?.isCancellationRequested||e!==t.get(Of).currentRequestId}s(rJ,"inlineCompletionRequestCancelled");async function x7t(t,e,r,n,i,o){let a=n.issuedTime,c=[];function l(E){let x=la();c.push([E,x-a]),a=x}s(l,"recordPerformance"),l("telemetry");let u=t.get(Bt),f=I7t(e.textDocument,e.position);if(f===void 0)return Yo.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:lc(n)};let p=sI(t,n),m={...E7t,...o,tokenizer:p.tokenizer},h=await W3(t,r,e,n,void 0,m);if(l("prompt"),h.type==="copilotContentExclusion")return Yo.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:lc(n)};if(h.type==="contextTooShort")return Yo.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:lc(n)};if(h.type==="promptError")return Yo.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:lc(n)};if(m.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:h};if(h.type==="promptCancelled")return Yo.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:lc(n)};if(h.type==="promptTimeout")return Yo.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:lc(n)};if(h.prompt.prefix.length===0&&h.prompt.suffix.length===0)return Yo.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:lc(n)};let g=v7t(t,m,n);return g>0&&(Yo.debug(t,`Debouncing ghost text request for ${g}ms`),await Ny(g),rJ(t,r,i))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:lc(n)}:t.get(po).withProgress(async()=>{let[E]=DI(e.textDocument.getText(ns.range(ns.position(0,0),e.position))),x=t.get(Of).hasAcceptedCurrentCompletion(E,h.prompt.suffix),b=h.prompt,_=await C7t(t,e,E,h,m.isCycling,f,x,n);l("strategy");let k=b7t(t,E,b,_.requestMultiline);l("cache");let P=aI(t,e.textDocument.uri),N={blockMode:_.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:P,engineModelId:p.modelId,ourRequestId:r,prefix:E,prompt:h.prompt,multiline:_.requestMultiline,indentation:ZK(e.textDocument,e.position),isCycling:m.isCycling,headers:p.headers,stop:_.stop,maxTokens:_.maxTokens,afterAccept:x};N.headers={...N.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":m.isSpeculative?"true":"false"};let M=D7t(t,e.textDocument,N,e.position,h,n,p,m);if(k===void 0&&!m.isCycling&&t.get(Lf).shouldWaitForAsyncCompletions(E,h.prompt)){let Q=await t.get(Lf).getFirstMatchingRequestWithTimeout(r,E,h.prompt,m.isSpeculative,M);if(l("asyncWait"),Q){let z=!_.requestMultiline;k=[[eye(Q[0],{forceSingleLine:z})],4]}if(rJ(t,r,i))return Yo.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:lc(M)}}let J=_.blockMode==="moremultiline"&&Ly.isSupported(e.textDocument.detectedLanguageId);if(k!==void 0&&(k[0]=k[0].map(Q=>EF(t,e.textDocument,e.position,Q,J,Yo)).filter(Q=>Q!==void 0)),k!==void 0&&k[0].length===0)return Yo.debug(t,`Found empty inline suggestions locally via ${k3(k[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:lc(M)};if(k!==void 0&&k[0].length>0&&(!m.isCycling||k[0].length>1))Yo.debug(t,`Found inline suggestions locally via ${k3(k[1])}`);else{if(m.isCycling){let Q=await y7t(t,N,M,i,_.finishedCb);if(Q.type==="success"){let z=k?.[0]??[];Q.value[0].forEach(re=>{z.findIndex(fe=>fe.completionText.trim()===re.completionText.trim())===-1&&z.push(re)}),k=[z,3]}else if(k===void 0)return Q}else{let Q=s((ne,me)=>(t.get(Lf).updateCompletion(r,ne),_.finishedCb(ne,me)),"finishedCb"),z=new In.CancellationTokenSource,re=A7t(t,N,M,z.token,Q);t.get(Lf).queueCompletionRequest(r,E,h.prompt,z,re);let fe=await t.get(Lf).getFirstMatchingRequest(r,E,h.prompt,m.isSpeculative);if(fe===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:lc(M)};k=[[fe[0]],4]}l("network")}if(k===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:lc(M)};let[pe,Y]=k,G=pe.map(Q=>EF(t,e.textDocument,e.position,Q,J,Yo)).filter(Q=>Q!==void 0),H=vi(t,kt.CompletionsDelay)??u.completionsDelay(n),ce=la()-n.issuedTime,ie=Math.max(H-ce,0);if(Y!==2&&!m.isCycling&&ie>0&&(Yo.debug(t,`Waiting ${ie}ms before returning completion`),await Ny(ie),rJ(t,r,i)))return Yo.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:SI(M)};let V=[];for(let Q of G){let z=B7t(t,e.textDocument,N,Q,M),re=f?SVe(e.textDocument,e.position,Q):0,ne={completion:R7t(Q.choiceIndex,Q.completionText,h.trailingWs),telemetry:z,isMiddleOfTheLine:f,suffixCoverage:re,copilotAnnotations:Q.copilotAnnotations,clientCompletionId:Q.clientCompletionId};V.push(ne)}return M.properties.clientCompletionId=V[0]?.clientCompletionId,M.measurements.foundOffset=V?.[0]?.telemetry?.measurements?.foundOffset??-1,Yo.debug(t,`Produced ${V.length} results from ${k3(Y)} at ${M.measurements.foundOffset} offset`),rJ(t,r,i)?{type:"canceled",reason:"after post processing completions",telemetryData:SI(M)}:(m.isSpeculative||t.get(Of).setGhostText(E,h.prompt.suffix,G,Y),l("complete"),{type:"success",value:[V,Y],telemetryData:lc(M),telemetryBlob:M,resultType:Y,performanceMetrics:c})})}s(x7t,"getGhostTextWithoutAbortHandling");async function tye(t,e,r,n){let i=cr();t.get(Of).currentRequestId=i;let o=await P7t(t,e.textDocument,i,n);await HS.catch(()=>{});try{return t.get(Lm).schedule(e,i,n?.opportunityId??"",o,r,n),t.get(Dy).notifyRequest(e,i,o,r,n),await x7t(t,e,i,o,r,n)}catch(a){if(Nu(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:SI(o,{cancelledNetworkRequest:!0})};throw a}}s(tye,"getGhostText");function b7t(t,e,r,n){let i=t.get(Of).getCompletionsForUserTyping(e,r.suffix),o=k7t(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(c=>!i.some(l=>l.completionText===c.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(b7t,"getLocalInlineSuggestion");function I7t(t,e){let r=T7t(e,t),n=w7t(e,t);return r&&!n?void 0:r&&n}s(I7t,"isInlineSuggestion");function T7t(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(T7t,"isMiddleOfTheLine");function w7t(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(w7t,"isValidMiddleOfTheLinePosition");function _7t(t,e){return e.lineAt(t).text.trim().length===0}s(_7t,"isNewLine");var SE=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function S7t(t,e,r,n,i,o,a){if(t.get(SE).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Rt(t,"ghostText.longFileMultilineSkip",Dr.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&Ly.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await oGe(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&_7t(n,r))return{requestMultiline:!0};let l=!1;return!i&&H0(r.detectedLanguageId)?l=await XK(r,n):i&&H0(r.detectedLanguageId)&&(l=await XK(r,n)||await XK(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=lGe(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}s(S7t,"shouldRequestMultiline");function nJ(t,e,r){t.get(Eg).append(e.prefix,e.prompt.suffix,r)}s(nJ,"appendToCache");function R7t(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(R7t,"adjustLeadingWhitespace");function k7t(t,e,r,n){let i=t.get(Eg).findAll(e,r);return i.length===0?(Yo.debug(t,"Found no completions in cache"),[]):(Yo.debug(t,`Found ${i.length} completions in cache`),i.map(o=>eye(o,{forceSingleLine:!n})))}s(k7t,"getCompletionsFromCache");async function P7t(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=Dr.createAndMarkAsIssued(i);return await t.get(Bt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(P7t,"createTelemetryWithExp");function B7t(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let c={compCharLen:n.completionText.length,numLines:n.completionText.trim().split(`
`).length};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let l=n.telemetryData.extendedBy(a,c);return l.issuedTime=i.issuedTime,l.measurements.timeToProduceMs=performance.now()-i.issuedTime,NVe(l,e),l.extendWithRequestId(o),l.measurements.confidence=TVe(t,l),l.measurements.quantile=wVe(t,l),Yo.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${l.measurements.confidence} (expected as good or better than about ${l.measurements.quantile} of all suggestions)`),l}s(B7t,"telemetryWithAddData");function D7t(t,e,r,n,i,o,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=o.extendedBy(l);NVe(u,e);let f=r.repoInfo;u.properties.gitRepoInformation=f===void 0?"unavailable":f===0?"pending":"available",f!==void 0&&f!==0&&(u.properties.gitRepoUrl=f.url,u.properties.gitRepoHost=f.hostname,u.properties.gitRepoOwner=f.owner,u.properties.gitRepoName=f.repo,u.properties.gitRepoPath=f.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(ns.range(p.range.start,n)),h=e.getText(ns.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(b=>[b[0],b[1].map(_=>(0,BVe.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},E={...O4(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let x=u.extendedBy(y,E);return Rt(t,"ghostText.issued",x),u}s(D7t,"telemetryIssued");function NVe(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(NVe,"addDocumentTelemetry");function LVe(t,e,r,n,i){let o=Date.now()-n,a=o-i,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),Rt(t,`ghostText.${e}`,c)}s(LVe,"telemetryPerformance");var Of=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&MVe(this.choices[0].completionText,n))return N7t(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function N7t(t,e){return t.filter(r=>MVe(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(N7t,"adjustChoicesStart");function MVe(t,e){return t.startsWith(e)&&t.length>e.length}s(MVe,"startsWithAndExceeds");d();d();d();var D2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(pr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let c=a.text.length-a.rangeLength;this._offset=this._offset+c}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};d();var rye=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??In.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),f=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),o<n.offsetAt(c.start)){let m={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<f&&(o=f),o+=l.length-u.length,i=n.positionAt(o);let p={range:c,newText:l,positionAfterEdit:In.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function Hy(t,e){return new rye(t,e)}s(Hy,"createCompletionState");d();d();d();d();d();d();var FVe="code-referencing";var Qf=new vt(FVe);var L7t=3e3,nye=2,OVe=256,QVe=Math.log(OVe)/Math.log(nye)/nye,Tg={connection:"disabled",maxAttempts:QVe,retryAttempts:0,initialWait:!1},iJ,oJ=[];function M7t(){if(iJ)return iJ;function t(x){return oJ.push(x),()=>{let b=oJ.indexOf(x);b!==-1&&oJ.splice(b,1)}}s(t,"subscribe");function e(){for(let x of oJ)x()}s(e,"afterUpdateConnection");function r(x){Tg.connection!==x&&(Tg.connection=x,e())}s(r,"updateConnection");function n(){return Tg.connection==="connected"}s(n,"isConnected");function i(){return Tg.connection==="disconnected"}s(i,"isDisconnected");function o(){return Tg.connection==="retry"}s(o,"isRetrying");function a(){return Tg.connection==="disabled"}s(a,"isDisabled");function c(){r("connected"),p(!1)}s(c,"setConnected");function l(){r("disconnected")}s(l,"setDisconnected");function u(){r("retry")}s(u,"setRetrying");function f(){r("disabled")}s(f,"setDisabled");function p(x){Tg.initialWait!==x&&(Tg.initialWait=x)}s(p,"setInitialWait");function m(x,b=L7t){o()||(u(),p(!0),g(x,b))}s(m,"enableRetry");function h(){return Tg.initialWait}s(h,"isInitialWait");async function g(x,b){Qf.info(x,`Attempting to reconnect in ${b}ms.`),await y(b),p(!1);let _=x.get(jn);async function k(P,N){if(P>OVe){Qf.info(N,"Max retry time reached, disabling."),f();return}let M=s(async()=>{Tg.retryAttempts=Math.min(Tg.retryAttempts+1,QVe);try{Qf.info(N,`Pinging service after ${P} second(s)`);let J=await _.fetch(new URL("_ping",U4(N)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(J.status!==200||!J.ok)await k(P**2,N);else{Qf.info(N,"Successfully reconnected."),c();return}}catch{await k(P**2,N)}},"tryAgain");setTimeout(()=>void M(),P*1e3)}s(k,"succeedOrRetry"),Qf.info(x,"Attempting to reconnect."),await k(nye,x)}s(g,"attemptToPing");let y=s(x=>new Promise(b=>setTimeout(b,x)),"timeout");function E(x){return{dispose:t(x)}}return s(E,"listen"),iJ={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:f,enableRetry:m,listen:E,isConnected:n,isDisconnected:i,isRetrying:o,isDisabled:a,isInitialWait:h},iJ}s(M7t,"registerConnectionState");var N2=M7t();d();var Dl={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"},vF={[Dl.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[Dl.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[Dl.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function iye(t){return t===401?Dl.Unauthorized:t===400?Dl.BadArguments:t===404?Dl.NotFound:t===429?Dl.RateLimit:t>=500&&t<600?Dl.InternalError:t>=600?Dl.ConnectionError:Dl.Unknown}s(iye,"getErrorType");function Wy(t,e,r={}){return{kind:"failure",reason:iye(Number(t)),code:Number(t),msg:e,meta:r}}s(Wy,"createErrorResponse");d();var F7t=/^[1-6][0-9][0-9]$/,O7t=/([A-Z][a-z]+)/,Q7t="code_referencing",xF=class{constructor(e){this.baseKey=e}static{s(this,"CodeQuoteTelemetry")}buildKey(...e){return[Q7t,this.baseKey,...e].join(".")}},oye=class extends xF{static{s(this,"CopilotOutputLogTelemetry")}constructor(){super("github_copilot_log")}handleOpen({context:e}){let r=this.buildKey("open","count"),n=Dr.createAndMarkAsIssued();Rt(e,r,n)}handleFocus({context:e}){let r=Dr.createAndMarkAsIssued(),n=this.buildKey("focus","count");Rt(e,n,r)}handleWrite({context:e}){let r=Dr.createAndMarkAsIssued(),n=this.buildKey("write","count");Rt(e,n,r)}},n$n=new oye,sye=class extends xF{static{s(this,"MatchNotificationTelemetry")}constructor(){super("match_notification")}handleDoAction({context:e,actor:r}){let n=Dr.createAndMarkAsIssued({actor:r}),i=this.buildKey("acknowledge","count");Rt(e,i,n)}handleDismiss({context:e,actor:r}){let n=Dr.createAndMarkAsIssued({actor:r}),i=this.buildKey("ignore","count");Rt(e,i,n)}},i$n=new sye,aye=class extends xF{static{s(this,"SnippyTelemetry")}constructor(){super("snippy")}handleUnexpectedError({context:e,origin:r,reason:n}){let i=Dr.createAndMarkAsIssued({origin:r,reason:n});Jh(e,this.buildKey("unexpectedError"),i)}handleCompletionMissing({context:e,origin:r,reason:n}){let i=Dr.createAndMarkAsIssued({origin:r,reason:n});Jh(e,this.buildKey("completionMissing"),i)}handleSnippyNetworkError({context:e,origin:r,reason:n,message:i}){if(!r.match(F7t)){Qf.debug(e,"Invalid status code, not sending telemetry",{origin:r});return}let o=n.split(O7t).filter(c=>!!c).join("_").toLowerCase(),a=Dr.createAndMarkAsIssued({message:i});Jh(e,this.buildKey(o,r),a)}},sJ=new aye;var U7t="twirp/github.snippy.v1.SnippyAPI";async function cye(t,e,r,n){let i;try{i=await t.get(Qr).getToken()}catch{return N2.setDisconnected(),Wy(401,vF[Dl.Unauthorized])}if(Qf.info(t,`Calling ${e}`),N2.isRetrying())return Wy(600,"Attempting to reconnect to the public code matching service.");if(N2.isDisconnected())return Wy(601,"The public code matching service is offline.");let o;try{o=await t.get(jn).fetch(cy(t,i,"origin-tracker",`${U7t}/${e}`),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${i.token}`,...A0(t)},signal:n})}catch{return N2.enableRetry(t),Wy(602,"Network error detected. Check your internet connection.")}let a;try{a=await o.json()}catch(g){let y=g.message;throw sJ.handleUnexpectedError({context:t,origin:"snippyNetwork",reason:y}),g}if(o.ok)return{kind:"success",...a};let c={...a,code:Number(o.status)},{code:l,msg:u,meta:f}=c,p=Number(l),m=iye(p),h=u||"unknown error";switch(m){case Dl.Unauthorized:return Wy(l,vF[Dl.Unauthorized],f);case Dl.BadArguments:return Wy(l,h,f);case Dl.RateLimit:return N2.enableRetry(t,60*1e3),Wy(l,vF.RateLimitError,f);case Dl.InternalError:return N2.enableRetry(t),Wy(l,vF[Dl.InternalError],f);default:return Wy(l,h,f)}}s(cye,"call");d();var aJ=I.Object({kind:I.Literal("failure"),reason:I.String(),code:I.Number(),msg:I.String(),meta:I.Optional(I.Any())}),H7t=I.Object({matched_source:I.String(),occurrences:I.String(),capped:I.Boolean(),cursor:I.String(),github_url:I.String()}),UVe=I.Object({source:I.String()}),W7t=I.Object({snippets:I.Array(H7t)}),qVe=I.Union([W7t,aJ]),HVe=I.Object({cursor:I.String()}),G7t=I.Object({commit_id:I.String(),license:I.String(),nwo:I.String(),path:I.String(),url:I.String()}),j7t=I.Object({has_next_page:I.Boolean(),cursor:I.String()}),V7t=I.Object({count:I.Record(I.String(),I.String())}),$7t=I.Object({file_matches:I.Array(G7t),page_info:j7t,license_stats:V7t}),WVe=I.Union([$7t,aJ]);async function GVe(t,e,r){let n=await cye(t,"Match",{method:"POST",body:E2(UVe,{source:e})},r);return E2(qVe,n)}s(GVe,"Match");async function jVe(t,{cursor:e},r){let n=await cye(t,"FilesForMatch",{method:"POST",body:E2(HVe,{cursor:e})},r);return E2(WVe,n)}s(jVe,"FilesForMatch");d();var bF=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),cJ=65;function K7t(t){let e=0,r;bF.lastIndex=0;do if(r=bF.exec(t),r&&(e+=1),e>=cJ)break;while(r);return e}s(K7t,"lexemeLength");function J7t(t,e){let r=0,n;bF.lastIndex=0;do if(n=bF.exec(t),n&&(r+=1,r>=e))return bF.lastIndex;while(n);return t.length}s(J7t,"offsetFirstLexemes");function VVe(t,e){let r=t.split("").reverse().join(""),n=J7t(r,e);return r.length-n}s(VVe,"offsetLastLexemes");function IF(t){return K7t(t)>=cJ}s(IF,"hasMinLexemeLength");function Z7t(t){return Sy.Check(aJ,t)}s(Z7t,"isError");async function $Ve(t,e){let r=await e();if(Z7t(r)){sJ.handleSnippyNetworkError({context:t,origin:String(r.code),reason:r.reason,message:r.msg});return}return r}s($Ve,"snippyRequest");function zVe(t){return"kind"in t&&t.kind==="failure"}s(zVe,"isMatchError");async function YVe(t,e,r,n){let o=await t.get(pr).getTextDocument({uri:e});if(!o){Qf.debug(t,`Expected document matching ${e}, got nothing.`);return}let a=o.getText();if(!IF(a)||!IF(a))return;let c=r;if(!IF(r)){let h=a.slice(0,n),g=VVe(h,cJ);c=a.slice(g,n+r.length)}if(!IF(c))return;let l=await $Ve(t,()=>GVe(t,c));if(!l||zVe(l)||!l.snippets.length){Qf.info(t,"No match found");return}Qf.info(t,"Match found");let{snippets:u}=l,f=u.map(async h=>{let g=await $Ve(t,()=>jVe(t,{cursor:h.cursor}));if(!g||zVe(g))return;let y=g.file_matches,E=g.license_stats;return{match:h,files:y,licenseStats:E}}),m=(await Promise.all(f)).filter(h=>h!==void 0);if(m.length)for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.has("NOASSERTION")&&(g.delete("NOASSERTION"),g.add("unknown"));let y=Array.from(g).sort(),E=n,x=n+h.match.matched_source.length,b=o.positionAt(E),_=o.positionAt(x);await t.get(Fd).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:E,offsetEnd:x,version:o.version,location:{start:b,end:_},matchingText:c,details:y.map(k=>({license:k,url:h.match.github_url}))})}}s(YVe,"fetchCitations");d();function lye(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let f=o;o=n,n=f,f=a,a=i,i=f,c=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],c,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:i[l],endOffset:l}}s(lye,"editDistance");function eQt(){return new Map}s(eQt,"emptyLexDictionary");function tQt(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(tQt,"reverseLexDictionary");function*rQt(t){let e="",r;(c=>(c[c.Word=0]="Word",c[c.Space=1]="Space",c[c.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(rQt,"lexGeneratorWords");function KVe(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(KVe,"lexicalAnalyzer");function JVe(t){return t!==" "}s(JVe,"notSingleSpace");function XVe(t,e,r=rQt){let[n,i]=KVe(t,eQt(),r,JVe),[o,a]=KVe(e,i,r,JVe);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let c=tQt(a),l=o.length,u=c[o[0][0]],f=c[o[l-1][0]];function p(y,E,x,b){if(b===0||b===l-1){let _=c[n[x][0]];return b==0&&_.endsWith(u)||b==l-1&&_.startsWith(f)?0:1}else return y===E?0:1}s(p,"compare");let m=lye(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(XVe,"lexEditDistance");d();function ZVe(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(ZVe,"computeCompCharLen");function e$e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(e$e,"computeCompletionText");function t$e(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(t$e,"computePartialLength");var OI=new vt("postInsertion"),r$e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],n$e=50,nQt=1500,iQt=.5,oQt=500,uye={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function i$e(t,e,r,n,i){let o=await t.get(mn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return OI.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,c=a.getText(),l=c.substring(0,n),u=a.positionAt(n),f=await W3(t,r.properties.headerRequestId,Hy(a,u),r),p=f.type==="prompt"?f.prompt:{prefix:l,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=c.substring(n,i);return p.suffix=c.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=c.substring(n),h=JAe(l,n,a.detectedLanguageId),y=await yVe(h,void 0)(m),E=Math.min(c.length,n+(y?y*2:oQt)),x=c.substring(n,E);return{prompt:p,capturedCode:x,terminationOffset:y??-1}}}s(i$e,"captureCode");function lJ(t,e,r,n,i){i.forEach(({completionText:l,completionTelemetryData:u})=>{OI.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),kGe(t,e,u)});let o=new D2(t,n,r-1),a=new D2(t,n,r),c=s(async l=>{OI.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:f,capturedCode:p,terminationOffset:m}=await i$e(t,n,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:f.prefix,context:f.context}),hypotheticalPromptSuffixJson:JSON.stringify(f.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:l.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});OI.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Rt(t,e+".capturedAfterRejected",g,1)},"checkInCode");r$e.filter(l=>l.captureRejection).map(l=>o.push(Wu(t,()=>c(l),"postRejectionTasks"),l.seconds*1e3))}s(lJ,"postRejectionTasks");function L2(t,e,r,n,i,o,a,c){let l=o.extendedBy({compType:a.compType},{compCharLen:ZVe(a,r)});OI.debug(t,`${e}.accepted choiceIndex: ${l.properties.choiceIndex}`),RGe(t,e,l);let u=r;r=e$e(r,a);let f=r.trim(),p=new D2(t,i,n),m=new D2(t,i,n+r.length),h=s(async g=>{await lQt(t,e,f,n,i,g,l,p,m)},"stillInCodeCheck");if(uye.triggerPostInsertionSynchroneously&&Lh(t)){let g=h({seconds:0,captureCode:uye.captureCode,captureRejection:uye.captureRejection});t.get(Xa).register(g)}else r$e.map(g=>p.push(Wu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Wu(t,sQt,"post insertion citation check")(t,i,u,r,n,c)}s(L2,"postInsertionTasks");async function sQt(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1){if(YW(t)?.getTokenValue("sn")==="1")return;await YVe(t,e,n,i);return}let a=await t.get(pr).getTextDocument({uri:e});if(a){let c=dye(a.getText(),n,n$e,i);c.stillInCodeHeuristic&&(i=c.foundOffset)}for(let c of o.ip_code_citations){let l=aQt(r.length,n.length,c.start_offset);if(l===void 0){OI.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+l,f=a?.positionAt(u),p=i+cQt(r.length,n.length,c.stop_offset),m=a?.positionAt(p),h=f&&m?a?.getText({start:f,end:m}):"<unknown>";await t.get(Fd).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:f&&m?{start:f,end:m}:void 0,matchingText:h,details:c.details.citations})}}s(sQt,"citationCheck");function aQt(t,e,r){if(!(e<t&&r>e))return r}s(aQt,"computeCitationStart");function cQt(t,e,r){return e<t?Math.min(r,e):r}s(cQt,"computeCitationEnd");function dye(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=XVe(i,e),a=o.lexDistance/o.needleLexLength,{distance:c}=lye(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=iQt?1:0}}s(dye,"find");async function lQt(t,e,r,n,i,o,a,c,l){let u=await t.get(mn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=dye(p,r,n$e,c.offset);m.stillInCodeHeuristic||(m=dye(p,r,nQt,c.offset)),OI.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},m);if(Rt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:E}=await i$e(t,i,h,c.offset,l.offset),x={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},b=a.extendedBy({...x,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:E});OI.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Rt(t,e+".capturedAfterAccepted",b,1)}}}s(lQt,"checkStillInCode");var fye=new vt("ghostText"),Hd=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function uQt(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(uQt,"computeRejectedCompletions");function pye(t,e){let r=t.get(Hd);if(!r.position||!r.uri)return;let n=uQt(r);n.length>0&&lJ(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(pye,"rejectLastShown");function o$e(t,e,r,n){let i=t.get(Hd);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&pye(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(o$e,"setLastShown");function s$e(t,e){let r=t.get(Hd);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;fye.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,QY(t,"ghostText",e)}}s(s$e,"handleGhostTextShown");function uJ(t,e){let r=t.get(Hd);r.resetState(),fye.debug(t,"Ghost text post insert");let n={compType:"full"};return r.resetPartialAcceptanceState(),L2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(uJ,"handleGhostTextPostInsert");function a$e(t,e,r,n=0){let i=t.get(Hd);fye.debug(t,"Ghost text partial post insert");let o=t$e(e,r,n);if(o)return i.partiallyAcceptedLength=r,L2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(a$e,"handlePartialGhostTextPostInsert");function c$e(t){let e=new E3;return e.set(nu,t),e.set(ly,new ly),e.set(lo,new lo),e.set(Eg,new Eg),e.set(Xh,new Xh),e.set(Bt,new Bt(e)),e.set(YA,new YA),e.set(Jl,new Jl(e)),e.set(xl,new xl),e.set(xd,new xd),e.set(Mf,new nF),e.set(dg,new zP),e.set(eg,new n9),e.set(Xa,new Xa),e.set(Dy,new Dy(e)),e.set(mn,new mn(e)),e.set(Fm,new Fm(e)),e.set(_E,zK(e)),e.set(Hd,new Hd),e.set(Of,new Of),e.set(SE,SE.default),e.set(AE,new AE(e)),e.set(mm,new mm(e)),e.set(Il,new Il),e.set(Lf,new Lf(e)),e.set(ds,new ds),e.set(_m,new _m(e)),e.set(km,new km),e}s(c$e,"createCommonContext");d();d();var dJ=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};d();var Y3=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var dYn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),TF=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=await this.ctx.get(Mf).fetchAndStreamSpeculation(this.ctx,i,o,(c,l)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new dJ(a.reason);case"failed":throw new Y3(a.reason)}}};d();d();var l$e=Ne(require("node:util"));function u$e(t,...e){return`[${t}] ${dQt(e)}`}s(u$e,"formatLogMessage");function dQt(t){return l$e.default.formatWithOptions({maxStringLength:1/0},...t)}s(dQt,"format");function fJ(t){return r5e(t)}s(fJ,"verboseLogging");var pJ=class extends Tc{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||fJ(r))&&this.console.warn(`[${i}]`,...o)}};d();var d$e=require("node:util");var K3=class extends ay{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){Jh(e,"log",Dr.createAndMarkAsIssued({context:r,level:N_[1],message:fQt(...n)}),1)}sendException(e,r,n){Ia(e,r,n)}};function fQt(...t){return t.map(e=>(0,d$e.inspect)(e)).join(" ")}s(fQt,"telemetryMessage");d();var _nt=Ne(require("crypto")),Snt=Ne(require("fs")),jZ=Ne(Tnt()),Rnt=require("tls"),knt=Ne(wnt());var oD=new vt("certificates"),Uc=class{static{s(this,"RootCertificateReader")}};function VZ(t,e=process.platform){return new Ove(t,[new Qve,new Uve,mrr(t,e)])}s(VZ,"getRootCertificateReader");function mrr(t,e){switch(e){case"linux":return new qve(t);case"darwin":return new Hve(t);case"win32":return new Wve(t);default:return new Gve}}s(mrr,"createPlatformReader");var Fve=class extends Uc{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return oD.warn(this.ctx,"Failed to read root certificates:",r),[]}}},Ove=class extends Uc{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new Fve(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new _nt.X509Certificate(o),c=Date.parse(a.validTo);return isNaN(c)||c>n}catch(a){return oD.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&oD.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},Qve=class extends Uc{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return Rnt.rootCertificates}},Uve=class extends Uc{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await Pnt(e):[]}},qve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await Pnt(n);oD.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},Hve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=jZ.get({excludeBundled:!1,format:jZ.Format.pem});return oD.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},Wve=class extends Uc{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=knt.all();return oD.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},Gve=class extends Uc{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function Pnt(t){let e;try{e=await Snt.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(Pnt,"readCertsFromFile");d();var Wnt=Ne(require("http"));var Qrr=407,vu=new vt("proxySocketFactory"),dC=class{static{s(this,"ProxySocketFactory")}},mR=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function $Z(t){return new $ve(t,new zve(t))}s($Z,"getProxySocketFactory");var $ve=class extends dC{constructor(r,n,i=new GO,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Or(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(vu.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof mR&&i.code===`ProxyStatusCode${Qrr}`){vu.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return vu.debug(this.ctx,"Proxy authorization successful, caching result"),Rt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(vu.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(vu.debug(this.ctx,"Proxy authorization successful, received token"),i)return vu.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){vu.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);vu.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);vu.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return vu.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return vu.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.hostname}`:`HTTP@${r.hostname}`;return vu.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return`${r.hostname}:${r.port}`}},zve=class extends dC{constructor(r){super();this.ctx=r;this.userAgent=`GithubCopilot/${this.ctx.get(lo).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{vu.debug(this.ctx,"Attempting to establish connection to proxy");let c=Wnt.request(i);c.useChunkedEncodingByDefault=!1,c.once("connect",(l,u,f)=>{vu.debug(this.ctx,"Socket Connect returned status code",l.statusCode),c.removeAllListeners(),u.removeAllListeners(),l.statusCode!==200?(u.destroy(),a(new mR(`tunneling socket could not be established, statusCode=${l.statusCode}`,void 0,`ProxyStatusCode${l.statusCode}`))):f.length>0?(u.destroy(),a(new mR(`got non-empty response body from proxy, length=${f.length}`,void 0,"ProxyNonEmptyResponseBody"))):(vu.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),c.once("error",l=>{vu.debug(this.ctx,"Proxy socket connection error",l.message),c.removeAllListeners(),a(new mR(`tunneling socket could not be established, cause=${l.message}`,l))}),c.on("timeout",()=>{vu.debug(this.ctx,"Proxy socket connection timeout"),a(new mR(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),c.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={hostname:n.hostname,port:n.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r,n.authorization),o}configureProxyAuthorization(r,n,i){r.headers["Proxy-Authorization"]=[],i&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof n.headers?.["Proxy-Authorization"]=="string"&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},GO=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>Ne(Hnt()))}};d();var $nt=require("node:os");var Urr=new vt("repository"),hR="\\\\",znt="(?:[#;].*)",cD=`(?:[^"${hR}]|${hR}.)`,qrr="[0-9A-Za-z-]",Gnt=`[A-Za-z]${qrr}*`,Ynt=`\\s*${znt}?$`,Knt=`(?:[^"${hR};#]|${hR}.)`,Hrr=`(?:"${cD}*"|"${cD}*(?<strCont>${hR})$)`,Wrr=`(?:${Knt}|${Hrr})+`,Grr=`(?:(?<cont>${hR})$)`,Jnt=`(?<value>${Wrr})${Grr}?${Ynt}`,jnt=new RegExp(`^${Jnt}`),jrr=new RegExp(`^(?<value>${cD}*(?:(?<strCont>${hR})$|(?<quote>")))`),Vrr=new RegExp(`^\\s*(?:(?<key>${Gnt})\\s*=\\s*${Jnt}|(?<soloKey>${Gnt})${Ynt})`),$rr=new RegExp(`(?<value>${Knt}+)|"(?<string>${cD}*)"`,"g"),Vnt="[-.0-9A-Za-z]+",zrr=`\\s+"(?<ext>${cD}*)"`,Yrr=`\\s+"(?<extOnly>${cD}*)"`,Krr=new RegExp(`^\\s*\\[(?:(?<simple>${Vnt})${zrr}|${Yrr}|(?<simpleOnly>${Vnt}))\\]`),Jrr=new RegExp(`^\\s*${znt}$`),Yve=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(Krr);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(Vrr);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(jrr),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match(jnt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match(jnt),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll($rr)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){Jrr.test(this.line)&&(this.line="")}},zZ=class extends Cg{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await AE.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new C2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new Yve(i),a=new C2;return o.parse((c,l)=>a.add(c,l)),a}async tryLoadConfig(e,r,n){try{return await e.get(yo).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&Urr.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=Lo(this.xdgConfigUri(),"git","config"),o=Lo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Oi(r).toLowerCase()!=="config.worktree")return;let n=Gu(r),i=Lo(n,"commondir");try{let o=(await e.get(yo).readFileString(i)).trimEnd();return Lo(M_(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?Kc(process.env.XDG_CONFIG_HOME):Lo(this.homeUri(),".config")}homeUri(){return Kc((0,$nt.homedir)())}};d();var Xnt=require("child_process");var YZ=class extends Cg{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,Xnt.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){SWe.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=ls(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new C2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};d();var eit=Ne(require("node:events"));var Znt="onWorkspaceChanged",cp=class{constructor(){this.emitter=new eit.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(Znt,e)}emit(e){this.emitter.emit(Znt,e)}};function tit(t){let e=c$e(t);return Xrr(e),e.set(Uc,VZ(e)),e.set(dC,$Z(e)),e.set(Cg,new yY([new YZ,new zZ])),e.set(cp,new cp),e.set(TF,new TF(e)),e}s(tit,"createProductionContext");function Xrr(t){t.set(Hp,Hp.fromEnvironment(!1)),t.set(ay,new K3),t.set(Tc,new pJ(console))}s(Xrr,"setupRudimentaryLogging");var Kni=new vt("context");d();d();var Ur=new vt("chat");d();d();var ol=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(ol||{});function Xr(t){return t?(t=lp(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Xr,"getTextPart");var rit=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),nit=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function gT(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(gT,"parseToolCallArguments");function iit(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(iit,"toOpenAIToolCall");function oit(t,e,r,n,i,o,a,c){let l=JSON.parse(JSON.stringify(e));return r.tool_calls&&(l.tool_calls=r.tool_calls),_3(t,[l],c),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:c}}s(oit,"convertToChatCompletion");function jO(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(jO,"isChatCompletionContentPartArray");function KZ(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(KZ,"isChatMessageArray");function lp(t){if(typeof t=="string")return t;if(jO(t))return t;if(KZ(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(lp,"resolveAsChatMessageContent");function VO(t,e){return(typeof t=="string"||jO(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(VO,"appendChatMessageContent");function Kve(t,e){if(t){if(typeof t=="string"||jO(t))return[{role:"assistant",content:t}];if(KZ(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(Kve,"resolveResponseAsChatMessages");d();var Jve=new vt("streamMessages");function sit(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Jve.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Jve.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),Jve.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}]`);let o=rF(e.solution),a={role:"assistant",content:n};return oit(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(sit,"prepareChatCompletionForReturn");var Xm=new vt("fetchChat"),JZ=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let c=a.body();try{c.destroy()}catch(l){Xm.exception(e,l,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let c=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,c,a)}if(e.get(_m).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let c=await a.text(),l=JSON.parse(c),u=l.choices!=null?l.choices[0].message:{role:"assistant",content:""},f=a.headers.get("X-Request-ID")??cr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Xr(u.content).split(" "),requestId:{headerRequestId:f,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=Xr(u.content);return await i(m,{text:m,copilotReferences:l.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>S3(a),"getProcessingTime")}}else{let l=_I.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:EE(l,f=>sit(e,f,n)),getProcessingTime:s(()=>S3(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return Dr.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:R3(e,n.count),top_p:LY(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},c=dE(n.repoInfo);return c!==void 0&&(a.nwo=c),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await Zrr(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Xm.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Rt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),c=JSON.parse(a);if(c.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:c.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Qr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return Xm.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return Xm.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Qr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let l=n.headers.get("retry-after");return{type:"failed",reason:l?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(l).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return n.status===503?{type:"failed",reason:i,code:n.status}:(Xm.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status})}};async function Zrr(t,e,r,n,i,o,a,c,l,u,f,p){let m=Lo(r,n,i);if(!c)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:l});NY(a,h,["messages"]),h.properties.headerRequestId=o,Rt(t,"request.sent",h);let g=la(),y=CGe(l),E={...rI(t),...f.toCapiHeaders()};return a.messages?.some(x=>Array.isArray(x.content)?x.content.some(b=>"image_url"in b):!1)&&(E["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(x=>{enr(x)&&x.tool_calls&&(x.tool_calls=x.tool_calls.map(b=>iit(b)))}),h_(t,m,c,y,o,a,p,E).then(x=>{let b=v2(x);h.extendWithRequestId(b);let _=la()-g;return h.measurements.totalTimeMs=_,Xm.info(t,`Request ${o} at <${m}> finished with ${x.status} status after ${_}ms`),Xm.debug(t,"request.response properties",h.properties),Xm.debug(t,"request.response measurements",h.measurements),Xm.debug(t,"messages:",JSON.stringify(e)),Rt(t,"request.response",h),x}).catch(x=>{if(Nu(x))throw x;let b=h.extendedBy({error:"Network exception"});Rt(t,"request.shownWarning",b),h.properties.message=String(Ud(x,"name")??""),h.properties.code=String(Ud(x,"code")??""),h.properties.errno=String(Ud(x,"errno")??""),h.properties.type=String(Ud(x,"type")??"");let _=la()-g;throw h.measurements.totalTimeMs=_,Xm.info(t,`Request ${o} at <${m}> rejected with ${String(x)} after ${_}ms`),Xm.debug(t,"request.error properties",h.properties),Xm.debug(t,"request.error measurements",h.measurements),Rt(t,"request.error",h),x}).finally(()=>{_3(t,e,h)})}s(Zrr,"fetchWithInstrumentation");function enr(t){return"tool_calls"in t}s(enr,"isChatMessageWithToolCalls");var ka=class{constructor(e){this.ctx=e;this.fetcher=new JZ}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=cr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},c=e.modelConfiguration;c&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=c.maxResponseTokens),a.stream=!!c.stream),e.logitBias&&(a.logit_bias=e.logitBias);let l=await this.ctx.get(Qr).getToken(),u=cy(this.ctx,l,e.copilotApiProvider??"api"),f=e.endpoint??"completions",p=e.authToken??l.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:f,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return c&&(m.model=c.modelId),e.tools&&e.tools?.length>0&&(c===void 0||c.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=ZM(r.chatCompletions,l=>this.postProcess(l,i));Ur.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let c=0;for await(let l of a)Ur.debug(this.ctx,`Received choice #${c} for request ${e.ourRequestId}: ${JSON.stringify(l,null,2)}`),o.push(l),c++;if(o.length==1){let l=o[0];switch(l.finishReason){case"stop":return{type:"success",value:Xr(l.message?.content)??"",toolCalls:l.tool_calls,requestId:n,numTokens:l.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:l.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:Xr(l.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let l=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(l.length>0)return{type:"successMultiple",value:l.map(u=>Xr(u.message.content)),toolCalls:l.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return tJ(e.tokens)?(r.extendWithRequestId(e.requestId),Rt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Ur.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Nu(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Ur.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};d();var fC=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};d();var AT=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};d();var tnr=".github/copilot-instructions.md",rnr=".github/git-commit-instructions.md",nnr="global-copilot-instructions",inr="global-git-commit-instructions",pC=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:nnr}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:inr}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let c=Lo(r.uri,n),l=(await e.get(yo).readFileString(c)).trim();if(!l)return;(await yE(e,{uri:c},l)).status==="valid"&&o.push({kind:a,content:[{instruction:l,languageId:i}],reference:c})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let c=[];return n.includeCodeGenerationInstructions!==!1&&c.push(this._collectInstructionsFromFile(e,a,tnr,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&c.push(this._collectInstructionsFromFile(e,a,rnr,void 0,i,0)),c});return await Promise.all(o),i}};d();var xu=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},XZ=class extends xu{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};d();d();d();function ZZ(){return cr()}s(ZZ,"uuidV4");d();var yT=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};d();var mC=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};d();d();d();var $O="filepath:",sl="...existing code...",Xve="copilot-edited-file";d();function lD(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(lD,"getFenceForCodeBlock");var up=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=lD(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${$O} ${La(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var Zve=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},zO=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=Xr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let c=Xr(a.content).endsWith(`
`)?Xr(a.content):`${Xr(a.content)}
`;return`${o}<SYSTEM>
${c}
End your response with </${Xve}>.
</SYSTEM>


`}return o+Xr(a.content)},"")+`


The resulting document:
<${Xve}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${sl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new up({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new Zve({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new up({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};d();var $E=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(mn).getOrReadTextDocument({uri:e})}};d();d();d();d();d();d();var hC=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ht(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=yg(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new rn(n,i)}getRange(e){return lr.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Pl.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Pl(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var exe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new rn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new hC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Nm(e)}equals(e){return this===e?!0:this.getValue()===e.getValue()}};var eee=class extends exe{constructor(r){super();this.value=r;this._t=new hC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};d();var YO=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new dn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"BaseEdit")}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let i=r.tryJoinTouching(n);if(i){r=i;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let i=[...r.replacements],o=[],a=0;for(let c of n.replacements){for(;;){let p=i[0];if(!p||p.replaceRange.start+a+p.getNewLength()>=c.replaceRange.start)break;i.shift(),o.push(p),a+=p.getNewLength()-p.replaceRange.length}let l=a,u,f;for(;;){let p=i[0];if(!p||p.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=p),f=p,i.shift(),a+=p.getNewLength()-p.replaceRange.length}if(!u)o.push(c.delta(-a));else{let p=Math.min(u.replaceRange.start,c.replaceRange.start-l),m=c.replaceRange.start-(u.replaceRange.start+l);if(m>0){let E=u.slice(Ht.emptyAt(p),new Ht(0,m));o.push(E)}if(!f)throw new dn("Invariant violation: lastIntersecting is undefined");let h=f.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let E=f.slice(Ht.ofStartAndLength(f.replaceRange.endExclusive,0),new Ht(f.getNewLength()-h,f.getNewLength()));i.unshift(E),a-=E.getNewLength()-E.replaceRange.length}let g=new Ht(p,c.replaceRange.endExclusive-a),y=c.slice(g,new Ht(0,c.getNewLength()));o.push(y)}}for(;;){let c=i.shift();if(!c)break;o.push(c)}return this._createNew(o).normalize()}decomposeSplit(e){let r=[],n=[],i=0;for(let o of this.replacements)e(o)?(r.push(o),i+=o.getNewLength()-o.replaceRange.length):n.push(o.slice(o.replaceRange.delta(i),new Ht(0,o.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return uHe(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let i=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}},tee=class{constructor(e){this.replaceRange=e}static{s(this,"BaseReplacement")}delta(e){return this.slice(this.replaceRange.delta(e),new Ht(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Ht(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}},ait=class t extends YO{static{s(this,"Edit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};var ree=class extends YO{static{s(this,"BaseStringEdit")}get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}apply(e){let r=[],n=0;for(let i of this.replacements)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let i of this.replacements)r.push(Yd.replace(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new dp(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}tryRebase(e,r=!0){let n=[],i=0,o=0,a=0;for(;o<this.replacements.length||i<e.replacements.length;){let c=e.replacements[i],l=this.replacements[o];if(l)if(!c)n.push(new Yd(l.replaceRange.delta(a),l.newText)),o++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(o++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new Yd(l.replaceRange.delta(a),l.newText)),o++):(i++,a+=c.newText.length-c.replaceRange.length);else break}return new dp(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new dp(r)}normalizeEOL(e){return new dp(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),i=Yd.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isEmpty?dp.empty:i.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new eee(this.apply(e.value))}mapData(e){return new txe(this.replacements.map(r=>new uD(r.replaceRange,r.newText,e(r))))}},nee=class extends tee{constructor(r,n){super(r);this.newText=n}static{s(this,"BaseStringReplacement")}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(r){return r.substring(0,this.replaceRange.start)+this.newText+r.substring(this.replaceRange.endExclusive)}isNeutralOn(r){return this.newText===r.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(r){let n=r.substring(this.replaceRange.start,this.replaceRange.endExclusive),i=BI(n,this.newText),o=Math.min(n.length-i,this.newText.length-i,TE(n,this.newText)),a=new Ht(this.replaceRange.start+i,this.replaceRange.endExclusive-o),c=this.newText.substring(i,this.newText.length-o);return new Yd(a,c)}normalizeEOL(r){let n=this.newText.replace(/\r\n|\n/g,r);return new Yd(this.replaceRange,n)}removeCommonSuffixAndPrefix(r){return this.removeCommonSuffix(r).removeCommonPrefix(r)}removeCommonPrefix(r){let n=this.replaceRange.substring(r),i=BI(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaStart(i),new Ht(i,this.newText.length))}removeCommonSuffix(r){let n=this.replaceRange.substring(r),i=TE(n,this.newText);return i===0?this:this.slice(this.replaceRange.deltaEnd(-i),new Ht(0,this.newText.length-i))}toEdit(){return new dp([this])}},dp=class t extends ree{static{s(this,"StringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new Yd(e,r)])}static insert(e,r){return new t([new Yd(Ht.emptyAt(e),r)])}static delete(e){return new t([new Yd(e,"")])}static fromJson(e){return new t(e.map(Yd.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let i of e){let o=n.at(-1);!o||i.replaceRange.isBefore(o.replaceRange)?n.push(i):(r=r.compose(t.create(n.reverse())),n=[i])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}},Yd=class t extends nee{static{s(this,"StringReplacement")}static insert(e,r){return new t(Ht.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};var txe=class t extends ree{static{s(this,"AnnotatedStringEdit")}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new uD(e,r,n)])}static insert(e,r,n){return new t([new uD(Ht.emptyAt(e),r,n)])}static delete(e,r){return new t([new uD(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(){return new dp(this.replacements.map(e=>new Yd(e.replaceRange,e.newText)))}},uD=class t extends nee{constructor(r,n,i){super(r,n);this.data=i}static{s(this,"AnnotatedStringReplacement")}static insert(r,n,i){return new t(Ht.emptyAt(r),n,i)}static replace(r,n,i){return new t(r,n,i)}static delete(r,n){return new t(r,"",n)}equals(r){return this.replaceRange.equals(r.replaceRange)&&this.newText===r.newText&&this.data===r.data}tryJoinTouching(r){let n=this.data.join(r.data);if(n!==void 0)return new t(this.replaceRange.joinRightTouching(r.replaceRange),this.newText+r.newText,n)}slice(r,n){return new t(r,n?n.substring(this.newText):this.newText,this.data)}};var dD=class{constructor(e,r){this.originalText=e;this._combinedEditsSinceStart=dp.empty;this._debugLog=[];this._text=r.apply(this.originalText),this._textAfterTrackedEdits=this._text,this._originalEdits=r,this._debugLog.push(`[INIT] Original: "${this.originalText}"`),this._debugLog.push(`[INIT] TrackedEdits(${r.replacements.length}): ${this._formatEditsCompact(r,this.originalText)}`),this._debugLog.push(`[INIT] Result: "${this._text}"`),this._debugLog.push("")}static{s(this,"EditSurvivalTracker")}_formatEditsCompact(e,r){return e.replacements.length===0?"[]":e.replacements.map(n=>{let i=r.substring(n.replaceRange.start,n.replaceRange.endExclusive);return`[${n.replaceRange.start}:${n.replaceRange.endExclusive}]"${i}"->"${n.newText}"`}).join(", ")}handleEdits(e){let r=this._text,n=e.apply(this._text),i=this._combinedEditsSinceStart.compose(e);i=i.removeCommonSuffixPrefix(this._textAfterTrackedEdits),this._combinedEditsSinceStart=i,this._text=n,this._debugLog.push(`[EDIT] Input(${e.replacements.length}): ${this._formatEditsCompact(e,r)} -> "${n}"`),this._debugLog.push(`[EDIT] Accumulated(${this._combinedEditsSinceStart.replacements.length}): ${this._formatEditsCompact(this._combinedEditsSinceStart,this._textAfterTrackedEdits)}`)}getCurrentText(){return this._text}getTextAfterMarkedEdits(){return this._textAfterTrackedEdits}getOriginalText(){return this.originalText}getDebugLog(){return this._debugLog.join(`
`)}computeTrackedEditsSurvivalScore(){this._debugLog.push(`[CALC] Current: "${this._text}" | Original: "${this.originalText}"`);let e=0,r=0,n=0,i=0,o=this._originalEdits.getNewRanges(),a=onr(o,this._combinedEditsSinceStart);this._debugLog.push(`[CALC] Processing ${o.length} edits:`);for(let u=0;u<o.length;u++){let f=this._originalEdits.replacements[u],p=this.originalText.substring(f.replaceRange.start,f.replaceRange.endExclusive),m=f.newText,h=a[u],g=this._text.substring(h.start,h.endExclusive),y=rxe(g,m),E=rxe(m,p),x=rxe(g,p);if(this._debugLog.push(`  #${u+1}: "${p}"->"${m}"->"${g}" | 4gram:${y.toFixed(2)} noRevert:(${E.toFixed(2)},${x.toFixed(2)})`),E!==1){let b=1-Math.max(x-E,0)/(1-E);n+=f.replaceRange.length*b,i+=f.replaceRange.length}e+=f.newText.length*y,r+=f.newText.length}let c=r===0?1:e/r,l=i===0?1:n/i;return this._debugLog.push(`[RESULT] fourGram: ${c.toFixed(3)} (${e.toFixed(1)}/${r.toFixed(1)}) | noRevert: ${l.toFixed(3)} (${n.toFixed(1)}/${i.toFixed(1)})`),{fourGram:c,noRevert:l}}};function rxe(t,e){if(t.length<4||e.length<4)return t===e?1:0;let n=new Map;for(let c=0;c<=t.length-4;c++){let l=t.substring(c,c+4),u=n.get(l)||0;n.set(l,u+1)}for(let c=0;c<=e.length-4;c++){let l=e.substring(c,c+4),u=n.get(l)||0;n.set(l,u-1)}let i=t.length-4+1+e.length-4+1,o=0;for(let c of n.values())o+=Math.abs(c);return(i-o)/i}s(rxe,"compute4GramTextSimilarity");function onr(t,e){t=t.slice();let r=[],n=0;for(let i of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=i.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let o=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(i.replaceRange))break;t.shift(),o.push(a)}for(let a=o.length-1;a>=0;a--){let c=o[a],l=c.intersect(i.replaceRange).length;c=c.deltaEnd(-l+(a===0?i.newText.length:0));let u=c.start-i.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(i.newText.length)),c=c.delta(-(i.newText.length-i.replaceRange.length)),t.unshift(c)}n+=i.newText.length-i.replaceRange.length}for(;;){let i=t[0];if(!i)break;t.shift(),r.push(i.delta(n))}return r}s(onr,"applyEditsToRanges");d();d();var KO=class{static{s(this,"OffsetLineColumnConverter")}get lines(){return this._lineStartOffsets.length}constructor(e){this._lineStartOffsets=[0];let r=0;for(;r<e.length;){let n=e.charCodeAt(r);r++,(n===13||n===10)&&(n===13&&r<e.length&&e.charCodeAt(r)===10&&r++,this._lineStartOffsets.push(r))}}lineOffset(e){return this._lineStartOffsets[e-1]}offsetToPosition(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);let n=e-this._lineStartOffsets[r-1];return new rn(r,n+1)}startOffsetOfLineContaining(e){let r=1;for(;r<this._lineStartOffsets.length&&!(this._lineStartOffsets[r]>e);r++);return this._lineStartOffsets[r-1]}positionToOffset(e){return e.lineNumber>=this._lineStartOffsets.length?this._lineStartOffsets[this._lineStartOffsets.length-1]+e.column-1:this._lineStartOffsets[e.lineNumber-1]+e.column-1}};async function iee(t,e,r,n=5e3){let i=await r.computeDiff(t,e,{maxComputationTimeMs:n,computeMoves:!1,ignoreTrimWhitespace:!1}),o=new KO(t),a=new KO(e),c=[];for(let l of i.changes)for(let u of l.innerChanges??[]){let f=a.positionToOffset(u.modifiedRange.getStartPosition()),p=a.positionToOffset(u.modifiedRange.getEndPosition()),m=e.substring(f,p),h=o.positionToOffset(u.originalRange.getStartPosition()),g=o.positionToOffset(u.originalRange.getEndPosition()),y=new Ht(h,g);c.push(new Yd(y,m))}return new dp(c)}s(iee,"stringEditFromDiff");d();d();var cit=require("worker_threads");var nxe=class{constructor(){this.nextId=1;this.handlers=new Map}static{s(this,"RpcResponseHandler")}createHandler(){let e=this.nextId++,r,n,i=new Promise((o,a)=>{r=o,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:i}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};function snr(t){let e={get:s((r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...i)=>t(n,i)),r[n]),"get")};return new Proxy(Object.create(null),e)}s(snr,"createRpcProxy");var oee=class{constructor(e,r,n){this.responseHandler=new nxe;this.worker=new cit.Worker(e,r),this.worker.on("message",async i=>{if("fn"in i)try{let o=await n?.[i.fn].apply(n,i.args);this.worker.postMessage({id:i.id,res:o})}catch(o){let a=o instanceof Error?o:new Error(String(o));this.worker.postMessage({id:i.id,err:a})}else this.responseHandler.handleResponse(i)}),this.worker.on("error",i=>this.handleError(i)),this.worker.on("exit",i=>{i!==0&&this.handleError(new Error(`Worker thread exited with code ${i}.`))}),this.proxy=snr((i,o)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:i,args:o}),c})}static{s(this,"WorkerWithRpcProxy")}async terminate(){this.worker.removeAllListeners(),await this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};d();d();d();var aee=!1,cee=!1,see=!1,anr=!1,cnr=!1,lit=!1,lnr=!1,unr=!1,dnr=!1,fnr=!1;var zE,YE=globalThis,Zm;typeof YE.vscode<"u"&&typeof YE.vscode.process<"u"?Zm=YE.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Zm=process);var uit=typeof Zm?.versions?.electron=="string",pnr=uit&&Zm?.type==="renderer";typeof Zm=="object"?(aee=Zm.platform==="win32",cee=Zm.platform==="darwin",see=Zm.platform==="linux",anr=see&&!!Zm.env.SNAP&&!!Zm.env.SNAP_REVISION,lnr=uit,dnr=!!Zm.env.CI||!!Zm.env.BUILD_ARTIFACTSTAGINGDIRECTORY,cnr=!0):typeof navigator=="object"&&!pnr?(zE=navigator.userAgent,aee=zE.indexOf("Windows")>=0,cee=zE.indexOf("Macintosh")>=0,unr=(zE.indexOf("Macintosh")>=0||zE.indexOf("iPad")>=0||zE.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,see=zE.indexOf("Linux")>=0,fnr=zE?.indexOf("Mobi")>=0,lit=!0):console.error("Unable to resolve platform.");var ixe=0;cee?ixe=1:aee?ixe=3:see&&(ixe=2);var gR=aee,dit=cee;var mnr=lit&&typeof YE.importScripts=="function",cai=mnr?YE.origin:void 0;var gC=zE;var hnr=typeof YE.postMessage=="function"&&!YE.importScripts,lai=(()=>{if(hnr){let t=[];YE.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),YE.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var gnr=!!(gC&&gC.indexOf("Chrome")>=0),uai=!!(gC&&gC.indexOf("Firefox")>=0),dai=!!(!gnr&&gC&&gC.indexOf("Safari")>=0),fai=!!(gC&&gC.indexOf("Edg/")>=0),pai=!!(gC&&gC.indexOf("Android")>=0);var AR,oxe=globalThis.vscode;if(typeof oxe<"u"&&typeof oxe.process<"u"){let t=oxe.process;AR={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?AR={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:AR={get platform(){return gR?"win32":dit?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var JO=AR.cwd,fit=AR.env,pit=AR.platform,Cai=AR.arch;var ynr=65,Cnr=97,Enr=90,vnr=122,vT=46,Ul=47,Yf=92,CT=58,xnr=63,lee=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function bnr(t,e){if(t===null||typeof t!="object")throw new lee(e,"Object",t)}s(bnr,"validateObject");function Wa(t,e){if(typeof t!="string")throw new lee(e,"string",t)}s(Wa,"validateString");var Kf=pit==="win32";function Ai(t){return t===Ul||t===Yf}s(Ai,"isPathSeparator");function sxe(t){return t===Ul}s(sxe,"isPosixPathSeparator");function ET(t){return t>=ynr&&t<=Enr||t>=Cnr&&t<=vnr}s(ET,"isWindowsDeviceRoot");function uee(t,e,r,n){let i="",o=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=Ul}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==vT||i.charCodeAt(i.length-2)!==vT){if(i.length>2){let f=i.lastIndexOf(r);f===-1?(i="",o=0):(i=i.slice(0,f),o=i.length-1-i.lastIndexOf(r)),a=u,c=0;continue}else if(i.length!==0){i="",o=0,a=u,c=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,c=0}else l===vT&&c!==-1?++c:c=-1}return i}s(uee,"normalizeString");function Inr(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(Inr,"formatExt");function mit(t,e){bnr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${Inr(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(mit,"_format");var Ga={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],Wa(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=JO():(o=fit[`=${e}`]||JO(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Yf)&&(o=`${e}\\`));let a=o.length,c=0,l="",u=!1,f=o.charCodeAt(0);if(a===1)Ai(f)&&(c=1,u=!0);else if(Ai(f))if(u=!0,Ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&Ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!Ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(l=`\\\\${h}\\${o.slice(m,p)}`,c=p)}}}else c=1;else ET(f)&&o.charCodeAt(1)===CT&&(l=o.slice(0,2),c=2,a>2&&Ai(o.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${o.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=uee(r,!n,"\\",Ai),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Wa(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return sxe(o)?"\\":t;if(Ai(o))if(i=!0,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else ET(o)&&t.charCodeAt(1)===CT&&(n=t.slice(0,2),r=2,e>2&&Ai(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?uee(t.slice(r),!i,"\\",Ai):"";return a.length===0&&!i&&(a="."),a.length>0&&Ai(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Wa(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return Ai(r)||e>2&&ET(r)&&t.charCodeAt(1)===CT&&Ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];Wa(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&Ai(r.charCodeAt(0))){++i;let o=r.length;o>1&&Ai(r.charCodeAt(1))&&(++i,o>2&&(Ai(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return Ga.normalize(e)},relative(t,e){if(Wa(t,"from"),Wa(e,"to"),t===e)return"";let r=Ga.resolve(t),n=Ga.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Yf;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Yf;)o--;let a=o-i,c=0;for(;c<e.length&&e.charCodeAt(c)===Yf;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===Yf;)l--;let u=l-c,f=a<u?a:u,p=-1,m=0;for(;m<f;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(c+m))break;g===Yf&&(p=m)}if(m!==f){if(p===-1)return n}else{if(u>f){if(e.charCodeAt(c+m)===Yf)return n.slice(c+m+1);if(m===2)return n.slice(c+m)}a>f&&(t.charCodeAt(i+m)===Yf?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Yf)&&(h+=h.length===0?"..":"\\..");return c+=p,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===Yf&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Ga.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Yf){if(e.charCodeAt(1)===Yf){let r=e.charCodeAt(2);if(r!==xnr&&r!==vT)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ET(e.charCodeAt(0))&&e.charCodeAt(1)===CT&&e.charCodeAt(2)===Yf)return`\\\\?\\${e}`;return t},dirname(t){Wa(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return Ai(i)?t:".";if(Ai(i)){if(r=n=1,Ai(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&Ai(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!Ai(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else ET(i)&&t.charCodeAt(1)===CT&&(r=e>2&&Ai(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let c=e-1;c>=n;--c)if(Ai(t.charCodeAt(c))){if(!a){o=c;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&Wa(e,"suffix"),Wa(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&ET(t.charCodeAt(0))&&t.charCodeAt(1)===CT&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=r;--o){let l=t.charCodeAt(o);if(Ai(l)){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(Ai(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Wa(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===CT&&ET(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(Ai(l)){if(!o){n=c+1;break}continue}i===-1&&(o=!1,i=c+1),l===vT?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:mit.bind(null,"\\"),parse(t){Wa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return Ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(Ai(i)){if(n=1,Ai(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&Ai(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!Ai(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(ET(i)&&t.charCodeAt(1)===CT){if(r<=2)return e.root=e.dir=t,e;if(n=2,Ai(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,c=-1,l=!0,u=t.length-1,f=0;for(;u>=n;--u){if(i=t.charCodeAt(u),Ai(i)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),i===vT?o===-1?o=u:f!==1&&(f=1):o!==-1&&(f=-1)}return c!==-1&&(o===-1||f===0||f===1&&o===c-1&&o===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,o),e.base=t.slice(a,c),e.ext=t.slice(o,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},Tnr=(()=>{if(Kf){let t=/\\/g;return()=>{let e=JO().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>JO()})(),pc={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:Tnr();Wa(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Ul)}return e=uee(e,!r,"/",sxe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Wa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=t.charCodeAt(t.length-1)===Ul;return t=uee(t,!e,"/",sxe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Wa(t,"path"),t.length>0&&t.charCodeAt(0)===Ul},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Wa(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":pc.normalize(e)},relative(t,e){if(Wa(t,"from"),Wa(e,"to"),t===e||(t=pc.resolve(t),e=pc.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,c=i<a?i:a,l=-1,u=0;for(;u<c;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Ul&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(o+u)===Ul)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>c&&(t.charCodeAt(r+u)===Ul?l=u:u===0&&(l=0));let f="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===Ul)&&(f+=f.length===0?"..":"/..");return`${f}${e.slice(o+l)}`},toNamespacedPath(t){return t},dirname(t){if(Wa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Ul,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Ul){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Wa(e,"ext"),Wa(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(o=t.length-1;o>=0;--o){let l=t.charCodeAt(o);if(l===Ul){if(!i){r=o+1;break}}else c===-1&&(i=!1,c=o+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ul){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){Wa(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===Ul){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),c===vT?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:mit.bind(null,"/"),parse(t){Wa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Ul,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let f=t.charCodeAt(l);if(f===Ul){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),f===vT?i===-1?i=l:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let f=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(f,a):(e.name=t.slice(f,i),e.base=t.slice(f,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};pc.win32=Ga.win32=Ga;pc.posix=Ga.posix=pc;var vai=Kf?Ga.normalize:pc.normalize,xai=Kf?Ga.isAbsolute:pc.isAbsolute,axe=Kf?Ga.join:pc.join,bai=Kf?Ga.resolve:pc.resolve,Iai=Kf?Ga.relative:pc.relative,Tai=Kf?Ga.dirname:pc.dirname,hit=Kf?Ga.basename:pc.basename,git=Kf?Ga.extname:pc.extname,wai=Kf?Ga.format:pc.format,_ai=Kf?Ga.parse:pc.parse,Sai=Kf?Ga.toNamespacedPath:pc.toNamespacedPath,Rai=Kf?Ga.sep:pc.sep,kai=Kf?Ga.delimiter:pc.delimiter;d();var dee=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};d();d();var cxe=class t{constructor(e){this.edits=e;xg(()=>b2(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new AC(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new AC(e,r)])}static insert(e,r){return new t([new AC(lr.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new AC(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=o.range.getEndPosition(),l=Pl.ofText(o.text);if(e.isBefore(c)){let u=new rn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),f=l.addToPosition(u);return fee(u,f)}a.lineNumber+r!==n&&(i=0),r+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?i+=l.columnCount-(c.column-1):i+=l.columnCount-(c.column-a.column):i=l.columnCount,n=c.lineNumber+r}return new rn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof rn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof rn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return fee(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new rn(1,1);for(let o of this.edits){let a=o.range,c=a.getStartPosition(),l=a.getEndPosition(),u=fee(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=l}let i=fee(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new uxe(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new AC(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=Pl.ofText(o.text),c=rn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new dn;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let c=this.edits[o+1],l=lr.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);i+=u}}return new AC(lr.fromPositions(r,n),i)}equals(e){return GM(this.edits,e.edits,(r,n)=>r.equals(n))}},AC=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new dn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.text,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new cxe([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=BI(r,n),o=Pl.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),c=lr.fromPositions(o,this.range.getEndPosition());return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=BI(r,n);r=r.substring(i),n=n.substring(i);let o=TE(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function fee(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return lr.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new dn("start must be before end");return new lr(t.lineNumber,t.column,e.lineNumber,e.column)}s(fee,"rangeFromPositions");var lxe=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new rn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new hC(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new lr(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Nm(e)}};var uxe=class extends lxe{constructor(r){super();this.value=r;this._t=new hC(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};var XO=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let l of e){let u=new t(new zr(o,l.original.startLineNumber),new zr(a,l.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new zr(o,r+1),new zr(a,n+1));return c.modified.isEmpty||i.push(c),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),c=o.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&i.push(new t(a,c))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new yC(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new dn("not a valid diff");return new yC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new yC(new lr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new lr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(yit(this.original.endLineNumberExclusive,e)&&yit(this.modified.endLineNumberExclusive,r))return new yC(new lr(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new lr(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new yC(lr.fromPositions(new rn(this.original.startLineNumber,1),fD(new rn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(new rn(this.modified.startLineNumber,1),fD(new rn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new yC(lr.fromPositions(fD(new rn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),fD(new rn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),lr.fromPositions(fD(new rn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),fD(new rn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new dn}};function fD(t,e){if(t.lineNumber<1)return new rn(1,1);if(t.lineNumber>e.length)return new rn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new rn(t.lineNumber,r.length+1):t}s(fD,"normalizePosition");function yit(t,e){return t>=1&&t<=e.length}s(yit,"isValidLineNumber");var pee=class t extends XO{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=zr.join(e.map(i=>zr.fromRangeInclusive(i.originalRange))),n=zr.join(e.map(i=>zr.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},yC=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new dn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new dn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new AC(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};var Eit=require("fs");var Jf=class{static{s(this,"DiffServiceImpl")}constructor(){this._worker=new Dm(()=>{let e=wnr([axe(__dirname,"diffWorker.js"),axe(__dirname,"../../../../../../../../dist/diffWorker.js")]);if(e===void 0)throw new Error("DiffServiceImpl: worker file not found");return new oee(e,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let i=await this._worker.value.proxy.computeDiff(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:Cit(i.changes),moves:i.moves.map(a=>new dee(new XO(new zr(a[0],a[1]),new zr(a[2],a[3])),Cit(a[4])))}}};function Cit(t){return t.map(e=>new pee(new zr(e[0],e[1]),new zr(e[2],e[3]),e[4]?.map(r=>new yC(new lr(r[0],r[1],r[2],r[3]),new lr(r[4],r[5],r[6],r[7])))))}s(Cit,"toLineRangeMappings");function wnr(t){for(let e of t)if((0,Eit.existsSync)(e))return e}s(wnr,"firstExistingPath");d();d();var _nr=Symbol("MicrotaskDelay");function Snr(t){let e=new bE,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new By)});Promise.resolve(r).then(c=>{a.dispose(),e.dispose(),i(c)},c=>{a.dispose(),e.dispose(),o(c)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(Snr,"createCancelablePromise");function KE(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new By)})}):Snr(r=>KE(t,r))}s(KE,"timeout");var pD=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new dn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new dn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var ZO=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new By)}},Rnr;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(c=>c,c=>{i||(i=c)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(Rnr||={});var e7=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new K0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await I2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var mee=class{constructor(e){this._deferred=new ZO;this._asyncIterable=new e7(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};d();var gee=new vt("repository"),JE=class t{static{s(this,"GitBranchData")}constructor(e,r=!1){this.currentBranch=e,this.isDetachedHead=r}static detachedHead(){return new t(void 0,!0)}static branch(e){return new t(e,!1)}},eh=class{static{s(this,"GitBranchLoader")}},hee=class extends eh{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackBranchLoader")}async getBranchInfo(r,n){for(let i of this.loaders){let o=await i.getBranchInfo(r,n);if(o)return o}}};var Aee=new vt("editSurvivalReporter"),dxe=class{constructor(e,r,n,i,o,a,c){this.ctx=e;this._document=r;this._documentTextBeforeMarkedEdits=n;this._documentTextAfterMarkedEdits=i;this._markedEdits=o;this._sendTelemetryEvent=a;this._customTimeouts=c;this._store=new hu;this._editSurvivalTracker=new dD(this._documentTextBeforeMarkedEdits,this._markedEdits),this.captureInitialBranchInfo().then(()=>{this.setupTimeouts()}).catch(()=>{this.setupTimeouts()})}static{s(this,"BaseEditSurvivalReporter")}setupTimeouts(){if(this._store.isDisposed)return;let e=this._customTimeouts||[30*1e3,120*1e3,300*1e3,600*1e3];for(let r=0;r<e.length;r++){let n=r===e.length-1;this.scheduleReport(e[r],n?()=>this._store.dispose():void 0,r===0)}}async report(e){let r=await this.createEditSurvivalResult(this._editSurvivalTracker,e,this._readDocumentTimeMs,this._diffComputationTimeMs);this._sendTelemetryEvent(r)}async triggerReport(e){await this.report(e)}get editSurvivalTracker(){return this._editSurvivalTracker}getInitializationTimings(){return{readDocumentTimeMs:this._readDocumentTimeMs,diffComputationTimeMs:this._diffComputationTimeMs}}async readCurrentDocument(){let e=await this.readCurrentDocumentWithTiming(this.ctx,this._document);return this._readDocumentTimeMs=e.readDocumentTimeMs,e.text}async captureInitialBranchInfo(){try{let e=Gu(this._document.uri),r=this.ctx.get(eh);this._initialBranchInfo=await r.getBranchInfo(this.ctx,e)}catch(e){Aee.warn(this.ctx,"Failed to capture initial branch info",e),this._initialBranchInfo=void 0}}async checkBranchChange(){try{let e=Gu(this._document.uri),n=await this.ctx.get(eh).getBranchInfo(this.ctx,e);if(!this._initialBranchInfo||!n)return 0;let i=this._initialBranchInfo.currentBranch,o=n.currentBranch,a=this._initialBranchInfo.isDetachedHead,c=n.isDetachedHead;return i!==o||a!==c?1:0}catch(e){return Aee.warn(this.ctx,"Failed to check branch change",e),0}}async createEditSurvivalResult(e,r,n,i){let o=e.computeTrackedEditsSurvivalScore(),a=await this.checkBranchChange();return{fourGram:o.fourGram,noRevert:o.noRevert,timeDelayMs:r,didBranchChange:a,currentFileContent:e.getCurrentText(),originalFileText:e.getOriginalText(),textAfterMarkedEdits:e.getTextAfterMarkedEdits(),debugLog:e.getDebugLog(),readDocumentTimeMs:n,diffComputationTimeMs:i}}async readCurrentDocumentWithTiming(e,r){let n=performance.now(),i=await e.get(mn).getOrReadTextDocument({uri:r.uri}),o=performance.now()-n;if(i.status!=="valid")throw new dn(`Document ${r.uri} is not valid, details ${JSON.stringify(i)}`);return{text:i.document.getText(),readDocumentTimeMs:o}}async computeDiffWithTiming(e,r,n){let i=performance.now(),o=await iee(r,n,e.get(Jf)),a=performance.now()-i;return{edits:o,diffComputationTimeMs:a}}};var yee=class extends dxe{static{s(this,"DiffBasedEditSurvivalReporter")}constructor(e,r,n,i,o,a,c){super(e,r,n,i,o,a,c)}scheduleReport(e,r){let n=new pD(()=>{this.updateAndReport(e).then(()=>{n.dispose(),r&&r()}).catch(i=>{Aee.error(this.ctx,`DiffBasedEditSurvivalReporter: Failed to update and report at ${e}ms`,i),n.dispose(),r&&r()})},e);this._store.add(n)}cancel(){this._store.dispose()}async updateAndReport(e){try{let r=await this.readCurrentDocument();if(r!==this._documentTextAfterMarkedEdits){let n=await this.computeDiffWithTiming(this.ctx,this._documentTextAfterMarkedEdits,r);this._diffComputationTimeMs=n.diffComputationTimeMs,this._editSurvivalTracker=new dD(this._documentTextBeforeMarkedEdits,this._markedEdits),this._editSurvivalTracker.handleEdits(n.edits)}else this._diffComputationTimeMs=void 0,this._editSurvivalTracker=new dD(this._documentTextBeforeMarkedEdits,this._markedEdits);await this.report(e)}catch(r){throw Aee.error(this.ctx,`Failed to update and report at ${e}ms for document ${this._document.uri}`,r),r}}};var vit=new vt("editSurvivalTrackerService"),CC=class{constructor(e){this.ctx=e}static{s(this,"EditSurvivalTrackerService")}initialize(e,r,n){vit.debug(this.ctx,`Initializing edit survival tracking for document uri: ${e.uri}`);let i;return{startReporter:s(o=>{(async()=>{try{let a=await iee(r,n,this.ctx.get(Jf));i=new yee(this.ctx,e,r,n,a,o)}catch(a){vit.error(this.ctx,`Failed to initialize EditSurvivalReporter: ${vE(a)}`,a)}})()},"startReporter"),cancel:s(()=>{i?.cancel()},"cancel")}}};d();var mc=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var knr=1e3,Pnr={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:pn.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},mD=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new vt("codeMapper")}async mapCode(e,r,n,i,o,a=!1){if(!e.resource)throw new mC("No uri found in code block");if(i.isCancellationRequested)throw new yT;e.code.includes(sl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let c=await this.ctx.get(mn).getOrReadTextDocument({uri:e.resource});if(c.status==="notfound")return o&&await this.reportCodeBlock(e,o),{code:e.code};if(c.status==="invalid"){let b=`Failed to find file ${e.resource} with status ${c.status} and reason ${c.reason}`,_=new mC(b);throw this.logger.error(this.ctx,b,_),_}let l=c.document.getText();if(l.length===0&&!e.code.includes(sl))return o&&await this.reportCodeBlock(e,o),{code:e.code};let u=new zO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new $E(this.ctx)}),f=this.ctx.get(CC),p=await u.render();p=u.transformToFastApplyMessage(p),o&&await o({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock});let m=await this.ctx.get(Bt).updateExPValuesAndAssignments(),h=ZZ(),g=[],y=0,E=0,x=l.length+e.code.length+knr;for(;;){let b={copilotApiProvider:"proxy",modelConfiguration:Pnr,messages:p,uiKind:a?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${h} in iteration ${E} with params: ${JSON.stringify(b,null,2)}`);let k=await this.ctx.get(ka).fetchResponse(b,i,m);if(this.logger.debug(this.ctx,`Received map code response ${h} in iteration ${E} with result: ${JSON.stringify(k,null,2)}`),y=this.calculateResponseLength(k,g,y),k.type==="length"){if(y>x)throw new mC(`Code mapper might be in a loop: Rewritten length: ${y}, Document length: ${l.length}, Code block length ${e.code.length}`);p=await new zO({documentContext:{document:c},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new $E(this.ctx),inProgressRewriteContent:k.truncatedValue}).render()}else if(k.type==="success"){let P=g.join("");if(P){o&&await o({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Oi(e.resource),partialText:P,languageId:c.document.detectedLanguageId,markdownCodeFence:lD(P)});let N=f.initialize(c.document,l,P);return{code:P,editSurvivalTrackingSession:N,telemetry:{requestSource:n.chatRequestSource,chatRequestModel:n.chatRequestModel,mapper:"gpt-4o-instant-apply-full-ft-v66",headerRequestId:k.requestId}}}else{let N=`No valid completion found for uri ${e.resource}`;throw new mC(N)}}else{if(k.type==="canceled")throw new mc;{let P=`Failed to map code for uri ${e.resource} with result type ${k.type}`;throw this.logger.error(this.ctx,P,k),new mC(P)}}E+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Oi(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Oi(e.resource)})}};d();var td=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};d();d();var xT=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return r||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};d();d();var Cee=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var bT=class{constructor(e,r){this.request=e;this.id=cr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},fxe=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},Eee=class{constructor(e=[],r="panel",n="en"){this._id=cr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new fxe(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new Cee(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var vee=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new td({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:xb,type:"user"},new td({message:xb});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new td({message:xT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new td({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new td({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new td({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new td({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new td({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new td({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new td({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new td({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};d();async function*bit(t){yield t}s(bit,"stringToAsyncIterable");d();d();var EC=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(pC),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),c=[...o,...a];return this.processInstructions(c,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};d();var XE=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||Kc(r)}static uriToPath(e){let r=ls(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var xee=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await EC.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(XE.posixFilePathToUri(e))}getFilePath(e){return XE.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${$O} ${this.exampleFilePath}`,`// ${sl}`,"{ changed code }",`// ${sl}`,"{ changed code }",`// ${sl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${$O} ${this.tsExampleFilePath}`,"class Person {",`   // ${sl}`,"   age: number;",`   // ${sl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new up({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${sl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};d();d();var bee=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var pxe="<file>",t7="```",n7="###",Dnr=/^(`+)([^ \n]*)/,r7="filepath:";async function*Tit(t,e){let r=new bee(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(t7.length,pxe.length,n7.length));if(y.startsWith(pxe)||y.startsWith(t7))break;if(y.startsWith(n7)){let E=await r.readLineIncludingLF(),x=E.substring(n7.length).trim();await e(x)?n.length=0:n.push(E)}else await Iit(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(pxe);for(;!r.endOfStream&&!i.startsWith(t7);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(Dnr),c=a?a[2]:void 0,l=KGe(c?zGe(c):void 0),u=[`${l.lineComment.start} ${r7}`,`:: ${r7}`,`<!-- ${r7}`,`// ${r7}`,`# ${r7}`],f=Math.max(...u.map(y=>y.length)),p=l.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(t7.length,f));if(y.startsWith(t7)){let E=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(E);continue}}if(!h&&u.some(E=>y.startsWith(E))){let E=await r.readLineIncludingLF(),x=u.reduce((b,_)=>y.startsWith(_)?E.substring(_.length):b,E);x=x.split("-->")[0].trim(),x.endsWith(p)&&(x=x.substring(0,x.length-p.length)),x=x.trim(),h=await e(x);continue}await Iit(r,g)}yield{resource:h,language:c,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(Tit,"getCodeBlocksFromResponse");async function Iit(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(Iit,"pipeOneLine");function wit(t){if(t.startsWith(`${n7} `))return"";let e=t.indexOf(`
${n7} `);return e===-1?"":t.substring(0,e)+`
`}s(wit,"parseOverallDescription");d();d();var Iee=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var Nnr=new vt("CopilotEditsConversations"),qc=class{constructor(e){this.editConversations=new Or(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new Eee([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&Nnr.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new Iee(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};d();d();var Pa=class{static{s(this,"ModelConfigurationProvider")}},Tee=class extends Pa{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Ur.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Bd).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Bd).getMetadata(),i=Mnr(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===pn.Gpt35turbo||r===pn.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:hxe(6144,i),maxResponseTokens:mxe(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===pn.Gpt4||r===pn.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:hxe(10240,i),maxResponseTokens:mxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===pn.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await Lnr(this.ctx,i),maxResponseTokens:mxe(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case WV.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function Lnr(t,e){let r=t.get(Bt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),hxe(i,e)}s(Lnr,"getExpRequestTokens");function hxe(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(hxe,"getRequestTokens");function mxe(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(mxe,"getResponseTokens");function Mnr(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(Mnr,"filterModelsByCapabilities");var Oo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(Pa).getBestChatModelConfig([n]);if(e.get(_m).quotaExhausted&&!(await e.get(Qr).getToken()).userInfo?.isFreeUser){let o=await e.get(Bd).getFallbackModel();if(o)return e.get(Pa).getBestChatModelConfig([o?.id])}return e.get(Pa).getBestChatModelConfig(fm(r),i)}static transformMessages(e,r){return r===pn.O1Ga||r===pn.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var ZE=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ka(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=vee.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof yT)await this.reportEnd(e,{message:xb});else if(n instanceof td)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Bt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await Oo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=Oo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await Oo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new xee({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new $E(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:xb,type:"user"},new yT;this.ctx.get(qc).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=bit(r),o=new mD(this.ctx),a=s(async u=>XE.pathToUri(e,u),"createUri"),c=[],l=wit(r);l&&await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:l}),await this.abortIfCancelled(e,n);for await(let u of Tit(i,a))c.push(o.mapCode(u,e.toLlmInteraction(),{chatRequestSource:e.editConversation.getSource()},n,async f=>{await this.ctx.get(xu).reportTurn(e,f)}));await Promise.all(c),c.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof mC||i instanceof Y3)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof yT)e.currentTurn.status="cancelled",e.currentTurn.response={message:xb,type:"user"},await this.reportEnd(e,{message:xb});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(xu).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};d();var hD=class extends bd{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(r,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(r,n){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(r,n);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&r.get(Qr).resetToken(),r.get(Ef).updateSessionConfig(o)}recalculateUrlDefaults(r,n){let{serverUrl:i,apiUrl:o}=Ib({serverUrl:ZW(r,n.serverUrl),apiUrl:ZW(r,n.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};d();var Xdi=new vt("exp");function _it(t){let e=t.get(Bt);e.registerStaticFilters(Qnr(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>vi(t,kt.DebugOverrideEngine)||vi(t,kt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>JW()?"copilot-web":t.get(nn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>gxe(!t.get(lo).isProduction()&&t.get(nn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(nn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Fnr(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(nn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>gxe(t.get(nn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Onr(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(nn).getRelatedPluginInfo()){let i=qp+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(A6).includes(i)){Lq(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=gxe(n.version)}return r})}s(_it,"setupExperimentationService");function Fnr(t){let e=t.get(nn).getEditorPluginInfo();return e.name==="copilot"&&sy(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Fnr,"getPluginRelease");function Onr(t){let e=t.get(nn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Onr,"getTargetPopulation");function Qnr(t){return Unr(t)}s(Qnr,"createAllFilters");function Unr(t){let e=t.get(As);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(lo).isProduction()?B_(t):"1.999.0"}}s(Unr,"createDefaultFilters");function gxe(t){return t.split("-")[0]}s(gxe,"trimVersionSuffix");d();var i7=(r=>(r.enabled="enabled",r.disabled="disabled",r))(i7||{}),ev=Symbol("onMCPToolsListChanged"),th=class{static{s(this,"McpManager")}};d();var Qg=class{static{s(this,"McpRuntimeNotifier")}},wee=class extends Qg{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};d();var gD=class{static{s(this,"AbstractCopilotMessageSender")}};d();d();d();var Axe=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},_ee=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new Axe(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let f of this._recentUserActions){let p=c-f.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=f.kind==="rejected"?1.5:.8;l*=1+(h-1)*m}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}};d();d();d();var Jo;(n=>{function t(i){return new yxe(i)}n.ok=t,s(t,"ok");function e(i){return new Cxe(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Jo||={});var yxe=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Cxe=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};d();d();var Sit=-1;function AD(){return Sit!==-1?Sit:Date.now()}s(AD,"now");function Rit(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(Rit,"lineRangeDistance");d();d();var rh=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new dn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Hc.fromJson))}static from(e){let r=e.map(i=>new Hc(Ht.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new Hc(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Hc(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return qnr(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Hc(Ht.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(Ht.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)a?c.replaceRange.intersects(a.replaceRange)?i++:c.replaceRange.start<a.replaceRange.start?(r.push(new Hc(c.replaceRange.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new Hc(c.replaceRange.delta(o),c.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Ht(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Ht(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},Hc=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Ht.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=BI(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,TE(r,this.newText)),o=new Ht(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function qnr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!c)n.push(new Hc(o.replaceRange.delta(-i),o.newText));else{let u="",f=o.replaceRange.start-(c.replaceRange.start+a);f>0&&(u=c.newText.slice(0,f));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Hc(Ht.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Ht(Math.min(c.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new Hc(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new rh(n).normalize()}s(qnr,"joinEdits");var Ys=class t{constructor(e){this.edits=e;kl(b2(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>ma.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([ma.replace(e,r)])}static insert(e,r){return new t([ma.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>ma.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,c)=>" ".repeat(c-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new rh(this.edits.map(e=>new Hc(e.range,e.newText)))}compose(e){return Hnr(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=ma.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=ma.replace(Ht.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(ma.replaceWithData(Ht.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new See(i)}if(this.edits.length!==e.arrayLength)throw WM(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let c=o;c<n.length;++c){let l=a.newText.length-a.range.length,u=n[c];n[c]=ma.replaceWithData(Ht.ofStartAndLength(u.range.start+l,u.range.length),u.newText,u.data)}}return new See(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new Ht(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(ma.replace(Ht.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],c=this.edits[i];if(c)if(!a)r.push(ma.replace(c.range.delta(o),c.newText)),i++;else{if(c.range.intersectsOrTouches(a.range))return;c.range.start<a.range.start?(r.push(ma.replace(c.range.delta(o),c.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function Hnr(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,c,l;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;c||(c=u),l=u,r.shift(),i+=u.newText.length-u.range.length}if(!c)n.push(ma.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-c.range.start;u>0&&n.push(ma.replaceWithData(Ht.emptyAt(c.range.start),c.newText.slice(0,u),c.data));let f=l.range.endExclusive+i-o.range.endExclusive;if(f>0){let m=ma.replaceWithData(Ht.emptyAt(l.range.endExclusive),l.newText.slice(-f),l.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new Ht(Math.min(c.range.start,o.range.start-a),o.range.endExclusive-i);n.push(ma.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return Ys.create(n).normalize()}s(Hnr,"joinEdits");var ma=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Ht(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new Ht(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new Ht(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Ys.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=Wnr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=Gnr(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function Wnr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(Wnr,"commonPrefixLength");function Gnr(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(Gnr,"commonSuffixLength");var rd=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return xg(()=>null.base.equals(this.base.apply(e))),xg(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return xC.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},See=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Ys.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new vC(this.edits.map(e=>e.toEdit()))}},vC=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Ys.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=Ys.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>Ys.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=Xo.fromEdit(new rd(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};d();var yD=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new tv(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>ma.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return Ys.create(r)}mapEdits(e){return new t(this.edits.map(e))}},tv=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new dn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let c=e[a];if(o+=c.newText,a<e.length-1){let l=e[a+1],u=lr.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),f=r.getValueOfRange(u);o+=f}}return new t(lr.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(lr.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(lr.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new lr(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return ma.replace(n,this.newText)}};var Xo=class t{constructor(e){this.edits=e;kl(b2(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Ug.deserialize(r)))}static fromEdit(e){let r=yD.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(o.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=tv.joinEdits(o,r);o.length=0;let f=Ug.fromSingleTextEdit(u,r);i.push(f)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(vI(n=>n.lineRange.startLineNumber,xI)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return Ys.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(zr.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new zr(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Ug(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,f){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";f===void 0&&(f="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${f}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let c of jM(this.edits,(l,u)=>Rit(l.lineRange,u.lineRange)<=5)){a?a=!1:i();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let m=Math.max(1,l);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let f=u.lineRange,p=u.newLines;for(let m of f.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,f.startLineNumber+o+m,"added",h)}l=f.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Ug(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Ug=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(zr.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Nm(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(lr.fromPositions(new rn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(lr.fromPositions(e.range.getEndPosition(),new rn(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,f=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&f&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new zr(i,a),n)}toLineEdit(){return new Xo([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new rn(o,a)}else n=new rn(1,1);let i=r.addToPosition(new rn(1,1));return new tv(lr.fromPositions(n,i),"")}else return new tv(new lr(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new tv(lr.fromPositions(new rn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new lr(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new tv(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return ma.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new zr(r,n),this.newLines.slice(i,this.newLines.length-o))}},jnr;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(jnr||={});var xC=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=Xo.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new rd(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Xo(r))}};d();var Ree=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw WM(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw WM(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};d();d();var C7=Ne(Gg());function jot(t){return t.map(zir).join(`
`)}s(jot,"stringifyChatMessages");function zir({role:t,content:e}){if(t!==C7.Raw.ChatRole.User&&t!==C7.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===C7.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==C7.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(zir,"stringifyMessage");d();d();var Yir=/^\w[\w\d+.-]*$/,Kir=/^\//,Jir=/^\/\//;function Xir(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Yir.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!Kir.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Jir.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(Xir,"_validateUri");function Zir(t,e){return!t&&!e?"file":t}s(Zir,"_schemeFix");function eor(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Vg&&(e=Vg+e):e=Vg;break}return e}s(eor,"_referenceResolution");var gs="",Vg="/",tor=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,NT=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||gs,this.authority=e.authority||gs,this.path=e.path||gs,this.query=e.query||gs,this.fragment=e.fragment||gs):(this.scheme=Zir(e,a),this.authority=r||gs,this.path=eor(this.scheme,n||gs),this.query=i||gs,this.fragment=o||gs,Xir(this,a))}get fsPath(){return fbe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=gs),n===void 0?n=this.authority:n===null&&(n=gs),i===void 0?i=this.path:i===null&&(i=gs),o===void 0?o=this.query:o===null&&(o=gs),a===void 0?a=this.fragment:a===null&&(a=gs),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new DT(r,n,i,o,a)}static parse(e,r=!1){let n=tor.exec(e);return n?new DT(n[2]||gs,nte(n[4]||gs),nte(n[5]||gs),nte(n[7]||gs),nte(n[9]||gs),r):new DT(gs,gs,gs,gs,gs)}static file(e){let r=gs;if(gR&&(e=e.replace(/\\/g,Vg)),e[0]===Vg&&e[1]===Vg){let n=e.indexOf(Vg,2);n===-1?(r=e.substring(2),e=Vg):(r=e.substring(2,n),e=e.substring(n)||Vg)}return new DT("file",r,e,gs,gs)}static from(e,r){return new DT(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return gR&&e.scheme==="file"?n=t.file(Ga.join(fbe(e,!0),...r)).path:n=pc.join(e.path,...r),e.with({path:n})}toString(e=!1){return pbe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new DT(e);return r._formatted=e.external??null,r._fsPath=e._sep===zot?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var zot=gR?1:void 0,DT=class extends NT{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=fbe(this,!1)),this._fsPath}toString(r=!1){return r?pbe(this,!0):(this._formatted||(this._formatted=pbe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=zot),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},Yot={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Vot(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let c=Yot[a];c!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=c):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(Vot,"encodeURIComponentFast");function ror(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=Yot[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(ror,"encodeURIComponentMinimal");function fbe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,gR&&(r=r.replace(/\//g,"\\")),r}s(fbe,"uriToFsPath");function pbe(t,e){let r=e?ror:Vot,n="",{scheme:i,authority:o,path:a,query:c,fragment:l}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Vg,n+=Vg),o){let u=o.indexOf("@");if(u!==-1){let f=o.substr(0,u);o=o.substr(u+1),u=f.lastIndexOf(":"),u===-1?n+=r(f,!1,!1):(n+=r(f.substr(0,u),!1,!1),n+=":",n+=r(f.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Vot(l,!1,!1)),n}s(pbe,"_asFormatted");function Kot(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+Kot(t.substr(3)):t}}s(Kot,"decodeURIComponentGraceful");var $ot=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function nte(t){return t.match($ot)?t.replace($ot,e=>Kot(e)):t}s(nte,"percentDecode");d();var $g=class t{constructor(e){this.uri=e;this._uri=NT.parse(Jc(this.uri))}static{s(this,"DocumentId")}static{this._cache=new IE({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return hit(this.uri)}get extension(){return git(this.uri)}toUri(){return this._uri}};var E7=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},ite=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new bE;this.liveDependentants=0;this.fetchIssued=!1;this._result=new ZO;kl(r.length>0),kl(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>v7.deserialize(r)),e.activeDocumentIdx,[],E7.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},v7=class t{constructor(e,r,n,i,o,a,c,l,u,f,p,m,h=i.length,g=new zr(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=c;this.recentEdits=l;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=f;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:zr.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new Bl(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t($g.create(e.id),e.workspaceRoot?NT.parse(e.workspaceRoot):void 0,S2.create(e.languageId),e.documentLinesBeforeEdit,Xo.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?lr.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new Bl(e.documentBeforeEdits),vC.deserialize(e.recentEdits),new Bl(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,zr.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Hi=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Jo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Jo.ok(e),i=r.build(n);return new t(n,i)}},LT=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?jot(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,c=e.isOk(),l=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:lF(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:c,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,kl(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function nor(t,...e){let r=t;for(let n of e)r=n(r);return r}s(nor,"chainStatelessNextEditProviders");var TD=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=nor(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},wD=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Hi(Jo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let c=Ree.createSortPermutation(a,vI(u=>u.lineRange.startLineNumber,xI)),l=new Xo(c.apply(a));return new Hi(Jo.ok({edit:l,permutation:c.inverse()}),n.telemetry)}},_D=class extends wD{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=i[a];if(c.trim()!==l.trim())return!1}return!0}},SD=class extends wD{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};d();d();var ior=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),oor=new Map(Object.entries(ior).map(([t,e])=>[t,{languageId:t,...e}]));function Xot(t){return mbe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(Xot,"getLanguage");function mbe(t){return oor.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(mbe,"_getLanguage");d();var RD=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?e0.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new e0(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new e0(new Ho(0,0),new Ho(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!e0.isRange(e))throw MT("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw MT("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw MT("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Ho=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw MT("line must be non-negative");if(r<0)throw MT("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw MT();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw MT();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},e0=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Ho.isPosition(e.start)&&Ho.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new Ho(e,r),a=new Ho(n,i)):Ho.isPosition(e)&&Ho.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Ho.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=Ho.Max(e.start,this._start),n=Ho.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=Ho.Min(e.start,this._start),n=Ho.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw MT();let n;return e?Ho.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return sor(this)}};function MT(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(MT,"illegalArgument");function sor(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(sor,"getDebugDescriptionOfRange");d();function Zot(t){let r=t.split(/\r?\n/).map(aor),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(Zot,"looksLikeCode");function aor(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),bAe(t)||(e+=1);{bAe(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(aor,"guessLineType");var kD;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(kD||={});function cor(t){return t.replace(/^\s+/g,"")}s(cor,"trimLeadingWhitespace");function hbe(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(hbe,"isImportStatement");var lor=new IE(t=>{let e=Xot(t),{start:r,end:n}=e.lineComment,i=`(?:${xAe(r)})`,o=n?`(?:${xAe(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function gbe(t,e){let r=t.match(lor.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=cor(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(gbe,"extractEndLineComment");function ste(t,e){let r=gbe(t,e);if(!(r&&r.content.trim().length>0&&Zot(r.commentWithoutTokens)))return r}s(ste,"extractExplicativeEndLineComment");var PD=class t extends wD{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>hbe(i,r))||uor(e,n).some(i=>hbe(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function uor(t,e){return cHe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(uor,"getOldLines");d();var ybe=Ne(Gg());d();d();d();var zg;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(zg||={});var wC=t0("instantiationService");function dor(t,e,r){e[zg.DI_TARGET]===e?e[zg.DI_DEPENDENCIES].push({id:t,index:r}):(e[zg.DI_DEPENDENCIES]=[{id:t,index:r}],e[zg.DI_TARGET]=e)}s(dor,"storeServiceDependency");function t0(t){if(zg.serviceIds.has(t))return zg.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");dor(e,r,i)},"id");return e.toString=()=>t,zg.serviceIds.set(t,e),e}s(t0,"createDecorator");d();d();var mp=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};d();var Abe=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},x7=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new Abe(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};d();var TR=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var por=!1,ate=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},cte=class t{constructor(e=new TR,r=!1,n,i=por){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(wC,this),this._globalGraph=i?n?._globalGraph??new x7(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,cY(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)EHe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=b7.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw sHe("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof mp?(n=b7.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=b7.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=zg.getServiceDependencies(e).sort((c,l)=>c.index-l.index),o=[];for(let c of i){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),o.push(l)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof mp)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof mp?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new x7(l=>l.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),i.lookupOrInsertNode(l),o++>1e3)throw new ate(i);for(let u of zg.getServiceDependencies(l.desc.ctor)){let f=this._getServiceInstanceOrDescriptor(u.id);if(f||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),f instanceof mp){let p={id:u.id,desc:f,_trace:l._trace.branch(u.id,!0)};i.insertEdge(l,p),a.push(p)}}}}for(;;){let l=i.roots();if(l.length===0){if(!i.isEmpty())throw new ate(i);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof mp){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof mp)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let c=this._createInstance(r,n,o);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var b7=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let c=[],l=new Array(o+1).join("	");for(let[u,f,p]of a._dep)if(f&&p){r=!0,c.push(`${l}CREATES -> ${u}`);let m=n(o+1,p);m&&c.push(m)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var lte=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new TR(...e):e??new TR}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new cte(this._collection,!0)}};var dte=t0("ITelemetrySender"),Yg=t0("IChatMLFetcher");var ute=class{constructor(){this._stream=new mee;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}},fte=t0("IEndpointProvider");d();var av=t0("IParserService");d();var BD=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},I7=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},T7=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},FT=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},OT=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var pte=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new BD(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},w7=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let f;return n<=i?(FT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),f=[new BD(e,0,n,i-n+1)]):e<=r?(FT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[new BD(e,r-e+1,n,0)]):(FT.Assert(e===r+1,"originalStart should only be one more than originalEnd"),FT.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),f=[]),f}let o=[0],a=[0],c=this.ComputeRecursionPoint(e,r,n,i,o,a),l=o[0],u=a[0];if(c!==null)return c;{let f=this.ComputeDiffRecursive(e,l,n,u),p=this.ComputeDiffRecursive(l+1,r,u+1,i);return this.ConcatenateChanges(f,p)}}WALKTRACE(e,r,n,i,o,a,c,l,u,f,p,m,h,g,y,E,x){let b=null,_=null,k=new pte,P=r,N=n,M=h[0]-E[0]-i,J=-1073741824,pe=this.m_forwardHistory.length-1;do{let Y=M+e;Y===P||Y<N&&u[Y-1]<u[Y+1]?(p=u[Y+1],g=p-M-i,p<J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g),M=Y+1-e):(p=u[Y-1]+1,g=p-M-i,p<J&&k.MarkNextChange(),J=p-1,k.AddOriginalElement(p,g+1),M=Y-1-e),pe>=0&&(u=this.m_forwardHistory[pe],e=u[0],P=1,N=u.length-1)}while(--pe>=-1);b=k.getReverseChanges(),k=new pte,P=a,N=c,M=h[0]-E[0]-l,J=1073741824,pe=x?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let Y=M+o;Y===P||Y<N&&f[Y-1]>=f[Y+1]?(p=f[Y+1]-1,g=p-M-l,p>J&&k.MarkNextChange(),J=p+1,k.AddOriginalElement(p+1,g+1),M=Y+1-o):(p=f[Y-1],g=p-M-l,p>J&&k.MarkNextChange(),J=p,k.AddModifiedElement(p+1,g+1),M=Y-1-o),pe>=0&&(f=this.m_reverseHistory[pe],o=f[0],P=1,N=f.length-1)}while(--pe>=-1);return _=k.getChanges(),this.ConcatenateChanges(b,_)}ComputeRecursionPoint(e,r,n,i,o,a){let c=0,l=0,u=0,f=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),E=new Int32Array(g),x=i-n,b=r-e,_=e-n,k=r-i,N=(b-x)%2===0;y[x]=e,E[b]=r;for(let M=1;M<=h/2+1;M++){let J=0,pe=0;u=this.ClipDiagonalBound(x-M,M,x,g),f=this.ClipDiagonalBound(x+M,M,x,g);for(let Y=u;Y<=f;Y+=2){Y===u||Y<f&&y[Y-1]<y[Y+1]?c=y[Y+1]:c=y[Y-1]+1,l=c-(Y-x)-_;let G=c;for(;c<r&&l<i&&this.ElementsAreEqual(c+1,l+1);)c++,l++;if(y[Y]=c,c+l>J+pe&&(J=c,pe=l),!N&&Math.abs(Y-b)<=M-1&&c>=E[Y])return o[0]=c,a[0]=l,G<=E[Y]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}p=this.ClipDiagonalBound(b-M,M,b,g),m=this.ClipDiagonalBound(b+M,M,b,g);for(let Y=p;Y<=m;Y+=2){Y===p||Y<m&&E[Y-1]>=E[Y+1]?c=E[Y+1]-1:c=E[Y-1],l=c-(Y-b)-k;let G=c;for(;c>e&&l>n&&this.ElementsAreEqual(c,l);)c--,l--;if(E[Y]=c,N&&Math.abs(Y-x)<=M&&c<=y[Y])return o[0]=c,a[0]=l,G>=y[Y]&&M<=1448?this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N):null}if(M<=1447){let Y=new Int32Array(f-u+2);Y[0]=x-u+1,OT.Copy2(y,u,Y,1,f-u+1),this.m_forwardHistory.push(Y),Y=new Int32Array(m-p+2),Y[0]=b-p+1,OT.Copy2(E,p,Y,1,m-p+1),this.m_reverseHistory.push(Y)}}return this.WALKTRACE(x,u,f,_,b,p,m,k,y,E,c,r,o,l,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return OT.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],OT.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return OT.Copy(e,0,i,0,e.length),OT.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(FT.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),FT.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,c=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(c=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new BD(i,o,a,c),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,c=r%2===0;if(e<0){let l=o%2===0;return c===l?0:1}else{let l=a%2===0;return c===l?i-1:i-2}}};d();d();function est(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(est,"isObject");function mte(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(mte,"assertType");function tst(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(est(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(tst,"safeStringify");var hte=!1,vbe=!0,mor=200,_7=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new LT(e),i=e.getActiveDocument(),o=wR(i);if(!o||!o.isEmpty())return Hi.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,c=i.recentEdit.apply(a),l=[];for(let _ of e.documents)_.id!==i.id&&(l.push(`RELATED DOC: ${_.getDisplayPath()}`),l.push("```patch"),l.push(...Cor(_)),l.push("```"),l.push(""));l.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...a),l.push("```"),l.push("");let u="// ...rest of the lines omitted...",f=new zr(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=f.endLineNumberExclusive){let _=p<c.length;l.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,p)),_&&(l.push(u),m={editRange:new zr(f.endLineNumberExclusive,p+1),omittedMessage:u}),l.push("```"),l.push("")}l.push(`NEXT VERSION: ${i.getDisplayPath()}`),l.push("```"),l.push(...c.slice(0,f.endLineNumberExclusive-1)),l.push("");let h=c.slice(f.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(l.join(`
`),h,r);if(r.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Hi.noEdit({kind:"fetchFailure",error:new Error(tst(g.err))},n);let{result:y,ttft:E}=g.val;if(E!==void 0&&n.setTtft(E),y.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},n);let x=gte(i.languageId,c,f,void 0,y,m),b=await Ibe(this._parserService,x,i,{requireEditWithinNLines:5});if(b){let _=new Xo([b]);return Hi.edit({edit:_},n)}else return Hi.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};_7=yd([na(1,av)],_7);var DD=class extends _7{constructor(r,n){super(DD.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Jo.error({kind:"cancel"});let o=await xbe(this.ID,this._chatMLFetcher,[{role:ybe.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:ybe.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:c,ttft:l}=o.val;return c=c.replace(/^```[^\n]*\n/,""),Jo.ok({ignored:a,result:c,ttft:l})}};DD=yd([na(0,av),na(1,Yg)],DD);async function xbe(t,e,r,n,i){let o=new ute,a=!1,c,l=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=gor(l,n),f=e.fetchOne(r,async(y,E,x)=>(typeof c>"u"&&(c=Date.now()),o.update(y,x),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await f}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await f;return g.type!=="success"?Jo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Jo.ok({ttft:c,ignored:p,result:m})}s(xbe,"fetchUntilConvergence");function wR(t){let e=new Ht(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:hor(t)}s(wR,"getOrDeduceSelectionFromLastEdit");function hor(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new lr(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],c=TE(a,o),l=o.length-c+1;return new lr(i,l,i,l)}s(hor,"deduceSelectionFromLastEdit");async function gor(t,e){let r=Aor(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),c=[],l=[],u=[],f=[],p=s(m=>{let h=l[0];return{ignored:c[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){c[m.index]=(c[m.index]??"")+m.text;continue}let h=m.text;if(l[m.index]=l[m.index]??"",l[m.index]+=h,f[m.index]=f[m.index]??"",f[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=l[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let x=f[m.index].substring(f[m.index].length-o);if(a.indexOf(x)>0)return p("convergence!")}return{ignored:c[0]??"",result:l[0]??"",shouldCancelRequest:!1}}s(gor,"fetchCompletionUntilConvergence");function Aor(t,e){let r=[],n=[];return new e7(async i=>{for await(let o of t)for(let a of o.choices){let c=a.index,l=a.text??"";if(!e||r[c]){i.emitOne({kind:"completion",index:c,text:l});continue}n[c]=(n[c]??"")+l;let u=n[c].match(e);!u||typeof u.index>"u"||(r[c]=!0,i.emitOne({kind:"ignore",index:c,text:n[c].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[c].substring(u.index+u[0].length)}),n[c]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(Aor,"getTextAfterFirstPattern");function yor(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],c=o[o.length-1];if(a!==c)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],c=o[0];if(a!==c)break;n++,o.shift()}return new Ug(new zr(n,i),o)}s(yor,"createReducedLineEdit");var ND=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=yor(r,n,i);let o=new Xo([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,c){for(let l=0;l<Math.min(a.length,c.length);l++)if(a[l]!==c[l])return l;return Math.min(a.length,c.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),E=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),x=y.join(`
`),b=E.join(`
`),{editDistance:_}=f(x,b);return new Cbe(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new I7(this.oldLines,n),o=new I7(this.newLines,n),a=new w7(i,o),c=e(a.ComputeDiff(),i,o),l=r(c),u=[];{let p=0;for(let m of c)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(GM(this.newLines,u))return new Ebe(this.languageId,this.oldLines,this.edit,this.newLines,c,l);return nst(this.languageId,this.oldLines,u);function f(p,m){let h=new T7(p),g=new T7(m),E=new w7(h,g).ComputeDiff(),x=0,b=0;for(let N of E)x+=N.originalLength,b+=N.modifiedLength;let _=p.length,k=m.length,P=x+b;return{aChanged:x,bChanged:b,aLength:_,bLength:k,editDistance:P}}}},Cbe=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Ebe=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Xo([this.edit]);{let r=this.groupInHunks();return new Xo(r.map(n=>{let i=n[0],o=n[n.length-1];return new Ug(new zr(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!vbe)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,c)=>a+c.editDistance,0)>mor&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,c=o.originalStart+o.originalLength+1;if(!bbe(new zr(a,c),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((l,u)=>l+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new Xo([this.edit]),i=r(n);this.parseErrorCount=await S7(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],c=i[o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+o,1),e(f)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],c=i[i.length-o],l=a.trim().length===0,u=c.trim().length===0;if(!(l&&u)){if(!l&&!u)break;if(l){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(f)}if(u){let f=this.newLines.slice(0);return f.splice(r.modifiedStart+r.modifiedLength-o,1),e(f)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:c,newDiffModifiedLines:l}=this._eliminateCommentsDiff(o,a);n=n||c,e=e.concat(l),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let l=!1,u=!1;for(let f of e){if(f.trim().length===0)continue;let p=ste(f,this.languageId);p&&p.content.trim().length===0?l=!0:u=!0}if(l&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(l=>ste(l,this.languageId)),i=r.map(l=>ste(l,this.languageId)),o=n.filter(l=>!!l).length,a=i.filter(l=>!!l).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let c=!1;for(let l=0;l<r.length;l++){let u=r[l],f=i[l];if(!f)continue;let{content:p}=f;r[l]=u.substring(0,p.length).trimEnd(),c=!0}return{hasChanges:c,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return nst(this.languageId,this.oldLines,e)}};function bbe(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(bbe,"editIsInsideEditWindow");function nst(t,e,r){let i=e.length+1,o=r.slice(0);return new ND(t,e,new zr(1,i),o).resolveDiff()}s(nst,"createPossibleEditFromLines");function gte(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=kD.fromString(i.trimEnd()),c=o?a.some(E=>E.indexOf(o.omittedMessage)>=0):!1,l=[],u=s((E,x)=>{l.push(new ND(t,e,E,x))},"generateEdit");function f(){n&&u(n,a)}s(f,"generateEditCompletionRange");function p(){if(c)return;let x=new zr(r.endLineNumberExclusive,e.length+1);x.length>a.length+5||u(x,a)}s(p,"generateEditAllDoc");function m(){for(let E=1;E<a.length;E++){let b=a.slice(a.length-E).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let P=e.slice(_,_+E).join(`
`);b===P&&u(new zr(r.endLineNumberExclusive,_+1),a.slice(0,a.length-E))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!c)return;let E=[];for(let x of a){if(x.indexOf(o.omittedMessage)>=0){u(o.editRange,E.map(b=>b));return}E.push(x)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),f(),h(),p(),m(),!i.endsWith(`
`)){let E=i.substring(0,i.lastIndexOf(`
`)+1);l.push(...gte(t,e,r,n,E,o))}return g(l);function g(E){return y(E,s(b=>b.edit.lineRange.startLineNumber+","+b.edit.lineRange.endLineNumberExclusive+","+b.edit.newLines.join("|"),"keyfn"))}function y(E,x){let b=new Set,_=[];for(let k of E){let P=x(k);b.has(P)||(b.add(P),_.push(k))}return _}}s(gte,"generatePossibleEdits");async function Ibe(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),c=hte?await S7(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(hte){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let l=a.filter(p=>c==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=c),u=l.length>0?l:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let f=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>f(p)-f(m)),u.length>0?u[0].edit:null}s(Ibe,"selectBestEdit");function Cor(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,c=s((l,u)=>{l>a+1&&r.push("[...]"),u?r.push(`-${n[l]}`):r.push(`${n[l]}`),a=l},"addOldLineIndex");for(let l of t.recentEdit.edits){for(;i<l.lineRange.startLineNumber-1;)Math.min(l.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&c(i,!1),i++;for(;i<l.lineRange.endLineNumberExclusive-1;)c(i,!0),i++;r.push(l.newLines.map(u=>`+${u}`).join(`
`)),o=l.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&c(i,!1),i++;return r.push("[...]"),r}s(Cor,"summariseDocDiff");function ist(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(ist,"summarizeEditsAsUnifiedDiff");async function S7(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(S7,"getParseErrorCount");d();var cv=Ne(Gg());d();var R7=t0("ITokenizerProvider");var QT=class extends cv.PromptRenderer{constructor(r,n,i={validate:!0},o,a,c){let l=o.acquireTokenizer({tokenizer:c.tokenizerName}),u={modelMaxPromptTokens:c.tokenBudget};super(u,r,n,l);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let c=a.get(R7);return new QT(n,i,o,c,r,a.get(Yg))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let l=1;l<o.messages.length;l++){let u=o.messages[l],f=o.messages[l-1];if(u.role===cv.Raw.ChatRole.System&&f.role===cv.Raw.ChatRole.System){let p=f.content.at(-1),m=u.content.at(0);p&&m&&p.type===cv.Raw.ChatCompletionContentPartKind.Text&&m.type===cv.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,f.content=f.content.concat(u.content.slice(1))):(f.content.push({type:cv.Raw.ChatCompletionContentPartKind.Text,text:`
`}),f.content=f.content.concat(u.content)),o.messages.splice(l,1),l--}}let c=o.messages[o.messages.length-1];if(this.options.validate&&c&&c.role!==cv.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};QT=yd([na(3,R7),na(4,wC),na(5,Yg)],QT);d();var ost=Ne(Gg());var Ate=class extends ost.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};d();var Tbe=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Ht(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new e0(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},Kg=class extends Tbe{constructor(r){super();this.value=r;this._transformer=new hC(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new rn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return Eor(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(vor(r))}_validatePosition(r){if(r.line<0)return new Ho(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new Ho(n-1,o)}if(r.character<0)return new Ho(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new Ho(r.line,i):r}};function Eor(t){return new Ho(t.lineNumber-1,t.column-1)}s(Eor,"corePositionToVSCodePosition");function vor(t){return new rn(t.line+1,t.character+1)}s(vor,"vsCodePositionToCorePosition");d();d();function sst(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(sst,"min");d();function wbe(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>wbe(n,e))}}s(wbe,"toAstNode");function ast(t,e){let r=h3(e,a=>a.endExclusive>=t.start),n=yg(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let c=e[a];c.start>o&&i.push(new Ht(o,c.start)),o=c.endExclusive}return o<t.endExclusive&&i.push(new Ht(o,t.endExclusive)),i}s(ast,"subtractRange");d();d();d();var yte=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=R2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=R2(e),r=R2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=R2(e),r=R2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=R2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new _be(i,e-a)}};var _be=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var k7=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Nm(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new yte(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Nm(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Ho(r.index,Math.min(r.remainder,n))}toRange(e){return new e0(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Ht(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new RD(this.validateRange(n.range),n.newText));return new rh(r.map(n=>new Hc(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new RD(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof Ho))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Ho(r,n):e}validateRange(e){return new e0(this.validatePosition(e.start),this.validatePosition(e.end))}};var Cte=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Dm(()=>new k7(this.text));this._originalPositionOffsetTransformer=new Dm(()=>new k7(this.originalText));this._text=new Dm(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var Sbe=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},SR=class extends Cte{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function vte(t,e,r){let n=[],i=[],o=[];for(let c=0;c<r.length;c++){let{document:l,overlayNodeRoot:u,selection:f}=r[c],p=l.getText(),m=f?l.rangeToOffsetRange(f):void 0,h=cst(u,l),g=Rbe.fromRootNode(h,p),y=kbe.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(M=>M.node.range.intersectsOrTouches(m)?(M.node.children.length===0&&M.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let E=s(M=>m?M.range.endExclusive<m.start?m.start-M.range.endExclusive:M.range.start>m.endExclusive?3*(M.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),x=new IE(M=>m?M.children.length===0?M.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:sst(M.children.map(J=>x.get(J)))+1:0),b=new IE(M=>{let J=M.parent?b.get(M.parent):Number.MAX_SAFE_INTEGER,pe=x.get(M);return Math.min(J,pe)}),_=!!e.tryPreserveTypeChecking,k=s(M=>_&&M.node?.kind==="import_statement"?0:100*b.get(M)+M.depth+10*(E(M)/p.length),"costFn"),P=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(l):e.costFnOverride;if(P!==void 0){let M=k;k=s(J=>{let pe=M(J);return pe===!1?!1:J.node?P(J.node,pe,l):pe},"costFn")}let N=y.getDescendantsAndSelf();for(let M of N){if(!M.node.node)continue;let J=k(M.node);J!==!1&&o.push({idx:c,node:M,cost:J})}}o.sort(vI(c=>c.cost,xI));for(let{node:c,idx:l}of o){if(c.markAsSurviving(),n.reduce((f,p)=>f+p.getTextFragment().length,0)>t)break;i[l]=n[l].getTextFragment()}let a=[];for(let c=0;c<i.length;c++){let l=i[c],{document:u}=r[c],f=new SR(u,l.toTextEditFromOriginal(u.getText().length)),p=f,m=n[c];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:f.originalText,decorations:ast(Ht.ofLength(f.originalText.length),f.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:wbe(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(f)}return a}s(vte,"summarizeDocumentsSyncImpl");function cst(t,e,r=void 0){let n=new Ht(t.startIndex,t.endIndex),i=[],o=new Sbe(r,t,n,i,e);for(let a of t.children)i.push(cst(a,e,o));return o}s(cst,"createRemovableNodeFromOverlayNode");var Rbe=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new Ht(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new Ht(0,e.range.start),o=new Ht(e.range.endExclusive,r.length),a=[],c=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,c,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,c,r)),c}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let c=e.range.start;for(let u of e.children){let f=new Ht(c,u.range.start);f.isEmpty||o.push(new t(void 0,f,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),c=u.range.endExclusive}let l=new Ht(c,e.range.endExclusive);l.isEmpty||o.push(new t(void 0,l,[],n,a,r))}return a}getLeadingWs(){return xor(this.document,this.range)}getTrailingWs(){return bor(this.document,this.range)}};function xor(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(xor,"getLeadingWs");function bor(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(bor,"getTrailingWs");var kbe=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let c of e.children){let l=t.fromNodeParent(c,a,n,i);o.push(l)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new UT(this.node.range,this.node.document);if(!this._surviving)return new _R("");let e=Array.from(jM(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),c=e[n+1].at(0);if(a.fragment instanceof UT&&c.fragment instanceof UT){let l=a.fragment.trimEnd(),u=c.fragment.trimStart();if(l.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=l,i.length=1,i[0].fragment=new _R(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),c=a.lastIndexOf(`
`);c!==-1&&(a=a.substring(c+1));let l=i.at(-1).node.node.getTrailingWs();i[0].fragment=new _R(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+l)}}let r=[];for(let n of e)for(let i of n)Ior(r,i.fragment);return Ete.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},P7=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(c){(n!==c||i.length>0)&&(r.push(new Hc(new Ht(n,c),i)),i="")}s(o,"emit");function a(c){if(c instanceof Ete)for(let l of c.fragments)a(l);else c instanceof _R?i+=c.text:c instanceof UT&&(o(c.range.start),n=c.range.endExclusive)}return s(a,"process"),a(this),o(e),new rh(r)}},_R=class extends P7{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},UT=class t extends P7{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new Ht(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new Ht(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new Ht(this.range.start,r.range.endExclusive),this.originalText):null}},Ete=class t extends P7{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new _R(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function Ior(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof UT&&e instanceof UT){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(Ior,"pushFragment");d();var xte=Ne(Gg());function B7(t){if(Array.isArray(t))return t.map(r=>B7(r));let e=(0,xte.toMode)(xte.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(B7,"rawMessageToCAPI");d();d();var bte=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new dn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new dn("Invalid child startIndex");if(a.endIndex>r)throw new dn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function ust(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=Tor(o,e),[c]=dst(t,a,void 0);return c.adjust(t,fst(e)),c.toOverlayNode(t,!0)}catch{return new Ite(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(ust,"getStructureUsingIndentation");function dst(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let c=e.getStartLineNumber(r),l=e.getEndLineNumber(r);if(c>i||l>i)break;let u=a;if([a,r]=dst(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new dn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new dn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Ite(n,i,o),r]}s(dst,"createFoldingRangeTree");var Ite=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new dn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let c=Pbe(e,a,a,"LINE",[]);c&&n.push(c)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Pbe(e,o,o,"LINE",[]);a&&n.push(a)}return Pbe(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Pbe(t,e,r,n,i){let o=t.getOffsetAtPosition(new Ho(e-1,0)),a=r<t.getLineCount()?new Ho(r,0):new Ho(r-1,t.getLineLength(r-1)),c=t.getOffsetAtPosition(a);return new bte(o,c,n,i)}s(Pbe,"createOverlayNode");function Tor(t,e){return wor(t,fst(e))}s(Tor,"generateFoldingRegions");function fst(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(fst,"isOffSide");function wor(t,e){let r=t.getOptions().tabSize,n=new Bbe,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let c=t.getLineContent(a),l=Sor(c,r),u=i[i.length-1];if(l===-1){e&&(u.endAbove=a);continue}if(u.indent>l){do i.pop(),u=i[i.length-1];while(u.indent>l);let f=u.endAbove-1;f-a>=1&&n.insertFirst(a,f,l)}u.indent===l?u.endAbove=a:i.push({indent:l,endAbove:a,line:a})}return n.toIndentRanges()}s(wor,"_computeRanges");var _or=65535,RR=16777215,lst=4278190080,Bbe=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>RR||r>RR)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new Dbe(e,r)}};function Sor(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(Sor,"computeIndentLevel");var Dbe=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>RR||a>RR)throw new Error("startLineNumber or endLineNumber must not exceed "+RR);for(;e.length>0&&!r(o,a);)e.pop();let c=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((c&255)<<24),this._endIndexes[n]=a+((c&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&RR}getEndLineNumber(e){return this._endIndexes[e]&RR}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&lst)>>>24)+((this._endIndexes[e]&lst)>>>16);return r===_or?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};d();function kR(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(kR,"fromUnknown");var al=Ne(Gg());var Tte="current-version",hp="next-version",mst=2,hst=10,gst=.7,Ror=/```[^\n]*\n/,lv=class extends TD{constructor(r,n,i){super(lv.ID,[o=>new PD(o),o=>new _D(o),o=>new SD(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new _ee}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let c=i.get(a.id);if(!c||!o(c,a))return!1}return!0;function o(a,c){if(a.documentAfterEditsNoShortening.value!==c.documentAfterEditsNoShortening.value)return!1;let l=wR(a),u=l?Nbe(a,l):null,f=wR(c),p=f?Nbe(c,f):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(mst,hst)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new LT(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(l){return Hi.noEdit({kind:"unexpected",error:kR(l)},i)}let c=o.getArtificalDelay();return c>0&&await KE(c),a}async doGetNextEdit(r,n,i,o){return r.documents.some(l=>{if(l.recentEdit.edits.length===0)return!1;for(let u of l.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Hi.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Hi.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Hi.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Hi.noEdit(k,o)}let{summarizedEditWindow:c,editWindowAllowedEditLineRange:l,allowedEditLineRange:u,maxCompletionLineCount:f,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:E}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let x=await xbe(this.ID,this.fetcher,B7(p),{convergence:g,ignoreReplyTextBefore:Ror,maxCompletionLineCount:f,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(x.isOk()?"success":x.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),x.isOk()&&typeof x.val.ttft=="number"&&o.setTtft(x.val.ttft),i.isCancellationRequested)return Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(x.isError())return x.err.kind==="cancel"?Hi.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Hi.noEdit({kind:"fetchFailure",error:kR(x.err.err)},o);let b=x.val.result;if(b.length===0){let k=`<${hp}>
`,P=x.val.ignored.indexOf(k);P>=0&&(b=x.val.ignored.substring(P+k.length))}if(b=kor(b),b.trim().length===0)return Hi.noEdit({kind:"noSuggestions"},o);let _;if(c&&l&&u){let k=Por(y,c,l,b);if(!k||k.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let P=Bor(c,k);if(P.edits.length===0)return Hi.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(hte){let J=await S7(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),pe=P.apply(y.documentAfterEditsNoShortening.value);if(await S7(this._parserService,y.languageId,pe)>J)return Hi.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=Dor(y,P);let N=_.edits[0].lineRange.startLineNumber,M=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!bbe(new zr(N,M),u))return Hi.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=gte(y.languageId,E,m,h,b,void 0),P=await Ibe(this._parserService,k,y,{requireEditWithinNLines:100});if(!P)return Hi.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Xo([P])}return Nor(y,_)?Hi.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):Lor(y,_)?Hi.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):Mor(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):For(y,_)?Hi.noEdit({kind:"filteredOut",message:"uncategorized"},o):Hi.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await KE(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,c=i.documentAfterEdits.value.split(a),l=wR(i);if(l===null)return;let u=Nbe(i,l),f=new Kg(i.documentAfterEditsNoShortening.value),p=await Uor(this._parserService,{getText:s(()=>f.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let pe=Oor(i.documentAfterEditsLines,l.startLineNumber),Y=Math.max(1,Math.min(pe,l.startLineNumber-mst)),G=l.startLineNumber-Y,H=Math.min(c.length,l.endLineNumber+hst),ce=H-l.endLineNumber,ie=u.line-G,V=u.line+ce,Q=new e0(ie,0,V,f.getLineLength(V));return{firstEditableLineInShortenedDocument:Y,lastEditableLineInShortenedDocument:H,editWindow:Q}}(),y=vte(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:f,selection:g}])[0],E=new zr(1,m),x=new zr(m,h+1),b=y.text,{messages:_,prediction:k,editWindowIsInPrompt:P}=await this._renderPrompt({request:r,activeDocumentSlice:b,languageId:i.languageId},n),N=b.split(/\r\n|\r|\n/).length,M=y.projectRange(g),J=y.positionOffsetTransformer.toOffsetRange(M);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new zr(M.start.line+1,M.end.line+2),allowedEditLineRange:new zr(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:P,activeDocument:i,activeDocumentLines:c,completionPrefixRange:E,completionRange:x,convergence:b,expectedConvergencePrefix:J.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await QT.create(this._instantiationService,Mbe,r).render(void 0,n,{trace:!1}),a=o.metadata.get(kte)?.prediction,c=!!o.metadata.get(_te);return{messages:o.messages,prediction:a,editWindowIsInPrompt:c}}};lv=yd([na(0,Yg),na(1,av),na(2,wC)],lv);function kor(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${hp}>`,`
`),t=e(t,`\`\`\`
</${hp}>`,`
`),t=e(t,`</${hp}>`,`
`),t}s(kor,"removeSuffixFromReply");function Nbe(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new Kg(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Nbe,"getCursorPositionInOuterDocument");function Por(t,e,r,n){let i=kD.fromString(e.text),o=kD.fromString(n.trimEnd()),c=new ND(t.languageId,i,new zr(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),l=e.isOriginal?c:c.containWithinLines(r);if(!l)return null;let u=vbe?l.eliminateLargeChangeHunks():l;return u?u.toLineEdit("multiple-hunks"):null}s(Por,"generateSummarizedEditWindowEdit");function Bor(t,e){let r=e.toEdit(new Bl(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(Bor,"convertSummarizedEditWindowEditToOuterDocumentEdit");function Dor(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return ma.replace(new Ht(a,a+i.replaceRange.length),i.newText)}),n=new rd(t.documentAfterEdits,Ys.create(r));return Xo.fromEdit(n)}s(Dor,"convertOuterDocumentEditToProjectedEdit");function Nor(t,e){let r=e.toEdit(t.documentAfterEdits),n=Ast(t.documentAfterEdits.value,r),i=new wte,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(Ast(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(Nor,"editWouldUndo");function Lor(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!xst(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(Lor,"editWouldDeleteWhatWasJustInserted");function Mor(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!xst(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(gbe(i,t.languageId))return!0}return!1}s(Mor,"editWouldDeleteAComment");function For(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(c=>c.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Lbe(o,i)/i.size>.8}s(For,"editWouldDuplicateExistingLines");function xst(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(xst,"editIsDeletion");function Oor(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(Oor,"findLineNumberAboveWithContent");var wte=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(Cst(this.inserted,e.inserted),Cst(this.deleted,e.deleted))}isUndoneBy(e){let r=Est(e.inserted,e.deleted),n=Est(e.deleted,e.inserted),i=Lbe(n,this.inserted),o=Lbe(r,this.deleted);return n.size>6&&i/n.size>gst||r.size>6&&o/r.size>gst}};function Ast(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let c=t.substring(a.start,a.endExclusive);for(let l of c.split(/\r\n|\r|\n/)){l=l.trim();for(let u of yst(l))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let c of a.split(/\r\n|\r|\n/)){c=c.trim();for(let l of yst(c))r.add(l)}},"tryAddInserted");for(let a of e.edits){let c=a.removeCommonPrefix(t).removeCommonSuffix(t),l=a.removeCommonSuffix(t).removeCommonPrefix(t);c.isNeutral()||(i(c.range),i(l.range),i(c.range.intersect(l.range)),o(Qor(c.newText,l.newText)))}return new wte(r,n)}s(Ast,"getInformationDelta");function Qor(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(Qor,"trimOverlap");function yst(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(yst,"to4grams");function Cst(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(Cst,"setUnion");function Est(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(Est,"setMinus");function Lbe(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Lbe,"setIntersectionCount");async function Uor(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||ust(new Kg(e.getText()),e.languageId,void 0)}s(Uor,"getStructure");var Mbe=class extends al.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${hp}>`,`\`\`\`${o}`,`${i}`,"```",`</${hp}>`].join(`
`),c=(0,al.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new kte(a)}),vscpp(al.SystemMessage,{priority:1e3},vscpp(Ate,null),this._getInstructions()),vscpp(al.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp(Ste,{doc:l}))):vscpp(al.Chunk,{priority:100+u},vscpp(Ste,{doc:l}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((l,u)=>l.id===n.getActiveDocument().id?vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp(Rte,{doc:l}))):vscpp(al.Chunk,{priority:200+u},vscpp(Rte,{doc:l}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(c,{priority:300},vscpp(al.Chunk,{priority:300},vscpp("meta",{local:!0,value:new _te}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Tte,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Tte,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Tte,"> and </",Tte,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",hp,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",hp,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",hp,">IDENTICAL</",hp,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",hp,">.")}}},_te=class extends al.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Ste=class extends al.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Rte=class extends al.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...ist(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},kte=class extends al.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};d();d();function bst(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(bst,"findIndexes");function qor(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=bst(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let c=0;for(;e.length&&e[c].trim()==="";)c++;let l=[...e],f=bst(t,e[c]).slice(-n).reverse();for(let p of f){let m=!1,h=c;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...l]}return e}s(qor,"deduplicateEditRegion");function Ist(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:qor(i,r.split(/\r?\n/),o).join(`
`)}}s(Ist,"postProcessUpdatedEditWindow");d();var Pte=Ne(Gg());function Tst(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Pte.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Pte.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(Tst,"getTextPart");function Hor(t){return{type:Pte.Raw.ChatCompletionContentPartKind.Text,text:t}}s(Hor,"toTextPart");function Fbe(t){return[Hor(t)]}s(Fbe,"toTextParts");d();var Bte=t0("IDiffService");var Hbe=Ne(Gg());d();var Dte="<|cursor|>",PR="<|code_to_edit|>",LD="<|/code_to_edit|>",_st="<|area_around_code_to_edit|>",Sst="<|/area_around_code_to_edit|>",Wor="<|current_file_content|>",Gor="<|/current_file_content|>",jor="<|edit_diff_history|>",Vor="<|/edit_diff_history|>",$or="<|recently_viewed_code_snippets|>",zor="<|/recently_viewed_code_snippets|>",Yor="<|recently_viewed_code_snippet|>",Kor="<|/recently_viewed_code_snippet|>",Rst=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${PR} and ${LD} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Dte}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${PR} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${PR} and ${LD} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${PR} or ${LD} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function kst(t,e,r,n){let i=t.getActiveDocument(),o=Zor(t,n),a=Jor(t,n,2e3),c=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${$or}
${o}
${zor}

${Wor}
current_file_path: ${c}
${e}
${Gor}

${jor}
${a}
${Vor}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${c}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Dte}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${PR}\` and \`${LD}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(kst,"getUserPrompt");function Jor(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let c=Xor(a);if(c===null)continue;let l=e(c);if(r-=l,r<0)break;n.push(c)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(Jor,"getEditDiffHistory");function Xor(t){let e=[],r=Xo.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(l=>l.trim().length>0).length===0&&a.filter(l=>l.trim().length>0).length===0)continue;let c=i.lineRange.startLineNumber-1;e.push(`@@ -${c},${o.length} +${c},${a.length} @@`),e.push(...o.map(l=>`-${l}`)),e.push(...a.map(l=>`+${l}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(Xor,"generateDocDiff");function wst(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[Yor,n,e,Kor].join(`
`)}s(wst,"formatCodeSnippet");function Zor(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),c=[],l=0;for(let u=a.length-1;u>=0;u--){let f=a[u],p=f.content.split(/\r?\n/);n&&(p=p.map((E,x)=>`${x+1}|${E}`));let m=p.map(E=>e(E)+1),h=e(wst(f.path,"",!0)),g=m.reduce((E,x)=>E+x,0)+h,y=!1;for(;p.length>0&&l+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(l+=g,c.push(wst(f.path,p.join(`
`),y)))}return c.join(`

`)}s(Zor,"getRecentCodeSnippets");function Obe(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Obe,"truncateCode");var Pst=2,Bst=10,Qbe=15,Ube=1e3,qbe=2e3;var ih=class extends TD{constructor(r,n,i){super(ih.ID,[o=>new PD(o),o=>new _D(o),o=>new SD(o)]);this.diffService=r;this._chatMLFetcher=n;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new LT(r);try{if(r.xtabEditHistory.length===0)return Hi.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Hi(o,i.build(o))}catch(o){return Hi.noEdit({kind:"unexpected",error:kR(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=wR(o);if(a===null)return Jo.error({kind:"uncategorized",error:kR(new Error("NoSelection"))});let c=s(fe=>Math.floor(fe.length/4),"computeTokens"),l=new rn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(l),f=o.documentAfterEdits.value,p=f.substring(0,u)+Dte+f.substring(u),m=l.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Qbe),y=Math.min(h.length,m+Qbe+1),E=Pst,x=Bst,b=Math.max(0,m-E),_=Math.min(h.length,m+x+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new lr(b,0,_,0)),P;P=f.split(/\r?\n/).slice(b,_);let N=[b,_],M=h.slice(b,_),J=[_st,...h.slice(g,b),PR,...M,LD,...h.slice(_,y),Sst].join(`
`),pe=J,Y;{let fe=c(J),ne=0;if(fe>=qbe)Y=J,ne=g;else{let me=Math.floor((qbe-fe)/2),[he]=Obe(h.slice(0,g),!0,me),[,Qe]=Obe(h.slice(y),!1,me);ne=Math.max(he,m-Ube);let ke=Math.min(Qe+y,m+Ube+1);Y=[...h.slice(ne,g),J,...h.slice(y,ke)].join(`
`)}}let G=kst(r,Y,pe,c),H=[{role:Hbe.Raw.ChatRole.System,content:Fbe(Rst)},{role:Hbe.Raw.ChatRole.User,content:Fbe(G)}];if(i.setPrompt(H),await this.debounce(i),n.isCancellationRequested)return Jo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let ce=new N3,ie,V=await this._endpointProvider.getEndpointInfo(this.ID),Q=await this._chatMLFetcher.fetchOne(B7(H),async(fe,ne,me)=>{ie===void 0&&(ie=ce.elapsed())},{id:V.id,name:V.name},{temperature:0},n);if(Q.type==="canceled")return Jo.error({kind:"gotCancelled",message:"afterFetchCall"});if(Q.type==="quotaExceeded")return Jo.error({kind:"quotaExceeded"});if(Q.type!=="success")return Jo.error({kind:"fetchFailure",error:kR(Q)});ie&&i.setTtft(ie),i.setResponse(Q.value);let z=ih.getBacktickSection(Q.value);return await this.generateReturnEditFormat(o,k,P.join(`
`),z,N,i)}async generateReturnEditFormat(r,n,i,o,a,c){let{updatedEditWindow:l}=Ist(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,l,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),f=l.split(/\r?\n/),p=u.changes.map(m=>new Ug(new zr(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),f.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Jo.error({kind:"noSuggestions"}):Jo.ok({editWindow:n,edit:new Xo(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,ih.DEBOUNCE_MS-n);r.setDebounceTime(i),await KE(i)}};ih=yd([na(0,Bte),na(1,Yg),na(2,fte)],ih);d();var Nte=class t extends ps{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new uF,Pm(this,r.openDocuments,(i,o)=>{o.add(wE(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;kl(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let c=a.rootedEdits.changes[0];if(c.edits.length===0)return;let l=this.idToEntry.get(i.id),u=a.rootedEdits.previous,f=new rd(u,c);if(l===void 0){this.pushToHistory(i.id,f);return}let p=l.entry.edit,m=Xo.fromEdit(p),h=Xo.fromEdit(f);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){l.removeFromHistory();let g=p.edit.compose(c),y=new rd(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,f)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let c=this.idToEntry.get(a.docId);c!==void 0&&a===c.entry&&this.idToEntry.delete(a.docId)}}}};d();d();var Wbe=Ne(require("crypto"));var D7=Wbe.randomUUID.bind(Wbe);var qst=Ne(Gg()),zbe=Ne(o7());d();var Lte=t0("ISnippyService");d();d();var N7=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Mte=65;function tsr(t){let e=0,r;N7.lastIndex=0;do if(r=N7.exec(t),r&&(e+=1),e>=Mte)break;while(r);return e}s(tsr,"lexemeLength");function rsr(t,e){let r=0,n;N7.lastIndex=0;do if(n=N7.exec(t),n&&(r+=1,r>=e))return N7.lastIndex;while(n);return t.length}s(rsr,"offsetFirstLexemes");function Dst(t,e){let r=t.split("").reverse().join(""),n=rsr(r,e);return r.length-n}s(Dst,"offsetLastLexemes");function Gbe(t){return tsr(t)>=Mte}s(Gbe,"hasMinLexemeLength");d();d();var Nst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(Nst||={});var jbe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(jbe||={});var Lst;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(Nst.is)}e.is=t,s(t,"is")})(Lst||={});var Vbe;(e=>{function t(r){if(jbe.is(r))return Jo.error(r);if(Lst.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})(Vbe||={});var Mst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(Mst||={});var Fst;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(Fst||={});var Ost;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(Ost||={});var Qst;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(Mst.is)&&"page_info"in r&&Fst.is(r.page_info)&&"license_stats"in r&&Ost.is(r.license_stats)}e.is=t,s(t,"is")})(Qst||={});var $be;(e=>{function t(r){if(jbe.is(r))return Jo.error(r);if(Qst.is(r))return Jo.ok(r)}e.to=t,s(t,"to")})($be||={});var Fte=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,Vbe.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,$be.to)}async fetch(e,r,n){let i=this.ctx.get(jn),o=await this.ctx.get(Qr).getToken(),a=cy(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),c={Authorization:`Bearer ${o.token}`,...A0(this.ctx),"X-GitHub-Api-Version":$A},l=new AbortController,u=await i.fetch(a,{method:"POST",headers:c,json:r,signal:l.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let f=await u.json();return n(f)}};var Ust=new vt("[CODE REFERENCING]"),MD=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Fte,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(pr).getTextDocument({uri:e.toString()});if(!a){Ust.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let c=a.version,l;try{l=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!l)throw new Error(`Failed to parse match response: ${l}`);if(l.isError())throw new Error(`Failed to match: ${l.err}`);if(l.val.snippets.length===0)return;let{snippets:u}=l.val,f=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:E}=g.val;return{match:h,files:y,licenseStats:E}}),m=(await Promise.all(f)).filter(h=>!!h);if(m.length===0){Ust.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),E=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,x={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:E,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:c,details:y.map(b=>({license:b,url:`${h.match.github_url}`}))};await this.ctx.get(Fd).handleIPCodeCitation(this.ctx,x)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=Ys.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),c=o.start,l=a.value.substring(o.start,o.endExclusive);if(!Gbe(l)){let m=a.value.slice(0,o.start),h=Dst(m,Mte);c=h,l=a.value.slice(h,o.start+r.newText.length)}if(!Gbe(l))return;let u=a.getTransformer(),f=u.getPosition(c),p=u.getPosition(o.endExclusive);return{source:l,startOffset:c,endOffset:o.endExclusive,startPosition:f,endPosition:p}}};MD=yd([na(1,wC)],MD);async function Hst(t){let e=new lte;return e.define(dte,new Ybe(t)),e.define(Bte,new Jf),e.define(av,new mp(Kbe,[!0])),e.define(Lte,new mp(MD,[t])),e.define(Yg,await Xbe.Create(t)),e.define(R7,new mp(Zbe)),e.define(fte,new Jbe(t)),e.seal()}s(Hst,"createInstantiationService");var Ybe=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([c,l])=>l!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([c,l])=>l!==void 0)),a=Dr.createAndMarkAsIssued(i,o);Rt(this.ctx,e,a)}},Kbe=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},Jbe=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==ih.ID)throw new Error(`Unsupported provider ID: ${e}`);let r=await this.ctx.get(Bt).updateExPValuesAndAssignments();return{id:this.ctx.get(Bt).getNESXTabModelID(r),name:"xtab-4o-mini-finetuned"}}},Xbe=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await Oo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),c=D7(),l=await this.ctx.get(Mf).fetchAndStreamChat(this.ctx,a,oy.createEmptyConfigForTesting(),"nextEditSuggestion",c,async(u,f)=>{if(r)return await r(u,0,{text:f.text})},n,i,o);if(l.type==="success"){let u=[];if(r)for await(let p of l.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:c,serverRequestId:p.requestId.headerRequestId};let f=u.join("");return{type:"success",value:f}}else return l.type==="failed"&&l.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:l.reason}:{type:t.clsResponseTypeToResponseType(l.type),reason:l.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:Tst(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},Zbe=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Ote("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new Ote(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Ote=class{constructor(e){this.mode=qst.OutputMode.Raw;this.tokenizer=ho(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===zbe.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===zbe.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};d();d();var Qte=class extends ps{constructor(r){super();this.workspace=r;this._garbageCollector=new rIe(20);this._documentCaches=new Map;Pm(this,r.openDocuments,(n,i)=>{let o=new eIe(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(wE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(sc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},eIe=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new tIe(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},tIe=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},rIe=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};d();d();d();var L7=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},Ute=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new L7("",null),this._tail=new L7("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new L7(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var qte=class extends ps{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new Ute(50);Pm(this,r.openDocuments,(n,i)=>{let o=new nIe(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(wE(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)o.handleEdit(c)})),i.add(sc(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},nIe=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};d();var Hte=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let l=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,f)=>u+f.recentEdits.edits.length,0),n=l.recentEdits.edits.length,i=l.languageId,o=l.lineCountBeforeClipping,a=l.clippingRange.length}let c=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:c,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},FD=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:f,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:E,isShown:x,acceptance:b,logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,isDefaultEndpoint:pe,hadLowLogProbSuggestion:Y,nonTerminatingError:G,nEditsSuggested:H,kthEditPicked:ce,lineDistanceToMostRecentEdit:ie,debounceTime:V,hasNextEdit:Q,nextEditLogprob:z,maxLinesPerEdit:re,noNextEditReasonKind:fe,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchTime:Qe,fetchResult:ke,fetchError:tt,fetchStartedAfterMs:Fe}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:b,nonTerminatingError:G,noNextEditReasonKind:fe,noNextEditReasonMessage:ne,firstEditStrategy:me,firstPickStrategyOverride:he,fetchResult:ke,fetchError:tt},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(f),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(pe),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(E),isShown:this._boolToNum(x),logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:M,promptCharCount:J,hadLowLogProbSuggestion:this._boolToNum(Y),nEditsSuggested:H,kthEditPicked:ce,lineDistanceToMostRecentEdit:ie,debounceTime:V,fetchStartedAfterMs:Fe,fetchTime:Qe,hasNextEdit:this._boolToNum(Q),nextEditLogprob:z,maxLinesPerEdit:re})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};FD=yd([na(0,dte)],FD);d();var OD=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var BR=!1,Wst=300,QD=class extends ps{constructor(r,n,i,o,a,c,l){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=c;this._snippyService=l;this._rejectionCollector=new Qte(this._workspace);this._nextEditCache=new qte(this._workspace);this._recentlyShownCache=new sIe;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Pm(this,this._workspace.openDocuments,(u,f)=>{f.add(vAe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(FD)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),c=new Hte(this._statelessNextEditProvider.ID);c.setOpportunityId(n.requestUuid??D7());let l=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),f,p,m,h;if(l)f=l[0],h=l[1],p=a,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),await KE(Wst);else if(u)f=u.edit,h=u.source,p=u.documentBeforeEdit,c.setHeaderRequestId(h.headerRequestId),c.setIsFromCache(),c.setSubsequentEditOrder(u.subsequentN),await KE(Wst);else{h=new oIe,c.setHeaderRequestId(h.headerRequestId);let E=o.value.get();p=E;let x=await this.fetchNextEdit(h,r,c,i),b=E.value!==o.value.get().value;if(x.isError())switch(x.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=x.err.error;break;default:lF(x.err)}else if(!b){let _=x.val;_.isEmpty()||(f=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(c.markEndTime(),m)throw this._telemetrySender.sendTelemetry(c),m;if(!f)return this._telemetrySender.sendTelemetry(c),new OD(void 0);if(this._rejectionCollector.isRejected(r,f))return c.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(c),new OD(void 0);kl(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new OD({edit:f,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,c),f.isNeutral()||this._recentlyShownCache.add(r,a,[f,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),c=Ys.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:l,editLast:u}=iIe(r.lastEdits.swap(c)),f=l.compose(),p=new SR(new Kg(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(l.apply(o.text))),m=new Bl(o.text),g=xC.fromEdit(new rd(m,f)).removeCommonSuffixPrefixLines(),y=l.edits.at(-1)?.getNewRanges().at(0),E;y&&(E=new Bl(p.text).getTransformer().getRange(y));let x=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,b=this._workspace.getWorkspaceRoot(r.docId),_=s(M=>{let pe=new xC(new Bl(p.text),M).toEdit();return Gst(pe,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(M=>p.projectBack(M),"toOffsetOnDocumentAfterEditsNoShortening"),P=s(M=>p.project(M),"toProjectedOffset"),N=new v7(r.docId,b,r.languageId,g.base.getLines(),g.edit,E,m,l,i,_,k,P,r.lastEdit.base.getTextLength().lineCount,a,x);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Jo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let c=iIe(a.getDocumentAndIdx(n)),l=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(l);let u=await Promise.all(a.documents.map(M=>this._shortenDocument(M,l))),f=u[c.idx],p=this._xtabHistoryTracker.getHistory(),m=new ite(r.headerRequestId,u.map(M=>M.nextEditDoc),c.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,BR&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let M=this._hookupCancellation(g,o);try{y=await g.result}finally{M.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let M=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let J=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(pe){throw g.setResultError(pe),pe}finally{J.dispose(),M()}}i.setStatelessNextEditTelemetry(y.telemetry);let E=y.nextEdit;if(E.isError())return E;let x=E.val.edit;if(x.edits.length===0)return Jo.error({kind:"noSuggestions"});let _=new xC(new Bl(f.projectedDocument.text),x).toEdit(),k=Gst(_,f.projectedDocument),P=_.edits.length===k.edits.length?E.val.permutation:void 0,N=k.decompose(P);return Jo.ok(N)}_hookupCancellation(r,n){let i=new hu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),c=i.add(new pD);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){BR&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){BR&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}c.setIfNotSet(()=>{if(r.liveDependentants>0){BR&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}BR&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(sc(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){mte(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new SR(new Kg(r.base.value),new rh([])),clippedRange:new zr(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new Ht(0,0)),o=zr.fromRange(i);function a(p,m){return new zr(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let c=new zr(1,n.textLength.lineCount+1),l=iIe(c.intersect(a(o,100))),u=zr.subtract(c,l);return{document:new SR(new Kg(r.base.value),new rh(u.map(p=>Hc.delete(n.getOffsetRange(new lr(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:l}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new E7("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await ssr(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new Kg(n.base.value),a=n.edit.edits.at(0)?.range??new Ht(0,0),c;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);c=o.offsetRangeToRange(new Ht(h.range.start,g.range.endExclusive))}let l=jst(o.offsetRangeToRange(a)),u=vte(200*50,{costFnOverride:s((h,g,y)=>{let E=jst(y.offsetRangeToRange(h.range)),x=osr(l,E);return x>100?!1:x},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:c}])[0],f=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(f).lineNumber,m=new zr(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};QD=yd([na(4,av),na(5,wC),na(6,Lte)],QD);function Gst(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return Ys.fromOffsetEdit(r)}s(Gst,"projectBackEdit");function jst(t){return new zr(t.start.line+1,t.end.line+1)}s(jst,"lineRangeFromVSCodeRange");function osr(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(osr,"lineRangeDist");async function ssr(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(ssr,"getStructure");function iIe(t){if(!t)throw new dn("expected value to be defined, but it was not");return t}s(iIe,"assertDefined");var oIe=class{constructor(){this.headerRequestId=D7()}static{s(this,"NextEditFetchRequest")}},sIe=class{constructor(){this._cache=new sY(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};d();d();d();d();var DR=0;function Wte(t){return t===0}s(Wte,"lengthIsZero");var gp=2**26;function UD(t,e){return t*gp+e}s(UD,"toLength");function uv(t){let e=t,r=Math.floor(e/gp),n=e-r*gp;return new Pl(r,n)}s(uv,"lengthToObj");function M7(t,e){let r=t+e;return e>=gp&&(r=r-t%gp),r}s(M7,"lengthAdd");function Vst(t,e){return t.reduce((r,n)=>M7(r,e(n)),DR)}s(Vst,"sumLengths");function aIe(t,e){return t===e}s(aIe,"lengthEquals");function F7(t,e){let r=t,n=e;if(n-r<=0)return DR;let o=Math.floor(r/gp),a=Math.floor(n/gp),c=n-a*gp;if(o===a){let l=r-o*gp;return UD(0,c-l)}else return UD(a-o,c)}s(F7,"lengthDiffNonNegative");function $st(t,e){let r=t,n=Math.floor(r/gp),i=r-n*gp,o=e,a=Math.floor(o/gp),c=o-a*gp;return new lr(n+1,i+1,a+1,c+1)}s($st,"lengthsToRange");d();var qD=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${uv(this.startOffset)}...${uv(this.endOffset)}) -> ${uv(this.newLength)}`}};function Yst(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new iY(zst(t)),n=zst(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let f=[];for(;i&&!Wte(u);){let[p,m]=i.splitAt(u);f.push(p),u=F7(p.lengthAfter,u),i=m??r.dequeue()}return Wte(u)||f.push(new O7(!1,u,u)),f}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function c(u,f,p){if(a.length>0&&aIe(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new qD(m.startOffset,f,M7(m.newLength,p))}else a.push({startOffset:u,endOffset:f,newLength:p})}s(c,"pushEdit");let l=DR;for(let u of n){let f=o(u.lengthBefore);if(u.modified){let p=Vst(f,h=>h.lengthBefore),m=M7(l,p);c(l,m,u.lengthAfter),l=m}else for(let p of f){let m=l;l=M7(l,p.lengthBefore),p.modified&&c(m,l,p.lengthAfter)}}return a}s(Yst,"combineTextEditInfos");var O7=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=F7(e,this.lengthAfter);return aIe(r,DR)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,DR,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${uv(this.lengthBefore)} -> ${uv(this.lengthAfter)}`}};function zst(t){let e=[],r=DR;for(let n of t){let i=F7(r,n.startOffset);Wte(i)||e.push(new O7(!1,i,i));let o=F7(n.startOffset,n.endOffset);e.push(new O7(!0,o,n.newLength)),r=n.endOffset}return e}s(zst,"toLengthMapping");var Q7=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Gte(n.range,Pl.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=uv(n.newLength);return new Gte($st(n.startOffset,n.endOffset),new Pl(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new qD(UD(e.range.startLineNumber-1,e.range.startColumn-1),UD(e.range.endLineNumber-1,e.range.endColumn-1),UD(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=Yst(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return lr.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Gte=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};d();var jte=class{constructor(e){this.documents=e;kl(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Vte=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new rd(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};d();var $te=class extends ps{constructor(){super();this.branch=bg("branchName",void 0);this._register(CAe((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var Yte=class extends ps{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new lIe(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new $te;this._register(w2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=AD(),this._documentState.forEach(o=>o.applyAllEdits()))})),Pm(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new cIe(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(wE(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(sc(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],c=!1;for(let l of this._lastDocuments.getItemsReversed()){let u=l.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&c)break;if(await this.workspace.getDocument(l.docId)&&(l.docId===r&&(c=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(l=>l.docId===r))return new jte(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=AD()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},cIe=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new Bl(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=yD.fromEdit(e,this._currentValue),i=Q7.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(c){return zte(c.edits,l=>l.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&asr(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=AD(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:AD()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new vC(this._edits.map(o=>o.edit));return{history:new Vte(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=Ys.empty,o=Q7.empty,a,c=0,l=Ys.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(AD()-u.instant>10*60*1e3)break;let f=u.textLengthEdit.compose(o),p=f.getRange();mte(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=zte(u.textLengthEdit.edits,P=>P.range.endLineNumber-P.range.startLineNumber+P.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||zte(u.edit.edits,P=>P.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||zte(u.edit.edits,P=>P.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)l=u.edit;else{let P=Ys.trySwap(u.edit,l);if(P)l=P.e1;else{if(h>=2)break;l=u.edit.compose(l)}}let E=u.edit.inverseOnString(n.value);n=n.apply(E);let x=u.edit.compose(i),b=Xo.fromEdit(new rd(n,x)),k=new xC(n,b).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;c=k,i=x,o=f}for(let u=0;u<=a;u++){let f=this._edits[u];this._baseValue=this._baseValue.apply(f.edit)}return this._edits=this._edits.slice(a+1),{editCount:c}}toString(){return new vC(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function zte(t,e){let r=0;for(let n of t)r+=e(n);return r}s(zte,"sum");function asr(t,e){let r=e.getNewRanges();return t.edits.every(n=>csr(n.range,r))}s(asr,"editExtends");function csr(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(csr,"doesTouch");var lIe=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var Kst=10,Jg=class{constructor(e){this.lastResultsById=new Or(Kst);this.lastResultsByUri=new Or(Kst);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=$g.create(e),c=await i.getNextEdit(a,{triggerKind:1},n);if(c.result==null)return;let l=await this.ctx.get(pr).getTextDocument({uri:e});if(!l)return;let u=l.positionAt(c.result.edit.range.start),f=l.positionAt(c.result.edit.range.endExclusive),p=cr(),m={resultId:p,nextEditResult:c,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:c.result?.edit.newText??"",range:{start:u,end:f},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await Hst(this.ctx),r;try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments(),a=lsr(this.ctx,o);r=e.createInstance(a?ih:lv)}catch{r=e.createInstance(lv)}let n=this.ctx.get(Ig),i=new Yte(n);return await HS.catch(()=>{}),e.createInstance(QD,n,r,i,new Nte(n))}};function lsr(t,e){let r=vi(t,kt.NESXTab);return r!==void 0?r:t.get(Bt).enableNESXTab(e)}s(lsr,"shouldUseXTab");d();var Jst=Ne(di());var Kte=class extends Ig{constructor(r){super();this._openDocuments=bg(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=r,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(pr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=$g.create(r);return this.addDocument({id:o,initialValue:i,languageId:S2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=$g.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=$g.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=$g.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new uIe(r.id,new Bl(r.initialValue??""),[],r.languageId??S2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),c=a.filter(l=>l.id!==o.id);c.length!==a.length&&this._openDocuments.set(c,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(pr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},uIe=class extends dK{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new rn(e.lineNumber+1,e.column+1));this.updateSelection([new Ht(r,r)])}editFromLspContentChanges(e){return new vC(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(Jst.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new rn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new rn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new dn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return Ys.replace(new Ht(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};d();var Xst=require("crypto"),_C=Ne(require("fs/promises")),Zst=require("os"),dv=Ne(require("path"));var fv=class{constructor(e){this.ctx=e;this.logger=new vt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=dv.extname(__filename)===".ts"?dv.resolve(__dirname,"../../../packages/ripgrep/bin"):dv.resolve(__dirname,"./bin"),o=dv.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await _C.readFile(o),c=(0,Xst.createHash)("sha256").update(a).digest("hex"),l=dv.join((0,Zst.homedir)(),".cache/pkg",c);await _C.mkdir(l,{recursive:!0});let u=Oi(Kc(o)),f=dv.join(l,u);try{await _C.stat(f)}catch{await _C.copyFile(o,f),this.logger.debug(this.ctx,`Copied ripgrep to ${f}`)}o=f,e!=="win32"&&await _C.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};d();var eat=require("child_process"),dIe=require("perf_hooks");var pv=new vt("ripgrepProcessManager"),Xg=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,pv.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){pv.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){pv.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,c)=>{if(this.taskQueue.length>=this.maxPendingTasks){pv.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),c(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){pv.error(this.ctx,`Invalid timeout value: ${o}`),c(new Error(`Invalid timeout value: ${o}`));return}pv.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:ZZ(),command:e,args:r,options:i,resolve:a,reject:c,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let l=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);pv.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${l}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=dIe.performance.now();pv.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,eat.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,c=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),c(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),c(),this.runNextTask()}),n.stdout?.on("data",l=>{i+=l.toString()}),n.stderr?.on("data",l=>{o+=l.toString()}),n.on("close",l=>{let f=dIe.performance.now()-r;pv.debug(this.ctx,`Task ${e.id} completed in ${f} ms`),c(),l===0?e.resolve(i):l===1?e.resolve(""):e.reject(new Error(`Process exited with code ${l}: ${o}`)),this.runNextTask()}),n.on("error",l=>{c(),e.reject(new Error(`Failed to start process: ${l.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};d();var HD=class extends Fy{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};d();var tat=100,rat=1e3*60*5;function nat(t){let e=new fIe(t);t.get(uc).registerContextProvider(e),t.get(Qy).add(e.id)}s(nat,"registerRelatedFilesShim");var fIe=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new g_(tat,rat);this.relatedFilesCache=new g_(tat,rat);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Bt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},c=await bK(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let l=c.traits.filter(f=>f.includeInPrompt).map(f=>f.promptTextOverride?{name:"OtherInformation",value:f.promptTextOverride}:f),u=new Set;for(let f of c.entries.values())for(let p of f.keys())u.add(p);this.traitCache.set(e,l),this.relatedFilesCache.set(e,Array.from(u))}catch(o){LI(this.ctx,o,"relatedFilesShim")}}};d();d();d();var iat=Ne(require("node:events"));var Jte="onWorkspaceWatcherChanged";var Xte=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new iat.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Jte,Wu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Jte,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Jte,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Jte,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var id=class{constructor(e){this.ctx=e;this.watchers=new Or(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Ur.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var WD=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},usr="workspaceLifecycleManager",od=new vt(usr),SC=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ia(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?od.debug(this.ctx,`listener ${e.constructor.name} is already started`):(od.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):od.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);od.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(cp).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(pr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){od.debug(r,"No workspaces to add.");return}od.debug(r,`Adding workspaces: ${e.map(c=>c.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];od.debug(r,`Combined workspaces: ${n.map(c=>c.uri).join(", ")}`);let i=n.filter((c,l,u)=>u.findIndex(f=>f.uri===c.uri)===l&&!u.some(f=>t.isSubfolder(c,f)));od.debug(r,`Filtered workspaces: ${i.map(c=>c.uri).join(", ")}`);let o=i.filter(c=>!this.watchedWorkspaces.some(l=>l.uri===c.uri));od.debug(r,`New workspaces: ${o.map(c=>c.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(c=>!i.some(l=>l.uri===c.uri));od.debug(r,`Removed workspaces: ${a.map(c=>c.uri).join(", ")}`),this.watchedWorkspaces=i;for(let c of a){od.debug(r,`Terminating watching for removed workspace: ${c.uri}`),r.get(id).terminateWatching(c);for(let u of this.activeListeners)od.debug(r,`Notifying listener of removed workspace: ${c.uri}`),await u.onWorkspaceRemoved(c)}for(let c of o){if(!c.uri)continue;od.debug(r,`Starting to watch new workspace: ${c.uri}`);let l=r.get(id);if(l.shouldStartWatching(c)){l.startWatching(c);let u=l.terminateSubfolderWatchers(c);if(u.length){od.debug(r,`Terminated subfolder watchers for workspace: ${c.uri}, Subfolders: ${u.map(f=>f.uri).join(", ")}`);for(let f of this.activeListeners)await f.onWorkspaceSubfoldersTerminated(c,u)}for(let f of this.activeListeners)od.debug(r,`Adding file change listener for workspace: ${c.uri}`),l.onFileChange(c,f.onFileChange.bind(f))}}for(let c of this.activeListeners)for(let l of o)od.debug(r,`Notifying ${c.constructor.name} of added workspace: ${l.uri}`),await c.onWorkspaceAdded(l)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(id).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function Zte(t){t.set(SC,new SC(t))}s(Zte,"setupWorkspaceLifecycleListener");d();var sat=require("child_process");var ere=class extends eh{static{s(this,"GitCLIBranchLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,sat.execFile)(r,n,{cwd:e},(a,c)=>{a?o(a):i(c)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){gee.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getBranchInfo(e,r){let n=ls(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","branch","--show-current",...this.extraArgs()]);if(i!==void 0){let o=i.trim();return o?JE.branch(o):JE.detachedHead()}}extraArgs(){return[]}};d();var tre=class extends eh{static{s(this,"GitParsingBranchLoader")}async getBranchInfo(e,r){try{let n=e.get(yo),i=Lo(r,".git","HEAD"),o=await n.readFileString(i);return this.parseHeadContent(o.trim())}catch(n){let i=typeof r=="string"?r:r.uri;gee.info(e,`Failed to parse git HEAD file in ${i}:`,n);return}}parseHeadContent(e){if(e.startsWith("ref: refs/heads/")){let r=e.substring(16);return JE.branch(r)}else return this.isCommitSha(e)?JE.detachedHead():JE.detachedHead()}isCommitSha(e){return/^[a-f0-9]{40}$/i.test(e)}};d();d();var rre=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};d();d();d();d();var dsr=64;var HT={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},RC={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},pIe=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,dsr)}},qT=class extends pIe{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Bi=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},NR=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},LR=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var oo=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},aat=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),nre=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(nre||{}),cat=I.Object({result:I.Enum(nre)});var oh=class extends qT{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:HT,type:"shared"})}};d();var fsr=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),psr=new Map;for(let[t,e]of fsr)psr.set(e,t);d();function GD(t){return`[${Oi(t)}](${t})`}s(GD,"formatUriForFileWidget");function kC(t){let e=msr(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(kC,"resolvePathInput");function msr(t){if(t.startsWith("/")||uat()&&gsr(t)||uat()&&t.startsWith("\\\\"))return Kc(t)}s(msr,"resolveFsUri");function uat(){return process.platform==="win32"}s(uat,"isWindows");function hsr(t){return t>=65&&t<=90||t>=97&&t<=122}s(hsr,"isWindowsDriveLetter");function gsr(t){return hsr(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(gsr,"hasDriveLetter");function U7(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Bi?r.value:r instanceof LR?"":r instanceof NR?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(U7,"parseToolResultToString");function ire(t){let{content:e}=t;return{message:U7(e)}}s(ire,"formatToolErrorResult");function dat(t){let{content:e}=t;return{data:e.map(r=>r instanceof Bi?{type:"text",value:r.value}:r instanceof LR?{type:"text",value:"<unsupported>"}:r instanceof NR?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(dat,"formatToolSuccessResult");var ore=class extends oh{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=i.code,a=await this.invokeClientEditFileTool(e,r,o,n);return await this.getFinalEditFileResult(e,r,a,i.editSurvivalTrackingSession,i.telemetry)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=kC(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new mD(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),{chatRequestSource:r.conversation.source,chatRequestModel:r.resolvedModelConfiguration?.modelFamily??r.userRequestedModel},n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(sd).getToolByNameAndProvider("insert_edit_into_file",RC);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(sd).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}async getFinalEditFileResult(e,r,n,i,o){if(n.status!=="success")return n;if(i){let f=await cc(e.ctx,e,void 0);i.startReporter(p=>{this.handleEditSurvivalTelemetry(e,p,f,o)})}let a=U7(n.content),c=ZP({uri:kC(r.input.filePath),languageId:"UNKNOWN"}),l=[];l.push(`<file_after_edit path="${r.input.filePath}">`),l.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let u=new up({code:a,languageId:c,noFilePath:!0});return l.push(...u.renderAsArray()),l.push("</file_after_edit>"),new oo([new Bi(l.join(`
`))],"success")}handleEditSurvivalTelemetry(e,r,n,i){bGe(e.ctx,"agentPanel",{requestSource:i?.requestSource??"",chatRequestModel:i?.chatRequestModel??"",mapper:i?.mapper??"",headerRequestId:i?.headerRequestId??""},{survivalRateFourGram:r.fourGram,survivalRateNoRevert:r.noRevert,timeDelayMs:r.timeDelayMs,didBranchChange:r.didBranchChange,readDocumentTimeMs:r.readDocumentTimeMs??-1,diffComputationTimeMs:r.diffComputationTimeMs??-1},{currentFileContent:r.currentFileContent},n,"codeMapper.trackEditSurvival")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=kC(n.filePath);return{progressMessage:`Editing ${GD(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};d();var fat=new vt("findFilesTool"),sre=class t extends oh{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(fv).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,c=e.turn.workspaceFolders;if(!c?.length)return new oo([new Bi("Failed to invoke tool file_search since no workspace folders found")],"error");let l=e.ctx.get(Xg),u={},f=c.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{fat.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await l.execute(i,["--files","-g",o],n,{cwd:La(g.uri)},t.timeOutInSeconds*1e3);fat.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(E=>E.trim()).filter(E=>E.length>0).map(E=>`${La(Lo(g.uri,E))}`)}catch(y){let E=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${E}`)}});try{await Promise.all(f)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new oo([new Bi(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new oo([new Bi(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};d();var pat=new vt("findTextInFilesTool"),are=class t extends oh{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new oo([new Bi("Cancelled")],"cancelled");i=await e.ctx.get(fv).resolvePath()}catch(E){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(E)}`)}let{query:o,isRegexp:a=!1,includePattern:c}=r.input,l=20,u=e.turn.workspaceFolders;if(!u?.length)return new oo([new Bi("Failed to invoke tool grep_search since no workspace folders found")],"error");let f=e.ctx.get(Xg),p={},m=u.map(async E=>{if(n.isCancellationRequested)throw new Error("Canceled");try{pat.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${E.uri.toString()}`);let x=[a?"--regexp":"--fixed-strings",o,...c?["-g",c]:[],"--no-heading","--line-number","--color","never",La(E.uri)],b=await f.execute(i,x,n,{cwd:La(E.uri)},t.timeOutInSeconds*1e3);pat.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${E.uri.toString()} with results: ${b}`),p[E.uri.toString()]=b.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(x){let b=x instanceof Error?x.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${E.uri.toString()}: ${b}`)}});try{await Promise.all(m)}catch(E){let x=E instanceof Error?E.message:"An unknown error occurred";return new oo([new Bi(x)],"error")}let h=[],g=l;for(;g>0;){let E=!1;for(let x in p)p[x].length>0&&g>0&&(h.push(p[x].shift()),g--,E=!0);if(!E)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new oo([new Bi(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};d();var cre=class extends oh{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=kC(i),c=await e.ctx.get(yo).readDirectory(o.toString());return c.length===0?new oo([new Bi("Folder is empty")],"success"):new oo([new Bi(c.map(([l,u])=>`${l}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=kC(e.input.path);return{progressMessage:`Reading directory ${GD(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};d();var lre=class extends oh{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,c=kC(i);if(!c)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(mn).getOrReadTextDocument({uri:c});if(u.status==="valid"){let f=new up({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:c});return new oo([new Bi(f.renderAsString(`
`))],"success")}else return new oo([new Bi(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new oo([new Bi(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=kC(n.filePath);return{progressMessage:`Reading file ${GD(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function mat(){return[new cre,new lre,new ore,new sre,new are]}s(mat,"getAllClsTools");var sd=class{constructor(e){this.ctx=e;this._toolRegistry=new rre;for(let r of mat())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new oo([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new mc;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let l of this._toolRegistry.listTools())e.has(l.toolProvider.id)||e.set(l.toolProvider.id,[]),e.get(l.toolProvider.id)?.push(l);let r=e.get(HT.id)?.find(l=>l.name==="insert_edit_into_file");r&&e.get(HT.id)?.splice(e.get(HT.id)?.indexOf(r)??0,1);let n=e.get(RC.id)?.find(l=>l.name==="insert_edit_into_file");n&&e.get(RC.id)?.splice(e.get(RC.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(RC.id)??[],a=e.get(HT.id)??[],c=Array.from(e.entries()).filter(([l])=>l!==HT.id&&l!==RC.id).flatMap(([,l])=>l);return o.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),a.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),c.forEach(l=>{i.has(l.nameForModel)||i.set(l.nameForModel,l)}),i}};d();d();var MR=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};d();var Aat=require("crypto"),mIe=require("fs"),hIe=Ne(require("path"));var hat="symbolDatabaseLookup",gat="multiLanguageContextProviderDocumentSymbols",FR=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(hat,e);return r||(r=await this.createDBFile(e)),hIe.default.join(this.persistenceManager.directory,gat,r)}async init(){let e=hIe.default.join(this.persistenceManager.directory,gat);await this.createIfNotExists(e)}async dirExists(e){try{return await mIe.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await mIe.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,Aat.randomUUID)()}.db`;return await this.persistenceManager.update(hat,e,r),r}async deleteDBFile(e){}};d();d();var q7=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};d();d();d();var ure=Ne(require("path")),yat=require("worker_threads");function Cat(t,e){return new yat.Worker(ure.default.resolve(ure.default.extname(__filename)!==".ts"?__dirname:ure.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(Cat,"createWorker");d();var dre=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var Eat=Ne(di());var fre="main.js",pre=class{constructor(e,r,n=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:r};this.worker=Cat(fre,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new dre(n)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new nz(this.id++),Eat.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new ez(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new tz(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new rz(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new X$(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new Z$(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new J$(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(fre+"'")&&(r=new Error(`Failed to load ${fre}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${fre} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var H7=Ne(di());var Ap=new vt(NI),OR=class{constructor(e,r,n,i,o){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,c)=>{await this.indexFile(c,this.languageId(c)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,c)=>{if(a===1){Ap.debug(this.ctx,`workspace removed: ${c}`),await this.indexClient.tryRemoveIndex(c,H7.CancellationToken.None);return}Ap.debug(this.ctx,`workspace added: ${c}`),await this.indexAddedWorkspace(c)}),this.indexClient=new pre(i,o);for(let a of i){let c=a.rootPath;this.workspaceInit.set(c,this.doWorkspaceIndex(c).then(()=>{Ap.debug(this.ctx,`workspace ${c} indexed`),this.workspaceInit.delete(c)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await ysr(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,H7.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{Ap.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){Ap.debug(this.ctx,`indexing workspace ${e}`);let r=Fme.map(f=>`*${f}`);if(r.length===0)return;let i=`**/${Fme.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(J0),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,H7.CancellationToken.None)]),c=a[0],l=a[1],u=Array.from(new Set([...c,...l]));Ap.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async f=>{let p=this.languageId(f);p&&await this.indexFile(f.replace(/\/+$/,""),p)})),Ap.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{Ap.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,H7.CancellationToken.None)}catch(n){Ap.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return xQe(e)}};async function ysr(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(ysr,"createIndexableWorkspaceFolder");d();d();var vat=100,Csr=5e3,mre=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,c,l){let u=Date.now(),f=this.get(n,i,r,u);if(f)return this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),f.value;if(!a)return e(r,n,i,o,c,l);let p=new In.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,c,p.token);return f=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(f),l.onCancellationRequested(()=>this.decrementRefCount(f)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>vat)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>Csr))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let c=e.substring(0,r),l=/[A-Za-z0-9]+$/.exec(c),u=r;l&&(u=l.index),r-u>vat&&(u=r);let f={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{f.complete=!0}),refCount:0,cancel:a,uuid:cr(),complete:!1};return this.cachedValue=f}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var hre=class{constructor(e){this.id=NI;this.selector=Array.from(N$.keys()).map(e=>({language:e}));try{this.documentManager=e.get(pr),this.resolver=new gIe(this.documentManager,e)}catch(r){throw Ap.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},gIe=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new mre}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(MR).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,c=e.documentContext.proposedEdits??[],l=Hy(o,a);l=l.applyEdits(c);let u=Wje(e.activeExperiments),f=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,l.textDocument.getText(),l.textDocument.offsetAt(l.position),e.documentContext.languageId,l.editsWithPosition.length===0,u,r);return Ap.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${f.map(p=>JSON.stringify(p)).join(", ")}`),f}catch(o){if(C$(o))return[];throw Ap.error(this.ctx,"Failed to get context",o),o}}};var W7=class extends WD{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(SC).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(uc).providers.some(r=>r.id===NI)){let r=this.ctx.get(FR);this.fileWatcher=new AIe([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new OR(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new yIe(this.ctx),this.ctx.set(q7,this.fileWatcher),this.ctx.set(J0,this.fileSearch),this.ctx.set(OR,this.multiLanguageContextIndexWatcher),this.ctx.get(uc).registerContextProvider(new hre(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Bt).updateExPValuesAndAssignments(),n=PK(this.ctx,r);return n.includes(NI)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},AIe=class extends q7{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},yIe=class extends J0{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(id).getWatchedFiles(n)).map(a=>this.ctx.get(pr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var CIe=class extends MR{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new W7(e),e.set(W7,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function xat(t){let e=t.get(pu),r=new FR(e);t.set(FR,r),t.set(MR,new CIe(t))}s(xat,"setupMultiLanguageContextProviderFeature");d();d();d();async function bat(t){try{await HS}catch(e){LI(t,e,"initializeTokenizers")}}s(bat,"waitForTokenizers");d();var PC=new Map;PC.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});PC.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});PC.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});PC.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});PC.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});PC.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var vsr=new vt("sdk");function gre(t,e){PC.has(t.get(nn).getEditorPluginInfo().name)||vsr.warn(t,...e)}s(gre,"deprecationWarning");var v0t=Ne(kP()),cA=Ne(hg());d();d();d();var cn={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var bu=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(Iat(e))}};function at(t,e){let r=Fs.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=Iat(r.Errors(o));return[null,{code:cn.InvalidParams,message:a}]}return e(n,i,o)}}s(at,"addMethodHandlerValidation");function Iat(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(Iat,"createErrorMessage");d();var EIe=Ne(di());d();var BC=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var Are="github.copilot.finishDeviceFlow",vIe=class extends BC{constructor(){super(...arguments);this.name=Are;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(Dn).pendingSignIn;if(!i)throw new EIe.ResponseError(cn.InvalidRequest,"No pending sign in");try{await this.ctx.get(iu).open(i.verificationUri)}catch(o){S0.warn(this.ctx,"Failed to open",i.verificationUri),S0.exception(this.ctx,o,Are)}try{return await i.status}catch(o){throw new EIe.ResponseError(cn.DeviceFlowFailed,String(o))}finally{this.ctx.get(Dn).pendingSignIn=void 0}}},Tat=[vIe];d();d();var Ss=class extends Or{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var G7="github.copilot.didAcceptCompletionItem",xIe=class extends BC{constructor(){super(...arguments);this.name=G7;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(Ss).get(n);return o?(uJ(this.ctx,o),!0):!1}},wat=[xIe];d();var xsr="github.copilot.didAcceptNextEditSuggestionItem",bIe=class extends BC{constructor(){super(...arguments);this.name=xsr;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(Jg).handleAcceptance(n),!0}},_at=[bIe];d();var TIe="github.copilot.didAcceptPanelCompletionItem",IIe=class extends BC{constructor(){super(...arguments);this.name=TIe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(Ss).get(i);return a?(L2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},Sat=[IIe];var bsr=[...Tat,...wat,..._at,...Sat];function Rat(t,e){let r=new Map;for(let n of bsr){let i=new n(t),o=Fs.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=hv(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new bu(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(Rat,"registerCommands");d();var kat=Ne(require("node:events"));var Zg=class extends GS{constructor(r){super(new YP,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${Isr(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(kt[n],this.env[o]),this.setConfig(kt[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new kat.default),this.emitters.get(r)?.on("change",n)}};function Isr(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(Isr,"camelCaseToSnakeCaseAllCaps");var Tsr="unknown-editor",Pat="unknown-editor-plugin",yre=class extends nn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:Tsr,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:Pat,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function Bat(t){return t.getEditorPluginInfo().name!==Pat}s(Bat,"hasValidInfo");d();var Nat=require("node:events");var Dat="initialize",gv=class{constructor(){this.emitter=new Nat.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(Dat,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(Dat)}};d();var Av=Ne(hg());var wsr=new Map([[4,Av.MessageType.Log],[3,Av.MessageType.Info],[2,Av.MessageType.Warning],[1,Av.MessageType.Error]]),Cre=class extends Tc{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!fJ(e)&&n!=="console")return;let o={type:wsr.get(r),message:u$e(n,...i)},a=e.get(xr).connection;try{a.sendNotification(new Av.NotificationType("window/logMessage"),o)}catch(c){if(c instanceof Av.ConnectionError)return;throw c}}};d();var Lat=Ne(Lc());var Ere=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(xr).connection.sendNotification(new Lat.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function Mat(t){let e=t.get(xl),r=e.deactivate();e.setReporter(new Ere(t)),e.setRestrictedReporter(new Ere(t,!0)),await r}s(Mat,"setupRedirectingTelemetryReporters");d();d();var vre=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Rt(e,"installed.reinstall"):Rt(e,"installed.new")}handleUpgrade(e){Rt(e,"installed.upgrade")}handleUninstall(e){Rt(e,"uninstalled")}};var j7=Ne(kP());var VD=class extends vre{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(nn).getEditorPluginInfo();return await e.get(pu).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(pu).listSettings()).length>0}async markInstalled(e){let r=e.get(nn).getEditorPluginInfo();await e.get(pu).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(nn).getEditorPluginInfo(),n=await e.get(pu).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,j7.gt)((0,j7.coerce)(r.version),(0,j7.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(nn).getEditorPluginInfo();await e.get(pu).delete("versions",r.name),(await e.get(pu).listKeys("versions")).length===0&&await e.get(pu).deleteSetting("versions")}};d();var Fat=require("events"),_Ie=Ne(require("path")),xre=Ne(Lc());var wIe="didChangeWatchedFiles",_sr={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},eA=class t{constructor(e){this.ctx=e;this.emitter=new Fat.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new xre.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(xr).connection}init(){this.ctx.get(ds).getCapabilities().watchedFiles&&this.connection.onNotification(xre.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(ds).getCapabilities().watchedFiles)return _sr;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],c=[];for(let l of i){typeof l=="object"&&(l=l.uri);let u=_Ie.extname(l).toLowerCase();if(!VS.includes(u)){c.push({uri:l});continue}let f=await this.getValidDocument(l);if(f===void 0){a.push({uri:l});continue}o.push(f)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:c}}onDidChangeWatchedFiles(e){this.emitter.on(wIe,e)}offDidChangeWatchedFiles(e){this.emitter.off(wIe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,c={uri:a,isRestricted:!1,isUnknownFileExtension:!1},l=_Ie.extname(o.uri).toLowerCase();if(!VS.includes(l))c.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?c.isRestricted=!0:c.document=u}switch(o.type){case 1:n.push(c);break;case 2:r.push(c);break;case 3:i.push(c);break}}this.emitter.emit(wIe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(mn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};d();d();var Ssr=I.Object({uri:I.String({minLength:1})});async function Rsr(t,e,r){let n=await t.get(mn).getOrReadTextDocument(r);return[{status:Gs(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(Rsr,"handleCheckFileStatusChecked");var Oat=at(Ssr,Rsr);d();var ksr=I.Object({});function Qat(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(Qat,"calculatePercentRemaining");async function Psr(t,e,r){let n=await t.get(Dn).getSession();if(n){let i=await jue(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:Qat(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:Qat(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:cn.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:cn.InternalError,message:"Not signed in"}]}s(Psr,"handleCheckQuotaChecked");var Uat=at(ksr,Psr);d();var Bsr=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function Dsr(t,e,r){return[await t.get(Dn).checkAndUpdateStatus(r.options),null]}s(Dsr,"handleCheckStatusChecked");var qat=at(Bsr,Dsr);d();d();d();d();d();d();function Hat(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(Hat,"filterUnsupportedReferences");function Wat(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(Wat,"convertToCopilotReferences");var Gat=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var WT=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,Hat(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};d();var Wc=class{static{s(this,"ConversationInspector")}};d();var SIe={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var Js=class{constructor(e){this.ctx=e;this.progressEntries=new Or(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Ur.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};d();d();var DC=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let r=`${e.hostname}/${e.owner}/${e.repo}`,n=this.githubRepositoryInfoCache.get(r);if(n)return n;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(r,o),o}}async _doGetRepositoryInfo({owner:e,repo:r,hostname:n}){let i=await this.ctx.get(Dn).getSession({authAuthority:n});if(!i&&!(n==="github.com"||n.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${r}`,i?.apiUrl||`https://api.${n}`).href;return this.ctx.get(jn).fetch(a,{method:"GET",headers:o})}};d();d();d();var Vat=Ne(yp());var NC=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,c=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-c)}}let i=new Nt([(0,Vat.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},c={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},l={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[c,.4],[l,.2]],f=new Nt(u.filter(([p,m])=>!$D(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:W0(h),m]}));return this.wrapInTicks(f)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||$D(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new Nt([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function $D(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s($D,"isEmptyRange");var $at=Ne(require("path"));var zat=I.Object({uri:I.String(),visibleRange:I.Optional(rc),selection:I.Optional(rc)}),RIe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument(e),i=Gs(n);if(await this.turnContext.collectFile(ad,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new NC(n.document,e.selection,e.visibleRange),c=r.getRelativePath(n.document);if(i==="empty")return new Nt([`The currently open file \`${c}\` is empty.`]);let l=[[`Code excerpt from the currently open file \`${c}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[f,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if($D(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[f,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Nt([...l,...u])}else if(n.status==="invalid")return new Nt([`The currently open file \`${$at.basename(e.uri)}\` is content excluded.`])}},ad="current-editor",bre=class{constructor(e){this._resolver=e;this.id=ad;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new RIe(e)}};d();d();var cl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},kIe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},PIe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Hl=class{constructor(e,r,n,i,o,a="explicit",c=[],l=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=c;this._isAvailable=l}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new kIe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new PIe(this._processor(e),this.id)}};var Yat=I.Object({name:I.String(),url:I.String()}),Kat=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(Yat)})),remotes:I.Optional(I.Array(Yat))}),BIe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(LC,"git repository information");let r=[];return r.push([new Nt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new Nt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new Nt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new Nt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new Nt([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new Nt(r)}},LC="git-metadata",Ire=class extends Hl{static{s(this,"GitMetadataSkill")}constructor(e){super(LC,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new BIe(r))}};async function Jat(t){let e=await t.skillResolver.resolve(ad);if(e){let a=e.uri,c=aI(t.ctx,a);if(tQe(c))return{repoInfo:c,skillUsed:ad}}let r=await t.skillResolver.resolve(LC);if(!r||!r.remotes||r.remotes.length===0){Ur.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=fme(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:LC}}s(Jat,"extractRepoInfo");async function Xat(t){let e=[];return await Nsr(t,e),await Lsr(t,e),await Msr(t,e),e}s(Xat,"skillsToReference");async function Nsr(t,e){let r=await Fsr(t);r&&e.push(r)}s(Nsr,"addRepositoryReference");async function Lsr(t,e){let r=await Osr(t);r&&e.push(r)}s(Lsr,"addSelectionReference");async function Msr(t,e){let r=[],n=await Usr(t);n&&r.push(n),r.push(...await qsr(t)),r.length>0&&e.push(...r)}s(Msr,"addFileReferences");async function Fsr(t){let e=await Jat(t);if(e){let r=t.ctx.get(DC),n=e.repoInfo.owner,i=e.repoInfo.repo,o=await r.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:o.id}}}}s(Fsr,"gitMetadataToReference");async function Osr(t){let e=await t.skillResolver.resolve(ad);if(e&&e.selection){let n=await t.ctx.get(mn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return Qsr(e,n.document)}}s(Osr,"currentEditorToSelectionReference");function Qsr(t,e){if(t.selection&&!$D(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(Qsr,"extractSelection");async function Usr(t){let e=await t.skillResolver.resolve(ad);if(e){let n=await t.ctx.get(mn).getOrReadTextDocument(e),i=Gs(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(Usr,"currentEditorToFileReference");async function qsr(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(mn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=Gs(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let c=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:c,language:o.document.detectedLanguageId}})}}}return e}s(qsr,"fileReferenceToPlatformFileReference");d();d();d();d();var sct=Ne(_re()),MIe=Ne(require("path"));var act=500,Jsr=Math.floor(.25*act),Sre=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=MIe.default.extname(__filename)===".ts"?MIe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await sct.job(async({text:o,uri:a,tokenizerName:c,directory:l,chunkSize:u,overlap:f})=>{let m=await require(l).getTokenizerAsync(c),h=m.tokenize(o),g=h.length,y=[],E=0;for(;E<g;){let x=E+u>=g,b=x?g:E+u,_=h.slice(E,b),k=m.detokenize(_),P=o.indexOf(k);y.push({id:`${a.toString()}#${E}`,chunk:k,tokenCount:_.length,range:{start:P,end:P+k.length}}),E=x?b:b-f}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:act,overlap:Jsr}}),n}};var Xsr="fixedSize",Zsr=new Map([["fixedSize",Sre]]);function cct(t){let e=t==="default"?Xsr:t,r=Zsr.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(cct,"getChunkingAlgorithm");d();d();var Rre=Ne(rb()),MC=Ne(require("fs")),lct=require("os"),sh=Ne(require("path")),zD=require("process");var FIe=5e4,ear=new vt("workspaceChunks"),kre=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Oi(r.uri),i=(0,Rre.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=sh.join(tar(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,Rre.SHA256)(e).toString().substring(0,this.pathHashLength),n=sh.basename(e);return sh.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await MC.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await MC.promises.mkdir(sh.dirname(n),{recursive:!0}),await MC.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){ear.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await MC.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await MC.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=sh.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(sh.join(this.cacheRootPath,n))}}async getFileHash(e){let r=ls(e),n="";return r&&(n=await MC.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,Rre.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=ls(e);if(!i)return;async function o(p){try{return(await MC.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),c=await this.getChunksCache(e);if(c!==void 0&&c.version===t.CACHE_VERSION&&a!==void 0&&c.lastModified===a){this.chunksCountCache.set(i,c.documentChunks.length);return}let l=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let f={version:t.CACHE_VERSION,filePath:e,hash:l,lastModified:a,documentChunks:u};await this.setChunksCache(e,f)}async deleteChunksForSource(e){let r=Kc(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=ls(e);if(!r)return[];let n;try{n=await MC.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=Kc(sh.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await MC.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function tar(){return zD.env.XDG_CACHE_HOME&&sh.isAbsolute(zD.env.XDG_CACHE_HOME)?zD.env.XDG_CACHE_HOME+"/github-copilot":(0,lct.platform)()==="win32"?zD.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":zD.env.HOME+"/.cache/github-copilot"}s(tar,"getXdgCachePath");var OIe=1e4;var Pre=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new UIe;this.status="notStarted",this.workspaceChunks=new kre(e,r),this.cancellationToken=new QIe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(id).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>OIe&&(this._fileCountExceeded=!0,n=n.slice(0,OIe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ia(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>FIe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ia(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>FIe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>OIe&&(this._fileCountExceeded=!0),dGe(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await Oo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},QIe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},UIe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var Va=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=cct(r),i=new n;return new Pre(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=Dr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Rt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),c=Dr.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Rt(e,"index.chunk",c),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};d();d();d();d();d();function Dre(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(Dre,"toChatModeEnum");var GT=class{constructor(e,r){this.request=e;this.telemetryId=cr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}},Bre=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=cr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};d();d();d();var uct={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},dct="Alright, This response contains a code citation.";d();var fct=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;d();d();var pct=Ne(require("fs")),Kd=Ne(require("path"));var qIe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],HIe="test_",z7={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},Y7=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Oi(e),n=Kd.extname(r).replace(".",""),i=z7[n]??{location:"sameFolder",prefix:HIe,suffix:qIe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let f=r.replace(`.${n}`,u+"."+n);o.push(f)}let a=i.location??"sameFolder",c;if(a==="sameFolder"){if(c=ls(Gu(e)),c===void 0)return}else{let u=ls(e);if(u===void 0)return;c=this.determineTestFolder(u,a)}for(let u of o){let f=Kd.join(c,u),p=this.parseTestFilePath(f);if(p&&await this.fileExists(p))return p}let l=Kc(c);if(await this.fileExists(l))return Lo(l,o[0])}parseTestFilePath(e){try{return Kc(e)}catch(r){fn.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Oi(e),n=Kd.extname(r).replace(".",""),i=z7[n]??{location:"sameFolder",prefix:HIe,suffix:qIe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let l of i.suffix??[]){let f=r.substring(0,r.length-l.length-1-n.length)+"."+n;o.push(f)}let a=i.location??"sameFolder",c;a==="sameFolder"?c=Gu(e):c=this.determineImplFolder(e);for(let l of o){let u=Lo(c,l);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=ls(e);if(r===void 0)return;let n=Kd.extname(Oi(e)).replace(".",""),i,o=z7[n]?.location??"sameFolder";o==="sameFolder"?i=Kd.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,z7[n]);if(a.length>0)return Kc(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let c=`${e}${Kd.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(c),n?.suffix&&n?.suffix.some(l=>a.endsWith(l+r))&&o.push(c)}return o}_readdir(e){return pct.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&ls(this.baseUri))??"",i=Kd.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(Kd.sep)}getRelativeTestFolder(e,r,n,i){let o=Kd.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=Kd.extname(Oi(e)).replace(".",""),n=Gu(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function K7(t){let e=Oi(t),r=Kd.extname(e),n=z7[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(qIe.some(o=>e.endsWith(o+r))||e.startsWith(HIe))}s(K7,"isTestFile");d();var mct=["indexed","indexing","not_indexed"],jT=class{constructor(){this._cache=new Or(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Zp(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=dE(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let c=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:c,timestamp:Date.now()}),c}get cache(){return this._cache}};d();d();d();async function hct(t,e,r,n){let i=ho(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],c=await t.get(Qr).getToken(),l=UV(t,c,"embeddings"),u=c.token,f=0;for(;f<o.length&&!n.isCancellationRequested;){let p=o.slice(f,f+e.maxBatchSize),m=await rar(t,l,u,e.modelId,p,n);a.push(...m||[]),f+=e.maxBatchSize}return a.length?a:void 0}s(hct,"fetchEmbeddings");async function rar(t,e,r,n,i,o){let a=cr(),c=i.map(u=>u.text),l=await h_(t,e,r,void 0,a,{input:c,model:n,dimensions:1024},o,rI(t));if(l.status!==200||o.isCancellationRequested){Ia(t,new yv(`Failed to request dense embeddings, status: ${l.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await l.json()).data.map(f=>({id:i[f.index].id,embedding:f.embedding}))}catch{return}}s(rar,"sendEmbeddingsRequest");d();d();var Nre=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,c)=>a+c*c,0)),i=Math.sqrt(r.reduce((a,c)=>a+c*c,0));return e.reduce((a,c,l)=>a+c*r[l],0)/(n*i)}terminateScoring(){}};var nar="cosine",iar=new Map([["cosine",Nre]]);function gct(t){let e=t==="default"?nar:t,r=iar.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(gct,"getScoringAlgorithm");d();var Cp=class{constructor(){this.workspaceScoringProviders=new Or(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=gct(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var Act={modelFamily:WV.textEmbedding3Small,scoringType:"default",dimensions:null};async function yct(t,e,r,n,i,o,a,c=Act){let l={...Act,...c},u=sar(t,e,r,n);Ur.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let f=await t.get(Pa).getFirstMatchingEmbeddingModelConfiguration(l.modelFamily);if(f===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${l.modelFamily}`);let p=performance.now(),m=await hct(t,f,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(P=>P.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let E=performance.now(),x=aar(t,e,m,y,l.scoringType),b=performance.now();a.rerankingTimeMs=Math.floor(b-E);let _=x.slice(0,i);return Ur.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(P=>u.find(N=>N.id===P.id).id)}s(yct,"rerankSnippets");function sar(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(sar,"formatEmbeddingsInput");function aar(t,e,r,n,i){let o=t.get(Cp);return r.map(c=>({id:c.id,score:o.score(t,e,n.embedding,c.embedding,i)})).sort((c,l)=>l.score-c.score)}s(aar,"scoreEmbeddings");d();d();d();var GIe=Ne(_re());var car=.75,lar=1.2,uar=47,Lre=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await Mre();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(c=>c.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,uar),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(Va).getChunks(this.workspaceFolder),n=EE(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=EE(n,o=>o.chunk);return await dar(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(Va).getChunks(this.workspaceFolder),a=new WIe(i);for await(let c of o){let l=await far({...c,chunk:c.chunk.toLowerCase()},e,r,n);a.add({...l,chunk:c.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function dar(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let l of e){o++;let u=GIe.job(({snippet:f,keywords:p})=>p.map(h=>f.includes(h)?1:0),{data:{snippet:l,keywords:t}}).then(f=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,f[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),c={};for(let l=0;l<t.length;l++)c[t[l]]=Math.log((o-a[l]+.5)/(a[l]+.5)+1);return c}s(dar,"calculateIDFValues");async function far(t,e,r,n){return{score:await GIe.job(({keywords:o,document:a,docLength:c,avgTokenCount:l,idfValues:u,k1:f,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,E=g*(y*(f+1)),x=y+f*(1-p+p*c/l);m+=E/x}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:lar,b:car}}),...t}}s(far,"calculateBM25Score");var WIe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var mar="bm25",har=new Map([["bm25",Lre]]);function Cct(t){let e=t==="default"?mar:t,r=har.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(Cct,"getRankingAlgorithm");var Iu=class{constructor(){this.workspaceRankingProviders=new Or(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=Cct(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};d();async function Ect(t,e){let r=t.ctx,n=await Oo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(Tu).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},c=new ka(r),l=await cc(r,t),u=await c.fetchResponse(a,e,l.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let f=u.toolCalls[0],p=o.toolConfig?.extractArguments(f).keywords;return!p||!Array.isArray(p)?void 0:(Ur.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let f="reason"in u?u.reason:"";Ia(r,new yv(`Failed to request user query synonyms, result type: ${u.type}, reason: ${f}`),"LocalSnippetProvider.parseUserQuery")}}s(Ect,"parseUserQuery");var vct=Ne(yp());var yv=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},Fre=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(Va),o=i.status(e.turn.workspaceFolder),a=n.get(Iu),c=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&c==="completed")return Promise.resolve("indexed");if(o==="started"||c==="started")return Promise.resolve("indexing");if(r){let l=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,l).then(u=>{if(i.status(l)==="completed")return a.initialize(n,l,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(c==="notStarted"){let u=i.getChunks(l);return Promise.race([a.initialize(n,l,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(f=>setTimeout(()=>f("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(Va).chunkCount(n);if(a===0)return[];r.chunkCount=a;let c,l=performance.now();try{c=await Ect(e,e.cancelationToken)}catch(g){let y=new yv(g);Ia(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-l),c===void 0)return[];let f=i.get(Iu),p=[],m=performance.now();try{let g=await f.query(i,n,c);r.localSnippetCount=g.length,p=g}catch(g){let y=new yv(g);Ia(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Xr(e.turn.request.message),c=[];try{c=await yct(o,i,a,r,5,e.cancelationToken,n)}catch(f){let p=new yv(f);Ia(o,p,"LocalSnippetProvider.rerankSnippets")}let l=[],u=o.get(mn);for(let f of c){let p=f.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===f);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),E=ns.range(g,y);l.push({uri:m.document.uri,range:E,snippet:h.chunk})}}return l}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...gGe},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Ur.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(Va).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return vct.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var bct=Ne(xct()),Ure=Ne(_re()),Ict=Ne(require("os")),Tct=Ne(yp());var yar=Math.min(Math.max(Math.ceil(Ict.cpus().length/2),1),10),J7=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new bct.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await Ure.start({maxWorkers:yar})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await Ure.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},Mre=J7.startWorkerPool.bind(J7);var z4i=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),$Ie=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(YD);return}let r=[],n=this.turnContext.ctx.get(mn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:c,range:l}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let f=new NC(u.document,l,l),p=new Nt([c]),h=K7(a)?.5:.8;r.push([`Code excerpt from file \`${ls(a)}\`:`,1],[f.wrapInTicks(p,h),1]),await this.turnContext.collectFile(KD,a,Gs(u),l)}}if(r.length>0)return r.unshift([new Nt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Nt(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},YD="collect-project-context",Ore=class extends WD{constructor(r,n=[new Fre]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(SC).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await Mre(),!r.uri))return;let n=this.ctx.get(Va),i=this.ctx.get(id),o=this.ctx.get(Iu),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(Va);if(!r)return;let i=n.getParentFolder(r);if(i){let c=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Iu).deleteEmbeddings(this.ctx,i,c);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Iu).terminateRanking(this.ctx,r),this.ctx.get(Cp).terminateScoring(this.ctx,r),n.workspaceCount===0&&await J7.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(Va),o=this.ctx.get(Iu),a=this.ctx.get(Cp);for(let c of n)i.terminateChunking(this.ctx,c),await o.terminateRanking(this.ctx,c),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await Mre();try{let i=r.documents.map(l=>l.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(Va),c=this.ctx.get(Iu);if(r.type==="delete"||r.type==="update"){let l=await a.deleteFileChunks(o,i);await c.deleteEmbeddings(this.ctx,o,l)}if(r.type==="create"||r.type==="update"){let l=await a.chunk(this.ctx,o,r.documents);await c.addChunks(this.ctx,o,l)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(YD,"Collecting relevant project context"),await r.info(Tct.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async c=>c.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let c of mct){let l=i.findIndex(u=>u===c);if(l!==-1){o=c,a=this.snippetProviders[l];break}}switch(o){case"indexed":{let{snippets:c,measurements:l}=await a.provideSnippets(r);if(await AGe(r,a.providerType,l),c.length===0){await r.steps.error(YD,"No project context found");return}return await r.steps.finish(YD),c}case"indexing":{await r.steps.error(YD,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(YD,"No project context available");return}}}},KD="project-context",Qre=class extends Hl{static{s(this,"ProjectContextSkill")}constructor(e){super(KD,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new $Ie(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};d();var wct=I.Object({labels:I.Array(I.String())}),zIe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new Nt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new Nt([`- ${n}`]),.9]),this.turnContext.collectLabel(tA,n)}),new Nt(r)}},tA="project-labels",qre=class{constructor(e){this._resolver=e;this.id=tA;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new zIe(e)}};d();var Hre=Ne(yp());var Sct={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},Rct=Hre.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,kct=Hre.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,Car=Hre.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,YIe=`

`,_ct=Rct+YIe+kct;function Pct(t){let e=1;if(t.length===0)return{reply:_ct,vulnerabilities:e};if(t==="0")return{reply:_ct,vulnerabilities:0};if(t==="help")return{reply:Car,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=Rct+YIe:i==="c"&&(n+=kct+YIe);return{reply:n.trimEnd(),vulnerabilities:e}}s(Pct,"parseVulnerabilitiesInstructions");var Bct=Ne(yp());var Ear="Oops, your response got filtered. Vote down if you think this shouldn't have happened",xar="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",KIe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},bar=new KIe,JIe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Wl(xar,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},Iar=new JIe,XIe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Wl("Alright, I'm producing a notification",void 0,[],o)}},Tar=new XIe,ZIe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Wl(Ear,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},war=new ZIe,eTe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Wl(await Nct(e))}},_ar=new eTe,tTe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[tA,ad]}instructions(e,r){return"Create a function that prints a christmas tree"}},Sar=new tTe,rTe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Wl(Xr(e.turn.request.message))}},Rar=new rTe,nTe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Gl).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=Bct.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Wl(i)}return new Wl("No prompt available")}},kar=new nTe,iTe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Wl(await Lct(e,n,i))}},Par=new iTe,oTe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=Pct(r);for(let o=0;o<i;o++)e.turn.annotations.push(Sct);return new Wl(n,void 0,e.turn.annotations)}},Bar=new oTe,sTe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(uct),new Wl(dct,void 0,e.turn.annotations)}},Dar=new sTe,aTe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Wl(fct)}},Nar=new aTe,cTe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},Lar=new cTe,lTe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[KD]}},Mar=new lTe,uTe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Wl("Alright, I'm producing a notification",void 0,[],[],[],e)}},Far=new uTe;function Dct(){return[bar,Iar,Tar,war,Sar,_ar,Rar,kar,Par,Bar,Dar,Far,Nar,Lar,Mar]}s(Dct,"getDebugTemplates");d();d();function $T(t,e){if(t.length==0)return new Nt([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new Nt(r)}s($T,"weighElidableList");var Mct=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:rc}))}),dTe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(zT,e.uri,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(zT,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(zT,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new Nt([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),$T(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new Nt([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let c=r.document.detectedLanguageId;i.push(new Nt([["```"+c,1],[W0(a),.8],["```",1]]))}return new Nt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await Oo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},zT="problems-in-active-document",Wre=class extends Hl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(zT,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new dTe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};d();d();var Gre=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(pr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new Y7(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=K7(e.uri);if(o&&!a){let c=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(c,o);{let l=i.findExampleTestFile(e.uri);if(l)return await this.asExampleFilePrompt(c,l)}}}async fromTestFile(e){if(!K7(e))return;let n=this.turnContext.ctx.get(pr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new Y7(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let c=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(c,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Oar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Qar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new Nt([[`${Uar} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Nt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(mn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(rA,e,Gs(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[W0(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(yo).stat(e),!0}catch{return!1}}}},Oar="Code excerpt from the implementation source file",Qar="Code excerpt from the test file",Uar="Code excerpt from an example test file";var Fct=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),pTe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=new Gre(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rA,e.testFileUri,Gs(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rA,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(rA,e.sourceFileUri,Gs(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(rA,e.testFileUri,Gs(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},rA="test-context",jre=class extends Hl{static{s(this,"TestContextSkill")}constructor(e){super(rA,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new pTe(r))}};d();var Oct=Ne(yp());var Qct=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:rc}))}),mTe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(qR,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new Nt(["The latest test run produced the following failures and errors:"]);return new Nt([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(mn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let c=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(qR,o,Gs(c)),c.status==="valid"){let l=r.getRelativePath(c.document),u=this.createElidableFailuresOfDoc(a,l),f=this.appendCode(u,l,c.document);n.push([f,1])}}if(n.length>0)return new Nt(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,c=` in file \`${r}\` `,l=". ";i.failureReason&&(l=" with the following error:",i.failureReason.includes(`
`)?l+="\n```\n"+i.failureReason+"\n```\n":l+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Nt([Oct.default`\n\n- Test ${o}${a}${c}failed${l}The failed test is ${u}.\n`]),1]});return new Nt(n)}appendCode(e,r,n){let i=[new Nt([`
The code of file \`${r}\` is:
`]),.6],o=[new Nt([["```"+n.detectedLanguageId,1],[W0(n.getText()),.9],["```",1]]),.7];return new Nt([[e,1],i,o])}},qR="test-failures",Vre=class extends Hl{static{s(this,"TestFailuresSkill")}constructor(e){super(qR,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new mTe(r))}};var ah=Ne(yp());var Wl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},HR=class{constructor(e,r,n,i,o=[],a=[],c,l=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=c;this.producesCodeEdits=l}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},qar=new HR("tests","Generate unit tests","Generate Tests",ah.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[rA,qR],["chat-panel","editor"]),Har=new HR("simplify","Simplify the code","Simplify This",ah.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],ah.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),War=new HR("fix","Fix problems and compile errors","Fix This",ah.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[zT],["editor","chat-panel","inline"],ah.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),Gar=new HR("explain","Explain how the code works","Explain This",ah.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],ah.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),jar=new HR("doc","Document the current selection of code","Generate Docs",ah.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],ah.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),hTe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=yTe(e.conversation),n=ah.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Wl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Wl(n)}},Var=new hTe,gTe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=ATe(e.ctx).filter(i=>i!=this),n=ah.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Wl(n)}},$ar=new gTe;function X7(){return[qar,Har,War,Gar,jar,Var,$ar,...Dct()]}s(X7,"getPromptTemplates");function ATe(t){let e=X7();return!x6(t)&&!Lh(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s(ATe,"getUserFacingPromptTemplates");var CTe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Wi=class{constructor(e){this.ctx=e;this.conversations=new Or(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new Bre([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(cl).getDescriptors().map(c=>c.id)),this.conversations.set(o.id,new CTe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,c,l){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),c&&c.length>0&&(r.ignoredSkills=c.map(f=>({skillId:f}))),l&&(r.agent={agentSlug:l.agentSlug},r.confirmationResponse=l),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&Xr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Xr(r.request.message),"@");(await OC(this.ctx)).find(c=>c.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(Xr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Xr(r.request.message),"/"),o=X7().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(cl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};d();function tlt(t){return typeof t>"u"||t===null}s(tlt,"isNothing");function zar(t){return typeof t=="object"&&t!==null}s(zar,"isObject");function Yar(t){return Array.isArray(t)?t:tlt(t)?[]:[t]}s(Yar,"toArray");function Kar(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(Kar,"extend");function Jar(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(Jar,"repeat");function Xar(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(Xar,"isNegativeZero");var Zar=tlt,ecr=zar,tcr=Yar,rcr=Jar,ncr=Xar,icr=Kar,ll={isNothing:Zar,isObject:ecr,toArray:tcr,repeat:rcr,isNegativeZero:ncr,extend:icr};function rlt(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(rlt,"formatError");function eQ(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=rlt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(eQ,"YAMLException$1");eQ.prototype=Object.create(Error.prototype);eQ.prototype.constructor=eQ;eQ.prototype.toString=s(function(e){return this.name+": "+rlt(this,e)},"toString");var r0=eQ;function ETe(t,e,r,n,i){var o="",a="",c=Math.floor(i/2)-1;return n-e>c&&(o=" ... ",e=n-c+o.length),r-n>c&&(a=" ...",r=n+c-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(ETe,"getLine");function vTe(t,e){return ll.repeat(" ",e-t.length)+t}s(vTe,"padStart");function ocr(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",l,u,f=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+f+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=ETe(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),p),c=ll.repeat(" ",e.indent)+vTe((t.line-l+1).toString(),f)+" | "+u.str+`
`+c;for(u=ETe(t.buffer,n[a],i[a],t.position,p),c+=ll.repeat(" ",e.indent)+vTe((t.line+1).toString(),f)+" | "+u.str+`
`,c+=ll.repeat("-",e.indent+f+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=ETe(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),p),c+=ll.repeat(" ",e.indent)+vTe((t.line+l+1).toString(),f)+" | "+u.str+`
`;return c.replace(/\n$/,"")}s(ocr,"makeSnippet");var scr=ocr,acr=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ccr=["scalar","sequence","mapping"];function lcr(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(lcr,"compileStyleAliases");function ucr(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(acr.indexOf(r)===-1)throw new r0('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=lcr(e.styleAliases||null),ccr.indexOf(this.kind)===-1)throw new r0('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(ucr,"Type$1");var cd=ucr;function Uct(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(Uct,"compileList");function dcr(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s(dcr,"compileMap");function bTe(t){return this.extend(t)}s(bTe,"Schema$1");bTe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof cd)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new r0("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof cd))throw new r0("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new r0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new r0("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof cd))throw new r0("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(bTe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Uct(i,"implicit"),i.compiledExplicit=Uct(i,"explicit"),i.compiledTypeMap=dcr(i.compiledImplicit,i.compiledExplicit),i},"extend");var fcr=bTe,pcr=new cd("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),mcr=new cd("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),hcr=new cd("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),gcr=new fcr({explicit:[pcr,mcr,hcr]});function Acr(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(Acr,"resolveYamlNull");function ycr(){return null}s(ycr,"constructYamlNull");function Ccr(t){return t===null}s(Ccr,"isNull");var Ecr=new cd("tag:yaml.org,2002:null",{kind:"scalar",resolve:Acr,construct:ycr,predicate:Ccr,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function vcr(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(vcr,"resolveYamlBoolean");function xcr(t){return t==="true"||t==="True"||t==="TRUE"}s(xcr,"constructYamlBoolean");function bcr(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(bcr,"isBoolean");var Icr=new cd("tag:yaml.org,2002:bool",{kind:"scalar",resolve:vcr,construct:xcr,predicate:bcr,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Tcr(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(Tcr,"isHexCode");function wcr(t){return 48<=t&&t<=55}s(wcr,"isOctCode");function _cr(t){return 48<=t&&t<=57}s(_cr,"isDecCode");function Scr(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Tcr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!wcr(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!_cr(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(Scr,"resolveYamlInteger");function Rcr(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(Rcr,"constructYamlInteger");function kcr(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ll.isNegativeZero(t)}s(kcr,"isInteger");var Pcr=new cd("tag:yaml.org,2002:int",{kind:"scalar",resolve:Scr,construct:Rcr,predicate:kcr,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Bcr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Dcr(t){return!(t===null||!Bcr.test(t)||t[t.length-1]==="_")}s(Dcr,"resolveYamlFloat");function Ncr(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(Ncr,"constructYamlFloat");var Lcr=/^[-+]?[0-9]+e/;function Mcr(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ll.isNegativeZero(t))return"-0.0";return r=t.toString(10),Lcr.test(r)?r.replace("e",".e"):r}s(Mcr,"representYamlFloat");function Fcr(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ll.isNegativeZero(t))}s(Fcr,"isFloat");var Ocr=new cd("tag:yaml.org,2002:float",{kind:"scalar",resolve:Dcr,construct:Ncr,predicate:Fcr,represent:Mcr,defaultStyle:"lowercase"}),Qcr=gcr.extend({implicit:[Ecr,Icr,Pcr,Ocr]}),Ucr=Qcr,nlt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ilt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function qcr(t){return t===null?!1:nlt.exec(t)!==null||ilt.exec(t)!==null}s(qcr,"resolveYamlTimestamp");function Hcr(t){var e,r,n,i,o,a,c,l=0,u=null,f,p,m;if(e=nlt.exec(t),e===null&&(e=ilt.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],c=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(f=+e[10],p=+(e[11]||0),u=(f*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,c,l)),u&&m.setTime(m.getTime()-u),m}s(Hcr,"constructYamlTimestamp");function Wcr(t){return t.toISOString()}s(Wcr,"representYamlTimestamp");var Gcr=new cd("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:qcr,construct:Hcr,instanceOf:Date,represent:Wcr});function jcr(t){return t==="<<"||t===null}s(jcr,"resolveYamlMerge");var Vcr=new cd("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jcr}),STe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function $cr(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=STe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s($cr,"resolveYamlBinary");function zcr(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=STe,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):r===18?(c.push(a>>10&255),c.push(a>>2&255)):r===12&&c.push(a>>4&255),new Uint8Array(c)}s(zcr,"constructYamlBinary");function Ycr(t){var e="",r=0,n,i,o=t.length,a=STe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(Ycr,"representYamlBinary");function Kcr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(Kcr,"isBinary");var Jcr=new cd("tag:yaml.org,2002:binary",{kind:"scalar",resolve:$cr,construct:zcr,predicate:Kcr,represent:Ycr}),Xcr=Object.prototype.hasOwnProperty,Zcr=Object.prototype.toString;function elr(t){if(t===null)return!0;var e=[],r,n,i,o,a,c=t;for(r=0,n=c.length;r<n;r+=1){if(i=c[r],a=!1,Zcr.call(i)!=="[object Object]")return!1;for(o in i)if(Xcr.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(elr,"resolveYamlOmap");function tlr(t){return t!==null?t:[]}s(tlr,"constructYamlOmap");var rlr=new cd("tag:yaml.org,2002:omap",{kind:"sequence",resolve:elr,construct:tlr}),nlr=Object.prototype.toString;function ilr(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],nlr.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(ilr,"resolveYamlPairs");function olr(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(olr,"constructYamlPairs");var slr=new cd("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ilr,construct:olr}),alr=Object.prototype.hasOwnProperty;function clr(t){if(t===null)return!0;var e,r=t;for(e in r)if(alr.call(r,e)&&r[e]!==null)return!1;return!0}s(clr,"resolveYamlSet");function llr(t){return t!==null?t:{}}s(llr,"constructYamlSet");var ulr=new cd("tag:yaml.org,2002:set",{kind:"mapping",resolve:clr,construct:llr}),olt=Ucr.extend({implicit:[Gcr,Vcr],explicit:[Jcr,rlr,slr,ulr]}),KT=Object.prototype.hasOwnProperty,$re=1,slt=2,alt=3,zre=4,xTe=1,dlr=2,qct=3,flr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,plr=/[\x85\u2028\u2029]/,mlr=/[,\[\]\{\}]/,clt=/^(?:!|!!|![a-z\-]+!)$/i,llt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Hct(t){return Object.prototype.toString.call(t)}s(Hct,"_class");function QC(t){return t===10||t===13}s(QC,"is_EOL");function GR(t){return t===9||t===32}s(GR,"is_WHITE_SPACE");function n0(t){return t===9||t===32||t===10||t===13}s(n0,"is_WS_OR_EOL");function XD(t){return t===44||t===91||t===93||t===123||t===125}s(XD,"is_FLOW_INDICATOR");function hlr(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(hlr,"fromHexCode");function glr(t){return t===120?2:t===117?4:t===85?8:0}s(glr,"escapedHexLen");function Alr(t){return 48<=t&&t<=57?t-48:-1}s(Alr,"fromDecimalCode");function Wct(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(Wct,"simpleEscapeSequence");function ylr(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(ylr,"charFromCodepoint");var ult=new Array(256),dlt=new Array(256);for(WR=0;WR<256;WR++)ult[WR]=Wct(WR)?1:0,dlt[WR]=Wct(WR);var WR;function Clr(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||olt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(Clr,"State$1");function flt(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=scr(r),new r0(e,r)}s(flt,"generateError");function Zr(t,e){throw flt(t,e)}s(Zr,"throwError");function Yre(t,e){t.onWarning&&t.onWarning.call(null,flt(t,e))}s(Yre,"throwWarning");var Gct={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&Zr(e,"duplication of %YAML directive"),n.length!==1&&Zr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Zr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&Zr(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Yre(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&Zr(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],clt.test(i)||Zr(e,"ill-formed tag handle (first argument) of the TAG directive"),KT.call(e.tagMap,i)&&Zr(e,'there is a previously declared suffix for "'+i+'" tag handle'),llt.test(o)||Zr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Zr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function YT(t,e,r,n){var i,o,a,c;if(e<r){if(c=t.input.slice(e,r),n)for(i=0,o=c.length;i<o;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||Zr(t,"expected valid JSON character");else flr.test(c)&&Zr(t,"the stream contains non-printable characters");t.result+=c}}s(YT,"captureSegment");function jct(t,e,r,n){var i,o,a,c;for(ll.isObject(r)||Zr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,c=i.length;a<c;a+=1)o=i[a],KT.call(e,o)||(e[o]=r[o],n[o]=!0)}s(jct,"mergeMappings");function ZD(t,e,r,n,i,o,a,c,l){var u,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,f=i.length;u<f;u+=1)Array.isArray(i[u])&&Zr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Hct(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Hct(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,f=o.length;u<f;u+=1)jct(t,e,o[u],r);else jct(t,e,o,r);else!t.json&&!KT.call(r,i)&&KT.call(e,i)&&(t.line=a||t.line,t.lineStart=c||t.lineStart,t.position=l||t.position,Zr(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s(ZD,"storeMappingPair");function RTe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Zr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(RTe,"readLineBreak");function Gc(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;GR(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(QC(i))for(RTe(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Yre(t,"deficient indentation"),n}s(Gc,"skipSeparationSpace");function Xre(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||n0(r)))}s(Xre,"testDocumentSeparator");function kTe(t,e){e===1?t.result+=" ":e>1&&(t.result+=ll.repeat(`
`,e-1))}s(kTe,"writeFoldedLines");function Elr(t,e,r){var n,i,o,a,c,l,u,f,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),n0(h)||XD(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),n0(i)||r&&XD(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,c=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),n0(i)||r&&XD(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),n0(n))break}else{if(t.position===t.lineStart&&Xre(t)||r&&XD(h))break;if(QC(h))if(l=t.line,u=t.lineStart,f=t.lineIndent,Gc(t,!1,-1),t.lineIndent>=e){c=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=f;break}}c&&(YT(t,o,a,!1),kTe(t,t.line-l),o=a=t.position,c=!1),GR(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return YT(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(Elr,"readPlainScalar");function vlr(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(YT(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else QC(r)?(YT(t,n,i,!0),kTe(t,Gc(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Xre(t)?Zr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Zr(t,"unexpected end of the stream within a single quoted scalar")}s(vlr,"readSingleQuotedScalar");function xlr(t,e){var r,n,i,o,a,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return YT(t,r,t.position,!0),t.position++,!0;if(c===92){if(YT(t,r,t.position,!0),c=t.input.charCodeAt(++t.position),QC(c))Gc(t,!1,e);else if(c<256&&ult[c])t.result+=dlt[c],t.position++;else if((a=glr(c))>0){for(i=a,o=0;i>0;i--)c=t.input.charCodeAt(++t.position),(a=hlr(c))>=0?o=(o<<4)+a:Zr(t,"expected hexadecimal character");t.result+=ylr(o),t.position++}else Zr(t,"unknown escape sequence");r=n=t.position}else QC(c)?(YT(t,r,n,!0),kTe(t,Gc(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Xre(t)?Zr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Zr(t,"unexpected end of the stream within a double quoted scalar")}s(xlr,"readDoubleQuotedScalar");function blr(t,e){var r=!0,n,i,o,a=t.tag,c,l=t.anchor,u,f,p,m,h,g=Object.create(null),y,E,x,b;if(b=t.input.charCodeAt(t.position),b===91)f=93,h=!1,c=[];else if(b===123)f=125,h=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),b=t.input.charCodeAt(++t.position);b!==0;){if(Gc(t,!0,e),b=t.input.charCodeAt(t.position),b===f)return t.position++,t.tag=a,t.anchor=l,t.kind=h?"mapping":"sequence",t.result=c,!0;r?b===44&&Zr(t,"expected the node content, but found ','"):Zr(t,"missed comma between flow collection entries"),E=y=x=null,p=m=!1,b===63&&(u=t.input.charCodeAt(t.position+1),n0(u)&&(p=m=!0,t.position++,Gc(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,eN(t,e,$re,!1,!0),E=t.tag,y=t.result,Gc(t,!0,e),b=t.input.charCodeAt(t.position),(m||t.line===n)&&b===58&&(p=!0,b=t.input.charCodeAt(++t.position),Gc(t,!0,e),eN(t,e,$re,!1,!0),x=t.result),h?ZD(t,c,g,E,y,x,n,i,o):p?c.push(ZD(t,null,g,E,y,x,n,i,o)):c.push(y),Gc(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}Zr(t,"unexpected end of the stream within a flow collection")}s(blr,"readFlowCollection");function Ilr(t,e){var r,n,i=xTe,o=!1,a=!1,c=e,l=0,u=!1,f,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)xTe===i?i=p===43?qct:dlr:Zr(t,"repeat of a chomping mode identifier");else if((f=Alr(p))>=0)f===0?Zr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Zr(t,"repeat of an indentation width identifier"):(c=e+f-1,a=!0);else break;if(GR(p)){do p=t.input.charCodeAt(++t.position);while(GR(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!QC(p)&&p!==0)}for(;p!==0;){for(RTe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<c)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>c&&(c=t.lineIndent),QC(p)){l++;continue}if(t.lineIndent<c){i===qct?t.result+=ll.repeat(`
`,o?1+l:l):i===xTe&&o&&(t.result+=`
`);break}for(n?GR(p)?(u=!0,t.result+=ll.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=ll.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=ll.repeat(`
`,l):t.result+=ll.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!QC(p)&&p!==0;)p=t.input.charCodeAt(++t.position);YT(t,r,t.position,!1)}return!0}s(Ilr,"readBlockScalar");function Vct(t,e){var r,n=t.tag,i=t.anchor,o=[],a,c=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Zr(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!n0(a))));){if(c=!0,t.position++,Gc(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,eN(t,e,alt,!1,!0),o.push(t.result),Gc(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)Zr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(Vct,"readBlockSequence");function Tlr(t,e,r){var n,i,o,a,c,l,u=t.tag,f=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,E=!1,x=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),b=t.input.charCodeAt(t.position);b!==0;){if(!E&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Zr(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(b===63||b===58)&&n0(n))b===63?(E&&(ZD(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!0,i=!0):E?(E=!1,i=!0):Zr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(a=t.line,c=t.lineStart,l=t.position,!eN(t,r,slt,!1,!0))break;if(t.line===o){for(b=t.input.charCodeAt(t.position);GR(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),n0(b)||Zr(t,"a whitespace character is expected after the key-value separator within a block mapping"),E&&(ZD(t,p,m,h,g,null,a,c,l),h=g=y=null),x=!0,E=!1,i=!1,h=t.tag,g=t.result;else if(x)Zr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=f,!0}else if(x)Zr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=f,!0}if((t.line===o||t.lineIndent>e)&&(E&&(a=t.line,c=t.lineStart,l=t.position),eN(t,e,zre,!0,i)&&(E?g=t.result:y=t.result),E||(ZD(t,p,m,h,g,y,a,c,l),h=g=y=null),Gc(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&b!==0)Zr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return E&&ZD(t,p,m,h,g,null,a,c,l),x&&(t.tag=u,t.anchor=f,t.kind="mapping",t.result=p),x}s(Tlr,"readBlockMapping");function wlr(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&Zr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Zr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!n0(a);)a===33&&(n?Zr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),clt.test(i)||Zr(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),mlr.test(o)&&Zr(t,"tag suffix cannot contain flow indicator characters")}o&&!llt.test(o)&&Zr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Zr(t,"tag name is malformed: "+o)}return r?t.tag=o:KT.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:Zr(t,'undeclared tag handle "'+i+'"'),!0}s(wlr,"readTagProperty");function _lr(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&Zr(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!n0(r)&&!XD(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Zr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(_lr,"readAnchorProperty");function Slr(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!n0(n)&&!XD(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Zr(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),KT.call(t.anchorMap,r)||Zr(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Gc(t,!0,-1),!0}s(Slr,"readAlias");function eN(t,e,r,n,i){var o,a,c,l=1,u=!1,f=!1,p,m,h,g,y,E;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=c=zre===r||alt===r,n&&Gc(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;wlr(t)||_lr(t);)Gc(t,!0,-1)?(u=!0,c=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):c=!1;if(c&&(c=u||i),(l===1||zre===r)&&($re===r||slt===r?y=e:y=e+1,E=t.position-t.lineStart,l===1?c&&(Vct(t,E)||Tlr(t,E,y))||blr(t,y)?f=!0:(a&&Ilr(t,y)||vlr(t,y)||xlr(t,y)?f=!0:Slr(t)?(f=!0,(t.tag!==null||t.anchor!==null)&&Zr(t,"alias node should not have any properties")):Elr(t,y,$re===r)&&(f=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(f=c&&Vct(t,E))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Zr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(KT.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||Zr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&Zr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Zr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||f}s(eN,"composeNode");function Rlr(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(Gc(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!n0(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&Zr(t,"directive name must not be less than one character in length");a!==0;){for(;GR(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!QC(a));break}if(QC(a))break;for(r=t.position;a!==0&&!n0(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&RTe(t),KT.call(Gct,n)?Gct[n](t,n,i):Yre(t,'unknown document directive "'+n+'"')}if(Gc(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Gc(t,!0,-1)):o&&Zr(t,"directives end mark is expected"),eN(t,t.lineIndent-1,zre,!1,!0),Gc(t,!0,-1),t.checkLineBreaks&&plr.test(t.input.slice(e,t.position))&&Yre(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Xre(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Gc(t,!0,-1));return}if(t.position<t.length-1)Zr(t,"end of the stream or a document separator is expected");else return}s(Rlr,"readDocument");function plt(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Clr(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,Zr(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Rlr(r);return r.documents}s(plt,"loadDocuments");function klr(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=plt(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(klr,"loadAll$1");function Plr(t,e){var r=plt(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new r0("expected a single document in the stream, but found more")}}s(Plr,"load$1");var Blr=klr,Dlr=Plr,mlt={loadAll:Blr,load:Dlr},hlt=Object.prototype.toString,glt=Object.prototype.hasOwnProperty,PTe=65279,Nlr=9,tQ=10,Llr=13,Mlr=32,Flr=33,Olr=34,ITe=35,Qlr=37,Ulr=38,qlr=39,Hlr=42,Alt=44,Wlr=45,Kre=58,Glr=61,jlr=62,Vlr=63,$lr=64,ylt=91,Clt=93,zlr=96,Elt=123,Ylr=124,vlt=125,ld={};ld[0]="\\0";ld[7]="\\a";ld[8]="\\b";ld[9]="\\t";ld[10]="\\n";ld[11]="\\v";ld[12]="\\f";ld[13]="\\r";ld[27]="\\e";ld[34]='\\"';ld[92]="\\\\";ld[133]="\\N";ld[160]="\\_";ld[8232]="\\L";ld[8233]="\\P";var Klr=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Jlr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Xlr(t,e){var r,n,i,o,a,c,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&glt.call(l.styleAliases,c)&&(c=l.styleAliases[c]),r[a]=c;return r}s(Xlr,"compileStyleMap");function Zlr(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new r0("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ll.repeat("0",n-e.length)+e}s(Zlr,"encodeHex");var eur=1,rQ=2;function tur(t){this.schema=t.schema||olt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ll.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Xlr(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?rQ:eur,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(tur,"State");function $ct(t,e){for(var r=ll.repeat(" ",e),n=0,i=-1,o="",a,c=t.length;n<c;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=c):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s($ct,"indentString");function TTe(t,e){return`
`+ll.repeat(" ",t.indent*e)}s(TTe,"generateNextLine");function rur(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(rur,"testImplicitResolving");function Jre(t){return t===Mlr||t===Nlr}s(Jre,"isWhitespace");function nQ(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==PTe||65536<=t&&t<=1114111}s(nQ,"isPrintable");function zct(t){return nQ(t)&&t!==PTe&&t!==Llr&&t!==tQ}s(zct,"isNsCharOrWhitespace");function Yct(t,e,r){var n=zct(t),i=n&&!Jre(t);return(r?n:n&&t!==Alt&&t!==ylt&&t!==Clt&&t!==Elt&&t!==vlt)&&t!==ITe&&!(e===Kre&&!i)||zct(e)&&!Jre(e)&&t===ITe||e===Kre&&i}s(Yct,"isPlainSafe");function nur(t){return nQ(t)&&t!==PTe&&!Jre(t)&&t!==Wlr&&t!==Vlr&&t!==Kre&&t!==Alt&&t!==ylt&&t!==Clt&&t!==Elt&&t!==vlt&&t!==ITe&&t!==Ulr&&t!==Hlr&&t!==Flr&&t!==Ylr&&t!==Glr&&t!==jlr&&t!==qlr&&t!==Olr&&t!==Qlr&&t!==$lr&&t!==zlr}s(nur,"isPlainSafeFirst");function iur(t){return!Jre(t)&&t!==Kre}s(iur,"isPlainSafeLast");function Z7(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(Z7,"codePointAt");function xlt(t){var e=/^\n* /;return e.test(t)}s(xlt,"needIndentIndicator");var blt=1,wTe=2,Ilt=3,Tlt=4,JD=5;function our(t,e,r,n,i,o,a,c){var l,u=0,f=null,p=!1,m=!1,h=n!==-1,g=-1,y=nur(Z7(t,0))&&iur(Z7(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=Z7(t,l),!nQ(u))return JD;y=y&&Yct(u,f,c),f=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=Z7(t,l),u===tQ)p=!0,h&&(m=m||l-g-1>n&&t[g+1]!==" ",g=l);else if(!nQ(u))return JD;y=y&&Yct(u,f,c),f=u}m=m||h&&l-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?blt:o===rQ?JD:wTe:r>9&&xlt(t)?JD:a?o===rQ?JD:wTe:m?Tlt:Ilt}s(our,"chooseScalarStyle");function sur(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===rQ?'""':"''";if(!t.noCompatMode&&(Klr.indexOf(e)!==-1||Jlr.test(e)))return t.quotingType===rQ?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return rur(t,u)}switch(s(l,"testAmbiguity"),our(e,c,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case blt:return e;case wTe:return"'"+e.replace(/'/g,"''")+"'";case Ilt:return"|"+Kct(e,t.indent)+Jct($ct(e,o));case Tlt:return">"+Kct(e,t.indent)+Jct($ct(aur(e,a),o));case JD:return'"'+cur(e)+'"';default:throw new r0("impossible error: invalid scalar style")}}()}s(sur,"writeScalar");function Kct(t,e){var r=xlt(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(Kct,"blockHeader");function Jct(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(Jct,"dropEndingNewline");function aur(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Xct(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var c=a[1],l=a[2];o=l[0]===" ",n+=c+(!i&&!o&&l!==""?`
`:"")+Xct(l,e),i=o}return n}s(aur,"foldString");function Xct(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,c=0,l="";n=r.exec(t);)c=n.index,c-i>e&&(o=a>i?a:c,l+=`
`+t.slice(i,o),i=o+1),a=c;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}s(Xct,"foldLine");function cur(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Z7(t,i),n=ld[r],!n&&nQ(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||Zlr(r);return e}s(cur,"escapeString");function lur(t,e,r){var n="",i=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(Ev(t,e,c,!1,!1)||typeof c>"u"&&Ev(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(lur,"writeFlowSequence");function Zct(t,e,r,n){var i="",o=t.tag,a,c,l;for(a=0,c=r.length;a<c;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(Ev(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Ev(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=TTe(t,e)),t.dump&&tQ===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(Zct,"writeBlockSequence");function uur(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,c,l,u,f;for(a=0,c=o.length;a<c;a+=1)f="",n!==""&&(f+=", "),t.condenseFlow&&(f+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),Ev(t,e,l,!1,!1)&&(t.dump.length>1024&&(f+="? "),f+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ev(t,e,u,!1,!1)&&(f+=t.dump,n+=f));t.tag=i,t.dump="{"+n+"}"}s(uur,"writeFlowMapping");function dur(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),c,l,u,f,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new r0("sortKeys must be a boolean or a function");for(c=0,l=a.length;c<l;c+=1)m="",(!n||i!=="")&&(m+=TTe(t,e)),u=a[c],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),Ev(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&tQ===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=TTe(t,e)),Ev(t,e+1,f,!0,p)&&(t.dump&&tQ===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(dur,"writeBlockMapping");function elt(t,e,r){var n,i,o,a,c,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(c=i[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(r?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(l=t.styleMap[c.tag]||c.defaultStyle,hlt.call(c.represent)==="[object Function]")n=c.represent(e,l);else if(glt.call(c.represent,l))n=c.represent[l](e,l);else throw new r0("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}s(elt,"detectType");function Ev(t,e,r,n,i,o,a){t.tag=null,t.dump=r,elt(t,r,!1)||elt(t,r,!0);var c=hlt.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var f=c==="[object Object]"||c==="[object Array]",p,m;if(f&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(f&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),c==="[object Object]")n&&Object.keys(t.dump).length!==0?(dur(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(uur(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Zct(t,e-1,t.dump,i):Zct(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(lur(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&sur(t,t.dump,e,o,l);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new r0("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Ev,"writeNode");function fur(t,e){var r=[],n=[],i,o;for(_Te(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(fur,"getDuplicateReferences");function _Te(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)_Te(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)_Te(t[n[i]],e,r)}s(_Te,"inspectNode");function pur(t,e){e=e||{};var r=new tur(e);r.noRefs||fur(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ev(r,0,n,!0,!0)?r.dump+`
`:""}s(pur,"dump$1");var mur=pur,hur={dump:mur};function BTe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(BTe,"renamed");var q3i=mlt.load,H3i=mlt.loadAll,DTe=hur.dump;var W3i=BTe("safeLoad","load"),G3i=BTe("safeLoadAll","loadAll"),j3i=BTe("safeDump","dump");var jR=Ne(yp());var NTe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Gl=class{constructor(){this.dump=new Or(25);this.promptsDump=new Or(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new NTe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function wlt(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(wlt,"filterConversationTurns");function yTe(t){return wlt(t).getLastTurn()?.id}s(yTe,"getLastTurnId");async function Nct(t){let e=wlt(t.conversation),r=yTe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Gl).getDump(r),o=yur(i,e.turns);fn.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await Cur(i,t.ctx);return jR.default`
        ${Aur(t.conversation,r)}
        ${gur(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(Nct,"getConversationDump");function gur(t){let e=t.get(nn);return jR.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(gur,"getEditorInfoDumpMessage");function Aur(t,e){return jR.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(Aur,"getInfoDumpMessage");async function Lct(t,e,r){let n=t.ctx.get(cl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Wi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Xr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Xr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=jR.default`
            \n\n
            **Description**
            
            ${a.description()}`;let c=n.getSkill(a.id),l=await c?.resolver(t).resolveSkill(t);if(l){i+=jR.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${DTe(l)}
                \`\`\``;let u=await c?.processor(t).processSkill(l,t);if(u){let f=typeof u=="string"?u:u.elide(1e3).getText();i+=jR.default`
                    \n\n
                    **Processed value**
                    
                    ${f}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(Lct,"getSkillsDump");function yur(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:Xr(n.request.message)};return n.response&&(o.response=Xr(n.response.message)),o})};return DTe(r)}s(yur,"toSimulationFormat");async function Cur(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(mn).getOrReadTextDocument(o),c;a.status==="valid"&&(c=a.document);let l=c?.getText();fn.debug(e,`conversation.dump.file
`,l),i+=`
**${o.uri}**

\`\`\`${c?.detectedLanguageId}
${l}
\`\`\``}return i}s(Cur,"fileDump");d();function LTe(t,e){let r=ho(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(Xr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(LTe,"countMessagesTokens");d();function _lt(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),c=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",l=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",f=r?`The user is logged in as ${r} on GitHub.`:"";return[o,l,u,f,c,a].filter(p=>p&&p!="").join(`
`)}s(_lt,"chatBasePrompt");d();d();d();d();d();function Slt(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([W0(i.join(`
`)),1]),i=[],r.push([new Nt([o]),1])):r.push([new Nt([o]),1]),n=!n):n?i.push(o):r.push([new Nt([o]),.8]);return n&&(r.push([W0(i.join(`
`)),1]),r.push([new Nt(["```"]),1])),new Nt(r)}s(Slt,"fromMessage");function tN(t){let e=MTe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=Rlt(i.request,n+1),a=i.response&&i.response?.type!=="meta"?Rlt(i.response):"",c=o;a!==""&&(c+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(Slt(c))}return r.length>0?new Nt([[new Nt(["Consider the following conversation history:"]),1],[$T(r,"inverseLinear"),1]]):null}s(tN,"fromHistory");var Eur=5;function MTe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&Xr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,Eur).reverse()}s(MTe,"filterTurns");function Rlt(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=Xr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${Xr(t.message)}`}s(Rlt,"formatTurnMessage");d();d();d();var vur=4,FTe={skillIds:[]},Zre=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let c=await Oo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),l={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:c},u=await this.ctx.get(Tu).toPrompt(e,l),f=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:c,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,f);return m.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,f)),await e.ctx.get(Wc).inspectFetchResult(m),this.handleResult(m,f,Xr(a),o,u.toolConfig)}else return FTe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),FTe;let c;if(e.toolCalls&&e.toolCalls.length>0)c=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,vur);else return Ur.error(this.ctx,"Missing tool call in meta prompt response"),FTe;let l=r.extendedBy({uiKind:i,skillIds:c?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=l.extendedBy({messageText:n});return Rt(this.ctx,`${Sl(i)}.metaPrompt`,l,0),Rt(this.ctx,`${Sl(i)}.promptContext`,u,1),{skillIds:c??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Rt(this.ctx,"conversation.promptContextError",n,1)}};d();d();d();var ene=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return ue(e,r,"org.springframework.boot","Spring Boot"),ue(e,r,"jakarta.jakartaee-api","Jakarta EE"),ue(e,r,"javax:javaee-api","Java EE"),ue(e,r,"org.apache.struts:struts2-core","Apache Struts"),ue(e,r,"org.hibernate:hibernate-core","Hibernate"),ue(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),ue(e,r,"javax.faces:jsf-api","JSF"),ue(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"com.google.guava","Google Guava"),ue(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),ue(e,r,"org.apache.commons:commons-io","Apache Commons IO"),ue(e,r,"joda-time:joda-time","Joda-Time"),ue(e,r,"com.google.code.gson:gson","Google Gson"),ue(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),ue(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),ue(e,r,"org.apache.commons:commons-net","Apache Commons Net"),ue(e,r,"org.apache.poi:poi","Apache POI"),ue(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),ue(e,r,"junit:junit","JUnit"),ue(e,r,"org.testng:testng","TestNG"),ue(e,r,"org.spockframework:spock-core","Spock"),ue(e,r,"io.cucumber:cucumber-java","Cucumber"),ue(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"org.mockito","Mockito"),ue(e,r,"org.assertj","AssertJ"),ue(e,r,"org.hamcrest","Hamcrest"),ue(e,r,"org.powermock","PowerMock"),ue(e,r,"org.jmock","JMock"),ue(e,r,"org.easymock","EasyMock"),ue(e,r,"org.jmockit:jmockit","JMockit"),ue(e,r,"com.github.tomakehurst:wiremock","WireMock"),ue(e,r,"org.dbunit:dbunit","DBUnit"),ue(e,r,"com.icegreen:greenmail","GreenMail"),ue(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ue(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),ue(e,r,"io.rest-assured:rest-assured","Rest-Assured"),ue(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ue(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},tne=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"@types/node","Node.js"),ue(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||ue(e,r,"react","React"),ue(e,r,"angular","Angular"),ue(e,r,"vue","Vue.js"),ue(e,r,"ember","Ember.js"),ue(e,r,"backbone","Backbone.js"),ue(e,r,"meteor","Meteor"),ue(e,r,"polymer","Polymer"),ue(e,r,"aurelia","Aurelia"),ue(e,r,"knockout","Knockout.js"),ue(e,r,"dojo","Dojo Toolkit"),ue(e,r,"mithril","Mithril.js"),ue(e,r,"marionette","Marionette.js"),ue(e,r,"marko","Marko.js"),ue(e,r,"svelte","Svelte"),ue(e,r,"hyperapp","Hyperapp"),ue(e,r,"inferno","Inferno.js"),ue(e,r,"preact","Preact"),ue(e,r,"riot","Riot.js"),ue(e,r,"moon","Moon.js"),ue(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"lodash","Lodash"),ue(e,r,"moment","Moment.js"),ue(e,r,"axios","Axios"),ue(e,r,"redux","Redux"),ue(e,r,"recoil","Recoil"),ue(e,r,"jquery","jQuery"),ue(e,r,"d3","D3.js"),ue(e,r,"underscore","Underscore.js"),ue(e,r,"ramda","Ramda"),ue(e,r,"immutable","Immutable.js"),ue(e,r,"rxjs","RxJS"),ue(e,r,"three","Three.js"),ue(e,r,"socket.io","Socket.IO"),ue(e,r,"express","Express.js"),ue(e,r,"next","Next.js"),ue(e,r,"puppeteer","Puppeteer"),ue(e,r,"cheerio","Cheerio"),ue(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"jest","Jest"),ue(e,r,"mocha","Mocha"),ue(e,r,"jasmine","Jasmine"),ue(e,r,"ava","AVA"),ue(e,r,"qunit","QUnit"),ue(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"chai","Chai"),ue(e,r,"sinon","Sinon"),ue(e,r,"enzyme","Enzyme"),ue(e,r,"protractor","Protractor"),ue(e,r,"supertest","Supertest"),ue(e,r,"nock","Nock"),ue(e,r,"cypress","Cypress"),ue(e,r,"@testing-library/react","React Testing Library"),r}},rne=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"github.com/gorilla/mux","Gorilla Mux"),ue(e,r,"github.com/go-chi/chi","Chi"),ue(e,r,"github.com/gin-gonic/gin","Gin"),ue(e,r,"github.com/labstack/echo","Echo"),ue(e,r,"github.com/revel/revel","Revel"),ue(e,r,"github.com/astaxie/beego","Beego"),ue(e,r,"github.com/go-martini/martini","Martini"),ue(e,r,"github.com/gobuffalo/buffalo","Buffalo"),ue(e,r,"github.com/goji/goji","Goji"),ue(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"net/http","net/http"),ue(e,r,"fmt","fmt"),ue(e,r,"io","io"),ue(e,r,"time","time"),ue(e,r,"math","math"),ue(e,r,"strconv","strconv"),ue(e,r,"strings","strings"),ue(e,r,"sort","sort"),ue(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"github.com/onsi/ginkgo","ginkgo"),ue(e,r,"github.com/onsi/gomega","gomega"),ue(e,r,"github.com/stretchr/testify","testify"),ue(e,r,"gopkg.in/check.v1","gocheck"),ue(e,r,"github.com/franela/goblin","goblin"),ue(e,r,"github.com/DATA-DOG/godog","godog"),ue(e,r,"github.com/stesla/gospec","gospec"),ue(e,r,"github.com/rjeczalik/gotest","gotest"),ue(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"github.com/stretchr/testify","Testify"),ue(e,r,"github.com/smartystreets/goconvey","GoConvey"),ue(e,r,"github.com/onsi/ginkgo","Ginkgo"),ue(e,r,"github.com/golang/mock","GoMock"),ue(e,r,"gopkg.in/check.v1","GoCheck"),ue(e,r,"github.com/franela/goblin","Goblin"),ue(e,r,"github.com/DATA-DOG/godog","GoDog"),ue(e,r,"github.com/onsi/gomega","Gomega"),ue(e,r,"github.com/stesla/gospec","GoSpec"),ue(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},nne=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flask","Flask"),ue(e,r,"django","Django"),ue(e,r,"pyramid","Pyramid"),ue(e,r,"tornado","Tornado"),ue(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"requests","requests"),ue(e,r,"numpy","numpy"),ue(e,r,"pandas","pandas"),ue(e,r,"scipy","scipy"),ue(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"pytest","Pytest"),ue(e,r,"unittest","Unittest"),ue(e,r,"doctest","Doctest"),ue(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mock","Mock"),ue(e,r,"hypothesis","Hypothesis"),ue(e,r,"behave","Behave"),ue(e,r,"lettuce","Lettuce"),ue(e,r,"testify","Testify"),ue(e,r,"pyhamcrest","PyHamcrest"),r}},ine=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"laravel/framework","Laravel"),ue(e,r,"symfony/symfony","Symfony"),ue(e,r,"slim/slim","Slim"),ue(e,r,"cakephp/cakephp","CakePHP"),ue(e,r,"yiisoft/yii2","Yii"),ue(e,r,"zendframework/zendframework","Zend Framework"),ue(e,r,"phalcon/cphalcon","Phalcon"),ue(e,r,"bcosca/fatfree","Fat-Free"),ue(e,r,"fuel/fuel","FuelPHP"),ue(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"monolog/monolog","Monolog"),ue(e,r,"vlucas/phpdotenv","PHP dotenv"),ue(e,r,"symfony/console","Symfony Console"),ue(e,r,"guzzlehttp/guzzle","GuzzleHttp"),ue(e,r,"ramsey/uuid","Ramsey UUID"),ue(e,r,"doctrine/orm","Doctrine ORM"),ue(e,r,"php-di/php-di","PHP-DI"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"symfony/finder","Symfony Finder"),ue(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"phpunit/phpunit","PHPUnit"),ue(e,r,"behat/behat","Behat"),ue(e,r,"phpspec/phpspec","PHPSpec"),ue(e,r,"codeception/codeception","Codeception"),ue(e,r,"atoum/atoum","Atoum"),ue(e,r,"pestphp/pest","PestPHP"),ue(e,r,"kahlan/kahlan","Kahlan"),ue(e,r,"peridot-php/peridot","Peridot"),ue(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockery/mockery","Mockery"),ue(e,r,"php-mock/php-mock","PHP-Mock"),ue(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ue(e,r,"padraic/mockery","Padraic Mockery"),ue(e,r,"phpspec/prophecy","PHPSpec Prophecy"),ue(e,r,"phpunit/php-invoker","PHPUnit Invoker"),ue(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),ue(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},one=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"Microsoft.NETCore.App",".NET Core"),ue(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"EntityFramework","Entity Framework"),ue(e,r,"Newtonsoft.Json","Newtonsoft.Json"),ue(e,r,"AutoMapper","AutoMapper"),ue(e,r,"Serilog","Serilog"),ue(e,r,"Dapper","Dapper"),ue(e,r,"Polly","Polly"),ue(e,r,"FluentValidation","FluentValidation"),ue(e,r,"MediatR","MediatR"),ue(e,r,"Hangfire","Hangfire"),ue(e,r,"RabbitMQ.Client","RabbitMQ.Client"),ue(e,r,"MassTransit","MassTransit"),ue(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ue(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ue(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ue(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"xunit","xUnit"),ue(e,r,"NUnit","NUnit"),ue(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"Moq","Moq"),ue(e,r,"FluentAssertions","FluentAssertions"),ue(e,r,"Bogus","Bogus"),ue(e,r,"RestSharp","RestSharp"),ue(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},sne=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flutter","Flutter"),ue(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"dartx","dartx"),ue(e,r,"provider","Provider"),ue(e,r,"rxdart","RxDart"),ue(e,r,"dio","Dio"),ue(e,r,"json_serializable","json_serializable"),ue(e,r,"freezed","Freezed"),ue(e,r,"moor","Moor"),ue(e,r,"hive","Hive"),ue(e,r,"http","http"),ue(e,r,"path","path"),ue(e,r,"intl","intl"),ue(e,r,"equatable","equatable"),ue(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test","test"),ue(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockito","mockito"),ue(e,r,"bloc_test","bloc_test"),r}},ane=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"rails","Rails"),ue(e,r,"sinatra","Sinatra"),ue(e,r,"hanami","Hanami"),ue(e,r,"grape","Grape"),ue(e,r,"roda","Roda"),ue(e,r,"padrino","Padrino"),ue(e,r,"cuba","Cuba"),ue(e,r,"ramaze","Ramaze"),ue(e,r,"nyara","Nyara"),ue(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"active_record","ActiveRecord"),ue(e,r,"sequel","Sequel"),ue(e,r,"rom","ROM"),ue(e,r,"datamapper","DataMapper"),ue(e,r,"mongoid","Mongoid"),ue(e,r,"neo4j","Neo4j"),ue(e,r,"redis","Redis"),ue(e,r,"cassandra","Cassandra"),ue(e,r,"couchrest","CouchRest"),ue(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"rspec","RSpec"),ue(e,r,"minitest","Minitest"),ue(e,r,"cucumber","Cucumber"),ue(e,r,"spinach","Spinach"),ue(e,r,"turnip","Turnip"),ue(e,r,"bacon","Bacon"),ue(e,r,"shoulda","Shoulda"),ue(e,r,"test-unit","Test::Unit"),ue(e,r,"wrong","Wrong"),ue(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"factory_bot","FactoryBot"),ue(e,r,"faker","Faker"),ue(e,r,"ffaker","FFaker"),ue(e,r,"fabrication","Fabrication"),ue(e,r,"machinist","Machinist"),ue(e,r,"mocha","Mocha"),ue(e,r,"flexmock","FlexMock"),ue(e,r,"rr","RR"),ue(e,r,"bourne","Bourne"),ue(e,r,"not_a_mock","NotAMock"),r}},cne=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"tokio","tokio"),ue(e,r,"async-std","async-std"),ue(e,r,"hyper","hyper"),ue(e,r,"actix-web","actix-web"),ue(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"serde","serde"),ue(e,r,"regex","regex"),ue(e,r,"rand","rand"),ue(e,r,"log","log"),ue(e,r,"lazy_static","lazy_static"),ue(e,r,"libc","libc"),ue(e,r,"futures","futures"),ue(e,r,"rayon","rayon"),ue(e,r,"reqwest","reqwest"),ue(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test-case","test-case"),ue(e,r,"proptest","proptest"),ue(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockall","mockall"),ue(e,r,"double","double"),ue(e,r,"rstest","rstest"),ue(e,r,"mockiato","mockiato"),ue(e,r,"mock_derive","mock_derive"),ue(e,r,"mocktopus","mocktopus"),ue(e,r,"mockers","mockers"),ue(e,r,"mock_it","mock_it"),r}},lne=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function ue(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(ue,"addFromLibraries");var une=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function Plt(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(Plt,"determineProgrammingLanguage");var klt=[new ene,new tne,new rne,new nne,new ine,new one,new sne,new ane,new cne,new lne];function Blt(t){let e=klt.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new une(t,klt);return new OTe(e)}s(Blt,"getMetadataLookup");var OTe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var Dlt=I.Object({name:I.String(),version:I.Optional(I.String())}),Nlt=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(Dlt),buildTools:I.Array(Dlt)}),QTe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new Nt([`The user is working on a project with the following characteristics:
`]),1]);let n=Blt(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new Nt(r)}addProgrammingLanguage(e,r){let n=Plt(e);this.turnContext.collectLabel(UC,n),r.push([new Nt([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(UC,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Nt([`${r}
${i}`]),1])}}},UC="project-metadata",dne=class{constructor(e){this._resolver=e;this.id=UC;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new QTe(e)}};d();var Llt=Ne(require("path"));var UTe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(mn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new Nt(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new Nt(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=Gs(n);if(await this.turnContext.collectFile(pne,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new NC(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Nt([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new Nt([`The referenced file \`${Llt.basename(r.uri)}\` is content excluded.`]),1]]}},qTe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},pne="references",fne=class{constructor(){this.id=pne;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new qTe}processor(e){return new UTe(e)}};var VR=s(()=>[UC,tA,pne,ad],"mandatorySkills"),mne=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new Zre(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let c=[];if(o){let l=o.requiredSkills?await o.requiredSkills(e.ctx):[];c.push(...l.filter(u=>!VR().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!c.includes(u)&&!VR().includes(u)&&c.push(u)});if(a){let l=await a.additionalSkills(e.ctx);c.push(...l.filter(u=>!VR().includes(u)))}return c.push(...VR()),c=c.filter(l=>!this.isIgnoredSkill(l,e.turn)),{skillIds:e.ctx.get(Wi).filterSupportedSkills(e.conversation.id,c)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Wi).getSupportedSkills(r.id),a=e.get(cl).getDescriptors(),c=[];for(let l of a){if(i.includes(l.id)||!o.includes(l.id))continue;(l.isAvailable?await l.isAvailable(e):!0)&&!this.isIgnoredSkill(l.id,n)&&c.push(l)}return c}async getNonSelectableSkills(e){let r=await OC(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...VR(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};d();d();var hne=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(c=>c.id===r))Ur.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let c={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[c],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Ur.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var gne=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Ur.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};d();var xur="X-Initiator",bur="X-Interaction-ID",Iur="X-Interaction-Type";var Ane=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},HTe=class extends Ane{static{s(this,"User")}static id(){return"user"}},WTe=class extends Ane{static{s(this,"Agent")}static id(){return"agent"}},GTe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[xur]:this.initiator,[bur]:this.interactionId,[Iur]:this.interactionType.toString()}}},i0=class t extends GTe{static{s(this,"LlmInteraction")}static user(e,r){return new t(HTe,e,r)}static agent(e,r){return new t(WTe,e,r)}};var JT=class{constructor(e,r,n,i,o){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.userRequestedModel=o,this.skillResolver=new jTe(this),this.steps=new gne(e,r,n,e.get(Js)),this.collector=new VTe(r,n,e.get(Js)),this.agentToolCalls=new hne(e,r,n,e.get(Js))}static{s(this,"TurnContext")}setResolvedModelConfiguration(e){this.resolvedModelConfiguration=e}toLlmInteraction(){return this.conversation.source==="inline"?i0.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?i0.agent("conversation-panel",this.turn.telemetryId):i0.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(Js).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},yne=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},iQ=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},jTe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Wi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Gl).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new yne(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(cl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Gl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof yne||i instanceof iQ)throw i;Ur.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},VTe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function Mlt(t,e){let[r,n,i]=await Tur(t,e);return i.push(...Sur(t)),r.length>0||n.length>0?[new Nt([[new Nt(["Consider the additional context:"]),1],[$T(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(Mlt,"fromSkills");async function Tur(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await Rur(t,a.skillId,e?.languageId??""))continue;let[c,l]=await wur(t,a.skillId);c&&(VR().indexOf(a.skillId)===-1?n.push(c):i.push(c)),r.push(l)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(Tur,"handleSkillsInReverse");async function wur(t,e){let n=t.ctx.get(cl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let c=n?.processor(t),l=Date.now(),u=await c?.processSkill(o,t),f=Date.now()-l;return u?await _ur(t,n,c,u,a,f):[void 0,await Ene(t,n,"unprocessable",void 0,a,f)]}else return[void 0,await Ene(t,n,"unresolvable",void 0,a)]}catch(i){if(Ur.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof iQ)throw i;return[void 0,await Ene(t,n,"failed")]}}s(wur,"safelyProcessSkill");async function _ur(t,e,r,n,i,o){let a;return typeof n=="string"?a=new Nt([[n,1]]):a=n,[[a,r?.value()||0],await Ene(t,e,"resolved",a,i,o)]}s(_ur,"handleProcessedSkill");async function Ene(t,e,r,n,i,o){let c=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),l={skillId:e?.id??"unknown",resolution:r,files:c,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(Pa).getBestChatModelConfig(fm("user")),f=n.elide(u.maxRequestTokens).getText();l.tokensPreEliding=ho(u.tokenizer).tokenLength(f)}return t.ctx.get(Gl).addResolution(t.turn.id,l),l}s(Ene,"determineResolution");function Sur(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(Sur,"handleIgnoredSkills");async function Rur(t,e,r){if(e!==UC&&e!==tA)return!0;let n=t.ctx.get(Bt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===UC:e===tA}s(Rur,"includeSkill");var Flt=Ne(yp());var $R=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=tN(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new Nt(n),a]}async elidableSkills(e,r){return await Mlt(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await EC.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=lp(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[c,l]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:c},{role:"system",content:this.suffix(e)},{role:"user",content:a}],l]}},vne=class extends $R{static{s(this,"PanelUserPromptStrategy")}suffix(e){return Flt.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var Olt=Ne(yp());var xne=class extends $R{static{s(this,"InlineUserPromptStrategy")}suffix(e){return Olt.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};d();var $Te=Ne(yp());var bne=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=tN(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return $Te.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=rit(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:gT(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:$Te.default`
                    This is the user's question: 
                    ${Xr(i).trim()} 
                `.trim()}],[]]}};d();var Qlt=Ne(yp());var Ine=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=gT(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return Qlt.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=tN(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new Nt(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};d();var kur=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],Tne=class extends $R{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=lp(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:kur,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=gT(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!DY(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!DY(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var zTe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function oQ(t,e,r){return new zTe(t,e,r)}s(oQ,"descriptor");var Ult=[oQ("user",fm("user"),()=>new vne),oQ("inline",fm("inline"),()=>new xne),oQ("meta",fm("meta"),()=>new bne),oQ("suggestions",fm("suggestions"),()=>new Ine),oQ("synonyms",fm("synonyms"),()=>new Tne)],wne=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=Ult.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return Ult}};var Hlt=require("console");var Tu=class{constructor(e,r=new wne){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),i=await this.ctx.get(Dn).getSession(),[o,a]=await n.promptContent(e,this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName,i),r),[c,l]=this.elideChatMessages(o,r.modelConfiguration);return await this.ctx.get(Wc).inspectPrompt({type:r.promptType,prompt:qlt(c),tokens:l}),this.ctx.get(Gl).addPrompt(e.turn.id,qlt(c),r.promptType),{messages:c,tokens:l,skillResolutions:a,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(c=>!(typeof c.content=="string"||Array.isArray(c.content)));(0,Hlt.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(c=>typeof c.content=="string"||Array.isArray(c.content)?c:{role:c.role,content:Pur(c.content.elide(o).getText())}).filter(c=>c.content.length>0);return[a,LTe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),LTe(n,r)}safetyPrompt(e,r){let n=this.ctx.get(nn).getEditorInfo().readableName??this.ctx.get(nn).getEditorInfo().name,i=Bur(process.platform);return _lt(this.ctx,n,r?.login,i,e)}};function Pur(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(Pur,"processResultOfElidableText");function qlt(t){return t.map(e=>Xr(e.content)).join(`

`)}s(qlt,"debugChatMessages");function Bur(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(Bur,"mapPlatformToOs");var rN=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await Oo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},c=await this.ctx.get(Tu).toPrompt(e,a),l=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:c.tokens}),u={modelConfiguration:o,messages:c.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(c.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=c.toolConfig.tool_choice,u.tools=c.toolConfig.tools;let f=await this.chatFetcher.fetchResponse(u,r,l);if(f.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch suggestions, trying again..."),f=await this.chatFetcher.fetchResponse(u,r,l)),f.type==="success"){if(!f.toolCalls||f.toolCalls.length===0){Ur.error(this.ctx,"Missing tool call in suggestions response");return}let p=f.toolCalls[0],{followUp:m,suggestedTitle:h}=c.toolConfig.extractArguments(p);if(!m||!h){Ur.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:c.tokens,numTokens:f.numTokens+p.approxNumTokens}}else if(f.type==="successMultiple"){Ur.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(f.type==="tool_calls"){Ur.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Ur.error(this.ctx,`Failed to fetch suggestions due to reason: ${f.reason}`);return}}};var nN=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,c,l){switch(fGe(this.turnContext.ctx,c,a,e.type=="offTopic",e.requestId,l,o.extendedBy({},{fileCount:this.turnContext.ctx.get(Va).workspaceCount})),await this.turnContext.ctx.get(Wc).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,c,i,o,l);case"offTopic":return this.processOffTopicFetchResult(o,c,l);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Xr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:xT.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,c,l){if(e&&e.length>0){a.markAsDisplayed(),c.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},pGe(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,l,c);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,l):void 0;if(u){let{followUp:f,suggestedTitle:p}=u;return{followup:f.message!==""?f:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Xr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new rN(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let c=this.enrichFollowup(a,r,n,i);return Ur.debug(this.turnContext.ctx,"Computed followup",c),Ur.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:c,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:cr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return yGe(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",mGe(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};d();var _ne=I.Union([I.String(),I.Number()]),zR=I.Union([I.String(),I.Number()]),Dur=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),Sne=I.Object({uri:I.String(),position:I.Optional(bl)}),sQ=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(rc),selection:I.Optional(rc),status:I.Optional(Dur),range:I.Optional(rc)}),Nur=I.Object({type:I.Literal("directory"),uri:I.String()}),iN=I.Union([sQ,Nur,Gat]),ch=I.Union([I.Literal("panel"),I.Literal("inline")]),Lur=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),YTe=I.Union([I.String(),I.Array(Lur)]),Wlt=I.Object({request:YTe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(zR)});function Rne(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(Rne,"convertToMessageContent");function kne(t,e){if(t=lp(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(kne,"appendToMessage");var Pne=I.Union([I.Literal("Ask"),I.Literal("Agent")]),Mur=I.Object({type:I.String(),description:I.String()}),Glt=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),Mur),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),Bne=I.Object({uri:I.String(),name:I.String()});var KTe="generate-response",Dne=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},aQ=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(r.ctx),this.postProcessor=new nN(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof Dne?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await cc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let c={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(Wc).inspectPrompt(c),await n.steps.start(KTe,"Generating response");let l=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),l,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:lp(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return cr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return MTe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:lp(r.request.message)}),r.response&&r.response.type==="model"){let i=Wat(r.response.references);n.push({role:"assistant",content:lp(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await Xat(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let c=new WT((p,m,h,g,y)=>{let E=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(x=>({message:x.message,severity:"warning"})),confirmationRequest:E}),this.turn.response?(this.turn.response.message=kne(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),E&&(this.turn.confirmationRequest=E)}),l=await this.turnContext.ctx.get(Qr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Xr(this.turn.request.message)},authToken:l?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},f=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>c.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(f),await this.postProcessor.postProcess(f,n,c.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Xr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Dne("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return tF(this.conversation,"conversationPanel",Xr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(KTe,e.error.message):await r.steps.finish(KTe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var cQ=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new aQ(this,e)}},Nne=class extends cQ{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new aQ(this,e)}};d();var Fur="github",nA=class{static{s(this,"RemoteAgentRegistry")}},Lne=class extends nA{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await qS(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(fn.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||fn.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||fn.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==Fur).map(i=>new cQ(i.id,i.slug,i.name,i.description,i.avatar_url))}};var JTe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[KD]}};async function OC(t){let e=[];return e.push(new Nne),e.push(...await t.get(nA).agents()),e.push(new JTe),e}s(OC,"getAgents");var Our=I.Object({});async function Qur(t,e,r){return[(await OC(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(Qur,"handleConversationAgentsChecked");var jlt=at(Our,Qur);d();d();var lQ=Ne(Lc());function Uur(t,e,r){let n=Dr.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Rt(t,"getCompletions.docVersionMismatch",n)}s(Uur,"telemetryVersionMismatch");async function iA(t,e,r){let i=t.get(pr).getTextDocumentUnsafe(e);if(!i)throw new lQ.ResponseError(cn.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await yE(t,e,i.getText());if(o.status==="invalid")throw t.get(po).setInactive(o.reason),new lQ.ResponseError(cn.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(Uur(t,i,e.version),wu.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new lQ.ResponseError(cn.ContentModified,"Document Version Mismatch");return i}s(iA,"getTextDocument");async function qC(t,e,r){let n=e.textDocument??e.doc;if(n)try{return await iA(t,n,r)}catch(i){if(i instanceof lQ.ResponseError&&i.code===cn.CopilotNotAvailable)return;throw i}}s(qC,"getTextDocumentIfAvailable");var qur=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),Hur=I.Object({turnId:zR,codeBlockIndex:I.Number(),source:qur,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(Sne),textDocument:I.Optional(Cf),position:I.Optional(bl),conversationSource:I.Optional(ch)});async function Wur(t,e,r){let n=await qC(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=wI(r.conversationSource),c=await cc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Qd(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a},i,`${Sl(a)}.acceptedCopy`,c),["OK",null]}s(Wur,"handleConversationCodeCopyChecked");var Vlt=at(Hur,Wur);d();var Gur=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),jur=I.Object({turnId:zR,source:Gur,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(Sne),textDocument:I.Optional(Cf),position:I.Optional(bl),conversationSource:I.Optional(ch)});async function Vur(t,e,r){let n=await qC(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=wI(r.conversationSource),c=await cc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Qd(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full"},i,`${Sl(a)}.acceptedInsert`,c),["OK",null]}s(Vur,"handleConversationCodeInsertChecked");var $lt=at(jur,Vur);d();d();var Mne=I.Array(rc);function Fne(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(Fne,"resolveAsActiveEditor");d();var zlt=Ne(Lc());var One=new zlt.ProgressType,XTe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(xr).connection.sendProgress(One,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(xr).connection.sendProgress(One,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(xr).connection.sendProgress(One,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(xr).connection.sendProgress(One,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function oN(t){return new XTe(t.workDoneToken)}s(oN,"createProgressHandler");d();d();d();var _u=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};d();var vv=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};d();var sN=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};d();d();var Ylt="```",uQ=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,$ur=String.raw`${Ylt}[\w]*?\n(?<codeblock>[\s\S]*?)\n${Ylt}`,zur=new RegExp(uQ+`
`+$ur,"gs"),ZTe=["replace","delete"];function ewe(t,e){let r=t.matchAll(zur),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!ZTe.includes(a.mode))continue;let c=a.start?parseInt(a.start)-1:-1,l=a.end?parseInt(a.end)-1:c,f=a.codeblock.split(`
`),p=f[0].match(/^\s*/)?.[0]??"";f.forEach((y,E)=>{f[E]=y.slice(p.length)});let m={mode:a.mode,codeblock:f.join(`
`),start:c,end:l},h=twe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(ewe,"extractEditsFromTaggedCodeblocks");function twe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,c=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let l=r[i].match(/^\s*/)?.[0]??"";c.forEach((u,f)=>{c[f]=l+u}),r.splice(i,o-i+1,...c)}}}return r.join(`
`)}s(twe,"applyEditsToDocument");d();d();d();d();var xv=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new up({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var Yur=new vt("activeEditorPrompt");async function Klt(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new mc;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&Kur(n.selection)){let o=new xv(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Oi(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new xv(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new xv(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Oi(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new xv(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else Yur.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(Klt,"processActiveEditor");function Kur(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(Kur,"notEmptySelection");d();d();function Jlt(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(Jlt,"partsLength");async function Zlt(t,e=1/0,r){let n=Xlt(0,t,e),i=e-Jlt(n);for(;;){let o=!1,a=[];for(let c of n)if(c.type==="text")a.push(c);else if(c.type==="dir"){a.push({type:"text",uri:c.uri,value:c.value});let l=await c.getChildren();if(r?.isCancellationRequested)return Jur();let u=Xlt(c.level+1,l,i-1);u.length&&(o=!0,i-=Jlt(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(Zlt,"visualFileTree");function Xlt(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let c=e[a],l=n+c.name+(c.type===2?"/":"");if(l.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}c.type===2?i.push({type:"dir",uri:c.uri,level:t,value:l,getChildren:c.getChildren}):i.push({type:"text",uri:c.uri,value:l}),o-=l.length,a!==e.length-1&&(o-=1)}return i}s(Xlt,"toParts");var Jur=s(()=>({tree:"",files:[]}),"emptyTree");var Xur=new vt("fileReferencesPrompt");async function eut(t,e,r,n){let i=await tut(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:c,tree:l}of i){o+=`${c}/
`;for(let u of l.tree.split(`
`))o+=`	${u}
`}}let a=lD(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(eut,"generateWorkspaceStructurePrompt");async function tut(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,c=await Zlt(await rut(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:c}})):[]}s(tut,"generateWorkspaceStructure");async function rut(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(yo).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let c=Lo(e,o);return r.excludeDotFiles&&o.startsWith(".")||tdr(c)?null:a&2?{type:2,uri:c,name:o,getChildren:s(()=>rut(t,c,r,n),"getChildren")}:{type:1,uri:c,name:o}})).then(o=>o.filter(a=>a!=null)))}s(rut,"buildFileList");var Zur=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],edr=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function tdr(t){return!!(edr.includes(Oi(t).toLowerCase())||ls(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>Zur.includes(r)))}s(tdr,"shouldAlwaysIgnoreFile");async function Qne(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Oi(a.uri)})),i=await tut(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:c,tree:l}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${La(c)})`),o.push(l.tree),o.push("</attachment>");return o}catch(n){return Xur.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(Qne,"processDirectoryReferences");var rdr=new vt("fileReferencesPrompt");async function nut(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,c,l]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new mc;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new xv(h,void 0,[]);g&&m.push(...g.render())}else rdr.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),Klt(t,e),Qne(t.context,e,n)]),u=a.flat(),f=l||[];return u.length>0||c.length>0||f.length>0?["<attachments>",...u,...c,...f,"</attachments>"]:[]}s(nut,"processFileReferences");var iut=new vt("editAgentPrompt"),Une=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=Kve(this.currentTurn.response?.message,!0),o=await EC.appendToUserMessage(this.ctx,this.props.workspaceFolders,Xr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return jO(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(c=>c.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:lp(n.request.message)}),n.response){let i=Kve(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(c=>c.role==="tool"&&c.tool_call_id===o.id)?i.push(o):iut.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=VO(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+U7(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(KZ(this.currentTurn.response.message)&&this.currentTurn.response.message.find(c=>c.role==="tool"&&c.tool_call_id===r)){iut.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=VO(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${sl}`),o.push("changed code"),o.push(`// ${sl}`),o.push("changed code"),o.push(`// ${sl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${sl}`),o.push("	age: number;"),o.push(`	// ${sl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await nut({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${sl}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${ls(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await eut(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var sut=15,aut=128,aN=new vt("toolCallingLoop"),qne=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(Js),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(sd),this.prompt=new Une(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new $E(this.turnContext.ctx)}),this.requestId=cr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(EGe(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new WT((u,f,p,m)=>{let h=u.trim().match(uQ)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:f,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...f??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let c={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(c),aN.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(c,null,2)}`);let l=await this.chatFetcher.fetchResponse(c,r,this.baseTelemetryWithExp,(u,f)=>o.isFinishedAfter(u,f));return this.processChatFetchResult(e,l,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),aN.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new _u({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new mc;case"failed":throw this.turn.status="error",new _u({message:xT.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new _u({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new _u({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new _u({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new _u({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new _u({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new _u({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new _u({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new _u({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(c=>{if(!c.id){let l=`cls_${t.NextToolCallId++}`;c.id=l}return c});this.prompt.addToolCallModelResponse(r,a);for(let c of a)await this.handleSingleToolCall(c,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(c=>({id:c.id,name:c.function.name,arguments:JSON.stringify(c.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),c="success";try{let l=gT(e),u=this.toolsService.prepareInvocation(o.id,{input:l},i),f=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,f,o.id,l,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:l,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=dat(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=ire(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(l){if(l instanceof vv||l instanceof mc)throw this.turn.status="cancelled",c="cancelled",this.prompt.addToolCallResult(new oo([new Bi("")],"cancelled"),e.id),new vv(l.message);{aN.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${vE(l)}`,l),c="error";let u=new oo([new Bi(vE(l).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let f=ire(u);await this.turnContext.agentToolCalls.error(n,e.id,f.message)}}finally{let l=performance.now()-a;vGe(this.turnContext.ctx,this.turnContext,o,e.id,n,l,c,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;aN.error(this.turnContext.ctx,a);let c=new oo([new Bi(a)],"error");this.prompt.addToolCallResult(c,e.id);let l=ire(c);await this.turnContext.agentToolCalls.error(n,e.id,l.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new mc}async requestToolInvocationApproval(e,r,n,i,o,a,c,l){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:c},l);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new vv("Cancelled by user");case"accept":return Promise.resolve();default:throw new vv(`Invalid confirmation result ${u.result}`)}}else aN.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>sut)throw aN.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${sut} for turn ${this.turn.id}`),new sN}checkChatPayload(e){if(e.messages.length===0)throw new _u({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>aut)throw new _u({message:`You may not include more than ${aut} tools in your request.`,responseIsFiltered:!1})}};var Hne=new vt("agenticTurnProcessor"),Wne=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.turnSuggestions=new rN(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(c),await this.endProgress({error:{message:c,code:SIe.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await cc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{Hne.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let l=await Oo.getModelConfiguration(this.turnContext.ctx,"edits",a);this.turnContext.setResolvedModelConfiguration(l),await new qne(this.turnContext,this.chatFetcher,l,c).run(r);let f={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(r,c.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(f.suggestedTitle=p)}await this.endProgress(f)}catch(l){if(l instanceof vv)Hne.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,l),this.turn.status="cancelled",await this.cancelProgress();else if(l instanceof mc)Hne.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,l),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(l instanceof sN)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:{message:l.message,code:SIe.ToolRoundExceedError,responseIsIncomplete:!0}});else if(l instanceof _u)this.turn.status="error",this.updateTurnResponseWithError(l.message),await this.endProgress({error:l.conversationError});else throw Hne.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,l),l}}async fetchSuggestedTitle(e,r){let n=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,r);if(n)return Ur.debug(this.turnContext.ctx,"Computed suggested title",n.suggestedTitle),n.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=VO(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var rwe="collect-context",nwe="generate-response",Gne=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(Js),this.chatFetcher=this.chatFetcher??new ka(e.ctx),this.postProcessor=new nN(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let c=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:c,type:"meta"},await this.endProgress({error:{message:c,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let c=await cc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let l=X7().find(m=>m.id===this.turn.template?.templateId);if(l?.response){await this.handleTemplateResponse(l,this.turn.template.userQuestion,r);return}let u=(await OC(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(rwe,"Collecting context"),await this.collectContext(n,r,c,this.strategy.uiKind,l,u);let f=a?(await this.turnContext.ctx.get(Pa).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,f);if(!p)await n.steps.error(rwe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(rwe),await n.steps.start(nwe,"Generating response");let m=this.augmentTelemetry(p,c,l,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,c.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Ur.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let l=await new mne(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=l.skillIds.map(u=>({skillId:u})),l}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let c="",l=0,u=new WT((h,g,y,E)=>{let x=h.trim().match(uQ)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:x,notifications:E.map(b=>({severity:"warning",message:b.message}))}),this.turn.response?this.turn.response.message=kne(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),c+=h,this.strategy.currentDocument){let b=this.strategy.extractEditsFromResponse(c,this.strategy.currentDocument);b&&b.length>0&&(c="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:b}),l+=b.length)}}),f=await Oo.getModelConfiguration(this.turnContext.ctx,"user",a);e=Oo.transformMessages(e,f.modelFamily),this.turnContext.setResolvedModelConfiguration(f);let p={modelConfiguration:f,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Xr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,r,n,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:l}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,Xr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",hGe(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Xr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=tF(this.conversation,this.strategy.uiKind,Xr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=tF(this.conversation,this.strategy.uiKind,Xr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(nwe,e.error.message):await r.steps.finish(nwe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};d();var jne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await Oo.getModelConfiguration(e.ctx,o),c={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(Tu).toPrompt(e,c)}extractEditsFromResponse(e,r){return[]}},Vne=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",c=await e.ctx.get(Pa).getBestChatModelConfig(fm(a)),l={promptType:a,modelConfiguration:c,languageId:r};return l.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(Tu).toPrompt(e,l)}async processResponse(e){let r=[],n=Xr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(ad);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(mn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=ewe(e,r).filter(a=>ZTe.includes(a.mode)),o=twe(i,r);if(o)return await this.ctx.get(Wc).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return ewe(e,r)}};d();d();var cut=Ne(Lc()),lut=Ne(hg());var Jd=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new cut.ProtocolRequestType("conversation/context");this.typeCheck=Fs.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(xr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,c]=o;if(c){let l=new lut.ResponseError(c.code,c.message,c.data);Ur.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,l);return}i=a}catch(o){Ur.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new bu(this.typeCheck.Errors(i));return i}}};var iwe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},bv=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let c=new iwe(e,r,n,i,o,a);return this.turns.push(c),c}get(e){return this.turns.find(r=>r.progressToken===e)}},$ne=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(Js)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Wi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let c=await new Jd(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);c&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:c.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await Ny(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:cr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Iv=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(bv).get(r);if(i)return new $ne(e,i);let a=(await OC(e.ctx)).find(l=>l.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let c;return e.conversation.source==="inline"?c=new Vne(e.ctx):c=new jne(e.ctx),n!==void 0&&(c.computeSuggestions=n),e.turn.chatMode==="Agent"?new Wne(e,c):new Gne(e,c)}};d();var uut=Ne(Lc());var cN=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new uut.ResponseError(cn.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};d();function zne(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Oi(t.uri)}]}s(zne,"resolveAsWorkspaceFolders");d();d();var ndr=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),o0=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?ndr(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Xd=class{constructor(){this.tokens=new Or(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new In.CancellationTokenSource,i=new o0([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var idr=I.Object({conversationId:I.Optional(_ne),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(Wlt,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(Cf),textDocument:I.Optional(Cf),selection:I.Optional(rc),visibleRanges:I.Optional(Mne),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(iN)),source:I.Optional(ch),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Bne)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(Pne),needToolCallConfirmation:I.Optional(I.Boolean())});async function odr(t,e,r){cN.validate(r.workspaceFolders);let n=await qC(t,r,e),i=t.get(Wi).create(r);await sdr(t,i,r,n);let o=i.turns[i.turns.length-1],a=oN(r),c=t.get(Xd).add(a.progressToken,e),l=new JT(t,i,o,c,r.model);return await(await t.get(Iv).createProcessor(l,a.progressToken,r.computeSuggestions)).process(a,c,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(odr,"handleConversationCreateChecked");async function sdr(t,e,r,n){for(let i of r.turns){let o=Rne(i.request),a=new GT({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=Dre(r.chatMode),a.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,l=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:zne(c),u=Fne({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Wi).addTurn(e.id,a,r.references,u,c,l,r.ignoredSkills,void 0)}}s(sdr,"addTurns");var dut=at(idr,odr);d();var adr=I.Object({conversationId:I.String()});function cdr(t,e,r){return t.get(Wi).destroy(r.conversationId),["OK",null]}s(cdr,"handleConversationDestroyChecked");var fut=at(adr,cdr);d();var ldr=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),udr=new vt("conversationNotifyCodeAcceptance");async function ddr(t,e,r){let n=t.get(Wi).findByTurnId(r.turnId);if(!n)return udr.warn(t,`Turn with id ${r.turnId} not found`),["OK",null];let i=await cc(t,n,{languageId:""});return Qd(t,void 0,{},{acceptedFileCount:r.acceptedFileCount,totalFileCount:r.totalFileCount},`${Sl("agentPanel")}.codeAcceptance`,i),["OK",null]}s(ddr,"handleConversationNotifyCodeAcceptanceChecked");var put=at(ldr,ddr);d();var fdr=I.Object({});function pdr(t,e,r){return[{path:t.get(pu).directory},null]}s(pdr,"handleConversationPersistenceChecked");var mut=at(fdr,pdr);d();d();var gut=Ne(require("node:events"));var owe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(Dn).getSession(),n=e.get(Il);return r&&r.githubAppId&&r.githubAppId!==Zh?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},swe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Qr).getToken()).envelope.chat_enabled?"ok":"failed"}}},mdr=[new owe,new swe],hut="onPreconditionsChanged",lh=class{constructor(e,r=mdr){this.ctx=e;this.checks=r;this.emitter=new gut.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(hut,e)}emit(e){this.emitter.emit(hut,e)}};var hdr=I.Object({forceCheck:I.Optional(I.Boolean())});async function gdr(t,e,r){let n=r.forceCheck??!1;return[await t.get(lh).check(n),null]}s(gdr,"handleConversationPreconditionsChecked");var Aut=at(hdr,gdr);d();var Adr=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(Cf),textDocument:I.Optional(Cf),source:I.Optional(ch)});async function ydr(t,e,r){let n=await qC(t,r,e),i=wI(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await cc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return Qd(t,n,{rating:o,uiKind:i},{},`${Sl(i)}.messageRating`,a),["OK",null]}s(ydr,"handleConversationRatingChecked");var yut=at(Adr,ydr);d();d();var Yne=class extends qT{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:RC,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(AT).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(fC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var Cdr=I.Object({tools:I.Array(Glt)});function Edr(t,e,r){return r.tools.forEach(n=>{t.get(sd).registerTool(new Yne({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(Edr,"conversationRegisterToolsChecked");var Cut=at(Cdr,Edr);d();var vdr=I.Object({});function xdr(t,e,r){return[ATe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(xdr,"handleConversationTemplatesChecked");var Eut=at(vdr,xdr);d();var bdr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:_ne,turnId:I.Optional(zR),message:YTe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(Cf),textDocument:I.Optional(Cf),selection:I.Optional(rc),visibleRanges:I.Optional(Mne),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(iN)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(Bne)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:nit,model:I.Optional(I.String()),chatMode:I.Optional(Pne),needToolCallConfirmation:I.Optional(I.Boolean())});async function Idr(t,e,r){cN.validate(r.workspaceFolders);let n=await qC(t,r,e),i=t.get(Wi),o=i.get(r.conversationId),a=Rne(r.message),c=new GT({message:a,type:"user"},r.turnId);c.chatMode=Dre(r.chatMode),c.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:zne(l),f=Fne({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});c=await i.addTurn(o.id,c,r.references,f,l,u,r.ignoredSkills,r.confirmationResponse);let p=oN(r),m=t.get(Xd).add(p.progressToken,e),h=new JT(t,o,c,m,r.model);return await(await t.get(Iv).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:c.id,agentSlug:c.agent?.agentSlug,modelFamily:r.model},null]}s(Idr,"handleConversationTurnChecked");var vut=at(bdr,Idr);d();var Tdr=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(ch)});async function wdr(t,e,r){t.get(Wi).deleteTurn(r.conversationId,r.turnId);let i=wI(r.source),o=await cc(t,t.get(Wi).findByTurnId(r.turnId),{languageId:""});return Qd(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Sl(i)}.messageDelete`,o),["OK",null]}s(wdr,"handleConversationTurnDeleteChecked");var xut=at(Tdr,wdr);d();var _dr=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function Sdr(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(Sdr,"buildSystemMessage");function Rdr(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,c)=>{let l=t.selection.start.line+c+1;return`/* ${l>n&&l<i?"Selected ":""}Line ${l} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(Rdr,"buildUserMessage");function kdr(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,c,l,u,f,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(f.toLowerCase()))continue;let h=parseInt(l)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),E=g.trimEnd().length,x={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:E}},message:m.trim(),kind:f.toLowerCase(),severity:p.toLowerCase()};r.push(x)}return r}s(kdr,"parseReviewComments");async function Pdr(t,e,r){if(!r.document.text)return[null,{code:cn.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:cn.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:cn.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:cn.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:cn.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ka),o=await Oo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:Sdr()},{role:"user",content:Rdr(r)}],c=await t.get(Bt).updateExPValuesAndAssignments(),l=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:i0.user("code-review",cr())},e,c);if(l.type!=="success")return[null,{code:cn.InternalError,message:"Failed to generate code review"}];let u=kdr(r.document,l.value);return u.sort((f,p)=>f.range.start.line-p.range.start.line),[{comments:u},null]}s(Pdr,"handleCopilotCodeReviewChecked");var but=at(_dr,Pdr);d();d();var XT=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,XE.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return i0.user("conversation-edit-panel",this.editTurnId)}};d();async function Kne(t,e,r,n){let o=t.get(qc).create("panel","en"),a=new bT({message:"",type:"user"},[]),c="file:///path/to/HelloWorld.java",l=new XT(t,o,a,n,pn.Gpt4o),u=t.get(xu);await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${c})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:c}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:c,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let f="file:///path/to/HelloWorld.py";await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${f})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:f}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:f,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(l,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:f,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(Kne,"streamMockedResult");d();var Bdr=I.Object({enableMock:I.Boolean()}),HC=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function Ddr(t,e,r){return t.get(HC).setMockEnabled(r.enableMock),["OK",null]}s(Ddr,"handleTestingSetCopilotEditsResponseChecked");var Iut=at(Bdr,Ddr);var Ndr=I.Object({request:I.String(),response:I.Optional(I.String())}),Ldr=I.Union([I.Literal("panel")]),Mdr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(Ndr,{minItems:1}),workingSet:I.Optional(I.Array(sQ)),source:I.Optional(Ldr),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Fdr(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new bT({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(Fdr,"buildEditConversation");async function Odr(t,e,r){if(t.get(HC).isMockEnabled())return await Kne(t,cr(),cr(),r.partialResultToken),[[],null];let n=Fdr(t.get(qc),r),i=n.getLastTurn(),o=new XT(t,n,i,r.partialResultToken,r.model),a=t.get(Xd).add(r.partialResultToken,e);return[await t.get(ZE).createOrContinueEditConversation(o,a),null]}s(Odr,"handleEditConversationCreateChecked");var Tut=at(Mdr,Odr);d();var Qdr=I.Object({editConversationId:I.String()});function Udr(t,e,r){return t.get(qc).destroy(r.editConversationId),["OK",null]}s(Udr,"handleEditConversationDestroyChecked");var wut=at(Qdr,Udr);d();var qdr=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(sQ)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function Hdr(t,e,r){let n=t.get(e),i=new bT({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(Hdr,"buildEditConversation");async function Wdr(t,e,r){if(t.get(HC).isMockEnabled())return await Kne(t,r.editConversationId,cr(),r.partialResultToken),[[],null];let n=t.get(qc),i=Hdr(n,r.editConversationId,r),o=i.getLastTurn(),a=new XT(t,i,o,r.partialResultToken,r.model),c=t.get(Xd).add(r.partialResultToken,e);return[await t.get(ZE).createOrContinueEditConversation(a,c),null]}s(Wdr,"handleEditConversationTurnChecked");var _ut=at(qdr,Wdr);d();var Gdr=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(ch)});async function jdr(t,e,r){t.get(qc).deleteTurn(r.editConversationId,r.editTurnId);let i=await eF(t,r.editTurnId,r.editConversationId,{languageId:""});return Qd(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Sl("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(jdr,"handleEditConversationTurnDeleteChecked");var Sut=at(Gdr,jdr);d();var Vdr=I.Object({}),$dr=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(i7)}))}))});function zdr(t,e,r){return[t.get(th).getAllTools(),null]}s(zdr,"handleGetMCPToolsChecked");function Ydr(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:c}of o)t.get(th).updateMCPToolStatus(i,a,c);return[t.get(th).getAllTools(),null]}s(Ydr,"handleUpdateMCPToolsStatusChecked");var Rut=at(Vdr,zdr),kut=at($dr,Ydr);d();var Kdr=I.Object({});async function Jdr(t,e,r){let n=await t.get(Qr).getToken();return[Xdr(await t.get(Bd).getMetadata(),n),null]}s(Jdr,"handleCopilotModelsChecked");function Xdr(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=mm.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!JOe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(Xdr,"filterModels");var Put=at(Kdr,Jdr);d();var Zdr=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function efr(t,e,r){return r.model&&r.status==="enabled"?await t.get(Bd).acceptModelPolicy(r.model)?["OK",null]:[null,{code:cn.InternalError,message:"Failed to accept model policy"}]:[null,{code:cn.InvalidRequest,message:"Invalid model or status"}]}s(efr,"handleCopilotModelsPolicyChecked");var But=at(Zdr,efr);d();d();d();d();function tfr(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(tfr,"panelPositionForDocument");async function*Dut(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(Dut,"trimChoices");var lN=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=tfr(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function awe(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await awe(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(awe,"reportSolutions");async function cwe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:cwe(t,e)}}s(cwe,"generateSolutionsStream");function Jne(t){return t.replace(/\s+/g,"")}s(Jne,"normalizeCompletionText");async function Nut(t,e,r,n){let i=e.targetPosition,o=e.textDocument,a=aI(t,o.uri),c=cr(),l=Dr.createAndMarkAsIssued({headerRequestId:c,languageId:o.detectedLanguageId,source:r},{});e.savedTelemetryData=await t.get(Bt).updateExPValuesAndAssignments({uri:o.uri,languageId:o.detectedLanguageId},l);let u=await W3(t,c,Hy(o,i),e.savedTelemetryData);if(u.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(u.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(u.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(u.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(u.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let f=u.prompt,p=u.trailingWs;return p.length>0&&(e.startPosition=ns.position(e.startPosition.line,e.startPosition.character-p.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...O4(f),solutionCount:e.solutionCountTarget,promptEndPos:o.offsetAt(i)}),n.debug(t,"prompt:",f),Rt(t,"solution.requested",e.savedTelemetryData),{prompt:f,trailingWs:p,telemetryData:e.savedTelemetryData,repoInfo:a,ourRequestId:c}}s(Nut,"setupPromptAndTelemetry");function Lut(t,e,r,n,i,o){let a=t.get(dg).forLanguage(t,e.detectedLanguageId,o),c=H0(e.detectedLanguageId),l=ZK(e,r),u={language:e.detectedLanguageId,next_indent:l.next??0,prompt_tokens:n.prefixTokens??0,suffix_tokens:n.suffixTokens??0},f={};a==="parsing"&&!c&&(f.stop=[`

`,`\r
\r
`]);let p=sI(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=c?CF(t,e,i.startPosition):()=>{},u.force_indent=l.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=c?CF(t,e,i.startPosition):()=>{};break}return{extra:u,postOptions:f,finishedCb:m,engineInfo:p}}s(Lut,"setupCompletionParams");var lwe=new vt("solutions");async function rfr(t,e){let r=e.targetPosition,n=e.textDocument,i=await Nut(t,e,"open copilot",lwe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:c,repoInfo:l,ourRequestId:u}=i,{extra:f,postOptions:p,finishedCb:m,engineInfo:h}=Lut(t,n,r,o,e,c),g=e.cancellationToken,y={prompt:o,languageId:n.detectedLanguageId,repoInfo:l,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:f},E=await t.get(Mf).fetchAndStreamCompletions(t,y,c.extendedBy(),m,g);if(E.type==="failed"||E.type==="canceled")return{status:"FinishedWithError",error:`${E.type}: ${E.reason}`};let x=E.choices;x=Dut(x),x=ZM(x,k=>EF(t,n,r,k,!1,lwe));let b=ZM(x,async k=>{let P=k.completionText;lwe.info(t,`Open Copilot completion: [${k.completionText}]`);let N=await AVe(t,n,r,k.completionText)??ns.position(r.line,0),[M]=DI(n.getText(ns.range(N,r)));P=M+P;let J=k.completionText;a.length>0&&J.startsWith(a)&&(J=J.substring(a.length));let pe=k.meanLogProb,Y=pe!==void 0?Math.exp(pe):0,G=c.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:J,insertText:P,range:ns.range(N,r),meanProb:Y,meanLogProb:pe||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:G,copilotAnnotations:k.copilotAnnotations}});return cwe(g,b[Symbol.asyncIterator]())}s(rfr,"launchSolutions");async function Xne(t,e,r){return t.get(po).withProgress(async()=>{let i=rfr(t,e);return await awe(i,r)})}s(Xne,"runSolutions");var Fut=Ne(rb()),fQ=Ne(Lc());d();d();function Zne(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let c=o.indexOf("^");if(c!==-1){let l=o.indexOf("^",c+1);if(l===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,c)+o.substring(c+1,l)+o.substring(l+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+l-c-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(Zne,"parseChallengeDoc");var nfr=I.Object({text:I.String(),score:I.Number()}),ifr=I.Object({documents:I.Array(nfr),options:I.Optional(I.Object({}))});async function eie(t,e,r){let n=cr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:c,lines:l,start:u}=Zne(o,t),f=[c.slice(Math.min(u.character,t.character))].concat(l.slice(t.line+1)).join(`
`);r.offset=l.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,serverExperiments:"",deploymentId:""},completionText:f,insertText:f,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:oy.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(eie,"runTestSolutions");var oA=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function ofr(t,e,r){return t.forceSet(oA,new oA(r.documents)),["OK",null]}s(ofr,"handleTestingSetPanelCompletionDocumentsChecked");var Mut=at(ifr,ofr);var Out=zW.type;function sfr(t,e,r,n,i){let o=Jne(n.completionText),a=(0,Fut.SHA256)(o).toString();return t.get(Ss).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations,clientCompletionId:a}),{range:n.range,insertText:n.insertText,command:{command:TIe,title:`Accept completion ${i}`,arguments:[a]}}}s(sfr,"makeCompletion");function dwe(t,e){return`${t}/${e}`}s(dwe,"progressMessage");var uwe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(xr)}async onSolution(e){this.count+=1;let r=sfr(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(fQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:dwe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return afr(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(fQ.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function afr(t,e,r=0){t!==void 0&&await e.connection.sendProgress(fQ.WorkDoneProgress.type,t,{kind:"end",message:dwe(r,10)})}s(afr,"reportDone");var dQ;async function cfr(t,e,r){let n=await iA(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(xr).connection.sendProgress(fQ.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:dwe(0,10),percentage:0});let o=[],a=s(f=>(o.push(f),Promise.resolve()),"onCompletion"),c=r.partialResultToken;c!==void 0&&(a=s(async f=>{await t.get(xr).connection.sendProgress(zW.partialResult,c,{items:[f]})},"onCompletion"));let l=new uwe(t,r,a),u=t.get(oA);if(u.documents){let f=u.documents;await eie(i,f,l)}else{l.offset=n.offsetAt(i);let f=new lN(n,i,e,10);await Xne(t,f,l)}return l.error!==void 0?[null,{code:cn.InternalError,message:l.error}]:[{items:o},null]}s(cfr,"handleChecked");async function lfr(t,e,r){dQ&&(dQ.cancel(),dQ.dispose()),dQ=new In.CancellationTokenSource;let n=dQ.token,i=new o0([e,n]);try{return await cfr(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:cn.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(lfr,"handleCheckedWithAbort");var Qut=at(RDe,lfr);d();d();d();function dfr(t,e,r){let{apiUrl:n,serverUrl:i}=r||t.get(bd).getConfiguredUrls(),o=new URL("login/device",i).href,a=new URL("_ping",e.proxy).href,c=new URL("_ping",e.api).href,l=new URL("_ping",e.telemetry).href;function u(f){return new URL(f).host}return s(u,"label"),[{label:u(o),url:o},{label:u(n),url:n,session:r},{label:u(a),url:a},{label:u(c),url:c,session:r},{label:u(l),url:l}]}s(dfr,"urlsToCheck");async function Uut(t,e,r=U4(t),n,i){let o=dfr(t,r,n).map(async({label:a,url:c,session:l})=>{let{message:u,status:f}=await ffr(e,c,l,i);return{label:a,url:c,message:u,status:f}});return await Promise.all(o)}s(Uut,"checkReachability");async function ffr(t,e,r,n){try{let i=new AbortController;n?.onCancellationRequested(()=>i.abort());let o=await t.fetch(e,{headers:r?{Authorization:`Bearer ${r.accessToken}`}:{},signal:i.signal}),a=o.status>=200&&o.status<400?"reachable":"unreachable";return{message:`HTTP ${o.status}`+(o.statusText?` - ${o.statusText}`:""),status:a}}catch(i){return{message:String(i),status:"unreachable"}}}s(ffr,"determineReachability");var Ep=Ne(require("os")),uN=Ne(require("tls"));async function Hut(t,e){let r=await t.get(jn).getImplementation(),n=await t.get(Qr).getGitHubSession(),i=await t.get(Qr).getToken().catch(()=>{});return{sections:[mfr(t),pfr(t,n),hfr(t,r),await gfr(t,r,i?.endpoints,n,e)]}}s(Hut,"collectDiagnostics");function Wut(t){return t.sections.map(Afr).join(Ep.EOL+Ep.EOL)+Ep.EOL}s(Wut,"formatDiagnosticsAsMarkdown");function pfr(t,e){let r=e&&new URL(e.serverUrl).host,n;return e?r==="github.com"?n=e.login:n=`${e.login} (${r})`:n="not signed in",{name:"Copilot",items:{Version:B_(t),"GitHub Account":n,"Session ID":t.get(As).sessionId,"Send Restricted Telemetry":Q4(t)?"enabled":"disabled","Content Exclusion":t.get(Mc).enabled?"enabled":"unavailable"}}}s(pfr,"collectCopilotSection");function mfr(t){let e={Plugin:Cfr(t),Editor:yfr(t),"Operating System":`${Ep.type()} ${Ep.release()} (${Ep.arch()})`};return WC(e,"NODE_OPTIONS"),{name:"Environment",items:e}}s(mfr,"collectEnvironmentSection");function hfr(t,e){let r=t.get(nu).getHttpSettings(),n={Proxy:r.proxy||void 0,"Proxy Authorization":r.proxyAuthorization?"present":void 0,"Proxy Kerberos SPN":r.proxyKerberosServicePrincipal,"Proxy Strict SSL":r.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name.replace(/Fetcher$/,""),"Number of Root Certificates":uN.rootCertificates.length,"TLS Default Min Version":uN.DEFAULT_MIN_VERSION,"TLS Default Max Version":uN.DEFAULT_MAX_VERSION};return WC(n,"http_proxy"),WC(n,"https_proxy"),WC(n,"no_proxy"),WC(n,"SSL_CERT_FILE"),WC(n,"SSL_CERT_DIR"),WC(n,"OPENSSL_CONF"),WC(n,"NODE_EXTRA_CA_CERTS"),WC(n,"NODE_TLS_REJECT_UNAUTHORIZED"),{name:"Network Configuration",items:n}}s(hfr,"collectNetworkConfigSection");async function gfr(t,e,r,n,i){return{name:"Reachability",items:Object.fromEntries((await Uut(t,e,r,n,i)).map(({label:a,message:c})=>[a,c]))}}s(gfr,"collectReachabilitySection");function qut(t){return t.includes("`")?`\`\` ${t} \`\``:`\`${t}\``}s(qut,"quoteCode");function WC(t,e){let r=process.env[e];r&&(t[qut(e)]=qut(r)),r!==process.env[e.toUpperCase()]&&WC(t,e.toUpperCase())}s(WC,"addEnvironmentVariable");function Afr(t){return`## ${t.name}`+Ep.EOL+Ep.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"N/A"}`).join(Ep.EOL)}s(Afr,"formatSectionAsMarkdown");function yfr(t){let e=t.get(nn).getEditorInfo();return`${e.readableName||e.name} ${e.version}`}s(yfr,"getEditorDisplayVersion");function Cfr(t){let e=t.get(nn).getEditorPluginInfo();return`${e.readableName||e.name} ${e.version}`}s(Cfr,"getPluginDisplayVersion");var Efr=I.Object({});async function vfr(t,e){return[{report:Wut(await Hut(t,e))},null]}s(vfr,"handleDiagnosticsChecked");var Gut=at(Efr,vfr);d();d();d();d();function jut(t,e,r){function n(o,a,c){let l=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let f=u.replace(l,""),p=u.length-f.length;return c(p)+f}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",c=>"	".repeat(Math.floor(c/i))+" ".repeat(c%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",c=>" ".repeat(c*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,f=u%i;if(f!==0&&u>0){let p=" ".repeat(f);return n(c,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return c},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(jut,"normalizeIndentCharacter");function Vut(t,e,r,n,i,o,a){let c=n.lineAt(i),l=e.map(u=>{let f=ns.range(ns.position(i.line,0),ns.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=jut(o,u.completion,c.isEmptyOrWhitespace)),c.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(c.text)))p=u.completion.completionText;else{let h=ns.range(f.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:cr(),insertText:p,range:f,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(r===2&&a!==void 0){let u=l.find(f=>f.index===a);if(u){let f=l.filter(p=>p.index!==a);l=[u,...f]}}return l}s(Vut,"completionsFromGhostTextResults");async function fwe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await tye(t,e,r,n);if(o.type!=="success")return o;let[a,c]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let l=o$e(t,e.textDocument,e.position,c),u=Vut(t,a,c,e.textDocument,e.position,n.formattingOptions,l);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let f=t.get(Bt),p=(vi(t,kt.AlwaysRequestMultiline)??f.enableProgressiveReveal(o.telemetryBlob))&&Ly.isSupported(e.textDocument.detectedLanguageId),m=vi(t,kt.EnableSpeculativeRequests),h=f.enableSpeculativeRequests(o.telemetryBlob),g=p||(m??h),y=vi(t,kt.EnableSpeculativeRequestsShown)??f.enableSpeculativeRequestsShown(o.telemetryBlob);if(g&&c!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let x={isSpeculative:!0,opportunityId:n.opportunityId},b=s(()=>tye(t,e,void 0,x),"fn");y?t.get(km).set(u[0].clientCompletionId,b):Promise.resolve().then(b)}let E=u.map(x=>{let{start:b,end:_}=x.range,k=In.Range.create(b,In.Position.create(_.line,_.character-i));return{...x,range:k}});return{...o,value:E}}s(fwe,"getInlineCompletionsResult");async function tie(t,e,r,n,i={}){xfr(t,e,r);let o=await fwe(t,Hy(e,r),n,i);return PGe(t,o)}s(tie,"getInlineCompletions");function xfr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});OY.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(xfr,"logCompletionLocation");var Xut=Ne(Lc());d();var $ut=require("crypto");var dN=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new mwe(e,this.id)}},mwe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(xr),o=(0,$ut.randomUUID)(),a=i.connection.onProgress(jW.type,o,c=>{n.push(...c)});r.onCancellationRequested(()=>{a?.dispose()});try{let c=await i.connection.sendRequest(jW.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...c)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function fN(t,e,r){try{let n=t.get(uc),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof dN&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof dN&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){fn.error(t,"Failed to set context items on context providers",n)}}s(fN,"setContextItems");var pwe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function zut(t,e,r){return e.map(i=>{try{if(typeof i=="string")return ac(r.uri,i,pwe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=ac(r.uri,i.scheme||"",pwe)),"pattern"in i&&(o&&=ac(r.uri,i.pattern||"",pwe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(zut,"match");d();var bfr=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),ew=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function Ifr(t,e,r){return t.forceSet(ew,new ew(r.documents,r.basename||"")),["OK",null]}s(Ifr,"handleTestingSetCompletionDocumentsChecked");var Yut=new vt("setCompletionDocuments"),Jut=at(bfr,Ifr);function rie(t,e,r,n){let i=t.get(ew);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){Yut.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=Tfr(i,r);return a&&a.length>0?Kut(a,o,e):void 0}else return Yut.debug(t,"Returning completions for all pre-set documents"),Kut(i.documents,o,e)}}s(rie,"getTestCompletions");function Kut(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:c}=Zne(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:c}}})}s(Kut,"sliceAndMapCompletions");function Tfr(t,e){return t.basename===Oi(e)?t.documents||[]:[]}s(Tfr,"getFilteredDocs");var Zut=I.Object({doc:I.Object({position:bl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:J6,version:I.Number()}),contextItems:I.Optional(Zge)}),pQ;async function edt(t,e,r,n){pQ&&(pQ.cancel(),pQ.dispose()),pQ=new In.CancellationTokenSource;let i=new o0([e,pQ.token]);r.contextItems&&fN(t,r.contextItems);let o=rie(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:cr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await iA(t,r.doc,i)}catch(p){if(!(p instanceof Xut.ResponseError))throw p;switch(p.code){case cn.CopilotNotAvailable:case cn.ContentModified:return[{completions:[]},null]}throw p}let c=r.doc.position,l=await tie(t,a,c,i,{isCycling:n,formattingOptions:r.doc});if(!l)return[{completions:[]},null];let u=t.get(Ss);for(let p of l)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:l.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(edt,"handleGetCompletionsHelper");var tdt=at(Zut,(t,e,r)=>edt(t,e,r,!1)),rdt=at(Zut,(t,e,r)=>edt(t,e,r,!0));d();var ndt=Ne(rb()),pN=Ne(Lc());var wfr=I.Object({doc:I.Object({position:bl,uri:J6,version:I.Number()}),panelId:I.String()});function _fr(t,e,r,n,i){let o=Jne(i.completionText),a=(0,ndt.SHA256)(o).toString();return t.get(Ss).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(_fr,"makeSolution");var hwe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(xr)}onSolution(e){return this.service.connection.sendNotification(new pN.NotificationType("PanelSolution"),_fr(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return idt(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new pN.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function idt(t,e){return e.connection.sendNotification(new pN.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(idt,"reportDone");var mQ;async function Sfr(t,e,r){mQ&&(mQ.cancel(),mQ.dispose()),mQ=new In.CancellationTokenSource;let n=new o0([e,mQ.token]),i=r.doc.position,o=ns.range(i,i),a=new hwe(t,r,o),c=t.get(oA);if(c.documents){let l=c.documents;eie(i,l,a)}else{let l;try{l=await iA(t,r.doc,n)}catch(f){if(!(f instanceof pN.ResponseError))throw f;switch(f.code){case cn.CopilotNotAvailable:case cn.ContentModified:return Rfr(t,r)}throw f}a.offset=l.offsetAt(i);let u=new lN(l,i,n,10);Xne(t,u,a)}return[{solutionCountTarget:10},null]}s(Sfr,"handleGetPanelCompletionsChecked");async function Rfr(t,e){return await idt(e.panelId,t.get(xr)),[{solutionCountTarget:0},null]}s(Rfr,"produceEmptySolutions");var odt=at(wfr,Sfr);d();var kfr=I.Object({});function Pfr(t,e,r){return[{version:t.get(lo).getDisplayVersion(),buildType:sy(t),runtimeVersion:`node/${process.versions.node}`},null]}s(Pfr,"handleGetVersionChecked");var sdt=at(kfr,Pfr);d();var Bfr=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function Dfr(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(Dfr,"buildSystemMessage");function Nfr(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(Nfr,"buildUserMessage");async function Lfr(t,e,r){if(r.changes.length===0)return[null,{code:cn.InvalidRequest,message:"No changes provided"}];let n=new ka(t),i=await Oo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:Kc(process.cwd())}],a=await EC.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),c=t.get(Wi),l=c.create({capabilities:{skills:[LC]}}),u=new GT({message:"",type:"user"});await c.addTurn(l.id,u);let f=oN({workDoneToken:cr()});await t.get(Js).begin(l,u,f);let h=(await new JT(t,l,u,e).skillResolver.resolve(LC))?.head?.name,g=[{role:"system",content:await Dfr(r.userLanguage,h)},{role:"user",content:Nfr(r,a)}],y=await t.get(Bt).updateExPValuesAndAssignments(),E=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:i0.user("git-commit",cr())},e,y);if(E.type!=="success")return[null,{code:cn.InternalError,message:"Failed to generate commit message"}];let x=E.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:x?x[1].trim():E.value.trim()},null]}s(Lfr,"handleGitCommitGenerateChecked");var adt=at(Bfr,Lfr);d();var ldt=Due.type,hQ;function cdt(t){return{title:"Completion Accepted",command:G7,arguments:[t]}}s(cdt,"makeCommand");async function Mfr(t,e,r){hQ&&(hQ.cancel(),hQ.dispose());let n=r.context.triggerKind===1;hQ=new In.CancellationTokenSource;let i=hQ.token,o=new o0([e,i]);r.contextItems&&fN(t,r.contextItems,r.data);let a=rie(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:cdt(cr()),...h}))},null];let c=await iA(t,r.textDocument,o),l=r.position,u=await tie(t,c,l,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:cn.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:cn.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let f=t.get(Ss);for(let m of u)f.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:cdt(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(Mfr,"handleChecked");var udt=at(UY,(t,e,r)=>Mfr(t,e,r));d();var ddt=Mue.type,gQ;async function Ofr(t,e,r){gQ&&(gQ.cancel(),gQ.dispose());let n=r.context.triggerKind===1;gQ=new In.CancellationTokenSource;let i=gQ.token,o=new o0([e,i]);r.contextItems&&fN(t,r.contextItems);let a=await iA(t,r.textDocument,o),c=await fwe(t,Hy(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(c.type!=="promptOnly")throw new Error(`Unexpected result type ${c.type}`);return[{prompt:c.prompt},null]}s(Ofr,"handleChecked");var fdt=at(UY,(t,e,r)=>Ofr(t,e,r));d();d();function gwe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return mN(i)}s(gwe,"asReadableCert");function mN(t){return t.replace(/\s/g,"")}s(mN,"normalizeNewlines");var Ufr=I.Object({});async function qfr(t){return[{certificates:(await t.get(Uc).getAllRootCAs()).map(mN)},null]}s(qfr,"handleListCertificatesChecked");var pdt=at(Ufr,qfr);d();async function Hfr(t,e,r){let n=t.get(Jg);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Jc(r.textDocument.uri);t.get(Ig).onUserPositionChange(i,new rn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(c=>({text:c.edit.text,textDocument:c.edit.textDocument,range:c.edit.range,command:{title:"Accept inline edit",command:G7,arguments:[c.id]}}))},null]:[{edits:[]},null]}s(Hfr,"handleChecked");var mdt=at(_De,Hfr);d();var Wfr=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function Gfr(t,e,r){let n=t.get(Ss),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=jfr(r,i);L2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(Gfr,"notifyAcceptedChecked");function jfr(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(jfr,"getSuggestionStatus");var hdt=at(Wfr,Gfr);d();var Vfr=I.Object({uuids:I.Array(I.String())});function $fr(t,e,r){let n=t.get(Ss),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let c of r.uuids)n.delete(c);let a=i.map(c=>({completionText:c.displayText,completionTelemetryData:c.telemetry}));lJ(t,"ghostText",o.offset,o.uri,a),t.get(Hd).resetState()}return["OK",null]}s($fr,"notifyRejectedChecked");var gdt=at(Vfr,$fr);d();var zfr=I.Object({uuid:I.String({minLength:1})});function Yfr(t,e,r){let i=t.get(Ss).get(r.uuid);return i&&QY(t,i.triggerCategory,i),["OK",null]}s(Yfr,"notifyShownChecked");var Adt=at(zfr,Yfr);d();var Kfr=MGe;function Jfr(t,e,r){let n=t.get(uc),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new dN(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(Jfr,"registerContextProviders");var ydt=at(Kfr,Jfr);d();d();var Xfr=I.Object({uri:I.Optional(I.String())}),Zfr=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),Edt=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[G2e]:I.Optional(Xfr),http:I.Optional(lQe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),ywe=Object.keys(Edt.properties).filter(t=>t!=="github"),e0r=I.Intersect([Edt,Zfr]),t0r=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),Cdt=Fs.Compile(t0r),Awe=Fs.Compile(e0r);async function vdt(t,e){if(!Cdt.Check(e))throw new bu(Cdt.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&Cwe(t,r),await AQ(t,r)}s(vdt,"notifyChangeConfiguration");function Cwe(t,e){for(let i of Awe.Errors(e)){let o=i.path.split("/")?.[1];wu.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Awe.Check(e))throw new bu(Awe.Errors(e));let r=t.get(Zg);r.setConfig(kt.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(kt.DelayCompletions,e.delayCompletions),r.setConfig(kt.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(kt.FilterCompletions,e.filterCompletions),e.http&&Ewe(t,e.http);let n=e["github-enterprise"];n&&jDe(t,n.uri),e.github?.copilot&&r0r(t,e.github.copilot)}s(Cwe,"applySettingsToConfiguration");function r0r(t,e){let r=t.get(Zg);for(let n of Object.values(kt)){let i=mQe(e,n);r.setConfig(n,i)}typeof e.mcp=="string"&&o0r(t,e.mcp),n0r(t,e.globalCopilotInstructions||""),i0r(t,e.globalGitCommitInstructions||"")}s(r0r,"applyCopilotConfiguration");function n0r(t,e){try{t.get(pC).setGlobalCopilotInstructions(e)}catch(r){wu.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(n0r,"applyGlobalCopilotInstructionsConfiguration");function i0r(t,e){try{t.get(pC).setGlobalGitCommitInstructions(e)}catch(r){wu.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(i0r,"applyGlobalGitCommitInstructionsConfiguration");function Ewe(t,e){let r=t.get(Zg);e.proxy===void 0&&(e=uQe(r.env));try{r.setHttpSettings(AM(e))}catch(n){if(!(n instanceof TypeError))throw n;wu.warn(t,"Invalid proxy URL",e.proxy,n),r.setHttpSettings({proxy:""})}}s(Ewe,"applyHttpConfiguration");async function o0r(t,e){try{let r=JSON.parse(e||"{}");await t.get(th).updateMCPServers(r)}catch(r){wu.error(t,"Failed to apply MCP configuration",r)}}s(o0r,"applyMCPConfiguration");async function AQ(t,e){if(!t.get(ds).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(Ef).initialize(r)}await t.get(Qr).primeToken()}s(AQ,"initializePostConfigurationDependencies");var xdt=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),s0r=I.Object({editorInfo:xdt,editorPluginInfo:xdt,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function a0r(t,e,r){return t.get(nn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),gre(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&Cwe(t,r.editorConfiguration),await AQ(t,r.editorConfiguration),["OK",null]}s(a0r,"handleSetEditorInfoChecked");var bdt=at(s0r,a0r);d();var c0r=I.Object({options:I.Optional(I.Object({}))});async function l0r(t,e,r){let n=t.get(Dn).pendingSignIn?.status;if(n===void 0)return[null,{code:cn.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:cn.DeviceFlowFailed,message:String(o)}]}finally{t.get(Dn).pendingSignIn=void 0}}s(l0r,"handleSignInConfirmChecked");var Idt=at(c0r,l0r);d();var u0r=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function d0r(t,e,r){try{let n=t.get(Dn),i=await n.checkAndUpdateStatus({githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(Il).findAppIdToAuthenticate(),a=await t.get(g2).getToken(t,o,n.getConfiguredUrls()),c=a.waitForAuth.then(async l=>(t.get(Il).githubAppId=o,await t.get(Dn).setPersistedSession(l),await t.get(Dn).checkAndUpdateStatus({freshSignIn:!0})));return t.get(Dn).pendingSignIn={verificationUri:a.verification_uri,status:c},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:Are,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof Bs))throw n;return[null,{code:cn.DeviceFlowFailed,message:n.message}]}}s(d0r,"handleSignInInitiateChecked");var vwe=at(u0r,d0r);d();var f0r=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function p0r(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(Dn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(Dn).checkAndUpdateStatus(),null]}s(p0r,"handleSignInWithGithubTokenChecked");var Tdt=at(f0r,p0r);d();var m0r=I.Object({options:I.Optional(I.Object({}))});async function h0r(t,e,r){return await t.get(Dn).deletePersistedSession(),[await t.get(Dn).checkAndUpdateStatus(),null]}s(h0r,"handleSignOutChecked");var wdt=at(m0r,h0r);d();var g0r=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),xwe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function A0r(t,e,r){let n=t.get(lo),i=t.get(nn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&PC.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:Zae(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},PC.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let c=new xwe(r.stacktrace??"N/A",i.name);return c.stack=void 0,Ia(t,c,void 0,o,a),["OK",null]}s(A0r,"handleTelemetryExceptionChecked");var _dt=at(g0r,A0r);d();d();function Sdt(t={}){return{accessToken:cr(),login:"test login",...t,...Ib(t)}}s(Sdt,"testGitHubSession");var nie=class extends Dn{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},hN=class extends Dn{constructor(r,n="",i){super(r,{});this.githubAppId=n;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};d();function y0r(t){return new O_({token:`test token ${cr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(y0r,"createTestCopilotToken");var yQ=class extends Qr{constructor(r){super();this.envelopeFn=r;this.wasReset=!1;this.ghSession=Sdt()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(r=>y0r(r)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},iie=class extends yQ{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},gN=class extends iie{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var C0r=I.Object({options:I.Optional(I.Object({}))});async function E0r(t,e,r){let n=new gN("tid=valid-copilot-token");return t.forceSet(Dn,new hN(t,"",n)),t.get(Qr).resetToken(),t.get(po).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(E0r,"handleTestingAlwaysAuthChecked");var Rdt=at(C0r,E0r);d();var v0r=I.Object({messages:I.Array(I.Object({role:I.Enum(ol),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(pn)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function x0r(t,e,r){let n=new ka(t),i=await t.get(Pa).getBestChatModelConfig([r.modelFamily??pn.CopilotBase]),o=await eF(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:i0.user("test",cr())},e,o),null]}s(x0r,"handleChatMLChecked");var kdt=at(v0r,x0r);d();d();d();var vN=Ne(Nft(),1),mKi={ALPN_HTTP2:vN.default.ALPN_HTTP2,ALPN_HTTP2C:vN.default.ALPN_HTTP2C,ALPN_HTTP1_1:vN.default.ALPN_HTTP1_1,ALPN_HTTP1_0:vN.default.ALPN_HTTP1_0},{fetch:hKi,context:Lft,reset:gKi,noCache:AKi,h1:yKi,keepAlive:CKi,h1NoCache:EKi,keepAliveNoCache:vKi,cacheStats:xKi,clearCache:bKi,offPush:IKi,onPush:TKi,createUrl:wKi,timeoutSignal:_Ki,Body:SKi,Headers:Mft,Request:RKi,Response:kKi,AbortController:PKi,AbortError:vie,AbortSignal:BKi,FetchBaseError:DKi,FetchError:NKi,ALPN_HTTP2:LKi,ALPN_HTTP2C:MKi,ALPN_HTTP1_1:FKi,ALPN_HTTP1_0:OKi}=vN.default;var Oft=require("crypto"),Qft=require("http"),Uft=require("stream"),qft=require("util"),bN=Ne(hg());var Gmr=9e4,jmr=new bN.ProtocolRequestType("copilot/fetch"),Vmr=new bN.ProtocolRequestType("copilot/fetchCancel"),$mr=new bN.ProgressType,zmr=new bN.ProtocolRequestType("copilot/fetchDisconnectAll"),GC=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},xN=class extends jn{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(lo).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(xr).connection.sendRequest(zmr,{})}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(xr).connection,a=(0,Oft.randomUUID)(),c=new In.CancellationTokenSource,l=new Uft.PassThrough,u=s(()=>{o.sendRequest(Vmr,{workDoneToken:a})},"sendCancelRequest"),f=s(()=>{l.emit("error",new vie("EditorFetch request aborted")),l.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new GC("EditorFetcher received unexpected abort signal");if(i.aborted)throw new vie("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress($mr,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",f),m.error&&l.emit("error",new GC(m.error)),l.end()):m.kind==="report"&&l.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new GC("Request timed out from lsp server"))},n.timeout??Gmr),y=s(()=>{h(new vie("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(jmr,Kmr(r,a,n),c.token).then(m).catch(E=>{let x="EditorFetcher request failed";E&&typeof E=="object"&&"message"in E&&(x+=`: ${String(E.message)}`),E&&typeof E=="object"&&"data"in E&&(x+=`: ${(0,qft.inspect)(E.data)}`),h(new GC(x))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new GC("EditorFetcher received invalid response");return i?.addEventListener("abort",f),new Zx(p.status,Qft.STATUS_CODES[p.status]??"",new Mft(p.headers),()=>Ymr(l),()=>l)}};function Ymr(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(Ymr,"consumeStream");function Kmr(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(Kmr,"convertOptionsToParams");var Jmr=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function Xmr(t,e,r){let n=new xN(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:c,cancelAfterRequest:l,cancelAfterFirstChunk:u,...f}=r;c&&i.abort();let p=n.fetch(a,{signal:o,...f});l&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof GC?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let E=m.body();for await(let x of E){let b=x.toString();return i.abort(),[{status:h,headers:g,body:b},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof GC?y.message:String(y)}`},null]}}s(Xmr,"handleTestingFetchChecked");var Hft=at(Jmr,Xmr);d();var Zmr=I.Object({});async function ehr(t,e,r){return await t.get(Xa).flush(),["OK",null]}s(ehr,"handleTestingFlushPromiseQueueChecked");var Wft=at(Zmr,ehr);d();var thr=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function rhr(t,e,r){try{await t.get(SC).start();let n=t.get(OR),i=r.timeout??1e3,o=Date.now(),a=[],c=!0;for(;c;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,RK,e)}catch{}finally{c=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(rhr,"handleTestingGetContextChecked");var Gft=at(thr,rhr);d();var nhr=I.Object({uri:I.String()});async function ihr(t,e,r){let i=await t.get(pr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(ihr,"handleGetDocumentChecked");var jft=at(nhr,ihr);d();var ohr=I.Object({options:I.Optional(I.Object({}))});async function shr(t,e,r){t.forceSet(Dn,new nie(t)),t.get(Qr).resetToken();try{await t.get(Qr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(shr,"handleTestingNeverAuthChecked");var Vft=at(ohr,shr);d();d();d();var Jwe=class extends Uc{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},$ft=s(t=>new Jwe(t),"createTestCertificateReader");function Zwe(t,e,r){let n=new Xwe;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new Zx(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Zwe,"createFakeResponse");function zft(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Zwe(t,n,Object.assign({"content-type":"application/json"},r))}s(zft,"createFakeJsonResponse");var wQ=class extends jn{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var xie=class extends wQ{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var Xwe=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var e_e=class extends wQ{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(zft(200,this.fullConfig)):Promise.resolve(Zwe(404,""))}},bie=class extends e_e{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}};var ahr=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function chr(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(jn,new bie(n,t.get(jn)))}return["OK",null]}s(chr,"handleTestingOverrideExpFlagsChecked");var Yft=at(ahr,chr);d();var lhr=I.Object({rules:Qge});function uhr(t,e,r){let n=t.get(Mc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:cn.InternalError,message:"Could not set content exclusion rules"}]}s(uhr,"handleTestingSetContentExclusionRulesChecked");var Kft=at(lhr,uhr);d();var dhr=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(iN)),options:I.Optional(I.Object({}))});function fhr(t,e,r){return t.get(bv).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(fhr,"handleTestingSetSyntheticTurnsChecked");var Jft=at(dhr,fhr);d();var phr=I.Object({});async function mhr(t,e,r){let n=t.get(wc),i=t.get(Tc);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,c,l){return i.logIt(t,a,"triggerShowMessage",`${c} (${String(l)})`)}s(o,"sendNotification")}s(mhr,"handleTriggerShowMessageChecked");var Xft=at(phr,mhr);d();d();d();d();var Zft=Ne(require("tls"));var Iie=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(Uc)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=Zft.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};var IN=class extends jn{constructor(r,n){super();this.name="HelixFetcher";this.certificateConfigurator=new Iie(r),this.proxySocketFactory=r.get(dC),this.proxySocketTimeoutForTesting=n?.proxySocketTimeoutForTesting,r.get(nu).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(r,i)}),this.fetchApi=this.createFetchApi(r,r.get(nu).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(r,n){if(!r?.proxy)return;let i=new URL(r.proxy);return async o=>(o.rejectUnauthorized=r.proxyStrictSSL,o.timeout=n,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:r.proxyAuthorization,kerberosServicePrincipal:r.proxyKerberosServicePrincipal}))}createFetchApi(r,n){let i=r.get(lo),o=this.proxySocketTimeoutForTesting;return Lft({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(n,o),rejectUnauthorized:n.proxyStrictSSL})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let c=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(c);let l=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new y6(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new Zx(l.status,l.statusText,l.headers,()=>l.text(),()=>l.body)}disconnectAll(){return this.fetchApi.reset()}};d();d();var _Q=require("fs"),e0t=require("path");var TN=class extends yo{static{s(this,"LocalFileSystem")}async readFileString(e){return(await _Q.promises.readFile(La(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(La(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=La(e),n=await _Q.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,e0t.join)(r,o.name));i.push([o.name,this.getFileType(a,c,l)])}return i}async statWithLink(e){let r=await _Q.promises.lstat(e);if(r.isSymbolicLink())try{let n=await _Q.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};d();var Tie=class extends nA{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};d();var wie=class extends Wc{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};d();var _ie=class extends J0{constructor(){super(...arguments);this.allowedFiles=[]}static{s(this,"TestingFileSearch")}setAllowedFiles(r){this.allowedFiles=r}findFiles(r,{uri:n},i){return Promise.resolve(this.allowedFiles)}};d();function hhr(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(hhr,"fakeChatModelConfiguration");function ghr(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(ghr,"fakeEmbeddingModelConfiguration");var Sie=class extends Pa{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(hhr(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(ghr(e))}};d();var Rie=class extends iu{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Od}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},kie=class extends wc{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};d();function t0t(t,e,r,n){return gE.create(UDe(t),e,r,n,e)}s(t0t,"createTextDocument");var t_e=class extends pr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Oi(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=t0t(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=t0t(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},Pie=class extends t_e{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var r_e=class extends Tc{static{s(this,"NullLog")}logIt(...e){}};function Ahr(t){let e=new E3;return e.set(nu,t),e.set(GS,t),e.set(lo,new lo),e.set(Hp,new Hp({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(Uc,$ft([])),e.set(dC,$Z(e)),e.set(ly,new ly),e.set(eg,new oG),e.set(Xh,new Xh),e.set(YA,new YA),e.set(Jl,new Jl(e,"tid=test",!0)),e.set(xl,new xl),e.set(wc,new kie),e.set(iu,new Rie),e.set(ay,new K3),e.set(Tc,new r_e),e.set(xd,new xd),e.set(As,new As("test-session","test-machine")),e.set(bd,new hD(e)),e.set(Ef,new Ef(e,"copilot-test")),e.set(Bt,new Bt(e)),e.set(Eg,new Eg),e.set(dg,new zP),e.set(Qr,new gN("tid=test")),e.set(po,new nG),e.set(Xa,new Xa),e.set(Dy,new Dy(e)),e.set(J0,new _ie),e.set(Fm,new Fm(e)),e.set(_E,zK(e)),e.set(Hd,new Hd),e.set(Of,new Of),e.set(SE,SE.default),e.set(cp,new cp),e.set(mm,new mm(e,!1)),e.set(Il,new Il),e.set(mn,new mn(e)),e.set(Fd,new rY),e.set(Rl,new Rl),e.set(uc,kK(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Lm,new Lm(e)),yhr(e),e.set(Lf,new Lf(e)),e.set(ds,new ds),e.set(Fy,new HD),e.set(km,new km),e.set(Jf,new Jf),e.set(CC,new CC(e)),e}s(Ahr,"_createBaselineContext");function yhr(t){t.set(Wi,new Wi(t)),t.set(Js,new Js(t)),t.set(Tu,new Tu(t)),t.set(cl,new cl),t.set(Gl,new Gl),t.set(Wc,new wie),t.set(lh,new lh(t,[])),t.set(Pa,new Sie),t.set(nA,new Tie),t.set(DC,new DC(t)),t.set(jT,new jT),t.set(Va,new Va(t)),t.set(Iu,new Iu),t.set(Cp,new Cp)}s(yhr,"registerConversation");function r0t(){let t=Ahr(new GS(new YP,new Map));return t.set(jn,new xie),t.set(nn,new n_e),t.set(pr,new Pie(t)),t.set(yo,new TN),t.set(Mc,new Mc(t)),t.set(qc,new qc(t)),t.set(xu,new XZ(t)),t.set(_m,new _m(t)),t.set(Qy,new j3),t.set(Qg,new wee),Zte(t),t}s(r0t,"createLibTestingContext");var n_e=class extends nn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var i0t=Ne(require("fs"));var n0t=`${process.env.HOME}/.copilot-testing-gh-token`,Bie,Die;function o0t(t){let e=new yQ(Chr);t.forceSet(Qr,e)}s(o0t,"setIntegrationTokenManager");var Chr=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Die)return Die;let e=t||process.env.GITHUB_COPILOT_TOKEN||await Ehr(),r=r0t(),n=new IN(r);return r.forceSet(jn,n),Die=eG(r,{...Ib({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new Bs('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Die},"getEnvelope");async function Ehr(){try{Bie??=(await i0t.promises.readFile(n0t)).toString().trim()}catch{Bie??=process.env.GITHUB_TOKEN??""}if(!Bie)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${n0t}. Run "npm run get_token" to get one.`);return Bie}s(Ehr,"getTestingGitHubToken");var vhr=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function xhr(t,e,r){return o0t(t),t.forceSet(Dn,new hN(t,r.githubAppId)),["OK",null]}s(xhr,"handleTestingUseTestingTokenChecked");var s0t=at(vhr,xhr);d();var bhr=I.Object({});async function Ihr(t,e,r){return await new VD().uninstall(t),["OK",null]}s(Ihr,"handleUninstallChecked");var a0t=at(bhr,Ihr);d();var Thr=FGe;function whr(t,e,r){let n=t.get(uc),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(whr,"unregisterContextProviders");var c0t=at(Thr,whr);d();var i_e=Ne(require("os"));var _hr=I.Object({expectedCertificate:I.String()});async function Shr(t,e,r){let i=(await VZ(t).getAllRootCAs()).map(mN),o=mN(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${gwe(o)}. Only found those installed on the system:${i_e.EOL}${i.map(a=>"- "+gwe(a)).join(i_e.EOL)}`},null]}s(Shr,"handleVerifyCertificateChecked");var l0t=at(_hr,Shr);d();var Rhr=I.Object({});async function khr(){return[{status:!!await new GO().load()},null]}s(khr,"handleVerifyKerberosChecked");var u0t=at(Rhr,khr);d();var Phr=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function Bhr(t,e,r){let i=await t.get(pr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(Bhr,"handleVerifyStateChecked");var d0t=at(Phr,Bhr);d();var Dhr=I.Object({});function Nhr(t,e,r){return[t.get(pr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(Nhr,"handleVerifyWorkspaceStateChecked");var f0t=at(Dhr,Nhr);var ZR=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function p0t(){let t=new Map;return t.set(ldt.method,udt),t.set(ddt.method,fdt),t.set("getCompletions",tdt),t.set("getCompletionsCycling",rdt),t.set("getPanelCompletions",odt),t.set(Out.method,Qut),t.set("getVersion",sdt),t.set("setEditorInfo",bdt),t.set("checkStatus",qat),t.set("checkQuota",Uat),t.set("checkFileStatus",Oat),t.set("signInInitiate",vwe),t.set("signIn",vwe),t.set("signInConfirm",Idt),t.set("signInWithGithubToken",Tdt),t.set("signOut",wdt),t.set("notifyShown",Adt),t.set("notifyAccepted",hdt),t.set("notifyRejected",gdt),t.set("telemetry/exception",_dt),t.set("textDocument/copilotInlineEdit",mdt),t.set("testing/overrideExpFlags",Yft),t.set("testing/alwaysAuth",Rdt),t.set("testing/neverAuth",Vft),t.set("testing/useTestingToken",s0t),t.set("testing/setCompletionDocuments",Jut),t.set("testing/setPanelCompletionDocuments",Mut),t.set("testing/triggerShowMessageRequest",Xft),t.set("testing/flushPromiseQueue",Wft),t.set("testing/getDocument",jft),t.set("testing/chatml",kdt),t.set("testing/setSyntheticTurns",Jft),t.set("testing/fetch",Hft),t.set("testing/setContentExclusionRules",Kft),t.set("testing/setCopilotEditsResponse",Iut),t.set("testing/getContext",Gft),t.set("uninstall",a0t),t.set("debug/diagnostics",Gut),t.set("debug/listCertificates",pdt),t.set("debug/verifyState",d0t),t.set("debug/verifyCertificate",l0t),t.set("debug/verifyKerberos",u0t),t.set("debug/verifyWorkspaceState",f0t),t.set("context/registerProviders",ydt),t.set("context/unregisterProviders",c0t),t.set("conversation/preconditions",Aut),t.set("conversation/persistence",mut),t.set("conversation/create",dut),t.set("conversation/turn",vut),t.set("conversation/turnDelete",xut),t.set("conversation/destroy",fut),t.set("conversation/rating",yut),t.set("conversation/copyCode",Vlt),t.set("conversation/insertCode",$lt),t.set("conversation/templates",Eut),t.set("conversation/agents",jlt),t.set("conversation/registerTools",Cut),t.set("conversation/notifyCodeAcceptance",put),t.set("copilot/models",Put),t.set("copilot/setModelPolicy",But),t.set("copilot/codeReview",but),t.set("git/commitGenerate",adt),t.set("editConversation/create",Tut),t.set("editConversation/turn",_ut),t.set("editConversation/turnDelete",Sut),t.set("editConversation/destroy",wut),t.set("mcp/getTools",Rut),t.set("mcp/updateToolsStatus",kut),new ZR(t)}s(p0t,"getAllMethods");d();d();d();var m0t=Ne(hg());var jC=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new m0t.NotificationType(this.name)}};var o_e=class extends jC{constructor(){super(...arguments);this.name=Rue.method;this.params=hDe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(Dn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},h0t=[o_e];d();var s_e=class extends jC{constructor(){super(...arguments);this.name=Nue.method;this.params=bDe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(Ss).get(n);o&&s$e(this.ctx,o)}},a_e=class extends jC{constructor(){super(...arguments);this.name=Fue.method;this.params=SDe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(Jg).handleShown(n)}},c_e=class extends jC{constructor(){super(...arguments);this.name=Lue.method;this.params=IDe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(Ss),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?uJ(this.ctx,a):a$e(this.ctx,a,i))}},g0t=[s_e,a_e,c_e];d();var Nie=class extends jC{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Xd).cancel(r.token)}};var Lhr=[...h0t,...g0t,Nie];function A0t(t,e){for(let r of Lhr){let n=new r(t),i=Fs.Compile(n.params);e.onNotification(n.type,Wu(t,async o=>{hv(o),i.Check(o)?await n.handle(o):wu.error(t,`Notification ${n.name}:`,new bu(i.Errors(o)))},`Notification ${n.name}`))}}s(A0t,"registerNotifications");d();var C0t=Ne(require("events")),Lie=Ne(Lc());var y0t=new vt("AgentTextDocumentConfiguration"),l_e=class{constructor(e){this.ctx=e;this.emitter=new C0t.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return gE.create(e,r,n,i)}catch(o){throw y0t.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(Lie.TextDocumentContentChangeEvent.isIncremental(a)){let c={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(c)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),gE.withChanges(e,r,n)}catch(i){throw y0t.exception(this.ctx,i,".update"),i}}},nw=class extends pr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(Bue.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(c=>void c.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new l_e(r),this._notebookDocuments=new Lie.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(xr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Jc(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let c=Jc(i.uri),l=this._documents.get(c);l!==void 0&&(l=this._textDocumentConfiguration.update(l,o,a),this._documents.set(c,l))}),this.connection.onDidCloseTextDocument(n=>{let i=Jc(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Jc(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var E0t=Fs.Compile(EDe);function hv(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=hv(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=hv(e[r])}return t}}s(hv,"purgeNulls");var xr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get(Tc)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),A0t(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(lo).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async l=>{try{if(i&&l&&typeof l=="object"&&!("settings"in l)){let u=await r.workspace.getConfiguration(["github.copilot",...ywe].map(p=>({section:p}))),f={github:{copilot:u.shift()}};for(let p of ywe)f[p]=u.shift();l.settings=f}return vdt(e,hv(l))}catch(u){wu.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(l){try{e.get(nw).didChangeWorkspaceFolders(l),e.get(cp).emit(l)}catch(u){wu.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:l,uri:u})=>a({added:[{uri:u,name:l??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:l,uri:u})=>a({added:[],removed:[{uri:u,name:l??u}]})),r.onInitialize(async l=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=l.capabilities;let u=l.capabilities.copilot,f=hv(l.initializationOptions);if(f){if(!E0t.Check(f))throw new bu(E0t.Errors(f));let g=f,y=e.get(nn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):wu.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Il).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await bat(e)}let p=l.capabilities.workspace?.workspaceFolders??!1;e.get(nw).init(l.workspaceFolders??[]),Rje(this.ctx),e.get(cp).emit({added:l.workspaceFolders??[],removed:[]}),i=l.capabilities.workspace?.configuration,u&&(e.get(ds).setCapabilities(u),"openURL"in u&&gre(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,wu.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await AQ(e),this.installationTelemetryTimer=setTimeout(()=>{new VD().startup(e).catch(()=>{})},1e3),e.get(gv).emit())},"onInitialized");return r.onInitialized(Wu(e,h,"onInitialized")),e.get(eA).init(),u?.token&&e.get(Dn).setTransientSession(null),u?.redirectedTelemetry&&await Mat(e),v0t.lt(process.versions.node,"20.8.0")&&wu.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:cA.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:Rat(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(Wu(e,o,"onDidChangeConfiguration")),r.listen();let c=new Cre;this.ctx.forceSet(Tc,c)}async messageHandler(e,r,n){let i=this.ctx.get(ZR).handlers.get(e);if(!i)return new cA.ResponseError(cn.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new cA.ResponseError(cn.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new cA.ResponseError(cn.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!Bat(this.ctx.get(nn)))throw new cA.ResponseError(cn.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),hv(r);try{let[o,a]=await i(this.ctx,n,r);return a?new cA.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new cA.ResponseError(cn.RequestCancelled,"Request was canceled");if(o instanceof Bs)return new cA.ResponseError(cn.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof cA.ResponseError||wu.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(Xg).dispose()}catch(e){wu.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Tc,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),pye(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(Xa).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(xl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},wu=new vt("lsp");var Mie=class t extends P2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(xr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),nl.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){nl.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(ds).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return nl.debug(this.context,"`copilot/related` not supported"),Pje;try{let a=await this.service.connection.sendRequest(Oue.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){nl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Rt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){nl.exception(r,o,"copilotRelated")}}};d();var x0t=Ne(Lc());var Fie=new vt("copilotTokenManager"),u_e=class t extends H4{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new x0t.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(xr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw Fie.debug(this.ctx,"Envelope missing from copilot/token response"),new em({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:c}=r;if(Fie.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new Bs("Expired token in copilot/token response");if(i&&n){let u;if(c!==void 0){try{let f=new URL(c);f.protocol==="https:"&&f.hostname.startsWith("api.")?u=f.origin:Fie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}catch{Fie.warn(this.ctx,`Invalid token endpoint URL <${c}>`)}this.ctx.get(bd).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(Dn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new em({reason:"NotSignedIn"});let l=new O_(a,void 0);return Z6(this.ctx,l),l}catch(r){throw r instanceof Error?new Bs(r.message,r):r}}},SQ=class extends Qr{constructor(r,n=new H4(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new u_e(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(ds).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};d();var Mhr=new vt("Public Code References"),Oie=class extends Fd{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");Mhr.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,c)=>`
  ${c+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(ds).getCapabilities().ipCodeCitation===!0&&await e.get(xr).connection.sendNotification(kue.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};d();d();function b0t(t){Fhr(t)}s(b0t,"activateExtensibilityPlatformFeature");function Fhr(t){t.set(nA,new Lne(t)),t.set(DC,new DC(t))}s(Fhr,"registerContextDependencies");d();var I0t=I.String(),d_e=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Uie,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Uie="build-logs",Qie=class extends Hl{static{s(this,"BuildLogsSkill")}constructor(e){super(Uie,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new d_e(r))}};d();var f_e=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await Qne(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new Nt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new Nt([o]),1]);return new Nt(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},p_e=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},Ohr="directory-references",qie=class{constructor(){this.id=Ohr;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new p_e}processor(e){return new f_e(e)}};d();var Qhr=I.Object({uri:I.String(),visibleRange:I.Optional(rc),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),T0t=I.Object({files:I.Array(Qhr)}),Uhr=3,m_e=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=$T(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(mn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),c=Gs(a);if(await this.turnContext.collectFile(Wie,o.uri,c),a.status==="valid"&&c!=="empty"&&(i.push([a.document,o]),i.length===Uhr))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(mn).getRelativePath(n),a=new NC(n,void 0,i.visibleRange);return new Nt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await Oo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new Nt([n])}},Wie="recent-files",Hie=class extends Hl{static{s(this,"RecentFilesSkill")}constructor(e){super(Wie,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new m_e(r))}};d();var w0t=I.String(),h_e=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(jie,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},jie="runtime-logs",Gie=class extends Hl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(jie,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new h_e(r))}};d();var Vie=Ne(hg());var $ie=class extends Wc{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return IH(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(xr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new Vie.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new Vie.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new Vie.NotificationType("conversation/documentDiff"),r)}};d();var _0t=Ne(Lc());var RQ=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(lh).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(xr).connection.sendNotification(new _0t.NotificationType(this.notificationEndpoint),e)}};function S0t(t){qhr(t),Hhr(t),b0t(t)}s(S0t,"activateConversationFeature");function qhr(t){t.set(Wi,new Wi(t)),t.set(Gl,new Gl),t.set(Tu,new Tu(t)),t.set(Pa,new Tee(t)),t.set(bv,new bv),t.set(Js,new Js(t)),t.set(lh,new lh(t)),t.set(RQ,new RQ(t)),t.set(Bd,new HV(t,new qV(t))),t.set(Iv,new Iv),t.set(jT,new jT),t.set(Wc,new $ie(t)),t.set(Va,new Va(t)),t.set(Iu,new Iu),t.set(Cp,new Cp)}s(qhr,"registerContextDependencies");function Hhr(t){let e=new cl;e.registerSkill(new Qre(new Ore(t))),e.registerSkill(new dne(new Jd(t,UC,Nlt))),e.registerSkill(new qre(new Jd(t,tA,wct))),e.registerSkill(new bre(new Jd(t,ad,zat))),e.registerSkill(new fne),e.registerSkill(new qie),e.registerSkill(new Hie(new Jd(t,Wie,T0t))),e.registerSkill(new Ire(new Jd(t,LC,Kat))),e.registerSkill(new Wre(new Jd(t,zT,Mct))),e.registerSkill(new Gie(new Jd(t,jie,w0t))),e.registerSkill(new Qie(new Jd(t,Uie,I0t))),e.registerSkill(new jre(new Jd(t,rA,Fct))),e.registerSkill(new Vre(new Jd(t,qR,Qct))),t.set(cl,e)}s(Hhr,"registerSkills");d();var R0t=Ne(di());var zie=class extends xu{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(xr).connection.sendProgress(new R0t.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};d();var k0t=Ne(Lc()),P0t=Ne(hg());var Yie=class extends fC{constructor(){super(...arguments);this.requestType=new k0t.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=Fs.Compile(cat)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(xr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new P0t.ResponseError(l.code,l.message,l.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new bu(this.typeCheck.Errors(o));return o}};d();var B0t=Ne(Lc()),D0t=Ne(hg());var Kie=class extends AT{constructor(){super(...arguments);this.requestType=new B0t.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=Fs.Compile(aat)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(xr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[c,l]=a;if(l){let u=new D0t.ResponseError(l.code,l.message,l.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${l.message}`)}o=c}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new bu(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Bi(i.value):new LR(i.value));return new oo(n,r.status??"success")}};d();d();function N0t(t,e,r){try{let n=t.get(Bt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return fn.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(N0t,"fillInJavaActiveExperiments");var g_e=Ne(hg());var Whr={type:new g_e.NotificationType("featureFlagsNotification")},Ghr={type:new g_e.NotificationType("copilot/didChangeFeatureFlags")},kQ=class{constructor(e){this.ctx=e;ia(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,i=await r.get(Bt).updateExPValuesAndAssignments(),o={};r.get(Bt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=MAe(r,i);a.length>0&&(o.ExpContextProviders=a);let c=new Map;Qje(r,a,c,i),SK(r,c,i),N0t(r,c,i);for(let[f,p]of c.entries())o[f]=p;let l=r.get(ds),u=r.get(xr).connection;if(l.getCapabilities().didChangeFeatureFlags)await u.sendNotification(Ghr.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let f={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(f.xc=!0),await u.sendNotification(Whr.type,f)}}};d();var Jie=class extends po{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(xr).connection.sendNotification(Que.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(xr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};d();var L0t=new TN;d();d();d();d();var os=new vt("CopilotMCP");async function A_e(t,e){await t.get(Qg).notifyLog(e)}s(A_e,"notifyMCPRuntimeLog");async function VC(t,e){await A_e(t,{...e,level:"error"})}s(VC,"notifyMCPRuntimeError");async function e5(t,e){await A_e(t,{...e,level:"warning"})}s(e5,"notifyMCPRuntimeWarning");async function ud(t,e){await A_e(t,{...e,level:"info"})}s(ud,"notifyMCPRuntimeInfo");d();var y_e=/[^a-z0-9_-]/gi;var jhr=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function M0t(){let t={};for(let e of jhr){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(M0t,"getDefaultEnvironment");async function F0t(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;os.warn(t,n),await e5(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(y_e.lastIndex=0,y_e.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;os.warn(t,n),await e5(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(y_e,"_")}else e._nameForModel=e.name;return e}s(F0t,"normalizeTool");var Xie=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let r="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),n=r;for(let i=2;this.seenPrefixes.has(n);i++)n=r+i;return this.seenPrefixes.add(n),n}};d();d();d();d();var xo;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),a={};for(let c of o)a[c]=i[c];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(xo||(xo={}));var E_e;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(E_e||(E_e={}));var gr=xo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kv=s(t=>{switch(typeof t){case"undefined":return gr.undefined;case"string":return gr.string;case"number":return isNaN(t)?gr.nan:gr.number;case"boolean":return gr.boolean;case"function":return gr.function;case"bigint":return gr.bigint;case"symbol":return gr.symbol;case"object":return Array.isArray(t)?gr.array:t===null?gr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?gr.promise:typeof Map<"u"&&t instanceof Map?gr.map:typeof Set<"u"&&t instanceof Set?gr.set:typeof Date<"u"&&t instanceof Date?gr.date:gr.object;default:return gr.unknown}},"getParsedType"),Dt=xo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vhr=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),vp=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,xo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};vp.create=t=>new vp(t);var SN=s((t,e)=>{let r;switch(t.code){case Dt.invalid_type:t.received===gr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Dt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,xo.jsonStringifyReplacer)}`;break;case Dt.unrecognized_keys:r=`Unrecognized key(s) in object: ${xo.joinValues(t.keys,", ")}`;break;case Dt.invalid_union:r="Invalid input";break;case Dt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${xo.joinValues(t.options)}`;break;case Dt.invalid_enum_value:r=`Invalid enum value. Expected ${xo.joinValues(t.options)}, received '${t.received}'`;break;case Dt.invalid_arguments:r="Invalid function arguments";break;case Dt.invalid_return_type:r="Invalid function return type";break;case Dt.invalid_date:r="Invalid date";break;case Dt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:xo.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Dt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Dt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Dt.custom:r="Invalid input";break;case Dt.invalid_intersection_types:r="Intersection results could not be merged";break;case Dt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Dt.not_finite:r="Number must be finite";break;default:r=e.defaultError,xo.assertNever(t)}return{message:r}},"errorMap"),q0t=SN;function $hr(t){q0t=t}s($hr,"setErrorMap");function Zie(){return q0t}s(Zie,"getErrorMap");var eoe=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let c="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)c=u(a,{data:e,defaultError:c}).message;return{...i,path:o,message:c}},"makeIssue"),zhr=[];function nr(t,e){let r=Zie(),n=eoe({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===SN?void 0:SN].filter(i=>!!i)});t.common.issues.push(n)}s(nr,"addIssueToContext");var dd=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return qn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return qn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},qn=Object.freeze({status:"aborted"}),_N=s(t=>({status:"dirty",value:t}),"DIRTY"),Zd=s(t=>({status:"valid",value:t}),"OK"),v_e=s(t=>t.status==="aborted","isAborted"),x_e=s(t=>t.status==="dirty","isDirty"),t5=s(t=>t.status==="valid","isValid"),DQ=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function toe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(toe,"__classPrivateFieldGet");function H0t(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(H0t,"__classPrivateFieldSet");var Fr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Fr||(Fr={}));var PQ,BQ,fh=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},O0t=s((t,e)=>{if(t5(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new vp(t.common.issues);return this._error=r,this._error}}},"handleResult");function fi(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,c)=>{var l,u;let{message:f}=t;return a.code==="invalid_enum_value"?{message:f??c.defaultError}:typeof c.data>"u"?{message:(l=f??n)!==null&&l!==void 0?l:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(u=f??r)!==null&&u!==void 0?u:c.defaultError}},"customMap"),description:i}}s(fi,"processCreateParams");var pi=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return kv(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:kv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dd,ctx:{common:e.parent.common,data:e.data,parsedType:kv(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(DQ(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kv(e)},o=this._parseSync({data:e,path:i.path,parent:i});return O0t(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kv(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return t5(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>t5(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kv(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(DQ(i)?i:Promise.resolve(i));return O0t(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),c=s(()=>o.addIssue({code:Dt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new xp({schema:this,typeName:Mn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return dh.create(this,this._def)}nullable(){return zC.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Bv.create(this)}promise(){return sw.create(this,this._def)}or(e){return c5.create([this,e],this._def)}and(e){return l5.create(this,e,this._def)}transform(e){return new xp({...fi(this._def),schema:this,typeName:Mn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new m5({...fi(this._def),innerType:this,defaultValue:r,typeName:Mn.ZodDefault})}brand(){return new NQ({typeName:Mn.ZodBranded,type:this,...fi(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new h5({...fi(this._def),innerType:this,catchValue:r,typeName:Mn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return LQ.create(this,e)}readonly(){return g5.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Yhr=/^c[^\s-]{8,}$/i,Khr=/^[0-9a-z]+$/,Jhr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Xhr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Zhr=/^[a-z0-9_-]{21}$/i,egr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tgr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rgr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ngr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",C_e,igr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ogr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,sgr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,agr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cgr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,lgr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,W0t="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ugr=new RegExp(`^${W0t}$`);function G0t(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(G0t,"timeRegexSource");function dgr(t){return new RegExp(`^${G0t(t)}$`)}s(dgr,"timeRegex");function j0t(t){let e=`${W0t}T${G0t(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(j0t,"datetimeRegex");function fgr(t,e){return!!((e==="v4"||!e)&&igr.test(t)||(e==="v6"||!e)&&sgr.test(t))}s(fgr,"isValidIP");function pgr(t,e){if(!egr.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(pgr,"isValidJWT");function mgr(t,e){return!!((e==="v4"||!e)&&ogr.test(t)||(e==="v6"||!e)&&agr.test(t))}s(mgr,"isValidCidr");var iw=class t extends pi{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==gr.string){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.string,received:o.parsedType}),qn}let n=new dd,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,c=e.data.length<o.value;(a||c)&&(i=this._getOrReturnCtx(e,i),a?nr(i,{code:Dt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):c&&nr(i,{code:Dt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")rgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"email",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")C_e||(C_e=new RegExp(ngr,"u")),C_e.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"emoji",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")Xhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"uuid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")Zhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"nanoid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")Yhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")Khr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cuid2",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")Jhr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ulid",code:Dt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),nr(i,{validation:"url",code:Dt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"regex",code:Dt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?j0t(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?ugr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?dgr(o).test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?tgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"duration",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?fgr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"ip",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?pgr(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"jwt",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?mgr(e.data,o.version)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"cidr",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?cgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64",code:Dt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?lgr.test(e.data)||(i=this._getOrReturnCtx(e,i),nr(i,{validation:"base64url",code:Dt.invalid_string,message:o.message}),n.dirty()):xo.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Dt.invalid_string,...Fr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Fr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Fr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Fr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Fr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Fr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Fr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Fr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Fr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Fr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Fr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Fr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Fr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Fr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Fr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Fr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Fr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Fr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Fr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Fr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Fr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Fr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Fr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Fr.errToObj(r)})}nonempty(e){return this.min(1,Fr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};iw.create=t=>{var e;return new iw({checks:[],typeName:Mn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};function hgr(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(hgr,"floatSafeRemainder");var r5=class t extends pi{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==gr.number){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.number,received:o.parsedType}),qn}let n,i=new dd;for(let o of this._def.checks)o.kind==="int"?xo.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?hgr(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_finite,message:o.message}),i.dirty()):xo.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Fr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Fr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Fr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Fr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Fr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Fr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Fr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&xo.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};r5.create=t=>new r5({checks:[],typeName:Mn.ZodNumber,coerce:t?.coerce||!1,...fi(t)});var n5=class t extends pi{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==gr.bigint)return this._getInvalidInput(e);let n,i=new dd;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),nr(n,{code:Dt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):xo.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Dt.invalid_type,expected:gr.bigint,received:r.parsedType}),qn}gte(e,r){return this.setLimit("min",e,!0,Fr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Fr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Fr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Fr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Fr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Fr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Fr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Fr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Fr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Fr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};n5.create=t=>{var e;return new n5({checks:[],typeName:Mn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...fi(t)})};var i5=class extends pi{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==gr.boolean){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.boolean,received:n.parsedType}),qn}return Zd(e.data)}};i5.create=t=>new i5({typeName:Mn.ZodBoolean,coerce:t?.coerce||!1,...fi(t)});var o5=class t extends pi{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==gr.date){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_type,expected:gr.date,received:o.parsedType}),qn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return nr(o,{code:Dt.invalid_date}),qn}let n=new dd,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),nr(i,{code:Dt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):xo.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Fr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Fr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};o5.create=t=>new o5({checks:[],coerce:t?.coerce||!1,typeName:Mn.ZodDate,...fi(t)});var RN=class extends pi{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==gr.symbol){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.symbol,received:n.parsedType}),qn}return Zd(e.data)}};RN.create=t=>new RN({typeName:Mn.ZodSymbol,...fi(t)});var s5=class extends pi{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==gr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.undefined,received:n.parsedType}),qn}return Zd(e.data)}};s5.create=t=>new s5({typeName:Mn.ZodUndefined,...fi(t)});var a5=class extends pi{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==gr.null){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.null,received:n.parsedType}),qn}return Zd(e.data)}};a5.create=t=>new a5({typeName:Mn.ZodNull,...fi(t)});var ow=class extends pi{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Zd(e.data)}};ow.create=t=>new ow({typeName:Mn.ZodAny,...fi(t)});var Pv=class extends pi{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Zd(e.data)}};Pv.create=t=>new Pv({typeName:Mn.ZodUnknown,...fi(t)});var lA=class extends pi{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return nr(r,{code:Dt.invalid_type,expected:gr.never,received:r.parsedType}),qn}};lA.create=t=>new lA({typeName:Mn.ZodNever,...fi(t)});var kN=class extends pi{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==gr.undefined){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.void,received:n.parsedType}),qn}return Zd(e.data)}};kN.create=t=>new kN({typeName:Mn.ZodVoid,...fi(t)});var Bv=class t extends pi{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==gr.array)return nr(r,{code:Dt.invalid_type,expected:gr.array,received:r.parsedType}),qn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,c=r.data.length<i.exactLength.value;(a||c)&&(nr(r,{code:a?Dt.too_big:Dt.too_small,minimum:c?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(nr(r,{code:Dt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(nr(r,{code:Dt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,c)=>i.type._parseAsync(new fh(r,a,r.path,c)))).then(a=>dd.mergeArray(n,a));let o=[...r.data].map((a,c)=>i.type._parseSync(new fh(r,a,r.path,c)));return dd.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Fr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Fr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Fr.toString(r)}})}nonempty(e){return this.min(1,e)}};Bv.create=(t,e)=>new Bv({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Mn.ZodArray,...fi(e)});function wN(t){if(t instanceof s0){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dh.create(wN(n))}return new s0({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Bv?new Bv({...t._def,type:wN(t.element)}):t instanceof dh?dh.create(wN(t.unwrap())):t instanceof zC?zC.create(wN(t.unwrap())):t instanceof $C?$C.create(t.items.map(e=>wN(e))):t}s(wN,"deepPartialify");var s0=class t extends pi{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=xo.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==gr.object){let u=this._getOrReturnCtx(e);return nr(u,{code:Dt.invalid_type,expected:gr.object,received:u.parsedType}),qn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof lA&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||c.push(u);let l=[];for(let u of a){let f=o[u],p=i.data[u];l.push({key:{status:"valid",value:u},value:f._parse(new fh(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof lA){let u=this._def.unknownKeys;if(u==="passthrough")for(let f of c)l.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(u==="strict")c.length>0&&(nr(i,{code:Dt.unrecognized_keys,keys:c}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let f of c){let p=i.data[f];l.push({key:{status:"valid",value:f},value:u._parse(new fh(i,p,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let f of l){let p=await f.key,m=await f.value;u.push({key:p,value:m,alwaysSet:f.alwaysSet})}return u}).then(u=>dd.mergeObjectSync(n,u)):dd.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return Fr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,c;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(c=Fr.errToObj(e).message)!==null&&c!==void 0?c:l}:{message:l}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Mn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return xo.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return wN(this)}partial(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return xo.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dh;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return V0t(xo.objectKeys(this.shape))}};s0.create=(t,e)=>new s0({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});s0.strictCreate=(t,e)=>new s0({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});s0.lazycreate=(t,e)=>new s0({shape:t,unknownKeys:"strip",catchall:lA.create(),typeName:Mn.ZodObject,...fi(e)});var c5=class extends pi{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let c of o)if(c.result.status==="valid")return c.result;for(let c of o)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let a=o.map(c=>new vp(c.ctx.common.issues));return nr(r,{code:Dt.invalid_union,unionErrors:a}),qn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},f=l._parseSync({data:r.data,path:r.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let c=a.map(l=>new vp(l));return nr(r,{code:Dt.invalid_union,unionErrors:c}),qn}}get options(){return this._def.options}};c5.create=(t,e)=>new c5({options:t,typeName:Mn.ZodUnion,...fi(e)});var Rv=s(t=>t instanceof u5?Rv(t.schema):t instanceof xp?Rv(t.innerType()):t instanceof d5?[t.value]:t instanceof f5?t.options:t instanceof p5?xo.objectValues(t.enum):t instanceof m5?Rv(t._def.innerType):t instanceof s5?[void 0]:t instanceof a5?[null]:t instanceof dh?[void 0,...Rv(t.unwrap())]:t instanceof zC?[null,...Rv(t.unwrap())]:t instanceof NQ||t instanceof g5?Rv(t.unwrap()):t instanceof h5?Rv(t._def.innerType):[],"getDiscriminator"),roe=class t extends pi{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.object)return nr(r,{code:Dt.invalid_type,expected:gr.object,received:r.parsedType}),qn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(nr(r,{code:Dt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),qn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Rv(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of a){if(i.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);i.set(c,o)}}return new t({typeName:Mn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...fi(n)})}};function b_e(t,e){let r=kv(t),n=kv(e);if(t===e)return{valid:!0,data:t};if(r===gr.object&&n===gr.object){let i=xo.objectKeys(e),o=xo.objectKeys(t).filter(c=>i.indexOf(c)!==-1),a={...t,...e};for(let c of o){let l=b_e(t[c],e[c]);if(!l.valid)return{valid:!1};a[c]=l.data}return{valid:!0,data:a}}else if(r===gr.array&&n===gr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],c=e[o],l=b_e(a,c);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===gr.date&&n===gr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(b_e,"mergeValues");var l5=class extends pi{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(v_e(o)||v_e(a))return qn;let c=b_e(o.value,a.value);return c.valid?((x_e(o)||x_e(a))&&r.dirty(),{status:r.value,value:c.data}):(nr(n,{code:Dt.invalid_intersection_types}),qn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};l5.create=(t,e,r)=>new l5({left:t,right:e,typeName:Mn.ZodIntersection,...fi(r)});var $C=class t extends pi{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.array)return nr(n,{code:Dt.invalid_type,expected:gr.array,received:n.parsedType}),qn;if(n.data.length<this._def.items.length)return nr(n,{code:Dt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qn;!this._def.rest&&n.data.length>this._def.items.length&&(nr(n,{code:Dt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,c)=>{let l=this._def.items[c]||this._def.rest;return l?l._parse(new fh(n,a,n.path,c)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>dd.mergeArray(r,a)):dd.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};$C.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $C({items:t,typeName:Mn.ZodTuple,rest:null,...fi(e)})};var noe=class t extends pi{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.object)return nr(n,{code:Dt.invalid_type,expected:gr.object,received:n.parsedType}),qn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let c in n.data)i.push({key:o._parse(new fh(n,c,n.path,c)),value:a._parse(new fh(n,n.data[c],n.path,c)),alwaysSet:c in n.data});return n.common.async?dd.mergeObjectAsync(r,i):dd.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof pi?new t({keyType:e,valueType:r,typeName:Mn.ZodRecord,...fi(n)}):new t({keyType:iw.create(),valueType:e,typeName:Mn.ZodRecord,...fi(r)})}},PN=class extends pi{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.map)return nr(n,{code:Dt.invalid_type,expected:gr.map,received:n.parsedType}),qn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([c,l],u)=>({key:i._parse(new fh(n,c,n.path,[u,"key"])),value:o._parse(new fh(n,l,n.path,[u,"value"]))}));if(n.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,f=await l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let l of a){let u=l.key,f=l.value;if(u.status==="aborted"||f.status==="aborted")return qn;(u.status==="dirty"||f.status==="dirty")&&r.dirty(),c.set(u.value,f.value)}return{status:r.value,value:c}}}};PN.create=(t,e,r)=>new PN({valueType:e,keyType:t,typeName:Mn.ZodMap,...fi(r)});var BN=class t extends pi{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==gr.set)return nr(n,{code:Dt.invalid_type,expected:gr.set,received:n.parsedType}),qn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(nr(n,{code:Dt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(nr(n,{code:Dt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let f of l){if(f.status==="aborted")return qn;f.status==="dirty"&&r.dirty(),u.add(f.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let c=[...n.data.values()].map((l,u)=>o._parse(new fh(n,l,n.path,u)));return n.common.async?Promise.all(c).then(l=>a(l)):a(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:Fr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Fr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};BN.create=(t,e)=>new BN({valueType:t,minSize:null,maxSize:null,typeName:Mn.ZodSet,...fi(e)});var ioe=class t extends pi{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.function)return nr(r,{code:Dt.invalid_type,expected:gr.function,received:r.parsedType}),qn;function n(c,l){return eoe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zie(),SN].filter(u=>!!u),issueData:{code:Dt.invalid_arguments,argumentsError:l}})}s(n,"makeArgsIssue");function i(c,l){return eoe({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Zie(),SN].filter(u=>!!u),issueData:{code:Dt.invalid_return_type,returnTypeError:l}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof sw){let c=this;return Zd(async function(...l){let u=new vp([]),f=await c._def.args.parseAsync(l,o).catch(h=>{throw u.addIssue(n(l,h)),u}),p=await Reflect.apply(a,this,f);return await c._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let c=this;return Zd(function(...l){let u=c._def.args.safeParse(l,o);if(!u.success)throw new vp([n(l,u.error)]);let f=Reflect.apply(a,this,u.data),p=c._def.returns.safeParse(f,o);if(!p.success)throw new vp([i(f,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:$C.create(e).rest(Pv.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||$C.create([]).rest(Pv.create()),returns:r||Pv.create(),typeName:Mn.ZodFunction,...fi(n)})}},u5=class extends pi{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};u5.create=(t,e)=>new u5({getter:t,typeName:Mn.ZodLazy,...fi(e)});var d5=class extends pi{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return nr(r,{received:r.data,code:Dt.invalid_literal,expected:this._def.value}),qn}return{status:"valid",value:e.data}}get value(){return this._def.value}};d5.create=(t,e)=>new d5({value:t,typeName:Mn.ZodLiteral,...fi(e)});function V0t(t,e){return new f5({values:t,typeName:Mn.ZodEnum,...fi(e)})}s(V0t,"createZodEnum");var f5=class t extends pi{static{s(this,"ZodEnum")}constructor(){super(...arguments),PQ.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{expected:xo.joinValues(n),received:r.parsedType,code:Dt.invalid_type}),qn}if(toe(this,PQ,"f")||H0t(this,PQ,new Set(this._def.values),"f"),!toe(this,PQ,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return nr(r,{received:r.data,code:Dt.invalid_enum_value,options:n}),qn}return Zd(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};PQ=new WeakMap;f5.create=V0t;var p5=class extends pi{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),BQ.set(this,void 0)}_parse(e){let r=xo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==gr.string&&n.parsedType!==gr.number){let i=xo.objectValues(r);return nr(n,{expected:xo.joinValues(i),received:n.parsedType,code:Dt.invalid_type}),qn}if(toe(this,BQ,"f")||H0t(this,BQ,new Set(xo.getValidEnumValues(this._def.values)),"f"),!toe(this,BQ,"f").has(e.data)){let i=xo.objectValues(r);return nr(n,{received:n.data,code:Dt.invalid_enum_value,options:i}),qn}return Zd(e.data)}get enum(){return this._def.values}};BQ=new WeakMap;p5.create=(t,e)=>new p5({values:t,typeName:Mn.ZodNativeEnum,...fi(e)});var sw=class extends pi{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==gr.promise&&r.common.async===!1)return nr(r,{code:Dt.invalid_type,expected:gr.promise,received:r.parsedType}),qn;let n=r.parsedType===gr.promise?r.data:Promise.resolve(r.data);return Zd(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};sw.create=(t,e)=>new sw({type:t,typeName:Mn.ZodPromise,...fi(e)});var xp=class extends pi{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Mn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{nr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async c=>{if(r.value==="aborted")return qn;let l=await this._def.schema._parseAsync({data:c,path:n.path,parent:n});return l.status==="aborted"?qn:l.status==="dirty"||r.value==="dirty"?_N(l.value):l});{if(r.value==="aborted")return qn;let c=this._def.schema._parseSync({data:a,path:n.path,parent:n});return c.status==="aborted"?qn:c.status==="dirty"||r.value==="dirty"?_N(c.value):c}}if(i.type==="refinement"){let a=s(c=>{let l=i.refinement(c,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(n.common.async===!1){let c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?qn:(c.status==="dirty"&&r.dirty(),a(c.value).then(()=>({status:r.value,value:c.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!t5(a))return a;let c=i.transform(a.value,o);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>t5(a)?Promise.resolve(i.transform(a.value,o)).then(c=>({status:r.value,value:c})):a);xo.assertNever(i)}};xp.create=(t,e,r)=>new xp({schema:t,typeName:Mn.ZodEffects,effect:e,...fi(r)});xp.createWithPreprocess=(t,e,r)=>new xp({schema:e,effect:{type:"preprocess",transform:t},typeName:Mn.ZodEffects,...fi(r)});var dh=class extends pi{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===gr.undefined?Zd(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dh.create=(t,e)=>new dh({innerType:t,typeName:Mn.ZodOptional,...fi(e)});var zC=class extends pi{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===gr.null?Zd(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};zC.create=(t,e)=>new zC({innerType:t,typeName:Mn.ZodNullable,...fi(e)});var m5=class extends pi{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===gr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};m5.create=(t,e)=>new m5({innerType:t,typeName:Mn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fi(e)});var h5=class extends pi{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return DQ(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new vp(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new vp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};h5.create=(t,e)=>new h5({innerType:t,typeName:Mn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fi(e)});var DN=class extends pi{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==gr.nan){let n=this._getOrReturnCtx(e);return nr(n,{code:Dt.invalid_type,expected:gr.nan,received:n.parsedType}),qn}return{status:"valid",value:e.data}}};DN.create=t=>new DN({typeName:Mn.ZodNaN,...fi(t)});var ggr=Symbol("zod_brand"),NQ=class extends pi{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},LQ=class t extends pi{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?qn:o.status==="dirty"?(r.dirty(),_N(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?qn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Mn.ZodPipeline})}},g5=class extends pi{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(t5(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return DQ(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};g5.create=(t,e)=>new g5({innerType:t,typeName:Mn.ZodReadonly,...fi(e)});function Q0t(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Q0t,"cleanParams");function $0t(t,e={},r){return t?ow.create().superRefine((n,i)=>{var o,a;let c=t(n);if(c instanceof Promise)return c.then(l=>{var u,f;if(!l){let p=Q0t(e,n),m=(f=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!c){let l=Q0t(e,n),u=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...l,fatal:u})}}):ow.create()}s($0t,"custom");var Agr={object:s0.lazycreate},Mn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Mn||(Mn={}));var ygr=s((t,e={message:`Input not instance of ${t.name}`})=>$0t(r=>r instanceof t,e),"instanceOfType"),z0t=iw.create,Y0t=r5.create,Cgr=DN.create,Egr=n5.create,K0t=i5.create,vgr=o5.create,xgr=RN.create,bgr=s5.create,Igr=a5.create,Tgr=ow.create,wgr=Pv.create,_gr=lA.create,Sgr=kN.create,Rgr=Bv.create,kgr=s0.create,Pgr=s0.strictCreate,Bgr=c5.create,Dgr=roe.create,Ngr=l5.create,Lgr=$C.create,Mgr=noe.create,Fgr=PN.create,Ogr=BN.create,Qgr=ioe.create,Ugr=u5.create,qgr=d5.create,Hgr=f5.create,Wgr=p5.create,Ggr=sw.create,U0t=xp.create,jgr=dh.create,Vgr=zC.create,$gr=xp.createWithPreprocess,zgr=LQ.create,Ygr=s(()=>z0t().optional(),"ostring"),Kgr=s(()=>Y0t().optional(),"onumber"),Jgr=s(()=>K0t().optional(),"oboolean"),Xgr={string:s(t=>iw.create({...t,coerce:!0}),"string"),number:s(t=>r5.create({...t,coerce:!0}),"number"),boolean:s(t=>i5.create({...t,coerce:!0}),"boolean"),bigint:s(t=>n5.create({...t,coerce:!0}),"bigint"),date:s(t=>o5.create({...t,coerce:!0}),"date")},Zgr=qn,X=Object.freeze({__proto__:null,defaultErrorMap:SN,setErrorMap:$hr,getErrorMap:Zie,makeIssue:eoe,EMPTY_PATH:zhr,addIssueToContext:nr,ParseStatus:dd,INVALID:qn,DIRTY:_N,OK:Zd,isAborted:v_e,isDirty:x_e,isValid:t5,isAsync:DQ,get util(){return xo},get objectUtil(){return E_e},ZodParsedType:gr,getParsedType:kv,ZodType:pi,datetimeRegex:j0t,ZodString:iw,ZodNumber:r5,ZodBigInt:n5,ZodBoolean:i5,ZodDate:o5,ZodSymbol:RN,ZodUndefined:s5,ZodNull:a5,ZodAny:ow,ZodUnknown:Pv,ZodNever:lA,ZodVoid:kN,ZodArray:Bv,ZodObject:s0,ZodUnion:c5,ZodDiscriminatedUnion:roe,ZodIntersection:l5,ZodTuple:$C,ZodRecord:noe,ZodMap:PN,ZodSet:BN,ZodFunction:ioe,ZodLazy:u5,ZodLiteral:d5,ZodEnum:f5,ZodNativeEnum:p5,ZodPromise:sw,ZodEffects:xp,ZodTransformer:xp,ZodOptional:dh,ZodNullable:zC,ZodDefault:m5,ZodCatch:h5,ZodNaN:DN,BRAND:ggr,ZodBranded:NQ,ZodPipeline:LQ,ZodReadonly:g5,custom:$0t,Schema:pi,ZodSchema:pi,late:Agr,get ZodFirstPartyTypeKind(){return Mn},coerce:Xgr,any:Tgr,array:Rgr,bigint:Egr,boolean:K0t,date:vgr,discriminatedUnion:Dgr,effect:U0t,enum:Hgr,function:Qgr,instanceof:ygr,intersection:Ngr,lazy:Ugr,literal:qgr,map:Fgr,nan:Cgr,nativeEnum:Wgr,never:_gr,null:Igr,nullable:Vgr,number:Y0t,object:kgr,oboolean:Jgr,onumber:Kgr,optional:jgr,ostring:Ygr,pipeline:zgr,preprocess:$gr,promise:Ggr,record:Mgr,set:Ogr,strictObject:Pgr,string:z0t,symbol:xgr,transformer:U0t,tuple:Lgr,undefined:bgr,union:Bgr,unknown:wgr,void:Sgr,NEVER:Zgr,ZodIssueCode:Dt,quotelessJson:Vhr,ZodError:vp});var MQ="2025-03-26",J0t=[MQ,"2024-11-05","2024-10-07"],ooe="2.0",X0t=X.union([X.string(),X.number().int()]),Z0t=X.string(),eAr=X.object({progressToken:X.optional(X0t)}).passthrough(),uA=X.object({_meta:X.optional(eAr)}).passthrough(),bp=X.object({method:X.string(),params:X.optional(uA)}),FQ=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),YC=X.object({method:X.string(),params:X.optional(FQ)}),dA=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),soe=X.union([X.string(),X.number().int()]),ept=X.object({jsonrpc:X.literal(ooe),id:soe}).merge(bp).strict(),aoe=s(t=>ept.safeParse(t).success,"isJSONRPCRequest"),tpt=X.object({jsonrpc:X.literal(ooe)}).merge(YC).strict(),rpt=s(t=>tpt.safeParse(t).success,"isJSONRPCNotification"),npt=X.object({jsonrpc:X.literal(ooe),id:soe,result:dA}).strict(),OQ=s(t=>npt.safeParse(t).success,"isJSONRPCResponse"),aw;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(aw||(aw={}));var ipt=X.object({jsonrpc:X.literal(ooe),id:soe,error:X.object({code:X.number().int(),message:X.string(),data:X.optional(X.unknown())})}).strict(),opt=s(t=>ipt.safeParse(t).success,"isJSONRPCError"),cw=X.union([ept,tpt,npt,ipt]),y5=dA.strict(),coe=YC.extend({method:X.literal("notifications/cancelled"),params:FQ.extend({requestId:soe,reason:X.string().optional()})}),spt=X.object({name:X.string(),version:X.string()}).passthrough(),tAr=X.object({experimental:X.optional(X.object({}).passthrough()),sampling:X.optional(X.object({}).passthrough()),roots:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),rAr=bp.extend({method:X.literal("initialize"),params:uA.extend({protocolVersion:X.string(),capabilities:tAr,clientInfo:spt})});var nAr=X.object({experimental:X.optional(X.object({}).passthrough()),logging:X.optional(X.object({}).passthrough()),completions:X.optional(X.object({}).passthrough()),prompts:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough()),resources:X.optional(X.object({subscribe:X.optional(X.boolean()),listChanged:X.optional(X.boolean())}).passthrough()),tools:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),I_e=dA.extend({protocolVersion:X.string(),capabilities:nAr,serverInfo:spt,instructions:X.optional(X.string())}),apt=YC.extend({method:X.literal("notifications/initialized")}),cpt=s(t=>apt.safeParse(t).success,"isInitializedNotification"),loe=bp.extend({method:X.literal("ping")}),iAr=X.object({progress:X.number(),total:X.optional(X.number())}).passthrough(),uoe=YC.extend({method:X.literal("notifications/progress"),params:FQ.merge(iAr).extend({progressToken:X0t})}),doe=bp.extend({params:uA.extend({cursor:X.optional(Z0t)}).optional()}),foe=dA.extend({nextCursor:X.optional(Z0t)}),lpt=X.object({uri:X.string(),mimeType:X.optional(X.string())}).passthrough(),upt=lpt.extend({text:X.string()}),dpt=lpt.extend({blob:X.string().base64()}),oAr=X.object({uri:X.string(),name:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string())}).passthrough(),sAr=X.object({uriTemplate:X.string(),name:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string())}).passthrough(),aAr=doe.extend({method:X.literal("resources/list")}),T_e=foe.extend({resources:X.array(oAr)}),cAr=doe.extend({method:X.literal("resources/templates/list")}),w_e=foe.extend({resourceTemplates:X.array(sAr)}),lAr=bp.extend({method:X.literal("resources/read"),params:uA.extend({uri:X.string()})}),__e=dA.extend({contents:X.array(X.union([upt,dpt]))}),uAr=YC.extend({method:X.literal("notifications/resources/list_changed")}),dAr=bp.extend({method:X.literal("resources/subscribe"),params:uA.extend({uri:X.string()})}),fAr=bp.extend({method:X.literal("resources/unsubscribe"),params:uA.extend({uri:X.string()})}),pAr=YC.extend({method:X.literal("notifications/resources/updated"),params:FQ.extend({uri:X.string()})}),mAr=X.object({name:X.string(),description:X.optional(X.string()),required:X.optional(X.boolean())}).passthrough(),hAr=X.object({name:X.string(),description:X.optional(X.string()),arguments:X.optional(X.array(mAr))}).passthrough(),gAr=doe.extend({method:X.literal("prompts/list")}),S_e=foe.extend({prompts:X.array(hAr)}),AAr=bp.extend({method:X.literal("prompts/get"),params:uA.extend({name:X.string(),arguments:X.optional(X.record(X.string()))})}),poe=X.object({type:X.literal("text"),text:X.string()}).passthrough(),moe=X.object({type:X.literal("image"),data:X.string().base64(),mimeType:X.string()}).passthrough(),hoe=X.object({type:X.literal("audio"),data:X.string().base64(),mimeType:X.string()}).passthrough(),fpt=X.object({type:X.literal("resource"),resource:X.union([upt,dpt])}).passthrough(),yAr=X.object({role:X.enum(["user","assistant"]),content:X.union([poe,moe,hoe,fpt])}).passthrough(),R_e=dA.extend({description:X.optional(X.string()),messages:X.array(yAr)}),QQ=YC.extend({method:X.literal("notifications/prompts/list_changed")}),CAr=X.object({title:X.optional(X.string()),readOnlyHint:X.optional(X.boolean()),destructiveHint:X.optional(X.boolean()),idempotentHint:X.optional(X.boolean()),openWorldHint:X.optional(X.boolean())}).passthrough(),EAr=X.object({name:X.string(),description:X.optional(X.string()),inputSchema:X.object({type:X.literal("object"),properties:X.optional(X.object({}).passthrough())}).passthrough(),annotations:X.optional(CAr)}).passthrough(),vAr=doe.extend({method:X.literal("tools/list")}),k_e=foe.extend({tools:X.array(EAr)}),goe=dA.extend({content:X.array(X.union([poe,moe,hoe,fpt])),isError:X.boolean().default(!1).optional()}),Xco=goe.or(dA.extend({toolResult:X.unknown()})),xAr=bp.extend({method:X.literal("tools/call"),params:uA.extend({name:X.string(),arguments:X.optional(X.record(X.unknown()))})}),UQ=YC.extend({method:X.literal("notifications/tools/list_changed")}),ppt=X.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),bAr=bp.extend({method:X.literal("logging/setLevel"),params:uA.extend({level:ppt})}),P_e=YC.extend({method:X.literal("notifications/message"),params:FQ.extend({level:ppt,logger:X.optional(X.string()),data:X.unknown()})}),IAr=X.object({name:X.string().optional()}).passthrough(),TAr=X.object({hints:X.optional(X.array(IAr)),costPriority:X.optional(X.number().min(0).max(1)),speedPriority:X.optional(X.number().min(0).max(1)),intelligencePriority:X.optional(X.number().min(0).max(1))}).passthrough(),wAr=X.object({role:X.enum(["user","assistant"]),content:X.union([poe,moe,hoe])}).passthrough(),_Ar=bp.extend({method:X.literal("sampling/createMessage"),params:uA.extend({messages:X.array(wAr),systemPrompt:X.optional(X.string()),includeContext:X.optional(X.enum(["none","thisServer","allServers"])),temperature:X.optional(X.number()),maxTokens:X.number().int(),stopSequences:X.optional(X.array(X.string())),metadata:X.optional(X.object({}).passthrough()),modelPreferences:X.optional(TAr)})}),SAr=dA.extend({model:X.string(),stopReason:X.optional(X.enum(["endTurn","stopSequence","maxTokens"]).or(X.string())),role:X.enum(["user","assistant"]),content:X.discriminatedUnion("type",[poe,moe,hoe])}),RAr=X.object({type:X.literal("ref/resource"),uri:X.string()}).passthrough(),kAr=X.object({type:X.literal("ref/prompt"),name:X.string()}).passthrough(),PAr=bp.extend({method:X.literal("completion/complete"),params:uA.extend({ref:X.union([kAr,RAr]),argument:X.object({name:X.string(),value:X.string()}).passthrough()})}),B_e=dA.extend({completion:X.object({values:X.array(X.string()).max(100),total:X.optional(X.number().int()),hasMore:X.optional(X.boolean())}).passthrough()}),BAr=X.object({uri:X.string().startsWith("file://"),name:X.optional(X.string())}).passthrough(),DAr=bp.extend({method:X.literal("roots/list")}),NAr=dA.extend({roots:X.array(BAr)}),LAr=YC.extend({method:X.literal("notifications/roots/list_changed")}),Zco=X.union([loe,rAr,PAr,bAr,AAr,gAr,aAr,cAr,lAr,dAr,fAr,xAr,vAr]),elo=X.union([coe,uoe,apt,LAr]),tlo=X.union([y5,SAr,NAr]),rlo=X.union([loe,_Ar,DAr]),nlo=X.union([coe,uoe,P_e,pAr,uAr,UQ,QQ]),ilo=X.union([y5,I_e,B_e,R_e,S_e,T_e,w_e,__e,goe,k_e]),A5=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var MAr=6e4,Aoe=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(coe,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(uoe,r=>{this._onprogress(r)}),this.setRequestHandler(loe,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new A5(aw.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{OQ(r)||opt(r)?this._onresponse(r):aoe(r)?this._onrequest(r,n):rpt(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new A5(aw.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let c=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(c===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:aw.MethodNotFound,message:"Method not found"}}).catch(f=>this._onerror(new Error(`Failed to send an error response: ${f}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let u={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(f=>this.notification(f,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((f,p,m)=>this.request(f,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>c(e,u)).then(f=>{var p;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:f,jsonrpc:"2.0",id:e.id})},f=>{var p,m;if(!l.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(f.code)?f.code:aw.InternalError,message:(m=f.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(f=>this._onerror(new Error(`Failed to send response: ${f}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),c=this._timeoutInfo.get(i);if(c&&a&&c.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(l){a(l);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),OQ(e))n(e);else{let i=new A5(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((c,l)=>{var u,f,p,m,h;if(!this._transport){l(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(f=n?.signal)===null||f===void 0||f.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let E=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(P=>this._onerror(new Error(`Failed to send cancellation: ${P}`))),l(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return l(_);try{let P=r.parse(_.result);c(P)}catch(P){l(P)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;E((_=n?.signal)===null||_===void 0?void 0:_.reason)});let x=(m=n?.timeout)!==null&&m!==void 0?m:MAr,b=s(()=>E(new A5(aw.RequestTimeout,"Request timed out",{timeout:x})),"timeoutHandler");this._setupTimeout(g,x,n?.maxTotalTimeout,b,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),l(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function mpt(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(mpt,"mergeCapabilities");var yoe=class extends Aoe{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=mpt(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:MQ,capabilities:this._capabilities,clientInfo:this._clientInfo}},I_e,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!J0t.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},y5,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},B_e,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},y5,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},R_e,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},S_e,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},T_e,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},w_e,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},__e,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},y5,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},y5,r)}async callTool(e,r=goe,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},k_e,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var hpt=Ne(require("events"));var lw=class{constructor(e,r,n){this.transport=null;this.emitter=new hpt.default;this.ctx=e,this.mcp=new yoe({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw os.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw os.error(this.ctx,"Connection failed:",r),await VC(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await F0t(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;ud(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new oo([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await VC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);os.error(this.ctx,o),await VC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));os.error(this.ctx,o),await VC(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Bi(o))}return n}addListeners(){this.mcp.onclose=()=>{os.info(this.ctx,`MCP server ${this.name} connection closed.`),ud(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{os.error(this.ctx,`MCP server ${this.name} error:`,e),VC(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(P_e,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":os.info(this.ctx,`MCP server ${this.name} log:`,r),ud(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":os.warn(this.ctx,`MCP server ${this.name} log:`,r),e5(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":os.error(this.ctx,`MCP server ${this.name} log:`,r),VC(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:os.info(this.ctx,`MCP server ${this.name} log:`,r),ud(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new oo([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Bi(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new NR({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};d();d();d();var Coe=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function D_e(t){}s(D_e,"noop");function Eoe(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=D_e,onError:r=D_e,onRetry:n=D_e,onComment:i}=t,o="",a=!0,c,l="",u="";function f(y){let E=a?y.replace(/^\xEF\xBB\xBF/,""):y,[x,b]=FAr(`${o}${E}`);for(let _ of x)p(_);o=b,a=!1}s(f,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let E=y.indexOf(":");if(E!==-1){let x=y.slice(0,E),b=y[E+1]===" "?2:1,_=y.slice(E+b);m(x,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,E,x){switch(y){case"event":u=E;break;case"data":l=`${l}${E}
`;break;case"id":c=E.includes("\0")?void 0:E;break;case"retry":/^\d+$/.test(E)?n(parseInt(E,10)):r(new Coe(`Invalid \`retry\` value: "${E}"`,{type:"invalid-retry",value:E,line:x}));break;default:r(new Coe(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:E,line:x}));break}}s(m,"processField");function h(){l.length>0&&e({id:c,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),c=void 0,l="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,c=void 0,l="",u="",o=""}return s(g,"reset"),{feed:f,reset:g}}s(Eoe,"createParser");function FAr(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let c=t.slice(n,a);e.push(c),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(FAr,"splitLines");var xoe=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(gpt(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(gpt(this),r)}};function OAr(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(OAr,"syntaxError");function N_e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(N_e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${N_e(t.cause)}`:t.message:`${t}`}s(N_e,"flattenError");function gpt(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(gpt,"inspectableError");var ypt=s(t=>{throw TypeError(t)},"__typeError"),H_e=s((t,e,r)=>e.has(t)||ypt("Cannot "+r),"__accessCheck"),Gi=s((t,e,r)=>(H_e(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),ul=s((t,e,r)=>e.has(t)?ypt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),ha=s((t,e,r,n)=>(H_e(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),Dv=s((t,e,r)=>(H_e(t,e,"access private method"),r),"__privateMethod"),a0,C5,NN,voe,boe,WQ,FN,GQ,uw,LN,ON,MN,qQ,fA,L_e,M_e,F_e,Apt,O_e,Q_e,HQ,U_e,q_e,E5=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),ul(this,fA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,ul(this,a0),ul(this,C5),ul(this,NN),ul(this,voe),ul(this,boe),ul(this,WQ),ul(this,FN),ul(this,GQ,null),ul(this,uw),ul(this,LN),ul(this,ON,null),ul(this,MN,null),ul(this,qQ,null),ul(this,M_e,async o=>{var a;Gi(this,LN).reset();let{body:c,redirected:l,status:u,headers:f}=o;if(u===204){Dv(this,fA,HQ).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(l?ha(this,NN,new URL(o.url)):ha(this,NN,void 0),u!==200){Dv(this,fA,HQ).call(this,`Non-200 status code (${u})`,u);return}if(!(f.get("content-type")||"").startsWith("text/event-stream")){Dv(this,fA,HQ).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Gi(this,a0)===this.CLOSED)return;ha(this,a0,this.OPEN);let p=new Event("open");if((a=Gi(this,qQ))==null||a.call(this,p),this.dispatchEvent(p),typeof c!="object"||!c||!("getReader"in c)){Dv(this,fA,HQ).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=c.getReader(),g=!0;do{let{done:y,value:E}=await h.read();E&&Gi(this,LN).feed(m.decode(E,{stream:!y})),y&&(g=!1,Gi(this,LN).reset(),Dv(this,fA,U_e).call(this))}while(g)}),ul(this,F_e,o=>{ha(this,uw,void 0),!(o.name==="AbortError"||o.type==="aborted")&&Dv(this,fA,U_e).call(this,N_e(o))}),ul(this,O_e,o=>{typeof o.id=="string"&&ha(this,GQ,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Gi(this,NN)?Gi(this,NN).origin:Gi(this,C5).origin,lastEventId:o.id||""});Gi(this,MN)&&(!o.event||o.event==="message")&&Gi(this,MN).call(this,a),this.dispatchEvent(a)}),ul(this,Q_e,o=>{ha(this,WQ,o)}),ul(this,q_e,()=>{ha(this,FN,void 0),Gi(this,a0)===this.CONNECTING&&Dv(this,fA,L_e).call(this)});try{if(e instanceof URL)ha(this,C5,e);else if(typeof e=="string")ha(this,C5,new URL(e,QAr()));else throw new Error("Invalid URL")}catch{throw OAr("An invalid or illegal string was specified")}ha(this,LN,Eoe({onEvent:Gi(this,O_e),onRetry:Gi(this,Q_e)})),ha(this,a0,this.CONNECTING),ha(this,WQ,3e3),ha(this,boe,(n=r?.fetch)!=null?n:globalThis.fetch),ha(this,voe,(i=r?.withCredentials)!=null?i:!1),Dv(this,fA,L_e).call(this)}get readyState(){return Gi(this,a0)}get url(){return Gi(this,C5).href}get withCredentials(){return Gi(this,voe)}get onerror(){return Gi(this,ON)}set onerror(e){ha(this,ON,e)}get onmessage(){return Gi(this,MN)}set onmessage(e){ha(this,MN,e)}get onopen(){return Gi(this,qQ)}set onopen(e){ha(this,qQ,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){Gi(this,FN)&&clearTimeout(Gi(this,FN)),Gi(this,a0)!==this.CLOSED&&(Gi(this,uw)&&Gi(this,uw).abort(),ha(this,a0,this.CLOSED),ha(this,uw,void 0))}};a0=new WeakMap,C5=new WeakMap,NN=new WeakMap,voe=new WeakMap,boe=new WeakMap,WQ=new WeakMap,FN=new WeakMap,GQ=new WeakMap,uw=new WeakMap,LN=new WeakMap,ON=new WeakMap,MN=new WeakMap,qQ=new WeakMap,fA=new WeakSet,L_e=s(function(){ha(this,a0,this.CONNECTING),ha(this,uw,new AbortController),Gi(this,boe)(Gi(this,C5),Dv(this,fA,Apt).call(this)).then(Gi(this,M_e)).catch(Gi(this,F_e))},"connect_fn"),M_e=new WeakMap,F_e=new WeakMap,Apt=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Gi(this,GQ)?{"Last-Event-ID":Gi(this,GQ)}:void 0},cache:"no-store",signal:(t=Gi(this,uw))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),O_e=new WeakMap,Q_e=new WeakMap,HQ=s(function(t,e){var r;Gi(this,a0)!==this.CLOSED&&ha(this,a0,this.CLOSED);let n=new xoe("error",{code:e,message:t});(r=Gi(this,ON))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),U_e=s(function(t,e){var r;if(Gi(this,a0)===this.CLOSED)return;ha(this,a0,this.CONNECTING);let n=new xoe("error",{code:e,message:t});(r=Gi(this,ON))==null||r.call(this,n),this.dispatchEvent(n),ha(this,FN,setTimeout(Gi(this,q_e),Gi(this,WQ)))},"scheduleReconnect_fn"),q_e=new WeakMap,E5.CONNECTING=0,E5.OPEN=1,E5.CLOSED=2;function QAr(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(QAr,"getBaseURL");d();d();var W_e;W_e=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function UAr(t){return(await W_e).getRandomValues(new Uint8Array(t))}s(UAr,"getRandomValues");async function qAr(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await UAr(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(qAr,"random");async function HAr(t){return await qAr(t)}s(HAr,"generateVerifier");async function WAr(t){let e=await(await W_e).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(WAr,"generateChallenge");async function G_e(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await HAr(t),r=await WAr(e);return{code_verifier:e,code_challenge:r}}s(G_e,"pkceChallenge");d();var Cpt=X.object({issuer:X.string(),authorization_endpoint:X.string(),token_endpoint:X.string(),registration_endpoint:X.string().optional(),scopes_supported:X.array(X.string()).optional(),response_types_supported:X.array(X.string()),response_modes_supported:X.array(X.string()).optional(),grant_types_supported:X.array(X.string()).optional(),token_endpoint_auth_methods_supported:X.array(X.string()).optional(),token_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),service_documentation:X.string().optional(),revocation_endpoint:X.string().optional(),revocation_endpoint_auth_methods_supported:X.array(X.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),introspection_endpoint:X.string().optional(),introspection_endpoint_auth_methods_supported:X.array(X.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:X.array(X.string()).optional(),code_challenge_methods_supported:X.array(X.string()).optional()}).passthrough(),j_e=X.object({access_token:X.string(),token_type:X.string(),expires_in:X.number().optional(),scope:X.string().optional(),refresh_token:X.string().optional()}).strip(),Ulo=X.object({error:X.string(),error_description:X.string().optional(),error_uri:X.string().optional()}),GAr=X.object({redirect_uris:X.array(X.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:X.string().optional(),grant_types:X.array(X.string()).optional(),response_types:X.array(X.string()).optional(),client_name:X.string().optional(),client_uri:X.string().optional(),logo_uri:X.string().optional(),scope:X.string().optional(),contacts:X.array(X.string()).optional(),tos_uri:X.string().optional(),policy_uri:X.string().optional(),jwks_uri:X.string().optional(),jwks:X.any().optional(),software_id:X.string().optional(),software_version:X.string().optional()}).strip(),jAr=X.object({client_id:X.string(),client_secret:X.string().optional(),client_id_issued_at:X.number().optional(),client_secret_expires_at:X.number().optional()}).strip(),Ept=GAr.merge(jAr),qlo=X.object({error:X.string(),error_description:X.string().optional()}).strip(),Hlo=X.object({token:X.string(),token_type_hint:X.string().optional()}).strip();var c0=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function dw(t,{serverUrl:e,authorizationCode:r}){let n=await VAr(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let l=await KAr(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(l),i=l}if(r!==void 0){let l=await t.codeVerifier(),u=await zAr(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:l,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let l=await YAr(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(l),"AUTHORIZED"}catch(l){console.error("Could not refresh OAuth tokens:",l)}let{authorizationUrl:a,codeVerifier:c}=await $Ar(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(c),await t.redirectToAuthorization(a),"REDIRECT"}s(dw,"auth");async function VAr(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:MQ}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return Cpt.parse(await i.json())}}s(VAr,"discoverOAuthMetadata");async function $Ar(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let c=await G_e(),l=c.code_verifier,u=c.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:l}}s($Ar,"startAuthorization");async function zAr(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",c;if(e){if(c=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else c=new URL("/token",t);let l=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&l.set("client_secret",r.client_secret);let u=await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:l});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return j_e.parse(await u.json())}s(zAr,"exchangeAuthorization");async function YAr(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let c=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!c.ok)throw new Error(`Token refresh failed: HTTP ${c.status}`);return j_e.parse(await c.json())}s(YAr,"refreshAuthorization");async function KAr(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return Ept.parse(await i.json())}s(KAr,"registerClient");var V_e=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},Ioe=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new c0("No auth provider");let r;try{r=await dw(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new c0;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new E5(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new V_e(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(c){r(c),(o=this.onerror)===null||o===void 0||o.call(this,c),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let c=i,l;try{l=cw.parse(JSON.parse(c.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,l)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new c0("No auth provider");if(await dw(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new c0("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let c={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},l=await fetch(this._endpoint,c);if(!l.ok){if(l.status===401&&this._authProvider){if(await dw(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new c0;return this.send(e)}let u=await l.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${l.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var Toe=class extends lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new Ioe(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(UQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),ud(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(ev)}),this.mcp.setNotificationHandler(QQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),ud(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(ev)})}};d();d();var umt=Ne(cmt(),1),jQ=Ne(require("node:process"),1),dmt=require("node:stream");d();var _oe=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),byr(r)}clear(){this._buffer=void 0}};function byr(t){return cw.parse(JSON.parse(t))}s(byr,"deserializeMessage");function lmt(t){return JSON.stringify(t)+`
`}s(lmt,"serializeMessage");var Iyr=jQ.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Tyr(){let t={};for(let e of Iyr){let r=jQ.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Tyr,"getDefaultEnvironment");var Soe=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new _oe,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new dmt.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,c,l;this._process=(0,umt.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:Tyr(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:jQ.default.platform==="win32"&&wyr(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var f,p;if(u.name==="AbortError"){(f=this.onclose)===null||f===void 0||f.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var f;this._process=void 0,(f=this.onclose)===null||f===void 0||f.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),(c=this._process.stdout)===null||c===void 0||c.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(l=this._process.stdout)===null||l===void 0||l.on("error",u=>{var f;(f=this.onerror)===null||f===void 0||f.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=lmt(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function wyr(){return"type"in jQ.default}s(wyr,"isElectron");var Roe=class extends lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...M0t(),...r.env||{}},r.stderr="pipe",new Soe(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{e5(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};d();d();d();var koe=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=Eoe({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var _yr={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},VQ=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},Poe=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:_yr}async _authThenStart(){var e;if(!this._authProvider)throw new c0("No auth provider");let r;try{r=await dw(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new c0;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new VQ(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var c;(c=this.onerror)===null||c===void 0||c.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var c,l,u,f;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new koe).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=cw.parse(JSON.parse(m.data));i!==void 0&&OQ(g)&&(g.id=i),(c=this.onmessage)===null||c===void 0||c.call(this,g)}catch(g){(l=this.onerror)===null||l===void 0||l.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(f=this.onerror)===null||f===void 0||f.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new c0("No auth provider");if(await dw(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new c0("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:c}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:aoe(e)?e.id:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let l=await this._commonHeaders();l.set("content-type","application/json"),l.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:l,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},f=await fetch(this._url,u),p=f.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!f.ok){if(f.status===401&&this._authProvider){if(await dw(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new c0;return this.send(e)}let y=await f.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${f.status}): ${y}`)}if(f.status===202){cpt(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var E;return(E=this.onerror)===null||E===void 0?void 0:E.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=f.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(f.body,{onresumptiontoken:c});else if(g?.includes("application/json")){let y=await f.json(),E=Array.isArray(y)?y.map(x=>cw.parse(x)):[cw.parse(y)];for(let x of E)(i=this.onmessage)===null||i===void 0||i.call(this,x)}else throw new VQ(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new VQ(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var Boe=class extends lw{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new Poe(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(UQ,r=>{os.info(this.ctx,"Tool list changed, refreshing tools..."),ud(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(ev)}),this.mcp.setNotificationHandler(QQ,r=>{os.info(this.ctx,"Prompts list changed, refreshing tools..."),ud(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(ev)})}};d();var Doe=class extends qT{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new mc;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(fC).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var fmt=Ne(Lc());var Noe=class t extends th{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new Xie;this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new fmt.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n),a=this.getServerPrefix(r);if(!o){os.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(sd).getToolById(`${r}.${n}`)||this.registerTool(r,a,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:c}=o;if(a==="running"&&c)return await c.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let c=a.name,l=this.getToolStatus(n,c);l&&(a._status=l)}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:o})}else i.status==="error"?r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:i.error}):r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));os.error(this.ctx,a),await VC(this.ctx,{message:a,server:n}),r.push({name:n,prefix:this.getServerPrefix(n),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}getServerPrefix(r){let i=this.getAllTools().find(o=>o.name===r);return i?i.prefix:this.prefixGenerator.generate(r)}async addServer(r){try{await ud(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new Toe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new Boe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new Roe(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(ev,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await ud(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(os.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let c=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;os.info(this.ctx,c),ud(this.ctx,{message:c,server:r.name});let l={...r,type:"sse"};return await this.addServer(l)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await VC(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(wc).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(xr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,prefix:i,tools:o}=r;for(let a of o)this.registerTool(n,i,a)}}registerTool(r,n,i){let{name:o,description:a,inputSchema:c,_status:l,_nameForModel:u,annotations:f}=i;os.debug(this.ctx,"register MCP Tool:",{...i}),l!=="disabled"&&this.ctx.get(sd).registerTool(new Doe({serverName:r,serverNamePrefix:n,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:c,annotations:f},p=>(os.debug(this.ctx,"copilot MCP Invoker:",r,o,p),this.callTool(r,o,p))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(sd).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await ud(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(ev),await i.cleanup())}this.MCPServersMap.clear()}};d();var pmt=Ne(Lc());var Loe=class t extends Qg{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new pmt.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(xr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};d();var Foe=Ne(Lc());var Syr=new Foe.ProtocolRequestType("copilot/showPanelMessageRequest"),Ryr=new Foe.ProtocolNotificationType("copilot/showPanelMessage"),Moe=class extends gD{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(r){return this.ctx.get(xr).connection.sendNotification(Ryr,r)}async sendPanelMessageRequest(r){let n=this.ctx.get(xr).connection,i;try{i=await n.sendRequest(Syr,r)}catch(c){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${vE(c)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};d();d();var kyr=new vt("fetcher"),Pyr="https://default.exp-tas.com/",Ooe=class extends jn{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Nu(i)||`${r}/`.startsWith(Pyr))throw i;kyr.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var mmt=new vt("fetcher"),Qoe=class extends jn{constructor(r,n=new IN(r),i=new xN(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new Ooe(r,n,i,()=>{mmt.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(gv).once(()=>{this.updateFetcher()}),r.get(Zg).onConfigChange(kt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=vi(r,kt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(ds).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=vi(this.ctx,kt.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(mmt.debug(this.ctx,n),this.currentFetcher=r)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(r,n){return this.currentFetcher.fetch(r,n)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};d();var Uoe=class extends wc{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(xr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};d();d();var hmt=Ne(require("crypto")),gmt=require("os");var Byr=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function Dyr(t){let e=t.replace(/-/g,":").toLowerCase();return!Byr.has(e)}s(Dyr,"validateMacAddress");function Nyr(){let t=(0,gmt.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(Dyr(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(Nyr,"getMac");var rSe;function Lyr(){try{let t=Nyr();return hmt.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(Lyr,"getMacMachineId");function Amt(){return rSe||(rSe=Lyr()||cr()),rSe}s(Amt,"getMachineId");var Myr=cr()+Date.now(),ymt=new As(Myr,Amt());d();FV();var qoe=class extends iu{constructor(r,n=new nSe){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(xr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},nSe=class extends iu{static{s(this,"SpawnUrlOpener")}async open(e){await GL(e)}};d();d();var Hoe=class extends Xte{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(eA).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(eA).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(eA).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(c=>c.document).filter(c=>c!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(c=>c.document).filter(c=>c!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var Woe=class extends id{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new Hoe(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(ds).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function Cmt(t){let e=new Zg(process.env),r=tit(e);r.set(Zg,e),r.set(gv,new gv),r.set(jn,new Qoe(r)),r.set(ka,new ka(r)),Ewe(r,{});let n=AQe();r.set(pu,n);let i=new SQ(r);r.set(Qr,i),r.set(SQ,i);let o=new Q_(r,n);r.set(Q_,o),r.set(Dn,new Dn(r,process.env)),r.set(g2,new g2),r.set(Ef,new Ef(r,"agent")),r.set(As,ymt),r.set(nn,new yre),r.set(ZR,p0t()),r.set(Ss,new Ss),r.set(yo,L0t),r.set(P2,new Mie(r)),r.set(id,new Woe(r)),r.set(eA,new eA(r)),r.set(Rl,new Rl),r.set(uc,kK(r,zut)),r.set(Lm,new Lm(r)),r.set(Qy,new j3),nat(r),Zte(r),xat(r),Jje(r),r.set(xr,new xr(r,t)),r.set(wc,new Uoe(r)),r.set(gD,new Moe(r)),r.set(iu,new qoe(r)),r.set(po,new Jie(r)),r.set(kQ,new kQ(r));let a=new nw(r);return r.set(pr,a),r.set(nw,a),r.set(bd,new hD(r,process.env)),r.set(Mc,new Mc(r)),S0t(r),_it(r),r.set(Xd,new Xd),r.set(ew,new ew),r.set(oA,new oA),r.set(Fd,new Oie),r.set(HC,new HC),r.set(Ig,new Kte(r)),r.set(Fy,new HD),r.set(Jg,new Jg(r)),r.set(ZE,new ZE(r)),r.set(qc,new qc(r)),r.set(xu,new zie(r)),r.set(AT,new Kie(r)),r.set(fC,new Yie(r)),r.set(sd,new sd(r)),r.set(fv,new fv(r)),r.set(Xg,new Xg(r)),r.set(th,new Noe(r)),r.set(Qg,new Loe(r)),r.set(pC,new pC),r.set(Jf,new Jf),r.set(CC,new CC(r)),r.set(eh,new hee([new ere,new tre])),r}s(Cmt,"createLanguageServerContext");d();var iSe=require("events"),$Q=Ne(require("fs"));FV();var joe=Ne(Lc());d();var vmt=Ne(require("fs")),xmt=Ne(require("http")),qN=Ne(require("path"));var Goe=class{constructor(e,r){this.port=e;let n;this.server=xmt.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",c=>{Emt(o,JSON.stringify(c))});return;case"/stdout":r.on("write",c=>{Emt(o,JSON.stringify(c))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;qN.basename(__dirname)!=="debug"&&(a=qN.dirname(__dirname)),n??=vmt.readFileSync(qN.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function Emt(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(Emt,"writeData");var oSe=class extends joe.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},sSe=class extends joe.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function bmt(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new iSe.EventEmitter;let c=new Goe(i,n).listen();i===0&&await GL(`http://localhost:${c.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let c=Date.now().toString();o==="1"||o==="true"?a=$Q.openSync(`stdio${c}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=$Q.openSync(o.replaceAll("%s",c),"w"))}catch(c){console.error(c)}if(a){let c=s(l=>{a&&$Q.appendFile(a,l,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new iSe.EventEmitter,n.on("read",l=>c(`<-- ${JSON.stringify(l)}
`)),n.on("write",l=>c(`--> ${JSON.stringify(l)}
`))}return n&&(e=new sSe(e,n),r=new oSe(r,n)),[e,r]}s(bmt,"wrapTransports");async function wmt(){let t=eHe(process.argv.slice(2)).version(new lo().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new ph.IPCMessageReader(process),n=new ph.IPCMessageWriter(process)):e.stdio?(r=new ph.StreamMessageReader(process.stdin),n=new ph.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await Nv.mkdtemp(Imt.default.tmpdir()+"/github-copilot-"));try{let c=kme(),l=JSON.parse(await Nv.readFile(zQ.join(c,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await Nv.readFile(zQ.join(c,"apps.json"),"utf8"))}catch{}let f=!1;for(let p of Object.keys(l)){let m=`${p}:${Zh}`;u[m]||!l[p].user||!l[p].oauth_token||(u[m]={user:l[p].user,oauth_token:l[p].oauth_token,githubAppId:Zh},f=!0)}f&&await Nv.writeFile(zQ.join(c,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await Nv.rm(zQ.join(c,"hosts.json"),{force:!0})}catch{}let i=(0,ph.createConnection)(ph.ProposedFeatures.all,...await bmt(process.env,r,n)),o=Cmt(i);console=rUe(o);let a=o.get(xr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(wmt,"main");Tmt.isMainThread?require.main===module&&wmt():eUe()&&tUe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@azure/msal-node/dist/cache/serializer/Serializer.mjs:
@azure/msal-node/dist/cache/serializer/Deserializer.mjs:
@azure/msal-node/dist/internals.mjs:
@azure/msal-node/dist/utils/Constants.mjs:
@azure/msal-node/dist/utils/NetworkUtils.mjs:
@azure/msal-node/dist/network/HttpClient.mjs:
@azure/msal-node/dist/error/ManagedIdentityErrorCodes.mjs:
@azure/msal-node/dist/error/ManagedIdentityError.mjs:
@azure/msal-node/dist/config/ManagedIdentityId.mjs:
@azure/msal-node/dist/error/NodeAuthError.mjs:
@azure/msal-node/dist/config/Configuration.mjs:
@azure/msal-node/dist/crypto/GuidGenerator.mjs:
@azure/msal-node/dist/utils/EncodingUtils.mjs:
@azure/msal-node/dist/crypto/HashUtils.mjs:
@azure/msal-node/dist/crypto/PkceGenerator.mjs:
@azure/msal-node/dist/crypto/CryptoProvider.mjs:
@azure/msal-node/dist/cache/NodeStorage.mjs:
@azure/msal-node/dist/cache/TokenCache.mjs:
@azure/msal-node/dist/client/ClientAssertion.mjs:
@azure/msal-node/dist/packageMetadata.mjs:
@azure/msal-node/dist/client/UsernamePasswordClient.mjs:
@azure/msal-node/dist/protocol/Authorize.mjs:
@azure/msal-node/dist/client/ClientApplication.mjs:
@azure/msal-node/dist/network/LoopbackClient.mjs:
@azure/msal-node/dist/client/DeviceCodeClient.mjs:
@azure/msal-node/dist/client/PublicClientApplication.mjs:
@azure/msal-node/dist/client/ClientCredentialClient.mjs:
@azure/msal-node/dist/client/OnBehalfOfClient.mjs:
@azure/msal-node/dist/client/ConfidentialClientApplication.mjs:
@azure/msal-node/dist/utils/TimeUtils.mjs:
@azure/msal-node/dist/network/HttpClientWithRetries.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/BaseManagedIdentitySource.mjs:
@azure/msal-node/dist/retry/LinearRetryStrategy.mjs:
@azure/msal-node/dist/retry/DefaultManagedIdentityRetryPolicy.mjs:
@azure/msal-node/dist/config/ManagedIdentityRequestParameters.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AppService.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/AzureArc.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/CloudShell.mjs:
@azure/msal-node/dist/retry/ExponentialRetryStrategy.mjs:
@azure/msal-node/dist/retry/ImdsRetryPolicy.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/Imds.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/ServiceFabric.mjs:
@azure/msal-node/dist/client/ManagedIdentitySources/MachineLearning.mjs:
@azure/msal-node/dist/client/ManagedIdentityClient.mjs:
@azure/msal-node/dist/client/ManagedIdentityApplication.mjs:
@azure/msal-node/dist/cache/distributed/DistributedCachePlugin.mjs:
@azure/msal-node/dist/index.mjs:
  (*! @azure/msal-node v3.6.3 2025-07-08 *)

@azure/msal-common/dist/utils/Constants.mjs:
@azure/msal-common/dist/error/AuthErrorCodes.mjs:
@azure/msal-common/dist/error/AuthError.mjs:
@azure/msal-common/dist/error/ClientAuthErrorCodes.mjs:
@azure/msal-common/dist/error/ClientAuthError.mjs:
@azure/msal-common/dist/crypto/ICrypto.mjs:
@azure/msal-common/dist/logger/Logger.mjs:
@azure/msal-common/dist/packageMetadata.mjs:
@azure/msal-common/dist/authority/AuthorityOptions.mjs:
@azure/msal-common/dist/account/AuthToken.mjs:
@azure/msal-common/dist/utils/TimeUtils.mjs:
@azure/msal-common/dist/cache/utils/CacheHelpers.mjs:
@azure/msal-common/dist/error/ClientConfigurationErrorCodes.mjs:
@azure/msal-common/dist/error/ClientConfigurationError.mjs:
@azure/msal-common/dist/utils/StringUtils.mjs:
@azure/msal-common/dist/request/ScopeSet.mjs:
@azure/msal-common/dist/account/ClientInfo.mjs:
@azure/msal-common/dist/account/AccountInfo.mjs:
@azure/msal-common/dist/authority/AuthorityType.mjs:
@azure/msal-common/dist/account/TokenClaims.mjs:
@azure/msal-common/dist/authority/ProtocolMode.mjs:
@azure/msal-common/dist/cache/entities/AccountEntity.mjs:
@azure/msal-common/dist/utils/UrlUtils.mjs:
@azure/msal-common/dist/url/UrlString.mjs:
@azure/msal-common/dist/authority/AuthorityMetadata.mjs:
@azure/msal-common/dist/error/CacheErrorCodes.mjs:
@azure/msal-common/dist/error/CacheError.mjs:
@azure/msal-common/dist/cache/CacheManager.mjs:
@azure/msal-common/dist/telemetry/performance/PerformanceEvent.mjs:
@azure/msal-common/dist/telemetry/performance/StubPerformanceClient.mjs:
@azure/msal-common/dist/config/ClientConfiguration.mjs:
@azure/msal-common/dist/account/CcsCredential.mjs:
@azure/msal-common/dist/constants/AADServerParamKeys.mjs:
@azure/msal-common/dist/request/RequestParameterBuilder.mjs:
@azure/msal-common/dist/authority/OpenIdConfigResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryResponse.mjs:
@azure/msal-common/dist/authority/CloudInstanceDiscoveryErrorResponse.mjs:
@azure/msal-common/dist/utils/FunctionWrappers.mjs:
@azure/msal-common/dist/authority/RegionDiscovery.mjs:
@azure/msal-common/dist/authority/Authority.mjs:
@azure/msal-common/dist/authority/AuthorityFactory.mjs:
@azure/msal-common/dist/error/ServerError.mjs:
@azure/msal-common/dist/network/RequestThumbprint.mjs:
@azure/msal-common/dist/network/ThrottlingUtils.mjs:
@azure/msal-common/dist/error/NetworkError.mjs:
@azure/msal-common/dist/client/BaseClient.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthErrorCodes.mjs:
@azure/msal-common/dist/error/InteractionRequiredAuthError.mjs:
@azure/msal-common/dist/utils/ProtocolUtils.mjs:
@azure/msal-common/dist/crypto/PopTokenGenerator.mjs:
@azure/msal-common/dist/cache/persistence/TokenCacheContext.mjs:
@azure/msal-common/dist/response/ResponseHandler.mjs:
@azure/msal-common/dist/utils/ClientAssertionUtils.mjs:
@azure/msal-common/dist/client/AuthorizationCodeClient.mjs:
@azure/msal-common/dist/client/RefreshTokenClient.mjs:
@azure/msal-common/dist/client/SilentFlowClient.mjs:
@azure/msal-common/dist/protocol/Authorize.mjs:
@azure/msal-common/dist/telemetry/server/ServerTelemetryManager.mjs:
@azure/msal-common/dist/index-node.mjs:
@azure/msal-common/dist/index.mjs:
  (*! @azure/msal-common v15.8.1 2025-07-08 *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
